parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"omoA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KernelBackend=exports.DataStorage=exports.EPSILON_FLOAT16=exports.EPSILON_FLOAT32=void 0;const r=1e-7;exports.EPSILON_FLOAT32=r;const e=1e-4;exports.EPSILON_FLOAT16=e;class t{constructor(r,e){this.backend=r,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(r){return this.data.has(r)||this.dataMover.moveData(this.backend,r),this.data.get(r)}set(r,e){this.dataIdsCount++,this.data.set(r,e)}has(r){return this.data.has(r)}delete(r){return this.dataIdsCount--,this.data.delete(r)}numDataIds(){return this.dataIdsCount}}exports.DataStorage=t;class n{time(r){return a("time")}read(r){return a("read")}readSync(r){return a("readSync")}numDataIds(){return a("numDataIds")}disposeData(r){return a("disposeData")}write(r,e,t){return a("write")}move(r,e,t,n){return a("move")}memory(){return a("memory")}floatPrecision(){return a("floatPrecision")}epsilon(){return 32===this.floatPrecision()?r:e}batchMatMul(r,e,t,n){return a("batchMatMul")}fusedBatchMatMul({a:r,b:e,transposeA:t,transposeB:n,bias:u,activation:o,preluActivationWeights:s}){return a("fusedBatchMatMul")}slice(r,e,t){return a("slice")}stridedSlice(r,e,t,n){return a("stridedSlice")}unstack(r,e){return a("unstack")}reverse(r,e){return a("reverse")}concat(r,e){return a("concat")}neg(r){return a("neg")}add(r,e){return a("add")}addN(r){return a("addN")}subtract(r,e){return a("subtract")}multiply(r,e){return a("multiply")}realDivide(r,e){return a("realDivide")}floorDiv(r,e){return a("floorDiv")}sum(r,e){return a("sum")}prod(r,e){return a("prod")}unsortedSegmentSum(r,e,t){return a("unsortedSegmentSum")}argMin(r,e){return a("argMin")}argMax(r,e){return a("argMax")}equal(r,e){return a("equal")}notEqual(r,e){return a("notEqual")}less(r,e){return a("less")}lessEqual(r,e){return a("lessEqual")}greater(r,e){return a("greater")}greaterEqual(r,e){return a("greaterEqual")}logicalNot(r){return a("logicalNot")}logicalAnd(r,e){return a("logicalAnd")}logicalOr(r,e){return a("logicalOr")}where(r){return a("where")}select(r,e,t){return a("select")}topk(r,e,t){return a("topk")}min(r,e){return a("min")}minimum(r,e){return a("minimum")}mod(r,e){return a("mod")}max(r,e){return a("max")}maximum(r,e){return a("maximum")}all(r,e){return a("all")}any(r,e){return a("any")}squaredDifference(r,e){return a("squaredDifference")}ceil(r){return a("ceil")}floor(r){return a("floor")}round(r){return a("round")}sign(r){return a("sign")}isNaN(r){return a("isNaN")}isInf(r){return a("isInf")}isFinite(r){return a("isFinite")}pow(r,e){return a("pow")}exp(r){return a("exp")}expm1(r){return a("expm1")}softmax(r,e){return a("softmax")}log(r){return a("log")}log1p(r){return a("log1p")}sqrt(r){return a("sqrt")}rsqrt(r){return a("rsqrt")}square(r){return a("square")}reciprocal(r){return a("reciprocal")}relu(r){return a("relu")}relu6(r){return a("relu6")}prelu(r,e){return a("prelu")}elu(r){return a("elu")}eluDer(r,e){return a("eluDer")}selu(r){return a("selu")}int(r){return a("int")}clip(r,e,t){return a("clip")}abs(r){return a("abs")}complexAbs(r){return a("complexAbs")}sigmoid(r){return a("sigmoid")}softplus(r){return a("softplus")}sin(r){return a("sin")}cos(r){return a("cos")}tan(r){return a("tan")}asin(r){return a("asin")}acos(r){return a("acos")}atan(r){return a("atan")}atan2(r,e){return a("atan2")}sinh(r){return a("sinh")}cosh(r){return a("cosh")}tanh(r){return a("tanh")}asinh(r){return a("asinh")}acosh(r){return a("acosh")}atanh(r){return a("atanh")}erf(r){return a("erf")}step(r,e){return a("step")}fusedConv2d({input:r,filter:e,convInfo:t,bias:n,activation:u,preluActivationWeights:o}){return a("fusedConv2d")}conv2d(r,e,t){return a("conv2d")}conv2dDerInput(r,e,t){return a("conv2dDerInput")}conv2dDerFilter(r,e,t){return a("conv2dDerFilter")}fusedDepthwiseConv2D({input:r,filter:e,convInfo:t,bias:n,activation:u,preluActivationWeights:o}){return a("fusedDepthwiseConv2D")}depthwiseConv2D(r,e,t){return a("depthwiseConv2D")}depthwiseConv2DDerInput(r,e,t){return a("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(r,e,t){return a("depthwiseConv2DDerFilter")}conv3d(r,e,t){return a("conv3d")}conv3dDerInput(r,e,t){return a("conv3dDerInput")}conv3dDerFilter(r,e,t){return a("conv3dDerFilter")}maxPool(r,e){return a("maxPool")}maxPoolBackprop(r,e,t,n){return a("maxPoolBackprop")}avgPool(r,e){return a("avgPool")}avgPoolBackprop(r,e,t){return a("avgPoolBackprop")}avgPool3d(r,e){return a("avgPool3d")}avgPool3dBackprop(r,e,t){return a("avgPool3dBackprop")}maxPool3d(r,e){return a("maxPool3d")}maxPool3dBackprop(r,e,t,n){return a("maxPool3dBackprop")}reshape(r,e){return a("reshape")}cast(r,e){return a("cast")}tile(r,e){return a("tile")}pad(r,e,t){return a("pad")}transpose(r,e){return a("transpose")}gather(r,e,t){return a("gather")}gatherND(r,e){return a("gatherND")}scatterND(r,e,t){return a("scatterND")}batchToSpaceND(r,e,t){return a("batchToSpaceND")}spaceToBatchND(r,e,t){return a("spaceToBatchND")}resizeBilinear(r,e,t,n){return a("resizeBilinear")}resizeBilinearBackprop(r,e,t){return a("resizeBilinearBackprop")}resizeNearestNeighbor(r,e,t,n){return a("resizeNearestNeighbor")}resizeNearestNeighborBackprop(r,e,t){return a("resizeNearestNeighborBackprop")}batchNorm(r,e,t,n,u,o){return a("batchNorm")}localResponseNormalization4D(r,e,t,n,u){return a("localResponseNormalization4D")}LRNGrad(r,e,t,n,u,o,s){return a("LRNGrad")}multinomial(r,e,t,n){return a("multinomial")}oneHot(r,e,t,n){return a("oneHot")}cumsum(r,e,t,n){return a("cumsum")}nonMaxSuppression(r,e,t,n,u){return a("nonMaxSuppression")}fft(r){return a("fft")}ifft(r){return a("ifft")}complex(r,e){return a("complex")}real(r){return a("real")}imag(r){return a("imag")}cropAndResize(r,e,t,n,u,o){return a("cropAndResize")}depthToSpace(r,e,t){return a("depthToSpace")}split(r,e,t){return a("split")}sparseToDense(r,e,t,n){return a("sparseToDense")}diag(r){return a("diag")}fill(r,e,t){return a("fill")}onesLike(r){return a("onesLike")}zerosLike(r){return a("zerosLike")}linspace(r,e,t){return a("linspace")}dispose(){return a("dispose")}}function a(r){throw new Error(`'${r}' not yet implemented or not found in the registry. `+"This kernel may not be supported by the tfjs backend you have chosen")}exports.KernelBackend=n;
},{}],"Dhsi":[function(require,module,exports) {
"use strict";function t(t){let r=t.length,e=0,n=0;for(;r>0;)n=Math.random()*r|0,e=t[--r],t[r]=t[n],t[n]=e}function r(t,r,e){return Math.max(t,Math.min(r,e))}function e(t){return t%2==0?t:t+1}function n(t){let r=0;for(let e=0;e<t.length;e++)r+=t[e];return r}function o(t,r){const e=Math.random();return r*e+(1-e)*t}function i(t,r){let e=0;for(let n=0;n<t.length;n++){const o=Number(t[n])-Number(r[n]);e+=o*o}return e}function s(t,r){if(!t)throw new Error("string"==typeof r?r:r())}function u(t,r,e=""){s(p(t,r),()=>e+` Shapes ${t} and ${r} must match`)}function a(t){s(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function l(t,r=[],e=!1){if(null==r&&(r=[]),Array.isArray(t)||v(t)&&!e)for(let n=0;n<t.length;++n)l(t[n],r,e);else r.push(t);return r}function f(t){if(0===t.length)return 1;let r=t[0];for(let e=1;e<t.length;e++)r*=t[e];return r}function c(t){return 0===t.length}function p(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==r[e])return!1;return!0}function h(t){return t%1==0}function y(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const r=Math.exp(2*t);return(r-1)/(r+1)}}function x(t){const r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function m(r){const e=new Uint32Array(r);for(let t=0;t<r;++t)e[t]=t;return t(e),e}function g(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function w(t,r=(t=>0),e){return new Promise((n,o)=>{let i=0;const s=()=>{if(t())return void n();const u=r(++i);null!=e&&i>=e?o():setTimeout(s,u)};s()})}function d(t,r){let e=1,n=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(-1===t[i]){if(-1!==n)throw Error("Shapes can only have 1 implicit size. "+`Found -1 at dim ${n} and dim ${i}`);n=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(-1===n){if(r>0&&r!==e)throw Error(`Size(${r}) must match the product of shape ${t}`);return t}if(0===e)throw Error(`Cannot infer the missing size in [${t}] when `+"there are 0 elements");if(r%e!=0)throw Error("The implicit shape can't be a fractional number. "+`Got ${r} / ${e}`);const o=t.slice();return o[n]=r/e,o}function A(t,r){const e=r.length;return s((t=null==t?r.map((t,r)=>r):[].concat(t)).every(t=>t>=-e&&t<e),()=>`All values in axis param must be in range [-${e}, ${e}) but `+`got axis ${t}`),s(t.every(t=>h(t)),()=>"All values in axis param must be integers but "+`got axis ${t}`),t.map(t=>t<0?e+t:t)}function b(t,r){const e=[],n=[],o=null!=r&&Array.isArray(r)&&0===r.length,i=null==r||o?null:A(r,t).sort();let s=0;for(let u=0;u<t.length;++u){if(null!=i){if(i[s]===u&&1!==t[u])throw new Error(`Can't squeeze axis ${u} since its dim '${t[u]}' is not 1`);(null==i[s]||i[s]>u)&&1===t[u]&&(e.push(t[u]),n.push(u)),i[s]<=u&&s++}1!==t[u]&&(e.push(t[u]),n.push(u))}return{newShape:e,keptDims:n}}function $(t,r){let e=null;if(null==t||"float32"===t)e=new Float32Array(r);else if("int32"===t)e=new Int32Array(r);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);e=new Uint8Array(r)}return e}function E(t,r){let e=null;if(null==t||"float32"===t)e=new Float32Array(r);else if("int32"===t)e=new Int32Array(r);else if("bool"===t)e=new Uint8Array(r);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);e=new Array(r)}return e}function S(t,r){for(let e=0;e<t.length;e++){const n=t[e];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${r} being uploaded contains ${n}.`)}}function F(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function T(t,r){return"complex64"!==r&&(("float32"!==r||"complex64"===t)&&(("int32"!==r||"float32"===t||"complex64"===t)&&("bool"!==r||"bool"!==t)))}function v(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function M(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function U(t){if(null==t)return 0;let r=0;return t.forEach(t=>r+=t.length),r}function I(t){return"string"==typeof t||t instanceof String}function N(t){return"boolean"==typeof t}function k(t){return"number"==typeof t}function z(t){return Array.isArray(t)?z(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":k(t)?"float32":I(t)?"string":N(t)?"bool":"float32"}function D(t){return!!(t&&t.constructor&&t.call&&t.apply)}function q(t,r){for(let e=r;e<t;++e)if(t%e==0)return e;return t}function P(t){const r=t.length;if(r<2)return[];const e=new Array(r-1);e[r-2]=t[r-1];for(let n=r-3;n>=0;--n)e[n]=e[n+1]*t[n+1];return e}function C(t,r,e){const n=new Array;if(1===r.length){const o=r[0];for(let r=0;r<o;r++)n[r]=e[t+r]}else{const o=r[0],i=r.slice(1),s=i.reduce((t,r)=>t*r);for(let r=0;r<o;r++)n[r]=C(t+r*s,i,e)}return n}function L(t,r){if(0===t.length)return r[0];const e=t.reduce((t,r)=>t*r);if(0===e)return[];if(e!==r.length)throw new Error(`[${t}] does not match the input size ${r.length}.`);return C(0,t,r)}function O(t,r){const e=Z(t,r);for(let n=0;n<e.length;n++)e[n]=1;return e}function Z(t,r){if(null==r||"float32"===r||"complex64"===r)return new Float32Array(t);if("int32"===r)return new Int32Array(t);if("bool"===r)return new Uint8Array(t);throw new Error(`Unknown data type ${r}`)}function _(t,r){const e=t.reduce((t,r)=>t*r,1);if(null==r||"float32"===r)return L(t,new Float32Array(e));if("int32"===r)return L(t,new Int32Array(e));if("bool"===r)return L(t,new Uint8Array(e));throw new Error(`Unknown data type ${r}`)}function j(t){t.forEach(r=>{s(Number.isInteger(r)&&r>=0,()=>"Tensor must have a shape comprised of positive integers but got "+`shape [${t}].`)})}function B(t,r,e){if(0===r)return 0;if(1===r)return t[0];let n=t[t.length-1];for(let o=0;o<t.length-1;++o)n+=e[o]*t[o];return n}function G(t,r,e){if(0===r)return[];if(1===r)return[t];const n=new Array(r);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(t/e[o]),t-=n[o]*e[o];return n[n.length-1]=t,n}function V(t){return t&&t.then&&"function"==typeof t.then}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shuffle=t,exports.clamp=r,exports.nearestLargerEven=e,exports.sum=n,exports.randUniform=o,exports.distSquared=i,exports.assert=s,exports.assertShapesMatch=u,exports.assertNonNull=a,exports.flatten=l,exports.sizeFromShape=f,exports.isScalarShape=c,exports.arraysEqual=p,exports.isInt=h,exports.tanh=y,exports.sizeToSquarishShape=x,exports.createShuffledIndices=m,exports.rightPad=g,exports.repeatedTry=w,exports.inferFromImplicitShape=d,exports.parseAxisParam=A,exports.squeezeShape=b,exports.getTypedArrayFromDType=$,exports.getArrayFromDType=E,exports.checkConversionForErrors=S,exports.isValidDtype=F,exports.hasEncodingLoss=T,exports.isTypedArray=v,exports.bytesPerElement=M,exports.bytesFromStringArray=U,exports.isString=I,exports.isBoolean=N,exports.isNumber=k,exports.inferDtype=z,exports.isFunction=D,exports.nearestDivisor=q,exports.computeStrides=P,exports.toNestedArray=L,exports.makeOnesTypedArray=O,exports.makeZerosTypedArray=Z,exports.makeZerosNestedTypedArray=_,exports.assertNonNegativeIntegerDimensions=j,exports.locToIndex=B,exports.indexToLoc=G,exports.isPromise=V;
},{}],"rgHm":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQueryParams=r,exports.env=i,exports.setEnvironmentGlobal=g,exports.ENV=exports.Environment=void 0;var e=require("./util_base");const s="tfjsflags";class a{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. `+`Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,s){if(this.flagRegistry[t]={evaluationFn:e,setHook:s},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const s=this.evaluateFlag(t);if((0,e.isPromise)(s))throw new Error(`Flag ${t} cannot be synchronously evaluated. `+"Please use getAsync() instead.");return this.flags[t]=s,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=r(this.global.location.search);if(s in t){t[s].split(",").forEach(t=>{const[e,s]=t.split(":");this.urlFlags[e]=o(e,s)})}}}function r(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...s)=>(l(e,s[0],s[1]),s.join("="))),e}function l(t,e,s){t[decodeURIComponent(e)]=decodeURIComponent(s||"")}function o(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function i(){return n}exports.Environment=a;let n=null;function g(t){exports.ENV=n=t}exports.ENV=n;
},{"./util_base":"Dhsi"}],"FT5O":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"uQ5B":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process");let o;function n(){if(null==o){let n;if("undefined"!=typeof window)n=window;else if(void 0!==e)n=e;else if(void 0!==t)n=t;else{if("undefined"==typeof self)throw new Error("Could not find a global object");n=self}o=n}return o}function l(){const e=n();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}function r(e,t){const o=l();if(o.has(e))return o.get(e);{const n=t();return o.set(e,n),o.get(e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlobalNamespace=n,exports.getGlobal=r;
},{"process":"FT5O"}],"r3vI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pool=exports.PadV2=exports.OneHot=exports.OnesLike=exports.NonMaxSuppressionV5=exports.NonMaxSuppressionV4=exports.NonMaxSuppressionV3=exports.NotEqual=exports.Negate=exports.Multiply=exports.Mod=exports.MirrorPad=exports.Minimum=exports.Min=exports.Mean=exports.MaxPoolWithArgmax=exports.MaxPool3DBackprop=exports.MaxPool3D=exports.MaxPoolBackprop=exports.MaxPool=exports.Maximum=exports.Max=exports.LRNBackprop=exports.LRN=exports.LogSoftmax=exports.LogicalOr=exports.LogicalNot=exports.LogicalAnd=exports.Log1p=exports.Log=exports.LinSpace=exports.LessEqual=exports.Less=exports.IsNan=exports.IsInf=exports.IsFinite=exports.Imag=exports.IFFT=exports.Identity=exports.GreaterEqual=exports.Greater=exports.GatherNd=exports.GatherV2=exports.FusedBatchNorm=exports.FloorDiv=exports.Floor=exports.FlipLeftRight=exports.Fill=exports.FFT=exports.Expm1=exports.Exp=exports.Equal=exports.Erf=exports.EluGrad=exports.Elu=exports.Div=exports.Dilation2DBackpropFilter=exports.Dilation2DBackpropInput=exports.Dilation2D=exports.Diag=exports.DepthwiseConv2dNativeBackpropInput=exports.DepthwiseConv2dNativeBackpropFilter=exports.DepthwiseConv2dNative=exports.DepthToSpace=exports.CropAndResize=exports.Cumsum=exports.Cosh=exports.Cos=exports.Conv3DBackpropInputV2=exports.Conv3DBackpropFilterV2=exports.Conv3D=exports.Conv2DBackpropInput=exports.Conv2DBackpropFilter=exports.Conv2D=exports.Concat=exports.Complex=exports.ClipByValue=exports.Ceil=exports.Cast=exports.BroadcastTo=exports.BatchToSpaceND=exports.BatchMatMul=exports.AvgPool3DBackprop=exports.AvgPool3D=exports.AvgPoolBackprop=exports.AvgPool=exports.Atan2=exports.Atanh=exports.Atan=exports.Asinh=exports.Asin=exports.ArgMin=exports.ArgMax=exports.Any=exports.All=exports.AddN=exports.Add=exports.Acosh=exports.Acos=exports.Abs=void 0,exports.FusedDepthwiseConv2D=exports.FusedConv2D=exports._FusedMatMul=exports.RotateWithOffset=exports.FromPixels=exports.Step=exports.ZerosLike=exports.UnsortedSegmentSum=exports.Unpack=exports.Unique=exports.Transpose=exports.TopK=exports.Tile=exports.Tanh=exports.Tan=exports.StridedSlice=exports.SparseToDense=exports.Sub=exports.Square=exports.SquaredDifference=exports.Softmax=exports.SplitV=exports.SpaceToBatchND=exports.Sum=exports.Sqrt=exports.Softplus=exports.Sigmoid=exports.Sign=exports.Sinh=exports.Sin=exports.Slice=exports.Selu=exports.SelectV2=exports.ScatterNd=exports.Rsqrt=exports.Round=exports.Reverse=exports.Relu6=exports.ResizeBilinearGrad=exports.ResizeBilinear=exports.ResizeNearestNeighborGrad=exports.ResizeNearestNeighbor=exports.Reshape=exports.Relu=exports.Reciprocal=exports.Real=exports.Range=exports.Prod=exports.Prelu=exports.Pow=void 0;const o="Abs";exports.Abs=o;const t="Acos";exports.Acos=t;const e="Acosh";exports.Acosh=e;const s="Add";exports.Add=s;const r="AddN";exports.AddN=r;const p="All";exports.All=p;const x="Any";exports.Any=x;const n="ArgMax";exports.ArgMax=n;const a="ArgMin";exports.ArgMin=a;const c="Asin";exports.Asin=c;const i="Asinh";exports.Asinh=i;const l="Atan";exports.Atan=l;const u="Atanh";exports.Atanh=u;const d="Atan2";exports.Atan2=d;const D="AvgPool";exports.AvgPool=D;const S="AvgPoolBackprop";exports.AvgPoolBackprop=S;const g="AvgPool3D";exports.AvgPool3D=g;const h="AvgPool3DBackprop";exports.AvgPool3DBackprop=h;const M="BatchMatMul";exports.BatchMatMul=M;const v="BatchToSpaceND";exports.BatchToSpaceND=v;const N="BroadcastTo";exports.BroadcastTo=N;const A="Cast";exports.Cast=A;const B="Ceil";exports.Ceil=B;const C="ClipByValue";exports.ClipByValue=C;const m="Complex";exports.Complex=m;const F="Concat";exports.Concat=F;const R="Conv2D";exports.Conv2D=R;const P="Conv2DBackpropFilter";exports.Conv2DBackpropFilter=P;const k="Conv2DBackpropInput";exports.Conv2DBackpropInput=k;const L="Conv3D";exports.Conv3D=L;const T="Conv3DBackpropFilterV2";exports.Conv3DBackpropFilterV2=T;const I="Conv3DBackpropInputV2";exports.Conv3DBackpropInputV2=I;const f="Cos";exports.Cos=f;const V="Cosh";exports.Cosh=V;const q="Cumsum";exports.Cumsum=q;const E="CropAndResize";exports.CropAndResize=E;const G="DepthToSpace";exports.DepthToSpace=G;const w="DepthwiseConv2dNative";exports.DepthwiseConv2dNative=w;const z="DepthwiseConv2dNativeBackpropFilter";exports.DepthwiseConv2dNativeBackpropFilter=z;const b="DepthwiseConv2dNativeBackpropInput";exports.DepthwiseConv2dNativeBackpropInput=b;const y="Diag";exports.Diag=y;const O="Dilation2D";exports.Dilation2D=O;const U="Dilation2DBackpropInput";exports.Dilation2DBackpropInput=U;const W="Dilation2DBackpropFilter";exports.Dilation2DBackpropFilter=W;const _="Div";exports.Div=_;const H="Elu";exports.Elu=H;const K="EluGrad";exports.EluGrad=K;const Z="Erf";exports.Erf=Z;const j="Equal";exports.Equal=j;const J="Exp";exports.Exp=J;const Q="Expm1";exports.Expm1=Q;const X="FFT";exports.FFT=X;const Y="Fill";exports.Fill=Y;const $="FlipLeftRight";exports.FlipLeftRight=$;const oo="Floor";exports.Floor=oo;const to="FloorDiv";exports.FloorDiv=to;const eo="FusedBatchNorm";exports.FusedBatchNorm=eo;const so="GatherV2";exports.GatherV2=so;const ro="GatherNd";exports.GatherNd=ro;const po="Greater";exports.Greater=po;const xo="GreaterEqual";exports.GreaterEqual=xo;const no="Identity";exports.Identity=no;const ao="IFFT";exports.IFFT=ao;const co="Imag";exports.Imag=co;const io="IsFinite";exports.IsFinite=io;const lo="IsInf";exports.IsInf=lo;const uo="IsNan";exports.IsNan=uo;const Do="Less";exports.Less=Do;const So="LessEqual";exports.LessEqual=So;const go="LinSpace";exports.LinSpace=go;const ho="Log";exports.Log=ho;const Mo="Log1p";exports.Log1p=Mo;const vo="LogicalAnd";exports.LogicalAnd=vo;const No="LogicalNot";exports.LogicalNot=No;const Ao="LogicalOr";exports.LogicalOr=Ao;const Bo="LogSoftmax";exports.LogSoftmax=Bo;const Co="LRN";exports.LRN=Co;const mo="LRNBackprop";exports.LRNBackprop=mo;const Fo="Max";exports.Max=Fo;const Ro="Maximum";exports.Maximum=Ro;const Po="MaxPool";exports.MaxPool=Po;const ko="MaxPoolBackprop";exports.MaxPoolBackprop=ko;const Lo="MaxPool3D";exports.MaxPool3D=Lo;const To="MaxPool3DBackprop";exports.MaxPool3DBackprop=To;const Io="MaxPoolWithArgmax";exports.MaxPoolWithArgmax=Io;const fo="Mean";exports.Mean=fo;const Vo="Min";exports.Min=Vo;const qo="Minimum";exports.Minimum=qo;const Eo="MirrorPad";exports.MirrorPad=Eo;const Go="Mod";exports.Mod=Go;const wo="Multiply";exports.Multiply=wo;const zo="Negate";exports.Negate=zo;const bo="NotEqual";exports.NotEqual=bo;const yo="NonMaxSuppressionV3";exports.NonMaxSuppressionV3=yo;const Oo="NonMaxSuppressionV4";exports.NonMaxSuppressionV4=Oo;const Uo="NonMaxSuppressionV5";exports.NonMaxSuppressionV5=Uo;const Wo="OnesLike";exports.OnesLike=Wo;const _o="OneHot";exports.OneHot=_o;const Ho="PadV2";exports.PadV2=Ho;const Ko="Pool";exports.Pool=Ko;const Zo="Pow";exports.Pow=Zo;const jo="Prelu";exports.Prelu=jo;const Jo="Prod";exports.Prod=Jo;const Qo="Range";exports.Range=Qo;const Xo="Real";exports.Real=Xo;const Yo="Reciprocal";exports.Reciprocal=Yo;const $o="Relu";exports.Relu=$o;const ot="Reshape";exports.Reshape=ot;const tt="ResizeNearestNeighbor";exports.ResizeNearestNeighbor=tt;const et="ResizeNearestNeighborGrad";exports.ResizeNearestNeighborGrad=et;const st="ResizeBilinear";exports.ResizeBilinear=st;const rt="ResizeBilinearGrad";exports.ResizeBilinearGrad=rt;const pt="Relu6";exports.Relu6=pt;const xt="Reverse";exports.Reverse=xt;const nt="Round";exports.Round=nt;const at="Rsqrt";exports.Rsqrt=at;const ct="ScatterNd";exports.ScatterNd=ct;const it="SelectV2";exports.SelectV2=it;const lt="Selu";exports.Selu=lt;const ut="Slice";exports.Slice=ut;const dt="Sin";exports.Sin=dt;const Dt="Sinh";exports.Sinh=Dt;const St="Sign";exports.Sign=St;const gt="Sigmoid";exports.Sigmoid=gt;const ht="Softplus";exports.Softplus=ht;const Mt="Sqrt";exports.Sqrt=Mt;const vt="Sum";exports.Sum=vt;const Nt="SpaceToBatchND";exports.SpaceToBatchND=Nt;const At="SplitV";exports.SplitV=At;const Bt="Softmax";exports.Softmax=Bt;const Ct="SquaredDifference";exports.SquaredDifference=Ct;const mt="Square";exports.Square=mt;const Ft="Sub";exports.Sub=Ft;const Rt="SparseToDense";exports.SparseToDense=Rt;const Pt="StridedSlice";exports.StridedSlice=Pt;const kt="Tan";exports.Tan=kt;const Lt="Tanh";exports.Tanh=Lt;const Tt="Tile";exports.Tile=Tt;const It="TopK";exports.TopK=It;const ft="Transpose";exports.Transpose=ft;const Vt="Unique";exports.Unique=Vt;const qt="Unpack";exports.Unpack=qt;const Et="UnsortedSegmentSum";exports.UnsortedSegmentSum=Et;const Gt="ZerosLike";exports.ZerosLike=Gt;const wt="Step";exports.Step=wt;const zt="FromPixels";exports.FromPixels=zt;const bt="RotateWithOffset";exports.RotateWithOffset=bt;const yt="_FusedMatMul";exports._FusedMatMul=yt;const Ot="FusedConv2D";exports.FusedConv2D=Ot;const Ut="FusedDepthwiseConv2D";exports.FusedDepthwiseConv2D=Ut;
},{}],"yMO5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKernel=o,exports.getGradient=s,exports.getKernelsForBackend=i,exports.registerKernel=a,exports.registerGradient=c,exports.unregisterKernel=l,exports.unregisterGradient=g,exports.copyRegisteredKernels=d;var e=require("./environment"),r=require("./global_util");const n=(0,r.getGlobal)("kernelRegistry",()=>new Map),t=(0,r.getGlobal)("gradRegistry",()=>new Map);function o(e,r){const t=u(e,r);return n.get(t)}function s(e){return t.get(e)}function i(e){const r=n.entries(),t=[];for(;;){const{done:n,value:o}=r.next();if(n)break;const[s,i]=o,[a]=s.split("_");a===e&&t.push(i)}return t}function a(e){const{kernelName:r,backendName:t}=e,o=u(r,t);n.has(o)&&console.warn(`The kernel '${r}' for backend `+`'${t}' is already registered`),n.set(o,e)}function c(r){const{kernelName:n}=r;t.has(n)&&(0,e.env)().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${n}'`),t.set(n,r)}function l(e,r){const t=u(e,r);if(!n.has(t))throw new Error(`The kernel '${e}' for backend `+`'${r}' is not registered`);n.delete(t)}function g(e){if(!t.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);t.delete(e)}function d(e,r){i(e).forEach(e=>{a(Object.assign({},e,{backendName:r}))})}function u(e,r){return`${r}_${e}`}
},{"./environment":"rgHm","./global_util":"uQ5B"}],"UxaK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createScalarValue:!0,toTypedArray:!0,now:!0,fetch:!0,encodeString:!0,decodeString:!0};exports.createScalarValue=a,exports.toTypedArray=f,exports.now=i,exports.fetch=c,exports.encodeString=l,exports.decodeString=p;var r=require("./environment"),t=o(require("./util_base"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(t,a,u):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function a(e,r){return"string"===r?l(e):f([e],r)}function u(e,r){return e instanceof Float32Array&&"float32"===r||e instanceof Int32Array&&"int32"===r||e instanceof Uint8Array&&"bool"===r}function f(e,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=t.flatten(e)),(0,r.env)().getBool("DEBUG")&&t.checkConversionForErrors(e,n),u(e,n))return e;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(e);if("int32"===n)return new Int32Array(e);if("bool"===n){const r=new Uint8Array(e.length);for(let t=0;t<r.length;++t)0!==Math.round(e[t])&&(r[t]=1);return r}throw new Error(`Unknown data type ${n}`)}function i(){return(0,r.env)().platform.now()}function c(e,t){return(0,r.env)().platform.fetch(e,t)}function l(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.encode(e,t)}function p(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.decode(e,t)}Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});
},{"./environment":"rgHm","./util_base":"Dhsi"}],"AQQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkComputationForErrors=n,exports.Logger=exports.Profiler=void 0;var e=r(require("./util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var i=n?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(o,l,i):o[l]=e[l]}return o.default=e,r&&r.set(e,o),o}class o{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new l)}profileKernel(e,t,r){let o;const l=this.backendTimer.time(()=>{o=r()});for(let i=0;i<o.length;i++){const t=o[i];t.data().then(r=>{n(r,t.dtype,e)})}return{kernelName:e,outputs:o,inputs:t,timeMs:l.then(e=>e.kernelMs),extraInfo:l.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:o,inputs:n,extraInfo:l}=e;r.forEach(e=>{Promise.all([e.data(),o,l]).then(r=>{this.logger.logKernelProfile(t,e,r[0],r[1],n,r[2])})})}}function n(e,t,r){if("float32"!==t)return!1;for(let o=0;o<e.length;o++){const t=e[o];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${r}'`),!0}return!1}exports.Profiler=o;class l{logKernelProfile(t,r,o,n,l,i){const s="number"==typeof n?e.rightPad(`${n}ms`,9):n.error,c=e.rightPad(t,25),a=r.rank,u=r.size,f=e.rightPad(r.shape.toString(),14);let p="";for(const e in l){const t=l[e];if(null!=t){const o=t.shape||r.shape,n=o.length;p+=`${e}: ${n}D ${n>0?o:""} `}}console.log(`%c${c}\t%c${s}\t%c${a}D ${f}\t%c${u}\t%c${p}\t%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}exports.Logger=l;
},{"./util":"UxaK"}],"akbf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilteredNodesXToY=r,exports.backpropagateGradients=o;var t=n(require("./util"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=o?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function r(t,e,n){const r={},o={};for(let a=0;a<e.length;a++)r[e[a].id]=!0;for(let a=0;a<t.length;a++){const n=t[a],i=n.inputs;for(const t in i){const s=i[t];let u=!1;for(let t=0;t<e.length;t++)if(r[s.id]){n.outputs.forEach(t=>r[t.id]=!0),u=!0,o[n.id]=!0;break}if(u)break}}const i={};i[n.id]=!0;const s={};for(let a=t.length-1;a>=0;a--){const e=t[a],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(i[e.outputs[t].id]){for(const t in n)i[n[t].id]=!0,s[e.id]=!0;break}}const u=[];for(let a=0;a<t.length;a++){const e=t[a];if(o[e.id]&&s[e.id]){const t={};for(const o in e.inputs){const n=e.inputs[o];r[n.id]&&(t[o]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,u.push(n)}}return u}function o(e,n,r,o){for(let i=n.length-1;i>=0;i--){const s=n[i],u=[];if(s.outputs.forEach(t=>{const n=e[t.id];null!=n?u.push(n):u.push(null)}),null==s.gradient)throw new Error("Cannot compute gradient: gradient function not found "+`for ${s.kernelName}.`);const a=s.gradient(u);for(const n in s.inputs){if(!(n in a))throw new Error(`Cannot backprop through input ${n}. `+`Available gradients found: ${Object.keys(a)}.`);const i=r(()=>a[n]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`${n} must have 'float32' dtype, but has '${i.dtype}'`);const u=s.inputs[n];if(!t.arraysEqual(i.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`'${n}' has shape '${i.shape}', which does not match `+`the shape of the input '${u.shape}'`);if(null==e[u.id])e[u.id]=i;else{const t=e[u.id];e[u.id]=o(t,i),t.dispose()}}}}
},{"./util":"UxaK"}],"rJt4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensorToString=o;var e=require("./util");const t=20,r=3,n=7;function o(t,r,n,o){const l=(0,e.computeStrides)(r),i=s(t,r,n,l),c=r.length,p=u(t,r,n,l,i),a=["Tensor"];return o&&(a.push(`  dtype: ${n}`),a.push(`  rank: ${c}`),a.push(`  shape: [${r}]`),a.push("  values:")),a.push(p.map(e=>"    "+e).join("\n")),a.join("\n")}function s(t,r,n,o){const s=(0,e.sizeFromShape)(r),i=o[o.length-1],u=new Array(i).fill(0),p=r.length,a="complex64"===n?c(t):t;if(p>1)for(let e=0;e<s/i;e++){const t=e*i;for(let e=0;e<i;e++)u[e]=Math.max(u[e],l(a[t+e],0,n).length)}return u}function l(t,r,o){let s;return s=Array.isArray(t)?`${parseFloat(t[0].toFixed(n))} + `+`${parseFloat(t[1].toFixed(n))}j`:(0,e.isString)(t)?`'${t}'`:"bool"===o?i(t):parseFloat(t.toFixed(n)).toString(),(0,e.rightPad)(s,r)}function i(e){return 0===e?"false":"true"}function u(e,n,o,s,p,a=!0){const f="complex64"===o?2:1,h=n[0],m=n.length;if(0===m){if("complex64"===o){return[l(c(e)[0],0,o)]}return"bool"===o?[i(e[0])]:[e[0].toString()]}if(1===m){if(h>t){const t=r*f;let n=Array.from(e.slice(0,t)),s=Array.from(e.slice((h-r)*f,h*f));return"complex64"===o&&(n=c(n),s=c(s)),["["+n.map((e,t)=>l(e,p[t],o)).join(", ")+", ..., "+s.map((e,t)=>l(e,p[h-r+t],o)).join(", ")+"]"]}return["["+("complex64"===o?c(e):Array.from(e)).map((e,t)=>l(e,p[t],o)).join(", ")+"]"]}const g=n.slice(1),x=s.slice(1),d=s[0]*f,y=[];if(h>t){for(let t=0;t<r;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,!1))}y.push("...");for(let t=h-r;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}}else for(let t=0;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}const j=2===m?",":"";y[0]="["+y[0]+j;for(let t=1;t<y.length-1;t++)y[t]=" "+y[t]+j;let F=",\n";for(let t=2;t<m;t++)F+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":F),y}function c(e){const t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}
},{"./util":"UxaK"}],"Zqvm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTensorTracker=h,exports.setOpHandler=d,exports.setDeprecationWarningFn=p,exports.Variable=exports.Tensor=exports.TensorBuffer=void 0;var t=require("./tensor_format"),e=r(require("./util"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=i?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}class i{constructor(t,s,r){if(this.dtype=s,this.shape=t.slice(),this.size=e.sizeFromShape(t),null!=r){const t=r.length;e.assert(t===this.size,()=>`Length of values '${t}' does not match the size `+`inferred by the shape '${this.size}'.`)}if("complex64"===s)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||e.getArrayFromDType(s,this.size),this.strides=(0,e.computeStrides)(t)}set(t,...s){0===s.length&&(s=[0]),e.assert(s.length===this.rank,()=>`The number of provided coordinates (${s.length}) must `+`match the rank (${this.rank})`);const r=this.locToIndex(s);this.values[r]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e]){const e=`Requested out of range element at ${t}. `+`  Buffer shape=${this.shape}`;throw new Error(e)}e++}let s=t[t.length-1];for(let r=0;r<t.length-1;++r)s+=this.strides[r]*t[r];return this.values[s]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let s=0;s<t.length-1;++s)e+=this.strides[s]*t[s];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let s=0;s<e.length-1;++s)e[s]=Math.floor(t/this.strides[s]),t-=e[s]*this.strides[s];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return n().makeTensor(this.values,this.shape,this.dtype)}}exports.TensorBuffer=i;let n=null,a=null,o=null;function h(t){n=t}function d(t){a=t}function p(t){o=t}class l{constructor(t,s,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=s||"float32",this.size=e.sizeFromShape(t),this.strides=(0,e.computeStrides)(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return a.buffer(this.shape,this.dtype,t)}bufferSync(){return a.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return(0,e.toNestedArray)(this.shape,t)}arraySync(){return(0,e.toNestedArray)(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const t=n().read(this.dataId);if("string"===this.dtype){const r=await t;try{return r.map(t=>e.decodeString(t))}catch(s){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=n().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>e.decodeString(t))}catch(s){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await n().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(n().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return a.print(this,t)}clone(){return this.throwIfDisposed(),a.clone(this)}toString(e=!1){const s=this.dataSync();return(0,t.tensorToString)(s,this.shape,this.dtype,e)}cast(t){return this.throwIfDisposed(),a.cast(this,t)}variable(t=!0,e,s){return this.throwIfDisposed(),n().makeVariable(this,t,e,s)}}exports.Tensor=l,Object.defineProperty(l,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed});class u extends l{constructor(t,e,s,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and `+`previous value (${this.dtype}) must match`);if(!e.arraysEqual(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and `+`previous value (${this.shape}) must match`);n().disposeTensor(this),this.dataId=t.dataId,n().incRef(this,null)}dispose(){n().disposeVariable(this),this.isDisposedInternal=!0}}exports.Variable=u,Object.defineProperty(u,Symbol.hasInstance,{value:t=>t instanceof l&&null!=t.assign&&t.assign instanceof Function});
},{"./tensor_format":"rJt4","./util":"UxaK"}],"v4dC":[function(require,module,exports) {
"use strict";var o,t,n,e,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.upcastType=r,exports.sumOutType=c,exports.Rank=void 0,exports.Rank=o,function(o){o.R0="R0",o.R1="R1",o.R2="R2",o.R3="R3",o.R4="R4",o.R5="R5",o.R6="R6"}(o||(exports.Rank=o={})),function(o){o.float32="float32",o.int32="int32",o.bool="int32",o.complex64="complex64"}(t||(t={})),function(o){o.float32="float32",o.int32="int32",o.bool="bool",o.complex64="complex64"}(n||(n={})),function(o){o.float32="float32",o.int32="float32",o.bool="float32",o.complex64="complex64"}(e||(e={})),function(o){o.float32="complex64",o.int32="complex64",o.bool="complex64",o.complex64="complex64"}(l||(l={}));const i={float32:e,int32:t,bool:n,complex64:l};function r(o,t){if("string"===o||"string"===t){if("string"===o&&"string"===t)return"string";throw new Error(`Can not upcast ${o} with ${t}`)}return i[o][t]}function c(o){return r(o,"int32")}
},{}],"vUHI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTypesMatch=n,exports.assertTypesMatch=s,exports.isTensorInList=o,exports.getTensorsInContainer=i;var t=require("./tensor"),e=require("./types"),r=require("./util");function n(t,r){if(t.dtype===r.dtype)return[t,r];const n=(0,e.upcastType)(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function s(t,e){(0,r.assert)(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and`+` second(${e.dtype}) input must match`)}function o(t,e){return e.some(e=>e.id===t.id)}function i(t){const e=[];return u(t,e,new Set),e}function u(e,r,n){if(null==e)return;if(e instanceof t.Tensor)return void r.push(e);if(!p(e))return;const s=e;for(const t in s){const e=s[t];n.has(e)||(n.add(e),u(e,r,n))}}function p(t){return Array.isArray(t)||"object"==typeof t}
},{"./tensor":"Zqvm","./types":"v4dC","./util":"UxaK"}],"tmUz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOrMakeEngine=y,exports.add=k,exports.ENGINE=exports.Engine=void 0;var e=require("./backends/backend"),t=require("./environment"),s=require("./global_util"),n=require("./kernel_names"),r=require("./kernel_registry"),a=require("./profiler"),i=require("./tape"),o=require("./tensor"),c=require("./tensor_util"),h=l(require("./util"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=n?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,t&&t.set(e,s),s}class u{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class p{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new u}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t];if(await this.initializeBackend(s).success)return void(await this.setBackend(s))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make `+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been `+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,s=1){return e in this.registryFactory?(console.warn(`${e} backend was already registered. `+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:s},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:s}=this.initializeBackend(e);if(!(s?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new a.Profiler(this.backendInstance),!0}setupRegisteredKernels(){(0,r.getKernelsForBackend)(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){(0,r.getKernelsForBackend)(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(t){const s=this.registryFactory[t];if(null==s)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=s.factory();if(!r||r instanceof e.KernelBackend||"function"!=typeof r.then)return this.registry[t]=r,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,s=r.then(s=>!(e<this.pendingBackendInitId)&&(this.registry[t]=s,this.pendingBackendInit=null,!0)).catch(s=>!(e<this.pendingBackendInitId)&&(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(s.stack||s.message),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t],{success:n,asyncInit:r}=this.initializeBackend(s);if(r||n)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const s=this.state.tensorInfo.get(t),n=s.backend,r=this.readSync(t);n.disposeData(t),s.backend=e,e.move(t,r,s.shape,s.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let s,n=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}return this.scopedRun(()=>this.startScope(n),()=>this.endScope(s),()=>((s=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,t,s){e();try{const e=s();return t(),e}catch(n){throw t(),n}}nextTensorId(){return p.nextTensorId++}nextVariableId(){return p.nextVariableId++}clone(e){const t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),s={x:e};return this.addTapeNode(this.state.activeScope.name,s,[t],e=>({x:()=>{const t={x:e},s={dtype:"float32"};return g.runKernelFunc(t=>t.cast(e,"float32"),t,null,n.Cast,s)}}),[],{}),t}runKernel(e,t,s,n,r){return this.runKernelFunc(null,t,null,e,s,n,r)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,s){const n=this.backend.numDataIds();let r=0;s.forEach(e=>{r+="complex64"===e.dtype?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=n-t-r-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak `+`(${i} data ids) after running '${e}'`)}runKernelFunc(e,t,s,n,a,i,o){let c,h=[];const d=this.isTapeOn();null==n&&(n=null!=this.state.activeScope?this.state.activeScope.name:"");const l=this.state.numBytes,u=this.state.numTensors;let p;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const f=(0,r.getKernel)(n,this.backendName);let y,g;if(null!=f)p=(()=>{const e=this.backend.numDataIds();y=f.kernelFunc({inputs:t,attrs:a,backend:this.backend});const s=Array.isArray(y)?y:[y];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,e,s);const r=s.map(({dataId:e,shape:t,dtype:s})=>this.makeTensorFromDataId(e,t,s));if(d){let e=this.getTensorsForGradient(n,t,r);if(null==e){null==o&&(o=[]);const t=r.filter((e,t)=>o[t]);e=(i||[]).slice().concat(t)}h=this.saveTensorsForBackwardMode(e)}return r});else{const t=e=>{d&&(h=e.map(e=>this.keep(this.clone(e))))};p=(()=>{const s=this.backend.numDataIds();y=this.tidy(()=>e(this.backend,t));const r=Array.isArray(y)?y:[y];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,s,r),r})}return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(g=this.profiler.profileKernel(n,t,()=>p()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),c=g.outputs):c=p()}),d&&this.addTapeNode(n,t,c,s,h,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:n,bytesAdded:this.state.numBytes-l,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(e=>null!=t[e]?t[e].shape:null),outputShapes:c.map(e=>e.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(y)?c:c[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,s){const n=(0,r.getGradient)(e);if(null!=n){const e=n.inputsToSave||[],r=n.outputsToSave||[];let a;n.saveAllInputs?(h.assert(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(t).map(e=>t[e])):a=e.map(e=>t[e]);const i=s.filter((e,t)=>r[t]);return a.concat(i)}return null}makeTensor(e,t,s,n){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",n=n||this.backend;let r=e;"string"===s&&h.isString(e[0])&&(r=e.map(e=>h.encodeString(e)));const a=n.write(r,t,s),i=new o.Tensor(t,s,a,this.nextTensorId());if(this.incRef(i,n),"string"===s){const e=this.state.tensorInfo.get(a),t=(0,h.bytesFromStringArray)(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,s,n){s=s||"float32";const r=new o.Tensor(t,s,e,this.nextTensorId());return this.incRef(r,n),r}makeVariable(e,t=!0,s,n){s=s||this.nextVariableId().toString(),null!=n&&n!==e.dtype&&(e=e.cast(n));const r=new o.Variable(e,t,s,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}incRef(e,t){const s=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===s){this.state.numDataBuffers++;let s=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(s=e.size*h.bytesPerElement(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:s,refCount:0}),this.state.numBytes+=s}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof o.Variable||this.track(e)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;const t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const n of this.state.activeProfile.kernels)n.kernelTimeMs=await n.kernelTimeMs,n.extraInfo=await n.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,s,n,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:s,saved:a},c=(0,r.getGradient)(e);null!=c&&(n=c.gradFunc),null!=n&&(o.gradient=(e=>(e=e.map((e,t)=>{if(null==e){const e=s[t],n=h.makeZerosTypedArray(e.size,e.dtype);return this.makeTensor(n,e.shape,e.dtype)}return e}),n(e.length>1?e:e[0],a,i)))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,c.getTensorsInContainer)(e),s=new Set(t.map(e=>e.id));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||s.has(e.id)||e.dispose()}const n=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==n.id||this.track(e)})}gradients(e,t,s,n=!1){if(h.assert(t.length>0,()=>"gradients() received an empty list of xs."),null!=s&&"float32"!==s.dtype)throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));h.assert(r instanceof o.Tensor,()=>"The result y returned by f() must be a tensor.");const a=(0,i.getFilteredNodesXToY)(this.state.activeTape,t,r);if(!n&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[r.id]=null==s?f(r.shape):s,(0,i.backpropagateGradients)(e,a,e=>this.tidy(e),k);const n=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:r,grads:n}})}customGrad(e){return h.assert(h.isFunction(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let s;h.assert(t.every(e=>e instanceof o.Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const n={};return t.forEach((e,t)=>{n[t]=e}),this.runKernelFunc((n,r)=>(s=e(...t,r),h.assert(s.value instanceof o.Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),h.assert(h.isFunction(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),n,(e,n)=>{const r=s.gradFunc(e,n),a=Array.isArray(r)?r:[r];h.assert(a.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),h.assert(a.every(e=>e instanceof o.Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const i={};return a.forEach((e,t)=>{i[t]=(()=>e)}),i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=(0,h.now)(),s=await this.backend.time(e);return s.wallMs=(0,h.now)()-t,s}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new u;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function f(e){const t=(0,h.makeOnesTypedArray)((0,h.sizeFromShape)(e),"float32");return g.makeTensor(t,e,"float32")}function y(){const e=(0,s.getGlobalNamespace)();if(null==e._tfengine){const s=new t.Environment(e);e._tfengine=new p(s)}return(0,t.setEnvironmentGlobal)(e._tfengine.ENV),(0,o.setTensorTracker)(()=>e._tfengine),e._tfengine}exports.Engine=p,p.nextTensorId=0,p.nextVariableId=0;const g=y();function k(e,t){const s={a:e,b:t};return g.runKernelFunc((s,n)=>{const r=s.add(e,t);return n([e,t]),r},s,null,n.Add)}exports.ENGINE=g;
},{"./backends/backend":"omoA","./environment":"rgHm","./global_util":"uQ5B","./kernel_names":"r3vI","./kernel_registry":"yMO5","./profiler":"AQQY","./tape":"akbf","./tensor":"Zqvm","./tensor_util":"vUHI","./util":"UxaK"}],"z8l0":[function(require,module,exports) {
"use strict";function e(){return"undefined"!=typeof navigator&&null!=navigator}function i(){if(e()){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function o(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=i,exports.isBrowser=o;
},{}],"sKWZ":[function(require,module,exports) {
var process = require("process");
var e=require("process");require("./engine");var r=o(require("./device_util")),t=require("./environment");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(t,i,a):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}const i=(0,t.env)();i.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),i.registerFlag("IS_BROWSER",()=>r.isBrowser()),i.registerFlag("IS_NODE",()=>void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node),i.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),i.registerFlag("PROD",()=>!1),i.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>i.getBool("DEBUG")),i.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),i.registerFlag("IS_TEST",()=>!1);
},{"./engine":"tmUz","./device_util":"z8l0","./environment":"rgHm","process":"FT5O"}],"x0Hg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inferShape=o,exports.convertToTensor=a,exports.convertToTensorArray=u;var r=require("./engine"),e=require("./environment"),t=require("./tensor"),n=require("./util");function o(r,t){let o=r;if((0,n.isTypedArray)(r))return"string"===t?[]:[r.length];if(!Array.isArray(r))return[];const i=[];for(;Array.isArray(o)||(0,n.isTypedArray)(o)&&"string"!==t;)i.push(o.length),o=o[0];return Array.isArray(r)&&(0,e.env)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&s(r,i,[]),i}function s(r,e,t){if(t=t||[],!Array.isArray(r)&&!(0,n.isTypedArray)(r))return void(0,n.assert)(0===e.length,()=>`Element arr[${t.join("][")}] is a primitive, `+`but should be an array/TypedArray of ${e[0]} elements`);(0,n.assert)(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, `+`but is an array of ${r.length} elements`),(0,n.assert)(r.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} `+`elements, but has ${r.length} elements`);const o=e.slice(1);for(let n=0;n<r.length;++n)s(r[n],o,t.concat(n))}function i(r,e,t,n){if(null!=r&&("numeric"!==r&&r!==e||"numeric"===r&&"string"===e))throw new Error(`Argument '${t}' passed to '${n}' must `+`be ${r} tensor, but got ${e} tensor`)}function a(e,s,a,u="numeric"){if(e instanceof t.Tensor)return i(u,e.dtype,s,a),e;let l=(0,n.inferDtype)(e);if("string"!==l&&["bool","int32","float32"].indexOf(u)>=0&&(l=u),i(u,l,s,a),null==e||!(0,n.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${s}' passed to '${a}' must be a `+`Tensor or TensorLike, but got '${r}'`)}const y=o(e,l);(0,n.isTypedArray)(e)||Array.isArray(e)||(e=[e]);const f="string"!==l?(0,n.toTypedArray)(e,l):(0,n.flatten)(e,[],!0);return r.ENGINE.makeTensor(f,y,l)}function u(r,e,t,n="numeric"){if(!Array.isArray(r))throw new Error(`Argument ${e} passed to ${t} must be a `+"`Tensor[]` or `TensorLike[]`");return r.map((r,n)=>a(r,`${e}[${n}]`,t),n)}
},{"./engine":"tmUz","./environment":"rgHm","./tensor":"Zqvm","./util":"UxaK"}],"rO1i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.op=n,exports.OP_SCOPE_SUFFIX=void 0;var e=require("../engine"),t=require("../util");const o="__op";function n(n){const r=Object.keys(n);if(1!==r.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+`${r.length} keys.`);let i=r[0];const s=n[i];i.endsWith("_")&&(i=i.substring(0,i.length-1)),i+=o;const c=(...o)=>{e.ENGINE.startScope(i);try{const r=s(...o);return(0,t.isPromise)(r)&&console.error("Cannot return a Promise inside of tidy."),e.ENGINE.endScope(r),r}catch(n){throw e.ENGINE.endScope(null),n}};return Object.defineProperty(c,"name",{value:i,configurable:!0}),c}exports.OP_SCOPE_SUFFIX=o;
},{"../engine":"tmUz","../util":"UxaK"}],"BDDu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=p(require("../util")),o=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var p=n?Object.getOwnPropertyDescriptor(e,o):null;p&&(p.get||p.set)?Object.defineProperty(t,o,p):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function u(o,a){const p=(0,t.convertToTensor)(o,"real","complex"),u=(0,t.convertToTensor)(a,"imag","complex");n.assertShapesMatch(p.shape,u.shape,`real and imag shapes, ${p.shape} and ${u.shape}, `+"must match in call to tf.complex().");const c={real:p,imag:u};return e.ENGINE.runKernelFunc(e=>e.complex(p,u),c,null,r.Complex)}const c=(0,o.op)({complex_:u});exports.complex=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"N5j4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTensor=s;var e=require("../engine"),r=require("../util");function s(s,o,t,a){if(null==a&&(a=(0,r.inferDtype)(s)),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,r.isTypedArray)(s)&&!Array.isArray(s)&&"number"!=typeof s&&"boolean"!=typeof s&&"string"!=typeof s)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=o){(0,r.assertNonNegativeIntegerDimensions)(o);const e=(0,r.sizeFromShape)(o),s=(0,r.sizeFromShape)(t);(0,r.assert)(e===s,()=>`Based on the provided shape, [${o}], the tensor should have `+`${e} values but has ${s}`);for(let a=0;a<t.length;++a){const e=t[a],s=a!==t.length-1||e!==(0,r.sizeFromShape)(o.slice(a));(0,r.assert)(t[a]===o[a]||!s,()=>"Error creating a new Tensor. Inferred shape "+`(${t}) does not match the provided `+`shape (${o}). `)}}return(0,r.isTypedArray)(s)||Array.isArray(s)||(s=[s]),o=o||t,s="string"!==a?(0,r.toTypedArray)(s,a):(0,r.flatten)(s,[],!0),e.ENGINE.makeTensor(s,o,a)}
},{"../engine":"tmUz","../util":"UxaK"}],"tCGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor=t;var e=require("../tensor_util_env"),r=require("./tensor_ops_util");function t(t,n,o){const s=(0,e.inferShape)(t,o);return(0,r.makeTensor)(t,n,s,o)}
},{"../tensor_util_env":"x0Hg","./tensor_ops_util":"N5j4"}],"s0q7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DTYPE_VALUE_SIZE_MAP=void 0;const t={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};exports.DTYPE_VALUE_SIZE_MAP=t;
},{}],"cfBw":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"hMTg":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"fbtd":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"HgFv":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"cfBw","ieee754":"hMTg","isarray":"fbtd","buffer":"HgFv"}],"KMZR":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeWeights=a,exports.decodeWeights=s,exports.concatenateTypedArrays=f,exports.stringByteLength=y,exports.arrayBufferToBase64String=p,exports.base64StringToArrayBuffer=u,exports.concatenateArrayBuffers=c,exports.basename=h,exports.getModelArtifactsInfoForJSON=d,exports.getFloat16Decoder=b;var t=require("../ops/complex"),n=require("../ops/tensor"),r=require("../util"),o=require("./types");const i=4;async function a(e,t){const n=[],r=[],o=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let a=0;a<o.length;++a){const s=o[a],f=Array.isArray(e)?e[a].tensor:e[s];if("float32"!==f.dtype&&"int32"!==f.dtype&&"bool"!==f.dtype&&"string"!==f.dtype&&"complex64"!==f.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${f.dtype}`);const l={name:s,shape:f.shape,dtype:f.dtype};if("string"===f.dtype){const e=new Promise(async e=>{const t=await f.bytes(),n=t.reduce((e,t)=>e+t.length,0)+i*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=i,r.set(e,o),o+=e.length}e(r)});r.push(e)}else r.push(f.data());null!=t&&(l.group=t),n.push(l)}return{data:f(await Promise.all(r)),specs:n}}function s(e,a){const s={};let f,l=0;for(const y of a){const a=y.name,p=y.dtype,u=y.shape,c=(0,r.sizeFromShape)(u);let h;if("quantization"in y){const t=y.quantization;if("uint8"===t.dtype||"uint16"===t.dtype){if(!("min"in t&&"scale"in t))throw new Error(`Weight ${y.name} with quantization ${t.dtype} `+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==t.dtype)throw new Error(`Weight ${y.name} has unknown `+`quantization dtype ${t.dtype}. `+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==p)throw new Error(`Weight ${y.name} is quantized with ${t.dtype} `+`which only supports weights of type float32 not ${p}.`)}const n=o.DTYPE_VALUE_SIZE_MAP[t.dtype],r=e.slice(l,l+c*n),i="uint8"===t.dtype?new Uint8Array(r):new Uint16Array(r);if("float32"===p)if("uint8"===t.dtype||"uint16"===t.dtype){h=new Float32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];h[e]=n*t.scale+t.min}}else{if("float16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type float32.");void 0===f&&(f=b()),h=f(i)}else{if("int32"!==p)throw new Error(`Unsupported dtype in weight '${a}': ${p}`);if("uint8"!==t.dtype&&"uint16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type int32.");h=new Int32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];h[e]=Math.round(n*t.scale+t.min)}}l+=c*n}else if("string"===p){const t=(0,r.sizeFromShape)(y.shape);h=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(l,l+i))[0];l+=i;const n=new Uint8Array(e.slice(l,l+t));h.push(n),l+=t}}else{const r=o.DTYPE_VALUE_SIZE_MAP[p],i=e.slice(l,l+c*r);if("float32"===p)h=new Float32Array(i);else if("int32"===p)h=new Int32Array(i);else if("bool"===p)h=new Uint8Array(i);else{if("complex64"!==p)throw new Error(`Unsupported dtype in weight '${a}': ${p}`);{h=new Float32Array(i);const e=new Float32Array(h.length/2),r=new Float32Array(h.length/2);for(let t=0;t<e.length;t++)e[t]=h[2*t],r[t]=h[2*t+1];const o=(0,n.tensor)(e,u,"float32"),f=(0,n.tensor)(r,u,"float32");s[a]=(0,t.complex)(o,f),o.dispose(),f.dispose()}}l+=c*r}"complex64"!==p&&(s[a]=(0,n.tensor)(h,u,p))}return s}function f(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});const r=new Uint8Array(t);let o=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength}),r.buffer}const l=void 0!==e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function y(t){return l?e.byteLength(t):new Blob([t]).size}function p(t){if(l)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,o=n.length;e<o;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function u(t){if(l){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function c(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function h(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function d(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:y(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:y(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function w(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function g(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function A(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function b(){const e=w(),t=g(),n=A();return r=>{const o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let a=0;a<r.length;a++){const o=r[a],s=e[n[o>>10]+(1023&o)]+t[o>>10];i[a]=s}return new Float32Array(o)}}
},{"../ops/complex":"BDDu","../ops/tensor":"tCGm","../util":"UxaK","./types":"s0q7","buffer":"HgFv"}],"p5dc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoadHandlers=exports.getSaveHandlers=exports.registerLoadRouter=exports.registerSaveRouter=exports.IORouterRegistry=void 0;class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==e.instance&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,s){return e.getHandlers(t,"load",s)}static getHandlers(t,s,r){const a=[];return("load"===s?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(e=>{const s=e(t,r);null!==s&&a.push(s)}),a}}exports.IORouterRegistry=e;const t=t=>e.registerSaveRouter(t);exports.registerSaveRouter=t;const s=t=>e.registerLoadRouter(t);exports.registerLoadRouter=s;const r=t=>e.getSaveHandlers(t);exports.getSaveHandlers=r;const a=(t,s)=>e.getLoadHandlers(t,s);exports.getLoadHandlers=a;
},{}],"L6uM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteDatabase=d,exports.browserIndexedDB=h,exports.BrowserIndexedDBManager=exports.indexedDBRouter=exports.BrowserIndexedDB=void 0,require("../flags");var e=require("../environment"),o=require("./io_utils"),r=require("./router_registry");const t="tensorflowjs",n=1,s="models_store",c="model_info_store";async function d(){const e=l();return new Promise((o,r)=>{const n=e.deleteDatabase(t);n.onsuccess=(()=>o()),n.onerror=(e=>r(e))})}function l(){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const o="undefined"==typeof window?self:window,r=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB||o.shimIndexedDB;if(null==r)throw new Error("The current browser does not appear to support IndexedDB.");return r}function a(e){const o=e.result;o.createObjectStore(s,{keyPath:"modelPath"}),o.createObjectStore(c,{keyPath:"modelPath"})}class i{constructor(e){if(this.indexedDB=l(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,r){return new Promise((e,d)=>{const l=this.indexedDB.open(t,n);l.onupgradeneeded=(()=>a(l)),l.onsuccess=(()=>{const t=l.result;if(null==r){const o=t.transaction(s,"readonly"),r=o.objectStore(s).get(this.modelPath);r.onsuccess=(()=>{if(null==r.result)return t.close(),d(new Error(`Cannot find model with path '${this.modelPath}' `+"in IndexedDB."));e(r.result.modelArtifacts)}),r.onerror=(e=>(t.close(),d(r.error))),o.oncomplete=(()=>t.close())}else{const n=(0,o.getModelArtifactsInfoForJSON)(r),l=t.transaction(c,"readwrite");let a=l.objectStore(c);const i=a.put({modelPath:this.modelPath,modelArtifactsInfo:n});let u;i.onsuccess=(()=>{const o=(u=t.transaction(s,"readwrite")).objectStore(s).put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:n});o.onsuccess=(()=>e({modelArtifactsInfo:n})),o.onerror=(e=>{const r=(a=l.objectStore(c)).delete(this.modelPath);r.onsuccess=(()=>(t.close(),d(o.error))),r.onerror=(e=>(t.close(),d(o.error)))})}),i.onerror=(e=>(t.close(),d(i.error))),l.oncomplete=(()=>{null==u?t.close():u.oncomplete=(()=>t.close())})}}),l.onerror=(e=>d(l.error))})}}exports.BrowserIndexedDB=i,i.URL_SCHEME="indexeddb://";const u=o=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(o)&&o.startsWith(i.URL_SCHEME)?h(o.slice(i.URL_SCHEME.length)):null;function h(e){return new i(e)}function m(e){return e.startsWith(i.URL_SCHEME)?e.slice(i.URL_SCHEME.length):e}exports.indexedDBRouter=u,r.IORouterRegistry.registerSaveRouter(u),r.IORouterRegistry.registerLoadRouter(u);class f{constructor(){this.indexedDB=l()}async listModels(){return new Promise((e,o)=>{const r=this.indexedDB.open(t,n);r.onupgradeneeded=(()=>a(r)),r.onsuccess=(()=>{const t=r.result,n=t.transaction(c,"readonly"),s=n.objectStore(c).getAll();s.onsuccess=(()=>{const o={};for(const e of s.result)o[e.modelPath]=e.modelArtifactsInfo;e(o)}),s.onerror=(e=>(t.close(),o(s.error))),n.oncomplete=(()=>t.close())}),r.onerror=(e=>o(r.error))})}async removeModel(e){return e=m(e),new Promise((o,r)=>{const d=this.indexedDB.open(t,n);d.onupgradeneeded=(()=>a(d)),d.onsuccess=(()=>{const t=d.result,n=t.transaction(c,"readwrite"),l=n.objectStore(c),a=l.get(e);let i;a.onsuccess=(()=>{if(null==a.result)return t.close(),r(new Error(`Cannot find model with path '${e}' `+"in IndexedDB."));{const n=l.delete(e),c=()=>{const n=(i=t.transaction(s,"readwrite")).objectStore(s).delete(e);n.onsuccess=(()=>o(a.result.modelArtifactsInfo)),n.onerror=(e=>r(a.error))};n.onsuccess=c,n.onerror=(e=>(c(),t.close(),r(a.error)))}}),a.onerror=(e=>(t.close(),r(a.error))),n.oncomplete=(()=>{null==i?t.close():i.oncomplete=(()=>t.close())})}),d.onerror=(e=>r(d.error))})}}exports.BrowserIndexedDBManager=f;
},{"../flags":"sKWZ","../environment":"rgHm","./io_utils":"KMZR","./router_registry":"p5dc"}],"tJ2N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.purgeLocalStorageArtifacts=d,exports.browserLocalStorage=f,exports.BrowserLocalStorageManager=exports.localStorageRouter=exports.BrowserLocalStorage=void 0,require("../flags");var e=require("../environment"),t=require("../util"),o=require("./io_utils"),r=require("./router_registry");const s="/",i="tensorflowjs_models",a="info",n="model_topology",l="weight_specs",h="weight_data",g="model_metadata";function d(){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("purgeLocalStorageModels() cannot proceed because local storage is unavailable in the current environment.");const t=window.localStorage,o=[];for(let e=0;e<t.length;++e){const r=t.key(e),a=i+s;if(r.startsWith(a)&&r.length>a.length){t.removeItem(r);const e=S(r);-1===o.indexOf(e)&&o.push(e)}}return o}function c(e){return{info:[i,e,a].join(s),topology:[i,e,n].join(s),weightSpecs:[i,e,l].join(s),weightData:[i,e,h].join(s),modelMetadata:[i,e,g].join(s)}}function S(e){const t=e.split(s);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(s)}function m(e){return e.startsWith(w.URL_SCHEME)?e.slice(w.URL_SCHEME.length):e}class w{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=c(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const r=JSON.stringify(e.modelTopology),s=JSON.stringify(e.weightSpecs),i=(0,o.getModelArtifactsInfoForJSON)(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,(0,o.arrayBufferToBase64String)(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),{modelArtifactsInfo:i}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: `+"size quota being exceeded is a possible cause of this failure: "+`modelTopologyBytes=${i.modelTopologyBytes}, `+`weightSpecsBytes=${i.weightSpecsBytes}, `+`weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${this.modelPath}' `+"is missing.");t.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==s)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' `+"are missing.");t.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,t.userDefinedMetadata=e.userDefinedMetadata}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error("In local storage, the binary weight values of model "+`'${this.modelPath}' are missing.`);return t.weightData=(0,o.base64StringToArrayBuffer)(a),t}}exports.BrowserLocalStorage=w,w.URL_SCHEME="localstorage://";const y=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(w.URL_SCHEME)?f(t.slice(w.URL_SCHEME.length)):null;function f(e){return new w(e)}exports.localStorageRouter=y,r.IORouterRegistry.registerSaveRouter(y),r.IORouterRegistry.registerLoadRouter(y);class u{constructor(){(0,t.assert)((0,e.env)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,t.assert)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=i+s,o=s+a;for(let r=0;r<this.LS.length;++r){const s=this.LS.key(r);if(s.startsWith(t)&&s.endsWith(o)){e[S(s)]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){const t=c(e=m(e));if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);const o=JSON.parse(this.LS.getItem(t.info));return this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),o}}exports.BrowserLocalStorageManager=u;
},{"../flags":"sKWZ","../environment":"rgHm","../util":"UxaK","./io_utils":"KMZR","./router_registry":"p5dc"}],"KdY3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moveModel=l,exports.copyModel=c,exports.removeModel=i,exports.listModels=o,exports.ModelStoreManagerRegistry=void 0;var e=require("../util"),t=require("./router_registry");const n="://";class s{constructor(){this.managers={}}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}static registerManager(t,r){(0,e.assert)(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(n)&&(t=t.slice(0,t.indexOf(n))),(0,e.assert)(t.length>0,()=>"scheme must not be an empty string.");const a=s.getInstance();(0,e.assert)(null==a.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),a.managers[t]=r}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function r(e){if(-1===e.indexOf(n))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+`${s.getSchemes().join(",")}`);return{scheme:e.split(n)[0],path:e.split(n)[1]}}async function a(n,a,o=!1){(0,e.assert)(n!==a,()=>`Old path and new path are the same: '${n}'`);const i=t.IORouterRegistry.getLoadHandlers(n);(0,e.assert)(i.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),(0,e.assert)(i.length<2,()=>`Copying failed because more than one (${i.length}) `+`load handlers for source URL ${n}.`);const c=i[0],l=t.IORouterRegistry.getSaveHandlers(a);(0,e.assert)(l.length>0,()=>"Copying failed because no save handler is found for destination "+`URL ${a}.`),(0,e.assert)(l.length<2,()=>`Copying failed because more than one (${i.length}) `+`save handlers for destination URL ${a}.`);const g=l[0],d=r(n).scheme,u=r(n).path,h=d===r(n).scheme,m=await c.load();o&&h&&await s.getManager(d).removeModel(u);const f=await g.save(m);return o&&!h&&await s.getManager(d).removeModel(u),f.modelArtifactsInfo}async function o(){const e=s.getSchemes(),t={};for(const r of e){const e=await s.getManager(r).listModels();for(const s in e){t[r+n+s]=e[s]}}return t}async function i(e){const t=r(e);return s.getManager(t.scheme).removeModel(t.path)}async function c(e,t){return a(e,t,!1)}async function l(e,t){return a(e,t,!0)}exports.ModelStoreManagerRegistry=s;
},{"../util":"UxaK","./router_registry":"p5dc"}],"KgNx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlatformBrowser=void 0,require("../flags");var e=require("../environment"),r=require("../io/indexed_db"),t=require("../io/local_storage"),o=require("../io/model_management");class n{fetch(e,r){return fetch(e,r)}now(){return performance.now()}encode(e,r){if("utf-8"!==r&&"utf8"!==r)throw new Error(`Browser's encoder only supports utf-8, but got ${r}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,r){return new TextDecoder(r).decode(e)}}if(exports.PlatformBrowser=n,(0,e.env)().get("IS_BROWSER")){(0,e.env)().setPlatform("browser",new n);try{o.ModelStoreManagerRegistry.registerManager(t.BrowserLocalStorage.URL_SCHEME,new t.BrowserLocalStorageManager)}catch(a){}try{o.ModelStoreManagerRegistry.registerManager(r.BrowserIndexedDB.URL_SCHEME,new r.BrowserIndexedDBManager)}catch(a){}}
},{"../flags":"sKWZ","../environment":"rgHm","../io/indexed_db":"L6uM","../io/local_storage":"tJ2N","../io/model_management":"KdY3"}],"bWtT":[function(require,module,exports) {

},{}],"kKcV":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.resetSystemFetch=n,exports.setSystemFetch=c,exports.getSystemFetch=s,exports.PlatformNode=exports.getNodeFetch=void 0;var t=require("../environment");const r={importFetch:()=>require("node-fetch")};let o;function n(){o=null}function c(e){o=e}function s(){return o}exports.getNodeFetch=r;class u{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=(0,t.env)().global.fetch?(0,t.env)().global.fetch(e,n):(null==o&&(o=r.importFetch()),o(e,n))}now(){const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}exports.PlatformNode=u,(0,t.env)().get("IS_NODE")&&(0,t.env)().setPlatform("node",new u);
},{"../environment":"rgHm","node-fetch":"bWtT","util":"bWtT","process":"FT5O"}],"SN3d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=o;var e=require("../tensor"),r=n(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function o(t,n="float32",o){return n=n||"float32",r.assertNonNegativeIntegerDimensions(t),new e.TensorBuffer(t,n,o)}
},{"../tensor":"Zqvm","../util":"UxaK"}],"owKL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function u(o,i){const s=(0,r.convertToTensor)(o,"x","cast");if(!n.isValidDtype(i))throw new Error(`Failed to cast to unknown dtype ${i}`);if("string"===i&&"string"!==s.dtype||"string"!==i&&"string"===s.dtype)throw new Error("Only strings can be casted to strings");const u={x:s},c={dtype:i};return e.ENGINE.runKernelFunc(e=>e.cast(s,i),u,null,t.Cast,c)}const c=(0,o.op)({cast_:u});exports.cast=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"HHuR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),o=require("./operation");function t(o){const t=(0,r.convertToTensor)(o,"x","clone",null),u={x:t};return e.ENGINE.runKernelFunc(()=>e.ENGINE.makeTensorFromDataId(t.dataId,t.shape,t.dtype),u,null,n.Identity)}const u=(0,o.op)({clone_:t});exports.clone=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"reh2":[function(require,module,exports) {
"use strict";function e(e,t=!1){console.log(e.toString(t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.print=e;
},{}],"j1BI":[function(require,module,exports) {
"use strict";var r=require("./engine");require("./flags"),require("./platforms/platform_browser"),require("./platforms/platform_node");var e=require("./ops/buffer"),s=require("./ops/cast"),t=require("./ops/clone"),i=require("./ops/print"),o=require("./tensor");(0,r.getOrMakeEngine)();const n={buffer:e.buffer,cast:s.cast,clone:t.clone,print:i.print};(0,o.setOpHandler)(n);
},{"./engine":"tmUz","./flags":"sKWZ","./platforms/platform_browser":"KgNx","./platforms/platform_node":"kKcV","./ops/buffer":"SN3d","./ops/cast":"owKL","./ops/clone":"HHuR","./ops/print":"reh2","./tensor":"Zqvm"}],"l6Ea":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.browserDownloads=h,exports.browserFiles=c,exports.browserDownloadsRouter=exports.BrowserDownloads=void 0,require("../flags");var e=require("../environment"),t=require("./io_utils"),o=require("./router_registry");const r="model",n=".json",s=".weights.bin";function i(e){return new Promise(e=>setTimeout(e)).then(e)}class a{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(a.URL_SCHEME)&&(t=t.slice(a.URL_SCHEME.length)),null!=t&&0!==t.length||(t=r),this.modelTopologyFileName=t+n,this.weightDataFileName=t+s}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const o=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},s=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=s,await i(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=o,await i(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:(0,t.getModelArtifactsInfoForJSON)(e)}}}}exports.BrowserDownloads=a,a.URL_SCHEME="downloads://";class l{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+`but received ${e}`);this.files=e}async load(){const e=this.files[0],o=this.files.slice(1);return new Promise((r,n)=>{const s=new FileReader;s.onload=(s=>{const i=JSON.parse(s.target.result),a=i.modelTopology;if(null==a)return void n(new Error(`modelTopology field is missing from file ${e.name}`));0===o.length&&r({modelTopology:a});const l=i.weightsManifest;if(null==l)return void n(new Error(`weightManifest field is missing from file ${e.name}`));let d;try{d=this.checkManifestAndWeightFiles(l,o)}catch(w){return void n(w)}const h=[],c=[],f=[];l.forEach(e=>{e.paths.forEach(e=>{c.push(e),f.push(null)}),h.push(...e.weights)}),l.forEach(e=>{e.paths.forEach(e=>{const o=new FileReader;o.onload=(o=>{const n=o.target.result,s=c.indexOf(e);f[s]=n,-1===f.indexOf(null)&&r({modelTopology:a,weightSpecs:h,weightData:(0,t.concatenateArrayBuffers)(f),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})}),o.onerror=(t=>n(`Failed to weights data from file of path '${e}'.`)),o.readAsArrayBuffer(d[e])})})}),s.onerror=(t=>n("Failed to read model topology and weights manifest JSON "+`from file '${e.name}'. BrowserFiles supports loading `+"Keras-style tf.Model artifacts only.")),s.readAsText(e)})}checkManifestAndWeightFiles(e,o){const r=[],n=o.map(e=>(0,t.basename)(e.name)),s={};for(const i of e)i.paths.forEach(e=>{const i=(0,t.basename)(e);if(-1!==r.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: "+`'${i}'`);if(r.push(i),-1===n.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);s[e]=o[n.indexOf(i)]});if(r.length!==o.length)throw new Error("Mismatch in the number of files in weights manifest "+`(${r.length}) and the number of weight files provided `+`(${o.length}).`);return s}}const d=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(a.URL_SCHEME)?h(t.slice(a.URL_SCHEME.length)):null;function h(e="model"){return new a(e)}function c(e){return new l(e)}exports.browserDownloadsRouter=d,o.IORouterRegistry.registerSaveRouter(d);
},{"../flags":"sKWZ","../environment":"rgHm","./io_utils":"KMZR","./router_registry":"p5dc"}],"O3eX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.monitorPromisesProgress=r;var t=require("../util");function r(r,e,n,s){!function(r){(0,t.assert)(null!=r&&Array.isArray(r)&&r.length>0,()=>"promises must be a none empty array")}(r),function(r,e){(0,t.assert)(r>=0&&r<=1,()=>"Progress fraction must be in range [0, 1], but "+`got startFraction ${r}`),(0,t.assert)(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+`got endFraction ${e}`),(0,t.assert)(e>=r,()=>"startFraction must be no more than endFraction, but "+`got startFraction ${r} and endFraction `+`${e}`)}(n=null==n?0:n,s=null==s?1:s);let o=0;return Promise.all(r.map(t=>(t.then(t=>{const a=n+ ++o/r.length*(s-n);return e(a),t}),t)))}
},{"../util":"UxaK"}],"FT2Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadWeightsAsArrayBuffer=a,exports.loadWeights=u,exports.weightsLoaderFactory=f;var e=require("../environment"),t=i(require("../util")),r=require("./io_utils"),n=require("./progress"),o=require("./types");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}async function a(t,r){null==r&&(r={});const o=null==r.fetchFunc?(0,e.env)().platform.fetch:r.fetchFunc,s=t.map(e=>o(e,r.requestInit,{isBinary:!0})),i=(null==r.onProgress?await Promise.all(s):await(0,n.monitorPromisesProgress)(s,r.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==r.onProgress?await Promise.all(i):await(0,n.monitorPromisesProgress)(i,r.onProgress,.5,1)}async function u(e,t="",r,n){return f(e=>a(e,{requestInit:n}))(e,t,r)}function f(e){return async(n,s="",i)=>{const a=n.map(()=>!1),u={},f=null!=i?i.map(()=>!1):[],c=[];if(n.forEach((e,r)=>{let n=0;e.weights.forEach(e=>{const s="quantization"in e?e.quantization.dtype:e.dtype,l=o.DTYPE_VALUE_SIZE_MAP[s]*t.sizeFromShape(e.shape),p=()=>{a[r]=!0,null==u[r]&&(u[r]=[]),u[r].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=i?i.forEach((t,r)=>{t===e.name&&(p(),f[r]=!0)}):p(),c.push(e.name),n+=l})}),!f.every(e=>e)){const e=i.filter((e,t)=>!f[t]);throw new Error("Could not find weights in manifest with names: "+`${e.join(", ")}. \n`+"Manifest JSON has weights with names: "+`${c.join(", ")}.`)}const l=a.reduce((e,t,r)=>(t&&e.push(r),e),[]),p=[];l.forEach(e=>{n[e].paths.forEach(e=>{const t=s+(s.endsWith("/")?"":"/")+e;p.push(t)})});const h=await e(p),y={};let g=0;return l.forEach(e=>{const t=n[e].paths.length;let o=0;for(let r=0;r<t;r++)o+=h[g+r].byteLength;const s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let r=0;r<t;r++){const e=new Uint8Array(h[g+r]);i.set(e,a),a+=e.byteLength}u[e].forEach(e=>{const t=s.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=(0,r.decodeWeights)(t,[e.manifestEntry]);for(const r in n)y[r]=n[r]}),g+=t}),y}}
},{"../environment":"rgHm","../util":"UxaK","./io_utils":"KMZR","./progress":"O3eX","./types":"s0q7"}],"zMoy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUrl=h,exports.isHTTPScheme=l,exports.http=f,exports.browserHTTPRequest=c,exports.httpRouter=exports.HTTPRequest=void 0;var e=require("../environment"),t=require("../util"),r=require("./io_utils"),o=require("./router_registry"),s=require("./weights_loader");const n="application/octet-stream",i="application/json";class a{constructor(r,o){if(this.DEFAULT_METHOD="POST",null==o&&(o={}),this.weightPathPrefix=o.weightPathPrefix,this.onProgress=o.onProgress,this.weightUrlConverter=o.weightUrlConverter,null!=o.fetchFunc?((0,t.assert)("function"==typeof o.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=o.fetchFunc):this.fetch=(0,e.env)().platform.fetch,(0,t.assert)(null!=r&&r.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(r)&&(0,t.assert)(2===r.length,()=>"URL paths for http must have a length of 2, "+`(actual length is ${r.length}).`),this.path=r,null!=o.requestInit&&null!=o.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=o.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const o=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:o};t.body.append("model.json",new Blob([JSON.stringify(s)],{type:i}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:n}),"model.weights.bin");const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:(0,r.getModelArtifactsInfoForJSON)(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+`${a.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code `+`${e.status}. Please verify this URL points to `+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(c){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const r=t.modelTopology,o=t.weightsManifest,s=t.generatedBy,n=t.convertedBy,i=t.format,a=t.userDefinedMetadata;if(null==r&&null==o)throw new Error(`The JSON from HTTP path ${this.path} contains neither model `+"topology or manifest for weights.");let h,l;if(null!=o){const e=await this.loadWeights(o);[h,l]=e}const u={modelTopology:r,weightSpecs:h,weightData:l,userDefinedMetadata:a,generatedBy:s,convertedBy:n,format:i},f=t.modelInitializer;return f&&(u.modelInitializer=f),u}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[o,n]=h(t),i=this.weightPathPrefix||o,a=[];for(const r of e)a.push(...r.weights);const l=[],u=[];for(const r of e)for(const e of r.paths)null!=this.weightUrlConverter?u.push(this.weightUrlConverter(e)):l.push(i+e+n);this.weightUrlConverter&&l.push(...await Promise.all(u));const f=await(0,s.loadWeightsAsArrayBuffer)(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,(0,r.concatenateArrayBuffers)(f)]}}function h(e){const t=e.lastIndexOf("/"),r=e.lastIndexOf("?");return[e.substring(0,t)+"/",r>t?e.substring(r):""]}function l(e){return null!=e.match(a.URL_SCHEME_REGEX)}exports.HTTPRequest=a,a.URL_SCHEME_REGEX=/^https?:\/\//;const u=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let r=!0;if(r=Array.isArray(e)?e.every(e=>l(e)):l(e))return f(e,t)}return null};function f(e,t){return new a(e,t)}function c(e,t){return f(e,t)}exports.httpRouter=u,o.IORouterRegistry.registerSaveRouter(u),o.IORouterRegistry.registerLoadRouter(u);
},{"../environment":"rgHm","../util":"UxaK","./io_utils":"KMZR","./router_registry":"p5dc","./weights_loader":"FT2Y"}],"zL2T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromMemory=t,exports.withSaveHandler=r;class e{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class o{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function t(o,t,r,n){if(1===arguments.length){return null!=o.modelTopology||null!=o.weightSpecs?new e(o):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o,weightSpecs:t,weightData:r,trainingConfig:n})}function r(e){return new o(e)}
},{}],"wHIS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"browserFiles",{enumerable:!0,get:function(){return e.browserFiles}}),Object.defineProperty(exports,"browserHTTPRequest",{enumerable:!0,get:function(){return r.browserHTTPRequest}}),Object.defineProperty(exports,"http",{enumerable:!0,get:function(){return r.http}}),Object.defineProperty(exports,"isHTTPScheme",{enumerable:!0,get:function(){return r.isHTTPScheme}}),Object.defineProperty(exports,"concatenateArrayBuffers",{enumerable:!0,get:function(){return t.concatenateArrayBuffers}}),Object.defineProperty(exports,"decodeWeights",{enumerable:!0,get:function(){return t.decodeWeights}}),Object.defineProperty(exports,"encodeWeights",{enumerable:!0,get:function(){return t.encodeWeights}}),Object.defineProperty(exports,"getModelArtifactsInfoForJSON",{enumerable:!0,get:function(){return t.getModelArtifactsInfoForJSON}}),Object.defineProperty(exports,"fromMemory",{enumerable:!0,get:function(){return o.fromMemory}}),Object.defineProperty(exports,"withSaveHandler",{enumerable:!0,get:function(){return o.withSaveHandler}}),Object.defineProperty(exports,"getLoadHandlers",{enumerable:!0,get:function(){return n.getLoadHandlers}}),Object.defineProperty(exports,"getSaveHandlers",{enumerable:!0,get:function(){return n.getSaveHandlers}}),Object.defineProperty(exports,"registerLoadRouter",{enumerable:!0,get:function(){return n.registerLoadRouter}}),Object.defineProperty(exports,"registerSaveRouter",{enumerable:!0,get:function(){return n.registerSaveRouter}}),Object.defineProperty(exports,"loadWeights",{enumerable:!0,get:function(){return u.loadWeights}}),Object.defineProperty(exports,"weightsLoaderFactory",{enumerable:!0,get:function(){return u.weightsLoaderFactory}}),Object.defineProperty(exports,"copyModel",{enumerable:!0,get:function(){return i.copyModel}}),Object.defineProperty(exports,"listModels",{enumerable:!0,get:function(){return i.listModels}}),Object.defineProperty(exports,"moveModel",{enumerable:!0,get:function(){return i.moveModel}}),Object.defineProperty(exports,"removeModel",{enumerable:!0,get:function(){return i.removeModel}}),require("./indexed_db"),require("./local_storage");var e=require("./browser_files"),r=require("./http"),t=require("./io_utils"),o=require("./passthrough"),n=require("./router_registry"),u=require("./weights_loader"),i=require("./model_management");
},{"./indexed_db":"L6uM","./local_storage":"tJ2N","./browser_files":"l6Ea","./http":"zMoy","./io_utils":"KMZR","./passthrough":"zL2T","./router_registry":"p5dc","./weights_loader":"FT2Y","./model_management":"KdY3"}],"khVG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function i(o,u){const s=(0,t.convertToTensor)(o,"x","reshape",null),i={x:s},a={shape:u};return e.ENGINE.runKernelFunc((e,r)=>(u=n.inferFromImplicitShape(u,s.size),n.assert(s.size===n.sizeFromShape(u),()=>"new shape and old shape must have the same number of elements."),r([s]),e.reshape(s,u)),i,null,r.Reshape,a)}const a=(0,o.op)({reshape_:i});exports.reshape=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"A3yk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),a=p(require("../util")),s=require("./operation"),o=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function i(s,u,p=!1,i=!1){let c=(0,n.convertToTensor)(s,"a","matMul"),h=(0,n.convertToTensor)(u,"b","matMul");[c,h]=(0,t.makeTypesMatch)(c,h);const l={a:c,b:h},f={transposeA:p,transposeB:i};return e.ENGINE.runKernelFunc((e,r)=>{r([c,h]);const t=p?c.shape[c.rank-2]:c.shape[c.rank-1],n=i?h.shape[h.rank-1]:h.shape[h.rank-2],s=p?c.shape[c.rank-1]:c.shape[c.rank-2],u=i?h.shape[h.rank-2]:h.shape[h.rank-1],l=c.shape.slice(0,-2),f=h.shape.slice(0,-2),m=a.sizeFromShape(l),d=a.sizeFromShape(f),M=m===d||1===m||1===d;a.assert(c.rank>=2&&h.rank>=2&&M,()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${l}) and (${f}).`),a.assert(t===n,()=>`Error in matMul: inner shapes (${t}) and (`+`${n}) of Tensors with shapes ${c.shape} and `+`${h.shape} and transposeA=${p}`+` and transposeB=${i} must match.`);const b=(m>d?l:f).concat([s,u]),k=p?(0,o.reshape)(c,[m,t,s]):(0,o.reshape)(c,[m,s,t]),v=i?(0,o.reshape)(h,[d,u,n]):(0,o.reshape)(h,[d,n,u]),y=e.batchMatMul(k,v,p,i);return(0,o.reshape)(y,b)},l,null,r.BatchMatMul,f)}const c=(0,s.op)({matMul_:i});exports.matMul=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"mrOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHot=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation"),t=require("./reshape");function i(n,i,s=1,u=0){if(i<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${i}`);const p=(0,o.convertToTensor)(n,"indices","oneHot","int32"),a=[...p.shape,i],c={indices:p},l={depth:i,onValue:s,offValue:u};return e.ENGINE.runKernelFunc((e,r)=>(r([p]),(0,t.reshape)(e.oneHot((0,t.reshape)(p,[p.size]),i,s,u),a)),c,null,r.OneHot,l)}const s=(0,n.op)({oneHot_:i});exports.oneHot=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./reshape":"khVG"}],"yiEV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function a(o,s){const u=(0,t.convertToTensor)(o,"x","transpose");if(null==s&&(s=u.shape.map((e,r)=>r).reverse()),n.assert(u.rank===s.length,()=>`Error in transpose: rank of input ${u.rank} `+`must match length of perm ${s}.`),s.forEach(e=>{n.assert(e>=0&&e<u.rank,()=>`All entries in 'perm' must be between 0 and ${u.rank-1}`+` but got ${s}`)}),u.rank<=1)return u.clone();const a={x:u},i={perm:s};return e.ENGINE.runKernelFunc(e=>e.transpose(u,s),a,null,r.Transpose,i)}const i=(0,o.op)({transpose_:a});exports.transpose=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"lU4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.confusionMatrix_=c,exports.confusionMatrix=void 0;var e=require("../tensor_util_env"),t=u(require("../util")),r=require("./cast"),n=require("./mat_mul"),o=require("./one_hot"),s=require("./operation"),i=require("./transpose");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function c(s,a,u){const c=(0,e.convertToTensor)(s,"labels","confusionMatrix"),p=(0,e.convertToTensor)(a,"predictions","confusionMatrix");t.assert(null==u||u>0&&Number.isInteger(u),()=>"If provided, numClasses must be a positive integer, "+`but got ${u}`),t.assert(1===c.rank,()=>`Expected the rank of labels to be 1, but got ${c.rank}`),t.assert(1===p.rank,()=>"Expected the rank of predictions to be 1, "+`but got ${p.rank}`),t.assert(c.shape[0]===p.shape[0],()=>"Mismatch in the number of examples: "+`${c.shape[0]} vs. ${p.shape[0]}. `+"Labels and predictions should have the same number of elements."),t.assert(u>0&&Number.isInteger(u),()=>"numClasses is required to be a positive integer, but got "+`${u}`);const f=(0,o.oneHot)((0,r.cast)(c,"int32"),u),l=(0,o.oneHot)((0,r.cast)(p,"int32"),u),b=(0,i.transpose)(f),d=(0,n.matMul)(b,l);return(0,r.cast)(d,"int32")}const p=(0,s.op)({confusionMatrix_:c});exports.confusionMatrix=p;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./cast":"owKL","./mat_mul":"A3yk","./one_hot":"mrOz","./operation":"rO1i","./transpose":"yiEV"}],"vRxb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"confusionMatrix",{enumerable:!0,get:function(){return e.confusionMatrix}});var e=require("./ops/confusion_matrix");
},{"./ops/confusion_matrix":"lU4w"}],"pCJS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor3d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&3!==o.length)throw new Error("tensor3d() requires shape to have three numbers");const u=(0,e.inferShape)(n,s);if(3!==u.length&&1!==u.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"UMh8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toPixels=f,exports.fromPixels=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../kernel_registry"),r=require("../tensor"),o=require("../tensor_util_env"),a=require("./cast"),s=require("./operation"),i=require("./tensor3d");let l;function d(r,o=3){if(o>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==r)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let a=!1,s=!1,d=!1,f=!1,u=!1;if(r.data instanceof Uint8Array)a=!0;else if("undefined"!=typeof ImageData&&r instanceof ImageData)s=!0;else if("undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement)d=!0;else if("undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement)f=!0;else{if(null==r.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+`but was ${r.constructor.name}`);u=!0}if(d){const e=2;if(d&&r.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=(0,n.getKernel)(t.FromPixels,e.ENGINE.backendName)){const n={pixels:r},a={numChannels:o};return e.ENGINE.runKernel(t.FromPixels,n,a)}const[m,c]=d?[r.videoWidth,r.videoHeight]:[r.width,r.height];let h,p;if(u?h=r.getContext("2d").getImageData(0,0,m,c).data:s||a?h=r.data:(f||d)&&(null==l&&(l=document.createElement("canvas").getContext("2d")),l.canvas.width=m,l.canvas.height=c,l.drawImage(r,0,0,m,c),h=l.getImageData(0,0,m,c).data),4===o)p=new Int32Array(h);else{const e=m*c;p=new Int32Array(e*o);for(let t=0;t<e;t++)for(let e=0;e<o;++e)p[t*o+e]=h[4*t+e]}const w=[c,m,o];return(0,i.tensor3d)(p,w,"int32")}async function f(e,t){let n=(0,o.convertToTensor)(e,"img","toPixels");if(!(e instanceof r.Tensor)){const e=n;n=(0,a.cast)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[s,i]=n.shape.slice(0,2),l=2===n.rank?1:n.shape[2];if(l>4||2===l)throw new Error("toPixels only supports depth of size "+`1, 3 or 4 but got ${l}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}.`+" Please use float32 or int32 tensors.");const d=await n.data(),f="float32"===n.dtype?255:1,u=new Uint8ClampedArray(i*s*4);for(let r=0;r<s*i;++r){const e=[0,0,0,255];for(let o=0;o<l;o++){const t=d[r*l+o];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+`range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+`range [0 - 255] but encountered ${t}.`);1===l?(e[0]=t*f,e[1]=t*f,e[2]=t*f):e[o]=t*f}const t=4*r;u[t+0]=Math.round(e[0]),u[t+1]=Math.round(e[1]),u[t+2]=Math.round(e[2]),u[t+3]=Math.round(e[3])}if(null!=t){t.width=i,t.height=s;const e=t.getContext("2d"),n=new ImageData(u,i,s);e.putImageData(n,0,0)}return n!==e&&n.dispose(),u}const u=(0,s.op)({fromPixels_:d});exports.fromPixels=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../kernel_registry":"yMO5","../tensor":"Zqvm","../tensor_util_env":"x0Hg","./cast":"owKL","./operation":"rO1i","./tensor3d":"pCJS"}],"EXn0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareAndValidate=t;var e=require("../util");function t(t,r){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+` but the rank was ${t.rank}.`);if(r.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+` but the rank was ${r.rank}.`);if("int32"!==r.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+` but the dtype was ${r.dtype}.`);if(r.shape[r.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+`${r.shape[r.rank-1]} vs. ${t.rank}`);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty."+` Input shape: ${t.shape}.`);const n=r.shape,s=n[n.length-1];let a=1;for(let e=0;e<n.length-1;++e)a*=n[e];const i=t.shape,o=n.slice();o.pop();let h=1;for(let e=s;e<t.rank;++e)h*=i[e],o.push(i[e]);const p=[...(0,e.computeStrides)(t.shape).map(e=>e/h),1].slice(0,s);return[o,a,h,p]}
},{"../util":"UxaK"}],"mei8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateUpdateShape=t,exports.validateInput=r,exports.calculateShapes=a;var e=require("../util");function t(e,t,r){const a=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,p="Must have updates.shape = indices.shape[:batchDim] + "+`shape[sliceDim:], got updates.shape: ${r.shape}`+`, indices.shape: ${t.shape}, shape: ${e}`+`, sliceDim: ${a}, and batchDim: ${s}.`;if(r.rank<s)throw new Error(p+` update.rank < ${s}. `);if(e.length<a+(r.rank-s))throw new Error(p+` Output shape length < ${a+(r.rank-s)}`);if(r.rank!==s+e.length-a)throw new Error(p+` update.rank != ${s+e.length-a}`);for(let h=0;h<s;++h)if(r.shape[h]!==t.shape[h])throw new Error(p+` updates.shape[${h}] (${r.shape[h]}) != indices.shape[${h}] (${t.shape[h]}).`);for(let h=0;h<r.rank-s;++h)if(r.shape[h+s]!==e[h+a])throw new Error(p+` updates.shape[${h+s}] (${r.shape[h+s]}) != shape[${h+s}] (${e[h+s]})`)}function r(e,r,a){if(r.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+` but the rank was ${r.rank}.`);if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if("int32"!==r.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(a.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${a}`);if(0===a.length){if(0===r.size)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}t(a,r,e)}function a(t,r,a){const s=r.shape.length,p=s>1?r.shape[s-1]:1,h=a.length;let n=1;for(let e=p;e<h;++e)n*=a[e];const i=p<1?1:p;return{sliceRank:p,numUpdates:(0,e.sizeFromShape)(r.shape)/i,sliceSize:n,strides:[...(0,e.computeStrides)(a.slice(0,p)),1],outputSize:(0,e.sizeFromShape)(a)}}
},{"../util":"UxaK"}],"sNMx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsValid=n,exports.maskToAxes=o,exports.computeOutShape=s,exports.stridesWithElidedDims=l,exports.getNormalizedAxes=c,exports.startIndicesWithElidedDims=a,exports.stopIndicesWithElidedDims=f,exports.stridesForAxis=p,exports.startForAxis=h,exports.stopForAxis=g,exports.isSliceContinous=d,exports.computeFlatOffset=m,exports.parseSliceParams=E;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(n,s,l):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function n(t,r,n){const o=t.shape.length;e.assert(o===r.length,()=>`Error in slice${o}D: Length of begin ${r} must `+`match the rank of the array (${o}).`),e.assert(o===n.length,()=>`Error in slice${o}D: Length of size ${n} must `+`match the rank of the array (${o}).`);for(let s=0;s<o;++s)e.assert(r[s]+n[s]<=t.shape[s],()=>`Error in slice${o}D: begin[${s}] + size[${s}] `+`(${r[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function o(e){const t=[];let r=0;for(;e>0;)1&e&&t.push(r),e/=2,r++;return t}function s(e,t,r){const n=[];for(let o=0;o<e.length;o++)n[o]=Math.ceil((t[o]-e[o])/r[o]);return n}function l(e,t,r,n){const o=[...e];for(let s=o.length;s<n.length;s++)o.push(1);for(let s=0;s<r;s++)0===s?o[t]=1:(o.splice(t,0,1),o.pop());return o}function i(e,t,r){return r<=e?r:r-(t-1)}function u(e,t){const r=[];for(let n=0;n<e;n++)r.push(t+n);return r}function c(e,t,r,n,o,s,i,u,c){const d=e.length;let m=new Array(d),E=new Array(d),x=new Array(d);if(t.length&&r>0){const c=t[0],p=r+1;m=a(i,c,p,n,e),E=f(u,c,p,o,e),x=l(s,c,p,e)}else for(let l=0;l<d;l++)m[l]=h(i,n,s,e,l,c),E[l]=g(u,o,s,e,l,c),x[l]=p(s,l,c);return{begin:m,end:E,strides:x}}function a(e,t,r,n,o){const s=[...o],l=u(r,t);for(let u=0;u<s.length;u++)if(l.indexOf(u)>-1)s[u]=0;else{const o=i(t,r,u);let l=n[o];e&1<<o&&(l=0),s[u]=l}return s}function f(t,r,n,o,s){const l=[...s],c=u(n,r);for(let e=0;e<l.length;e++)if(c.indexOf(e)>-1)l[e]=Number.MAX_SAFE_INTEGER;else{const s=i(r,n,e);let u=o[s];t&1<<s&&(u=Number.MAX_SAFE_INTEGER),l[e]=u}for(let i=0;i<l.length;i++){const t=s[i];l[i]<0&&(l[i]+=t),l[i]=e.clamp(0,l[i],s[i])}return l}function p(e,t,r){let n=e[t];return(r&1<<t||null==n)&&(n=1),n}function h(t,r,n,o,s,l){let i=r[s];const u=n[s]||1;(t&1<<s||l&1<<s||null==i)&&(i=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=o[s];return i<0&&(i+=c),i=e.clamp(0,i,c-1)}function g(t,r,n,o,s,l){let i=r[s];const u=n[s]||1;(t&1<<s||l&1<<s||null==i)&&(i=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=o[s];return i<0&&(i+=c),i=u>0?e.clamp(0,i,c):e.clamp(-1,i,c-1)}function d(e,t,r){let n=r.length;for(let o=0;o<r.length;o++)if(r[o]>1){n=o;break}for(let o=n+1;o<r.length;o++)if(t[o]>0||r[o]!==e[o])return!1;return!0}function m(e,t){let r=e.length>0?e[e.length-1]:1;for(let n=0;n<e.length-1;n++)r+=e[n]*t[n];return r}function E(t,r,n){let o;const s=t.shape.length;let l;return(o="number"==typeof r?[r,...new Array(s-1).fill(0)]:r.length<s?r.concat(new Array(s-r.length).fill(0)):r.slice()).forEach(t=>{e.assert(-1!==t,()=>"slice() does not support negative begin indexing.")}),l=(l=null==n?new Array(s).fill(-1):"number"==typeof n?[n,...new Array(s-1).fill(-1)]:n.length<s?n.concat(new Array(s-n.length).fill(-1)):n).map((r,n)=>r>=0?r:(e.assert(-1===r,()=>"Negative size values should be exactly -1 but got "+`${r} for the slice() size at index ${n}.`),t.shape[n]-o[n])),[o,l]}
},{"../util":"UxaK"}],"AVD8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerClass=t,exports.SerializationMap=exports.Serializable=void 0;var e=require("./util");class s{getClassName(){return this.constructor.className}static fromConfig(e,s){return new e(s)}}exports.Serializable=s;class a{constructor(){this.classNameMap={}}static getMap(){return null==a.instance&&(a.instance=new a),a.instance}static register(e){a.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function t(s){(0,e.assert)(null!=s.className,()=>"Class being registered does not have the static className property defined."),(0,e.assert)("string"==typeof s.className,()=>"className is required to be a string, but got type "+typeof s.className),(0,e.assert)(s.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),a.register(s)}exports.SerializationMap=a;
},{"./util":"UxaK"}],"IZ2A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expectArraysClose=i,exports.testEpsilon=a,exports.expectPromiseToFail=c,exports.expectArraysEqual=f,exports.expectNumbersClose=l,exports.expectValuesInRange=p,exports.expectArrayBuffersEqual=y,exports.TEST_EPSILON_FLOAT16=void 0;var e=require("./engine"),r=require("./tensor_util_env"),t=require("./util");const n=.001,o=.1;function i(e,r,t){return null==t&&(t=a()),s(e,r,(e,r)=>u(e,r,t))}function a(){return 32===e.ENGINE.backend.floatPrecision()?n:o}function s(e,n,o){let i=!0;if(((0,t.isTypedArray)(e)||(0,t.isTypedArray)(n))&&(i=!1),(0,t.isTypedArray)(e)&&(0,t.isTypedArray)(n)&&(i=!0),i){const r=e.constructor.name,t=n.constructor.name;if(r!==t)throw new Error(`Arrays are of different type. Actual: ${r}. `+`Expected: ${t}`)}if(Array.isArray(e)&&Array.isArray(n)){const o=(0,r.inferShape)(e),i=(0,r.inferShape)(n);if(!(0,t.arraysEqual)(o,i))throw new Error("Arrays have different shapes. "+`Actual: [${o}]. Expected: [${i}]`)}const a=(0,t.isTypedArray)(e)?e:(0,t.flatten)(e),s=(0,t.isTypedArray)(n)?n:(0,t.flatten)(n);if(a.length!==s.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs `+`expected: ${s.length}.\n`+`Actual:   ${a}.\n`+`Expected: ${s}.`);for(let r=0;r<s.length;++r){const e=a[r],t=s[r];if(!o(e,t))throw new Error(`Arrays differ: actual[${r}] = ${e}, expected[${r}] = ${t}.\n`+`Actual:   ${a}.\n`+`Expected: ${s}.`)}}function c(e,r){e().then(()=>r.fail(),()=>r())}function f(e,r){const n="string"==typeof r||"number"==typeof r||"boolean"==typeof r?[r]:r;return(0,t.isString)(e)||(0,t.isString)(e[0])||(0,t.isString)(r)||(0,t.isString)(r[0])?s(e,n,(e,r)=>e==r):s(e,r,(e,r)=>u(e,r,0))}function l(e,r,t){if(null==t&&(t=a()),!u(e,r,t))throw new Error(`Numbers differ: actual === ${e}, expected === ${r}`)}function u(e,r,t){return!isFinite(e)&&!isFinite(r)||!(isNaN(e)||isNaN(r)||Math.abs(e-r)>t)}function p(e,r,t){for(let n=0;n<e.length;n++)if(e[n]<r||e[n]>t)throw new Error(`Value out of range:${e[n]} low: ${r}, high: ${t}`)}function y(e,r){expect(new Float32Array(e)).toEqual(new Float32Array(r))}exports.TEST_EPSILON_FLOAT16=o;
},{"./engine":"tmUz","./tensor_util_env":"x0Hg","./util":"UxaK"}],"yMuw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="2.7.0";exports.version="2.7.0";
},{}],"UkUu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enableProdMode=o,exports.enableDebugMode=i,exports.disableDeprecationWarnings=s,exports.deprecationWarn=a,exports.disposeVariables=c,exports.engine=u,exports.memory=E,exports.profile=d,exports.tidy=N,exports.dispose=p,exports.keep=f,exports.time=x,exports.setBackend=I,exports.ready=l,exports.getBackend=G,exports.removeBackend=k,exports.findBackend=B,exports.findBackendFactory=b,exports.registerBackend=g,exports.backend=m,exports.setPlatform=v;var e=require("./engine"),n=require("./environment"),r=require("./tensor"),t=require("./tensor_util");function o(){(0,n.env)().set("PROD",!0)}function i(){(0,n.env)().set("DEBUG",!0)}function s(){(0,n.env)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function a(e){(0,n.env)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function c(){e.ENGINE.disposeVariables()}function u(){return e.ENGINE}function E(){return e.ENGINE.memory()}function d(n){return e.ENGINE.profile(n)}function N(n,r){return e.ENGINE.tidy(n,r)}function p(e){(0,t.getTensorsInContainer)(e).forEach(e=>e.dispose())}function f(n){return e.ENGINE.keep(n)}function x(n){return e.ENGINE.time(n)}function I(n){return e.ENGINE.setBackend(n)}function l(){return e.ENGINE.ready()}function G(){return e.ENGINE.backendName}function k(n){e.ENGINE.removeBackend(n)}function B(n){return e.ENGINE.findBackend(n)}function b(n){return e.ENGINE.findBackendFactory(n)}function g(n,r,t=1){return e.ENGINE.registerBackend(n,r,t)}function m(){return e.ENGINE.backend}function v(e,r){(0,n.env)().setPlatform(e,r)}(0,r.setDeprecationWarningFn)(a);
},{"./engine":"tmUz","./environment":"rgHm","./tensor":"Zqvm","./tensor_util":"vUHI"}],"geuL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./operation");function d(o,d){let u=(0,t.convertToTensor)(o,"a","add"),s=(0,t.convertToTensor)(d,"b","add");[u,s]=(0,n.makeTypesMatch)(u,s);const a={a:u,b:s};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.add(u,s);return r([u,s]),n},a,null,r.Add)}const u=(0,o.op)({add_:d});exports.add=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"L6i4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDiv=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function i(t,i){let l=(0,n.convertToTensor)(t,"a","floorDiv"),u=(0,n.convertToTensor)(i,"b","floorDiv");[l,u]=(0,o.makeTypesMatch)(l,u);const s={a:l,b:u};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.floorDiv(l,u);return r([l,u]),o},s,null,r.FloorDiv)}const l=(0,t.op)({floorDiv_:i});exports.floorDiv=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"XyQ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.div=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./floorDiv"),o=require("./operation");function u(o,u){let s=(0,n.convertToTensor)(o,"a","div"),v=(0,n.convertToTensor)(u,"b","div");if([s,v]=(0,i.makeTypesMatch)(s,v),"int32"===s.dtype&&"int32"===v.dtype)return(0,t.floorDiv)(s,v);const l={a:s,b:v};return e.ENGINE.runKernelFunc((e,r)=>{const i=e.realDivide(s,v);return r([s,v]),i},l,null,r.Div,{})}const s=(0,o.op)({div_:u});exports.div=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./floorDiv":"L6i4","./operation":"rO1i"}],"WS4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mul=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),u=require("./operation");function o(u,o){let l=(0,t.convertToTensor)(u,"a","mul"),i=(0,t.convertToTensor)(o,"b","mul");[l,i]=(0,n.makeTypesMatch)(l,i);const s={a:l,b:i};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.multiply(l,i);return r([l,i]),n},s,null,r.Multiply)}const l=(0,u.op)({mul_:o});exports.mul=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"LQUr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s=(0,n.convertToTensor)(o,"x","abs"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>(r([s]),"complex64"===s.dtype?e.complexAbs(s):e.abs(s)),t,null,r.Abs)}const t=(0,o.op)({abs_:s});exports.abs=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"ILOc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,o.convertToTensor)(n,"x","acos"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.acos(s);return r([s]),o},t,null,r.Acos)}const t=(0,n.op)({acos_:s});exports.acos=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"NNxA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,o.convertToTensor)(n,"x","acosh"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.acosh(s);return r([s]),o},t,null,r.Acosh)}const t=(0,n.op)({acosh_:s});exports.acosh=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"jrV1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=a(require("../util")),o=require("./operation");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function u(o){n.assert(Array.isArray(o),()=>"The argument passed to tf.addN() must be a list of tensors"),n.assert(o.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+`${o.length}`);const s=o.map((e,t)=>(0,r.convertToTensor)(e,`tensors${t}`,"addN")),a=s[0];s.forEach(e=>{if(e.dtype!==a.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),s.forEach(e=>{if(!n.arraysEqual(e.shape,a.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const u=s;return e.ENGINE.runKernelFunc((e,t)=>{const r=e.addN(s);return t(s),r},u,null,t.AddN)}const d=(0,o.op)({addN_:u});exports.addN=d;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"uTbM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.axesAreInnerMostDims=n,exports.combineLocations=o,exports.computeOutAndReduceShapes=u,exports.expandShapeToKeepDim=s,exports.assertAxesAreInnerMostDims=p,exports.getAxesPermutation=i,exports.getUndoAxesPermutation=f,exports.getInnerMostAxes=a;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function n(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function o(e,t,r){const n=e.length+t.length,o=[];let u=0,s=0;for(let p=0;p<n;p++)-1===r.indexOf(p)?o.push(e[u++]):o.push(t[s++]);return o}function u(e,t){const r=[],n=e.length;for(let o=0;o<n;o++)-1===t.indexOf(o)&&r.push(e[o]);return[r,t.map(t=>e[t])]}function s(e,t){return o(e,t.map(e=>1),t)}function p(t,r,o){e.assert(n(r,o),()=>`${t} supports only inner-most axes for now. `+`Got axes ${r} and rank-${o} input.`)}function i(e,t){if(n(e,t))return null;const r=[];for(let n=0;n<t;++n)-1===e.indexOf(n)&&r.push(n);return e.forEach(e=>r.push(e)),r}function f(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function a(e,t){const r=[];for(let n=t-e;n<t;++n)r.push(n);return r}
},{"../util":"UxaK"}],"kMEx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("../util"),s=require("./axis_util"),l=require("./operation"),o=require("./reshape"),a=require("./transpose");function i(l,i=null,u=!1){let p=(0,n.convertToTensor)(l,"x","all","bool");const c={x:p},x={axis:i,keepDims:u};return e.ENGINE.runKernelFunc(e=>{const r=(0,t.parseAxisParam)(i,p.shape);let n=r;const l=(0,s.getAxesPermutation)(n,p.rank);null!=l&&(p=(0,a.transpose)(p,l),n=(0,s.getInnerMostAxes)(n.length,p.rank));const c=e.all(p,n);if(u){const e=(0,s.expandShapeToKeepDim)(c.shape,r);return(0,o.reshape)(c,e)}return c},c,null,r.All,x)}const u=(0,l.op)({all_:i});exports.all=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"Fa98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("../util"),s=require("./axis_util"),o=require("./operation"),a=require("./reshape"),i=require("./transpose");function u(o,u=null,l=!1){let p=(0,n.convertToTensor)(o,"x","any","bool");const c={x:p},x={axis:u,keepDims:l};return e.ENGINE.runKernelFunc(e=>{const r=(0,t.parseAxisParam)(u,p.shape);let n=r;const o=(0,s.getAxesPermutation)(n,p.rank);null!=o&&(p=(0,i.transpose)(p,o),n=(0,s.getInnerMostAxes)(n.length,p.rank));const c=e.any(p,n);if(l){const e=(0,s.expandShapeToKeepDim)(c.shape,r);return(0,a.reshape)(c,e)}return c},c,null,r.Any,x)}const l=(0,o.op)({any_:u});exports.any=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"qu9n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=s(require("./axis_util")),a=require("./operation"),u=require("./transpose");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(a,i=0){let s=(0,t.convertToTensor)(a,"x","argMax");const l={x:s},p={axis:i};return e.ENGINE.runKernelFunc((e,r)=>{r([s]);let t=n.parseAxisParam(i,s.shape);const a=o.getAxesPermutation(t,s.rank);return null!=a&&(s=(0,u.transpose)(s,a),t=o.getInnerMostAxes(t.length,s.rank)),e.argMax(s,t[0])},l,null,r.ArgMax,p)}const p=(0,a.op)({argMax_:l});exports.argMax=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./transpose":"yiEV"}],"L4Ct":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),i=s(require("./axis_util")),o=require("./operation"),u=require("./transpose");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(t,i,o):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function l(o,a=0){let s=(0,t.convertToTensor)(o,"x","argMin");const l={x:s},p={axis:a};return e.ENGINE.runKernelFunc((e,r)=>{r([s]),null==a&&(a=0);let t=n.parseAxisParam(a,s.shape);const o=i.getAxesPermutation(t,s.rank);return null!=o&&(s=(0,u.transpose)(s,o),t=i.getInnerMostAxes(t.length,s.rank)),e.argMin(s,t[0])},l,null,r.ArgMin,p)}const p=(0,o.op)({argMin_:l});exports.argMin=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./transpose":"yiEV"}],"YHV3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asin=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),s=require("./operation");function i(s){const i=(0,r.convertToTensor)(s,"x","asin"),o={x:i};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.asin(i);return n([i]),r},o,null,n.Asin)}const o=(0,s.op)({asin_:i});exports.asin=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"O9ii":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinh=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),s=require("./operation");function i(s){const i=(0,r.convertToTensor)(s,"x","asinh"),o={x:i};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.asinh(i);return n([i]),r},o,null,n.Asinh)}const o=(0,s.op)({asinh_:i});exports.asinh=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"ZXMd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,r.convertToTensor)(t,"x","atan"),a={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.atan(o);return n([o]),r},a,null,n.Atan)}const a=(0,t.op)({atan_:o});exports.atan=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"qQ7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util"),t=require("../tensor_util_env"),a=require("./operation");function o(a,o){let u=(0,t.convertToTensor)(a,"a","atan2"),s=(0,t.convertToTensor)(o,"b","atan2");[u,s]=(0,r.makeTypesMatch)(u,s);const i={a:u,b:s};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.atan2(u,s);return n([u,s]),r},i,null,n.Atan2)}const u=(0,a.op)({atan2_:o});exports.atan2=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"rIil":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanh=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,r.convertToTensor)(t,"x","atanh"),a={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.atanh(o);return n([o]),r},a,null,n.Atanh)}const a=(0,t.op)({atanh_:o});exports.atanh=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"cqi6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeDilation2DInfo=r,exports.computePool2DInfo=o,exports.computePool3DInfo=i,exports.computeConv2DInfo=a,exports.computeConv3DInfo=s,exports.computeDefaultPad=u,exports.tupleValuesAreOne=M,exports.eitherStridesOrDilationsAreOne=b,exports.convertConv2DDataFormat=w;var t=n(require("../util"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function r(t,e,n,r,o="NHWC",i){return a(t,[...e,t[3]],n,i,r,null,null,w(o))}function o(t,e,n,r,o,i,s="channelsLast"){const[h,l]=f(e);let u;if("channelsLast"===s)u=[h,l,t[3],t[3]];else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);u=[h,l,t[1],t[1]]}return a(t,u,n,r,o,i,!1,s)}function i(t,e,n,r,o,i,a="NDHWC"){const[h,l,u]=c(e);let f,p;if("NDHWC"===a)p="channelsLast",f=[h,l,u,t[4],t[4]];else{if("NCDHW"!==a)throw new Error(`Unknown dataFormat ${a}`);p="channelsFirst",f=[h,l,u,t[1],t[1]]}return s(t,f,n,r,o,!1,p,i)}function a(t,e,n,r,o,i,a=!1,s="channelsLast"){let[h,l,u,c]=[-1,-1,-1,-1];if("channelsLast"===s)[h,l,u,c]=t;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[h,c,l,u]=t}const[m,g,,M]=e,[b,w]=f(n),[D,W]=f(r),I=p(m,D),y=p(g,W),{padInfo:H,outHeight:F,outWidth:L}=d(o,l,u,b,w,I,y,i,s),C=a?M*c:M;let v;return"channelsFirst"===s?v=[h,C,F,L]:"channelsLast"===s&&(v=[h,F,L,C]),{batchSize:h,dataFormat:s,inHeight:l,inWidth:u,inChannels:c,outHeight:F,outWidth:L,outChannels:C,padInfo:H,strideHeight:b,strideWidth:w,filterHeight:m,filterWidth:g,effectiveFilterHeight:I,effectiveFilterWidth:y,dilationHeight:D,dilationWidth:W,inShape:t,outShape:v,filterShape:e}}function s(t,e,n,r,o,i=!1,a="channelsLast",s){let[h,l,u,f,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[h,l,u,f,d]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[h,d,l,u,f]=t}const[g,M,b,,w]=e,[D,W,I]=c(n),[y,H,F]=c(r),L=p(g,y),C=p(M,H),v=p(b,F),{padInfo:k,outDepth:E,outHeight:$,outWidth:x}=m(o,l,u,f,D,W,I,L,C,v,s),O=i?w*d:w;let S;return"channelsFirst"===a?S=[h,O,E,$,x]:"channelsLast"===a&&(S=[h,E,$,x,O]),{batchSize:h,dataFormat:a,inDepth:l,inHeight:u,inWidth:f,inChannels:d,outDepth:E,outHeight:$,outWidth:x,outChannels:O,padInfo:k,strideDepth:D,strideHeight:W,strideWidth:I,filterDepth:g,filterHeight:M,filterWidth:b,effectiveFilterDepth:L,effectiveFilterHeight:C,effectiveFilterWidth:v,dilationDepth:y,dilationHeight:H,dilationWidth:F,inShape:t,outShape:S,filterShape:e}}function h(e,n,r,o,i){null==o&&(o=u(e,n,r));const a=e[0],s=e[1],h=g((a-n+2*o)/r+1,i);t.assert(t.isInt(h),()=>`The output # of rows (${h}) must be an integer. `+"Change the stride and/or zero pad parameters");const l=g((s-n+2*o)/r+1,i);return t.assert(t.isInt(l),()=>`The output # of columns (${l}) must be an integer. `+"Change the stride and/or zero pad parameters"),[h,l]}function l(e,n,r,o,i,a){null==i&&(i=u(e,n,o));const s=e[0],h=e[1],l=e[2],f=g((s-n+2*i)/o+1,a);t.assert(t.isInt(f),()=>`The output # of depths (${f}) must be an integer. `+"Change the stride and/or zero pad parameters");const c=g((h-n+2*i)/o+1,a);t.assert(t.isInt(c),()=>`The output # of rows (${c}) must be an integer. `+"Change the stride and/or zero pad parameters");const p=g((l-n+2*i)/o+1,a);return t.assert(t.isInt(p),()=>`The output # of columns (${p}) must be an integer. `+"Change the stride and/or zero pad parameters"),[f,c,p,r]}function u(t,e,n,r=1){const o=p(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function f(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function c(t){return"number"==typeof t?[t,t,t]:t}function p(t,e){return e<=1?t:t+(t-1)*(e-1)}function d(t,e,n,r,o,i,a,s,l){let u,f,c;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const o=h([e,n],i,r,t,s);f=o[0],c=o[1]}else if("same"===t){f=Math.ceil(e/r),c=Math.ceil(n/o);const t=Math.max(0,(f-1)*r+i-e),s=Math.max(0,(c-1)*o+a-n),h=Math.floor(t/2),l=t-h,p=Math.floor(s/2);u={top:h,bottom:l,left:p,right:s-p,type:"SAME"}}else if("valid"===t)u={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((e-i+1)/r),c=Math.ceil((n-a+1)/o);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const h="channelsLast"===l?t[1][0]:t[2][0],p="channelsLast"===l?t[1][1]:t[2][1],d="channelsLast"===l?t[2][0]:t[3][0],m="channelsLast"===l?t[2][1]:t[3][1];u={top:h,bottom:p,left:d,right:m,type:0===h&&0===p&&0===d&&0===m?"VALID":"EXPLICIT"},f=g((e-i+h+p)/r+1,s),c=g((n-a+d+m)/o+1,s)}}return{padInfo:u,outHeight:f,outWidth:c}}function m(t,e,n,r,o,i,a,s,h,u,f){let c,p,d,m;if("number"==typeof t){c={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const i=l([e,n,r,1],s,1,o,t,f);p=i[0],d=i[1],m=i[2]}else if("same"===t){const t=((p=Math.ceil(e/o))-1)*o+s-e,l=((d=Math.ceil(n/i))-1)*i+h-n,f=((m=Math.ceil(r/a))-1)*a+u-r,g=Math.floor(t/2),M=t-g,b=Math.floor(l/2),w=l-b,D=Math.floor(f/2);c={top:b,bottom:w,left:D,right:f-D,front:g,back:M,type:"SAME"}}else{if("valid"!==t)throw Error(`Unknown padding parameter: ${t}`);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/o),d=Math.ceil((n-h+1)/i),m=Math.ceil((r-u+1)/a)}return{padInfo:c,outDepth:p,outHeight:d,outWidth:m}}function g(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function M(t){const[e,n,r]=f(t);return 1===e&&1===n&&1===r}function b(t,e){return M(t)||M(e)}function w(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}
},{"../util":"UxaK"}],"Pm39":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=l(require("../util")),n=require("./cast"),i=l(require("./conv_util")),a=require("./operation"),s=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function p(a,u,l,p,c){const d=(0,t.convertToTensor)(a,"x","avgPool","float32");o.assert(i.eitherStridesOrDilationsAreOne(l,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${l} and dilations '1'`);let f=d,g=!1;3===d.rank&&(g=!0,f=(0,s.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.assert(4===f.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${f.rank}.`),null!=c&&o.assert(o.isInt(p),()=>"Error in avgPool: pad must be an integer when using, "+`dimRoundingMode ${c} but got pad ${p}.`);const v={x:f},h={filterSize:u,strides:l,pad:p,dimRoundingMode:c};let P=e.ENGINE.runKernelFunc((e,r)=>{const t=i.computePool2DInfo(f.shape,u,l,1,p,c);return r([f]),1===t.filterWidth&&1===t.filterHeight&&o.arraysEqual(t.inShape,t.outShape)?f.clone():e.avgPool(f,t)},v,null,r.AvgPool,h);return P=(0,n.cast)(P,d.dtype),g?(0,s.reshape)(P,[P.shape[1],P.shape[2],P.shape[3]]):P}const c=(0,a.op)({avgPool_:p});exports.avgPool=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./cast":"owKL","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"rD3s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3d=void 0;var e=require("../engine"),r=require("../globals"),t=require("../kernel_names"),o=require("../tensor_util_env"),n=d(require("../util")),a=require("./cast"),i=d(require("./conv_util")),s=require("./operation"),u=require("./reshape");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function p(s,l,d,p,c,f="NDHWC",g){null==g?g=[1,1,1]:(0,r.deprecationWarn)("dilations is deprecated, this field will be gone in v3.0.0.");const v=(0,o.convertToTensor)(s,"x","avgPool3d","float32");let h=v,P=!1;4===v.rank&&(P=!0,h=(0,u.reshape)(v,[1,v.shape[0],v.shape[1],v.shape[2],v.shape[3]])),n.assert(5===h.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${h.rank}.`),n.assert("NDHWC"===f,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${f}`),n.assert(i.eitherStridesOrDilationsAreOne(d,g),()=>"Error in avgPool3d: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '${g}'`),null!=c&&n.assert(n.isInt(p),()=>"Error in avgPool3d: pad must be an integer when using, "+`dimRoundingMode ${c} but got pad ${p}.`);const b={x:h},y={filterSize:l,strides:d,pad:p,dimRoundingMode:c,dataFormat:f,dilations:g};let O=e.ENGINE.runKernelFunc((e,r)=>{null==g&&(g=[1,1,1]);const t=i.computePool3DInfo(h.shape,l,d,g,p,c,f);return r([h]),e.avgPool3d(h,t)},b,null,t.AvgPool3D,y);return O=(0,a.cast)(O,h.dtype),P?(0,u.reshape)(O,[O.shape[1],O.shape[2],O.shape[3],O.shape[4]]):O}const c=(0,s.op)({avgPool3d_:p});exports.avgPool3d=c;
},{"../engine":"tmUz","../globals":"UkUu","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./cast":"owKL","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"I0tS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsConsistent=n,exports.computeOutShape=o;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function n(t,r){const n=t[0].length;t.forEach((t,r)=>{e.assert(t.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same `+`as the rank of the rest (${n})`)}),e.assert(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const o=t[0];t.forEach((t,s)=>{for(let a=0;a<n;a++)e.assert(a===r||t[a]===o[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${t}) `+`does not match the shape of the rest (${o}) `+`along the non-concatenated axis ${s}.`)})}function o(e,t){const r=e[0].slice();for(let n=1;n<e.length;n++)r[t]+=e[n][t];return r}
},{"../util":"UxaK"}],"gZir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=require("../util"),o=require("./concat_util"),s=require("./operation"),a=require("./tensor");function c(s,c=0){(0,n.assert)(s.length>=1,()=>"Pass at least one tensor to concat");let i=(0,r.convertToTensorArray)(s,"tensors","concat");"complex64"===i[0].dtype&&i.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)});const u=i,p={axis:c};return e.ENGINE.runKernelFunc((e,t)=>{const r=(0,n.parseAxisParam)(c,i[0].shape)[0],s=(0,o.computeOutShape)(i.map(e=>e.shape),r);if(0===(0,n.sizeFromShape)(s))return(0,a.tensor)([],s);if(1===(i=i.filter(e=>e.size>0)).length)return i[0];const u=i.map(e=>e.shape);(0,o.assertParamsConsistent)(u,r);const p=e.concat(i,r);return t(i),p},u,null,t.Concat,p)}const i=(0,s.op)({concat_:c});exports.concat=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./concat_util":"I0tS","./operation":"rO1i","./tensor":"tCGm"}],"QUTt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoid=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),o=require("./operation");function n(o){const n=(0,i.convertToTensor)(o,"x","sigmoid"),s={x:n};return e.ENGINE.runKernelFunc((e,r)=>{const i=e.sigmoid(n);return r([i]),i},s,null,r.Sigmoid)}const s=(0,o.op)({sigmoid_:n});exports.sigmoid=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"xcz4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation"),i=s(require("./slice_util"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(n,o,s){const u=(0,t.convertToTensor)(n,"x","slice");if(0===u.rank)throw new Error("Slicing scalar is not possible");const c={x:u},l={begin:o,size:s};return e.ENGINE.runKernelFunc((e,r)=>{const[t,n]=i.parseSliceParams(u,o,s);return i.assertParamsValid(u,t,n),r([u]),e.slice(u,t,n)},c,null,r.Slice,l)}const c=(0,n.op)({slice_:u});exports.slice=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./slice_util":"sNMx"}],"Lqgl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanh=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,r.convertToTensor)(t,"x","tanh"),u={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.tanh(o);return n([r]),r},u,null,n.Tanh)}const u=(0,t.op)({tanh_:o});exports.tanh=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"z3ej":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.basicLSTMCell=void 0;var e=require("../tensor_util_env"),r=require("./add"),i=require("./concat"),s=require("./mat_mul"),o=require("./mul"),l=require("./operation"),t=require("./sigmoid"),c=require("./slice"),a=require("./tanh");function n(l,n,u,T,d,m){const M=(0,e.convertToTensor)(l,"forgetBias","basicLSTMCell"),b=(0,e.convertToTensor)(n,"lstmKernel","basicLSTMCell"),v=(0,e.convertToTensor)(u,"lstmBias","basicLSTMCell"),q=(0,e.convertToTensor)(T,"data","basicLSTMCell"),C=(0,e.convertToTensor)(d,"c","basicLSTMCell"),L=(0,e.convertToTensor)(m,"h","basicLSTMCell"),S=(0,i.concat)([q,L],1),p=(0,s.matMul)(S,b),h=(0,r.add)(p,v),_=h.shape[0],g=h.shape[1]/4,f=[_,g],x=(0,c.slice)(h,[0,0],f),B=(0,c.slice)(h,[0,g],f),j=(0,c.slice)(h,[0,2*g],f),y=(0,c.slice)(h,[0,3*g],f),K=(0,r.add)((0,o.mul)((0,t.sigmoid)(x),(0,a.tanh)(B)),(0,o.mul)(C,(0,t.sigmoid)((0,r.add)(M,j))));return[K,(0,o.mul)((0,a.tanh)(K),(0,t.sigmoid)(y))]}const u=(0,l.op)({basicLSTMCell_:n});exports.basicLSTMCell=u;
},{"../tensor_util_env":"x0Hg","./add":"geuL","./concat":"gZir","./mat_mul":"A3yk","./mul":"WS4w","./operation":"rO1i","./sigmoid":"QUTt","./slice":"xcz4","./tanh":"Lqgl"}],"dRKG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=c(require("../util")),o=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=n?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function u(o,a,c){const u=(0,r.convertToTensor)(o,"x","batchToSpaceND"),i=a.reduce((e,t)=>e*t);n.assert(u.rank>=1+a.length,()=>`input rank is ${u.rank} but should be > than blockShape.length ${a.length}`),n.assert(c.length===a.length,()=>`crops.length is ${c.length} but should be equal to blockShape.length  ${a.length}`),n.assert(u.shape[0]%i==0,()=>`input tensor batch is ${u.shape[0]} but is not divisible by the product of `+`the elements of blockShape ${a.join(" * ")} === ${i}`);const s={x:u},l={blockShape:a,crops:c};return e.ENGINE.runKernelFunc(e=>e.batchToSpaceND(u,a,c),s,null,t.BatchToSpaceND,l)}const i=(0,o.op)({batchToSpaceND_:u});exports.batchToSpaceND=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"gRSO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xAs4D=r;var e=require("./reshape");function r(r){let s;return s=0===r.rank||1===r.rank?(0,e.reshape)(r,[1,1,1,r.size]):2===r.rank?(0,e.reshape)(r,[1,1,r.shape[0],r.shape[1]]):3===r.rank?(0,e.reshape)(r,[1,r.shape[0],r.shape[1],r.shape[2]]):r}
},{"./reshape":"khVG"}],"H6um":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),a=i(require("../util")),t=require("./batchnorm_util"),o=require("./operation"),s=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=a?Object.getOwnPropertyDescriptor(e,t):null;o&&(o.get||o.set)?Object.defineProperty(n,t,o):n[t]=e[t]}return n.default=e,r&&r.set(e,n),n}function c(o,u,i,c,p,h){null==h&&(h=.001);const f=(0,n.convertToTensor)(o,"x","batchNorm"),v=(0,n.convertToTensor)(u,"mean","batchNorm"),m=(0,n.convertToTensor)(i,"variance","batchNorm");let b,k;null!=p&&(b=(0,n.convertToTensor)(p,"scale","batchNorm")),null!=c&&(k=(0,n.convertToTensor)(c,"offset","batchNorm")),a.assert(v.rank===m.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),a.assert(null==k||v.rank===k.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),a.assert(null==b||v.rank===b.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d=(0,t.xAs4D)(f),q={x:d,scale:b,offset:k,mean:v,variance:m},N={varianceEpsilon:h},y=e.ENGINE.runKernelFunc((e,r)=>(r([d,v,m,b]),e.batchNorm(d,l(v),l(m),l(k),l(b),h)),q,null,r.FusedBatchNorm,N);return(0,s.reshape)(y,f.shape)}function l(e){return null==e?null:0===e.rank?(0,s.reshape)(e,[e.size]):1===e.rank?e:2===e.rank?(0,s.reshape)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,s.reshape)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}const p=(0,o.op)({batchNorm_:c});exports.batchNorm=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./batchnorm_util":"gRSO","./operation":"rO1i","./reshape":"khVG"}],"Bfm6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm2d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=o();if(t&&t.has(r))return t.get(r);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var c=n?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(e,a,c):e[a]=r[a]}return e.default=r,t&&t.set(r,e),e}function c(n,o,a,c,u,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=u&&(l=(0,r.convertToTensor)(u,"scale","batchNorm")),null!=c&&(f=(0,r.convertToTensor)(c,"offset","batchNorm")),t.assert(2===i.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+`${i.rank}.`),t.assert(2===b.rank||1===b.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+`got rank ${b.rank}.`),t.assert(2===k.rank||1===k.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(2===f.rank||1===f.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const u=(0,n.op)({batchNorm2d_:c});exports.batchNorm2d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./batchnorm":"H6um","./operation":"rO1i"}],"GZN2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm3d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=o();if(t&&t.has(r))return t.get(r);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var c=n?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(e,a,c):e[a]=r[a]}return e.default=r,t&&t.set(r,e),e}function c(n,o,a,c,u,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=u&&(l=(0,r.convertToTensor)(u,"scale","batchNorm")),null!=c&&(f=(0,r.convertToTensor)(c,"offset","batchNorm")),t.assert(3===i.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+`${i.rank}.`),t.assert(3===b.rank||1===b.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+`got rank ${b.rank}.`),t.assert(3===k.rank||1===k.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(3===f.rank||1===f.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const u=(0,n.op)({batchNorm3d_:c});exports.batchNorm3d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./batchnorm":"H6um","./operation":"rO1i"}],"yd3x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm4d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=o();if(t&&t.has(r))return t.get(r);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var c=n?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(e,a,c):e[a]=r[a]}return e.default=r,t&&t.set(r,e),e}function c(n,o,a,c,u,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=u&&(l=(0,r.convertToTensor)(u,"scale","batchNorm")),null!=c&&(f=(0,r.convertToTensor)(c,"offset","batchNorm")),t.assert(4===i.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+`${i.rank}.`),t.assert(4===b.rank||1===b.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+`got rank ${b.rank}.`),t.assert(4===k.rank||1===k.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(4===f.rank||1===f.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const u=(0,n.op)({batchNorm4d_:c});exports.batchNorm4d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./batchnorm":"H6um","./operation":"rO1i"}],"eQsv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastTo=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./clone"),n=require("./operation"),a=require("./reshape");function s(n,s){let i=(0,o.convertToTensor)(n,"broadcastTo","x");const c=i.shape;if(s.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${s}].`);if(s.length<i.rank)throw new Error(`broadcastTo(): shape.length=${s.length} < input.rank=${i.rank}.`);if(s.length>i.rank){const e=i.shape.slice();for(;e.length<s.length;)e.unshift(1);i=(0,a.reshape)(i,e)}const l=i.shape,h=Array.from(s);for(let e=s.length-1;e>=0;e--)if(l[e]===s[e])h[e]=1;else if(1!==i.shape[e])throw new Error(`broadcastTo(): [${c}] cannot be broadcast to [${s}].`);if(0===h.map((e,r)=>e>1?r:-1).filter(e=>e>=0).length)return(0,t.clone)(i);const p={x:i},u={shape:s,inputShape:l};return e.ENGINE.runKernelFunc(e=>e.tile(i,h),p,null,r.BroadcastTo,u)}const i=(0,n.op)({broadcastTo_:s});exports.broadcastTo=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./clone":"HHuR","./operation":"rO1i","./reshape":"khVG"}],"LpmI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceil=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o=(0,n.convertToTensor)(i,"x","ceil"),t={x:o};return e.ENGINE.runKernelFunc(e=>e.ceil(o),t,null,r.Ceil)}const t=(0,i.op)({ceil_:o});exports.ceil=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"qXRG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValue=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),u=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function l(u,o,i){const l=(0,t.convertToTensor)(u,"x","clipByValue");n.assert(o<=i,()=>`Error in clip: min (${o}) must be `+`less than or equal to max (${i}).`);const c={x:l},a={clipValueMin:o,clipValueMax:i};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.clip(l,o,i);return r([l]),t},c,null,r.ClipByValue,a)}const c=(0,u.op)({clipByValue_:l});exports.clipByValue=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"Y9MR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat1d=void 0;var e=require("./concat"),o=require("./operation");function t(o){return(0,e.concat)(o,0)}const c=(0,o.op)({concat1d_:t});exports.concat1d=c;
},{"./concat":"gZir","./operation":"rO1i"}],"lSwZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat2d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat2d_:t});exports.concat2d=c;
},{"./concat":"gZir","./operation":"rO1i"}],"B3HR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat3d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat3d_:t});exports.concat3d=c;
},{"./concat":"gZir","./operation":"rO1i"}],"JLwy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat4d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat4d_:t});exports.concat4d=c;
},{"./concat":"gZir","./operation":"rO1i"}],"K8t2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),s=require("./operation"),i=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(s,a,u,p,c="NHWC",d=[1,1],l){const f=(0,t.convertToTensor)(s,"x","conv2d"),v=(0,t.convertToTensor)(a,"filter","conv2d");let h=f,b=!1;3===f.rank&&(b=!0,h=(0,i.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),n.assert(4===h.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${h.rank}.`),n.assert(4===v.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+`${v.rank}.`),null!=l&&n.assert(n.isInt(p),()=>"Error in conv2d: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${p}.`);const g="NHWC"===c?h.shape[3]:h.shape[1];n.assert(g===v.shape[2],()=>`Error in conv2d: depth of input (${g}) must match `+`input depth for filter ${v.shape[2]}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,d),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${d}'`);const k={x:h,filter:v},m={strides:u,pad:p,dataFormat:c,dilations:d,dimRoundingMode:l},O=e.ENGINE.runKernelFunc((e,r)=>{const t=o.convertConv2DDataFormat(c),n=o.computeConv2DInfo(h.shape,v.shape,u,d,p,l,!1,t),s=e.conv2d(h,v,n);return r([h,v]),s},k,null,r.Conv2D,m);return b?(0,i.reshape)(O,[O.shape[1],O.shape[2],O.shape[3]]):O}const c=(0,s.op)({conv2d_:p});exports.conv2d=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"Dlln":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=i(require("./conv_util")),o=require("./operation"),s=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(o,a,i,p,u="NWC",c=1,d){const h=(0,e.convertToTensor)(o,"x","conv1d"),l=(0,e.convertToTensor)(a,"filter","conv1d");let f=h,v=!1;2===h.rank&&(v=!0,f=(0,s.reshape)(h,[1,h.shape[0],h.shape[1]])),r.assert(3===f.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`),r.assert(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+`${l.rank}.`),null!=d&&r.assert(r.isInt(p),()=>"Error in conv1d: pad must be an integer when using, "+`dimRoundingMode ${d} but got pad ${p}.`),r.assert(f.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${f.shape[2]}) must match `+`input depth for filter ${l.shape[1]}.`),r.assert(n.eitherStridesOrDilationsAreOne(i,c),()=>"Error in conv1D: Either stride or dilation must be 1. "+`Got stride ${i} and dilation '${c}'`),r.assert("NWC"===u,()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`);const b=(0,s.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),y=(0,s.reshape)(f,[f.shape[0],1,f.shape[1],f.shape[2]]),g=[1,i],k=[1,c],O=(0,t.conv2d)(y,b,g,p,"NHWC",k,d);return v?(0,s.reshape)(O,[O.shape[2],O.shape[3]]):(0,s.reshape)(O,[O.shape[0],O.shape[2],O.shape[3]])}const u=(0,o.op)({conv1d_:p});exports.conv1d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./conv2d":"K8t2","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"ufM1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=u(require("../util")),n=u(require("./conv_util")),o=require("./operation"),a=require("./reshape");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function s(o,p,u,s,i,c="NHWC",h){t.assert(o.length===p.rank,()=>"Length of inShape "+`(${o.length}) and rank of dy (${p.rank}) must match`);let d=o,l=p,f=!1;3===p.rank&&(f=!0,l=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]),d=[1,o[0],o[1],o[2]]),t.assert(4===d.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+`${d.length}.`),t.assert(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${l.rank}`),t.assert(4===u.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${u.rank}`);const v="NHWC"===c?d[3]:d[1],g="NHWC"===c?l.shape[3]:l.shape[1];t.assert(v===u.shape[2],()=>`Error in conv2dDerInput: depth of input (${v}) must `+`match input depth for filter ${u.shape[2]}.`),t.assert(g===u.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must `+`match output depth for filter ${u.shape[3]}.`),null!=h&&t.assert(t.isInt(i),()=>"Error in conv2dDerInput: pad must be an integer when using, "+`dimRoundingMode ${h} but got pad ${i}.`);const k={dy:l,filter:u},m={strides:s,pad:i,dataFormat:c,dimRoundingMode:h,inputShape:d},D=e.ENGINE.runKernelFunc((e,r)=>{const t=n.convertConv2DDataFormat(c),o=n.computeConv2DInfo(d,u.shape,s,1,i,h,!1,t),a=e.conv2dDerInput(l,u,o);return r([l,u]),a},k,null,r.Conv2DBackpropInput,m);return f?(0,a.reshape)(D,[D.shape[1],D.shape[2],D.shape[3]]):D}const i=(0,o.op)({conv2DBackpropInput_:s});exports.conv2DBackpropInput=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"foig":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv2d_backprop_input"),r=require("./operation");function n(r,n,s,t,p,c){const v=(0,o.convertToTensor)(r,"x","conv2dTranspose"),i=(0,o.convertToTensor)(n,"filter","conv2dTranspose");return(0,e.conv2DBackpropInput)(s,v,i,t,p,"NHWC",c)}const s=(0,r.op)({conv2dTranspose_:n});exports.conv2dTranspose=s;
},{"../tensor_util_env":"x0Hg","./conv2d_backprop_input":"ufM1","./operation":"rO1i"}],"ReLt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),s=require("./operation"),a=require("./reshape");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(s,i,u,p,c="NDHWC",d=[1,1,1]){const l=(0,t.convertToTensor)(s,"x","conv3d"),f=(0,t.convertToTensor)(i,"filter","conv3d");let v=l,h=!1;4===l.rank&&(h=!0,v=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),n.assert(5===v.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${v.rank}.`),n.assert(5===f.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+`${f.rank}.`),n.assert(v.shape[4]===f.shape[3],()=>`Error in conv3d: depth of input (${v.shape[4]}) must match `+`input depth for filter ${f.shape[3]}.`),n.assert((0,o.eitherStridesOrDilationsAreOne)(u,d),()=>"Error in conv3D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${d}'`),n.assert("NDHWC"===c,()=>`Error in conv3d: got dataFormat of ${c} but only NDHWC is currently supported.`);const b={x:v,filter:f},k={strides:u,pad:p,dataFormat:c,dilations:d},y=e.ENGINE.runKernelFunc((e,r)=>{const t=o.computeConv3DInfo(v.shape,f.shape,u,d,p),n=e.conv3d(v,f,t);return r([v,f]),n},b,null,r.Conv3D,k);return h?(0,a.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const c=(0,s.op)({conv3d_:p});exports.conv3d=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"zJgE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=u(require("../util")),n=u(require("./conv_util")),p=require("./operation"),o=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if(Object.prototype.hasOwnProperty.call(e,p)){var o=n?Object.getOwnPropertyDescriptor(e,p):null;o&&(o.get||o.set)?Object.defineProperty(t,p,o):t[p]=e[p]}return t.default=e,r&&r.set(e,t),t}function s(p,a,u,s,i){t.assert(p.length===a.rank,()=>"Length of inShape "+`(${p.length}) and rank of dy (${a.rank}) must match`);let c=p,h=a,f=!1;4===a.rank&&(f=!0,h=(0,o.reshape)(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=[1,p[0],p[1],p[2],p[3]]);const l=c[4],d=h.shape[4];t.assert(5===c.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+`${c.length}.`),t.assert(5===h.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+`rank ${h.rank}`),t.assert(5===u.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+`rank ${u.rank}`),t.assert(l===u.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must `+`match input depth for filter ${u.shape[3]}.`),t.assert(d===u.shape[4],()=>`Error in conv3dDerInput: depth of output (${d}) must `+`match output depth for filter ${u.shape[4]}.`);const v={dy:h,filter:u},k={pad:i,strides:s,inputShape:c},g=e.ENGINE.runKernelFunc(e=>{const r=n.computeConv3DInfo(c,u.shape,s,1,i);return e.conv3dDerInput(h,u,r)},v,null,r.Conv3DBackpropInputV2,k);return f?(0,o.reshape)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const i=(0,p.op)({conv3DBackpropInput_:s});exports.conv3DBackpropInput=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"BnR4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv3d_backprop_input"),r=require("./operation");function n(r,n,s,t,p){const c=(0,o.convertToTensor)(r,"x","conv3dTranspose"),v=(0,o.convertToTensor)(n,"filter","conv3dTranspose");return(0,e.conv3DBackpropInput)(s,c,v,t,p)}const s=(0,r.op)({conv3dTranspose_:n});exports.conv3dTranspose=s;
},{"../tensor_util_env":"x0Hg","./conv3d_backprop_input":"zJgE","./operation":"rO1i"}],"Ky4d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,o.convertToTensor)(n,"x","cos"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.cos(s);return r([s]),o},t,null,r.Cos)}const t=(0,n.op)({cos_:s});exports.cos=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"q60v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,o.convertToTensor)(n,"x","cosh"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.cosh(s);return r([s]),o},t,null,r.Cosh)}const t=(0,n.op)({cosh_:s});exports.cosh=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"MovR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./axis_util"),u=require("./operation"),t=require("./transpose");function o(u,o=0,i=!1,c=!1){const l=(0,n.convertToTensor)(u,"x","cumsum"),m={x:l},a={axis:o,exclusive:i,reverse:c};return e.ENGINE.runKernelFunc((e,r)=>{const n=(0,s.getAxesPermutation)([o],l.rank);let u=l;null!=n&&(u=(0,t.transpose)(l,n));const m=(0,s.getInnerMostAxes)(1,l.rank)[0];let a=e.cumsum(u,m,i,c);if(r([l]),null!=n){const e=(0,s.getUndoAxesPermutation)(n);a=(0,t.transpose)(a,e)}return a},m,null,r.Cumsum,a)}const i=(0,u.op)({cumsum_:o});exports.cumsum=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./axis_util":"uTbM","./operation":"rO1i","./transpose":"yiEV"}],"RcRb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(o,p,i="NHWC"){const a=(0,r.convertToTensor)(o,"x","depthToSpace"),s="NHWC"===i?a.shape[1]:a.shape[2],u="NHWC"===i?a.shape[2]:a.shape[3],c="NHWC"===i?a.shape[3]:a.shape[1];n.assert(s*p>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${p}  for depthToSpace with input shape\n    ${a.shape}`),n.assert(u*p>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${p} for depthToSpace with input shape\n        ${a.shape}`),n.assert(c%(p*p)==0,()=>`Dimension size must be evenly divisible by ${p*p} but is ${c} for depthToSpace with input shape ${a.shape}`);const h={x:a},l={blockSize:p,dataFormat:i};return e.ENGINE.runKernelFunc(e=>e.depthToSpace(a,p,i),h,null,t.DepthToSpace,l)}const s=(0,o.op)({depthToSpace_:a});exports.depthToSpace=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"hlJ3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),i=u(require("./conv_util")),s=require("./operation"),o=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function p(s,a,u,p,d="NHWC",h=[1,1],l){const c=(0,t.convertToTensor)(s,"x","depthwiseConv2d"),f=(0,t.convertToTensor)(a,"filter","depthwiseConv2d");let v=c,w=!1;3===c.rank&&(w=!0,v=(0,o.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),n.assert(4===v.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+`rank ${v.rank}.`),n.assert(4===f.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+`${f.rank}.`),n.assert(v.shape[3]===f.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+`(${v.shape[3]}) must match the inChannels dimension in `+`filter ${f.shape[2]}.`),null!=l&&n.assert(n.isInt(p),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${p}.`);const b={x:v,filter:f},C={strides:u,pad:p,dataFormat:d,dilations:h,dimRoundingMode:l},m=e.ENGINE.runKernelFunc((e,r)=>{null==h&&(h=[1,1]),n.assert(i.eitherStridesOrDilationsAreOne(u,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${u} and dilations '${h}'`);const t=i.computeConv2DInfo(v.shape,f.shape,u,h,p,l,!0),s=e.depthwiseConv2D(v,f,t);return r([v,f]),s},b,null,r.DepthwiseConv2dNative,C);return w?(0,o.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const d=(0,s.op)({depthwiseConv2d_:p});exports.depthwiseConv2d=d;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"oFFT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation"),s=require("./reshape");function o(i){const o=(0,n.convertToTensor)(i,"x","diag"),t={x:o};return e.ENGINE.runKernelFunc(e=>{const r=(0,s.reshape)(o,[o.size]),n=e.diag(r),t=[...i.shape,...i.shape];return(0,s.reshape)(n,t)},t,null,r.Diag)}const t=(0,i.op)({diag_:o});exports.diag=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./reshape":"khVG"}],"JjSs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation"),i=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function u(o,a,s,u,l=[1,1],p="NHWC"){const d=(0,t.convertToTensor)(o,"x","dilation2d"),f=(0,t.convertToTensor)(a,"filter","dilation2d");n.assert(3===d.rank||4===d.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+`${d.rank}.`),n.assert(3===f.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+`${f.rank}.`),n.assert("NHWC"===p,()=>"Error in dilation2d: Only NHWC is currently supported, "+`but got dataFormat of ${p}`);let c=d,k=!1;3===d.rank&&(c=(0,i.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),k=!0);const b={x:c,filter:f},y={strides:s,pad:u,dilations:l},h=e.ENGINE.runKernel(r.Dilation2D,b,y);return k?(0,i.reshape)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const l=(0,o.op)({dilation2d_:u});exports.dilation2d=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"nprq":[function(require,module,exports) {
"use strict";function t(t,e){const n=t.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,l=t[r]||1;(e[e.length-1-o]||1)>1&&1===l&&s.unshift(r)}return s}function e(t,e){const n=[];for(let s=0;s<e.length;s++){const o=t[t.length-s-1],r=e.length-s-1,l=e[r];(null==o||1===o&&l>1)&&n.unshift(r)}return n}function n(t,e){const n=[],s=Math.max(t.length,e.length);for(let o=0;o<s;o++){let s=t[t.length-o-1];null==s&&(s=1);let r=e[e.length-o-1];if(null==r&&(r=1),1===s)n.unshift(r);else if(1===r)n.unshift(s);else{if(s!==r){throw Error("Operands could not be broadcast together with shapes "+`${t} and ${e}.`)}n.unshift(s)}}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBroadcastDims=t,exports.getReductionAxes=e,exports.assertAndGetBroadcastShape=n;
},{}],"nLPx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equal=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),u=require("../tensor_util_env"),a=require("./broadcast_util"),n=require("./operation");function o(n,o){let s=(0,u.convertToTensor)(n,"a","equal"),l=(0,u.convertToTensor)(o,"b","equal");[s,l]=(0,t.makeTypesMatch)(s,l),(0,a.assertAndGetBroadcastShape)(s.shape,l.shape);const i={a:s,b:l};return e.ENGINE.runKernelFunc(e=>e.equal(s,l),i,null,r.Equal)}const s=(0,n.op)({equal_:o});exports.equal=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"AEtV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.where=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("../util"),n=require("./broadcast_to"),s=require("./broadcast_util"),a=require("./operation");function i(a,i,c){const u=(0,o.convertToTensor)(i,"a","where"),h=(0,o.convertToTensor)(c,"b","where"),p=(0,o.convertToTensor)(a,"condition","where","bool"),d=(0,s.assertAndGetBroadcastShape)(u.shape,h.shape),l=(0,n.broadcastTo)(u,d),T=(0,n.broadcastTo)(h,d);1===p.rank&&(0,t.assert)(p.shape[0]===u.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==p.rank&&(0,t.assertShapesMatch)(p.shape,T.shape,"Error in where: ");const _={condition:p,t:l,e:T};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.select(p,l,T);return r([p]),o},_,null,r.SelectV2)}const c=(0,a.op)({where_:i});exports.where=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./broadcast_to":"eQsv","./broadcast_util":"nprq","./operation":"rO1i"}],"Jky8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function i(n){const i=(0,o.convertToTensor)(n,"x","zerosLike"),s={x:i};return e.ENGINE.runKernelFunc(e=>e.zerosLike(i),s,null,r.ZerosLike)}const s=(0,n.op)({zerosLike_:i});exports.zerosLike=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Ztm0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divNoNan=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),o=require("./div"),i=require("./equal"),t=require("./operation"),n=require("./where"),u=require("./zeros_like");function s(t,s){let v=(0,r.convertToTensor)(t,"a","div"),a=(0,r.convertToTensor)(s,"b","div");[v,a]=(0,e.makeTypesMatch)(v,a);const d=(0,o.div)(v,a),q=(0,u.zerosLike)(d),c=(0,i.equal)(a,q);return(0,n.where)(c,q,d)}const v=(0,t.op)({divNoNan_:s});exports.divNoNan=v;
},{"../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./div":"XyQ4","./equal":"nLPx","./operation":"rO1i","./where":"AEtV","./zeros_like":"Jky8"}],"yedZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dot=void 0;var e=require("../tensor_util_env"),r=s(require("../util")),t=require("./mat_mul"),n=require("./operation"),a=require("./reshape");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function u(n,o){const s=(0,e.convertToTensor)(n,"t1","dot"),u=(0,e.convertToTensor)(o,"t2","dot");r.assert(!(1!==s.rank&&2!==s.rank||1!==u.rank&&2!==u.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+`${s.rank} and ${u.rank}.`);const i=1===s.rank?s.size:s.shape[1],p=1===u.rank?u.size:u.shape[0];if(r.assert(i===p,()=>"Error in dot: inner dimensions of inputs must match, but got "+`${i} and ${p}.`),1===s.rank&&1===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[-1,1]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[])}if(1===s.rank&&2===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[u.shape[0],u.shape[1]]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[n.size])}if(2===s.rank&&1===u.rank){const e=(0,a.reshape)(u,[-1,1]),r=(0,t.matMul)(s,e);return(0,a.reshape)(r,[r.size])}{const e=(0,a.reshape)(u,[u.shape[0],u.shape[1]]);return(0,t.matMul)(s,e)}}const i=(0,n.op)({dot_:u});exports.dot=i;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./mat_mul":"A3yk","./operation":"rO1i","./reshape":"khVG"}],"uIqF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./operation");function o(u){const o=(0,n.convertToTensor)(u,"x","elu"),t={x:o};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.elu(o);return r([n]),n},t,null,r.Elu)}const t=(0,u.op)({elu_:o});exports.elu=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"XhJs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erf=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=f(require("../util")),o=require("./cast"),u=require("./operation");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(u){let i=(0,t.convertToTensor)(u,"x","erf");n.assert("int32"===i.dtype||"float32"===i.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===i.dtype&&(i=(0,o.cast)(i,"float32"));const f={x:i};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.erf(i);return r([i]),t},f,null,r.Erf)}const a=(0,u.op)({erf_:p});exports.erf=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./cast":"owKL","./operation":"rO1i"}],"S24W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.exp=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t=(0,n.convertToTensor)(o,"x","exp"),u={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.exp(t);return r([n]),n},u,null,r.Exp)}const u=(0,o.op)({exp_:t});exports.exp=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"uPYU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./reshape");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function s(t,o=0){const i=(0,e.convertToTensor)(t,"x","expandDims",null);r.assert(o<=i.rank,()=>"Axis must be <= rank of the tensor");const s=i.shape.slice();return o<0&&(r.assert(-(i.rank+1)<=o,()=>`Axis must be in the interval [${-(i.rank+1)}, ${i.rank}]`),o=i.rank+o+1),s.splice(o,0,1),(0,n.reshape)(i,s)}const a=(0,t.op)({expandDims_:s});exports.expandDims=a;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"e0GE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t=(0,n.convertToTensor)(o,"x","expm1"),u={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.expm1(t);return r([t]),n},u,null,r.Expm1)}const u=(0,o.op)({expm1_:t});exports.expm1=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"C900":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(o,u){const i=(0,t.convertToTensor)(o,"x","tile",null);n.assert(i.rank===u.length,()=>`Error in transpose: rank of input ${i.rank} `+`must match length of reps ${u}.`);const l=[i],s={x:i},a={reps:u};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.tile(i,u);return r([i]),t},s,null,r.Tile,a,l)}const s=(0,o.op)({tile_:l});exports.tile=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"kWCc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eye=void 0;var e=require("./buffer"),r=require("./expand_dims"),t=require("./operation"),n=require("./reshape"),i=require("./tile");function s(t,s,o,u="float32"){null==s&&(s=t);const l=(0,e.buffer)([t,s],u),p=t<=s?t:s;for(let e=0;e<p;++e)l.set(1,e,e);const a=(0,n.reshape)(l.toTensor(),[t,s]);if(null==o)return a;if(1===o.length)return(0,i.tile)((0,r.expandDims)(a,0),[o[0],1,1]);if(2===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)(a,0),0),[o[0],o[1],1,1]);if(3===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)((0,r.expandDims)(a,0),0),0),[o[0],o[1],o[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+`batchShapes, but received ${o.length}D.`)}const o=(0,t.op)({eye_:s});exports.eye=o;
},{"./buffer":"SN3d","./expand_dims":"uPYU","./operation":"rO1i","./reshape":"khVG","./tile":"C900"}],"SqIp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=l;var e=require("../engine"),r=require("../kernel_names");function l(l,n,u){const t={shape:l,value:n,dtype:u};return e.ENGINE.runKernelFunc(e=>e.fill(l,n,u),{},null,r.Fill,t)}
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"mwl0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floor=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t=(0,o.convertToTensor)(n,"x","floor"),l={x:t};return e.ENGINE.runKernelFunc(e=>e.floor(t),l,null,r.Floor)}const l=(0,n.op)({floor_:t});exports.floor=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"q1BX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeOptimalWindowSize=r,exports.PARALLELIZE_THRESHOLD=void 0;var e=require("../util");const t=30;function r(r){return r<=t?r:(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)))}exports.PARALLELIZE_THRESHOLD=t;
},{"../util":"UxaK"}],"mcNf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.segOpComputeOptimalWindowSize=r,exports.computeOutShape=s,exports.collectGatherOpShapeInfo=o;var e=require("../util"),t=require("./reduce_util");function r(r,s){let o,p=!1;for(r<=t.PARALLELIZE_THRESHOLD?(o=r,p=!0):o=(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)));!p;)o>s||o===r?p=!0:o=(0,e.nearestDivisor)(r,o+1);return o}function s(e,t,r){const s=[],o=e.length;for(let p=0;p<o;p++)p!==t?s.push(e[p]):s.push(r);return s}function o(e,t,r){const s=e.shape[r],o=[];let p=1,u=1;for(let i=0;i<r;i++)o.push(e.shape[i]),p*=e.shape[i];for(let i=0;i<t.rank;i++)o.push(t.shape[i]);for(let i=r+1;i<e.rank;i++)o.push(e.shape[i]),u*=e.shape[i];return{batchSize:p,sliceSize:u,dimSize:s,outputShape:o}}
},{"../util":"UxaK","./reduce_util":"q1BX"}],"Quad":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gather=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),i=require("./operation"),s=require("./reshape"),o=require("./segment_util");function a(i,a,u=0){const p=(0,t.convertToTensor)(i,"x","gather"),h=(0,t.convertToTensor)(a,"indices","gather","int32"),c={x:p,indices:h},l={axis:u};return e.ENGINE.runKernelFunc((e,r)=>{const t=(0,n.parseAxisParam)(u,p.shape)[0],i=(0,o.collectGatherOpShapeInfo)(p,h,t),a=e.gather(p,(0,s.reshape)(h,[h.size]),t);return r([p,h]),(0,s.reshape)(a,i.outputShape)},c,null,r.GatherV2,l)}const u=(0,i.op)({gather_:a});exports.gather=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG","./segment_util":"mcNf"}],"i1I6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greater=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function s(o,s){let u=(0,a.convertToTensor)(o,"a","greater"),i=(0,a.convertToTensor)(s,"b","greater");[u,i]=(0,t.makeTypesMatch)(u,i),(0,n.assertAndGetBroadcastShape)(u.shape,i.shape);const c={a:u,b:i};return e.ENGINE.runKernelFunc(e=>e.greater(u,i),c,null,r.Greater)}const u=(0,o.op)({greater_:s});exports.greater=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"wG0H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),n=require("./broadcast_util"),u=require("./operation");function o(u,o){let s=(0,a.convertToTensor)(u,"a","greaterEqual"),l=(0,a.convertToTensor)(o,"b","greaterEqual");[s,l]=(0,t.makeTypesMatch)(s,l),(0,n.assertAndGetBroadcastShape)(s.shape,l.shape);const i={a:s,b:l};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.greaterEqual(s,l);return r([s,l]),t},i,null,r.GreaterEqual)}const s=(0,u.op)({greaterEqual_:o});exports.greaterEqual=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"P5ES":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function t(i){const t=(0,n.convertToTensor)(i,"input","imag"),o={input:t};return e.ENGINE.runKernelFunc(e=>e.imag(t),o,null,r.Imag)}const o=(0,i.op)({imag_:t});exports.imag=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"yOVm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFinite=void 0;var e=require("../engine"),i=require("../kernel_names"),n=require("../tensor_util_env"),r=require("./operation");function t(r){const t=(0,n.convertToTensor)(r,"x","isFinite"),s={x:t};return e.ENGINE.runKernelFunc(e=>e.isFinite(t),s,null,i.IsFinite)}const s=(0,r.op)({isFinite_:t});exports.isFinite=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"En43":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInf=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),s=require("./operation");function i(s){const i=(0,r.convertToTensor)(s,"x","isInf"),o={x:i};return e.ENGINE.runKernelFunc(e=>e.isInf(i),o,null,n.IsInf)}const o=(0,s.op)({isInf_:i});exports.isInf=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"rCb4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaN=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function i(s){const i=(0,n.convertToTensor)(s,"x","isNaN"),o={x:i};return e.ENGINE.runKernelFunc(e=>e.isNaN(i),o,null,r.IsNan)}const o=(0,s.op)({isNaN_:i});exports.isNaN=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"nmNC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),a=require("./broadcast_util"),u=require("./cast"),i=require("./operation");function o(i,o){let s=(0,n.convertToTensor)(i,"a","maximum"),m=(0,n.convertToTensor)(o,"b","maximum");[s,m]=(0,t.makeTypesMatch)(s,m),"bool"===s.dtype&&(s=(0,u.cast)(s,"int32"),m=(0,u.cast)(m,"int32")),(0,a.assertAndGetBroadcastShape)(s.shape,m.shape);const c={a:s,b:m};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.maximum(s,m);return r([s,m]),t},c,null,r.Maximum)}const s=(0,i.op)({maximum_:o});exports.maximum=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./cast":"owKL","./operation":"rO1i"}],"RBNv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scalar=t;var r=require("../util"),e=require("./tensor_ops_util");function t(t,a){if(((0,r.isTypedArray)(t)&&"string"!==a||Array.isArray(t))&&"complex64"!==a)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===a&&(0,r.isTypedArray)(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,e.makeTensor)(t,[],[],a)}
},{"../util":"UxaK","./tensor_ops_util":"N5j4"}],"BMkp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=void 0;var e=require("../tensor_util_env"),r=require("./maximum"),u=require("./mul"),o=require("./operation"),l=require("./scalar");function t(o,t=.2){const a=(0,e.convertToTensor)(o,"x","leakyRelu");return(0,r.maximum)((0,u.mul)((0,l.scalar)(t),a),a)}const a=(0,o.op)({leakyRelu_:t});exports.leakyRelu=a;
},{"../tensor_util_env":"x0Hg","./maximum":"nmNC","./mul":"WS4w","./operation":"rO1i","./scalar":"RBNv"}],"PrnK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.less=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function u(o,u){let a=(0,t.convertToTensor)(o,"a","less"),l=(0,t.convertToTensor)(u,"b","less");[a,l]=(0,s.makeTypesMatch)(a,l),(0,n.assertAndGetBroadcastShape)(a.shape,l.shape);const i={a:a,b:l};return e.ENGINE.runKernelFunc(e=>e.less(a,l),i,null,r.Less)}const a=(0,o.op)({less_:u});exports.less=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"NxL8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),n=require("./broadcast_util"),u=require("./operation");function a(u,a){let l=(0,t.convertToTensor)(u,"a","lessEqual"),o=(0,t.convertToTensor)(a,"b","lessEqual");[l,o]=(0,s.makeTypesMatch)(l,o),(0,n.assertAndGetBroadcastShape)(l.shape,o.shape);const i={a:l,b:o};return e.ENGINE.runKernelFunc((e,r)=>{const s=e.lessEqual(l,o);return r([l,o]),s},i,null,r.LessEqual)}const l=(0,u.op)({lessEqual_:a});exports.lessEqual=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"y9TR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linspace=n;var e=require("../engine"),r=require("../kernel_names");function n(n,s,t){if(t<=0)throw new Error("The number of values should be positive.");const u={start:n,stop:s,num:t};return e.ENGINE.runKernelFunc(e=>e.linspace(n,s,t),{},null,r.LinSpace,u)}
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"AJX7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localResponseNormalization=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation"),a=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(o,s=5,i=1,l=1,u=.5){const p=(0,t.convertToTensor)(o,"x","localResponseNormalization");n.assert(4===p.rank||3===p.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${p.rank}.`),n.assert(n.isInt(s),()=>"Error in localResponseNormalization: depthRadius must be an "+`integer but got depthRadius ${s}.`);let c=p,f=!1;3===p.rank&&(f=!0,c=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]));const h={x:c},d={depthRadius:s,bias:i,alpha:l,beta:u},b=e.ENGINE.runKernelFunc((e,r)=>{const t=e.localResponseNormalization4D(c,s,i,l,u);return r([c,t]),t},h,null,r.LRN,d);return f?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const u=(0,o.op)({localResponseNormalization_:l});exports.localResponseNormalization=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"UG1b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t=(0,o.convertToTensor)(n,"x","log"),u={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.log(t);return r([t]),o},u,null,r.Log)}const u=(0,n.op)({log_:t});exports.log=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Tu9m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1p=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t=(0,o.convertToTensor)(n,"x","log1p"),u={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.log1p(t);return r([t]),o},u,null,r.Log1p)}const u=(0,n.op)({log1p_:t});exports.log1p=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"FjdM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.customGrad=f,exports.variableGrads=d,exports.valueAndGrad=i,exports.valueAndGrads=l,exports.grad=o,exports.grads=u;var e=require("./engine"),r=require("./tensor"),a=require("./tensor_util_env"),s=n(require("./util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}return a.default=e,r&&r.set(e,a),a}function o(r){return s.assert(s.isFunction(r),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const o=(0,a.convertToTensor)(t,"x","tf.grad",null),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grad"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(o),[o],u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),c(t),t[0]})}}function u(r){return s.assert(s.isFunction(r),()=>"The f passed in grads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const o=(0,a.convertToTensorArray)(t,"args","tf.grads",null),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grads"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(...o),o,u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(t),t})}}function i(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{s.assert(t instanceof r.Tensor,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:o,value:u}=e.ENGINE.gradients(()=>a(t),[t],n);return c(o),{grad:o[0],value:u}}}function l(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t)&&t.every(e=>e instanceof r.Tensor),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const o=e.ENGINE.gradients(()=>a(...t),t,n);return null!=n&&s.assertShapesMatch(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(o.grads),o}}function d(a,t){s.assert(s.isFunction(a),()=>"The f passed in variableGrads(f) must be a function"),s.assert(null==t||Array.isArray(t)&&t.every(e=>e instanceof r.Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const r in e.ENGINE.registeredVariables)t.push(e.ENGINE.registeredVariables[r])}const o=n?t.filter(e=>!e.trainable):null,u=t.length;t=t.filter(e=>e.trainable),s.assert(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+`be trainable, but none of the ${u} variables is `+"trainable.");const{value:i,grads:l}=e.ENGINE.gradients(a,t,null,!0);s.assert(l.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),s.assert(0===i.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+`returned a rank-${i.rank} tensor`);const d={};return t.forEach((e,r)=>{null!=l[r]&&(d[e.name]=l[r])}),null!=o&&o.forEach(e=>d[e.name]=null),{value:i,grads:d}}function f(r){return e.ENGINE.customGrad(r)}function c(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}
},{"./engine":"tmUz","./tensor":"Zqvm","./tensor_util_env":"x0Hg","./util":"UxaK"}],"wgz6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),o=require("./operation");function t(o){const t=(0,r.convertToTensor)(o,"x","neg"),u={x:t};return e.ENGINE.runKernelFunc(e=>e.neg(t),u,null,n.Negate)}const u=(0,o.op)({neg_:t});exports.neg=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"rchi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplus=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),s=require("./operation");function t(s){const t=(0,o.convertToTensor)(s,"x","softplus"),n={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.softplus(t);return r([t]),o},n,null,r.Softplus)}const n=(0,s.op)({softplus_:t});exports.softplus=n;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"gSaY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSigmoid=void 0;var e=require("../gradients"),r=require("../tensor_util_env"),o=require("./mul"),i=require("./neg"),u=require("./operation"),t=require("./sigmoid"),n=require("./softplus");function s(u){const s=(0,r.convertToTensor)(u,"x","logSigmoid");return(0,e.customGrad)(e=>{return{value:(0,i.neg)((0,n.softplus)((0,i.neg)(e))),gradFunc:r=>{return(0,o.mul)(r,(0,t.sigmoid)((0,i.neg)(e)))}}})(s)}const g=(0,u.op)({logSigmoid_:s});exports.logSigmoid=g;
},{"../gradients":"FjdM","../tensor_util_env":"x0Hg","./mul":"WS4w","./neg":"wgz6","./operation":"rO1i","./sigmoid":"QUTt","./softplus":"rchi"}],"SjY8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=p(require("../util")),o=p(require("./axis_util")),s=require("./operation"),a=require("./reshape"),i=require("./transpose");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(s,u=null,p=!1){const l=(0,t.convertToTensor)(s,"x","max"),c={x:l},f={reductionIndices:u,keepDims:p};return e.ENGINE.runKernelFunc((e,r)=>{let t=n.parseAxisParam(u,l.shape);const s=o.getAxesPermutation(t,l.rank);let c=l;null!=s&&(c=(0,i.transpose)(l,s),t=o.getInnerMostAxes(t.length,c.rank));const f=e.max(c,t);null!=s&&c.dispose();let x=f;if(p){const e=o.expandShapeToKeepDim(x.shape,n.parseAxisParam(u,l.shape));x=(0,a.reshape)(x,e),f.dispose()}return r([l,x]),x},c,null,r.Max,f)}const c=(0,s.op)({max_:l});exports.max=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"OFjl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sub=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),u=require("./operation");function o(u,o){let s=(0,t.convertToTensor)(u,"a","sub"),i=(0,t.convertToTensor)(o,"b","sub");[s,i]=(0,n.makeTypesMatch)(s,i);const c={a:s,b:i};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.subtract(s,i);return r([s,i]),n},c,null,r.Sub)}const s=(0,u.op)({sub_:o});exports.sub=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"YHNB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util_env"),t=require("../util"),n=require("./axis_util"),u=require("./cast"),i=require("./operation"),o=require("./reshape"),a=require("./transpose");function l(i,l=null,p=!1){let c=(0,s.convertToTensor)(i,"x","sum");"bool"===c.dtype&&(c=(0,u.cast)(c,"int32"));const m={x:c},x={axis:l,keepDims:p};return e.ENGINE.runKernelFunc((e,r)=>{r([c]);const s=(0,t.parseAxisParam)(l,c.shape),u=(0,n.getAxesPermutation)(s,c.rank);let i=s,m=c;null!=u&&(m=(0,a.transpose)(c,u),i=(0,n.getInnerMostAxes)(i.length,c.rank));let x=e.sum(m,i);if(p){const e=(0,n.expandShapeToKeepDim)(x.shape,s);x=(0,o.reshape)(x,e)}return x},m,null,r.Sum,x)}const p=(0,i.op)({sum_:l});exports.sum=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./cast":"owKL","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"Q1Fm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSoftmax=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./cast"),n=require("./exp"),s=require("./log"),a=require("./max"),i=require("./operation"),u=require("./sub"),l=require("./sum");function x(i,x=-1){const g=(0,o.convertToTensor)(i,"logits","logSoftmax");if(-1===x&&(x=g.rank-1),x!==g.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${g.rank} and axis was ${x}`);const m={logits:g},c={axis:x};return e.ENGINE.runKernelFunc((e,r)=>{const o=(0,a.max)(i,x,!0),g=(0,u.sub)(i,o),m=(0,u.sub)((0,t.cast)(g,"float32"),(0,s.log)((0,l.sum)((0,n.exp)(g),x,!0)));return r([m]),m},m,null,r.LogSoftmax,c)}const g=(0,i.op)({logSoftmax_:x});exports.logSoftmax=g;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./cast":"owKL","./exp":"S24W","./log":"UG1b","./max":"SjY8","./operation":"rO1i","./sub":"OFjl","./sum":"YHNB"}],"twrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSumExp=void 0;var e=require("../tensor_util_env"),r=require("../util"),u=require("./add"),o=require("./axis_util"),s=require("./exp"),i=require("./log"),p=require("./max"),a=require("./operation"),t=require("./reshape"),n=require("./sub"),x=require("./sum");function l(a,l=null,q=!1){const m=(0,e.convertToTensor)(a,"x","logSumExp"),d=(0,r.parseAxisParam)(l,m.shape),c=(0,p.max)(m,d,!0),h=(0,n.sub)(m,c),g=(0,s.exp)(h),_=(0,x.sum)(g,d),v=(0,i.log)(_),S=(0,u.add)((0,t.reshape)(c,v.shape),v);if(q){const e=(0,o.expandShapeToKeepDim)(S.shape,d);return(0,t.reshape)(S,e)}return S}const q=(0,a.op)({logSumExp_:l});exports.logSumExp=q;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./add":"geuL","./axis_util":"uTbM","./exp":"S24W","./log":"UG1b","./max":"SjY8","./operation":"rO1i","./reshape":"khVG","./sub":"OFjl","./sum":"YHNB"}],"ntJL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAnd=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./broadcast_util"),l=require("./operation");function t(l,t){const a=(0,r.convertToTensor)(l,"a","logicalAnd","bool"),i=(0,r.convertToTensor)(t,"b","logicalAnd","bool");(0,n.assertAndGetBroadcastShape)(a.shape,i.shape);const s={a:a,b:i};return e.ENGINE.runKernelFunc(e=>e.logicalAnd(a,i),s,null,o.LogicalAnd)}const a=(0,l.op)({logicalAnd_:t});exports.logicalAnd=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"SOqM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNot=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function l(t){const l=(0,r.convertToTensor)(t,"x","logicalNot","bool"),n={x:l};return e.ENGINE.runKernelFunc(e=>e.logicalNot(l),n,null,o.LogicalNot)}const n=(0,t.op)({logicalNot_:l});exports.logicalNot=n;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"IQZP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOr=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),l=require("./broadcast_util"),n=require("./operation");function t(n,t){const a=(0,o.convertToTensor)(n,"a","logicalOr","bool"),i=(0,o.convertToTensor)(t,"b","logicalOr","bool");(0,l.assertAndGetBroadcastShape)(a.shape,i.shape);const s={a:a,b:i};return e.ENGINE.runKernelFunc(e=>e.logicalOr(a,i),s,null,r.LogicalOr)}const a=(0,n.op)({logicalOr_:t});exports.logicalOr=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"PsE3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalXor=void 0;var o=require("../tensor_util_env"),r=require("./broadcast_util"),e=require("./logical_and"),l=require("./logical_not"),a=require("./logical_or"),i=require("./operation");function t(i,t){const c=(0,o.convertToTensor)(i,"a","logicalXor","bool"),n=(0,o.convertToTensor)(t,"b","logicalXor","bool");return(0,r.assertAndGetBroadcastShape)(c.shape,n.shape),(0,e.logicalAnd)((0,a.logicalOr)(i,t),(0,l.logicalNot)((0,e.logicalAnd)(i,t)))}const c=(0,i.op)({logicalXor_:t});exports.logicalXor=c;
},{"../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./logical_and":"ntJL","./logical_not":"SOqM","./logical_or":"IQZP","./operation":"rO1i"}],"RWms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),i=require("./operation"),a=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(i,s,u,l,p){const c=(0,t.convertToTensor)(i,"x","maxPool");let d=c,f=!1;3===c.rank&&(f=!0,d=(0,a.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),n.assert(4===d.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${d.rank}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '1'`),null!=p&&n.assert(n.isInt(l),()=>"Error in maxPool: pad must be an integer when using, "+`dimRoundingMode ${p} but got pad ${l}.`);const h={x:d},P={filterSize:s,strides:u,pad:l,dimRoundingMode:p},m=e.ENGINE.runKernelFunc((e,r)=>{const t=o.computePool2DInfo(d.shape,s,u,1,l,p);let i;return i=1===t.filterWidth&&1===t.filterHeight&&n.arraysEqual(t.inShape,t.outShape)?d.clone():e.maxPool(d,t),r([d,i]),i},h,null,r.MaxPool,P);return f?(0,a.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const p=(0,i.op)({maxPool_:l});exports.maxPool=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"y3Dx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3d=void 0;var e=require("../engine"),r=require("../globals"),t=require("../kernel_names"),o=require("../tensor_util_env"),n=l(require("../util")),a=l(require("./conv_util")),i=require("./operation"),s=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function d(i,u=[1,1,1],l,d,p,c="NDHWC",f){null==f?f=[1,1,1]:(0,r.deprecationWarn)("dilations is deprecated, this field will be gone in v3.0.0.");const h=(0,o.convertToTensor)(i,"x","maxPool3d");let m=h,P=!1;4===h.rank&&(P=!0,m=(0,s.reshape)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]])),n.assert(5===m.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${m.rank}.`),n.assert("NDHWC"===c,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${c}`),n.assert(a.eitherStridesOrDilationsAreOne(l,f),()=>"Error in maxPool3d: Either strides or dilations must be 1. "+`Got strides ${l} and dilations '${f}'`),null!=p&&n.assert(n.isInt(d),()=>"Error in maxPool3d: pad must be an integer when using, "+`dimRoundingMode ${p} but got pad ${d}.`);const x={x:m},b={filterSize:u,strides:l,pad:d,dimRoundingMode:p,dataFormat:c,dilations:f},g=e.ENGINE.runKernelFunc((e,r)=>{null==f&&(f=[1,1,1]);const t=a.computePool3DInfo(m.shape,u,l,f,d,p,c),o=e.maxPool3d(m,t);return r([m,o]),o},x,null,t.MaxPool3D,b);return P?(0,s.reshape)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const p=(0,i.op)({maxPool3d_:d});exports.maxPool3d=p;
},{"../engine":"tmUz","../globals":"UkUu","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"ZH85":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmax=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./operation");function i(t,i,n,x,a=!1){const s={x:(0,o.convertToTensor)(t,"x","maxPoolWithArgmax")},l={filterSize:i,strides:n,pad:x,includeBatchInIndex:a},u=e.ENGINE.runKernel(r.MaxPoolWithArgmax,s,l);return{result:u[0],indexes:u[1]}}const n=(0,t.op)({maxPoolWithArgmax_:i});exports.maxPoolWithArgmax=n;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"MNgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=t;var e=require("../engine"),r=require("../util"),o=require("./complex");function t(s,i="float32"){if("complex64"===i){const e=t(s,"float32"),r=t(s,"float32");return(0,o.complex)(e,r)}const n=(0,r.makeZerosTypedArray)((0,r.sizeFromShape)(s),i);return e.ENGINE.makeTensor(n,s,i)}
},{"../engine":"tmUz","../util":"UxaK","./complex":"BDDu"}],"eTx1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ones=s;var e=require("../engine"),r=require("../util"),o=require("./complex"),t=require("./zeros");function s(n,i="float32"){if("complex64"===i){const e=s(n,"float32"),r=(0,t.zeros)(n,"float32");return(0,o.complex)(e,r)}const u=(0,r.makeOnesTypedArray)((0,r.sizeFromShape)(n),i);return e.ENGINE.makeTensor(u,n,i)}
},{"../engine":"tmUz","../util":"UxaK","./complex":"BDDu","./zeros":"MNgB"}],"Yc5n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mean=void 0;var e=require("../engine"),r=require("../gradients"),u=require("../kernel_names"),s=require("../tensor_util_env"),n=require("../util"),a=require("./axis_util"),i=require("./cast"),t=require("./div"),o=require("./mul"),c=require("./ones"),p=require("./operation"),l=require("./reshape"),d=require("./scalar"),m=require("./sum");function q(p,q=null,h=!1){const v=(0,s.convertToTensor)(p,"x","mean"),x=(0,n.parseAxisParam)(q,v.shape),_=(0,a.computeOutAndReduceShapes)(v.shape,x)[1],f=(0,n.sizeFromShape)(_),y={x:v},g={axis:q,keepDims:h},E=()=>{const e=(0,d.scalar)(f),r=e.dtype===v.dtype?v:(0,i.cast)(v,e.dtype),u=(0,t.div)(r,e);return(0,m.sum)(u,q,h)};return(0,r.customGrad)(r=>{return{value:e.ENGINE.runKernelFunc(E,y,null,u.Mean,g),gradFunc:e=>{const u=r.shape.slice();x.forEach(e=>{u[e]=1});const s=(0,l.reshape)(e,u);return(0,t.div)((0,o.mul)(s,(0,c.ones)(r.shape,"float32")),f)}}})(v)}const h=(0,p.op)({mean_:q});exports.mean=h;
},{"../engine":"tmUz","../gradients":"FjdM","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./cast":"owKL","./div":"XyQ4","./mul":"WS4w","./ones":"eTx1","./operation":"rO1i","./reshape":"khVG","./scalar":"RBNv","./sum":"YHNB"}],"z8cA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),i=p(require("./axis_util")),o=require("./operation"),s=require("./reshape"),u=require("./transpose");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(t,i,o):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function l(o,a=null,p=!1){const l=(0,t.convertToTensor)(o,"x","min"),c={x:l},f={axis:a,keepDims:p};return e.ENGINE.runKernelFunc((e,r)=>{const t=(0,n.parseAxisParam)(a,l.shape);let o=t;const c=i.getAxesPermutation(o,l.rank);let f=l;null!=c&&(f=(0,u.transpose)(l,c),o=i.getInnerMostAxes(o.length,l.rank));const d=e.min(f,o);null!=c&&f.dispose();let x=d;if(p){const e=i.expandShapeToKeepDim(x.shape,t);x=(0,s.reshape)(d,e),d.dispose()}return r([l,x]),x},c,null,r.Min,f)}const c=(0,o.op)({min_:l});exports.min=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"q3lt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimum=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),i=require("./broadcast_util"),u=require("./cast"),o=require("./operation");function s(o,s){let m=(0,t.convertToTensor)(o,"a","minimum"),a=(0,t.convertToTensor)(s,"b","minimum");[m,a]=(0,n.makeTypesMatch)(m,a),"bool"===m.dtype&&(m=(0,u.cast)(m,"int32"),a=(0,u.cast)(a,"int32")),(0,i.assertAndGetBroadcastShape)(m.shape,a.shape);const c={a:m,b:a};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.minimum(m,a);return r([m,a]),n},c,null,r.Minimum)}const m=(0,o.op)({minimum_:s});exports.minimum=m;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./cast":"owKL","./operation":"rO1i"}],"c1Zo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function s(o,a,i){n.assert("reflect"===i||"symmetric"===i,()=>"Invalid mode. Mode must be either reflect or symmetric. "+`Got ${i}.`);const s=(0,t.convertToTensor)(o,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");n.assert(a.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. `+`Got ${a.length}.`);const u="reflect"===i?1:0;for(let e=0;e<s.rank;e++)n.assert(2===a[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),n.assert(a[e][0]>=0&&a[e][0]<=s.shape[e]-u&&a[e][1]>=0&&a[e][1]<=s.shape[e]-u,()=>`Padding in dimension ${e} cannot be greater than or equal `+`to ${s.shape[e]-u} or less than 0 for input of `+`shape ${s.shape}`);const c={paddings:a,mode:i},d={x:s};return e.ENGINE.runKernel(r.MirrorPad,d,c)}const u=(0,o.op)({mirrorPad_:s});exports.mirrorPad=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"oTGE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function u(t,u){let s=(0,n.convertToTensor)(t,"a","mod"),i=(0,n.convertToTensor)(u,"b","mod");[s,i]=(0,o.makeTypesMatch)(s,i);const c={a:s,b:i};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.mod(s,i);return r([s,i]),o},c,null,r.Mod)}const s=(0,t.op)({mod_:u});exports.mod=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"rLyD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.square=void 0;var e=require("../engine"),r=require("../tensor_util_env"),u=require("./operation");function n(u){const n=(0,r.convertToTensor)(u,"x","square"),o=[n];return e.ENGINE.runKernelFunc((e,r)=>(r([n]),e.square(n)),{x:n},null,"Square",{},o,[])}const o=(0,u.op)({square_:n});exports.square=o;
},{"../engine":"tmUz","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"X3OC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moments=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./axis_util"),t=require("./cast"),a=require("./mean"),n=require("./operation"),o=require("./reshape"),u=require("./square"),i=require("./sub");function p(n,p=null,m=!1){n=(0,e.convertToTensor)(n,"x","moments");const q=(0,r.parseAxisParam)(p,n.shape),c=(0,a.mean)(n,q,m);let l=c.shape;m||(l=(0,s.expandShapeToKeepDim)(c.shape,q));const x=(0,u.square)((0,i.sub)((0,t.cast)(n,"float32"),(0,o.reshape)(c,l)));return{mean:c,variance:(0,a.mean)(x,q,m)}}const m=(0,n.op)({moments_:p});exports.moments=m;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./cast":"owKL","./mean":"Yc5n","./operation":"rO1i","./reshape":"khVG","./square":"rLyD","./sub":"OFjl"}],"ePcS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiRNNCell=void 0;var e=require("../tensor_util_env"),t=require("./operation");function o(t,o,r,l){const n=(0,e.convertToTensor)(o,"data","multiRNNCell"),s=(0,e.convertToTensorArray)(r,"c","multiRNNCell"),u=(0,e.convertToTensorArray)(l,"h","multiRNNCell");let i=n;const c=[];for(let e=0;e<t.length;e++){const o=t[e](i,s[e],u[e]);c.push(o[0]),c.push(o[1]),i=o[1]}const N=[],p=[];for(let e=0;e<c.length;e+=2)N.push(c[e]),p.push(c[e+1]);return[N,p]}const r=(0,t.op)({multiRNNCell_:o});exports.multiRNNCell=r;
},{"../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Pjd4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=void 0;var e=require("../engine"),r=require("../tensor_util_env"),o=require("./operation"),t=require("./reshape");function i(o,i,n,s=!1){const u=(0,r.convertToTensor)(o,"logits","multinomial"),l=u.size,a=u.rank;if(l<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${l}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const m=1===a?(0,t.reshape)(u,[1,-1]):u,p=e.ENGINE.runKernelFunc(e=>e.multinomial(m,s,i,n),{logits2D:m});return 1===a?(0,t.reshape)(p,[p.size]):p}const n=(0,o.op)({multinomial_:i});exports.multinomial=n;
},{"../engine":"tmUz","../tensor_util_env":"x0Hg","./operation":"rO1i","./reshape":"khVG"}],"RlXH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./broadcast_util"),u=require("./operation");function a(u,a){let s=(0,n.convertToTensor)(u,"a","notEqual"),l=(0,n.convertToTensor)(a,"b","notEqual");[s,l]=(0,t.makeTypesMatch)(s,l),(0,o.assertAndGetBroadcastShape)(s.shape,l.shape);const i={a:s,b:l};return e.ENGINE.runKernelFunc(e=>e.notEqual(s,l),i,null,r.NotEqual)}const s=(0,u.op)({notEqual_:a});exports.notEqual=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"QPTK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,n.convertToTensor)(t,"input","real"),u={input:o};return e.ENGINE.runKernelFunc(e=>e.real(o),u,null,r.Real)}const u=(0,t.op)({real_:o});exports.real=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"XhV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./complex"),i=require("./imag"),s=require("./operation"),t=require("./real"),u=require("./zeros_like");function l(s){const l=(0,n.convertToTensor)(s,"x","onesLike"),p={x:l};return e.ENGINE.runKernelFunc((e,r)=>{if("complex64"===l.dtype){const e=c((0,t.real)(l)),r=(0,u.zerosLike)((0,i.imag)(l));return(0,o.complex)(e,r)}return e.onesLike(l)},p,null,r.OnesLike)}const c=(0,s.op)({onesLike_:l});exports.onesLike=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./complex":"BDDu","./imag":"P5ES","./operation":"rO1i","./real":"QPTK","./zeros_like":"Jky8"}],"BREf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outerProduct=void 0;var r=require("../tensor_util_env"),e=a(require("../util")),t=require("./mat_mul"),o=require("./operation"),n=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return u=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=u();if(e&&e.has(r))return e.get(r);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var a=o?Object.getOwnPropertyDescriptor(r,n):null;a&&(a.get||a.set)?Object.defineProperty(t,n,a):t[n]=r[n]}return t.default=r,e&&e.set(r,t),t}function i(o,u){const a=(0,r.convertToTensor)(o,"v1","outerProduct"),i=(0,r.convertToTensor)(u,"v2","outerProduct");e.assert(1===a.rank&&1===i.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+`${a.rank} and ${i.rank}.`);const c=(0,n.reshape)(a,[-1,1]),s=(0,n.reshape)(i,[1,-1]);return(0,t.matMul)(c,s)}const c=(0,o.op)({outerProduct_:i});exports.outerProduct=c;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./mat_mul":"A3yk","./operation":"rO1i","./reshape":"khVG"}],"NuCu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function a(o,a,t=0){const s=(0,n.convertToTensor)(o,"x","pad");if(0===s.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const d={paddings:a,constantValue:t},i={x:s};return e.ENGINE.runKernelFunc((e,r)=>(r([s]),e.pad(s,a,t)),i,null,r.PadV2,d)}const t=(0,o.op)({pad_:a});exports.pad=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"fyuv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad1d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,o=0){return(0,e.assert)(2===d.length,()=>"Invalid number of paddings. Must be length of 2."),(0,t.pad)(r,[d],o)}const o=(0,r.op)({pad1d_:d});exports.pad1d=o;
},{"../util":"UxaK","./operation":"rO1i","./pad":"NuCu"}],"GX8c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad2d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,n=0){return(0,e.assert)(2===d.length&&2===d[0].length&&2===d[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,t.pad)(r,d,n)}const n=(0,r.op)({pad2d_:d});exports.pad2d=n;
},{"../util":"UxaK","./operation":"rO1i","./pad":"NuCu"}],"D1CP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad3d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function d(t,d,n=0){return(0,e.assert)(3===d.length&&2===d[0].length&&2===d[1].length&&2===d[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,d,n)}const n=(0,t.op)({pad3d_:d});exports.pad3d=n;
},{"../util":"UxaK","./operation":"rO1i","./pad":"NuCu"}],"jp5S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad4d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function n(t,n,d=0){return(0,e.assert)(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,n,d)}const d=(0,t.op)({pad4d_:n});exports.pad4d=d;
},{"../util":"UxaK","./operation":"rO1i","./pad":"NuCu"}],"nPoV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function i(o,a,s){const i=(0,r.convertToTensor)(o,"x","spaceToBatchND");n.assert(i.rank>=1+a.length,()=>`input rank ${i.rank} should be > than [blockShape] ${a.length}`),n.assert(s.length===a.length,()=>`paddings.shape[0] ${s.length} must be equal to [blockShape] ${a.length}`),n.assert(i.shape.reduce((e,t,r)=>r>0&&r<=a.length?e&&(t+s[r-1][0]+s[r-1][1])%a[r-1]==0:e,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${s.toString()} must be divisible by blockShapes ${a.toString()}`);const c={x:i},u={blockShape:a,paddings:s};return e.ENGINE.runKernelFunc(e=>e.spaceToBatchND(i,a,s),c,null,t.SpaceToBatchND,u)}const c=(0,o.op)({spaceToBatchND_:i});exports.spaceToBatchND=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"ilbP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool=void 0;var e=require("../tensor_util_env"),t=l(require("../util")),r=require("./avg_pool"),o=require("./batch_to_space_nd"),n=l(require("./conv_util")),a=require("./max_pool"),i=require("./operation"),p=require("./reshape"),s=require("./space_to_batch_nd");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function c(i,u,l,c,d,m){null==d&&(d=[1,1]),null==m&&(m=1),0===c&&(c="valid");const v=(0,e.convertToTensor)(i,"x","maxPool");let _=v,b=!1;3===v.rank&&(b=!0,_=(0,p.reshape)(v,[1,v.shape[0],v.shape[1],v.shape[2]])),t.assert(n.eitherStridesOrDilationsAreOne(m,d),()=>"Error in pool: Either strides or dilations must be 1. "+`Got strides ${m} and dilations '${d}'`);const O=n.computePool2DInfo(_.shape,u,m,d,c),g=[O.dilationHeight,O.dilationWidth];let y;y="same"===c?h([O.filterHeight,O.filterWidth],g):[[0,0],[0,0]];const P=1===g[0]&&1===g[1],[q,j]=f([O.inHeight,O.inWidth],g,y),x=P?c:"valid",D=P?_:(0,s.spaceToBatchND)(_,g,q),M=("avg"===l?()=>(0,r.avgPool)(D,u,m,x):()=>(0,a.maxPool)(D,u,m,x))(),W=P?M:(0,o.batchToSpaceND)(M,g,j);return b?(0,p.reshape)(W,[W.shape[1],W.shape[2],W.shape[3]]):W}function f(e,t,r){const o=r.map(e=>e[0]),n=r.map(e=>e[1]),a=e.concat(o,n),i=t.map((e,t)=>(e-a[t]%e)%e),p=n.map((e,t)=>e+i[t]);return[t.map((e,t)=>[o[t],p[t]]),t.map((e,t)=>[0,i[t]])]}function h(e,t){const r=e.map((e,r)=>e+(e-1)*(t[r]-1)).map(e=>e-1),o=r.map(e=>Math.floor(e/2)),n=r.map((e,t)=>e-o[t]);return r.map((e,t)=>[o[t],n[t]])}const d=(0,i.op)({pool_:c});exports.pool=d;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./avg_pool":"Pm39","./batch_to_space_nd":"dRKG","./conv_util":"cqi6","./max_pool":"RWms","./operation":"rO1i","./reshape":"khVG","./space_to_batch_nd":"nPoV"}],"FJnw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pow=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function s(t,s){let u=(0,n.convertToTensor)(t,"base","pow"),p=(0,n.convertToTensor)(s,"exp","pow");[u,p]=(0,o.makeTypesMatch)(u,p);const i={a:u,b:p};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.pow(u,p);return r([u,p,o]),o},i,null,r.Pow)}const u=(0,t.op)({pow_:s});exports.pow=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"IOvE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./operation");function o(u,o){const t=(0,n.convertToTensor)(u,"x","prelu"),l=(0,n.convertToTensor)(o,"alpha","prelu"),p={x:t,alpha:l};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.prelu(t,l);return r([t,l]),n},p,null,r.Prelu)}const t=(0,u.op)({prelu_:o});exports.prelu=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"ZlHR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),o=require("./axis_util"),s=require("./cast"),i=require("./operation"),u=require("./reshape"),p=require("./transpose");function a(i,a=null,l=!1){let c=(0,t.convertToTensor)(i,"x","prod");"bool"===c.dtype&&(c=(0,s.cast)(c,"int32"));const d={x:c},x={axis:a,keepDims:l};return e.ENGINE.runKernelFunc(e=>{const r=(0,n.parseAxisParam)(a,c.shape),t=(0,o.getAxesPermutation)(r,c.rank);let s=r,i=c;null!=t&&(i=(0,p.transpose)(c,t),s=(0,o.getInnerMostAxes)(s.length,c.rank));let d=e.prod(i,s);if(l){const e=(0,o.expandShapeToKeepDim)(d.shape,r);d=(0,u.reshape)(d,e)}return d},d,null,r.Prod,x)}const l=(0,i.op)({prod_:a});exports.prod=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./cast":"owKL","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"fqDI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rand=void 0;var e=require("../engine"),r=require("../util"),n=require("./operation");function t(n,t,o){const i=(0,r.sizeFromShape)(n);let a=null;if(null==o||"float32"===o)a=new Float32Array(i);else if("int32"===o)a=new Int32Array(i);else{if("bool"!==o)throw new Error(`Unknown data type ${o}`);a=new Uint8Array(i)}for(let e=0;e<i;e++)a[e]=t();return e.ENGINE.makeTensor(a,n,o)}const o=(0,n.op)({rand_:t});exports.rand=o;
},{"../engine":"tmUz","../util":"UxaK","./operation":"rO1i"}],"TceX":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function s(t){var n,e=this,s=(n=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var s=.02519603282416938*(n+=t.charCodeAt(e));s-=n=s>>>0,n=(s*=n)>>>0,n+=4294967296*(s-=n)}return 2.3283064365386963e-10*(n>>>0)});e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=s(" "),e.s1=s(" "),e.s2=s(" "),e.s0-=s(t),e.s0<0&&(e.s0+=1),e.s1-=s(t),e.s1<0&&(e.s1+=1),e.s2-=s(t),e.s2<0&&(e.s2+=1),s=null}function r(t,n){return n.c=t.c,n.s0=t.s0,n.s1=t.s1,n.s2=t.s2,n}function o(t,n){var e=new s(t),o=n&&n.state,u=e.next;return u.int32=function(){return 4294967296*e.next()|0},u.double=function(){return u()+1.1102230246251565e-16*(2097152*u()|0)},u.quick=u,o&&("object"==typeof o&&r(o,e),u.state=function(){return r(e,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.alea=o}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"SRgy":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function r(t){var n=this,e="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var t=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^t^t>>>8},t===(0|t)?n.x=t:e+=t;for(var r=0;r<e.length+64;r++)n.x^=0|e.charCodeAt(r),n.next()}function o(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n}function u(t,n){var e=new r(t),u=n&&n.state,x=function(){return(e.next()>>>0)/4294967296};return x.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},x.int32=e.next,x.quick=x,u&&("object"==typeof u&&o(u,e),x.state=function(){return o(e,{})}),x}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xor128=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"YoHa":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^t^t<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,t===(0|t)?n.x=t:e+=t;for(var o=0;o<e.length+64;o++)n.x^=0|e.charCodeAt(o),o==e.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function r(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n.v=t.v,n.d=t.d,n}function u(t,n){var e=new o(t),u=n&&n.state,x=function(){return(e.next()>>>0)/4294967296};return x.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},x.int32=e.next,x.quick=x,u&&("object"==typeof u&&r(u,e),x.state=function(){return r(e,{})}),x}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xorwow=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"RITp":[function(require,module,exports) {
var define;
var n;!function(n,t,e){function r(n){var t=this;t.next=function(){var n,e,r=t.x,o=t.i;return n=r[o],e=(n^=n>>>7)^n<<24,e^=(n=r[o+1&7])^n>>>10,e^=(n=r[o+3&7])^n>>>3,e^=(n=r[o+4&7])^n<<7,n=r[o+7&7],e^=(n^=n<<13)^n<<9,r[o]=e,t.i=o+1&7,e},function(n,t){var e,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,e=0;e<t.length;++e)r[7&e]=r[7&e]<<15^t.charCodeAt(e)+r[e+1&7]<<13;for(;r.length<8;)r.push(0);for(e=0;e<8&&0===r[e];++e);for(8==e?r[7]=-1:r[e],n.x=r,n.i=0,e=256;e>0;--e)n.next()}(t,n)}function o(n,t){return t.x=n.x.slice(),t.i=n.i,t}function i(n,t){null==n&&(n=+new Date);var e=new r(n),i=t&&t.state,u=function(){return(e.next()>>>0)/4294967296};return u.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},u.int32=e.next,u.quick=u,i&&(i.x&&o(i,e),u.state=function(){return o(e,{})}),u}t&&t.exports?t.exports=i:e&&e.amd?e(function(){return i}):this.xorshift7=i}(0,"object"==typeof module&&module,"function"==typeof n&&n);
},{}],"QsPo":[function(require,module,exports) {
var define;
var n;!function(n,t,e){function r(n){var t=this;t.next=function(){var n,e,r=t.w,o=t.X,u=t.i;return t.w=r=r+1640531527|0,e=o[u+34&127],n=o[u=u+1&127],e^=e<<13,n^=n<<17,e^=e>>>15,n^=n>>>12,e=o[u]=e^n,t.i=u,e+(r^r>>>16)|0},function(n,t){var e,r,o,u,i,c=[],f=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,f=Math.max(f,t.length)),o=0,u=-32;u<f;++u)t&&(r^=t.charCodeAt((u+32)%t.length)),0===u&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,u>=0&&(i=i+1640531527|0,o=0==(e=c[127&u]^=r+i)?o+1:0);for(o>=128&&(c[127&(t&&t.length||0)]=-1),o=127,u=512;u>0;--u)r=c[o+34&127],e=c[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,c[o]=r^e;n.w=i,n.X=c,n.i=o}(t,n)}function o(n,t){return t.i=n.i,t.w=n.w,t.X=n.X.slice(),t}function u(n,t){null==n&&(n=+new Date);var e=new r(n),u=t&&t.state,i=function(){return(e.next()>>>0)/4294967296};return i.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},i.int32=e.next,i.quick=i,u&&(u.X&&o(u,e),i.state=function(){return o(e,{})}),i}t&&t.exports?t.exports=u:e&&e.amd?e(function(){return u}):this.xor4096=u}(0,"object"==typeof module&&module,"function"==typeof n&&n);
},{}],"aRBU":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.b,e=n.c,o=n.d,r=n.a;return t=t<<25^t>>>7^e,e=e-o|0,o=o<<24^o>>>8^r,r=r-t|0,n.b=t=t<<20^t>>>12^e,n.c=e=e-o|0,n.d=o<<16^e>>>16^r,n.a=r-t|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,t===Math.floor(t)?(n.a=t/4294967296|0,n.b=0|t):e+=t;for(var o=0;o<e.length+20;o++)n.b^=0|e.charCodeAt(o),n.next()}function r(t,n){return n.a=t.a,n.b=t.b,n.c=t.c,n.d=t.d,n}function u(t,n){var e=new o(t),u=n&&n.state,c=function(){return(e.next()>>>0)/4294967296};return c.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},c.int32=e.next,c.quick=c,u&&("object"==typeof u&&r(u,e),c.state=function(){return r(e,{})}),c}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.tychei=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"wgBK":[function(require,module,exports) {
var global = arguments[3];
var define;
var r,n=arguments[3];!function(n,t){var e,o=this,u=256,i=6,a="random",c=t.pow(u,i),f=t.pow(2,52),s=2*f,l=u-1;function p(r,l,p){var m=[],v=h(function r(n,t){var e,o=[],u=typeof n;if(t&&"object"==u)for(e in n)try{o.push(r(n[e],t-1))}catch(i){}return o.length?o:"string"==u?n:n+"\0"}((l=1==l?{entropy:!0}:l||{}).entropy?[r,d(n)]:null==r?function(){try{var r;return e&&(r=e.randomBytes)?r=r(u):(r=new Uint8Array(u),(o.crypto||o.msCrypto).getRandomValues(r)),d(r)}catch(a){var t=o.navigator,i=t&&t.plugins;return[+new Date,o,i,o.screen,d(n)]}}():r,3),m),j=new g(m),S=function(){for(var r=j.g(i),n=c,t=0;r<f;)r=(r+t)*u,n*=u,t=j.g(1);for(;r>=s;)r/=2,n/=2,t>>>=1;return(r+t)/n};return S.int32=function(){return 0|j.g(4)},S.quick=function(){return j.g(4)/4294967296},S.double=S,h(d(j.S),n),(l.pass||p||function(r,n,e,o){return o&&(o.S&&y(o,j),r.state=function(){return y(j,{})}),e?(t[a]=r,n):r})(S,v,"global"in l?l.global:this==t,l.state)}function g(r){var n,t=r.length,e=this,o=0,i=e.i=e.j=0,a=e.S=[];for(t||(r=[t++]);o<u;)a[o]=o++;for(o=0;o<u;o++)a[o]=a[i=l&i+r[o%t]+(n=a[o])],a[i]=n;(e.g=function(r){for(var n,t=0,o=e.i,i=e.j,a=e.S;r--;)n=a[o=l&o+1],t=t*u+a[l&(a[o]=a[i=l&i+n])+(a[i]=n)];return e.i=o,e.j=i,t})(u)}function y(r,n){return n.i=r.i,n.j=r.j,n.S=r.S.slice(),n}function h(r,n){for(var t,e=r+"",o=0;o<e.length;)n[l&o]=l&(t^=19*n[l&o])+e.charCodeAt(o++);return d(n)}function d(r){return String.fromCharCode.apply(0,r)}if(t["seed"+a]=p,h(t.random(),n),"object"==typeof module&&module.exports){module.exports=p;try{e=require("crypto")}catch(m){}}else"function"==typeof r&&r.amd&&r(function(){return p})}([],Math);
},{"crypto":"bWtT"}],"izQb":[function(require,module,exports) {
var r=require("./lib/alea"),e=require("./lib/xor128"),i=require("./lib/xorwow"),o=require("./lib/xorshift7"),l=require("./lib/xor4096"),x=require("./lib/tychei"),u=require("./seedrandom");u.alea=r,u.xor128=e,u.xorwow=i,u.xorshift7=o,u.xor4096=l,u.tychei=x,module.exports=u;
},{"./lib/alea":"TceX","./lib/xor128":"SRgy","./lib/xorwow":"YoHa","./lib/xorshift7":"RITp","./lib/xor4096":"QsPo","./lib/tychei":"aRBU","./seedrandom":"wgBK"}],"IRq4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jarqueBeraNormalityTest=i,exports.expectArrayInMeanStdRange=h,exports.UniformRandom=exports.RandGamma=exports.MPRandGauss=void 0;var t=r(require("seedrandom")),e=require("../test_util");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var o=a?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,e&&e.set(t,r),r}class a{constructor(e,n,r,a,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=s||Math.random();this.random=t.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,a,s;do{s=(r=2*this.random()-1)*r+(a=2*this.random()-1)*a}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}exports.MPRandGauss=a;class s{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const o=s||Math.random();this.randu=t.alea(o.toString()),this.randn=new a(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-s+Math.log(s)),(a=this.randu())<e||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}exports.RandGamma=s;class o{constructor(e=0,n=1,r,a){if(this.canReturnFloat=(()=>null==this.dtype||"float32"===this.dtype),this.min=e,this.range=n-e,this.dtype=r,null==a&&(a=Math.random()),"number"==typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=t.alea(a)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}function i(t){const e=t.length,n=c(t),r=d(t),a=e/6*(Math.pow(n,2)+.25*Math.pow(r-3,2));if(a>5.991)throw new Error(`Invalid p-value for JB: ${a}`)}function h(t,n,r,a){null==a&&(a=(0,e.testEpsilon)());const s=l(t);(0,e.expectNumbersClose)(s,n,a),(0,e.expectNumbersClose)(u(t,s),r,a)}function l(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}function u(t,e){let n=0;for(let r=0;r<t.length;r++){const a=t[r]-e;n+=a*a}return Math.sqrt(n/t.length)}function d(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,4)}return 1/n*a/Math.pow(1/n*r,2)}function c(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,3)}return 1/n*a/Math.pow(1/(n-1)*r,1.5)}exports.UniformRandom=o;
},{"seedrandom":"izQb","../test_util":"IZ2A"}],"i9p1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomGamma=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function a(r,a,o=1,n="float32",u){if(null==o&&(o=1),null==n&&(n="float32"),"float32"!==n&&"int32"!==n)throw new Error(`Unsupported data type ${n}`);const l=new t.RandGamma(a,o,n,u),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const o=(0,r.op)({randomGamma_:a});exports.randomGamma=o;
},{"./buffer":"SN3d","./operation":"rO1i","./rand_util":"IRq4"}],"oldS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomNormal=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function t(r,t=0,n=1,a,u){if(null!=a&&"bool"===a)throw new Error(`Unsupported data type ${a}`);const l=new o.MPRandGauss(t,n,a,!1,u),s=(0,e.buffer)(r,a);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const n=(0,r.op)({randomNormal_:t});exports.randomNormal=n;
},{"./buffer":"SN3d","./operation":"rO1i","./rand_util":"IRq4"}],"YaAk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomUniform=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function n(r,n=0,t=1,u="float32",i){const a=(0,e.buffer)(r,u),f=new o.UniformRandom(n,t,null,i);for(let e=0;e<a.values.length;e++)a.values[e]=f.nextValue();return a.toTensor()}const t=(0,r.op)({randomUniform_:n});exports.randomUniform=t;
},{"./buffer":"SN3d","./operation":"rO1i","./rand_util":"IRq4"}],"R7Cm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor1d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o){(0,r.assertNonNull)(n);const s=(0,e.inferShape)(n,o);if(1!==s.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,t.makeTensor)(n,null,s,o)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"WweN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=s;var e=require("../engine"),r=require("../kernel_names"),t=require("../util"),n=require("./tensor1d"),o=require("./zeros");function s(s,u,a=1,i="float32"){if(0===a)throw new Error("Cannot have a step of zero");const l={start:s,stop:u,step:a,dtype:i};return e.ENGINE.runKernelFunc(()=>{if(s===u||s<u&&a<0||u<s&&a>1)return(0,o.zeros)([0],i);const e=Math.abs(Math.ceil((u-s)/a)),r=(0,t.makeZerosTypedArray)(e,i);u<s&&1===a&&(a=-1),r[0]=s;for(let t=1;t<r.length;t++)r[t]=r[t-1]+a;return(0,n.tensor1d)(r,i)},{},null,r.Range,l)}
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./tensor1d":"R7Cm","./zeros":"MNgB"}],"SxzF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocal=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function c(n){const c=(0,o.convertToTensor)(n,"x","reciprocal"),i={x:c};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.reciprocal(c);return r([c]),o},i,null,r.Reciprocal)}const i=(0,n.op)({reciprocal_:c});exports.reciprocal=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Htix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./operation"),t=require("./cast");function o(u){const o=(0,n.convertToTensor)(u,"x","relu"),l={x:o};return e.ENGINE.runKernelFunc((e,r)=>(r([o]),"bool"===o.dtype?(0,t.cast)(o,"int32"):e.relu(o)),l,null,r.Relu)}const l=(0,u.op)({relu_:o});exports.relu=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./cast":"owKL"}],"bNXk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./cast"),t=require("./operation");function o(t){const o=(0,n.convertToTensor)(t,"x","relu6"),l={x:o};return e.ENGINE.runKernelFunc((e,r)=>(r([o]),"bool"===o.dtype?(0,u.cast)(o,"int32"):e.relu6(o)),l,null,r.Relu6)}const l=(0,t.op)({relu6_:o});exports.relu6=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./cast":"owKL","./operation":"rO1i"}],"wt3J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("../util"),o=require("./clone"),t=require("./operation"),u=require("./reshape");function i(t,i){const a=(0,n.convertToTensor)(t,"x","reverse"),c={x:a},p={dims:i};return e.ENGINE.runKernelFunc(e=>{const r=(0,s.parseAxisParam)(i,a.shape);if(0===a.rank)return(0,o.clone)(a);const n=e.reverse(a,r);return(0,u.reshape)(n,a.shape)},c,null,r.Reverse,p)}const a=(0,t.op)({reverse_:i});exports.reverse=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./clone":"HHuR","./operation":"rO1i","./reshape":"khVG"}],"QYAt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse1d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(t){const o=(0,e.convertToTensor)(t,"x","reverse");return r.assert(1===o.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${o.rank}.`),(0,n.reverse)(o,0)}const s=(0,t.op)({reverse1d_:i});exports.reverse1d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reverse":"wt3J"}],"xTht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse2d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(2===u.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse2d_:i});exports.reverse2d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reverse":"wt3J"}],"e415":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse3d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(3===u.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse3d_:i});exports.reverse3d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reverse":"wt3J"}],"Q8XB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse4d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(4===u.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse4d_:i});exports.reverse4d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reverse":"wt3J"}],"uHOV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.round=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u=(0,n.convertToTensor)(o,"x","round"),t={x:u};return e.ENGINE.runKernelFunc(e=>e.round(u),t,null,r.Round)}const t=(0,o.op)({round_:u});exports.round=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"paOW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrt=void 0;var r=require("../engine"),e=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,t.convertToTensor)(n,"x","rsqrt"),o={x:s};return r.ENGINE.runKernelFunc((r,e)=>{const t=r.rsqrt(s);return e([s]),t},o,null,e.Rsqrt)}const o=(0,n.op)({rsqrt_:s});exports.rsqrt=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"iDNJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./operation");function o(u){const o=(0,n.convertToTensor)(u,"x","selu"),s={x:o};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.selu(o);return r([o]),n},s,null,r.Selu)}const s=(0,u.op)({selu_:o});exports.selu=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"sXEJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.separableConv2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=require("./depthwise_conv2d"),o=require("./operation"),s=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(o,a,i,p,u,l=[1,1],d="NHWC"){const b=(0,e.convertToTensor)(o,"x","separableConv2d"),f=(0,e.convertToTensor)(a,"depthwiseFilter","separableConv2d"),v=(0,e.convertToTensor)(i,"pointwiseFilter","separableConv2d");let c=b,h=!1;if(3===b.rank&&(h=!0,c=(0,s.reshape)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),"NCHW"===d)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");r.assert(4===c.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),r.assert(4===f.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(4===v.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(1===v.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+` must be 1, but got ${v.shape[0]}.`),r.assert(1===v.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+`filter must be 1, but got ${v.shape[1]}.`);const C=f.shape[2],k=f.shape[3];r.assert(v.shape[2]===C*k,()=>"Error in separableConv2d: the third dimension of pointwise filter "+`must be ${C*k}, `+`but got ${v.shape[2]}.`);const w=(0,n.depthwiseConv2d)(c,f,p,u,d,l),y=(0,t.conv2d)(w,v,1,"valid",d);return h?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const u=(0,o.op)({separableConv2d_:p});exports.separableConv2d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./conv2d":"K8t2","./depthwise_conv2d":"hlJ3","./operation":"rO1i","./reshape":"khVG"}],"yIk5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setdiff1dAsync=void 0;var e=require("../tensor"),t=require("../tensor_util_env"),r=o(require("../util"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}async function s(n,o){const s=(0,t.convertToTensor)(n,"x","setdiff1d"),a=(0,t.convertToTensor)(o,"y","setdiff1d");r.assert(s.dtype===a.dtype,()=>`x and y should have the same dtype, but got x (${s.dtype}) and y (${a.dtype}).`),r.assert(1===s.rank,()=>`x should be 1D tensor, but got x (${s.shape}).`),r.assert(1===a.rank,()=>`y should be 1D tensor, but got y (${a.shape}).`);const u=await s.data(),f=await a.data(),i=new Set(f);let d=0;for(let e=0;e<u.length;e++)i.has(u[e])||d++;const c=new e.TensorBuffer([d],s.dtype),p=new e.TensorBuffer([d],"int32");for(let e=0,t=0;e<u.length;e++)i.has(u[e])||(c.values[t]=u[e],p.values[t]=e,t++);return[c.toTensor(),p.toTensor()]}const a=s;exports.setdiff1dAsync=a;
},{"../tensor":"Zqvm","../tensor_util_env":"x0Hg","../util":"UxaK"}],"TntV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sign=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),i=require("./operation");function o(i){const o=(0,r.convertToTensor)(i,"x","sign"),s={x:o};return e.ENGINE.runKernelFunc(e=>e.sign(o),s,null,n.Sign)}const s=(0,i.op)({sign_:o});exports.sign=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"AwzN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sin=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),i=require("./operation");function o(i){const o=(0,r.convertToTensor)(i,"x","sin"),s={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.sin(o);return n([o]),r},s,null,n.Sin)}const s=(0,i.op)({sin_:o});exports.sin=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"nOJq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinh=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),i=require("./operation");function o(i){const o=(0,r.convertToTensor)(i,"x","sinh"),s={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.sinh(o);return n([o]),r},s,null,n.Sinh)}const s=(0,i.op)({sinh_:o});exports.sinh=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"EcR4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice1d");return r.assert(1===u.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,[o],[i])}const s=(0,t.op)({slice1d_:u});exports.slice1d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./slice":"xcz4"}],"pNW2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice2d");return r.assert(2===u.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice2d_:u});exports.slice2d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./slice":"xcz4"}],"XFWw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice3d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice3d");return r.assert(3===u.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice3d_:u});exports.slice3d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./slice":"xcz4"}],"ScyZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice4d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice4d");return r.assert(4===u.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice4d_:u});exports.slice4d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./slice":"xcz4"}],"Tk36":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function n(t,n=-1){const s=(0,r.convertToTensor)(t,"logits","softmax","float32");if(-1===n&&(n=s.rank-1),n!==s.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${s.rank} and dim was ${n}`);const a={logits:s},i={dim:n};return e.ENGINE.runKernelFunc((e,o)=>{const r=e.softmax(s,n);return o([r]),r},a,null,o.Softmax,i)}const s=(0,t.op)({softmax_:n});exports.softmax=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Z8YU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../util"),s=require("../operation");function n(s){(0,r.assert)("complex64"===s.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+`but got ${s.dtype}.`);const n={input:s};return e.ENGINE.runKernelFunc(e=>{const t=s.shape[s.shape.length-1],r=s.size/t,n=s.as2D(r,t);return e.fft(n).reshape(s.shape)},n,null,t.FFT)}const o=(0,s.op)({fft_:n});exports.fft=o;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../util":"UxaK","../operation":"rO1i"}],"r4QH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../util"),s=require("../operation"),i=require("../reshape");function n(s){(0,t.assert)("complex64"===s.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+`but got ${s.dtype}.`);const n={input:s};return e.ENGINE.runKernelFunc(e=>{const r=s.shape[s.shape.length-1],t=s.size/r,n=(0,i.reshape)(s,[t,r]),p=e.ifft(n);return(0,i.reshape)(p,s.shape)},n,null,r.IFFT)}const p=(0,s.op)({ifft_:n});exports.ifft=p;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../util":"UxaK","../operation":"rO1i","../reshape":"khVG"}],"lC3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.irfft=void 0;var e=require("../complex"),r=require("../concat"),s=require("../imag"),i=require("../mul"),a=require("../operation"),t=require("../real"),c=require("../reshape"),o=require("../reverse"),p=require("../scalar"),u=require("../slice"),l=require("./ifft");function f(a){const f=a.shape[a.shape.length-1],n=a.size/f;let h;if(f<=2){const e=(0,c.reshape)(a,[n,f]);h=(0,l.ifft)(e)}else{const q=[n,2*(f-1)],m=(0,c.reshape)((0,t.real)(a),[n,f]),v=(0,c.reshape)((0,s.imag)(a),[n,f]),x=(0,o.reverse)((0,u.slice)(m,[0,1],[n,f-2]),1),d=(0,i.mul)((0,o.reverse)((0,u.slice)(v,[0,1],[n,f-2]),1),(0,p.scalar)(-1)),g=(0,r.concat)([m,x],1),_=(0,r.concat)([v,d],1),b=(0,c.reshape)((0,e.complex)(g,_),[q[0],q[1]]);h=(0,l.ifft)(b)}if(h=(0,t.real)(h),3===a.rank&&0!==a.shape[0]){const e=h,r=a.shape[0];h=(0,c.reshape)(h,[r,h.shape[0]/r,h.shape[1]]),e.dispose()}return h}const n=(0,a.op)({irfft_:f});exports.irfft=n;
},{"../complex":"BDDu","../concat":"gZir","../imag":"P5ES","../mul":"WS4w","../operation":"rO1i","../real":"QPTK","../reshape":"khVG","../reverse":"wt3J","../scalar":"RBNv","../slice":"xcz4","./ifft":"r4QH"}],"E6ap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareSplitSize=s;var e=require("../util");function s(s,t,r=0){let i=[];if("number"==typeof t)(0,e.assert)(s.shape[r]%t==0,()=>"Number of splits must evenly divide the axis."),i=new Array(t).fill(s.shape[r]/t);else{const a=t.reduce((e,s)=>(-1===s&&(e+=1),e),0);(0,e.assert)(a<=1,()=>"There should be only one negative value in split array.");const n=t.indexOf(-1);if(-1!==n){const e=t.reduce((e,s)=>s>0?e+s:e);t[n]=s.shape[r]-e}(0,e.assert)(s.shape[r]===t.reduce((e,s)=>e+s),()=>"The sum of sizes must match the size of the axis dimension."),i=t}return i}
},{"../util":"UxaK"}],"L2gY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.split=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),t=require("../util"),s=require("./operation"),n=require("./split_util");function p(s,p,u=0){const l=(0,i.convertToTensor)(s,"x","split"),o={x:l},a={numOrSizeSplits:p,axis:u};return e.ENGINE.runKernelFunc((e,r)=>{const i=(0,t.parseAxisParam)(u,l.shape)[0],s=(0,n.prepareSplitSize)(l,p,i);return e.split(l,s,i)},o,null,r.SplitV,a)}const u=(0,s.op)({split_:p});exports.split=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./split_util":"E6ap"}],"G4qK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rfft=void 0;var e=require("../../util"),r=require("../complex"),t=require("../concat"),s=require("../imag"),l=require("../operation"),p=require("../real"),a=require("../reshape"),i=require("../slice"),o=require("../split"),h=require("../zeros"),u=require("../zeros_like"),n=require("./fft");function f(l,f){(0,e.assert)("float32"===l.dtype,()=>`The dtype for rfft() must be real value but got ${l.dtype}`);let c=l.shape[l.shape.length-1];const q=l.size/c;let g;if(null!=f&&f<c){const e=l.shape.map(e=>0),r=l.shape.map(e=>e);r[l.shape.length-1]=f,g=(0,i.slice)(l,e,r),c=f}else if(null!=f&&f>c){const e=l.shape.map(e=>e);e[l.shape.length-1]=f-c,g=(0,t.concat)([l,(0,h.zeros)(e)],l.shape.length-1),c=f}else g=l;const m=(0,u.zerosLike)(g),d=(0,a.reshape)((0,r.complex)(g,m),[q,c]),x=(0,n.fft)(d),z=Math.floor(c/2)+1,v=(0,p.real)(x),y=(0,s.imag)(x),_=(0,o.split)(v,[z,c-z],v.shape.length-1),b=(0,o.split)(y,[z,c-z],y.shape.length-1),k=g.shape.slice();return k[g.shape.length-1]=z,(0,a.reshape)((0,r.complex)(_[0],b[0]),k)}const c=(0,l.op)({rfft_:f});exports.rfft=c;
},{"../../util":"UxaK","../complex":"BDDu","../concat":"gZir","../imag":"P5ES","../operation":"rO1i","../real":"QPTK","../reshape":"khVG","../slice":"xcz4","../split":"L2gY","../zeros":"MNgB","../zeros_like":"Jky8","./fft":"Z8YU"}],"dGNr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrt=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n){const o=(0,t.convertToTensor)(n,"x","sqrt"),s={x:o};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.sqrt(o);return r([o]),t},s,null,r.Sqrt)}const s=(0,n.op)({sqrt_:o});exports.sqrt=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"YDjz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifference=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),s=require("../tensor_util_env"),t=require("./broadcast_util"),u=require("./operation");function a(u,a){let o=(0,s.convertToTensor)(u,"a","squaredDifference"),i=(0,s.convertToTensor)(a,"b","squaredDifference");[o,i]=(0,n.makeTypesMatch)(o,i),(0,t.assertAndGetBroadcastShape)(o.shape,i.shape);const c={a:o,b:i};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.squaredDifference(o,i);return r([o,i]),n},c,null,r.SquaredDifference,{})}const o=(0,u.op)({squaredDifference_:a});exports.squaredDifference=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"N7Os":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squeeze=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./operation"),o=require("./reshape");function t(s,t){const u=(0,e.convertToTensor)(s,"x","squeeze");return(0,o.reshape)(u,(0,r.squeezeShape)(u.shape,t).newShape)}const u=(0,s.op)({squeeze_:t});exports.squeeze=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"GHVB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stack=void 0;var e=require("../tensor_util_env"),t=o(require("../util")),r=require("./concat"),s=require("./expand_dims"),n=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function c(n,a=0){const o=(0,e.convertToTensorArray)(n,"tensors","stack");if(t.assert(o.length>=1,()=>"Pass at least one tensor to tf.stack"),1===o.length)return(0,s.expandDims)(o[0],a);const c=o[0].rank,i=o[0].shape,u=o[0].dtype;t.assert(a<=c,()=>"Axis must be <= rank of the tensor"),o.forEach(e=>{t.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),t.assert(u===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const p=o.map(e=>(0,s.expandDims)(e,a));return(0,r.concat)(p,a)}const i=(0,n.op)({stack_:c});exports.stack=i;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./concat":"gZir","./expand_dims":"uPYU","./operation":"rO1i"}],"DQ8I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.step=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o=0){const s=(0,t.convertToTensor)(n,"x","step"),p={x:s},u={alpha:o};return e.ENGINE.runKernelFunc(e=>e.step(s,o),p,null,r.Step,u)}const s=(0,n.op)({step_:o});exports.step=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"PMwJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=void 0;var e=require("../engine"),s=require("../kernel_names"),r=require("../tensor_util_env"),i=require("./operation"),n=require("./reshape"),t=require("./slice"),o=require("./slice_util");function l(i,l,a,c,d=0,u=0,p=0,h=0,k=0){let x=(0,r.convertToTensor)(i,"x","stridedSlice");const M={x:x},f={begin:l,end:a,strides:c,beginMask:d,endMask:u,ellipsisMask:p,newAxisMask:h,shrinkAxisMask:k};return e.ENGINE.runKernelFunc(e=>{null==c&&(c=new Array(l.length));const s=(0,o.maskToAxes)(p);if(s.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==p&&0!==h)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==p&&0!==k)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const r=x.rank-l.length,i=(0,o.maskToAxes)(h),M=x.shape.slice();i.forEach(e=>{l[e]=0,a[e]=1,M.splice(e,0,1)}),x=(0,n.reshape)(x,M);const{begin:f,end:g,strides:w}=(0,o.getNormalizedAxes)(x.shape,s,r,l,a,c,d,u,p);l=f,a=g,c=w;const A=(0,o.maskToAxes)(k);A.forEach(e=>{a[e]=l[e]+1,c[e]=1});const S=(0,o.computeOutShape)(l,a,c),q=S.filter((e,s)=>-1===A.indexOf(s));if(c.every(e=>1===e))return(0,n.reshape)((0,t.slice)(x,l,S),q);const E=e.stridedSlice(x,l,a,c);return(0,n.reshape)(E,q)},M,null,s.StridedSlice,f)}const a=(0,i.op)({stridedSlice_:l});exports.stridedSlice=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./reshape":"khVG","./slice":"xcz4","./slice_util":"sNMx"}],"RsGH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tan=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,r.convertToTensor)(t,"x","tan"),u={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.tan(o);return n([o]),r},u,null,n.Tan)}const u=(0,t.op)({tan_:o});exports.tan=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Q66m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor2d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&2!==o.length)throw new Error("tensor2d() requires shape to have two numbers");const u=(0,e.inferShape)(n,s);if(2!==u.length&&1!==u.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"iywK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor4d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&4!==o.length)throw new Error("tensor4d() requires shape to have four numbers");const u=(0,e.inferShape)(n,s);if(4!==u.length&&1!==u.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"YwRe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor5d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&5!==o.length)throw new Error("tensor5d() requires shape to have five numbers");const u=(0,e.inferShape)(n,s);if(5!==u.length&&1!==u.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"X7ie":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor6d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&6!==o.length)throw new Error("tensor6d() requires shape to have six numbers");const u=(0,e.inferShape)(n,s);if(6!==u.length&&1!==u.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return o=o||u,(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"N414":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topk=void 0;var e=require("../engine"),t=require("../kernel_names"),o=require("../tensor_util_env"),r=require("./operation");function n(r,n=1,s=!0){const i=(0,o.convertToTensor)(r,"x","topk");if(0===i.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const p=i.shape[i.shape.length-1];if(n>p)throw new Error(`'k' passed to topk() must be <= the last dimension (${p}) `+`but got ${n}`);const u={x:i},k={k:n,sorted:s},[a,c]=e.ENGINE.runKernelFunc(e=>e.topk(i,n,s),u,null,t.TopK,k);return{values:a,indices:c}}const s=(0,r.op)({topk_:n});exports.topk=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"hfYy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.truncatedNormal=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function o(r,o=0,u=1,n,a){if(null!=n&&"bool"===n)throw new Error("Unsupported data type $ { dtype }");const l=new t.MPRandGauss(o,u,n,!0,a),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const u=(0,r.op)({truncatedNormal_:o});exports.truncatedNormal=u;
},{"./buffer":"SN3d","./operation":"rO1i","./rand_util":"IRq4"}],"qyE5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("../util"),t=require("./operation");function i(t,i=0){const s=(0,n.convertToTensor)(t,"x","unique",null);(0,u.assert)(s.rank>0,()=>"The input tensor must be at least 1D");const o={x:s},a={axis:i},[l,q]=e.ENGINE.runKernel(r.Unique,o,a);return{values:l,indices:q}}const s=(0,t.op)({unique_:i});exports.unique=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"U01C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=void 0;var e=require("../engine"),n=require("../kernel_names"),t=require("../tensor_util_env"),r=require("../util"),u=require("./operation");function s(u,s,o){const m=(0,t.convertToTensor)(u,"x","unsortedSegmentSum"),i=(0,t.convertToTensor)(s,"segmentIds","unsortedSegmentSum","int32");(0,r.assert)((0,r.isInt)(o),()=>"numSegments must be of dtype int");const S={x:m,segmentIds:i},d={numSegments:o};return e.ENGINE.runKernelFunc((e,n)=>{const t=e.unsortedSegmentSum(m,i,o);return n([i]),t},S,null,n.UnsortedSegmentSum,d)}const o=(0,u.op)({unsortedSegmentSum_:s});exports.unsortedSegmentSum=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"JyML":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unstack=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),u=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var s=n?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function a(u,o=0){const s=(0,r.convertToTensor)(u,"x","unstack");n.assert(o>=-s.shape.length&&o<s.shape.length,()=>`Axis = ${o} is not in [-${s.shape.length}, ${s.shape.length})`),o<0&&(o+=s.shape.length);const a={value:s},i={axis:o};return e.ENGINE.runKernelFunc(e=>e.unstack(s,o),a,null,t.Unpack,i)}const i=(0,u.op)({unstack_:a});exports.unstack=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"nKb4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.variable=r;var e=require("../engine");function r(r,t=!0,a,i){return e.ENGINE.makeVariable(r,t,a,i)}
},{"../engine":"tmUz"}],"MEsl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereImpl=t;var e=require("../ops/buffer");function t(t,r){const n=[];for(let e=0;e<r.length;e++)r[e]&&n.push(e);const o=(0,e.buffer)(t,"int32"),s=(0,e.buffer)([n.length,t.length],"int32");for(let e=0;e<n.length;e++){const r=o.indexToLoc(n[e]),l=e*t.length;s.values.set(r,l)}return s.toTensor()}
},{"../ops/buffer":"SN3d"}],"Vq9r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereAsync=void 0;var e=require("../backends/where_impl"),r=require("../tensor_util_env");async function o(o){const s=(0,r.convertToTensor)(o,"condition","whereAsync","bool"),n=await s.data(),t=(0,e.whereImpl)(s.shape,n);return o!==s&&s.dispose(),t}const s=o;exports.whereAsync=s;
},{"../backends/where_impl":"MEsl","../tensor_util_env":"x0Hg"}],"cLTy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.booleanMaskAsync=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./gather"),s=require("./reshape"),o=require("./squeeze"),n=require("./where_async");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=s?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(t,o,n):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}async function c(a,i,c){const u=(0,e.convertToTensor)(a,"tensor","boolMask"),p=(0,e.convertToTensor)(i,"mask","boolMask","bool"),l=null==c?0:c,f=p.rank,h=u.shape;r.assert(f>0,()=>"mask cannot be scalar"),r.assertShapesMatch(h.slice(l,l+f),p.shape,"mask's shape must match the first K dimensions of tensor's shape,");let d=1;for(let e=l;e<l+f;e++)d*=h[e];const y=h.slice(0,l).concat([d],h.slice(l+f)),b=(0,s.reshape)(u,y),v=(0,s.reshape)(p,[-1]),k=await(0,n.whereAsync)(v),M=(0,o.squeeze)(k,[1]),O=(0,t.gather)(b,M,l);return a!==u&&u.dispose(),i!==p&&p.dispose(),M.dispose(),b.dispose(),v.dispose(),k.dispose(),O}const u=c;exports.booleanMaskAsync=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./gather":"Quad","./reshape":"khVG","./squeeze":"N7Os","./where_async":"Vq9r"}],"tF3n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualStrict=exports.lessStrict=exports.lessEqualStrict=exports.greaterStrict=exports.greaterEqualStrict=exports.equalStrict=void 0;var e=require("../globals"),r=require("../tensor_util_env"),t=require("../util"),a=require("./equal"),s=require("./greater"),o=require("./greater_equal"),n=require("./less"),i=require("./less_equal"),c=require("./not_equal"),u=require("./operation");function l(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","notEqualStrict"),n=(0,r.convertToTensor)(s,"b","notEqualStrict");return(0,t.assertShapesMatch)(o.shape,n.shape,"Error in notEqualStrict: "),(0,c.notEqual)(o,n)}function p(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","lessStrict"),i=(0,r.convertToTensor)(s,"b","lessStrict");return(0,t.assertShapesMatch)(o.shape,i.shape,"Error in lessStrict: "),(0,n.less)(o,i)}function q(s,o){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(s,"a","equalStrict"),i=(0,r.convertToTensor)(o,"b","equalStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in equalStrict: "),(0,a.equal)(n,i)}function S(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","lessEqualStrict"),n=(0,r.convertToTensor)(s,"b","lessEqualStrict");return(0,t.assertShapesMatch)(o.shape,n.shape,"Error in lessEqualStrict: "),(0,i.lessEqual)(o,n)}function v(a,o){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(a,"a","greaterStrict"),i=(0,r.convertToTensor)(o,"b","greaterStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in greaterStrict: "),(0,s.greater)(n,i)}function d(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(a,"a","greaterEqualStrict"),i=(0,r.convertToTensor)(s,"b","greaterEqualStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in greaterEqualStrict: "),(0,o.greaterEqual)(n,i)}const h=(0,u.op)({equalStrict_:q});exports.equalStrict=h;const E=(0,u.op)({greaterEqualStrict_:d});exports.greaterEqualStrict=E;const T=(0,u.op)({greaterStrict_:v});exports.greaterStrict=T;const b=(0,u.op)({lessEqualStrict_:S});exports.lessEqualStrict=b;const f=(0,u.op)({lessStrict_:p});exports.lessStrict=f;const g=(0,u.op)({notEqualStrict_:l});exports.notEqualStrict=g;
},{"../globals":"UkUu","../tensor_util_env":"x0Hg","../util":"UxaK","./equal":"nLPx","./greater":"i1I6","./greater_equal":"wG0H","./less":"PrnK","./less_equal":"NxL8","./not_equal":"RlXH","./operation":"rO1i"}],"uden":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subStrict=exports.squaredDifferenceStrict=exports.powStrict=exports.mulStrict=exports.modStrict=exports.minimumStrict=exports.maximumStrict=exports.divStrict=exports.addStrict=void 0;var e=require("../globals"),r=require("../tensor_util_env"),t=v(require("../util")),o=require("./add"),i=require("./div"),n=require("./maximum"),a=require("./minimum"),s=require("./mod"),c=require("./mul"),u=require("./operation"),p=require("./pow"),d=require("./squared_difference"),m=require("./sub");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function S(i,n){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(i,"a","addStrict"),s=(0,r.convertToTensor)(n,"b","addStrict");return t.assertShapesMatch(a.shape,s.shape,"Error in addStrict: "),(0,o.add)(a,s)}function h(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","subStrict"),a=(0,r.convertToTensor)(i,"b","subStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in subStrict: "),(0,m.sub)(n,a)}function l(r,o){return(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future"),t.assertShapesMatch(r.shape,o.shape,"Error in powStrict: "),(0,p.pow)(r,o)}function b(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","mul"),a=(0,r.convertToTensor)(i,"b","mul");return t.assertShapesMatch(n.shape,a.shape,"Error in multiplyStrict: "),(0,c.mul)(n,a)}function T(o,n){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(o,"a","div"),s=(0,r.convertToTensor)(n,"b","div");return t.assertShapesMatch(a.shape,s.shape,"Error in divideStrict: "),(0,i.div)(a,s)}function x(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","modStrict"),a=(0,r.convertToTensor)(i,"b","modStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in modStrict: "),(0,s.mod)(n,a)}function q(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","minimumStrict"),s=(0,r.convertToTensor)(i,"b","minimumStrict");return t.assertShapesMatch(n.shape,s.shape,"Error in minimumStrict: "),(0,a.minimum)(n,s)}function w(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(o,"a","maximumStrict"),s=(0,r.convertToTensor)(i,"b","maximumStrict");return t.assertShapesMatch(a.shape,s.shape,"Error in maximumStrict: "),(0,n.maximum)(a,s)}function _(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","squaredDifferenceStrict"),a=(0,r.convertToTensor)(i,"b","squaredDifferenceStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in squaredDifferenceStrict: "),(0,d.squaredDifference)(n,a)}const M=(0,u.op)({addStrict_:S});exports.addStrict=M;const y=(0,u.op)({divStrict_:T});exports.divStrict=y;const W=(0,u.op)({maximumStrict_:w});exports.maximumStrict=W;const D=(0,u.op)({minimumStrict_:q});exports.minimumStrict=D;const E=(0,u.op)({modStrict_:x});exports.modStrict=E;const O=(0,u.op)({mulStrict_:b});exports.mulStrict=O;const j=(0,u.op)({powStrict_:l});exports.powStrict=j;const P=(0,u.op)({squaredDifferenceStrict_:_});exports.squaredDifferenceStrict=P;const g=(0,u.op)({subStrict_:h});exports.subStrict=g;
},{"../globals":"UkUu","../tensor_util_env":"x0Hg","../util":"UxaK","./add":"geuL","./div":"XyQ4","./maximum":"nmNC","./minimum":"q3lt","./mod":"oTGE","./mul":"WS4w","./operation":"rO1i","./pow":"FJnw","./squared_difference":"YDjz","./sub":"OFjl"}],"Hzs7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.norm=void 0;var r=require("../tensor_util_env"),e=require("../util"),n=require("./abs"),t=q(require("./axis_util")),i=require("./max"),u=require("./min"),a=require("./operation"),o=require("./pow"),s=require("./reshape"),f=require("./scalar"),l=require("./sqrt"),p=require("./square"),c=require("./sum");function m(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return m=function(){return r},r}function q(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=m();if(e&&e.has(r))return e.get(r);var n={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var u=t?Object.getOwnPropertyDescriptor(r,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=r[i]}return n.default=r,e&&e.set(r,n),n}function b(n,i="euclidean",u=null,a=!1){const o=d(n=(0,r.convertToTensor)(n,"x","norm"),i,u);let f=o.shape;if(a){const r=(0,e.parseAxisParam)(u,n.shape);f=t.expandShapeToKeepDim(o.shape,r)}return(0,s.reshape)(o,f)}function d(r,e,t=null){if(0===r.rank)return(0,n.abs)(r);if(1!==r.rank&&null===t)return d((0,s.reshape)(r,[-1]),e,t);if(1===r.rank||"number"==typeof t||Array.isArray(t)&&1===t.length){if(1===e)return(0,c.sum)((0,n.abs)(r),t);if(e===1/0)return(0,i.max)((0,n.abs)(r),t);if(e===-1/0)return(0,u.min)((0,n.abs)(r),t);if("euclidean"===e||2===e)return(0,l.sqrt)((0,c.sum)((0,o.pow)((0,n.abs)(r),(0,f.scalar)(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&2===t.length){if(1===e)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[0]),t[1]-1);if(e===1/0)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if(e===-1/0)return(0,u.min)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if("fro"===e||"euclidean"===e)return(0,l.sqrt)((0,c.sum)((0,p.square)(r),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const v=(0,a.op)({norm_:b});exports.norm=v;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./abs":"LQUr","./axis_util":"uTbM","./max":"SjY8","./min":"z8cA","./operation":"rO1i","./pow":"FJnw","./reshape":"khVG","./scalar":"RBNv","./sqrt":"dGNr","./square":"rLyD","./sum":"YHNB"}],"tCsQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.movingAverage=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),t=p(require("../util")),n=require("./add"),o=require("./div"),i=require("./mul"),u=require("./operation"),s=require("./pow"),a=require("./scalar"),v=require("./sub");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(u,c,p,l,f=!0){const g=(0,r.convertToTensor)(u,"v","movingAverage"),d=(0,r.convertToTensor)(c,"x","movingAverage"),y=(0,r.convertToTensor)(p,"decay","movingAverage");(0,e.assertTypesMatch)(g,d),t.assert(t.arraysEqual(g.shape,d.shape),()=>"Shape mismatch in v and x");const b=(0,a.scalar)(1),q=(0,v.sub)(b,y);let m=(0,i.mul)((0,v.sub)(d,g),q);if(f){t.assert(null!=l,()=>"When using zeroDebias: true, step is required.");const e=(0,r.convertToTensor)(l,"step","movingAverage");m=(0,o.div)(m,(0,v.sub)(b,(0,s.pow)(y,e)))}return(0,n.add)(g,m)}const f=(0,u.op)({movingAverage_:l});exports.movingAverage=f;
},{"../tensor_util":"vUHI","../tensor_util_env":"x0Hg","../util":"UxaK","./add":"geuL","./div":"XyQ4","./mul":"WS4w","./operation":"rO1i","./pow":"FJnw","./scalar":"RBNv","./sub":"OFjl"}],"C9WF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation"),o=i(require("./scatter_nd_util"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function c(n,u,i){const c=(0,r.convertToTensor)(n,"indices","scatterND","int32"),s=(0,r.convertToTensor)(u,"updates","scatterND");o.validateInput(s,c,i);const a={indices:c,updates:s},p={shape:i};return e.ENGINE.runKernelFunc(e=>e.scatterND(c,s,i),a,null,t.ScatterNd,p)}const s=(0,n.op)({scatterND_:c});exports.scatterND=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./scatter_nd_util":"mei8"}],"nS7N":[function(require,module,exports) {
"use strict";function e(e,t,r,s){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+` but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+` but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(r.length!==o)throw new Error("outputShape has incorrect number of elements:,"+` ${r.length}, should be: ${o}.`);const n=t.size;if(0!==t.rank&&(1!==t.rank||n!==a))throw new Error("sparseValues has incorrect shape "+`${t.shape}, should be [] or [${a}]`);if(t.dtype!==s.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateInput=e;
},{}],"PmvU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=void 0;var e=require("../engine"),r=require("../kernel_names"),t=u(require("../ops/sparse_to_dense_util")),n=require("../tensor_util_env"),s=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var u=n?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(t,s,u):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}function a(s,o,u,a=0){const p=(0,n.convertToTensor)(s,"sparseIndices","sparseToDense","int32"),i=(0,n.convertToTensor)(o,"sparseValues","sparseToDense"),c=(0,n.convertToTensor)(a,"defaultValue","sparseToDense",i.dtype);t.validateInput(p,i,u,c);const l={sparseIndices:p,sparseValues:i,defaultValue:c},f={outputShape:u};return e.ENGINE.runKernelFunc(e=>e.sparseToDense(p,i,u,c),l,null,r.SparseToDense,f)}const p=(0,s.op)({sparseToDense_:a});exports.sparseToDense=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../ops/sparse_to_dense_util":"nS7N","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"o2ZD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherND=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t,o){const i=(0,n.convertToTensor)(o,"indices","gatherND","int32"),s=(0,n.convertToTensor)(t,"x","gatherND"),a={params:s,indices:i};return e.ENGINE.runKernelFunc(e=>e.gatherND(s,i),a,null,r.GatherNd)}const i=(0,t.op)({gatherND_:o});exports.gatherND=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"ozIj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNoiseShape=n;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=u?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function n(t,r){if(null==r)return t.shape.slice();if(e.arraysEqual(t.shape,r))return r;if(t.shape.length===r.length){const e=[];for(let n=0;n<t.shape.length;n++)null==r[n]&&null!=t.shape[n]?e.push(t.shape[n]):e.push(r[n]);return e}return r}
},{"../util":"UxaK"}],"MAgd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dropout=void 0;var e=require("../tensor"),r=require("../tensor_util_env"),t=l(require("../util")),o=require("./add"),n=require("./div"),u=require("./dropout_util"),i=require("./floor"),a=require("./mul"),s=require("./operation"),f=require("./random_uniform");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(t,n,u):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function c(s,p,l,c){const d=(0,r.convertToTensor)(s,"x","dropout");if(t.assert("float32"===d.dtype,()=>"x has to be a floating point tensor since it's going to be "+`scaled, but got a ${d.dtype} tensor instead.`),t.assert(p>=0&&p<1,()=>`rate must be a float in the range [0, 1), but got ${p}.`),0===p)return s instanceof e.Tensor?d.clone():d;const b=(0,u.getNoiseShape)(d,l),v=1-p,y=(0,n.div)((0,i.floor)((0,o.add)((0,f.randomUniform)(b,0,1,"float32",c),v)),v);return(0,a.mul)(d,y)}const d=(0,s.op)({dropout_:c});exports.dropout=d;
},{"../tensor":"Zqvm","../tensor_util_env":"x0Hg","../util":"UxaK","./add":"geuL","./div":"XyQ4","./dropout_util":"ozIj","./floor":"mwl0","./mul":"WS4w","./operation":"rO1i","./random_uniform":"YaAk"}],"Jt6I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enclosingPowerOfTwo=t,exports.cosineWindow=e;var o=require("./tensor1d");function t(o){return Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2))))}function e(t,e,r){const n=1-t%2,s=new Float32Array(t);for(let o=0;o<t;++o){const a=2*Math.PI*o/(t+n-1);s[o]=e-r*Math.cos(a)}return(0,o.tensor1d)(s,"float32")}
},{"./tensor1d":"R7Cm"}],"lVGj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inTopKAsync=void 0;var e=require("../tensor_util_env"),t=require("../util"),s=require("./tensor");async function r(r,n,o=1){const a=(0,e.convertToTensor)(r,"predictions","inTopK"),i=(0,e.convertToTensor)(n,"targets","inTopK");(0,t.assert)(a.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+`but got ${a.rank}`),(0,t.assert)(a.rank-1===i.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+`${a.rank} and targets rank ${i.rank}`),(0,t.assertShapesMatch)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const p=a.shape[a.shape.length-1];(0,t.assert)(o>0&&o<=p,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+`dimension (${p}), but got ${o}`);const h=await a.data(),c=await i.data(),[l,d]=[h.length/p,p],u=(0,t.getTypedArrayFromDType)("bool",l);for(let e=0;e<l;e++){const t=e*d,s=h.subarray(t,t+d),r=[];for(let e=0;e<s.length;e++)r.push({value:s[e],index:e});r.sort((e,t)=>t.value-e.value),u[e]=0;for(let n=0;n<o;n++)if(r[n].index===c[e]){u[e]=1;break}}return r!==a&&a.dispose(),n!==i&&i.dispose(),(0,s.tensor)(u,i.shape,"bool")}const n=r;exports.inTopKAsync=n;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor":"tCGm"}],"Y2RI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=p(require("../util")),n=p(require("./conv_util")),o=require("./operation"),a=require("./reshape");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function s(o,i,p,s,u,c="NHWC",l){let d=o;3===o.rank&&(d=(0,a.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let h=i;3===h.rank&&(h=(0,a.reshape)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),t.assert(4===d.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${d.shape}.`),t.assert(4===h.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${h.shape}.`),t.assert(4===p.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${p}.`);const f="NHWC"===c?d.shape[3]:d.shape[1],v="NHWC"===c?h.shape[3]:h.shape[1];t.assert(f===p[2],()=>`Error in conv2dDerFilter: depth of input ${f}) must `+`match input depth in filter (${p[2]}.`),t.assert(v===p[3],()=>`Error in conv2dDerFilter: depth of dy (${v}) must `+`match output depth for filter (${p[3]}).`),null!=l&&t.assert(t.isInt(u),()=>"Error in conv2dDerFilter: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${u}.`);const D={x:d,dy:h},b={strides:s,pad:u,dataFormat:c,dimRoundingMode:l,filterShape:p};return e.ENGINE.runKernelFunc(e=>{const r=n.convertConv2DDataFormat(c),t=n.computeConv2DInfo(d.shape,p,s,1,u,l,!1,r);return e.conv2dDerFilter(d,h,t)},D,null,r.Conv2DBackpropFilter,b)}const u=(0,o.op)({conv2DBackpropFilter_:s});exports.conv2DBackpropFilter=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"pXCJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFusedDyActivation=f,exports.getFusedBiasGradient=c,exports.applyActivation=d,exports.shouldFuse=void 0;var e=p(require("./broadcast_util")),r=require("./elu"),t=require("./mul"),u=require("./prelu"),n=require("./relu"),i=require("./relu6"),o=require("./reshape"),l=require("./step"),s=require("./sum");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=u?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function f(e,r,u){if(null==u||"linear"===u)return e;if("relu"===u)return(0,t.mul)(e,(0,l.step)(r));throw new Error(`Cannot compute gradient for fused activation ${u}.`)}function c(r,t){let u=t;const n=e.getReductionAxes(r.shape,t.shape);return n.length>0&&(u=(0,s.sum)(u,n)),(0,o.reshape)(u,r.shape)}function d(e,t,o){if("linear"===t)return e;if("relu"===t)return(0,n.relu)(e);if("elu"===t)return(0,r.elu)(e);if("relu6"===t)return(0,i.relu6)(e);if("prelu"===t)return(0,u.prelu)(e,o);throw new Error(`Unknown fused activation ${t}.`)}const h=(e,r)=>{return!(e>0)||"linear"===r};exports.shouldFuse=h;
},{"./broadcast_util":"nprq","./elu":"uIqF","./mul":"WS4w","./prelu":"IOvE","./relu":"Htix","./relu6":"bNXk","./reshape":"khVG","./step":"DQ8I","./sum":"YHNB"}],"Qg3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../../engine"),r=require("../../gradients"),t=require("../../kernel_names"),n=require("../../tensor_util"),o=require("../../tensor_util_env"),a=g(require("../../util")),i=require("../add"),s=g(require("../broadcast_util")),u=require("../conv2d"),d=require("../conv2d_backprop_filter"),p=require("../conv2d_backprop_input"),c=g(require("../conv_util")),l=require("../fused_util"),v=require("../operation"),f=require("../reshape");function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function b({x:v,filter:h,strides:g,pad:b,dataFormat:k="NHWC",dilations:m=[1,1],dimRoundingMode:y,bias:_,activation:q="linear",preluActivationWeights:E}){if(q=q||"linear",!1===(0,l.shouldFuse)(e.ENGINE.state.gradientDepth,q)){let e=(0,u.conv2d)(v,h,g,b,k,m,y);return null!=_&&(e=(0,i.add)(e,_)),(0,l.applyActivation)(e,q,E)}const F=(0,o.convertToTensor)(v,"x","conv2d"),D=(0,o.convertToTensor)(h,"filter","conv2d");let O=F,$=!1;3===F.rank&&($=!0,O=(0,f.reshape)(F,[1,F.shape[0],F.shape[1],F.shape[2]])),a.assert(4===O.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+`${O.rank}.`),a.assert(4===D.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+`${D.rank}.`),null!=y&&a.assert(a.isInt(b),()=>"Error in fused conv2d: pad must be an integer when using, "+`dimRoundingMode ${y} but got pad ${b}.`),a.assert(O.shape[3]===D.shape[2],()=>`Error in conv2d: depth of input (${O.shape[3]}) must match `+`input depth for filter ${D.shape[2]}.`),a.assert(c.eitherStridesOrDilationsAreOne(g,m),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${g} and dilations '${m}'`),a.assert("NHWC"===k,()=>`Error in conv2d: got dataFormat of ${k} but only NHWC is currently supported.`);const G=c.computeConv2DInfo(O.shape,D.shape,g,m,b,y);let N,T;null!=_&&(N=(0,o.convertToTensor)(_,"bias","fused conv2d"),[N]=(0,n.makeTypesMatch)(N,F),s.assertAndGetBroadcastShape(G.outShape,N.shape)),null!=E&&(T=(0,o.convertToTensor)(E,"prelu weights","fused conv2d"));const A=(e,r)=>{const[t,n,o,i]=r,s=(0,l.getFusedDyActivation)(e,o,q);a.assert(c.tupleValuesAreOne(m),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${m}'`);const u=[(0,p.conv2DBackpropInput)(n.shape,s,t,g,b),(0,d.conv2DBackpropFilter)(n,s,t.shape,g,b)];if(null!=i){const e=(0,l.getFusedBiasGradient)(i,s);u.push(e)}return u},C=e=>{return e.fusedConv2d({input:O,filter:D,convInfo:G,bias:N,activation:q,preluActivationWeights:T})},M={x:O,filter:D,bias:N,preluActivationWeights:T},W={strides:g,pad:b,dataFormat:k,dilations:m,dimRoundingMode:y,activation:q};if(null==_){return(0,r.customGrad)((r,n,o)=>{let a=e.ENGINE.runKernelFunc(C,M,null,t.FusedConv2D,W);return o([n,r,a]),$&&(a=(0,f.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:A}})(O,D)}return(0,r.customGrad)((r,n,o,a)=>{let i=e.ENGINE.runKernelFunc(C,M,null,t.FusedConv2D,W);return a([n,r,i,o]),$&&(i=(0,f.reshape)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:A}})(O,D,N)}const k=(0,v.op)({fusedConv2d_:b});exports.conv2d=k;
},{"../../engine":"tmUz","../../gradients":"FjdM","../../kernel_names":"r3vI","../../tensor_util":"vUHI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../broadcast_util":"nprq","../conv2d":"K8t2","../conv2d_backprop_filter":"Y2RI","../conv2d_backprop_input":"ufM1","../conv_util":"cqi6","../fused_util":"pXCJ","../operation":"rO1i","../reshape":"khVG"}],"NeJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=p(require("./conv_util")),n=require("./operation"),o=require("./reshape");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var p=n?Object.getOwnPropertyDescriptor(e,o):null;p&&(p.get||p.set)?Object.defineProperty(t,o,p):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function a(n,i,p,a,s,u=[1,1],c){let l=n;3===n.rank&&(l=(0,o.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let d=i;3===d.rank&&(d=(0,o.reshape)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const f={x:l,dy:d},v={strides:a,pad:s,dimRoundingMode:c,dilations:u,filterShape:p};return e.ENGINE.runKernelFunc(e=>{const r=t.computeConv2DInfo(n.shape,p,a,u,s,c,!0);return e.depthwiseConv2DDerFilter(l,d,r)},f,null,r.DepthwiseConv2dNativeBackpropFilter,v)}const s=(0,n.op)({depthwiseConv2dNativeBackpropFilter_:a});exports.depthwiseConv2dNativeBackpropFilter=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"xNAn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=void 0;var e=require("../engine"),t=require("../kernel_names"),r=i(require("./conv_util")),n=require("./operation"),p=require("./reshape");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if(Object.prototype.hasOwnProperty.call(e,p)){var i=n?Object.getOwnPropertyDescriptor(e,p):null;i&&(i.get||i.set)?Object.defineProperty(r,p,i):r[p]=e[p]}return r.default=e,t&&t.set(e,r),r}function u(n,o,i,u,a,s=[1,1],c){let d=o,f=!1;3===o.rank&&(f=!0,d=(0,p.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={dy:d,filter:i},v={strides:u,pad:a,dimRoundingMode:c,dilations:s,inputShape:n},h=e.ENGINE.runKernelFunc(e=>{const t=r.computeConv2DInfo(n,i.shape,u,s,a,c,!0);return e.depthwiseConv2DDerInput(d,i,t)},l,null,t.DepthwiseConv2dNativeBackpropInput,v);return f?(0,p.reshape)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const a=(0,n.op)({depthwiseConv2dNativeBackpropInput_:u});exports.depthwiseConv2dNativeBackpropInput=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"wbZR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../../engine"),t=require("../../gradients"),r=require("../../kernel_names"),n=require("../../tensor_util"),i=require("../../tensor_util_env"),s=w(require("../../util")),a=require("../add"),o=w(require("../broadcast_util")),u=w(require("../conv_util")),d=require("../depthwise_conv2d"),p=require("../depthwise_conv2d_native_backprop_filter"),l=require("../depthwise_conv2d_native_backprop_input"),h=require("../fused_util"),c=require("../operation"),v=require("../reshape");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function w(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function g({x:c,filter:f,strides:w,pad:g,dataFormat:b="NHWC",dilations:C=[1,1],dimRoundingMode:_,bias:m,activation:k="linear",preluActivationWeights:q}){if(!1===(0,h.shouldFuse)(e.ENGINE.state.gradientDepth,k)){let e=(0,d.depthwiseConv2d)(c,f,w,g,b,C,_);return null!=m&&(e=(0,a.add)(e,m)),(0,h.applyActivation)(e,k,q)}const y=(0,i.convertToTensor)(c,"x","depthwiseConv2d"),D=(0,i.convertToTensor)(f,"filter","depthwiseConv2d");let E=y,F=!1;3===y.rank&&(F=!0,E=(0,v.reshape)(y,[1,y.shape[0],y.shape[1],y.shape[2]])),s.assert(4===E.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+`rank ${E.rank}.`),s.assert(4===D.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+`but got rank ${D.rank}.`),s.assert(E.shape[3]===D.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+`(${E.shape[3]}) must match the inChannels dimension in `+`filter ${D.shape[2]}.`),null==C&&(C=[1,1]),s.assert(u.eitherStridesOrDilationsAreOne(w,C),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+`be 1. Got strides ${w} and dilations '${C}'`),null!=_&&s.assert(s.isInt(g),()=>"Error in fused depthwiseConv2d: pad must be an integer when "+`using dimRoundingMode ${_} but got pad ${g}.`);const O=u.computeConv2DInfo(E.shape,D.shape,w,C,g,_,!0);let G,N;null!=m&&(G=(0,i.convertToTensor)(m,"bias","fused conv2d"),[G]=(0,n.makeTypesMatch)(G,y),o.assertAndGetBroadcastShape(O.outShape,G.shape)),null!=q&&(N=(0,i.convertToTensor)(q,"prelu weights","fused depthwiseConv2d"));const T=(e,t)=>{s.assert(u.tupleValuesAreOne(C),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+`'${C}'`);const[r,n,i,a]=t,o=(0,h.getFusedDyActivation)(e,i,k),d=(0,l.depthwiseConv2dNativeBackpropInput)(n.shape,o,r,w,g,C,_),c=(0,p.depthwiseConv2dNativeBackpropFilter)(n,o,r.shape,w,g,C,_);if(null!=a){return[d,c,(0,h.getFusedBiasGradient)(G,o)]}return[d,c]},$=e=>{return e.fusedDepthwiseConv2D({input:E,filter:D,convInfo:O,bias:G,activation:k,preluActivationWeights:N})},A={x:E,filter:D,bias:G,preluActivationWeights:N},M={strides:w,pad:g,dataFormat:b,dilations:C,dimRoundingMode:_,activation:k};if(null==m){return(0,t.customGrad)((t,n,i)=>{let s=e.ENGINE.runKernelFunc($,A,null,r.FusedDepthwiseConv2D,M);return i([n,t,s]),F&&(s=(0,v.reshape)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:T}})(E,D)}return(0,t.customGrad)((t,n,i,s)=>{let a=e.ENGINE.runKernelFunc($,A,null,r.FusedDepthwiseConv2D,M);return s([n,t,a,i]),F&&(a=(0,v.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:T}})(E,D,G)}const b=(0,c.op)({fusedDepthwiseConv2d_:g});exports.depthwiseConv2d=b;
},{"../../engine":"tmUz","../../gradients":"FjdM","../../kernel_names":"r3vI","../../tensor_util":"vUHI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../broadcast_util":"nprq","../conv_util":"cqi6","../depthwise_conv2d":"hlJ3","../depthwise_conv2d_native_backprop_filter":"NeJN","../depthwise_conv2d_native_backprop_input":"xNAn","../fused_util":"pXCJ","../operation":"rO1i","../reshape":"khVG"}],"KnjI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../../engine"),r=require("../../gradients"),t=require("../../kernel_names"),a=require("../../tensor_util"),s=require("../../tensor_util_env"),n=d(require("../../util")),u=require("../add"),o=d(require("../broadcast_util")),i=require("../fused_util"),l=require("../mat_mul"),p=require("../operation"),c=require("../reshape");function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=a?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(t,s,n):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}function f({a:p,b:h,transposeA:d=!1,transposeB:f=!1,bias:m,activation:M="linear",preluActivationWeights:v}){if(!1===(0,i.shouldFuse)(e.ENGINE.state.gradientDepth,M)){let e=(0,l.matMul)(p,h,d,f);return null!=m&&(e=(0,u.add)(e,m)),(0,i.applyActivation)(e,M,v)}let k=(0,s.convertToTensor)(p,"a","fused matMul"),b=(0,s.convertToTensor)(h,"b","fused matMul");[k,b]=(0,a.makeTypesMatch)(k,b);const g=d?k.shape[k.rank-2]:k.shape[k.rank-1],y=f?b.shape[b.rank-1]:b.shape[b.rank-2],_=d?k.shape[k.rank-1]:k.shape[k.rank-2],q=f?b.shape[b.rank-2]:b.shape[b.rank-1],T=k.shape.slice(0,-2),$=b.shape.slice(0,-2),F=n.sizeFromShape(T),A=n.sizeFromShape($);n.assert(k.rank>=2&&b.rank>=2&&k.rank===b.rank,()=>"Error in fused matMul: inputs must have the same rank of at least "+`2, got ranks ${k.rank} and ${b.rank}.`),n.assert(n.arraysEqual(T,$),()=>`Error in fused matMul: outer dimensions (${T}) and (`+`${$}) of Tensors with shapes ${k.shape} and `+`${b.shape} must match.`),n.assert(g===y,()=>`Error in fused matMul: inner shapes (${g}) and (`+`${y}) of Tensors with shapes ${k.shape} and `+`${b.shape} and transposeA=${d}`+` and transposeB=${f} must match.`);const E=k.shape.slice(0,-2).concat([_,q]),O=d?(0,c.reshape)(k,[F,g,_]):(0,c.reshape)(k,[F,_,g]),j=f?(0,c.reshape)(b,[A,q,y]):(0,c.reshape)(b,[A,y,q]);let w,B;null!=m&&(w=(0,s.convertToTensor)(m,"bias","fused matMul"),[w]=(0,a.makeTypesMatch)(w,k),o.assertAndGetBroadcastShape(E,w.shape)),null!=v&&(B=(0,s.convertToTensor)(v,"prelu weights","fused matMul"));const G=(e,r)=>{const[t,a,s,n]=r,u=(0,i.getFusedDyActivation)((0,c.reshape)(e,s.shape),s,M);let o,p;if(d||f?!d&&f?(o=(0,l.matMul)(u,a,!1,!1),p=(0,l.matMul)(u,t,!0,!1)):d&&!f?(o=(0,l.matMul)(a,u,!1,!0),p=(0,l.matMul)(t,u,!1,!1)):(o=(0,l.matMul)(a,u,!0,!0),p=(0,l.matMul)(u,t,!0,!0)):(o=(0,l.matMul)(u,a,!1,!0),p=(0,l.matMul)(t,u,!0,!1)),null!=m){return[o,p,(0,i.getFusedBiasGradient)(n,u)]}return[o,p]},N=e=>{return e.fusedBatchMatMul({a:O,b:j,transposeA:d,transposeB:f,bias:w,activation:M,preluActivationWeights:B})},P={a:O,b:j,bias:w,preluActivationWeights:B},W={transposeA:d,transposeB:f,activation:M};if(null==m){return(0,r.customGrad)((r,a,s)=>{const n=e.ENGINE.runKernelFunc(N,P,null,t._FusedMatMul,W);return s([r,a,n]),{value:(0,c.reshape)(n,E),gradFunc:G}})(O,j)}return(0,r.customGrad)((r,a,s,n)=>{const u=e.ENGINE.runKernelFunc(N,P,null,t._FusedMatMul,W);return n([r,a,u,s]),{value:(0,c.reshape)(u,E),gradFunc:G}})(O,j,w)}const m=(0,p.op)({fusedMatMul_:f});exports.matMul=m;
},{"../../engine":"tmUz","../../gradients":"FjdM","../../kernel_names":"r3vI","../../tensor_util":"vUHI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../broadcast_util":"nprq","../fused_util":"pXCJ","../mat_mul":"A3yk","../operation":"rO1i","../reshape":"khVG"}],"iOEA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return e.conv2d}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return r.depthwiseConv2d}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return t.matMul}});var e=require("./fused/conv2d"),r=require("./fused/depthwise_conv2d"),t=require("./fused/mat_mul");
},{"./fused/conv2d":"Qg3X","./fused/depthwise_conv2d":"wbZR","./fused/mat_mul":"KnjI"}],"Gob6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hammingWindow=void 0;var e=require("../operation"),i=require("../signal_ops_util");function o(e){return(0,i.cosineWindow)(e,.54,.46)}const n=(0,e.op)({hammingWindow_:o});exports.hammingWindow=n;
},{"../operation":"rO1i","../signal_ops_util":"Jt6I"}],"tE3w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hannWindow=void 0;var e=require("../operation"),n=require("../signal_ops_util");function o(e){return(0,n.cosineWindow)(e,.5,.5)}const i=(0,e.op)({hannWindow_:o});exports.hannWindow=i;
},{"../operation":"rO1i","../signal_ops_util":"Jt6I"}],"jVcy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.frame=void 0;var e=require("../concat"),r=require("../fill"),s=require("../operation"),t=require("../reshape"),i=require("../slice"),o=require("../tensor2d");function c(s,c,n,u=!1,l=0){let a=0;const f=[];for(;a+c<=s.size;)f.push((0,i.slice)(s,a,c)),a+=n;if(u)for(;a<s.size;){const t=a+c-s.size,o=(0,e.concat)([(0,i.slice)(s,a,c-t),(0,r.fill)([t],l)]);f.push(o),a+=n}return 0===f.length?(0,o.tensor2d)([],[0,c]):(0,t.reshape)((0,e.concat)(f),[f.length,c])}const n=(0,s.op)({frame_:c});exports.frame=n;
},{"../concat":"gZir","../fill":"SqIp","../operation":"rO1i","../reshape":"khVG","../slice":"xcz4","../tensor2d":"Q66m"}],"XqFB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stft=void 0;var e=require("../concat"),r=require("../mul"),t=require("../operation"),o=require("../signal_ops_util"),i=require("../slice"),n=require("../spectral/rfft"),s=require("./frame"),u=require("./hann_window");function c(t,c,f,l,a=u.hannWindow){null==l&&(l=(0,o.enclosingPowerOfTwo)(c));const p=(0,s.frame)(t,c,f),q=(0,r.mul)(p,a(c)),_=[];for(let e=0;e<p.shape[0];e++)_.push((0,n.rfft)((0,i.slice)(q,[e,0],[1,c]),l));return(0,e.concat)(_)}const f=(0,t.op)({stft_:c});exports.stft=f;
},{"../concat":"gZir","../mul":"WS4w","../operation":"rO1i","../signal_ops_util":"Jt6I","../slice":"xcz4","../spectral/rfft":"G4qK","./frame":"jVcy","./hann_window":"tE3w"}],"bV6Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResize=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),n=i(require("../../util")),o=require("../operation");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function a(o,s,i,a,u,p){const c=(0,t.convertToTensor)(o,"image","cropAndResize"),l=(0,t.convertToTensor)(s,"boxes","cropAndResize","float32"),b=(0,t.convertToTensor)(i,"boxInd","cropAndResize","int32");u=u||"bilinear",p=p||0;const d=l.shape[0];n.assert(4===c.rank,()=>"Error in cropAndResize: image must be rank 4,"+`but got rank ${c.rank}.`),n.assert(2===l.rank&&4===l.shape[1],()=>`Error in cropAndResize: boxes must be have size [${d},4] `+`but had shape ${l.shape}.`),n.assert(1===b.rank&&b.shape[0]===d,()=>`Error in cropAndResize: boxInd must be have size [${d}] `+`but had shape ${l.shape}.`),n.assert(2===a.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+`length ${a.length}.`),n.assert(a[0]>=1&&a[1]>=1,()=>`cropSize must be atleast [1,1], but was ${a}`),n.assert("bilinear"===u||"nearest"===u,()=>`method must be bilinear or nearest, but was ${u}`);const f={image:c,boxes:l,boxInd:b},h={method:u,extrapolationValue:p,cropSize:a};return e.ENGINE.runKernelFunc(e=>e.cropAndResize(c,l,b,a,u,p),f,null,r.CropAndResize,h)}const u=(0,o.op)({cropAndResize_:a});exports.cropAndResize=u;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i"}],"d7Ff":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRight=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=u(require("../../util")),i=require("../operation");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function f(i){const o=(0,r.convertToTensor)(i,"image","flipLeftRight","float32");n.assert(4===o.rank,()=>"Error in flipLeftRight: image must be rank 4,"+`but got rank ${o.rank}.`);const u={image:o};return e.ENGINE.runKernel(t.FlipLeftRight,u,{})}const a=(0,i.op)({flipLeftRight_:f});exports.flipLeftRight=a;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i"}],"ltMM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffset=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=a(require("../../util")),o=require("../operation");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function f(o,i,a=0,f=.5){const u=(0,r.convertToTensor)(o,"image","rotateWithOffset","float32");n.assert(4===u.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+`but got rank ${u.rank}.`);const s={image:u},c={radians:i,fillValue:a,center:f};return e.ENGINE.runKernel(t.RotateWithOffset,s,c)}const u=(0,o.op)({rotateWithOffset_:f});exports.rotateWithOffset=u;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i"}],"toIx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppSanityCheck=s;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,r&&r.set(e,s),s}function s(t,r,s,n,a,o){null==n&&(n=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);const u=t.shape[0];return s=Math.min(s,u),e.assert(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),e.assert(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),e.assert(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),e.assert(1===r.rank,()=>"scores must be a 1D tensor"),e.assert(r.shape[0]===u,()=>`scores has incompatible shape with boxes. Expected ${u}, `+`but was ${r.shape[0]}`),e.assert(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:s,iouThreshold:n,scoreThreshold:a,softNmsSigma:o}}
},{"../util":"UxaK"}],"cbMx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppression=void 0;var e=require("../../engine"),o=require("../../kernel_names"),n=require("../../tensor_util_env"),r=require("../nonmax_util"),s=require("../operation");function u(s,u,i,p=.5,t=Number.NEGATIVE_INFINITY){const a=(0,n.convertToTensor)(s,"boxes","nonMaxSuppression"),x=(0,n.convertToTensor)(u,"scores","nonMaxSuppression"),c=(0,r.nonMaxSuppSanityCheck)(a,x,i,p,t);i=c.maxOutputSize,p=c.iouThreshold,t=c.scoreThreshold;const l={maxOutputSize:i,iouThreshold:p,scoreThreshold:t};return e.ENGINE.runKernelFunc(e=>e.nonMaxSuppression(a,x,i,p,t),{boxes:a,scores:x},null,o.NonMaxSuppressionV3,l)}const i=(0,s.op)({nonMaxSuppression_:u});exports.nonMaxSuppression=i;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx","../operation":"rO1i"}],"AUuE":[function(require,module,exports) {
"use strict";function e(e,n,r){const o=t(e,n,r),c=o<0?-(o+1):o;e.splice(c,0,n)}function t(e,t,o){return r(e,t,o||n)}function n(e,t){return e>t?1:e<t?-1:0}function r(e,t,n){let r=0,o=e.length,c=0,s=!1;for(;r<o;){const u=n(t,e[c=r+(o-r>>>1)]);u>0?r=c+1:(o=c,s=!u)}return s?r:-r-1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryInsert=e,exports.binarySearch=t;
},{}],"YE1i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3Impl=t,exports.nonMaxSuppressionV4Impl=s,exports.nonMaxSuppressionV5Impl=o;var e=require("../ops/scalar"),n=require("../ops/tensor1d"),r=require("./array_util");function t(e,n,r,t,s){return a(e,n,r,t,s,0).selectedIndices}function s(e,n,r,t,s,o){return a(e,n,r,t,s,0,!1,o,!0)}function o(e,n,r,t,s,o){return a(e,n,r,t,s,o,!0)}function a(t,s,o,a,p,x,h=!1,l=!1,M=!1){const d=[];for(let e=0;e<s.length;e++)s[e]>p&&d.push({score:s[e],boxIndex:e,suppressBeginIndex:0});d.sort(u);const f=x>0?-.5/x:0,m=[],I=[];for(;m.length<o&&d.length>0;){const e=d.pop(),{score:n,boxIndex:s,suppressBeginIndex:o}=e;if(n<p)break;let x=!1;for(let r=m.length-1;r>=o;--r){const n=c(t,s,m[r]);if(n>=a){x=!0;break}if(e.score=e.score*i(a,f,n),e.score<=p)break}e.suppressBeginIndex=m.length,x||(e.score===n?(m.push(s),I.push(e.score)):e.score>p&&(0,r.binaryInsert)(d,e,u))}const b=m.length,g=o-b;l&&g>0&&(m.push(...new Array(g).fill(0)),I.push(...new Array(g).fill(0)));const y={selectedIndices:(0,n.tensor1d)(m,"int32")};return h&&(y.selectedScores=(0,n.tensor1d)(I,"float32")),M&&(y.validOutputs=(0,e.scalar)(b,"int32")),y}function c(e,n,r){const t=e.subarray(4*n,4*n+4),s=e.subarray(4*r,4*r+4),o=Math.min(t[0],t[2]),a=Math.min(t[1],t[3]),c=Math.max(t[0],t[2]),i=Math.max(t[1],t[3]),u=Math.min(s[0],s[2]),p=Math.min(s[1],s[3]),x=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),l=(c-o)*(i-a),M=(x-u)*(h-p);if(l<=0||M<=0)return 0;const d=Math.max(o,u),f=Math.max(a,p),m=Math.min(c,x),I=Math.min(i,h),b=Math.max(m-d,0)*Math.max(I-f,0);return b/(l+M-b)}function i(e,n,r){const t=Math.exp(n*r*r);return r<=e?t:0}function u(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}
},{"../ops/scalar":"RBNv","../ops/tensor1d":"R7Cm","./array_util":"AUuE"}],"Hduk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),n=require("../../tensor_util_env"),s=require("../nonmax_util");async function o(o,r,i,p=.5,t=Number.NEGATIVE_INFINITY){const a=(0,n.convertToTensor)(o,"boxes","nonMaxSuppressionAsync"),u=(0,n.convertToTensor)(r,"scores","nonMaxSuppressionAsync"),c=(0,s.nonMaxSuppSanityCheck)(a,u,i,p,t);i=c.maxOutputSize,p=c.iouThreshold,t=c.scoreThreshold;const x=await Promise.all([a.data(),u.data()]),d=x[0],l=x[1],_=(0,e.nonMaxSuppressionV3Impl)(d,l,i,p,t);return a!==o&&a.dispose(),u!==r&&u.dispose(),_}const r=o;exports.nonMaxSuppressionAsync=r;
},{"../../backends/non_max_suppression_impl":"YE1i","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx"}],"p5vV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScore=void 0;var e=require("../../engine"),o=require("../../kernel_names"),r=require("../../tensor_util_env"),s=require("../nonmax_util"),n=require("../operation");function i(n,i,t,u=.5,p=Number.NEGATIVE_INFINITY,c=0){const a=(0,r.convertToTensor)(n,"boxes","nonMaxSuppression"),S=(0,r.convertToTensor)(i,"scores","nonMaxSuppression"),x=(0,s.nonMaxSuppSanityCheck)(a,S,t,u,p,c),h={boxes:a,scores:S},l={maxOutputSize:t=x.maxOutputSize,iouThreshold:u=x.iouThreshold,scoreThreshold:p=x.scoreThreshold,softNmsSigma:c=x.softNmsSigma},d=e.ENGINE.runKernel(o.NonMaxSuppressionV5,h,l);return{selectedIndices:d[0],selectedScores:d[1]}}const t=(0,n.op)({nonMaxSuppressionWithScore_:i});exports.nonMaxSuppressionWithScore=t;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx","../operation":"rO1i"}],"UxN0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScoreAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),s=require("../../tensor_util_env"),o=require("../nonmax_util");async function n(n,r,i,t=.5,p=Number.NEGATIVE_INFINITY,a=0){const u=(0,s.convertToTensor)(n,"boxes","nonMaxSuppressionAsync"),c=(0,s.convertToTensor)(r,"scores","nonMaxSuppressionAsync"),x=(0,o.nonMaxSuppSanityCheck)(u,c,i,t,p,a);i=x.maxOutputSize,t=x.iouThreshold,p=x.scoreThreshold,a=x.softNmsSigma;const S=await Promise.all([u.data(),c.data()]),d=S[0],l=S[1],m=(0,e.nonMaxSuppressionV5Impl)(d,l,i,t,p,a);return u!==n&&u.dispose(),c!==r&&c.dispose(),m}const r=n;exports.nonMaxSuppressionWithScoreAsync=r;
},{"../../backends/non_max_suppression_impl":"YE1i","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx"}],"MUoJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPadded=void 0;var e=require("../../engine"),o=require("../../kernel_names"),n=require("../../tensor_util_env"),r=require("../nonmax_util"),s=require("../operation");function u(s,u,i,t=.5,p=Number.NEGATIVE_INFINITY,a=!1){const d=(0,n.convertToTensor)(s,"boxes","nonMaxSuppression"),x=(0,n.convertToTensor)(u,"scores","nonMaxSuppression"),c=(0,r.nonMaxSuppSanityCheck)(d,x,i,t,p,null),l={boxes:d,scores:x},S={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:a},T=e.ENGINE.runKernel(o.NonMaxSuppressionV4,l,S);return{selectedIndices:T[0],validOutputs:T[1]}}const i=(0,s.op)({nonMaxSuppressionPadded_:u});exports.nonMaxSuppressionPadded=i;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx","../operation":"rO1i"}],"BoIX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPaddedAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),n=require("../../tensor_util_env"),s=require("../nonmax_util");async function o(o,r,a,i=.5,p=Number.NEGATIVE_INFINITY,t=!1){const u=(0,n.convertToTensor)(o,"boxes","nonMaxSuppressionAsync"),c=(0,n.convertToTensor)(r,"scores","nonMaxSuppressionAsync"),d=(0,s.nonMaxSuppSanityCheck)(u,c,a,i,p,null),x=d.maxOutputSize,l=d.iouThreshold,_=d.scoreThreshold,[S,T]=await Promise.all([u.data(),c.data()]),m=(0,e.nonMaxSuppressionV4Impl)(S,T,x,l,_,t);return u!==o&&u.dispose(),c!==r&&c.dispose(),m}const r=o;exports.nonMaxSuppressionPaddedAsync=r;
},{"../../backends/non_max_suppression_impl":"YE1i","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx"}],"eY9c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=void 0;var e=require("../../engine"),r=require("../../kernel_names"),n=require("../../tensor_util_env"),t=o(require("../../util")),i=require("../operation"),a=require("../reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var n={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=t?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function u(i,s,o=!1){const u=(0,n.convertToTensor)(i,"images","resizeBilinear");t.assert(3===u.rank||4===u.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+`rank ${u.rank}.`),t.assert(2===s.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+`${s}.`);let p=u,l=!1;3===u.rank&&(l=!0,p=(0,a.reshape)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));const[c,f]=s,h={images:p},g={alignCorners:o,size:s},b=e.ENGINE.runKernelFunc((e,r)=>(r([p]),e.resizeBilinear(p,c,f,o)),h,null,r.ResizeBilinear,g);return l?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const p=(0,i.op)({resizeBilinear_:u});exports.resizeBilinear=p;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i","../reshape":"khVG"}],"rzap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),n=o(require("../../util")),s=require("../operation"),a=require("../reshape");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(t,s,a):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}function u(s,i,o=!1){const u=(0,t.convertToTensor)(s,"images","resizeNearestNeighbor");n.assert(3===u.rank||4===u.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+`rank ${u.rank}.`),n.assert(2===i.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+`${i}.`),n.assert("float32"===u.dtype||"int32"===u.dtype,()=>"`images` must have `int32` or `float32` as dtype");let p=u,l=!1;3===u.rank&&(l=!0,p=(0,a.reshape)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));const[h,c]=i,f={images:p},g={alignCorners:o,size:i},b=e.ENGINE.runKernelFunc((e,r)=>(r([p]),e.resizeNearestNeighbor(p,h,c,o)),f,null,r.ResizeNearestNeighbor,g);return l?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const p=(0,s.op)({resizeNearestNeighbor_:u});exports.resizeNearestNeighbor=p;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i","../reshape":"khVG"}],"AwWZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bandPart=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),a=require("../greater_equal"),t=require("../less_equal"),n=require("../logical_and"),s=require("../operation"),u=require("../range"),o=require("../reshape"),i=require("../scalar"),l=require("../stack"),b=require("../sub"),c=require("../unstack"),p=require("../where"),q=require("../zeros");function d(s,d,g){(0,r.assert)(d%1==0,()=>`bandPart(): numLower must be an integer, got ${d}.`),(0,r.assert)(g%1==0,()=>`bandPart(): numUpper must be an integer, got ${g}.`);const h=(0,e.convertToTensor)(s,"a","bandPart");(0,r.assert)(h.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${h.rank}.`);const m=h.shape,[P,w]=h.shape.slice(-2);if(!(d<=P))throw new Error(`bandPart(): numLower (${d})`+` must not be greater than the number of rows (${P}).`);if(!(g<=w))throw new Error(`bandPart(): numUpper (${g})`+` must not be greater than the number of columns (${w}).`);d<0&&(d=P),g<0&&(g=w);const _=(0,o.reshape)((0,u.range)(0,P,1,"int32"),[-1,1]),k=(0,u.range)(0,w,1,"int32"),$=(0,b.sub)(_,k),f=(0,n.logicalAnd)((0,t.lessEqual)($,(0,i.scalar)(+d,"int32")),(0,a.greaterEqual)($,(0,i.scalar)(-g,"int32"))),v=(0,q.zeros)([P,w],h.dtype);return(0,o.reshape)((0,l.stack)((0,c.unstack)((0,o.reshape)(h,[-1,P,w])).map(e=>(0,p.where)(f,e,v))),m)}const g=(0,s.op)({bandPart_:d});exports.bandPart=g;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../greater_equal":"wG0H","../less_equal":"NxL8","../logical_and":"ntJL","../operation":"rO1i","../range":"WweN","../reshape":"khVG","../scalar":"RBNv","../stack":"GHVB","../sub":"OFjl","../unstack":"JyML","../where":"AEtV","../zeros":"MNgB"}],"ooKU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gramSchmidt=void 0;var e=require("../../engine"),r=require("../../util"),t=require("../div"),s=require("../mul"),i=require("../norm"),u=require("../operation"),n=require("../split"),o=require("../squeeze"),l=require("../stack"),m=require("../sub"),a=require("../sum");function c(u){let c;if(Array.isArray(u)){c=!1,(0,r.assert)(null!=u&&u.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const e=u[0].shape[0];for(let t=1;t<u.length;++t)(0,r.assert)(u[t].shape[0]===e,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+`(${u[t].shape[0]} vs. ${e})`)}else c=!0,u=(0,n.split)(u,u.shape[0],0).map(e=>(0,o.squeeze)(e,[0]));(0,r.assert)(u.length<=u[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${u.length}) exceeds `+`number of dimensions (${u[0].shape[0]}).`);const h=[],p=u;for(let r=0;r<u.length;++r)h.push(e.ENGINE.tidy(()=>{let e=p[r];if(r>0)for(let t=0;t<r;++t){const r=(0,s.mul)((0,a.sum)((0,s.mul)(h[t],e)),h[t]);e=(0,m.sub)(e,r)}return(0,t.div)(e,(0,i.norm)(e,"euclidean"))}));return c?(0,l.stack)(h,0):h}const h=(0,u.op)({gramSchmidt_:c});exports.gramSchmidt=h;
},{"../../engine":"tmUz","../../util":"UxaK","../div":"XyQ4","../mul":"WS4w","../norm":"Hzs7","../operation":"rO1i","../split":"L2gY","../squeeze":"N7Os","../stack":"GHVB","../sub":"OFjl","../sum":"YHNB"}],"DUW0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qr=void 0;var e=require("../../engine"),r=require("../../globals"),s=require("../../util"),t=require("../clone"),u=require("../concat"),a=require("../div"),n=require("../eye"),i=require("../greater"),o=require("../mat_mul"),c=require("../mul"),l=require("../neg"),p=require("../norm"),h=require("../operation"),q=require("../reshape"),m=require("../slice"),d=require("../stack"),g=require("../sub"),b=require("../tensor2d"),k=require("../transpose"),M=require("../unstack"),f=require("../where");function v(e,r=!1){if((0,s.assert)(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return y(e,r);{const s=e.shape.slice(0,e.shape.length-2).reduce((e,r)=>e*r),t=(0,M.unstack)((0,q.reshape)(e,[s,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),u=[],a=[];return t.forEach(e=>{const[s,t]=y(e,r);u.push(s),a.push(t)}),[(0,q.reshape)((0,d.stack)(u,0),e.shape),(0,q.reshape)((0,d.stack)(a,0),e.shape)]}}function y(h,q=!1){return e.ENGINE.tidy(()=>{(0,s.assert)(2===h.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${h.shape.length}D Tensor.`);const d=h.shape[0],M=h.shape[1];let v=(0,n.eye)(d),y=(0,t.clone)(h);const E=(0,b.tensor2d)([[1]],[1,1]);let N=(0,t.clone)(E);const _=d>=M?M:d;for(let s=0;s<_;++s){const n=y,h=N,q=v;[N,y,v]=e.ENGINE.tidy(()=>{const e=(0,m.slice)(y,[s,s],[d-s,1]),r=(0,p.norm)(e),n=(0,m.slice)(y,[s,s],[1,1]),h=(0,f.where)((0,i.greater)(n,0),(0,b.tensor2d)([[-1]]),(0,b.tensor2d)([[1]])),q=(0,g.sub)(n,(0,c.mul)(h,r)),_=(0,a.div)(e,q);N=1===_.shape[0]?(0,t.clone)(E):(0,u.concat)([E,(0,m.slice)(_,[1,0],[_.shape[0]-1,_.shape[1]])],0);const x=(0,l.neg)((0,a.div)((0,o.matMul)(h,q),r)),w=(0,m.slice)(y,[s,0],[d-s,M]),D=(0,c.mul)(x,N),G=(0,k.transpose)(N);if(0===s)y=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));else{const e=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));y=(0,u.concat)([(0,m.slice)(y,[0,0],[s,M]),e],0)}const I=(0,k.transpose)(D),T=(0,m.slice)(v,[0,s],[d,v.shape[1]-s]);if(0===s)v=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));else{const e=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));v=(0,u.concat)([(0,m.slice)(v,[0,0],[d,s]),e],1)}return[N,y,v]}),(0,r.dispose)([n,h,q])}return!q&&d>M&&(v=(0,m.slice)(v,[0,0],[d,M]),y=(0,m.slice)(y,[0,0],[M,M])),[v,y]})}const E=(0,h.op)({qr_:v});exports.qr=E;
},{"../../engine":"tmUz","../../globals":"UkUu","../../util":"UxaK","../clone":"HHuR","../concat":"gZir","../div":"XyQ4","../eye":"kWCc","../greater":"i1I6","../mat_mul":"A3yk","../mul":"WS4w","../neg":"wgz6","../norm":"Hzs7","../operation":"rO1i","../reshape":"khVG","../slice":"xcz4","../stack":"GHVB","../sub":"OFjl","../tensor2d":"Q66m","../transpose":"yiEV","../unstack":"JyML","../where":"AEtV"}],"AFm5":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reduction=void 0,exports.Reduction=e,function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(e||(exports.Reduction=e={}));
},{}],"ZYcU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeWeightedLoss=void 0;var e=require("../../tensor_util_env"),r=require("../cast"),s=require("../div"),u=require("../loss_ops_utils"),o=require("../mean"),t=require("../mul"),i=require("../not_equal"),n=require("../ones"),c=require("../operation"),l=require("../scalar"),a=require("../sum");function d(c,d,m=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const _=(0,e.convertToTensor)(c,"losses","computeWeightedLoss");let p=null;null!=d&&(p=(0,e.convertToTensor)(d,"weights","computeWeightedLoss"));const q=null==p?_:(0,t.mul)(_,p);if(m===u.Reduction.NONE)return q;if(m===u.Reduction.SUM)return(0,a.sum)(q);if(m===u.Reduction.MEAN){if(null==p)return(0,o.mean)(q);{const e=_.size/p.size,r=(0,s.div)((0,a.sum)(q),(0,a.sum)(p));return e>1?(0,s.div)(r,(0,l.scalar)(e)):r}}if(m===u.Reduction.SUM_BY_NONZERO_WEIGHTS){if(null==p)return(0,s.div)((0,a.sum)(q),(0,l.scalar)(_.size));{const e=(0,t.mul)(p,(0,n.ones)(_.shape)),u=(0,r.cast)((0,a.sum)((0,i.notEqual)(e,(0,l.scalar)(0))),"float32");return(0,s.div)((0,a.sum)(q),u)}}throw Error(`Unknown reduction: ${m}`)}const m=(0,c.op)({computeWeightedLoss_:d});exports.computeWeightedLoss=m;
},{"../../tensor_util_env":"x0Hg","../cast":"owKL","../div":"XyQ4","../loss_ops_utils":"AFm5","../mean":"Yc5n","../mul":"WS4w","../not_equal":"RlXH","../ones":"eTx1","../operation":"rO1i","../scalar":"RBNv","../sum":"YHNB"}],"HvRC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absoluteDifference=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),o=require("../loss_ops_utils"),t=require("../operation"),i=require("../sub"),u=require("./compute_weighted_loss");function n(t,n,c,l=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const a=(0,e.convertToTensor)(t,"labels","absoluteDifference"),f=(0,e.convertToTensor)(n,"predictions","absoluteDifference");let b=null;null!=c&&(b=(0,e.convertToTensor)(c,"weights","absoluteDifference")),(0,r.assertShapesMatch)(a.shape,f.shape,"Error in absoluteDifference: ");const p=(0,s.abs)((0,i.sub)(a,f));return(0,u.computeWeightedLoss)(p,b,l)}const c=(0,t.op)({absoluteDifference_:n});exports.absoluteDifference=c;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../abs":"LQUr","../loss_ops_utils":"AFm5","../operation":"rO1i","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"eI5w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosineDistance=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),i=require("../operation"),t=require("../scalar"),n=require("../sub"),c=require("../sum"),u=require("./compute_weighted_loss");function a(i,a,l,p,_=r.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","cosineDistance"),d=(0,e.convertToTensor)(a,"predictions","cosineDistance");let h=null;null!=p&&(h=(0,e.convertToTensor)(p,"weights","cosineDistance")),(0,s.assertShapesMatch)(q.shape,d.shape,"Error in cosineDistance: ");const v=(0,t.scalar)(1),D=(0,n.sub)(v,(0,c.sum)((0,o.mul)(q,d),l,!0));return(0,u.computeWeightedLoss)(D,h,_)}const l=(0,i.op)({cosineDistance_:a});exports.cosineDistance=l;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../loss_ops_utils":"AFm5","../mul":"WS4w","../operation":"rO1i","../scalar":"RBNv","../sub":"OFjl","../sum":"YHNB","./compute_weighted_loss":"ZYcU"}],"ENpu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hingeLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),t=require("../operation"),i=require("../relu"),u=require("../scalar"),n=require("../sub"),l=require("./compute_weighted_loss");function c(t,c,a,h=r.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,e.convertToTensor)(t,"labels","hingeLoss");const _=(0,e.convertToTensor)(c,"predictions","hingeLoss");let g=null;null!=a&&(g=(0,e.convertToTensor)(a,"weights","hingeLoss")),(0,s.assertShapesMatch)(p.shape,_.shape,"Error in hingeLoss: ");const q=(0,u.scalar)(1);p=(0,n.sub)((0,o.mul)((0,u.scalar)(2),p),q);const L=(0,i.relu)((0,n.sub)(q,(0,o.mul)(p,_)));return(0,l.computeWeightedLoss)(L,g,h)}const a=(0,t.op)({hingeLoss_:c});exports.hingeLoss=a;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../loss_ops_utils":"AFm5","../mul":"WS4w","../operation":"rO1i","../relu":"Htix","../scalar":"RBNv","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"wY7G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.huberLoss=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),u=require("../add"),o=require("../loss_ops_utils"),i=require("../minimum"),t=require("../mul"),n=require("../operation"),a=require("../scalar"),l=require("../square"),c=require("../sub"),b=require("./compute_weighted_loss");function h(n,h,q,p=1,_=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(n,"labels","huberLoss"),m=(0,e.convertToTensor)(h,"predictions","huberLoss");let L=null;null!=q&&(L=(0,e.convertToTensor)(q,"weights","huberLoss")),(0,r.assertShapesMatch)(d.shape,m.shape,"Error in huberLoss: ");const v=(0,a.scalar)(p),T=(0,s.abs)((0,c.sub)(m,d)),g=(0,i.minimum)(T,v),x=(0,c.sub)(T,g),E=(0,u.add)((0,t.mul)((0,a.scalar)(.5),(0,l.square)(g)),(0,t.mul)(v,x));return(0,b.computeWeightedLoss)(E,L,_)}const q=(0,n.op)({huberLoss_:h});exports.huberLoss=q;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../abs":"LQUr","../add":"geuL","../loss_ops_utils":"AFm5","../minimum":"q3lt","../mul":"WS4w","../operation":"rO1i","../scalar":"RBNv","../square":"rLyD","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"P3Xp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),r=require("../log"),u=require("../loss_ops_utils"),l=require("../mul"),t=require("../neg"),i=require("../operation"),n=require("../scalar"),a=require("../sub"),c=require("./compute_weighted_loss");function g(i,g,d,p=1e-7,_=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","logLoss"),L=(0,e.convertToTensor)(g,"predictions","logLoss");let h=null;null!=d&&(h=(0,e.convertToTensor)(d,"weights","logLoss")),(0,s.assertShapesMatch)(q.shape,L.shape,"Error in logLoss: ");const v=(0,n.scalar)(1),T=(0,n.scalar)(p),b=(0,t.neg)((0,l.mul)(q,(0,r.log)((0,o.add)(L,T)))),m=(0,l.mul)((0,a.sub)(v,q),(0,r.log)((0,o.add)((0,a.sub)(v,L),T))),x=(0,a.sub)(b,m);return(0,c.computeWeightedLoss)(x,h,_)}const d=(0,i.op)({logLoss_:g});exports.logLoss=d;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../log":"UG1b","../loss_ops_utils":"AFm5","../mul":"WS4w","../neg":"wgz6","../operation":"rO1i","../scalar":"RBNv","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"WgEA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanSquaredError=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),o=require("../loss_ops_utils"),s=require("../operation"),n=require("../squared_difference"),t=require("./compute_weighted_loss");function u(s,u,a,i=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(s,"labels","meanSquaredError"),c=(0,e.convertToTensor)(u,"predictions","meanSquaredError");let q=null;null!=a&&(q=(0,e.convertToTensor)(a,"weights","meanSquaredError")),(0,r.assertShapesMatch)(d.shape,c.shape,"Error in meanSquaredError: ");const l=(0,n.squaredDifference)(d,c);return(0,t.computeWeightedLoss)(l,q,i)}const a=(0,s.op)({meanSquaredError_:u});exports.meanSquaredError=a;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../loss_ops_utils":"AFm5","../operation":"rO1i","../squared_difference":"YDjz","./compute_weighted_loss":"ZYcU"}],"FeHT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidCrossEntropy=void 0;var r=require("../../tensor_util_env"),s=require("../../util"),e=require("../abs"),o=require("../add"),i=require("../exp"),t=require("../log1p"),n=require("../loss_ops_utils"),u=require("../mul"),l=require("../neg"),a=require("../operation"),p=require("../relu"),c=require("../scalar"),d=require("../sub"),g=require("./compute_weighted_loss");function m(n,a){const c=(0,r.convertToTensor)(n,"labels","sigmoidCrossEntropyWithLogits"),g=(0,r.convertToTensor)(a,"logits","sigmoidCrossEntropyWithLogits");(0,s.assertShapesMatch)(c.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");const m=(0,p.relu)(g),h=(0,u.mul)(g,c),q=(0,t.log1p)((0,i.exp)((0,l.neg)((0,e.abs)(g))));return(0,o.add)((0,d.sub)(m,h),q)}function h(e,i,t,l=0,a=n.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,r.convertToTensor)(e,"multiClassLabels","sigmoidCrossEntropy");const h=(0,r.convertToTensor)(i,"logits","sigmoidCrossEntropy");let q=null;if(null!=t&&(q=(0,r.convertToTensor)(t,"weights","sigmoidCrossEntropy")),(0,s.assertShapesMatch)(p.shape,h.shape,"Error in sigmoidCrossEntropy: "),l>0){const r=(0,c.scalar)(l),s=(0,c.scalar)(1),e=(0,c.scalar)(.5);p=(0,o.add)((0,u.mul)(p,(0,d.sub)(s,r)),(0,u.mul)(e,r))}const E=m(p,h);return(0,g.computeWeightedLoss)(E,q,a)}const q=(0,a.op)({sigmoidCrossEntropy_:h});exports.sigmoidCrossEntropy=q;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../abs":"LQUr","../add":"geuL","../exp":"S24W","../log1p":"Tu9m","../loss_ops_utils":"AFm5","../mul":"WS4w","../neg":"wgz6","../operation":"rO1i","../relu":"Htix","../scalar":"RBNv","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"sTHL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxCrossEntropy=void 0;var e=require("../../gradients"),r=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),t=require("../axis_util"),a=require("../cast"),n=require("../div"),u=require("../exp"),i=require("../log_sum_exp"),l=require("../loss_ops_utils"),p=require("../mul"),c=require("../neg"),m=require("../operation"),d=require("../reshape"),q=require("../scalar"),x=require("../sub"),f=require("../sum"),h=require("./compute_weighted_loss");function _(r,s,o=-1){if(-1===o&&(o=s.rank-1),o!==s.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${s.rank} `+`and dim was ${o}`);return(0,e.customGrad)((e,r,s)=>{const n=(0,i.logSumExp)(r,[o],!0),l=(0,x.sub)((0,a.cast)(r,"float32"),n);s([e,l]);const m=(0,c.neg)((0,p.mul)(l,e));return{value:(0,f.sum)(m,[o]),gradFunc:(e,r)=>{const[s,n]=r,i=(0,t.expandShapeToKeepDim)(e.shape,[o]);return[(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,a.cast)(s,"float32"),(0,u.exp)(n))),(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,u.exp)(n),(0,a.cast)(s,"float32")))]}}})(r,s)}function g(e,t,a,u=0,i=l.Reduction.SUM_BY_NONZERO_WEIGHTS){let c=(0,r.convertToTensor)(e,"onehotLabels","softmaxCrossEntropy");const m=(0,r.convertToTensor)(t,"logits","softmaxCrossEntropy");let d=null;if(null!=a&&(d=(0,r.convertToTensor)(a,"weights","softmaxCrossEntropy")),(0,s.assertShapesMatch)(c.shape,m.shape,"Error in softmaxCrossEntropy: "),u>0){const e=(0,q.scalar)(u),r=(0,q.scalar)(1),s=(0,q.scalar)(c.shape[1]);c=(0,o.add)((0,p.mul)(c,(0,x.sub)(r,e)),(0,n.div)(e,s))}const f=_(c,m);return(0,h.computeWeightedLoss)(f,d,i)}const E=(0,m.op)({softmaxCrossEntropy_:g});exports.softmaxCrossEntropy=E;
},{"../../gradients":"FjdM","../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../axis_util":"uTbM","../cast":"owKL","../div":"XyQ4","../exp":"S24W","../log_sum_exp":"twrn","../loss_ops_utils":"AFm5","../mul":"WS4w","../neg":"wgz6","../operation":"rO1i","../reshape":"khVG","../scalar":"RBNv","../sub":"OFjl","../sum":"YHNB","./compute_weighted_loss":"ZYcU"}],"DHFH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={image:!0,linalg:!0,losses:!0,spectral:!0,signal:!0,abs:!0,acos:!0,acosh:!0,add:!0,addN:!0,all:!0,any:!0,argMax:!0,argMin:!0,asin:!0,asinh:!0,atan:!0,atan2:!0,atanh:!0,avgPool:!0,avgPool3d:!0,basicLSTMCell:!0,batchToSpaceND:!0,batchNorm:!0,batchNorm2d:!0,batchNorm3d:!0,batchNorm4d:!0,broadcastTo:!0,buffer:!0,cast:!0,ceil:!0,clipByValue:!0,clone:!0,complex:!0,concat:!0,concat1d:!0,concat2d:!0,concat3d:!0,concat4d:!0,conv1d:!0,conv2d:!0,conv2dTranspose:!0,conv3d:!0,conv3dTranspose:!0,cos:!0,cosh:!0,cumsum:!0,depthToSpace:!0,depthwiseConv2d:!0,diag:!0,dilation2d:!0,div:!0,divNoNan:!0,dot:!0,elu:!0,equal:!0,erf:!0,exp:!0,expandDims:!0,expm1:!0,eye:!0,fill:!0,floor:!0,floorDiv:!0,gather:!0,greater:!0,greaterEqual:!0,imag:!0,isFinite:!0,isInf:!0,isNaN:!0,leakyRelu:!0,less:!0,lessEqual:!0,linspace:!0,localResponseNormalization:!0,log:!0,log1p:!0,logSigmoid:!0,logSoftmax:!0,logSumExp:!0,logicalAnd:!0,logicalNot:!0,logicalOr:!0,logicalXor:!0,matMul:!0,max:!0,maxPool:!0,maxPool3d:!0,maxPoolWithArgmax:!0,maximum:!0,mean:!0,min:!0,minimum:!0,mirrorPad:!0,mod:!0,moments:!0,mul:!0,multiRNNCell:!0,multinomial:!0,neg:!0,notEqual:!0,oneHot:!0,ones:!0,onesLike:!0,outerProduct:!0,pad:!0,pad1d:!0,pad2d:!0,pad3d:!0,pad4d:!0,pool:!0,pow:!0,prelu:!0,print:!0,prod:!0,rand:!0,randomGamma:!0,randomNormal:!0,randomUniform:!0,range:!0,real:!0,reciprocal:!0,relu:!0,relu6:!0,reshape:!0,reverse:!0,reverse1d:!0,reverse2d:!0,reverse3d:!0,reverse4d:!0,round:!0,rsqrt:!0,scalar:!0,selu:!0,separableConv2d:!0,setdiff1dAsync:!0,sigmoid:!0,sign:!0,sin:!0,sinh:!0,slice:!0,slice1d:!0,slice2d:!0,slice3d:!0,slice4d:!0,softmax:!0,softplus:!0,spaceToBatchND:!0,fft:!0,ifft:!0,irfft:!0,rfft:!0,split:!0,sqrt:!0,square:!0,squaredDifference:!0,squeeze:!0,stack:!0,step:!0,stridedSlice:!0,sub:!0,sum:!0,tan:!0,tanh:!0,tensor:!0,tensor1d:!0,tensor2d:!0,tensor3d:!0,tensor4d:!0,tensor5d:!0,tensor6d:!0,tile:!0,topk:!0,truncatedNormal:!0,unique:!0,unsortedSegmentSum:!0,unstack:!0,variable:!0,where:!0,whereAsync:!0,zeros:!0,zerosLike:!0,op:!0,OP_SCOPE_SUFFIX:!0,fused:!0};Object.defineProperty(exports,"abs",{enumerable:!0,get:function(){return r.abs}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return t.acos}}),Object.defineProperty(exports,"acosh",{enumerable:!0,get:function(){return n.acosh}}),Object.defineProperty(exports,"add",{enumerable:!0,get:function(){return o.add}}),Object.defineProperty(exports,"addN",{enumerable:!0,get:function(){return u.addN}}),Object.defineProperty(exports,"all",{enumerable:!0,get:function(){return i.all}}),Object.defineProperty(exports,"any",{enumerable:!0,get:function(){return a.any}}),Object.defineProperty(exports,"argMax",{enumerable:!0,get:function(){return s.argMax}}),Object.defineProperty(exports,"argMin",{enumerable:!0,get:function(){return c.argMin}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return p.asin}}),Object.defineProperty(exports,"asinh",{enumerable:!0,get:function(){return l.asinh}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return f.atan}}),Object.defineProperty(exports,"atan2",{enumerable:!0,get:function(){return d.atan2}}),Object.defineProperty(exports,"atanh",{enumerable:!0,get:function(){return b.atanh}}),Object.defineProperty(exports,"avgPool",{enumerable:!0,get:function(){return m.avgPool}}),Object.defineProperty(exports,"avgPool3d",{enumerable:!0,get:function(){return g.avgPool3d}}),Object.defineProperty(exports,"basicLSTMCell",{enumerable:!0,get:function(){return x.basicLSTMCell}}),Object.defineProperty(exports,"batchToSpaceND",{enumerable:!0,get:function(){return y.batchToSpaceND}}),Object.defineProperty(exports,"batchNorm",{enumerable:!0,get:function(){return q.batchNorm}}),Object.defineProperty(exports,"batchNorm2d",{enumerable:!0,get:function(){return O.batchNorm2d}}),Object.defineProperty(exports,"batchNorm3d",{enumerable:!0,get:function(){return P.batchNorm3d}}),Object.defineProperty(exports,"batchNorm4d",{enumerable:!0,get:function(){return j.batchNorm4d}}),Object.defineProperty(exports,"broadcastTo",{enumerable:!0,get:function(){return _.broadcastTo}}),Object.defineProperty(exports,"buffer",{enumerable:!0,get:function(){return h.buffer}}),Object.defineProperty(exports,"cast",{enumerable:!0,get:function(){return v.cast}}),Object.defineProperty(exports,"ceil",{enumerable:!0,get:function(){return N.ceil}}),Object.defineProperty(exports,"clipByValue",{enumerable:!0,get:function(){return S.clipByValue}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return w.clone}}),Object.defineProperty(exports,"complex",{enumerable:!0,get:function(){return k.complex}}),Object.defineProperty(exports,"concat",{enumerable:!0,get:function(){return M.concat}}),Object.defineProperty(exports,"concat1d",{enumerable:!0,get:function(){return E.concat1d}}),Object.defineProperty(exports,"concat2d",{enumerable:!0,get:function(){return z.concat2d}}),Object.defineProperty(exports,"concat3d",{enumerable:!0,get:function(){return D.concat3d}}),Object.defineProperty(exports,"concat4d",{enumerable:!0,get:function(){return T.concat4d}}),Object.defineProperty(exports,"conv1d",{enumerable:!0,get:function(){return A.conv1d}}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return C.conv2d}}),Object.defineProperty(exports,"conv2dTranspose",{enumerable:!0,get:function(){return L.conv2dTranspose}}),Object.defineProperty(exports,"conv3d",{enumerable:!0,get:function(){return W.conv3d}}),Object.defineProperty(exports,"conv3dTranspose",{enumerable:!0,get:function(){return R.conv3dTranspose}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return F.cos}}),Object.defineProperty(exports,"cosh",{enumerable:!0,get:function(){return B.cosh}}),Object.defineProperty(exports,"cumsum",{enumerable:!0,get:function(){return I.cumsum}}),Object.defineProperty(exports,"depthToSpace",{enumerable:!0,get:function(){return U.depthToSpace}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return X.depthwiseConv2d}}),Object.defineProperty(exports,"diag",{enumerable:!0,get:function(){return G.diag}}),Object.defineProperty(exports,"dilation2d",{enumerable:!0,get:function(){return H.dilation2d}}),Object.defineProperty(exports,"div",{enumerable:!0,get:function(){return V.div}}),Object.defineProperty(exports,"divNoNan",{enumerable:!0,get:function(){return J.divNoNan}}),Object.defineProperty(exports,"dot",{enumerable:!0,get:function(){return K.dot}}),Object.defineProperty(exports,"elu",{enumerable:!0,get:function(){return Q.elu}}),Object.defineProperty(exports,"equal",{enumerable:!0,get:function(){return Y.equal}}),Object.defineProperty(exports,"erf",{enumerable:!0,get:function(){return Z.erf}}),Object.defineProperty(exports,"exp",{enumerable:!0,get:function(){return $.exp}}),Object.defineProperty(exports,"expandDims",{enumerable:!0,get:function(){return ee.expandDims}}),Object.defineProperty(exports,"expm1",{enumerable:!0,get:function(){return re.expm1}}),Object.defineProperty(exports,"eye",{enumerable:!0,get:function(){return te.eye}}),Object.defineProperty(exports,"fill",{enumerable:!0,get:function(){return ne.fill}}),Object.defineProperty(exports,"floor",{enumerable:!0,get:function(){return oe.floor}}),Object.defineProperty(exports,"floorDiv",{enumerable:!0,get:function(){return ue.floorDiv}}),Object.defineProperty(exports,"gather",{enumerable:!0,get:function(){return ie.gather}}),Object.defineProperty(exports,"greater",{enumerable:!0,get:function(){return ae.greater}}),Object.defineProperty(exports,"greaterEqual",{enumerable:!0,get:function(){return se.greaterEqual}}),Object.defineProperty(exports,"imag",{enumerable:!0,get:function(){return ce.imag}}),Object.defineProperty(exports,"isFinite",{enumerable:!0,get:function(){return pe.isFinite}}),Object.defineProperty(exports,"isInf",{enumerable:!0,get:function(){return le.isInf}}),Object.defineProperty(exports,"isNaN",{enumerable:!0,get:function(){return fe.isNaN}}),Object.defineProperty(exports,"leakyRelu",{enumerable:!0,get:function(){return de.leakyRelu}}),Object.defineProperty(exports,"less",{enumerable:!0,get:function(){return be.less}}),Object.defineProperty(exports,"lessEqual",{enumerable:!0,get:function(){return me.lessEqual}}),Object.defineProperty(exports,"linspace",{enumerable:!0,get:function(){return ge.linspace}}),Object.defineProperty(exports,"localResponseNormalization",{enumerable:!0,get:function(){return xe.localResponseNormalization}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return ye.log}}),Object.defineProperty(exports,"log1p",{enumerable:!0,get:function(){return qe.log1p}}),Object.defineProperty(exports,"logSigmoid",{enumerable:!0,get:function(){return Oe.logSigmoid}}),Object.defineProperty(exports,"logSoftmax",{enumerable:!0,get:function(){return Pe.logSoftmax}}),Object.defineProperty(exports,"logSumExp",{enumerable:!0,get:function(){return je.logSumExp}}),Object.defineProperty(exports,"logicalAnd",{enumerable:!0,get:function(){return _e.logicalAnd}}),Object.defineProperty(exports,"logicalNot",{enumerable:!0,get:function(){return he.logicalNot}}),Object.defineProperty(exports,"logicalOr",{enumerable:!0,get:function(){return ve.logicalOr}}),Object.defineProperty(exports,"logicalXor",{enumerable:!0,get:function(){return Ne.logicalXor}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return Se.matMul}}),Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return we.max}}),Object.defineProperty(exports,"maxPool",{enumerable:!0,get:function(){return ke.maxPool}}),Object.defineProperty(exports,"maxPool3d",{enumerable:!0,get:function(){return Me.maxPool3d}}),Object.defineProperty(exports,"maxPoolWithArgmax",{enumerable:!0,get:function(){return Ee.maxPoolWithArgmax}}),Object.defineProperty(exports,"maximum",{enumerable:!0,get:function(){return ze.maximum}}),Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return De.mean}}),Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return Te.min}}),Object.defineProperty(exports,"minimum",{enumerable:!0,get:function(){return Ae.minimum}}),Object.defineProperty(exports,"mirrorPad",{enumerable:!0,get:function(){return Ce.mirrorPad}}),Object.defineProperty(exports,"mod",{enumerable:!0,get:function(){return Le.mod}}),Object.defineProperty(exports,"moments",{enumerable:!0,get:function(){return We.moments}}),Object.defineProperty(exports,"mul",{enumerable:!0,get:function(){return Re.mul}}),Object.defineProperty(exports,"multiRNNCell",{enumerable:!0,get:function(){return Fe.multiRNNCell}}),Object.defineProperty(exports,"multinomial",{enumerable:!0,get:function(){return Be.multinomial}}),Object.defineProperty(exports,"neg",{enumerable:!0,get:function(){return Ie.neg}}),Object.defineProperty(exports,"notEqual",{enumerable:!0,get:function(){return Ue.notEqual}}),Object.defineProperty(exports,"oneHot",{enumerable:!0,get:function(){return Xe.oneHot}}),Object.defineProperty(exports,"ones",{enumerable:!0,get:function(){return Ge.ones}}),Object.defineProperty(exports,"onesLike",{enumerable:!0,get:function(){return He.onesLike}}),Object.defineProperty(exports,"outerProduct",{enumerable:!0,get:function(){return Ve.outerProduct}}),Object.defineProperty(exports,"pad",{enumerable:!0,get:function(){return Je.pad}}),Object.defineProperty(exports,"pad1d",{enumerable:!0,get:function(){return Ke.pad1d}}),Object.defineProperty(exports,"pad2d",{enumerable:!0,get:function(){return Qe.pad2d}}),Object.defineProperty(exports,"pad3d",{enumerable:!0,get:function(){return Ye.pad3d}}),Object.defineProperty(exports,"pad4d",{enumerable:!0,get:function(){return Ze.pad4d}}),Object.defineProperty(exports,"pool",{enumerable:!0,get:function(){return $e.pool}}),Object.defineProperty(exports,"pow",{enumerable:!0,get:function(){return er.pow}}),Object.defineProperty(exports,"prelu",{enumerable:!0,get:function(){return rr.prelu}}),Object.defineProperty(exports,"print",{enumerable:!0,get:function(){return tr.print}}),Object.defineProperty(exports,"prod",{enumerable:!0,get:function(){return nr.prod}}),Object.defineProperty(exports,"rand",{enumerable:!0,get:function(){return or.rand}}),Object.defineProperty(exports,"randomGamma",{enumerable:!0,get:function(){return ur.randomGamma}}),Object.defineProperty(exports,"randomNormal",{enumerable:!0,get:function(){return ir.randomNormal}}),Object.defineProperty(exports,"randomUniform",{enumerable:!0,get:function(){return ar.randomUniform}}),Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return sr.range}}),Object.defineProperty(exports,"real",{enumerable:!0,get:function(){return cr.real}}),Object.defineProperty(exports,"reciprocal",{enumerable:!0,get:function(){return pr.reciprocal}}),Object.defineProperty(exports,"relu",{enumerable:!0,get:function(){return lr.relu}}),Object.defineProperty(exports,"relu6",{enumerable:!0,get:function(){return fr.relu6}}),Object.defineProperty(exports,"reshape",{enumerable:!0,get:function(){return dr.reshape}}),Object.defineProperty(exports,"reverse",{enumerable:!0,get:function(){return br.reverse}}),Object.defineProperty(exports,"reverse1d",{enumerable:!0,get:function(){return mr.reverse1d}}),Object.defineProperty(exports,"reverse2d",{enumerable:!0,get:function(){return gr.reverse2d}}),Object.defineProperty(exports,"reverse3d",{enumerable:!0,get:function(){return xr.reverse3d}}),Object.defineProperty(exports,"reverse4d",{enumerable:!0,get:function(){return yr.reverse4d}}),Object.defineProperty(exports,"round",{enumerable:!0,get:function(){return qr.round}}),Object.defineProperty(exports,"rsqrt",{enumerable:!0,get:function(){return Or.rsqrt}}),Object.defineProperty(exports,"scalar",{enumerable:!0,get:function(){return Pr.scalar}}),Object.defineProperty(exports,"selu",{enumerable:!0,get:function(){return jr.selu}}),Object.defineProperty(exports,"separableConv2d",{enumerable:!0,get:function(){return _r.separableConv2d}}),Object.defineProperty(exports,"setdiff1dAsync",{enumerable:!0,get:function(){return hr.setdiff1dAsync}}),Object.defineProperty(exports,"sigmoid",{enumerable:!0,get:function(){return vr.sigmoid}}),Object.defineProperty(exports,"sign",{enumerable:!0,get:function(){return Nr.sign}}),Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return Sr.sin}}),Object.defineProperty(exports,"sinh",{enumerable:!0,get:function(){return wr.sinh}}),Object.defineProperty(exports,"slice",{enumerable:!0,get:function(){return kr.slice}}),Object.defineProperty(exports,"slice1d",{enumerable:!0,get:function(){return Mr.slice1d}}),Object.defineProperty(exports,"slice2d",{enumerable:!0,get:function(){return Er.slice2d}}),Object.defineProperty(exports,"slice3d",{enumerable:!0,get:function(){return zr.slice3d}}),Object.defineProperty(exports,"slice4d",{enumerable:!0,get:function(){return Dr.slice4d}}),Object.defineProperty(exports,"softmax",{enumerable:!0,get:function(){return Tr.softmax}}),Object.defineProperty(exports,"softplus",{enumerable:!0,get:function(){return Ar.softplus}}),Object.defineProperty(exports,"spaceToBatchND",{enumerable:!0,get:function(){return Cr.spaceToBatchND}}),Object.defineProperty(exports,"fft",{enumerable:!0,get:function(){return Lr.fft}}),Object.defineProperty(exports,"ifft",{enumerable:!0,get:function(){return Wr.ifft}}),Object.defineProperty(exports,"irfft",{enumerable:!0,get:function(){return Rr.irfft}}),Object.defineProperty(exports,"rfft",{enumerable:!0,get:function(){return Fr.rfft}}),Object.defineProperty(exports,"split",{enumerable:!0,get:function(){return Br.split}}),Object.defineProperty(exports,"sqrt",{enumerable:!0,get:function(){return Ir.sqrt}}),Object.defineProperty(exports,"square",{enumerable:!0,get:function(){return Ur.square}}),Object.defineProperty(exports,"squaredDifference",{enumerable:!0,get:function(){return Xr.squaredDifference}}),Object.defineProperty(exports,"squeeze",{enumerable:!0,get:function(){return Gr.squeeze}}),Object.defineProperty(exports,"stack",{enumerable:!0,get:function(){return Hr.stack}}),Object.defineProperty(exports,"step",{enumerable:!0,get:function(){return Vr.step}}),Object.defineProperty(exports,"stridedSlice",{enumerable:!0,get:function(){return Jr.stridedSlice}}),Object.defineProperty(exports,"sub",{enumerable:!0,get:function(){return Kr.sub}}),Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return Qr.sum}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return Yr.tan}}),Object.defineProperty(exports,"tanh",{enumerable:!0,get:function(){return Zr.tanh}}),Object.defineProperty(exports,"tensor",{enumerable:!0,get:function(){return $r.tensor}}),Object.defineProperty(exports,"tensor1d",{enumerable:!0,get:function(){return et.tensor1d}}),Object.defineProperty(exports,"tensor2d",{enumerable:!0,get:function(){return rt.tensor2d}}),Object.defineProperty(exports,"tensor3d",{enumerable:!0,get:function(){return tt.tensor3d}}),Object.defineProperty(exports,"tensor4d",{enumerable:!0,get:function(){return nt.tensor4d}}),Object.defineProperty(exports,"tensor5d",{enumerable:!0,get:function(){return ot.tensor5d}}),Object.defineProperty(exports,"tensor6d",{enumerable:!0,get:function(){return ut.tensor6d}}),Object.defineProperty(exports,"tile",{enumerable:!0,get:function(){return it.tile}}),Object.defineProperty(exports,"topk",{enumerable:!0,get:function(){return at.topk}}),Object.defineProperty(exports,"truncatedNormal",{enumerable:!0,get:function(){return st.truncatedNormal}}),Object.defineProperty(exports,"unique",{enumerable:!0,get:function(){return ct.unique}}),Object.defineProperty(exports,"unsortedSegmentSum",{enumerable:!0,get:function(){return pt.unsortedSegmentSum}}),Object.defineProperty(exports,"unstack",{enumerable:!0,get:function(){return lt.unstack}}),Object.defineProperty(exports,"variable",{enumerable:!0,get:function(){return ft.variable}}),Object.defineProperty(exports,"where",{enumerable:!0,get:function(){return dt.where}}),Object.defineProperty(exports,"whereAsync",{enumerable:!0,get:function(){return bt.whereAsync}}),Object.defineProperty(exports,"zeros",{enumerable:!0,get:function(){return mt.zeros}}),Object.defineProperty(exports,"zerosLike",{enumerable:!0,get:function(){return gt.zerosLike}}),Object.defineProperty(exports,"op",{enumerable:!0,get:function(){return kt.op}}),Object.defineProperty(exports,"OP_SCOPE_SUFFIX",{enumerable:!0,get:function(){return kt.OP_SCOPE_SUFFIX}}),exports.fused=exports.signal=exports.spectral=exports.losses=exports.linalg=exports.image=void 0;var r=require("./abs"),t=require("./acos"),n=require("./acosh"),o=require("./add"),u=require("./add_n"),i=require("./all"),a=require("./any"),s=require("./arg_max"),c=require("./arg_min"),p=require("./asin"),l=require("./asinh"),f=require("./atan"),d=require("./atan2"),b=require("./atanh"),m=require("./avg_pool"),g=require("./avg_pool_3d"),x=require("./basic_lstm_cell"),y=require("./batch_to_space_nd"),q=require("./batchnorm"),O=require("./batchnorm2d"),P=require("./batchnorm3d"),j=require("./batchnorm4d"),_=require("./broadcast_to"),h=require("./buffer"),v=require("./cast"),N=require("./ceil"),S=require("./clip_by_value"),w=require("./clone"),k=require("./complex"),M=require("./concat"),E=require("./concat_1d"),z=require("./concat_2d"),D=require("./concat_3d"),T=require("./concat_4d"),A=require("./conv1d"),C=require("./conv2d"),L=require("./conv2d_transpose"),W=require("./conv3d"),R=require("./conv3d_transpose"),F=require("./cos"),B=require("./cosh"),I=require("./cumsum"),U=require("./depth_to_space"),X=require("./depthwise_conv2d"),G=require("./diag"),H=require("./dilation2d"),V=require("./div"),J=require("./div_no_nan"),K=require("./dot"),Q=require("./elu"),Y=require("./equal"),Z=require("./erf"),$=require("./exp"),ee=require("./expand_dims"),re=require("./expm1"),te=require("./eye"),ne=require("./fill"),oe=require("./floor"),ue=require("./floorDiv"),ie=require("./gather"),ae=require("./greater"),se=require("./greater_equal"),ce=require("./imag"),pe=require("./is_finite"),le=require("./is_inf"),fe=require("./is_nan"),de=require("./leaky_relu"),be=require("./less"),me=require("./less_equal"),ge=require("./linspace"),xe=require("./local_response_normalization"),ye=require("./log"),qe=require("./log1p"),Oe=require("./log_sigmoid"),Pe=require("./log_softmax"),je=require("./log_sum_exp"),_e=require("./logical_and"),he=require("./logical_not"),ve=require("./logical_or"),Ne=require("./logical_xor"),Se=require("./mat_mul"),we=require("./max"),ke=require("./max_pool"),Me=require("./max_pool_3d"),Ee=require("./max_pool_with_argmax"),ze=require("./maximum"),De=require("./mean"),Te=require("./min"),Ae=require("./minimum"),Ce=require("./mirror_pad"),Le=require("./mod"),We=require("./moments"),Re=require("./mul"),Fe=require("./multi_rnn_cell"),Be=require("./multinomial"),Ie=require("./neg"),Ue=require("./not_equal"),Xe=require("./one_hot"),Ge=require("./ones"),He=require("./ones_like"),Ve=require("./outer_product"),Je=require("./pad"),Ke=require("./pad1d"),Qe=require("./pad2d"),Ye=require("./pad3d"),Ze=require("./pad4d"),$e=require("./pool"),er=require("./pow"),rr=require("./prelu"),tr=require("./print"),nr=require("./prod"),or=require("./rand"),ur=require("./random_gamma"),ir=require("./random_normal"),ar=require("./random_uniform"),sr=require("./range"),cr=require("./real"),pr=require("./reciprocal"),lr=require("./relu"),fr=require("./relu6"),dr=require("./reshape"),br=require("./reverse"),mr=require("./reverse_1d"),gr=require("./reverse_2d"),xr=require("./reverse_3d"),yr=require("./reverse_4d"),qr=require("./round"),Or=require("./rsqrt"),Pr=require("./scalar"),jr=require("./selu"),_r=require("./separable_conv2d"),hr=require("./setdiff1d_async"),vr=require("./sigmoid"),Nr=require("./sign"),Sr=require("./sin"),wr=require("./sinh"),kr=require("./slice"),Mr=require("./slice1d"),Er=require("./slice2d"),zr=require("./slice3d"),Dr=require("./slice4d"),Tr=require("./softmax"),Ar=require("./softplus"),Cr=require("./space_to_batch_nd"),Lr=require("./spectral/fft"),Wr=require("./spectral/ifft"),Rr=require("./spectral/irfft"),Fr=require("./spectral/rfft"),Br=require("./split"),Ir=require("./sqrt"),Ur=require("./square"),Xr=require("./squared_difference"),Gr=require("./squeeze"),Hr=require("./stack"),Vr=require("./step"),Jr=require("./strided_slice"),Kr=require("./sub"),Qr=require("./sum"),Yr=require("./tan"),Zr=require("./tanh"),$r=require("./tensor"),et=require("./tensor1d"),rt=require("./tensor2d"),tt=require("./tensor3d"),nt=require("./tensor4d"),ot=require("./tensor5d"),ut=require("./tensor6d"),it=require("./tile"),at=require("./topk"),st=require("./truncated_normal"),ct=require("./unique"),pt=require("./unsorted_segment_sum"),lt=require("./unstack"),ft=require("./variable"),dt=require("./where"),bt=require("./where_async"),mt=require("./zeros"),gt=require("./zeros_like"),xt=require("./boolean_mask");Object.keys(xt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return xt[r]}}))});var yt=require("./compare");Object.keys(yt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return yt[r]}}))});var qt=require("./binary_ops");Object.keys(qt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return qt[r]}}))});var Ot=require("./transpose");Object.keys(Ot).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Ot[r]}}))});var Pt=require("./norm");Object.keys(Pt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Pt[r]}}))});var jt=require("./moving_average");Object.keys(jt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return jt[r]}}))});var _t=require("./scatter_nd");Object.keys(_t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return _t[r]}}))});var ht=require("./sparse_to_dense");Object.keys(ht).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return ht[r]}}))});var vt=require("./gather_nd");Object.keys(vt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return vt[r]}}))});var Nt=require("./dropout");Object.keys(Nt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Nt[r]}}))});var St=require("./signal_ops_util");Object.keys(St).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return St[r]}}))});var wt=require("./in_top_k");Object.keys(wt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return wt[r]}}))});var kt=require("./operation"),Mt=un(require("./fused_ops"));exports.fused=Mt;var Et=require("./signal/hamming_window"),zt=require("./signal/hann_window"),Dt=require("./signal/frame"),Tt=require("./signal/stft"),At=require("./image/crop_and_resize"),Ct=require("./image/flip_left_right"),Lt=require("./image/rotate_with_offset"),Wt=require("./image/non_max_suppression"),Rt=require("./image/non_max_suppression_async"),Ft=require("./image/non_max_suppression_with_score"),Bt=require("./image/non_max_suppression_with_score_async"),It=require("./image/non_max_suppression_padded"),Ut=require("./image/non_max_suppression_padded_async"),Xt=require("./image/resize_bilinear"),Gt=require("./image/resize_nearest_neighbor"),Ht=require("./linalg/band_part"),Vt=require("./linalg/gram_schmidt"),Jt=require("./linalg/qr"),Kt=require("./losses/absolute_difference"),Qt=require("./losses/compute_weighted_loss"),Yt=require("./losses/cosine_distance"),Zt=require("./losses/hinge_loss"),$t=require("./losses/huber_loss"),en=require("./losses/log_loss"),rn=require("./losses/mean_squared_error"),tn=require("./losses/sigmoid_cross_entropy"),nn=require("./losses/softmax_cross_entropy");function on(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return on=function(){return e},e}function un(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=on();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const an={fft:Lr.fft,ifft:Wr.ifft,rfft:Fr.rfft,irfft:Rr.irfft};exports.spectral=an;const sn={hammingWindow:Et.hammingWindow,hannWindow:zt.hannWindow,frame:Dt.frame,stft:Tt.stft};exports.signal=sn;const cn={flipLeftRight:Ct.flipLeftRight,resizeNearestNeighbor:Gt.resizeNearestNeighbor,resizeBilinear:Xt.resizeBilinear,rotateWithOffset:Lt.rotateWithOffset,cropAndResize:At.cropAndResize,nonMaxSuppression:Wt.nonMaxSuppression,nonMaxSuppressionAsync:Rt.nonMaxSuppressionAsync,nonMaxSuppressionWithScore:Ft.nonMaxSuppressionWithScore,nonMaxSuppressionWithScoreAsync:Bt.nonMaxSuppressionWithScoreAsync,nonMaxSuppressionPadded:It.nonMaxSuppressionPadded,nonMaxSuppressionPaddedAsync:Ut.nonMaxSuppressionPaddedAsync};exports.image=cn;const pn={bandPart:Ht.bandPart,gramSchmidt:Vt.gramSchmidt,qr:Jt.qr};exports.linalg=pn;const ln={absoluteDifference:Kt.absoluteDifference,computeWeightedLoss:Qt.computeWeightedLoss,cosineDistance:Yt.cosineDistance,hingeLoss:Zt.hingeLoss,huberLoss:$t.huberLoss,logLoss:en.logLoss,meanSquaredError:rn.meanSquaredError,sigmoidCrossEntropy:tn.sigmoidCrossEntropy,softmaxCrossEntropy:nn.softmaxCrossEntropy};exports.losses=ln;
},{"./abs":"LQUr","./acos":"ILOc","./acosh":"NNxA","./add":"geuL","./add_n":"jrV1","./all":"kMEx","./any":"Fa98","./arg_max":"qu9n","./arg_min":"L4Ct","./asin":"YHV3","./asinh":"O9ii","./atan":"ZXMd","./atan2":"qQ7z","./atanh":"rIil","./avg_pool":"Pm39","./avg_pool_3d":"rD3s","./basic_lstm_cell":"z3ej","./batch_to_space_nd":"dRKG","./batchnorm":"H6um","./batchnorm2d":"Bfm6","./batchnorm3d":"GZN2","./batchnorm4d":"yd3x","./broadcast_to":"eQsv","./buffer":"SN3d","./cast":"owKL","./ceil":"LpmI","./clip_by_value":"qXRG","./clone":"HHuR","./complex":"BDDu","./concat":"gZir","./concat_1d":"Y9MR","./concat_2d":"lSwZ","./concat_3d":"B3HR","./concat_4d":"JLwy","./conv1d":"Dlln","./conv2d":"K8t2","./conv2d_transpose":"foig","./conv3d":"ReLt","./conv3d_transpose":"BnR4","./cos":"Ky4d","./cosh":"q60v","./cumsum":"MovR","./depth_to_space":"RcRb","./depthwise_conv2d":"hlJ3","./diag":"oFFT","./dilation2d":"JjSs","./div":"XyQ4","./div_no_nan":"Ztm0","./dot":"yedZ","./elu":"uIqF","./equal":"nLPx","./erf":"XhJs","./exp":"S24W","./expand_dims":"uPYU","./expm1":"e0GE","./eye":"kWCc","./fill":"SqIp","./floor":"mwl0","./floorDiv":"L6i4","./gather":"Quad","./greater":"i1I6","./greater_equal":"wG0H","./imag":"P5ES","./is_finite":"yOVm","./is_inf":"En43","./is_nan":"rCb4","./leaky_relu":"BMkp","./less":"PrnK","./less_equal":"NxL8","./linspace":"y9TR","./local_response_normalization":"AJX7","./log":"UG1b","./log1p":"Tu9m","./log_sigmoid":"gSaY","./log_softmax":"Q1Fm","./log_sum_exp":"twrn","./logical_and":"ntJL","./logical_not":"SOqM","./logical_or":"IQZP","./logical_xor":"PsE3","./mat_mul":"A3yk","./max":"SjY8","./max_pool":"RWms","./max_pool_3d":"y3Dx","./max_pool_with_argmax":"ZH85","./maximum":"nmNC","./mean":"Yc5n","./min":"z8cA","./minimum":"q3lt","./mirror_pad":"c1Zo","./mod":"oTGE","./moments":"X3OC","./mul":"WS4w","./multi_rnn_cell":"ePcS","./multinomial":"Pjd4","./neg":"wgz6","./not_equal":"RlXH","./one_hot":"mrOz","./ones":"eTx1","./ones_like":"XhV0","./outer_product":"BREf","./pad":"NuCu","./pad1d":"fyuv","./pad2d":"GX8c","./pad3d":"D1CP","./pad4d":"jp5S","./pool":"ilbP","./pow":"FJnw","./prelu":"IOvE","./print":"reh2","./prod":"ZlHR","./rand":"fqDI","./random_gamma":"i9p1","./random_normal":"oldS","./random_uniform":"YaAk","./range":"WweN","./real":"QPTK","./reciprocal":"SxzF","./relu":"Htix","./relu6":"bNXk","./reshape":"khVG","./reverse":"wt3J","./reverse_1d":"QYAt","./reverse_2d":"xTht","./reverse_3d":"e415","./reverse_4d":"Q8XB","./round":"uHOV","./rsqrt":"paOW","./scalar":"RBNv","./selu":"iDNJ","./separable_conv2d":"sXEJ","./setdiff1d_async":"yIk5","./sigmoid":"QUTt","./sign":"TntV","./sin":"AwzN","./sinh":"nOJq","./slice":"xcz4","./slice1d":"EcR4","./slice2d":"pNW2","./slice3d":"XFWw","./slice4d":"ScyZ","./softmax":"Tk36","./softplus":"rchi","./space_to_batch_nd":"nPoV","./spectral/fft":"Z8YU","./spectral/ifft":"r4QH","./spectral/irfft":"lC3X","./spectral/rfft":"G4qK","./split":"L2gY","./sqrt":"dGNr","./square":"rLyD","./squared_difference":"YDjz","./squeeze":"N7Os","./stack":"GHVB","./step":"DQ8I","./strided_slice":"PMwJ","./sub":"OFjl","./sum":"YHNB","./tan":"RsGH","./tanh":"Lqgl","./tensor":"tCGm","./tensor1d":"R7Cm","./tensor2d":"Q66m","./tensor3d":"pCJS","./tensor4d":"iywK","./tensor5d":"YwRe","./tensor6d":"X7ie","./tile":"C900","./topk":"N414","./truncated_normal":"hfYy","./unique":"qyE5","./unsorted_segment_sum":"U01C","./unstack":"JyML","./variable":"nKb4","./where":"AEtV","./where_async":"Vq9r","./zeros":"MNgB","./zeros_like":"Jky8","./boolean_mask":"cLTy","./compare":"tF3n","./binary_ops":"uden","./transpose":"yiEV","./norm":"Hzs7","./moving_average":"tCsQ","./scatter_nd":"C9WF","./sparse_to_dense":"PmvU","./gather_nd":"o2ZD","./dropout":"MAgd","./signal_ops_util":"Jt6I","./in_top_k":"lVGj","./operation":"rO1i","./fused_ops":"iOEA","./signal/hamming_window":"Gob6","./signal/hann_window":"tE3w","./signal/frame":"jVcy","./signal/stft":"XqFB","./image/crop_and_resize":"bV6Y","./image/flip_left_right":"d7Ff","./image/rotate_with_offset":"ltMM","./image/non_max_suppression":"cbMx","./image/non_max_suppression_async":"Hduk","./image/non_max_suppression_with_score":"p5vV","./image/non_max_suppression_with_score_async":"UxN0","./image/non_max_suppression_padded":"MUoJ","./image/non_max_suppression_padded_async":"BoIX","./image/resize_bilinear":"eY9c","./image/resize_nearest_neighbor":"rzap","./linalg/band_part":"AwWZ","./linalg/gram_schmidt":"ooKU","./linalg/qr":"DUW0","./losses/absolute_difference":"HvRC","./losses/compute_weighted_loss":"ZYcU","./losses/cosine_distance":"eI5w","./losses/hinge_loss":"ENpu","./losses/huber_loss":"wY7G","./losses/log_loss":"P3Xp","./losses/mean_squared_error":"WgEA","./losses/sigmoid_cross_entropy":"FeHT","./losses/softmax_cross_entropy":"sTHL"}],"L1Zo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Optimizer=void 0;var e=require("../globals"),t=require("../gradients"),i=require("../ops/ops"),s=require("../serialization");class r extends s.Serializable{minimize(t,i=!1,s){const{value:r,grads:n}=this.computeGradients(t,s);if(null!=s){const e=s.map(e=>({name:e.name,tensor:n[e.name]}));this.applyGradients(e)}else this.applyGradients(n);return(0,e.dispose)(n),i?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,i){return(0,t.variableGrads)(e,i)}dispose(){null!=this.iterations_&&(0,e.dispose)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,i.scalar)(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+`${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}exports.Optimizer=r,Object.defineProperty(r,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});
},{"../globals":"UkUu","../gradients":"FjdM","../ops/ops":"DHFH","../serialization":"AVD8"}],"wMlv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdadeltaOptimizer=void 0;var a=require("../engine"),e=require("../globals"),s=require("../ops/add"),i=require("../ops/div"),t=require("../ops/mul"),r=require("../ops/ops"),l=require("../ops/square"),n=require("../ops/zeros_like"),u=require("../serialization"),d=require("./optimizer");class o extends d.Optimizer{constructor(e,s,i=null){super(),this.learningRate=e,this.rho=s,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==i&&(this.epsilon=a.ENGINE.backend.epsilon())}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((d,o)=>{const c=a.ENGINE.registeredVariables[d];null==this.accumulatedGrads[o]&&(this.accumulatedGrads[o]={originalName:`${d}/accum_grad`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))}),null==this.accumulatedUpdates[o]&&(this.accumulatedUpdates[o]={originalName:`${d}/accum_var`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))});const m=Array.isArray(u)?u[o].tensor:u[d];if(null==m)return;const h=this.accumulatedGrads[o].variable,p=this.accumulatedUpdates[o].variable;(0,e.tidy)(()=>{const a=(0,s.add)((0,t.mul)(h,this.rho),(0,t.mul)((0,l.square)(m),1-this.rho)),e=(0,t.mul)((0,i.div)((0,r.sqrt)((0,s.add)(p,this.epsilon)),(0,r.sqrt)((0,s.add)(h,this.epsilon))),m),n=(0,s.add)((0,t.mul)(p,this.rho),(0,t.mul)((0,l.square)(e),1-this.rho));h.assign(a),p.assign(n);const u=(0,s.add)((0,t.mul)(e,-this.learningRate),c);c.assign(u)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,e.dispose)(this.accumulatedGrads.map(a=>a.variable)),(0,e.dispose)(this.accumulatedUpdates.map(a=>a.variable)))}async getWeights(){const a=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(a.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){const e=(a=await this.extractIterations(a)).length/2;this.accumulatedGrads=a.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)})),this.accumulatedUpdates=a.slice(e,2*e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(a,e){return new a(e.learningRate,e.rho,e.epsilon)}}exports.AdadeltaOptimizer=o,o.className="Adadelta",(0,u.registerClass)(o);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/ops":"DHFH","../ops/square":"rLyD","../ops/zeros_like":"Jky8","../serialization":"AVD8","./optimizer":"L1Zo"}],"K66L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdagradOptimizer=void 0;var a=require("../engine"),e=require("../globals"),i=require("../ops/add"),r=require("../ops/div"),t=require("../ops/fill"),s=require("../ops/mul"),l=require("../ops/sqrt"),n=require("../ops/square"),u=require("../serialization"),c=require("./optimizer");class o extends c.Optimizer{constructor(a,e=.1){super(),this.learningRate=a,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((c,o)=>{const d=a.ENGINE.registeredVariables[c];if(null==this.accumulatedGrads[o]){const a=!1;this.accumulatedGrads[o]={originalName:`${c}/accumulator`,variable:(0,e.tidy)(()=>(0,t.fill)(d.shape,this.initialAccumulatorValue).variable(a))}}const m=Array.isArray(u)?u[o].tensor:u[c];if(null==m)return;const p=this.accumulatedGrads[o].variable;(0,e.tidy)(()=>{const e=(0,i.add)(p,(0,n.square)(m));p.assign(e);const t=(0,i.add)((0,s.mul)((0,r.div)(m,(0,l.sqrt)((0,i.add)(e,a.ENGINE.backend.epsilon()))),-this.learningRate),d);d.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,e.dispose)(this.accumulatedGrads.map(a=>a.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){a=await this.extractIterations(a);this.accumulatedGrads=a.map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(a,e){return new a(e.learningRate,e.initialAccumulatorValue)}}exports.AdagradOptimizer=o,o.className="Adagrad",(0,u.registerClass)(o);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/div":"XyQ4","../ops/fill":"SqIp","../ops/mul":"WS4w","../ops/sqrt":"dGNr","../ops/square":"rLyD","../serialization":"AVD8","./optimizer":"L1Zo"}],"JZUL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamOptimizer=void 0;var e=require("../engine"),t=require("../globals"),a=require("../ops/add"),i=require("../ops/div"),s=require("../ops/mul"),r=require("../ops/pow"),n=require("../ops/scalar"),c=require("../ops/sqrt"),o=require("../ops/square"),l=require("../ops/sub"),u=require("../ops/zeros_like"),m=require("../serialization"),d=require("./optimizer");class h extends d.Optimizer{constructor(a,i,s,r=null){super(),this.learningRate=a,this.beta1=i,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,t.tidy)(()=>{this.accBeta1=(0,n.scalar)(i).variable(),this.accBeta2=(0,n.scalar)(s).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(r){const n=Array.isArray(r)?r.map(e=>e.name):Object.keys(r);(0,t.tidy)(()=>{const m=(0,l.sub)(1,this.accBeta1),d=(0,l.sub)(1,this.accBeta2);n.forEach((n,l)=>{const h=e.ENGINE.registeredVariables[n];null==this.accumulatedFirstMoment[l]&&(this.accumulatedFirstMoment[l]={originalName:`${n}/m`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))}),null==this.accumulatedSecondMoment[l]&&(this.accumulatedSecondMoment[l]={originalName:`${n}/v`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))});const p=Array.isArray(r)?r[l].tensor:r[n];if(null==p)return;const b=this.accumulatedFirstMoment[l].variable,g=this.accumulatedSecondMoment[l].variable,v=(0,a.add)((0,s.mul)(b,this.beta1),(0,s.mul)(p,1-this.beta1)),q=(0,a.add)((0,s.mul)(g,this.beta2),(0,s.mul)((0,o.square)(p),1-this.beta2)),M=(0,i.div)(v,m),y=(0,i.div)(q,d);b.assign(v),g.assign(q);const B=(0,a.add)((0,s.mul)((0,i.div)(M,(0,a.add)((0,c.sqrt)(y),this.epsilon)),-this.learningRate),h);h.assign(B)}),this.accBeta1.assign((0,s.mul)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,s.mul)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,t.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&(0,t.dispose)(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),(0,t.tidy)(()=>{this.accBeta1.assign((0,r.pow)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,r.pow)(this.beta2,this.iterations_+1))});const a=e.length/2;this.accumulatedFirstMoment=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}exports.AdamOptimizer=h,h.className="Adam",(0,m.registerClass)(h);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/pow":"FJnw","../ops/scalar":"RBNv","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl","../ops/zeros_like":"Jky8","../serialization":"AVD8","./optimizer":"L1Zo"}],"PX42":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamaxOptimizer=void 0;var e=require("../engine"),i=require("../globals"),t=require("../ops/abs"),a=require("../ops/add"),s=require("../ops/div"),r=require("../ops/maximum"),n=require("../ops/mul"),l=require("../ops/scalar"),o=require("../ops/sub"),u=require("../ops/zeros_like"),c=require("../serialization"),d=require("./optimizer");class m extends d.Optimizer{constructor(t,a,s,r=null,n=0){super(),this.learningRate=t,this.beta1=a,this.beta2=s,this.epsilon=r,this.decay=n,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,i.tidy)(()=>{this.iteration=(0,l.scalar)(0).variable(),this.accBeta1=(0,l.scalar)(a).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(l){const c=Array.isArray(l)?l.map(e=>e.name):Object.keys(l);(0,i.tidy)(()=>{const i=(0,o.sub)(1,this.accBeta1),d=(0,s.div)(-this.learningRate,(0,a.add)((0,n.mul)(this.iteration,this.decay),1));c.forEach((o,c)=>{const m=e.ENGINE.registeredVariables[o];null==this.accumulatedFirstMoment[c]&&(this.accumulatedFirstMoment[c]={originalName:`${o}/m`,variable:(0,u.zerosLike)(m).variable(!1)}),null==this.accumulatedWeightedInfNorm[c]&&(this.accumulatedWeightedInfNorm[c]={originalName:`${o}/v`,variable:(0,u.zerosLike)(m).variable(!1)});const h=Array.isArray(l)?l[c].tensor:l[o];if(null==h)return;const p=this.accumulatedFirstMoment[c].variable,b=this.accumulatedWeightedInfNorm[c].variable,g=(0,a.add)((0,n.mul)(p,this.beta1),(0,n.mul)(h,1-this.beta1)),v=(0,n.mul)(b,this.beta2),y=(0,t.abs)(h),f=(0,r.maximum)(v,y);p.assign(g),b.assign(f);const N=(0,a.add)((0,n.mul)((0,s.div)(d,i),(0,s.div)(g,(0,a.add)(f,this.epsilon))),m);m.assign(N)}),this.iteration.assign((0,a.add)(this.iteration,1)),this.accBeta1.assign((0,n.mul)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,i.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&(0,i.dispose)(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,i){return new e(i.learningRate,i.beta1,i.beta2,i.epsilon,i.decay)}}exports.AdamaxOptimizer=m,m.className="Adamax",(0,c.registerClass)(m);
},{"../engine":"tmUz","../globals":"UkUu","../ops/abs":"LQUr","../ops/add":"geuL","../ops/div":"XyQ4","../ops/maximum":"nmNC","../ops/mul":"WS4w","../ops/scalar":"RBNv","../ops/sub":"OFjl","../ops/zeros_like":"Jky8","../serialization":"AVD8","./optimizer":"L1Zo"}],"Gn6t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SGDOptimizer=void 0;var e=require("../engine"),t=require("../globals"),r=require("../ops/add"),i=require("../ops/mul"),s=require("../ops/scalar"),a=require("../serialization"),n=require("./optimizer");class o extends n.Optimizer{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(s){(Array.isArray(s)?s.map(e=>e.name):Object.keys(s)).forEach((a,n)=>{const o=Array.isArray(s)?s[n].tensor:s[a];if(null==o)return;const l=e.ENGINE.registeredVariables[a];(0,t.tidy)(()=>{const e=(0,r.add)((0,i.mul)(this.c,o),l);l.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,t.keep)((0,s.scalar)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}exports.SGDOptimizer=o,o.className="SGD",(0,a.registerClass)(o);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/mul":"WS4w","../ops/scalar":"RBNv","../serialization":"AVD8","./optimizer":"L1Zo"}],"liyz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MomentumOptimizer=void 0;var e=require("../engine"),t=require("../globals"),s=require("../ops/add"),i=require("../ops/mul"),a=require("../ops/scalar"),r=require("../ops/zeros_like"),n=require("../serialization"),m=require("./sgd_optimizer");class o extends m.SGDOptimizer{constructor(e,t,s=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=s,this.accumulations=[],this.m=(0,a.scalar)(this.momentum)}applyGradients(a){(Array.isArray(a)?a.map(e=>e.name):Object.keys(a)).forEach((n,m)=>{const o=e.ENGINE.registeredVariables[n];if(null==this.accumulations[m]){const e=!1;this.accumulations[m]={originalName:`${n}/momentum`,variable:(0,t.tidy)(()=>(0,r.zerosLike)(o).variable(e))}}const u=this.accumulations[m].variable,l=Array.isArray(a)?a[m].tensor:a[n];null!=l&&(0,t.tidy)(()=>{let e;const t=(0,s.add)((0,i.mul)(this.m,u),l);e=this.useNesterov?(0,s.add)((0,i.mul)(this.c,(0,s.add)(l,(0,i.mul)(t,this.m))),o):(0,s.add)((0,i.mul)(this.c,t),o),u.assign(t),o.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,t.dispose)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}exports.MomentumOptimizer=o,o.className="Momentum",(0,n.registerClass)(o);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/mul":"WS4w","../ops/scalar":"RBNv","../ops/zeros_like":"Jky8","../serialization":"AVD8","./sgd_optimizer":"Gn6t"}],"ncVU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RMSPropOptimizer=void 0;var e=require("../engine"),a=require("../globals"),s=require("../ops/add"),t=require("../ops/div"),i=require("../ops/mul"),r=require("../ops/sqrt"),n=require("../ops/square"),u=require("../ops/sub"),l=require("../ops/zeros_like"),c=require("../serialization"),m=require("./optimizer");class d extends m.Optimizer{constructor(a,s=.9,t=0,i=null,r=!1){if(super(),this.learningRate=a,this.decay=s,this.momentum=t,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==i&&(this.epsilon=e.ENGINE.backend.epsilon()),null==a)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(c){(Array.isArray(c)?c.map(e=>e.name):Object.keys(c)).forEach((m,d)=>{const o=e.ENGINE.registeredVariables[m];null==this.accumulatedMeanSquares[d]&&(this.accumulatedMeanSquares[d]={originalName:`${m}/rms`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMoments[d]&&(this.accumulatedMoments[d]={originalName:`${m}/momentum`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMeanGrads[d]&&this.centered&&(this.accumulatedMeanGrads[d]={originalName:`${m}/mg`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))});const h=Array.isArray(c)?c[d].tensor:c[m];if(null==h)return;const p=this.accumulatedMeanSquares[d].variable,g=this.accumulatedMoments[d].variable;(0,a.tidy)(()=>{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay));if(this.centered){const a=this.accumulatedMeanGrads[d].variable,l=(0,s.add)((0,i.mul)(a,this.decay),(0,i.mul)(h,1-this.decay)),c=(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,u.sub)(e,(0,s.add)((0,n.square)(l),this.epsilon)))),m=(0,s.add)((0,i.mul)(g,this.momentum),c);p.assign(e),a.assign(l),g.assign(m);const b=(0,u.sub)(o,m);o.assign(b)}else{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay)),a=(0,s.add)((0,i.mul)(g,this.momentum),(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,s.add)(e,this.epsilon))));p.assign(e),g.assign(a);const l=(0,u.sub)(o,a);o.assign(l)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,a.dispose)(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,a.dispose)(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&(0,a.dispose)(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const a=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*a,3*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,a){return new e(a.learningRate,a.decay,a.momentum,a.epsilon,a.centered)}}exports.RMSPropOptimizer=d,d.className="RMSProp",(0,c.registerClass)(d);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl","../ops/zeros_like":"Jky8","../serialization":"AVD8","./optimizer":"L1Zo"}],"u4kv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptimizerConstructors=void 0;var r=require("./adadelta_optimizer"),e=require("./adagrad_optimizer"),t=require("./adam_optimizer"),i=require("./adamax_optimizer"),a=require("./momentum_optimizer"),m=require("./rmsprop_optimizer"),u=require("./sgd_optimizer");class p{static sgd(r){return new u.SGDOptimizer(r)}static momentum(r,e,t=!1){return new a.MomentumOptimizer(r,e,t)}static rmsprop(r,e=.9,t=0,i=null,a=!1){return new m.RMSPropOptimizer(r,e,t,i,a)}static adam(r=.001,e=.9,i=.999,a=null){return new t.AdamOptimizer(r,e,i,a)}static adadelta(e=.001,t=.95,i=null){return new r.AdadeltaOptimizer(e,t,i)}static adamax(r=.002,e=.9,t=.999,a=null,m=0){return new i.AdamaxOptimizer(r,e,t,a,m)}static adagrad(r,t=.1){return new e.AdagradOptimizer(r,t)}}exports.OptimizerConstructors=p;
},{"./adadelta_optimizer":"wMlv","./adagrad_optimizer":"K66L","./adam_optimizer":"JZUL","./adamax_optimizer":"PX42","./momentum_optimizer":"liyz","./rmsprop_optimizer":"ncVU","./sgd_optimizer":"Gn6t"}],"Qrdw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.train=void 0;var r=require("./optimizers/adadelta_optimizer"),i=require("./optimizers/adagrad_optimizer"),e=require("./optimizers/adam_optimizer"),t=require("./optimizers/adamax_optimizer"),m=require("./optimizers/momentum_optimizer"),o=require("./optimizers/optimizer_constructors"),a=require("./optimizers/rmsprop_optimizer"),p=require("./optimizers/sgd_optimizer");m.MomentumOptimizer,p.SGDOptimizer,r.AdadeltaOptimizer,i.AdagradOptimizer,a.RMSPropOptimizer,t.AdamaxOptimizer,e.AdamOptimizer;const s={sgd:o.OptimizerConstructors.sgd,momentum:o.OptimizerConstructors.momentum,adadelta:o.OptimizerConstructors.adadelta,adagrad:o.OptimizerConstructors.adagrad,rmsprop:o.OptimizerConstructors.rmsprop,adamax:o.OptimizerConstructors.adamax,adam:o.OptimizerConstructors.adam};exports.train=s;
},{"./optimizers/adadelta_optimizer":"wMlv","./optimizers/adagrad_optimizer":"K66L","./optimizers/adam_optimizer":"JZUL","./optimizers/adamax_optimizer":"PX42","./optimizers/momentum_optimizer":"liyz","./optimizers/optimizer_constructors":"u4kv","./optimizers/rmsprop_optimizer":"ncVU","./optimizers/sgd_optimizer":"Gn6t"}],"E3YT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nextFrame=t;const e=(()=>"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e())();function t(){return new Promise(t=>e(()=>t()))}
},{}],"Ppt4":[function(require,module,exports) {
"use strict";function e(e,t,r){return[r*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageCenter=e;
},{}],"iLQh":[function(require,module,exports) {
"use strict";function e(e,t,s,o=!0){let u=[];if(o)(u=u.concat(t.slice(0))).push(e[0]/s),u=u.concat(e.slice(1));else{u=u.concat(e[0]);const s=t.length;for(let o=0;o<s;++o)u=u.concat([e[o+1]/t[o],t[o]]);u=u.concat(e.slice(s+1))}return u}function t(e,t,s=!0){const o=[];if(s){o.push(t);for(let s=t+1;s<e;++s)s<=2*t?(o.push(s),o.push(s-(t+1))):o.push(s)}else{const s=[],u=[];for(let o=1;o<e;++o)o>=2*t+1||o%2==1?u.push(o):s.push(o);o.push(...s),o.push(0),o.push(...u)}return o}function s(e,t,s,o=!0){const u=[];o?u.push(e[0]/s):u.push(e[0]*s);for(let n=1;n<e.length;++n)n<=t.length?o?u.push(t[n-1]*e[n]):u.push(e[n]/t[n-1]):u.push(e[n]);return u}function o(e,t){const s=[0];for(let o=0;o<t;++o)s.push(e[o][0]);return s}function u(e,t,s){const o=e.slice(0,1);for(let u=0;u<s;++u)o.push(e[u+1]-t[u][0]-t[u][1]);return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getReshaped=e,exports.getPermuted=t,exports.getReshapedPermuted=s,exports.getSliceBeginCoords=o,exports.getSliceSize=u;
},{}],"HqZV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SELU_SCALE=exports.SELU_SCALEALPHA=void 0;const e=1.7580993408473768;exports.SELU_SCALEALPHA=e;const t=1.0507009873554805;exports.SELU_SCALE=t;
},{}],"NNvh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERF_A5=exports.ERF_A4=exports.ERF_A3=exports.ERF_A2=exports.ERF_A1=exports.ERF_P=void 0;const t=.3275911;exports.ERF_P=t;const o=.254829592;exports.ERF_A1=o;const s=-.284496736;exports.ERF_A2=s;const e=1.421413741;exports.ERF_A3=e;const r=-1.453152027;exports.ERF_A4=r;const p=1.061405429;exports.ERF_A5=p;
},{}],"nkQQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.warn=o,exports.log=n;var e=require("./environment");function o(...o){(0,e.env)().getBool("IS_TEST")||console.warn(...o)}function n(...o){(0,e.env)().getBool("IS_TEST")||console.log(...o)}
},{"./environment":"rgHm"}],"HlsP":[function(require,module,exports) {
"use strict";function t(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+`${t.length}, imag: ${e.length}.`);const r=new Float32Array(2*t.length);for(let n=0;n<r.length;n+=2)r[n]=t[n/2],r[n+1]=e[n/2];return r}function e(t){const e=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=t[n],r[n/2]=t[n+1];return{real:e,imag:r}}function r(t){const e=Math.ceil(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let o=0;o<t.length;o+=4)r[Math.floor(o/4)]=t[o],n[Math.floor(o/4)]=t[o+1];return{real:r,imag:n}}function n(t){const e=Math.floor(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let o=2;o<t.length;o+=4)r[Math.floor(o/4)]=t[o],n[Math.floor(o/4)]=t[o+1];return{real:r,imag:n}}function o(t,e){return{real:t[2*e],imag:t[2*e+1]}}function a(t,e,r,n){t[2*n]=e,t[2*n+1]=r}function l(t,e){const r=new Float32Array(t/2),n=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const a=(e?2:-2)*Math.PI*(o/t);r[o]=Math.cos(a),n[o]=Math.sin(a)}return{real:r,imag:n}}function h(t,e,r){const n=(r?2:-2)*Math.PI*(t/e);return{real:Math.cos(n),imag:Math.sin(n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeRealAndImagArrays=t,exports.splitRealAndImagArrays=e,exports.complexWithEvenIndex=r,exports.complexWithOddIndex=n,exports.getComplexWithIndex=o,exports.assignToTypedArray=a,exports.exponents=l,exports.exponent=h;
},{}],"gfGj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={castTensor:!0,reshapeTensor:!0,linspaceImpl:!0,slice_util:!0,upcastType:!0,segment_util:!0};exports.castTensor=k,exports.reshapeTensor=w,exports.linspaceImpl=M,Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return d.upcastType}}),exports.segment_util=exports.slice_util=void 0;var t=require("../engine"),r=require("../ops/cast"),o=require("../ops/scalar"),n=require("../ops/tensor1d"),u=require("../ops/zeros"),c=require("../util"),s=require("../ops/axis_util");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return s[t]}}))});var a=require("../ops/broadcast_util");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var p=require("../ops/concat_util");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return p[t]}}))});var l=require("../ops/conv_util");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return l[t]}}))});var i=require("../ops/fused_util");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return i[t]}}))});var f=require("../ops/reduce_util");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return f[t]}}))});var y=E(require("../ops/slice_util"));exports.slice_util=y;var d=require("../types"),b=require("../ops/rotate_util");Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))});var O=require("../ops/array_ops_util");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return O[t]}}))});var _=require("../ops/gather_nd_util");Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return _[t]}}))});var j=require("../ops/scatter_nd_util");Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return j[t]}}))});var h=require("../ops/selu_util");Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return h[t]}}))});var P=require("../ops/erf_util");Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return P[t]}}))});var m=require("../log");Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return m[t]}}))});var x=require("../backends/complex_util");Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return x[t]}}))});var g=require("../ops/split_util");Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return g[t]}}))});var v=E(require("../ops/segment_util"));function q(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return q=function(){return e},e}function E(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=q();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function k(e,n,s){if("complex64"===n){if("complex64"===e.dtype)return e.clone();const t=(0,u.zeros)(e.shape),o=(0,r.cast)(e,"float32"),n=s.complex(o,t);return t.dispose(),o.dispose(),n}if(!(0,c.hasEncodingLoss)(e.dtype,n))return t.ENGINE.makeTensorFromDataId(e.dataId,e.shape,n);if("complex64"===e.dtype){const t=s.real(e),o=(0,r.cast)(t,n);return t.dispose(),o}if("int32"===n)return s.int(e);if("bool"===n){const t=(0,o.scalar)(0,e.dtype),r=s.notEqual(e,t);return t.dispose(),r}throw new Error(`Error in Cast: failed to cast ${e.dtype} to ${n}`)}function w(e,r){return t.ENGINE.makeTensorFromDataId(e.dataId,r,e.dtype)}function M(e,t,r){const o=(t-e)/(r-1),u=(0,c.makeZerosTypedArray)(r,"float32");u[0]=e;for(let n=1;n<u.length;n++)u[n]=u[n-1]+o;return(0,n.tensor1d)(u,"float32")}exports.segment_util=v;
},{"../engine":"tmUz","../ops/cast":"owKL","../ops/scalar":"RBNv","../ops/tensor1d":"R7Cm","../ops/zeros":"MNgB","../util":"UxaK","../ops/axis_util":"uTbM","../ops/broadcast_util":"nprq","../ops/concat_util":"I0tS","../ops/conv_util":"cqi6","../ops/fused_util":"pXCJ","../ops/reduce_util":"q1BX","../ops/slice_util":"sNMx","../types":"v4dC","../ops/rotate_util":"Ppt4","../ops/array_ops_util":"iLQh","../ops/gather_nd_util":"EXn0","../ops/scatter_nd_util":"mei8","../ops/selu_util":"HqZV","../ops/erf_util":"NNvh","../log":"nkQQ","../backends/complex_util":"HlsP","../ops/split_util":"E6ap","../ops/segment_util":"mcNf"}],"EB5C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.split=r;var e=require("../ops/slice");function r(r,s,t){const n=new Array(r.rank).fill(0),c=r.shape.slice();return s.map(s=>{const i=[...c];i[t]=s;const o=(0,e.slice)(r,n,i);return n[t]+=s,o})}
},{"../ops/slice":"xcz4"}],"YsL5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=r;var e=require("../ops/buffer");function r(r,t){const o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=r.shape[e]*t[e];const n=(0,e.buffer)(o,r.dtype);for(let e=0;e<n.values.length;++e){const t=n.indexToLoc(e),o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=t[e]%r.shape[e];const s=r.locToIndex(o);n.values[e]=r.values[s]}return n.toTensor()}
},{"../ops/buffer":"SN3d"}],"VSYG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topkImpl=t;var e=require("../ops/tensor"),r=require("../util");function t(t,o,n,s,l){const u=o[o.length-1],[a,i]=[t.length/u,u],p=(0,r.getTypedArrayFromDType)(n,a*s),y=(0,r.getTypedArrayFromDType)("int32",a*s);for(let e=0;e<a;e++){const r=e*i,o=t.subarray(r,r+i),n=[];for(let e=0;e<o.length;e++)n.push({value:o[e],index:e});n.sort((e,r)=>r.value-e.value);const l=e*s,u=p.subarray(l,l+s),a=y.subarray(l,l+s);for(let e=0;e<s;e++)u[e]=n[e].value,a[e]=n[e].index}const c=o.slice();return c[c.length-1]=s,[(0,e.tensor)(p,c,n),(0,e.tensor)(y,c,"int32")]}
},{"../ops/tensor":"tCGm","../util":"UxaK"}],"NxGv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"nonMaxSuppressionV3Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV3Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV4Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV4Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV5Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV5Impl}}),Object.defineProperty(exports,"split",{enumerable:!0,get:function(){return r.split}}),Object.defineProperty(exports,"tile",{enumerable:!0,get:function(){return n.tile}}),Object.defineProperty(exports,"topkImpl",{enumerable:!0,get:function(){return t.topkImpl}}),Object.defineProperty(exports,"whereImpl",{enumerable:!0,get:function(){return p.whereImpl}});var e=require("./non_max_suppression_impl"),r=require("./split_shared"),n=require("./tile_impl"),t=require("./topk_impl"),p=require("./where_impl");
},{"./non_max_suppression_impl":"YE1i","./split_shared":"EB5C","./tile_impl":"YsL5","./topk_impl":"VSYG","./where_impl":"MEsl"}],"rPpE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={io:!0,math:!0,browser:!0,gather_util:!0,scatter_util:!0,slice_util:!0,serialization:!0,tensor_util:!0,test_util:!0,util:!0,version_core:!0,AdadeltaOptimizer:!0,AdagradOptimizer:!0,AdamOptimizer:!0,AdamaxOptimizer:!0,MomentumOptimizer:!0,Optimizer:!0,RMSPropOptimizer:!0,SGDOptimizer:!0,Tensor:!0,TensorBuffer:!0,Variable:!0,Rank:!0,sumOutType:!0,upcastType:!0,Reduction:!0,customGrad:!0,grad:!0,grads:!0,valueAndGrad:!0,valueAndGrads:!0,variableGrads:!0,Environment:!0,env:!0,ENV:!0,nextFrame:!0,backend_util:!0,device_util:!0,kernel_impls:!0,KernelBackend:!0,DataStorage:!0};Object.defineProperty(exports,"version_core",{enumerable:!0,get:function(){return l.version}}),Object.defineProperty(exports,"AdadeltaOptimizer",{enumerable:!0,get:function(){return d.AdadeltaOptimizer}}),Object.defineProperty(exports,"AdagradOptimizer",{enumerable:!0,get:function(){return m.AdagradOptimizer}}),Object.defineProperty(exports,"AdamOptimizer",{enumerable:!0,get:function(){return f.AdamOptimizer}}),Object.defineProperty(exports,"AdamaxOptimizer",{enumerable:!0,get:function(){return b.AdamaxOptimizer}}),Object.defineProperty(exports,"MomentumOptimizer",{enumerable:!0,get:function(){return O.MomentumOptimizer}}),Object.defineProperty(exports,"Optimizer",{enumerable:!0,get:function(){return x.Optimizer}}),Object.defineProperty(exports,"RMSPropOptimizer",{enumerable:!0,get:function(){return y.RMSPropOptimizer}}),Object.defineProperty(exports,"SGDOptimizer",{enumerable:!0,get:function(){return _.SGDOptimizer}}),Object.defineProperty(exports,"Tensor",{enumerable:!0,get:function(){return g.Tensor}}),Object.defineProperty(exports,"TensorBuffer",{enumerable:!0,get:function(){return g.TensorBuffer}}),Object.defineProperty(exports,"Variable",{enumerable:!0,get:function(){return g.Variable}}),Object.defineProperty(exports,"Rank",{enumerable:!0,get:function(){return j.Rank}}),Object.defineProperty(exports,"sumOutType",{enumerable:!0,get:function(){return j.sumOutType}}),Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return j.upcastType}}),Object.defineProperty(exports,"Reduction",{enumerable:!0,get:function(){return P.Reduction}}),Object.defineProperty(exports,"customGrad",{enumerable:!0,get:function(){return h.customGrad}}),Object.defineProperty(exports,"grad",{enumerable:!0,get:function(){return h.grad}}),Object.defineProperty(exports,"grads",{enumerable:!0,get:function(){return h.grads}}),Object.defineProperty(exports,"valueAndGrad",{enumerable:!0,get:function(){return h.valueAndGrad}}),Object.defineProperty(exports,"valueAndGrads",{enumerable:!0,get:function(){return h.valueAndGrads}}),Object.defineProperty(exports,"variableGrads",{enumerable:!0,get:function(){return h.variableGrads}}),Object.defineProperty(exports,"Environment",{enumerable:!0,get:function(){return A.Environment}}),Object.defineProperty(exports,"env",{enumerable:!0,get:function(){return A.env}}),Object.defineProperty(exports,"ENV",{enumerable:!0,get:function(){return A.ENV}}),Object.defineProperty(exports,"nextFrame",{enumerable:!0,get:function(){return G.nextFrame}}),Object.defineProperty(exports,"KernelBackend",{enumerable:!0,get:function(){return E.KernelBackend}}),Object.defineProperty(exports,"DataStorage",{enumerable:!0,get:function(){return E.DataStorage}}),exports.kernel_impls=exports.device_util=exports.backend_util=exports.util=exports.test_util=exports.tensor_util=exports.serialization=exports.slice_util=exports.scatter_util=exports.gather_util=exports.browser=exports.math=exports.io=void 0;var r=D(require("./io/io"));exports.io=r;var t=D(require("./math"));exports.math=t;var i=D(require("./ops/browser"));exports.browser=i;var n=D(require("./ops/gather_nd_util"));exports.gather_util=n;var o=D(require("./ops/scatter_nd_util"));exports.scatter_util=o;var u=D(require("./ops/slice_util"));exports.slice_util=u;var a=D(require("./serialization"));exports.serialization=a;var p=D(require("./tensor_util"));exports.tensor_util=p;var s=D(require("./test_util"));exports.test_util=s;var c=D(require("./util"));exports.util=c;var l=require("./version"),d=require("./optimizers/adadelta_optimizer"),m=require("./optimizers/adagrad_optimizer"),f=require("./optimizers/adam_optimizer"),b=require("./optimizers/adamax_optimizer"),O=require("./optimizers/momentum_optimizer"),x=require("./optimizers/optimizer"),y=require("./optimizers/rmsprop_optimizer"),_=require("./optimizers/sgd_optimizer"),g=require("./tensor"),j=require("./types"),v=require("./ops/ops");Object.keys(v).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return v[r]}}))});var P=require("./ops/loss_ops_utils"),z=require("./train");Object.keys(z).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return z[r]}}))});var q=require("./globals");Object.keys(q).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return q[r]}}))});var k=require("./kernel_registry");Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return k[r]}}))});var h=require("./gradients"),A=require("./environment"),G=require("./browser_util"),M=D(require("./backends/backend_util"));exports.backend_util=M;var w=D(require("./device_util"));exports.device_util=w;var T=D(require("./backends/kernel_impls"));exports.kernel_impls=T;var E=require("./backends/backend"),R=require("./kernel_names");function S(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return S=function(){return e},e}function D(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=S();if(r&&r.has(e))return r.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}Object.keys(R).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return R[r]}}))});
},{"./io/io":"wHIS","./math":"vRxb","./ops/browser":"UMh8","./ops/gather_nd_util":"EXn0","./ops/scatter_nd_util":"mei8","./ops/slice_util":"sNMx","./serialization":"AVD8","./tensor_util":"vUHI","./test_util":"IZ2A","./util":"UxaK","./version":"yMuw","./optimizers/adadelta_optimizer":"wMlv","./optimizers/adagrad_optimizer":"K66L","./optimizers/adam_optimizer":"JZUL","./optimizers/adamax_optimizer":"PX42","./optimizers/momentum_optimizer":"liyz","./optimizers/optimizer":"L1Zo","./optimizers/rmsprop_optimizer":"ncVU","./optimizers/sgd_optimizer":"Gn6t","./tensor":"Zqvm","./types":"v4dC","./ops/ops":"DHFH","./ops/loss_ops_utils":"AFm5","./train":"Qrdw","./globals":"UkUu","./kernel_registry":"yMO5","./gradients":"FjdM","./environment":"rgHm","./browser_util":"E3YT","./backends/backend_util":"gfGj","./device_util":"z8l0","./backends/kernel_impls":"NxGv","./backends/backend":"omoA","./kernel_names":"r3vI"}],"CWvo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),t=require("../ops/step");const o={kernelName:e.Abs,inputsToSave:["x"],gradFunc:(e,o)=>{const[a]=o;return{x:()=>(0,s.mul)(e,(0,t.step)((0,r.cast)(a,"float32"),-1))}}};exports.absGradConfig=o;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/mul":"WS4w","../ops/step":"DQ8I"}],"Z9tK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),o=require("../ops/neg"),a=require("../ops/scalar"),u=require("../ops/sqrt"),t=require("../ops/square"),i=require("../ops/sub");const n={kernelName:e.Acos,inputsToSave:["x"],gradFunc:(e,n)=>{const[c]=n;return{x:()=>{const n=(0,t.square)((0,r.cast)(c,"float32")),p=(0,u.sqrt)((0,i.sub)((0,a.scalar)(1),n));return(0,o.neg)((0,s.div)(e,p))}}}};exports.acosGradConfig=n;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/neg":"wgz6","../ops/scalar":"RBNv","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl"}],"fdXA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),o=require("../ops/sqrt"),t=require("../ops/square"),u=require("../ops/sub");const a={kernelName:e.Acosh,inputsToSave:["x"],gradFunc:(e,a)=>{const[i]=a;return{x:()=>{const a=(0,o.sqrt)((0,u.sub)((0,t.square)((0,r.cast)(i,"float32")),1));return(0,s.div)(e,a)}}}};exports.acoshGradConfig=a;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl"}],"QiSK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/broadcast_util")),t=require("../ops/reshape"),n=require("../ops/sum");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const s={kernelName:e.Add,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,s]=a,u=r.assertAndGetBroadcastShape(o.shape,s.shape);return{a:()=>{let a=e;const s=r.getReductionAxes(o.shape,u);return s.length>0&&(a=(0,n.sum)(a,s)),(0,t.reshape)(a,o.shape)},b:()=>{let a=e;const o=r.getReductionAxes(s.shape,u);return o.length>0&&(a=(0,n.sum)(a,o)),(0,t.reshape)(a,s.shape)}}}};exports.addGradConfig=s;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/reshape":"khVG","../ops/sum":"YHNB"}],"VILb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addNGradConfig=void 0;var e=require("../kernel_names");const r={kernelName:e.AddN,saveAllInputs:!0,gradFunc:(e,r)=>{const d={};return r.forEach((r,n)=>{d[n]=(()=>e.clone())}),d}};exports.addNGradConfig=r;
},{"../kernel_names":"r3vI"}],"YIY7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.ArgMax,inputsToSave:["x"],gradFunc:(e,o)=>{const[a]=o;return{x:()=>(0,r.zerosLike)(a)}}};exports.argMaxGradConfig=o;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"gDQn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const n={kernelName:e.ArgMin,inputsToSave:["x"],gradFunc:(e,n)=>{const[o]=n;return{x:()=>(0,r.zerosLike)(o)}}};exports.argMinGradConfig=n;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"hRMR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),a=require("../ops/scalar"),i=require("../ops/sqrt"),o=require("../ops/square"),u=require("../ops/sub");const t={kernelName:e.Asin,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,s.div)(e,(0,i.sqrt)((0,u.sub)((0,a.scalar)(1),(0,o.square)((0,r.cast)(n,"float32")))))}}};exports.asinGradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/scalar":"RBNv","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl"}],"W857":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/cast"),a=require("../ops/div"),o=require("../ops/scalar"),i=require("../ops/sqrt"),t=require("../ops/square");const n={kernelName:e.Asinh,inputsToSave:["x"],gradFunc:(e,n)=>{const[u]=n;return{x:()=>{const n=(0,i.sqrt)((0,r.add)((0,o.scalar)(1),(0,t.square)((0,s.cast)(u,"float32"))));return(0,a.div)(e,n)}}}};exports.asinhGradConfig=n;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/scalar":"RBNv","../ops/sqrt":"dGNr","../ops/square":"rLyD"}],"K17p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/broadcast_util"),a=require("../ops/div"),t=require("../ops/mul"),u=require("../ops/neg"),n=require("../ops/reshape"),o=require("../ops/square"),p=require("../ops/sum");const i={kernelName:e.Atan2,inputsToSave:["a","b"],gradFunc:(e,i)=>{const[d,q]=i,c=(0,s.assertAndGetBroadcastShape)(d.shape,q.shape);return{a:()=>{const u=(0,r.add)((0,o.square)(d),(0,o.square)(q));let i=(0,t.mul)(e,(0,a.div)(q,u));const h=(0,s.getReductionAxes)(d.shape,c);return h.length>0&&(i=(0,p.sum)(i,h)),(0,n.reshape)(i,d.shape)},b:()=>{const i=(0,r.add)((0,o.square)(d),(0,o.square)(q));let h=(0,u.neg)((0,t.mul)(e,(0,a.div)(d,i)));const l=(0,s.getReductionAxes)(q.shape,c);return l.length>0&&(h=(0,p.sum)(h,l)),(0,n.reshape)(h,q.shape)}}}};exports.atan2GradConfig=i;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/broadcast_util":"nprq","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/reshape":"khVG","../ops/square":"rLyD","../ops/sum":"YHNB"}],"naiu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),a=require("../ops/cast"),s=require("../ops/div"),t=require("../ops/square");const o={kernelName:e.Atan,inputsToSave:["x"],gradFunc:(e,o)=>{const[n]=o;return{x:()=>(0,s.div)(e,(0,r.add)((0,t.square)((0,a.cast)(n,"float32")),1))}}};exports.atanGradConfig=o;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/square":"rLyD"}],"Z2Wy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),a=require("../ops/square"),o=require("../ops/sub"),t=require("../ops/scalar");const u={kernelName:e.Atanh,inputsToSave:["x"],gradFunc:(e,u)=>{const[i]=u;return{x:()=>(0,s.div)(e,(0,o.sub)((0,t.scalar)(1),(0,a.square)((0,r.cast)(i,"float32"))))}}};exports.atanhGradConfig=u;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/square":"rLyD","../ops/sub":"OFjl","../ops/scalar":"RBNv"}],"gSD8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3dBackprop=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=i(require("../util")),n=i(require("./conv_util")),a=require("./operation"),p=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var o={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=t?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}function u(a,s,i,u,l=[1,1,1],d,c){const k=(0,o.convertToTensor)(a,"dy","avgPool3dBackprop"),f=(0,o.convertToTensor)(s,"input","avgPool3dBackprop");let g=k,h=f,v=!1;4===f.rank&&(v=!0,g=(0,p.reshape)(k,[1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]]),h=(0,p.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),t.assert(5===g.rank,()=>"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+`${g.rank}.`),t.assert(5===h.rank,()=>"Error in avgPool3dBackprop: input must be rank 5 but got rank "+`${h.rank}.`),t.assert(n.eitherStridesOrDilationsAreOne(u,l),()=>"Error in avgPool3dBackprop: Either strides or dilations "+`must be 1. Got strides ${u} and dilations '${l}'`),null!=c&&t.assert(t.isInt(d),()=>"Error in maxPool3dBackprop: pad must be an integer when "+`using, dimRoundingMode ${c} but got pad ${d}.`);const P={dy:g,input:h},b={filterSize:i,strides:u,dilations:l,pad:d,dimRoundingMode:c},y=e.ENGINE.runKernelFunc(e=>{const r=n.computePool3DInfo(h.shape,i,u,l,d,c);return e.avgPool3dBackprop(g,h,r)},P,null,r.AvgPool3DBackprop,b);return v?(0,p.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const l=(0,a.op)({avgPool3dBackprop_:u});exports.avgPool3dBackprop=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"H2kR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/avg_pool_3d_backprop");const r={kernelName:e.AvgPool3D,inputsToSave:["x"],gradFunc:(e,r,a)=>{const[i]=r,{filterSize:n,strides:d,dilations:s,pad:t,dimRoundingMode:l}=a,p=null==s?[1,1,1]:s;return{x:()=>(0,o.avgPool3dBackprop)(e,i,n,d,p,t,l)}}};exports.avgPool3DGradConfig=r;
},{"../kernel_names":"r3vI","../ops/avg_pool_3d_backprop":"gSD8"}],"S2bz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolBackprop=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=u(require("../util")),n=u(require("./conv_util")),a=require("./operation"),p=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var o={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=t?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}function i(a,s,u,i,c){const l=(0,o.convertToTensor)(a,"dy","avgPoolBackprop"),k=(0,o.convertToTensor)(s,"input","avgPoolBackprop");t.assert(k.rank===l.rank,()=>`Rank of input (${k.rank}) does not match rank of dy (${l.rank})`);let f=k,v=l,h=!1;3===k.rank&&(h=!0,f=(0,p.reshape)(k,[1,k.shape[0],k.shape[1],k.shape[2]]),v=(0,p.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),t.assert(4===v.rank,()=>"Error in avgPoolBackprop: dy must be rank 4 but got rank "+`${v.rank}.`),t.assert(4===f.rank,()=>"Error in avgPoolBackprop: input must be rank 4 but got rank "+`${f.rank}.`);const g={dy:v,input:f},P={filterSize:u,strides:i,pad:c},d=e.ENGINE.runKernelFunc(e=>{const r=n.computePool2DInfo(f.shape,u,i,1,c);return e.avgPoolBackprop(v,f,r)},g,null,r.AvgPoolBackprop,P);return h?(0,p.reshape)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const c=(0,a.op)({avgPoolBackprop_:i});exports.avgPoolBackprop=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"nTws":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/avg_pool_backprop");const r={kernelName:e.AvgPool,inputsToSave:["x"],gradFunc:(e,r,a)=>{const[s]=r,{filterSize:t,strides:p,pad:i}=a;return{x:()=>(0,o.avgPoolBackprop)(e,s,t,p,i)}}};exports.avgPoolGradConfig=r;
},{"../kernel_names":"r3vI","../ops/avg_pool_backprop":"S2bz"}],"vK3E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMulGradConfig=void 0;var a=require("../kernel_names"),t=require("../ops/mat_mul");const e={kernelName:a.BatchMatMul,inputsToSave:["a","b"],gradFunc:(a,e,r)=>{const[u,l]=e,{transposeA:s,transposeB:M}=r;return s||M?!s&&M?{a:()=>(0,t.matMul)(a,l,!1,!1),b:()=>(0,t.matMul)(a,u,!0,!1)}:s&&!M?{a:()=>(0,t.matMul)(l,a,!1,!0),b:()=>(0,t.matMul)(u,a,!1,!1)}:{a:()=>(0,t.matMul)(l,a,!0,!0),b:()=>(0,t.matMul)(a,u,!0,!0)}:{a:()=>(0,t.matMul)(a,l,!1,!0),b:()=>(0,t.matMul)(u,a,!0,!1)}}};exports.batchMatMulGradConfig=e;
},{"../kernel_names":"r3vI","../ops/mat_mul":"A3yk"}],"HgCv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceNDGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/space_to_batch_nd");const a={kernelName:e.BatchToSpaceND,gradFunc:(e,a,o)=>{const{blockShape:c,crops:t}=o;return{x:()=>(0,r.spaceToBatchND)(e,c,t)}}};exports.batchToSpaceNDGradConfig=a;
},{"../kernel_names":"r3vI","../ops/space_to_batch_nd":"nPoV"}],"VUnB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastToGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/sum");const o={kernelName:e.BroadcastTo,gradFunc:(e,o,t)=>{const a=t,s=a.inputShape,n=a.shape,c=Array.from(n);for(let r=s.length-1;r>=0;r--)if(s[r]===n[r])c[r]=1;else if(1!==s[r])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${n}].`);const d=[];for(let r=0;r<c.length;r++)c[r]>1&&d.push(r);return{x:()=>(0,r.sum)(e,d,!0)}}};exports.broadcastToGradConfig=o;
},{"../kernel_names":"r3vI","../ops/sum":"YHNB"}],"KxrM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.castGradConfig=void 0;var e=require("../kernel_names");const r={kernelName:e.Cast,gradFunc:e=>({x:()=>e.clone()})};exports.castGradConfig=r;
},{"../kernel_names":"r3vI"}],"LcPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const i={kernelName:e.Ceil,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.ceilGradConfig=i;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"qCpm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValueGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/greater_equal"),l=require("../ops/less_equal"),a=require("../ops/logical_and"),i=require("../ops/where"),s=require("../ops/zeros_like");const u={kernelName:e.ClipByValue,inputsToSave:["x"],gradFunc:(e,u,o)=>{const[p]=u,{clipValueMin:n,clipValueMax:t}=o;return{x:()=>(0,i.where)((0,a.logicalAnd)((0,r.greaterEqual)(p,n),(0,l.lessEqual)(p,t)),e,(0,s.zerosLike)(e))}}};exports.clipByValueGradConfig=u;
},{"../kernel_names":"r3vI","../ops/greater_equal":"wG0H","../ops/less_equal":"NxL8","../ops/logical_and":"ntJL","../ops/where":"AEtV","../ops/zeros_like":"Jky8"}],"QcRZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/split"),a=require("../util");const s={kernelName:e.Concat,saveAllInputs:!0,gradFunc:(e,s,t)=>{const n=s.map(e=>e.shape),{axis:o}=t,p=(0,a.parseAxisParam)(o,s[0].shape)[0],i=n.map(e=>e[p]);return(0,r.split)(e,i,p).map(e=>()=>e)}};exports.concatGradConfig=s;
},{"../kernel_names":"r3vI","../ops/split":"L2gY","../util":"UxaK"}],"NnOQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv2d_backprop_filter"),t=require("../ops/conv2d_backprop_input"),n=a(require("../ops/conv_util")),o=a(require("../util"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const p={kernelName:e.Conv2D,inputsToSave:["x","filter"],gradFunc:(e,i,a)=>{const[p,u]=i,{dilations:s,strides:c,pad:l,dataFormat:f}=a;return o.assert(n.tupleValuesAreOne(s),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${s}'`),{x:()=>(0,t.conv2DBackpropInput)(p.shape,e,u,c,l,f),filter:()=>(0,r.conv2DBackpropFilter)(p,e,u.shape,c,l,f)}}};exports.conv2DGradConfig=p;
},{"../kernel_names":"r3vI","../ops/conv2d_backprop_filter":"Y2RI","../ops/conv2d_backprop_input":"ufM1","../ops/conv_util":"cqi6","../util":"UxaK"}],"bggh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInputGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv2d"),o=require("../ops/conv2d_backprop_filter");const n={kernelName:e.Conv2DBackpropInput,inputsToSave:["dy","filter"],gradFunc:(e,n,p)=>{const[t,a]=n,{strides:d,pad:c,dataFormat:i,dimRoundingMode:s}=p;return{dy:()=>(0,r.conv2d)(e,a,d,c,i,1,s),filter:()=>(0,o.conv2DBackpropFilter)(e,t,a.shape,d,c,i,s)}}};exports.conv2DBackpropInputGradConfig=n;
},{"../kernel_names":"r3vI","../ops/conv2d":"K8t2","../ops/conv2d_backprop_filter":"Y2RI"}],"Rks7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=s(require("../util")),n=s(require("./conv_util")),o=require("./operation"),p=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var p=n?Object.getOwnPropertyDescriptor(e,o):null;p&&(p.get||p.set)?Object.defineProperty(t,o,p):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function i(o,a,s,i,u){let c=o;4===o.rank&&(c=(0,p.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]));let l=a;4===l.rank&&(l=(0,p.reshape)(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),t.assert(5===c.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+`${c.shape}.`),t.assert(5===l.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+`${l.shape}.`),t.assert(5===s.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+`${s}.`),t.assert(c.shape[4]===s[3],()=>`Error in conv3dDerFilter: depth of input ${c.shape[4]}) must `+`match input depth in filter (${s[3]}.`),t.assert(l.shape[4]===s[4],()=>`Error in conv3dDerFilter: depth of dy (${l.shape[4]}) must `+`match output depth for filter (${s[4]}).`);const h={x:c,dy:l},f={strides:i,pad:u,filterShape:s};return e.ENGINE.runKernelFunc(e=>{const r=n.computeConv3DInfo(c.shape,s,i,1,u);return e.conv3dDerFilter(c,l,r)},h,null,r.Conv3DBackpropFilterV2,f)}const u=(0,o.op)({conv3DBackpropFilter_:i});exports.conv3DBackpropFilter=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"HQiu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv3d_backprop_filter"),t=require("../ops/conv3d_backprop_input"),n=require("../ops/conv_util"),o=a(require("../util"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const p={kernelName:e.Conv3D,inputsToSave:["x","filter"],gradFunc:(e,i,a)=>{const{dilations:p,strides:u,pad:s}=a;o.assert((0,n.tupleValuesAreOne)(p),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+`not yet supported in gradients. Got dilations '${p}'`);const[c,l]=i;return{x:()=>(0,t.conv3DBackpropInput)(c.shape,e,l,u,s),filter:()=>(0,r.conv3DBackpropFilter)(c,e,l.shape,u,s)}}};exports.conv3DGradConfig=p;
},{"../kernel_names":"r3vI","../ops/conv3d_backprop_filter":"Rks7","../ops/conv3d_backprop_input":"zJgE","../ops/conv_util":"cqi6","../util":"UxaK"}],"kZFP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),o=require("../ops/neg"),n=require("../ops/sin");const t={kernelName:e.Cos,inputsToSave:["x"],gradFunc:(e,t)=>{const[i]=t;return{x:()=>(0,s.mul)((0,o.neg)((0,n.sin)((0,r.cast)(i,"float32"))),e)}}};exports.cosGradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/sin":"AwzN"}],"CUjH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),o=require("../ops/sinh");const t={kernelName:e.Cosh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,s.mul)((0,o.sinh)((0,r.cast)(n,"float32")),e)}}};exports.coshGradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/mul":"WS4w","../ops/sinh":"nOJq"}],"kdoE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),s=require("../ops/cumsum"),u=require("../ops/transpose");const t={kernelName:e.Cumsum,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[o]=t,{axis:i,exclusive:a,reverse:m}=n;return{x:()=>{const t=(0,r.getAxesPermutation)([i],o.rank);let n=(0,s.cumsum)(e,i,a,!m);return null!=t&&(n=(0,u.transpose)(n,t)),n}}}};exports.cumsumGradConfig=t;
},{"../kernel_names":"r3vI","../ops/axis_util":"uTbM","../ops/cumsum":"MovR","../ops/transpose":"yiEV"}],"w99S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeGradConfig=void 0;var e=require("../kernel_names"),t=a(require("../ops/conv_util")),r=require("../ops/depthwise_conv2d_native_backprop_filter"),n=require("../ops/depthwise_conv2d_native_backprop_input"),i=a(require("../util"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}const s={kernelName:e.DepthwiseConv2dNative,inputsToSave:["x","filter"],gradFunc:(e,o,a)=>{const{dilations:s,strides:d,pad:p,dimRoundingMode:u}=a,l=null==s?[1,1]:s;i.assert(t.tupleValuesAreOne(l),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+`'${l}'`);const[v,f]=o;return i.assert(4===v.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+`rank 4, but got rank ${v.rank}.`),i.assert(4===f.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+`rank 4, but got rank ${f.rank}.`),i.assert(v.shape[3]===f.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+`channels (${v.shape[3]}) must match the inChannels dimension `+`in filter ${f.shape[2]}.`),i.assert(t.eitherStridesOrDilationsAreOne(d,l),()=>"Error in gradient of depthwiseConv2d: Either strides or "+`dilations must be  1. Got strides ${d} and dilations `+`'${l}'.`),null!=u&&i.assert(i.isInt(p),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${u} but got pad ${p}.`),{x:()=>(0,n.depthwiseConv2dNativeBackpropInput)(v.shape,e,f,d,p,s,u),filter:()=>(0,r.depthwiseConv2dNativeBackpropFilter)(v,e,f.shape,d,p,s,u)}}};exports.depthwiseConv2dNativeGradConfig=s;
},{"../kernel_names":"r3vI","../ops/conv_util":"cqi6","../ops/depthwise_conv2d_native_backprop_filter":"NeJN","../ops/depthwise_conv2d_native_backprop_input":"xNAn","../util":"UxaK"}],"c6gQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const i={kernelName:r.Dilation2D,inputsToSave:["x","filter"],gradFunc:(i,n,t)=>{const[o,l]=n,a={x:o,filter:l,dy:i},d={x:o,filter:l,dy:i};return{x:()=>e.ENGINE.runKernel(r.Dilation2DBackpropInput,a,t),filter:()=>e.ENGINE.runKernel(r.Dilation2DBackpropFilter,d,t)}}};exports.dilation2dGradConfig=i;
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"JZv5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divGradConfig=void 0;var e=require("../kernel_names"),r=c(require("../ops/broadcast_util")),t=require("../ops/cast"),s=require("../ops/div"),n=require("../ops/mul"),o=require("../ops/neg"),a=require("../ops/reshape"),u=require("../ops/square"),i=require("../ops/sum");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}const f={kernelName:e.Div,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[c,f]=p,l=r.assertAndGetBroadcastShape(c.shape,f.shape);return{a:()=>{const n=(0,s.div)(e,(0,t.cast)(f,"float32")),o=r.getReductionAxes(c.shape,l);return o.length>0?(0,a.reshape)((0,i.sum)(n,o),c.shape):n},b:()=>{let p=(0,n.mul)(e,(0,t.cast)(c,"float32"));const d=r.getReductionAxes(f.shape,l);d.length>0&&(p=(0,a.reshape)((0,i.sum)(p,d),f.shape));const v=(0,u.square)(f);return(0,o.neg)((0,s.div)(p,(0,t.cast)(v,"float32")))}}}};exports.divGradConfig=f;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/reshape":"khVG","../ops/square":"rLyD","../ops/sum":"YHNB"}],"WjnE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const u={kernelName:r.Elu,outputsToSave:[!0],gradFunc:(u,n)=>{const[l]=n,o=e=>e.eluDer(u,l),t={dy:u,y:l};return{x:()=>e.ENGINE.runKernelFunc(o,t,null,r.EluGrad)}}};exports.eluGradConfig=u;
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"Hv5I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),s=require("../ops/mul"),u=require("../ops/neg"),o=require("../ops/square");const t={kernelName:e.Erf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=(0,s.mul)((0,r.exp)((0,u.neg)((0,o.square)(n))),2/Math.sqrt(Math.PI));return{x:()=>(0,s.mul)(e,a)}}};exports.erfGradConfig=t;
},{"../kernel_names":"r3vI","../ops/exp":"S24W","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/square":"rLyD"}],"Xe3d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul");const o={kernelName:e.Exp,outputsToSave:[!0],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)(e,t)}}};exports.expGradConfig=o;
},{"../kernel_names":"r3vI","../ops/mul":"WS4w"}],"VuWk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),o=require("../ops/mul");const p={kernelName:e.Expm1,inputsToSave:["x"],gradFunc:(e,p)=>{const[s]=p;return{x:()=>(0,o.mul)(e,(0,r.exp)(s))}}};exports.expm1GradConfig=p;
},{"../kernel_names":"r3vI","../ops/exp":"S24W","../ops/mul":"WS4w"}],"BY2s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.Floor,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.floorGradConfig=o;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"OLbI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/cast"),o=require("../ops/div"),t=require("../ops/mul"),a=require("../ops/neg"),u=require("../ops/reshape"),i=require("../ops/square"),n=require("../ops/sum");const p={kernelName:e.FloorDiv,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[c,l]=p,d=(0,r.assertAndGetBroadcastShape)(c.shape,l.shape);return{a:()=>{const t=(0,o.div)(e,(0,s.cast)(l,"float32")),a=(0,r.getReductionAxes)(c.shape,d);return a.length>0?(0,u.reshape)((0,n.sum)(t,a),c.shape):t},b:()=>{let p=(0,t.mul)(e,(0,s.cast)(c,"float32"));const h=(0,r.getReductionAxes)(l.shape,d);h.length>0&&(p=(0,u.reshape)((0,n.sum)(p,h),l.shape));const q=(0,i.square)(l);return(0,a.neg)((0,o.div)(p,(0,s.cast)(q,"float32")))}}}};exports.floorDivGradConfig=p;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/reshape":"khVG","../ops/square":"rLyD","../ops/sum":"YHNB"}],"sMFs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedBatchNormGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/broadcast_util"),a=require("../ops/mul"),u=require("../ops/reshape"),l=require("../ops/rsqrt"),p=require("../ops/scalar"),t=require("../ops/sub"),n=require("../ops/sum"),o=require("../ops/tile");const m={kernelName:e.FusedBatchNorm,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,m,h)=>{const{varianceEpsilon:i}=h,[c,d,q,f]=m,k=null==f?(0,p.scalar)(1):f,v=(0,s.getReductionAxes)(d.shape,c.shape),x=[];if(1===d.rank){for(let e=0;e<c.shape.length-1;++e)x.push(c.shape[e]);x.push(1)}const g=(0,t.sub)(c,d),b=(0,a.mul)(e,k),N=(0,l.rsqrt)((0,r.add)(q,(0,p.scalar)(i))),_=(0,a.mul)((0,a.mul)((0,a.mul)(N,N),N),(0,p.scalar)(-.5));return{x:()=>1===d.rank?(0,u.reshape)((0,a.mul)((0,a.mul)(e,(0,o.tile)((0,u.reshape)(N,[1,1,1,d.shape[0]]),x)),k),c.shape):(0,u.reshape)((0,a.mul)((0,a.mul)(e,N),k),c.shape),mean:()=>{let e=(0,a.mul)((0,a.mul)(N,(0,p.scalar)(-1)),b);return 1===d.rank&&(e=(0,n.sum)(e,v)),(0,u.reshape)(e,d.shape)},variance:()=>{let e=(0,a.mul)((0,a.mul)(_,g),b);return 1===d.rank&&(e=(0,n.sum)(e,v)),(0,u.reshape)(e,d.shape)},scale:()=>{const r=(0,a.mul)(g,N);let s=(0,a.mul)(e,r);return 1===d.rank&&(s=(0,n.sum)(s,v)),(0,u.reshape)(s,d.shape)},offset:()=>{let r=e;return 1===d.rank&&(r=(0,n.sum)(r,v)),(0,u.reshape)(r,d.shape)}}}};exports.fusedBatchNormGradConfig=m;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/broadcast_util":"nprq","../ops/mul":"WS4w","../ops/reshape":"khVG","../ops/rsqrt":"paOW","../ops/scalar":"RBNv","../ops/sub":"OFjl","../ops/sum":"YHNB","../ops/tile":"C900"}],"O4MZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),s=require("../ops/reshape"),t=require("../ops/transpose"),n=require("../ops/unsorted_segment_sum"),o=require("../util");const i={kernelName:e.GatherV2,inputsToSave:["x","indices"],gradFunc:(e,i,p)=>{const[l,c]=i,{axis:h}=p,g=(0,o.parseAxisParam)(h,l.shape)[0];return{x:()=>{const o=l.shape,i=c.size,p=o.slice(0,g),d=p.length,x=o.slice(h,o.length).slice(1),f=x.length,m=a(0,d),q=a(d+1,d+1+f),_=u([p,[i],x]),v=(0,s.reshape)(e,_),G=(0,s.reshape)(c,[i]),P=u([[d],m,q]),S=(0,t.transpose)(v,P);let k=(0,n.unsortedSegmentSum)(S,G,l.shape[g]);const A=(0,r.getUndoAxesPermutation)(P);return k=(0,t.transpose)(k,A)},indices:()=>c}}};function a(e,r){const s=[];for(let t=e;t<r;++t)s.push(t);return s}function u(e){const r=[];for(let s=0;s<e.length;++s)for(let t=0;t<e[s].length;++t)r.push(e[s][t]);return r}exports.gatherGradConfig=i;
},{"../kernel_names":"r3vI","../ops/axis_util":"uTbM","../ops/reshape":"khVG","../ops/transpose":"yiEV","../ops/unsorted_segment_sum":"U01C","../util":"UxaK"}],"QaXx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqualGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const a={kernelName:e.GreaterEqual,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,s]=a;return{a:()=>(0,r.zerosLike)(o),b:()=>(0,r.zerosLike)(s)}}};exports.greaterEqualGradConfig=a;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"chpp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identityGradConfig=void 0;var e=require("../kernel_names"),t=require("../ops/cast");const r={kernelName:e.Identity,gradFunc:e=>({x:()=>(0,t.cast)(e,"float32")})};exports.identityGradConfig=r;
},{"../kernel_names":"r3vI","../ops/cast":"owKL"}],"PGlW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const i={kernelName:e.IsFinite,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isFiniteGradConfig=i;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"WJpd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.IsInf,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isInfGradConfig=s;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"z4ku":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.IsNan,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.isNanGradConfig=s;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"ehuk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),o=require("../ops/div");const d={kernelName:e.Log1p,inputsToSave:["x"],gradFunc:(e,d)=>{const[s]=d;return{x:()=>(0,o.div)(e,(0,r.add)(s,1))}}};exports.log1pGradConfig=d;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/div":"XyQ4"}],"YMQp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),o=require("../ops/div");const s={kernelName:e.Log,inputsToSave:["x"],gradFunc:(e,s)=>{const[t]=s;return{x:()=>(0,o.div)(e,(0,r.cast)(t,"float32"))}}};exports.logGradConfig=s;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4"}],"sFXD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSoftmaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),o=require("../ops/mul"),s=require("../ops/sub"),u=require("../ops/sum");const t={kernelName:e.LogSoftmax,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,a)=>{const[i]=t,{axis:n}=a;return{logits:()=>{const t=(0,r.exp)(i);return(0,s.sub)(e,(0,o.mul)((0,u.sum)(e,n,!0),t))}}}};exports.logSoftmaxGradConfig=t;
},{"../kernel_names":"r3vI","../ops/exp":"S24W","../ops/mul":"WS4w","../ops/sub":"OFjl","../ops/sum":"YHNB"}],"yrgR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localResponseNormalizationBackprop=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("./operation");function a(r,a,n,p=5,i=1,s=1,t=.5){const l={x:r,y:a,dy:n},c={depthRadius:p,bias:i,alpha:s,beta:t};return e.ENGINE.runKernelFunc(e=>e.LRNGrad(n,r,a,p,i,s,t),l,null,o.LRNBackprop,c)}const n=(0,r.op)({localResponseNormalizationBackprop_:a});exports.localResponseNormalizationBackprop=n;
},{"../engine":"tmUz","../kernel_names":"r3vI","./operation":"rO1i"}],"rSv0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lrnGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/local_response_normalization_backprop");const o={kernelName:e.LRN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,o,a)=>{const[n,s]=o,{depthRadius:t,bias:p,alpha:i,beta:l}=a;return{x:()=>(0,r.localResponseNormalizationBackprop)(n,s,e,t,p,i,l)}}};exports.lrnGradConfig=o;
},{"../kernel_names":"r3vI","../ops/local_response_normalization_backprop":"yrgR"}],"plb7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gradForMinAndMax=o;var e=u(require("../ops/axis_util")),r=require("../ops/cast"),t=require("../ops/equal"),n=require("../ops/mul"),a=require("../ops/reshape");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=n?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(t,a,u):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function o(p,u,o,i){return u.rank<o.rank&&(u=(0,a.reshape)(u,e.expandShapeToKeepDim(u.shape,i))),p.rank<o.rank&&(p=(0,a.reshape)(p,e.expandShapeToKeepDim(p.shape,i))),{x:()=>{return(0,n.mul)(p,(0,r.cast)((0,t.equal)(o,u),p.dtype))}}}
},{"../ops/axis_util":"uTbM","../ops/cast":"owKL","../ops/equal":"nLPx","../ops/mul":"WS4w","../ops/reshape":"khVG"}],"xKAA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../util")),t=require("./min_max_grad_util");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(t,a,u):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}const a={kernelName:e.Max,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,o)=>{const a=o,{reductionIndices:u}=a,i=n[0],p=n[1],s=r.parseAxisParam(u,i.shape),c=(0,t.gradForMinAndMax)(e,p,i,s);return{x:()=>c.x()}}};exports.maxGradConfig=a;
},{"../kernel_names":"r3vI","../util":"UxaK","./min_max_grad_util":"plb7"}],"sao6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),a=require("../ops/greater_equal"),s=require("../ops/less"),u=require("../ops/mul");const t={kernelName:e.Maximum,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[o,i]=t;return{a:()=>(0,u.mul)(e,(0,r.cast)((0,a.greaterEqual)(o,i),"float32")),b:()=>(0,u.mul)(e,(0,r.cast)((0,s.less)(o,i),"float32"))}}};exports.maximumGradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/greater_equal":"wG0H","../ops/less":"PrnK","../ops/mul":"WS4w"}],"zhIk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3dBackprop=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=i(require("../util")),a=i(require("./conv_util")),n=require("./operation"),p=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var o={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=t?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(o,a,n):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function u(n,s,i,u,l,c=[1,1,1],d,k){const h=(0,o.convertToTensor)(n,"dy","maxPool3dBackprop"),f=(0,o.convertToTensor)(s,"input","maxPool3dBackprop"),m=(0,o.convertToTensor)(i,"output","maxPool3dBackprop");let P=h,b=f,x=m,g=!1;4===f.rank&&(g=!0,P=(0,p.reshape)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]]),b=(0,p.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]]),x=(0,p.reshape)(m,[1,m.shape[0],m.shape[1],m.shape[2],m.shape[3]])),t.assert(5===P.rank,()=>"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+`${P.rank}.`),t.assert(5===b.rank,()=>"Error in maxPool3dBackprop: input must be rank 5 but got rank "+`${b.rank}.`),t.assert(5===x.rank,()=>"Error in maxPool3dBackprop: output must be rank 5 but got rank "+`${x.rank}.`),t.assert(a.eitherStridesOrDilationsAreOne(l,c),()=>"Error in maxPool3dBackprop: Either strides or dilations "+`must be 1. Got strides ${l} and dilations '${c}'`),null!=k&&t.assert(t.isInt(d),()=>"Error in maxPool3dBackprop: pad must be an integer when "+`using, dimRoundingMode ${k} but got pad ${d}.`);const v={dy:P,input:b,output:x},y={filterSize:u,strides:l,dilations:c,pad:d,dimRoundingMode:k},B=e.ENGINE.runKernelFunc(e=>{const r=a.computePool3DInfo(b.shape,u,l,c,d,k);return e.maxPool3dBackprop(P,b,x,r)},v,null,r.MaxPool3DBackprop,y);return g?(0,p.reshape)(B,[B.shape[1],B.shape[2],B.shape[3],B.shape[4]]):B}const l=(0,n.op)({maxPool3dBackprop_:u});exports.maxPool3dBackprop=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"rdNq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3DGradConfig=void 0;var o=require("../kernel_names"),e=require("../ops/max_pool_3d_backprop");const r={kernelName:o.MaxPool3D,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(o,r,a)=>{const[t,i]=r,{filterSize:n,strides:s,dilations:d,pad:l,dimRoundingMode:p}=a,u=null==d?[1,1,1]:d;return{x:()=>(0,e.maxPool3dBackprop)(o,t,i,n,s,u,l,p)}}};exports.maxPool3DGradConfig=r;
},{"../kernel_names":"r3vI","../ops/max_pool_3d_backprop":"zhIk"}],"wx85":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolBackprop=void 0;var r=require("../engine"),e=require("../kernel_names"),o=require("../tensor_util_env"),t=p(require("../util")),n=p(require("./conv_util")),a=require("./operation");function u(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return u=function(){return r},r}function p(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=u();if(e&&e.has(r))return e.get(r);var o={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var a=t?Object.getOwnPropertyDescriptor(r,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=r[n]}return o.default=r,e&&e.set(r,o),o}function i(a,u,p,i,c,s,l){const k=(0,o.convertToTensor)(a,"dy","maxPoolBackprop"),f=(0,o.convertToTensor)(u,"input","maxPoolBackprop"),d=(0,o.convertToTensor)(p,"output","maxPoolBackprop");t.assert(f.rank===k.rank,()=>`Rank of input (${f.rank}) does not match rank of dy `+`(${k.rank})`),t.assert(4===k.rank,()=>"Error in maxPoolBackprop: dy must be rank 4 but got rank "+`${k.rank}.`),t.assert(4===f.rank,()=>"Error in maxPoolBackprop: input must be rank 4 but got rank "+`${f.rank}.`),null!=l&&t.assert(t.isInt(s),()=>"Error in maxPoolBackprop: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${s}.`);const m={dy:k,input:f,output:d},P={filterSize:i,strides:c,pad:s,dimRoundingMode:l};return r.ENGINE.runKernelFunc(r=>{const e=n.computePool2DInfo(f.shape,i,c,1,s,l);return r.maxPoolBackprop(k,f,d,e)},m,null,e.MaxPoolBackprop,P)}const c=(0,a.op)({maxPoolBackprop_:i});exports.maxPoolBackprop=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i"}],"KGPU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/max_pool_backprop");const r={kernelName:e.MaxPool,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,r,a)=>{const[t,s]=r,{filterSize:p,strides:i,pad:n}=a;return{x:()=>(0,o.maxPoolBackprop)(e,t,s,p,i,n)}}};exports.maxPoolGradConfig=r;
},{"../kernel_names":"r3vI","../ops/max_pool_backprop":"wx85"}],"eNaP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../util")),t=require("./min_max_grad_util");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(t,i,a):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}const i={kernelName:e.Min,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,o)=>{const i=o,{axis:a}=i,[u,p]=n,s=r.parseAxisParam(a,u.shape),f=(0,t.gradForMinAndMax)(e,p,u,s);return{x:()=>f.x()}}};exports.minGradConfig=i;
},{"../kernel_names":"r3vI","../util":"UxaK","./min_max_grad_util":"plb7"}],"aUL2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/greater"),a=require("../ops/less_equal"),u=require("../ops/mul");const t={kernelName:e.Minimum,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[i,o]=t;return{a:()=>(0,u.mul)(e,(0,r.cast)((0,a.lessEqual)(i,o),"float32")),b:()=>(0,u.mul)(e,(0,r.cast)((0,s.greater)(i,o),"float32"))}}};exports.minimumGradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/greater":"i1I6","../ops/less_equal":"NxL8","../ops/mul":"WS4w"}],"Zcv1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPadGradConfig=void 0;var r=require("../kernel_names"),e=require("../ops/slice");const o={kernelName:r.MirrorPad,inputsToSave:["x"],gradFunc:(r,o,s)=>{const a=o[0],{paddings:i}=s,n=i.map(r=>r[0]);return{x:()=>(0,e.slice)(r,n,a.shape)}}};exports.mirrorPadGradConfig=o;
},{"../kernel_names":"r3vI","../ops/slice":"xcz4"}],"UdE5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/div"),o=require("../ops/floor"),t=require("../ops/mul"),a=require("../ops/neg"),u=require("../ops/reshape"),n=require("../ops/sum");const p={kernelName:e.Mod,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[i,d]=p,h=(0,r.assertAndGetBroadcastShape)(i.shape,d.shape);return{a:()=>{const s=(0,r.getReductionAxes)(i.shape,h);return s.length>0?(0,u.reshape)((0,n.sum)(e,s),i.shape):e},b:()=>{const p=(0,t.mul)(e,(0,a.neg)((0,o.floor)((0,s.div)(i,d)))),c=(0,r.getReductionAxes)(d.shape,h);return c.length>0?(0,u.reshape)((0,n.sum)(p,c),d.shape):p}}}};exports.modGradConfig=p;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/div":"XyQ4","../ops/floor":"mwl0","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/reshape":"khVG","../ops/sum":"YHNB"}],"SrEo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyGradConfig=void 0;var e=require("../kernel_names"),s=require("../ops/broadcast_util"),r=require("../ops/cast"),t=require("../ops/mul"),a=require("../ops/reshape"),u=require("../ops/sum");const o={kernelName:e.Multiply,inputsToSave:["a","b"],gradFunc:(e,o)=>{const[p,n]=o,i=(0,s.assertAndGetBroadcastShape)(p.shape,n.shape);return{a:()=>{const o=(0,t.mul)(e,(0,r.cast)(n,"float32")),l=(0,s.getReductionAxes)(p.shape,i);return l.length>0?(0,a.reshape)((0,u.sum)(o,l),p.shape):o},b:()=>{const o=(0,t.mul)(e,(0,r.cast)(p,"float32")),l=(0,s.getReductionAxes)(n.shape,i);return l.length>0?(0,a.reshape)((0,u.sum)(o,l),n.shape):o}}}};exports.multiplyGradConfig=o;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/cast":"owKL","../ops/mul":"WS4w","../ops/reshape":"khVG","../ops/sum":"YHNB"}],"GhaP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.negateGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/neg");const n={kernelName:e.Negate,gradFunc:e=>({x:()=>(0,r.neg)(e)})};exports.negateGradConfig=n;
},{"../kernel_names":"r3vI","../ops/neg":"wgz6"}],"Jx4I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHotGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/zeros");const r={kernelName:e.OneHot,inputsToSave:["indices"],gradFunc:(e,r)=>{const n=r[0];return{indices:()=>(0,o.zeros)(n.shape,"float32")}}};exports.oneHotGradConfig=r;
},{"../kernel_names":"r3vI","../ops/zeros":"MNgB"}],"ENnz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLikeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.OnesLike,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.onesLikeGradConfig=o;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"RuUc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/slice");const s={kernelName:e.PadV2,inputsToSave:["x"],gradFunc:(e,s,a)=>{const n=s[0],{paddings:o}=a,d=o.map(e=>e[0]);return{x:()=>(0,r.slice)(e,d,n.shape)}}};exports.padV2GradConfig=s;
},{"../kernel_names":"r3vI","../ops/slice":"xcz4"}],"jEC4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.powGradConfig=void 0;var e=require("../kernel_names"),r=h(require("../ops/broadcast_util")),t=require("../ops/cast"),o=require("../ops/greater"),s=require("../ops/log"),u=require("../ops/mul"),a=require("../ops/pow"),n=require("../ops/reshape"),p=require("../ops/scalar"),i=require("../ops/sub"),c=require("../ops/sum"),l=require("../ops/where"),f=require("../ops/zeros_like");function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(t,s,u):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}const g={kernelName:e.Pow,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,d)=>{const[h,g,q]=d,b=h,w=g,m=r.assertAndGetBroadcastShape(b.shape,w.shape);return{a:()=>{const o=(0,t.cast)(w,"float32");let s=(0,u.mul)(e,(0,u.mul)(o,(0,a.pow)(b,(0,i.sub)(o,(0,p.scalar)(1)))));const l=r.getReductionAxes(b.shape,m);return l.length>0&&(s=(0,c.sum)(s,l)),(0,n.reshape)(s,b.shape)},b:()=>{const t=(0,o.greater)(b,0),a=(0,l.where)(t,(0,s.log)(b),(0,f.zerosLike)(b));let p=(0,u.mul)(e,(0,u.mul)(q,a));const i=r.getReductionAxes(w.shape,m);return i.length>0&&(p=(0,c.sum)(p,i)),(0,n.reshape)(p,w.shape)}}}};exports.powGradConfig=g;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/cast":"owKL","../ops/greater":"i1I6","../ops/log":"UG1b","../ops/mul":"WS4w","../ops/pow":"FJnw","../ops/reshape":"khVG","../ops/scalar":"RBNv","../ops/sub":"OFjl","../ops/sum":"YHNB","../ops/where":"AEtV","../ops/zeros_like":"Jky8"}],"wVdz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/greater"),u=require("../ops/mul"),o=require("../ops/reshape"),a=require("../ops/sum"),p=require("../ops/where"),t=require("../ops/zeros_like");const i={kernelName:e.Prelu,inputsToSave:["x","alpha"],gradFunc:(e,i)=>{const[l,n]=i,h=(0,s.greater)(l,0);return{x:()=>(0,p.where)(h,e,(0,u.mul)(e,n)),alpha:()=>{let s=(0,p.where)(h,(0,t.zerosLike)(e),(0,u.mul)(e,l));const i=(0,r.getReductionAxes)(n.shape,e.shape);return i.length>0&&(s=(0,a.sum)(s,i)),(0,o.reshape)(s,n.shape)}}}};exports.preluGradConfig=i;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/greater":"i1I6","../ops/mul":"WS4w","../ops/reshape":"khVG","../ops/sum":"YHNB","../ops/where":"AEtV","../ops/zeros_like":"Jky8"}],"beGl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/div"),o=require("../ops/neg"),i=require("../ops/square");const s={kernelName:e.Reciprocal,inputsToSave:["x"],gradFunc:(e,s)=>{const[a]=s;return{x:()=>(0,r.div)(e,(0,o.neg)((0,i.square)(a)))}}};exports.reciprocalGradConfig=s;
},{"../kernel_names":"r3vI","../ops/div":"XyQ4","../ops/neg":"wgz6","../ops/square":"rLyD"}],"bs1b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/less_equal"),u=require("../ops/mul"),o=require("../ops/step");const t={kernelName:e.Relu6,inputsToSave:["x"],gradFunc:(e,t)=>{const[l]=t,a=(0,u.mul)((0,s.lessEqual)(l,6),(0,o.step)(l));return{x:()=>(0,u.mul)(e,(0,r.cast)(a,"float32"))}}};exports.relu6GradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/less_equal":"NxL8","../ops/mul":"WS4w","../ops/step":"DQ8I"}],"Bcxe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),t=require("../ops/step");const o={kernelName:e.Relu,inputsToSave:["x"],gradFunc:(e,o)=>{const[u]=o;return{x:()=>(0,s.mul)(e,(0,r.cast)((0,t.step)(u),"float32"))}}};exports.reluGradConfig=o;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/mul":"WS4w","../ops/step":"DQ8I"}],"BG8f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshapeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/reshape");const s={kernelName:e.Reshape,inputsToSave:["x"],gradFunc:(e,s)=>{const[a]=s;return{x:()=>(0,r.reshape)(e,a.shape)}}};exports.reshapeGradConfig=s;
},{"../kernel_names":"r3vI","../ops/reshape":"khVG"}],"awlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinearGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const i={kernelName:r.ResizeBilinear,inputsToSave:["images"],gradFunc:(i,n,s)=>{const[a]=n,o=e=>{const{alignCorners:r}=s;return e.resizeBilinearBackprop(i,a,r)},l={images:a};return{images:()=>e.ENGINE.runKernelFunc(o,l,null,r.ResizeBilinearGrad,s)}}};exports.resizeBilinearGradConfig=i;
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"ob4U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighborGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const s={kernelName:r.ResizeNearestNeighbor,inputsToSave:["images"],gradFunc:(s,i,n)=>{const[a]=i,o=e=>{const{alignCorners:r}=n;return e.resizeNearestNeighborBackprop(s,a,r)},t={images:a};return{images:()=>e.ENGINE.runKernelFunc(o,t,null,r.ResizeNearestNeighborGrad,n)}}};exports.resizeNearestNeighborGradConfig=s;
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"WaoH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverseGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/reverse"),s=require("../util");const a={kernelName:e.Reverse,gradFunc:(e,a,i)=>{const{dims:o}=i,t=(0,s.parseAxisParam)(o,e.shape);return{x:()=>(0,r.reverse)(e,t)}}};exports.reverseGradConfig=a;
},{"../kernel_names":"r3vI","../ops/reverse":"wt3J","../util":"UxaK"}],"mOuS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.Round,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.roundGradConfig=o;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"lPPF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/div"),o=require("../ops/mul"),s=require("../ops/neg"),t=require("../ops/pow");const i={kernelName:e.Rsqrt,inputsToSave:["x"],gradFunc:(e,i)=>{const[n]=i;return{x:()=>(0,s.neg)((0,r.div)(e,(0,o.mul)((0,t.pow)(n,1.5),2)))}}};exports.rsqrtGradConfig=i;
},{"../kernel_names":"r3vI","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/pow":"FJnw"}],"zQdj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectV2PoolGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/cast"),r=require("../ops/logical_not"),t=require("../ops/mul"),s=require("../ops/zeros_like");const i={kernelName:e.SelectV2,inputsToSave:["condition"],gradFunc:(e,i)=>{const[l]=i;return{condition:()=>(0,o.cast)((0,s.zerosLike)(l),"float32"),t:()=>(0,t.mul)(e,(0,o.cast)(l,e.dtype)),e:()=>(0,t.mul)(e,(0,o.cast)((0,r.logicalNot)(l),e.dtype))}}};exports.selectV2PoolGradConfig=i;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/logical_not":"SOqM","../ops/mul":"WS4w","../ops/zeros_like":"Jky8"}],"m3qz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/exp"),u=require("../ops/greater"),a=require("../ops/mul"),o=require("../ops/scalar"),t=require("../ops/selu_util"),l=require("../ops/where");const i={kernelName:e.Selu,inputsToSave:["x"],gradFunc:(e,i)=>{const[p]=i;return{x:()=>{const i=(0,u.greater)(p,(0,o.scalar)(0)),n=(0,o.scalar)(t.SELU_SCALEALPHA),c=(0,o.scalar)(t.SELU_SCALE),q=(0,a.mul)(e,c),x=(0,a.mul)((0,a.mul)(e,n),(0,s.exp)((0,r.cast)(p,"float32")));return(0,l.where)(i,q,x)}}}};exports.seluGradConfig=i;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/exp":"S24W","../ops/greater":"i1I6","../ops/mul":"WS4w","../ops/scalar":"RBNv","../ops/selu_util":"HqZV","../ops/where":"AEtV"}],"DqUB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/scalar"),o=require("../ops/sub");const u={kernelName:e.Sigmoid,outputsToSave:[!0],gradFunc:(e,u)=>{const[i]=u;return{x:()=>(0,r.mul)(e,(0,r.mul)(i,(0,o.sub)((0,s.scalar)(1),i)))}}};exports.sigmoidGradConfig=u;
},{"../kernel_names":"r3vI","../ops/mul":"WS4w","../ops/scalar":"RBNv","../ops/sub":"OFjl"}],"tdAx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.Sign,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.signGradConfig=s;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"Zimz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/cos"),o=require("../ops/mul");const n={kernelName:e.Sin,inputsToSave:["x"],gradFunc:(e,n)=>{const[t]=n;return{x:()=>(0,o.mul)((0,s.cos)((0,r.cast)(t,"float32")),e)}}};exports.sinGradConfig=n;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/cos":"Ky4d","../ops/mul":"WS4w"}],"gueI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/cosh"),o=require("../ops/mul");const n={kernelName:e.Sinh,inputsToSave:["x"],gradFunc:(e,n)=>{const[t]=n;return{x:()=>(0,o.mul)((0,s.cosh)((0,r.cast)(t,"float32")),e)}}};exports.sinhGradConfig=n;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/cosh":"q60v","../ops/mul":"WS4w"}],"MKFx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sliceGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/pad"),s=require("../ops/slice_util");const i={kernelName:e.Slice,inputsToSave:["x"],gradFunc:(e,i,a)=>{const[o]=i,{begin:n,size:t}=a,p=o.shape,[l,u]=(0,s.parseSliceParams)(o,n,t),c=[];for(let r=0;r<e.rank;r++)c.push([l[r],p[r]-l[r]-u[r]]);return{x:()=>(0,r.pad)(e,c)}}};exports.sliceGradConfig=i;
},{"../kernel_names":"r3vI","../ops/pad":"NuCu","../ops/slice_util":"sNMx"}],"ha7O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/sub"),o=require("../ops/sum");const u={kernelName:e.Softmax,outputsToSave:[!0],gradFunc:(e,u,t)=>{const[a]=u,{dim:i}=t,m=(0,r.mul)(e,a);return{logits:()=>(0,s.sub)(m,(0,r.mul)((0,o.sum)(m,[i],!0),a))}}};exports.softmaxGradConfig=u;
},{"../kernel_names":"r3vI","../ops/mul":"WS4w","../ops/sub":"OFjl","../ops/sum":"YHNB"}],"Gic5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/sigmoid");const o={kernelName:e.Softplus,inputsToSave:["x"],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)(e,(0,s.sigmoid)(t))}}};exports.softplusGradConfig=o;
},{"../kernel_names":"r3vI","../ops/mul":"WS4w","../ops/sigmoid":"QUTt"}],"XG60":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchNDGradConfig=void 0;var e=require("../kernel_names"),a=require("../ops/batch_to_space_nd");const r={kernelName:e.SpaceToBatchND,gradFunc:(e,r,o)=>{const{blockShape:c,paddings:t}=o;return{x:()=>(0,a.batchToSpaceND)(e,c,t)}}};exports.spaceToBatchNDGradConfig=r;
},{"../kernel_names":"r3vI","../ops/batch_to_space_nd":"dRKG"}],"ESFx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitVGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/concat");const t={kernelName:e.SplitV,gradFunc:(e,t,o)=>{const{axis:s}=o;return{x:()=>(0,r.concat)(e,s)}}};exports.splitVGradConfig=t;
},{"../kernel_names":"r3vI","../ops/concat":"gZir"}],"aCLZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),t=require("../ops/mul"),o=require("../ops/sqrt");const i={kernelName:e.Sqrt,inputsToSave:["x"],gradFunc:(e,i)=>{const[u]=i;return{x:()=>(0,s.div)(e,(0,t.mul)((0,o.sqrt)((0,r.cast)(u,"float32")),2))}}};exports.sqrtGradConfig=i;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/sqrt":"dGNr"}],"LM9I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul");const u={kernelName:e.Square,inputsToSave:["x"],gradFunc:(e,u)=>{const[a]=u;return{x:()=>(0,s.mul)(e,(0,s.mul)((0,r.cast)(a,"float32"),2))}}};exports.squareGradConfig=u;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/mul":"WS4w"}],"nen7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),u=require("../ops/scalar"),s=require("../ops/sub");const a={kernelName:e.SquaredDifference,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[n,o]=a,i=(0,u.scalar)(2);return{a:()=>(0,r.mul)(e,(0,r.mul)(i,(0,s.sub)(n,o))),b:()=>(0,r.mul)(e,(0,r.mul)(i,(0,s.sub)(o,n)))}}};exports.squaredDifferenceGradConfig=a;
},{"../kernel_names":"r3vI","../ops/mul":"WS4w","../ops/scalar":"RBNv","../ops/sub":"OFjl"}],"E822":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stepGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const s={kernelName:e.Step,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.stepGradConfig=s;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"VmoZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subGradConfig=void 0;var e=require("../kernel_names"),r=u(require("../ops/broadcast_util")),t=require("../ops/neg"),n=require("../ops/reshape"),s=require("../ops/sum");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var u=n?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(t,s,u):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}const a={kernelName:e.Sub,inputsToSave:["a","b"],gradFunc:(e,o)=>{const[u,a]=o,p=r.assertAndGetBroadcastShape(u.shape,a.shape);return{a:()=>{let t=e;const o=r.getReductionAxes(u.shape,p);return o.length>0&&(t=(0,s.sum)(t,o)),(0,n.reshape)(t,u.shape)},b:()=>{let o=e;const u=r.getReductionAxes(a.shape,p);return u.length>0&&(o=(0,s.sum)(o,u)),(0,n.reshape)((0,t.neg)(o),a.shape)}}}};exports.subGradConfig=a;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/neg":"wgz6","../ops/reshape":"khVG","../ops/sum":"YHNB"}],"Ll5d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/ones"),a=require("../ops/reshape"),o=require("../util");const u={kernelName:e.Sum,inputsToSave:["x"],gradFunc:(e,u,i)=>{const[n]=u,p=n.shape.slice(),{axis:t}=i;(0,o.parseAxisParam)(t,n.shape).forEach(e=>{p[e]=1});const l=(0,a.reshape)(e,p),c=(0,r.mul)(l,(0,s.ones)(n.shape,"float32"));return{x:()=>c}}};exports.sumGradConfig=u;
},{"../kernel_names":"r3vI","../ops/mul":"WS4w","../ops/ones":"eTx1","../ops/reshape":"khVG","../util":"UxaK"}],"lOHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cos"),s=require("../ops/div"),o=require("../ops/square");const n={kernelName:e.Tan,inputsToSave:["x"],gradFunc:(e,n)=>{const[a]=n;return{x:()=>(0,s.div)(e,(0,o.square)((0,r.cos)(a)))}}};exports.tanGradConfig=n;
},{"../kernel_names":"r3vI","../ops/cos":"Ky4d","../ops/div":"XyQ4","../ops/square":"rLyD"}],"Q5yl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul"),s=require("../ops/scalar"),u=require("../ops/square"),a=require("../ops/sub");const o={kernelName:e.Tanh,outputsToSave:[!0],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)((0,a.sub)((0,s.scalar)(1),(0,u.square)(t)),e)}}};exports.tanhGradConfig=o;
},{"../kernel_names":"r3vI","../ops/mul":"WS4w","../ops/scalar":"RBNv","../ops/square":"rLyD","../ops/sub":"OFjl"}],"GYbs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tileGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/slice"),a=require("../ops/zeros_like");const o={kernelName:e.Tile,inputsToSave:["x"],gradFunc:(e,o,t)=>{const[p]=o,{reps:i}=t;return{x:()=>{let o=(0,a.zerosLike)(p);if(1===p.rank)for(let a=0;a<i[0];++a)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0]],[p.shape[0]]));else if(2===p.rank)for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1]],[p.shape[0],p.shape[1]]));else if(3===p.rank)for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)for(let l=0;l<i[2];++l)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1],l*p.shape[2]],[p.shape[0],p.shape[1],p.shape[2]]));else{if(4!==p.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+`${p.rank} tensors yet.`);for(let a=0;a<i[0];++a)for(let t=0;t<i[1];++t)for(let l=0;l<i[2];++l)for(let n=0;n<i[3];++n)o=(0,r.add)(o,(0,s.slice)(e,[a*p.shape[0],t*p.shape[1],l*p.shape[2],n*p.shape[3]],[p.shape[0],p.shape[1],p.shape[2],p.shape[3]]))}return o}}}};exports.tileGradConfig=o;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/slice":"xcz4","../ops/zeros_like":"Jky8"}],"CEWw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/axis_util")),t=require("../ops/transpose");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(t,s,a):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}const s={kernelName:e.Transpose,gradFunc:(e,n,o)=>{const s=o,{perm:a}=s,u=r.getUndoAxesPermutation(a);return{x:()=>(0,t.transpose)(e,u)}}};exports.transposeGradConfig=s;
},{"../kernel_names":"r3vI","../ops/axis_util":"uTbM","../ops/transpose":"yiEV"}],"dci0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unpackGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/stack");const a={kernelName:e.Unpack,gradFunc:(e,a,n)=>{const s=n,{axis:t}=s;return{value:()=>(0,r.stack)(e,t)}}};exports.unpackGradConfig=a;
},{"../kernel_names":"r3vI","../ops/stack":"GHVB"}],"i7L5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/expand_dims"),o=require("../ops/gather"),s=require("../ops/greater_equal"),n=require("../ops/logical_and"),t=require("../ops/maximum"),a=require("../ops/ones"),i=require("../ops/scalar"),u=require("../ops/where"),m=require("../ops/zeros_like");const p={kernelName:e.UnsortedSegmentSum,inputsToSave:["segmentIds"],gradFunc:(e,r)=>{const[o]=r;return{x:()=>l(e,o)}}};function l(e,p){const l=(0,t.maximum)(p,(0,m.zerosLike)(p)),d=(0,o.gather)(e,l);let c=(0,s.greaterEqual)(p,(0,i.scalar)(0,"int32"));const g=d.rank-c.rank;for(let o=0;o<g;++o)c=(0,r.expandDims)(c,o+1);c=(0,n.logicalAnd)(c,(0,a.ones)(d.shape,"bool"));const q=(0,m.zerosLike)(d);return(0,u.where)(c,d,q)}exports.unsortedSegmentSumGradConfig=p;
},{"../kernel_names":"r3vI","../ops/expand_dims":"uPYU","../ops/gather":"Quad","../ops/greater_equal":"wG0H","../ops/logical_and":"ntJL","../ops/maximum":"nmNC","../ops/ones":"eTx1","../ops/scalar":"RBNv","../ops/where":"AEtV","../ops/zeros_like":"Jky8"}],"dKhv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLikeGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.ZerosLike,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.zerosLikeGradConfig=o;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"Y37a":[function(require,module,exports) {
"use strict";var r=require("./gradients/Abs_grad"),e=require("./gradients/Acos_grad"),a=require("./gradients/Acosh_grad"),i=require("./gradients/Add_grad"),d=require("./gradients/AddN_grad"),g=require("./gradients/ArgMax_grad"),n=require("./gradients/ArgMin_grad"),o=require("./gradients/Asin_grad"),t=require("./gradients/Asinh_grad"),s=require("./gradients/Atan2_grad"),u=require("./gradients/Atan_grad"),f=require("./gradients/Atanh_grad"),C=require("./gradients/AvgPool3D_grad"),q=require("./gradients/AvgPool_grad"),G=require("./gradients/BatchMatMul_grad"),_=require("./gradients/BatchToSpaceND_grad"),l=require("./gradients/BroadcastTo_grad"),c=require("./gradients/Cast_grad"),p=require("./gradients/Ceil_grad"),m=require("./gradients/ClipByValue_grad"),h=require("./gradients/Concat_grad"),S=require("./gradients/Conv2D_grad"),D=require("./gradients/Conv2DBackpropInput_grad"),v=require("./gradients/Conv3D_grad"),x=require("./gradients/Cos_grad"),N=require("./gradients/Cosh_grad"),M=require("./gradients/Cumsum_grad"),A=require("./gradients/DepthwiseConv2dNative_grad"),B=require("./gradients/Dilation2D_grad"),P=require("./gradients/Div_grad"),T=require("./gradients/Elu_grad"),V=require("./gradients/Erf_grad"),R=require("./gradients/Exp_grad"),b=require("./gradients/Expm1_grad"),k=require("./gradients/Floor_grad"),I=require("./gradients/FloorDiv_grad"),L=require("./gradients/FusedBatchNorm_grad"),y=require("./gradients/GatherV2_grad"),E=require("./gradients/GreaterEqual_grad"),z=require("./gradients/Identity_grad"),F=require("./gradients/IsFinite_grad"),w=require("./gradients/IsInf_grad"),H=require("./gradients/IsNan_grad"),O=require("./gradients/Log1p_grad"),U=require("./gradients/Log_grad"),Z=require("./gradients/LogSoftmax_grad"),j=require("./gradients/LRN_grad"),J=require("./gradients/Max_grad"),K=require("./gradients/Maximum_grad"),Q=require("./gradients/MaxPool3D_grad"),W=require("./gradients/MaxPool_grad"),X=require("./gradients/Min_grad"),Y=require("./gradients/Minimum_grad"),$=require("./gradients/MirrorPad_grad"),rr=require("./gradients/Mod_grad"),er=require("./gradients/Multiply_grad"),ar=require("./gradients/Negate_grad"),ir=require("./gradients/OneHot_grad"),dr=require("./gradients/OnesLike_grad"),gr=require("./gradients/PadV2_grad"),nr=require("./gradients/Pow_grad"),or=require("./gradients/Prelu_grad"),tr=require("./gradients/Reciprocal_grad"),sr=require("./gradients/Relu6_grad"),ur=require("./gradients/Relu_grad"),fr=require("./gradients/Reshape_grad"),Cr=require("./gradients/ResizeBilinear_grad"),qr=require("./gradients/ResizeNearestNeighbor_grad"),Gr=require("./gradients/Reverse_grad"),_r=require("./gradients/Round_grad"),lr=require("./gradients/Rsqrt_grad"),cr=require("./gradients/SelectV2_grad"),pr=require("./gradients/Selu_grad"),mr=require("./gradients/Sigmoid_grad"),hr=require("./gradients/Sign_grad"),Sr=require("./gradients/Sin_grad"),Dr=require("./gradients/Sinh_grad"),vr=require("./gradients/Slice_grad"),xr=require("./gradients/Softmax_grad"),Nr=require("./gradients/Softplus_grad"),Mr=require("./gradients/SpaceToBatchND_grad"),Ar=require("./gradients/SplitV_grad"),Br=require("./gradients/Sqrt_grad"),Pr=require("./gradients/Square_grad"),Tr=require("./gradients/SquaredDifference_grad"),Vr=require("./gradients/Step_grad"),Rr=require("./gradients/Sub_grad"),br=require("./gradients/Sum_grad"),kr=require("./gradients/Tan_grad"),Ir=require("./gradients/Tanh_grad"),Lr=require("./gradients/Tile_grad"),yr=require("./gradients/Transpose_grad"),Er=require("./gradients/Unpack_grad"),zr=require("./gradients/UnsortedSegmentSum_grad"),Fr=require("./gradients/ZerosLike_grad"),wr=require("./kernel_registry");const Hr=[r.absGradConfig,e.acosGradConfig,a.acoshGradConfig,i.addGradConfig,d.addNGradConfig,g.argMaxGradConfig,n.argMinGradConfig,o.asinGradConfig,t.asinhGradConfig,s.atan2GradConfig,u.atanGradConfig,f.atanhGradConfig,C.avgPool3DGradConfig,q.avgPoolGradConfig,G.batchMatMulGradConfig,_.batchToSpaceNDGradConfig,l.broadcastToGradConfig,c.castGradConfig,p.ceilGradConfig,m.clipByValueGradConfig,h.concatGradConfig,D.conv2DBackpropInputGradConfig,S.conv2DGradConfig,v.conv3DGradConfig,x.cosGradConfig,N.coshGradConfig,M.cumsumGradConfig,A.depthwiseConv2dNativeGradConfig,B.dilation2dGradConfig,P.divGradConfig,T.eluGradConfig,V.erfGradConfig,R.expGradConfig,b.expm1GradConfig,I.floorDivGradConfig,k.floorGradConfig,L.fusedBatchNormGradConfig,y.gatherGradConfig,E.greaterEqualGradConfig,z.identityGradConfig,F.isFiniteGradConfig,w.isInfGradConfig,H.isNanGradConfig,O.log1pGradConfig,U.logGradConfig,Z.logSoftmaxGradConfig,j.lrnGradConfig,J.maxGradConfig,J.maxGradConfig,K.maximumGradConfig,Q.maxPool3DGradConfig,W.maxPoolGradConfig,X.minGradConfig,Y.minimumGradConfig,$.mirrorPadGradConfig,rr.modGradConfig,er.multiplyGradConfig,ar.negateGradConfig,ir.oneHotGradConfig,dr.onesLikeGradConfig,gr.padV2GradConfig,gr.padV2GradConfig,nr.powGradConfig,or.preluGradConfig,tr.reciprocalGradConfig,sr.relu6GradConfig,ur.reluGradConfig,fr.reshapeGradConfig,Cr.resizeBilinearGradConfig,qr.resizeNearestNeighborGradConfig,Gr.reverseGradConfig,_r.roundGradConfig,lr.rsqrtGradConfig,cr.selectV2PoolGradConfig,pr.seluGradConfig,mr.sigmoidGradConfig,hr.signGradConfig,Sr.sinGradConfig,Dr.sinhGradConfig,vr.sliceGradConfig,xr.softmaxGradConfig,Nr.softplusGradConfig,Mr.spaceToBatchNDGradConfig,Mr.spaceToBatchNDGradConfig,Ar.splitVGradConfig,Ar.splitVGradConfig,Br.sqrtGradConfig,Tr.squaredDifferenceGradConfig,Pr.squareGradConfig,Vr.stepGradConfig,Rr.subGradConfig,br.sumGradConfig,kr.tanGradConfig,Ir.tanhGradConfig,Lr.tileGradConfig,yr.transposeGradConfig,Er.unpackGradConfig,zr.unsortedSegmentSumGradConfig,Fr.zerosLikeGradConfig];for(const Or of Hr)(0,wr.registerGradient)(Or);
},{"./gradients/Abs_grad":"CWvo","./gradients/Acos_grad":"Z9tK","./gradients/Acosh_grad":"fdXA","./gradients/Add_grad":"QiSK","./gradients/AddN_grad":"VILb","./gradients/ArgMax_grad":"YIY7","./gradients/ArgMin_grad":"gDQn","./gradients/Asin_grad":"hRMR","./gradients/Asinh_grad":"W857","./gradients/Atan2_grad":"K17p","./gradients/Atan_grad":"naiu","./gradients/Atanh_grad":"Z2Wy","./gradients/AvgPool3D_grad":"H2kR","./gradients/AvgPool_grad":"nTws","./gradients/BatchMatMul_grad":"vK3E","./gradients/BatchToSpaceND_grad":"HgCv","./gradients/BroadcastTo_grad":"VUnB","./gradients/Cast_grad":"KxrM","./gradients/Ceil_grad":"LcPh","./gradients/ClipByValue_grad":"qCpm","./gradients/Concat_grad":"QcRZ","./gradients/Conv2D_grad":"NnOQ","./gradients/Conv2DBackpropInput_grad":"bggh","./gradients/Conv3D_grad":"HQiu","./gradients/Cos_grad":"kZFP","./gradients/Cosh_grad":"CUjH","./gradients/Cumsum_grad":"kdoE","./gradients/DepthwiseConv2dNative_grad":"w99S","./gradients/Dilation2D_grad":"c6gQ","./gradients/Div_grad":"JZv5","./gradients/Elu_grad":"WjnE","./gradients/Erf_grad":"Hv5I","./gradients/Exp_grad":"Xe3d","./gradients/Expm1_grad":"VuWk","./gradients/Floor_grad":"BY2s","./gradients/FloorDiv_grad":"OLbI","./gradients/FusedBatchNorm_grad":"sMFs","./gradients/GatherV2_grad":"O4MZ","./gradients/GreaterEqual_grad":"QaXx","./gradients/Identity_grad":"chpp","./gradients/IsFinite_grad":"PGlW","./gradients/IsInf_grad":"WJpd","./gradients/IsNan_grad":"z4ku","./gradients/Log1p_grad":"ehuk","./gradients/Log_grad":"YMQp","./gradients/LogSoftmax_grad":"sFXD","./gradients/LRN_grad":"rSv0","./gradients/Max_grad":"xKAA","./gradients/Maximum_grad":"sao6","./gradients/MaxPool3D_grad":"rdNq","./gradients/MaxPool_grad":"KGPU","./gradients/Min_grad":"eNaP","./gradients/Minimum_grad":"aUL2","./gradients/MirrorPad_grad":"Zcv1","./gradients/Mod_grad":"UdE5","./gradients/Multiply_grad":"SrEo","./gradients/Negate_grad":"GhaP","./gradients/OneHot_grad":"Jx4I","./gradients/OnesLike_grad":"ENnz","./gradients/PadV2_grad":"RuUc","./gradients/Pow_grad":"jEC4","./gradients/Prelu_grad":"wVdz","./gradients/Reciprocal_grad":"beGl","./gradients/Relu6_grad":"bs1b","./gradients/Relu_grad":"Bcxe","./gradients/Reshape_grad":"BG8f","./gradients/ResizeBilinear_grad":"awlP","./gradients/ResizeNearestNeighbor_grad":"ob4U","./gradients/Reverse_grad":"WaoH","./gradients/Round_grad":"mOuS","./gradients/Rsqrt_grad":"lPPF","./gradients/SelectV2_grad":"zQdj","./gradients/Selu_grad":"m3qz","./gradients/Sigmoid_grad":"DqUB","./gradients/Sign_grad":"tdAx","./gradients/Sin_grad":"Zimz","./gradients/Sinh_grad":"gueI","./gradients/Slice_grad":"MKFx","./gradients/Softmax_grad":"ha7O","./gradients/Softplus_grad":"Gic5","./gradients/SpaceToBatchND_grad":"XG60","./gradients/SplitV_grad":"ESFx","./gradients/Sqrt_grad":"aCLZ","./gradients/Square_grad":"LM9I","./gradients/SquaredDifference_grad":"nen7","./gradients/Step_grad":"E822","./gradients/Sub_grad":"VmoZ","./gradients/Sum_grad":"Ll5d","./gradients/Tan_grad":"lOHk","./gradients/Tanh_grad":"Q5yl","./gradients/Tile_grad":"GYbs","./gradients/Transpose_grad":"CEWw","./gradients/Unpack_grad":"dci0","./gradients/UnsortedSegmentSum_grad":"i7L5","./gradients/ZerosLike_grad":"dKhv","./kernel_registry":"yMO5"}],"zcLW":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.abs=function(){return this.throwIfDisposed(),(0,r.abs)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"LKnl":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.acos=function(){return this.throwIfDisposed(),(0,r.acos)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"UBln":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.acosh=function(){return this.throwIfDisposed(),(0,r.acosh)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"COiO":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.addStrict=function(t){return this.throwIfDisposed(),(0,r.addStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"DDJL":[function(require,module,exports) {
"use strict";var r=require("../../ops/add"),e=require("../../tensor");e.Tensor.prototype.add=function(e){return this.throwIfDisposed(),(0,r.add)(this,e)};
},{"../../ops/add":"geuL","../../tensor":"Zqvm"}],"vC12":[function(require,module,exports) {
"use strict";var r=require("../../ops/all"),e=require("../../tensor");e.Tensor.prototype.all=function(e,t){return this.throwIfDisposed(),(0,r.all)(this,e,t)};
},{"../../ops/all":"kMEx","../../tensor":"Zqvm"}],"vCFc":[function(require,module,exports) {
"use strict";var r=require("../../ops/any"),e=require("../../tensor");e.Tensor.prototype.any=function(e,t){return this.throwIfDisposed(),(0,r.any)(this,e,t)};
},{"../../ops/any":"Fa98","../../tensor":"Zqvm"}],"OfId":[function(require,module,exports) {
"use strict";var r=require("../../ops/arg_max"),e=require("../../tensor");e.Tensor.prototype.argMax=function(e){return this.throwIfDisposed(),(0,r.argMax)(this,e)};
},{"../../ops/arg_max":"qu9n","../../tensor":"Zqvm"}],"vFuN":[function(require,module,exports) {
"use strict";var r=require("../../ops/arg_min"),e=require("../../tensor");e.Tensor.prototype.argMin=function(e){return this.throwIfDisposed(),(0,r.argMin)(this,e)};
},{"../../ops/arg_min":"L4Ct","../../tensor":"Zqvm"}],"gbD2":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor"),s=require("../../util");r.Tensor.prototype.asScalar=function(){return this.throwIfDisposed(),(0,s.assert)(1===this.size,()=>"The array must have only 1 element."),(0,e.reshape)(this,[])};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm","../../util":"UxaK"}],"CKnG":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.asType=function(s){return this.throwIfDisposed(),(0,r.cast)(this,s)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"rgSA":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as1D=function(){return this.throwIfDisposed(),(0,e.reshape)(this,[this.size])};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm"}],"OHUw":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as2D=function(r,s){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s])};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm"}],"ksPE":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as3D=function(r,s,t){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t])};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm"}],"ERyS":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as4D=function(r,s,t,o){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t,o])};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm"}],"lWXD":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.as5D=function(r,s,t,o,i){return this.throwIfDisposed(),(0,e.reshape)(this,[r,s,t,o,i])};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm"}],"Dkcz":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.asin=function(){return this.throwIfDisposed(),(0,r.asin)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"KT0D":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.asinh=function(){return this.throwIfDisposed(),(0,r.asinh)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"XxHc":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.atan=function(){return this.throwIfDisposed(),(0,r.atan)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"ewwi":[function(require,module,exports) {
"use strict";var t=require("../../ops/atan2"),r=require("../../tensor");r.Tensor.prototype.atan2=function(r){return this.throwIfDisposed(),(0,t.atan2)(this,r)};
},{"../../ops/atan2":"qQ7z","../../tensor":"Zqvm"}],"yG2q":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.atanh=function(){return this.throwIfDisposed(),(0,r.atanh)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"qc0h":[function(require,module,exports) {
"use strict";var o=require("../../ops/avg_pool"),r=require("../../tensor");r.Tensor.prototype.avgPool=function(r,e,t,s){return this.throwIfDisposed(),(0,o.avgPool)(this,r,e,t,s)};
},{"../../ops/avg_pool":"Pm39","../../tensor":"Zqvm"}],"TEk5":[function(require,module,exports) {
"use strict";var t=require("../../ops/batch_to_space_nd"),e=require("../../tensor");e.Tensor.prototype.batchToSpaceND=function(e,r){return this.throwIfDisposed(),(0,t.batchToSpaceND)(this,e,r)};
},{"../../ops/batch_to_space_nd":"dRKG","../../tensor":"Zqvm"}],"ybJw":[function(require,module,exports) {
"use strict";var r=require("../../ops/batchnorm"),t=require("../../tensor");t.Tensor.prototype.batchNorm=function(t,o,e,s,i){return this.throwIfDisposed(),(0,r.batchNorm)(this,t,o,e,s,i)};
},{"../../ops/batchnorm":"H6um","../../tensor":"Zqvm"}],"TepF":[function(require,module,exports) {
"use strict";var r=require("../../ops/broadcast_to"),o=require("../../tensor");o.Tensor.prototype.broadcastTo=function(o){return this.throwIfDisposed(),(0,r.broadcastTo)(this,o)};
},{"../../ops/broadcast_to":"eQsv","../../tensor":"Zqvm"}],"WvHj":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.cast=function(s){return this.throwIfDisposed(),(0,r.cast)(this,s)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"Ix57":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.ceil=function(){return this.throwIfDisposed(),(0,e.ceil)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"FmfZ":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.clipByValue=function(r,s){return this.throwIfDisposed(),(0,e.clipByValue)(this,r,s)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"TEzh":[function(require,module,exports) {
"use strict";var t=require("../../ops/concat"),o=require("../../tensor");o.Tensor.prototype.concat=function(r,e){return this.throwIfDisposed(),r instanceof o.Tensor&&(r=[r]),(0,t.concat)([this,...r],e)};
},{"../../ops/concat":"gZir","../../tensor":"Zqvm"}],"Zj0y":[function(require,module,exports) {
"use strict";var r=require("../../ops/conv1d"),o=require("../../tensor");o.Tensor.prototype.conv1d=function(o,e,t,s,n,i){return this.throwIfDisposed(),(0,r.conv1d)(this,o,e,t,s,n,i)};
},{"../../ops/conv1d":"Dlln","../../tensor":"Zqvm"}],"FhaC":[function(require,module,exports) {
"use strict";var r=require("../../ops/conv2d_transpose"),s=require("../../tensor");s.Tensor.prototype.conv2dTranspose=function(s,o,e,n,t){return this.throwIfDisposed(),(0,r.conv2dTranspose)(this,s,o,e,n,t)};
},{"../../ops/conv2d_transpose":"foig","../../tensor":"Zqvm"}],"Rvuo":[function(require,module,exports) {
"use strict";var r=require("../../ops/conv2d"),o=require("../../tensor");o.Tensor.prototype.conv2d=function(o,e,t,s,n,i){return this.throwIfDisposed(),(0,r.conv2d)(this,o,e,t,s,n,i)};
},{"../../ops/conv2d":"K8t2","../../tensor":"Zqvm"}],"AP2e":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.cos=function(){return this.throwIfDisposed(),(0,r.cos)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"wD3s":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.cosh=function(){return this.throwIfDisposed(),(0,r.cosh)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"yc2x":[function(require,module,exports) {
"use strict";var r=require("../../ops/cumsum"),s=require("../../tensor");s.Tensor.prototype.cumsum=function(s,u,e){return this.throwIfDisposed(),(0,r.cumsum)(this,s,u,e)};
},{"../../ops/cumsum":"MovR","../../tensor":"Zqvm"}],"A6jr":[function(require,module,exports) {
"use strict";var e=require("../../ops/depth_to_space"),t=require("../../tensor");t.Tensor.prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),(0,e.depthToSpace)(this,t,r)};
},{"../../ops/depth_to_space":"RcRb","../../tensor":"Zqvm"}],"IV2P":[function(require,module,exports) {
"use strict";var e=require("../../globals"),s=require("../../ops/depthwise_conv2d"),t=require("../../tensor");t.Tensor.prototype.depthwiseConv2D=function(t,r,i,o,d,n){return(0,e.deprecationWarn)("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),(0,s.depthwiseConv2d)(this,t,r,i,o,d,n)};
},{"../../globals":"UkUu","../../ops/depthwise_conv2d":"hlJ3","../../tensor":"Zqvm"}],"S9BW":[function(require,module,exports) {
"use strict";var e=require("../../ops/depthwise_conv2d"),t=require("../../tensor");t.Tensor.prototype.depthwiseConv2d=function(t,r,s,o,i,n){return this.throwIfDisposed(),(0,e.depthwiseConv2d)(this,t,r,s,o,i,n)};
},{"../../ops/depthwise_conv2d":"hlJ3","../../tensor":"Zqvm"}],"JA4d":[function(require,module,exports) {
"use strict";var i=require("../../ops/dilation2d"),t=require("../../tensor");t.Tensor.prototype.dilation2d=function(t,r,o,e,s){return this.throwIfDisposed(),(0,i.dilation2d)(this,t,r,o,e,s)};
},{"../../ops/dilation2d":"JjSs","../../tensor":"Zqvm"}],"dAwZ":[function(require,module,exports) {
"use strict";var r=require("../../ops/div_no_nan"),o=require("../../tensor");o.Tensor.prototype.divNoNan=function(o){return this.throwIfDisposed(),(0,r.divNoNan)(this,o)};
},{"../../ops/div_no_nan":"Ztm0","../../tensor":"Zqvm"}],"JMc5":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.divStrict=function(t){return this.throwIfDisposed(),(0,r.divStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"MYEU":[function(require,module,exports) {
"use strict";var r=require("../../ops/div"),e=require("../../tensor");e.Tensor.prototype.div=function(e){return this.throwIfDisposed(),(0,r.div)(this,e)};
},{"../../ops/div":"XyQ4","../../tensor":"Zqvm"}],"xFpT":[function(require,module,exports) {
"use strict";var t=require("../../ops/dot"),r=require("../../tensor");r.Tensor.prototype.dot=function(r){return this.throwIfDisposed(),(0,t.dot)(this,r)};
},{"../../ops/dot":"yedZ","../../tensor":"Zqvm"}],"kZJ1":[function(require,module,exports) {
"use strict";var e=require("../../ops/elu"),r=require("../../tensor");r.Tensor.prototype.elu=function(){return this.throwIfDisposed(),(0,e.elu)(this)};
},{"../../ops/elu":"uIqF","../../tensor":"Zqvm"}],"Yf44":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.equalStrict=function(t){return this.throwIfDisposed(),(0,r.equalStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"fxqX":[function(require,module,exports) {
"use strict";var e=require("../../ops/equal"),r=require("../../tensor");r.Tensor.prototype.equal=function(r){return this.throwIfDisposed(),(0,e.equal)(this,r)};
},{"../../ops/equal":"nLPx","../../tensor":"Zqvm"}],"q7MR":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),e=require("../../tensor");e.Tensor.prototype.erf=function(){return this.throwIfDisposed(),(0,r.erf)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"kscu":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.exp=function(){return this.throwIfDisposed(),(0,e.exp)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"BzmH":[function(require,module,exports) {
"use strict";var e=require("../../ops/expand_dims"),r=require("../../tensor");r.Tensor.prototype.expandDims=function(r){return this.throwIfDisposed(),(0,e.expandDims)(this,r)};
},{"../../ops/expand_dims":"uPYU","../../tensor":"Zqvm"}],"M7As":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.expm1=function(){return this.throwIfDisposed(),(0,e.expm1)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"WnMy":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.fft=function(){return this.throwIfDisposed(),(0,r.fft)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"kXgZ":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.flatten=function(){return this.throwIfDisposed(),(0,e.reshape)(this,[this.size])};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm"}],"B9Dj":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.floor=function(){return this.throwIfDisposed(),(0,r.floor)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"ecOL":[function(require,module,exports) {
"use strict";var r=require("../../ops/floorDiv"),o=require("../../tensor");o.Tensor.prototype.floorDiv=function(o){return this.throwIfDisposed(),(0,r.floorDiv)(this,o)};
},{"../../ops/floorDiv":"L6i4","../../tensor":"Zqvm"}],"Qd9H":[function(require,module,exports) {
"use strict";var r=require("../../ops/gather"),e=require("../../tensor");e.Tensor.prototype.gather=function(e,t){return this.throwIfDisposed(),(0,r.gather)(this,e,t)};
},{"../../ops/gather":"Quad","../../tensor":"Zqvm"}],"aIin":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),(0,r.greaterEqualStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"uqRT":[function(require,module,exports) {
"use strict";var r=require("../../ops/greater_equal"),e=require("../../tensor");e.Tensor.prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,r.greaterEqual)(this,e)};
},{"../../ops/greater_equal":"wG0H","../../tensor":"Zqvm"}],"OVeG":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.greaterStrict=function(t){return this.throwIfDisposed(),(0,r.greaterStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"Uje9":[function(require,module,exports) {
"use strict";var r=require("../../ops/greater"),e=require("../../tensor");e.Tensor.prototype.greater=function(e){return this.throwIfDisposed(),(0,r.greater)(this,e)};
},{"../../ops/greater":"i1I6","../../tensor":"Zqvm"}],"WF8f":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.ifft=function(){return this.throwIfDisposed(),(0,r.ifft)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"cr1Q":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.irfft=function(){return this.throwIfDisposed(),(0,r.irfft)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"h1Oj":[function(require,module,exports) {
"use strict";var i=require("../../ops/ops"),e=require("../../tensor");e.Tensor.prototype.isFinite=function(){return this.throwIfDisposed(),(0,i.isFinite)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"cpUL":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.isInf=function(){return this.throwIfDisposed(),(0,r.isInf)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"HvEi":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.isNaN=function(){return this.throwIfDisposed(),(0,r.isNaN)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"ATFp":[function(require,module,exports) {
"use strict";var e=require("../../ops/leaky_relu"),r=require("../../tensor");r.Tensor.prototype.leakyRelu=function(r){return this.throwIfDisposed(),(0,e.leakyRelu)(this,r)};
},{"../../ops/leaky_relu":"BMkp","../../tensor":"Zqvm"}],"QxVf":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.lessEqualStrict=function(s){return this.throwIfDisposed(),(0,r.lessEqualStrict)(this,s)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"vRSt":[function(require,module,exports) {
"use strict";var s=require("../../ops/less_equal"),e=require("../../tensor");e.Tensor.prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,s.lessEqual)(this,e)};
},{"../../ops/less_equal":"NxL8","../../tensor":"Zqvm"}],"z7p9":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.lessStrict=function(s){return this.throwIfDisposed(),(0,r.lessStrict)(this,s)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"wnit":[function(require,module,exports) {
"use strict";var s=require("../../ops/less"),e=require("../../tensor");e.Tensor.prototype.less=function(e){return this.throwIfDisposed(),(0,s.less)(this,e)};
},{"../../ops/less":"PrnK","../../tensor":"Zqvm"}],"GFcv":[function(require,module,exports) {
"use strict";var o=require("../../ops/local_response_normalization"),e=require("../../tensor");e.Tensor.prototype.localResponseNormalization=function(e,r,s,i){return this.throwIfDisposed(),(0,o.localResponseNormalization)(this,e,r,s,i)};
},{"../../ops/local_response_normalization":"AJX7","../../tensor":"Zqvm"}],"wC7w":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,o.logSigmoid)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"APSH":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.logSoftmax=function(r){return this.throwIfDisposed(),(0,o.logSoftmax)(this,r)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"MkA8":[function(require,module,exports) {
"use strict";var r=require("../../ops/log_sum_exp"),e=require("../../tensor");e.Tensor.prototype.logSumExp=function(e,o){return this.throwIfDisposed(),(0,r.logSumExp)(this,e,o)};
},{"../../ops/log_sum_exp":"twrn","../../tensor":"Zqvm"}],"j6PZ":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.log=function(){return this.throwIfDisposed(),(0,r.log)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"Upg8":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.log1p=function(){return this.throwIfDisposed(),(0,r.log1p)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"HSHt":[function(require,module,exports) {
"use strict";var r=require("../../ops/logical_and"),o=require("../../tensor");o.Tensor.prototype.logicalAnd=function(o){return this.throwIfDisposed(),(0,r.logicalAnd)(this,o)};
},{"../../ops/logical_and":"ntJL","../../tensor":"Zqvm"}],"iSl1":[function(require,module,exports) {
"use strict";var o=require("../../ops/logical_not"),t=require("../../tensor");t.Tensor.prototype.logicalNot=function(){return this.throwIfDisposed(),(0,o.logicalNot)(this)};
},{"../../ops/logical_not":"SOqM","../../tensor":"Zqvm"}],"lMYn":[function(require,module,exports) {
"use strict";var r=require("../../ops/logical_or"),o=require("../../tensor");o.Tensor.prototype.logicalOr=function(o){return this.throwIfDisposed(),(0,r.logicalOr)(this,o)};
},{"../../ops/logical_or":"IQZP","../../tensor":"Zqvm"}],"PqBZ":[function(require,module,exports) {
"use strict";var r=require("../../ops/logical_xor"),o=require("../../tensor");o.Tensor.prototype.logicalXor=function(o){return this.throwIfDisposed(),(0,r.logicalXor)(this,o)};
},{"../../ops/logical_xor":"PsE3","../../tensor":"Zqvm"}],"P9oR":[function(require,module,exports) {
"use strict";var t=require("../../ops/mat_mul"),r=require("../../tensor");r.Tensor.prototype.matMul=function(r,e,s){return this.throwIfDisposed(),(0,t.matMul)(this,r,e,s)};
},{"../../ops/mat_mul":"A3yk","../../tensor":"Zqvm"}],"xQGY":[function(require,module,exports) {
"use strict";var o=require("../../ops/max_pool"),r=require("../../tensor");r.Tensor.prototype.maxPool=function(r,e,t,s){return this.throwIfDisposed(),(0,o.maxPool)(this,r,e,t,s)};
},{"../../ops/max_pool":"RWms","../../tensor":"Zqvm"}],"uzjL":[function(require,module,exports) {
"use strict";var r=require("../../ops/max"),e=require("../../tensor");e.Tensor.prototype.max=function(e,t){return this.throwIfDisposed(),(0,r.max)(this,e,t)};
},{"../../ops/max":"SjY8","../../tensor":"Zqvm"}],"eEYj":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.maximumStrict=function(t){return this.throwIfDisposed(),(0,r.maximumStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"mVr2":[function(require,module,exports) {
"use strict";var r=require("../../ops/maximum"),e=require("../../tensor");e.Tensor.prototype.maximum=function(e){return this.throwIfDisposed(),(0,r.maximum)(this,e)};
},{"../../ops/maximum":"nmNC","../../tensor":"Zqvm"}],"lSoa":[function(require,module,exports) {
"use strict";var e=require("../../ops/mean"),r=require("../../tensor");r.Tensor.prototype.mean=function(r,t){return this.throwIfDisposed(),(0,e.mean)(this,r,t)};
},{"../../ops/mean":"Yc5n","../../tensor":"Zqvm"}],"HBNN":[function(require,module,exports) {
"use strict";var r=require("../../ops/min"),e=require("../../tensor");e.Tensor.prototype.min=function(e,i){return this.throwIfDisposed(),(0,r.min)(this,e,i)};
},{"../../ops/min":"z8cA","../../tensor":"Zqvm"}],"cAu2":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.minimumStrict=function(t){return this.throwIfDisposed(),(0,r.minimumStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"aASa":[function(require,module,exports) {
"use strict";var i=require("../../ops/minimum"),r=require("../../tensor");r.Tensor.prototype.minimum=function(r){return this.throwIfDisposed(),(0,i.minimum)(this,r)};
},{"../../ops/minimum":"q3lt","../../tensor":"Zqvm"}],"BYoE":[function(require,module,exports) {
"use strict";var r=require("../../ops/mirror_pad"),o=require("../../tensor");o.Tensor.prototype.mirrorPad=function(o,e){return this.throwIfDisposed(),(0,r.mirrorPad)(this,o,e)};
},{"../../ops/mirror_pad":"c1Zo","../../tensor":"Zqvm"}],"HhPO":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.modStrict=function(t){return this.throwIfDisposed(),(0,r.modStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"qheI":[function(require,module,exports) {
"use strict";var r=require("../../ops/mod"),o=require("../../tensor");o.Tensor.prototype.mod=function(o){return this.throwIfDisposed(),(0,r.mod)(this,o)};
},{"../../ops/mod":"oTGE","../../tensor":"Zqvm"}],"xY1r":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.mulStrict=function(t){return this.throwIfDisposed(),(0,r.mulStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"UN9z":[function(require,module,exports) {
"use strict";var r=require("../../ops/mul"),e=require("../../tensor");e.Tensor.prototype.mul=function(e){return this.throwIfDisposed(),(0,r.mul)(this,e)};
},{"../../ops/mul":"WS4w","../../tensor":"Zqvm"}],"VaCK":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.neg=function(){return this.throwIfDisposed(),(0,e.neg)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"jugM":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.norm=function(o,e,s){return this.throwIfDisposed(),(0,r.norm)(this,o,e,s)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"O2GY":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.notEqualStrict=function(r){return this.throwIfDisposed(),(0,t.notEqualStrict)(this,r)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"tagr":[function(require,module,exports) {
"use strict";var t=require("../../ops/not_equal"),r=require("../../tensor");r.Tensor.prototype.notEqual=function(r){return this.throwIfDisposed(),(0,t.notEqual)(this,r)};
},{"../../ops/not_equal":"RlXH","../../tensor":"Zqvm"}],"pwhM":[function(require,module,exports) {
"use strict";var o=require("../../ops/one_hot"),e=require("../../tensor");e.Tensor.prototype.oneHot=function(e,t=1,r=0){return this.throwIfDisposed(),(0,o.oneHot)(this,e,t,r)};
},{"../../ops/one_hot":"mrOz","../../tensor":"Zqvm"}],"vl1j":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.onesLike=function(){return this.throwIfDisposed(),(0,e.onesLike)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"bptQ":[function(require,module,exports) {
"use strict";var r=require("../../ops/pad"),e=require("../../tensor");e.Tensor.prototype.pad=function(e,t){return this.throwIfDisposed(),(0,r.pad)(this,e,t)};
},{"../../ops/pad":"NuCu","../../tensor":"Zqvm"}],"pEWq":[function(require,module,exports) {
"use strict";var o=require("../../ops/pool"),r=require("../../tensor");r.Tensor.prototype.pool=function(r,e,t,s,i){return this.throwIfDisposed(),(0,o.pool)(this,r,e,t,s,i)};
},{"../../ops/pool":"ilbP","../../tensor":"Zqvm"}],"kuTt":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.powStrict=function(t){return this.throwIfDisposed(),(0,r.powStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"tyPa":[function(require,module,exports) {
"use strict";var r=require("../../ops/pow"),o=require("../../tensor");o.Tensor.prototype.pow=function(o){return this.throwIfDisposed(),(0,r.pow)(this,o)};
},{"../../ops/pow":"FJnw","../../tensor":"Zqvm"}],"liMd":[function(require,module,exports) {
"use strict";var r=require("../../ops/prelu"),e=require("../../tensor");e.Tensor.prototype.prelu=function(e){return this.throwIfDisposed(),(0,r.prelu)(this,e)};
},{"../../ops/prelu":"IOvE","../../tensor":"Zqvm"}],"ZnBE":[function(require,module,exports) {
"use strict";var r=require("../../ops/prod"),o=require("../../tensor");o.Tensor.prototype.prod=function(o,e){return this.throwIfDisposed(),(0,r.prod)(this,o,e)};
},{"../../ops/prod":"ZlHR","../../tensor":"Zqvm"}],"xgoS":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),e=require("../../tensor");e.Tensor.prototype.reciprocal=function(){return this.throwIfDisposed(),(0,r.reciprocal)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"xT5F":[function(require,module,exports) {
"use strict";var r=require("../../ops/relu"),e=require("../../tensor");e.Tensor.prototype.relu=function(){return this.throwIfDisposed(),(0,r.relu)(this)};
},{"../../ops/relu":"Htix","../../tensor":"Zqvm"}],"RO95":[function(require,module,exports) {
"use strict";var r=require("../../ops/relu6"),e=require("../../tensor");e.Tensor.prototype.relu6=function(){return this.throwIfDisposed(),(0,r.relu6)(this)};
},{"../../ops/relu6":"bNXk","../../tensor":"Zqvm"}],"i5EZ":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.reshapeAs=function(r){return this.throwIfDisposed(),(0,e.reshape)(this,r.shape)};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm"}],"ZFTL":[function(require,module,exports) {
"use strict";var e=require("../../ops/reshape"),r=require("../../tensor");r.Tensor.prototype.reshape=function(r){return this.throwIfDisposed(),(0,e.reshape)(this,r)};
},{"../../ops/reshape":"khVG","../../tensor":"Zqvm"}],"AfQE":[function(require,module,exports) {
"use strict";var e=require("../../ops/image/resize_bilinear"),r=require("../../tensor");r.Tensor.prototype.resizeBilinear=function(r,i){return this.throwIfDisposed(),(0,e.resizeBilinear)(this,r,i)};
},{"../../ops/image/resize_bilinear":"eY9c","../../tensor":"Zqvm"}],"V1cc":[function(require,module,exports) {
"use strict";var e=require("../../ops/image/resize_nearest_neighbor"),r=require("../../tensor");r.Tensor.prototype.resizeNearestNeighbor=function(r,s){return this.throwIfDisposed(),(0,e.resizeNearestNeighbor)(this,r,s)};
},{"../../ops/image/resize_nearest_neighbor":"rzap","../../tensor":"Zqvm"}],"bqA7":[function(require,module,exports) {
"use strict";var e=require("../../ops/reverse"),r=require("../../tensor");r.Tensor.prototype.reverse=function(r){return this.throwIfDisposed(),(0,e.reverse)(this,r)};
},{"../../ops/reverse":"wt3J","../../tensor":"Zqvm"}],"g1KE":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.rfft=function(){return this.throwIfDisposed(),(0,r.rfft)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"D1n8":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.round=function(){return this.throwIfDisposed(),(0,r.round)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"ISKb":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.rsqrt=function(){return this.throwIfDisposed(),(0,r.rsqrt)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"gFht":[function(require,module,exports) {
"use strict";var e=require("../../ops/selu"),r=require("../../tensor");r.Tensor.prototype.selu=function(){return this.throwIfDisposed(),(0,e.selu)(this)};
},{"../../ops/selu":"iDNJ","../../tensor":"Zqvm"}],"nAn3":[function(require,module,exports) {
"use strict";var e=require("../../ops/separable_conv2d"),r=require("../../tensor");r.Tensor.prototype.separableConv2d=function(r,s,o,t,n,a){return this.throwIfDisposed(),(0,e.separableConv2d)(this,r,s,o,t,n,a)};
},{"../../ops/separable_conv2d":"sXEJ","../../tensor":"Zqvm"}],"WD0L":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sigmoid=function(){return this.throwIfDisposed(),(0,r.sigmoid)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"G1Xq":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sign=function(){return this.throwIfDisposed(),(0,r.sign)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"f1mE":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sin=function(){return this.throwIfDisposed(),(0,r.sin)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"y2EA":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sinh=function(){return this.throwIfDisposed(),(0,r.sinh)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"RxO2":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.slice=function(r,s){return this.throwIfDisposed(),(0,e.slice)(this,r,s)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"nLHP":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.softmax=function(s){return this.throwIfDisposed(),(0,r.softmax)(this,s)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"dZ4g":[function(require,module,exports) {
"use strict";var s=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.softplus=function(){return this.throwIfDisposed(),(0,s.softplus)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"PrQx":[function(require,module,exports) {
"use strict";var t=require("../../ops/space_to_batch_nd"),e=require("../../tensor");e.Tensor.prototype.spaceToBatchND=function(e,r){return this.throwIfDisposed(),(0,t.spaceToBatchND)(this,e,r)};
},{"../../ops/space_to_batch_nd":"nPoV","../../tensor":"Zqvm"}],"x8H6":[function(require,module,exports) {
"use strict";var t=require("../../ops/split"),r=require("../../tensor");r.Tensor.prototype.split=function(r,s){return this.throwIfDisposed(),(0,t.split)(this,r,s)};
},{"../../ops/split":"L2gY","../../tensor":"Zqvm"}],"vQQq":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),s=require("../../tensor");s.Tensor.prototype.sqrt=function(){return this.throwIfDisposed(),(0,r.sqrt)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"BQbO":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),e=require("../../tensor");e.Tensor.prototype.square=function(){return this.throwIfDisposed(),(0,r.square)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"iEDO":[function(require,module,exports) {
"use strict";var e=require("../../ops/squared_difference"),r=require("../../tensor");r.Tensor.prototype.squaredDifference=function(r){return this.throwIfDisposed(),(0,e.squaredDifference)(this,r)};
},{"../../ops/squared_difference":"YDjz","../../tensor":"Zqvm"}],"M2FA":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.squaredDifferenceStrict=function(r){return this.throwIfDisposed(),(0,e.squaredDifferenceStrict)(this,r)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"vCOr":[function(require,module,exports) {
"use strict";var e=require("../../ops/squeeze"),r=require("../../tensor");r.Tensor.prototype.squeeze=function(r){return this.throwIfDisposed(),(0,e.squeeze)(this,r)};
},{"../../ops/squeeze":"N7Os","../../tensor":"Zqvm"}],"Ihkq":[function(require,module,exports) {
"use strict";var s=require("../../ops/stack"),t=require("../../tensor");t.Tensor.prototype.stack=function(r,e){this.throwIfDisposed();const o=r instanceof t.Tensor?[this,r]:[this,...r];return(0,s.stack)(o,e)};
},{"../../ops/stack":"GHVB","../../tensor":"Zqvm"}],"Z1N9":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.step=function(r){return this.throwIfDisposed(),(0,e.step)(this,r)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"XR3k":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.stridedSlice=function(r,s,t,i,o,d,n,p){return this.throwIfDisposed(),(0,e.stridedSlice)(this,r,s,t,i,o,d,n,p)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"i2aS":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.subStrict=function(t){return this.throwIfDisposed(),(0,r.subStrict)(this,t)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"ZLai":[function(require,module,exports) {
"use strict";var r=require("../../ops/sub"),s=require("../../tensor");s.Tensor.prototype.sub=function(s){return this.throwIfDisposed(),(0,r.sub)(this,s)};
},{"../../ops/sub":"OFjl","../../tensor":"Zqvm"}],"Gywn":[function(require,module,exports) {
"use strict";var r=require("../../ops/sum"),s=require("../../tensor");s.Tensor.prototype.sum=function(s,e){return this.throwIfDisposed(),(0,r.sum)(this,s,e)};
},{"../../ops/sum":"YHNB","../../tensor":"Zqvm"}],"p61D":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.tan=function(){return this.throwIfDisposed(),(0,r.tan)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"GAcA":[function(require,module,exports) {
"use strict";var r=require("../../ops/ops"),t=require("../../tensor");t.Tensor.prototype.tanh=function(){return this.throwIfDisposed(),(0,r.tanh)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"NSPB":[function(require,module,exports) {
"use strict";var e=require("../../ops/tile"),t=require("../../tensor");t.Tensor.prototype.tile=function(t){return this.throwIfDisposed(),(0,e.tile)(this,t)};
},{"../../ops/tile":"C900","../../tensor":"Zqvm"}],"DiqZ":[function(require,module,exports) {
"use strict";var o=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.toBool=function(){return this.throwIfDisposed(),(0,o.cast)(this,"bool")};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"k2bt":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),o=require("../../tensor");o.Tensor.prototype.toFloat=function(){return this.throwIfDisposed(),(0,t.cast)(this,"float32")};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"KUHL":[function(require,module,exports) {
"use strict";var t=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.toInt=function(){return this.throwIfDisposed(),(0,t.cast)(this,"int32")};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"XyeS":[function(require,module,exports) {
"use strict";var t=require("../../ops/topk"),r=require("../../tensor");r.Tensor.prototype.topk=function(r,o){return this.throwIfDisposed(),(0,t.topk)(this,r,o)};
},{"../../ops/topk":"N414","../../tensor":"Zqvm"}],"QQmE":[function(require,module,exports) {
"use strict";var r=require("../../ops/transpose"),s=require("../../tensor");s.Tensor.prototype.transpose=function(s){return this.throwIfDisposed(),(0,r.transpose)(this,s)};
},{"../../ops/transpose":"yiEV","../../tensor":"Zqvm"}],"BzD0":[function(require,module,exports) {
"use strict";var e=require("../../ops/unique"),r=require("../../tensor");r.Tensor.prototype.unique=function(r){return this.throwIfDisposed(),(0,e.unique)(this,r)};
},{"../../ops/unique":"qyE5","../../tensor":"Zqvm"}],"nscj":[function(require,module,exports) {
"use strict";var e=require("../../ops/unsorted_segment_sum"),t=require("../../tensor");t.Tensor.prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),(0,e.unsortedSegmentSum)(this,t,r)};
},{"../../ops/unsorted_segment_sum":"U01C","../../tensor":"Zqvm"}],"w6ne":[function(require,module,exports) {
"use strict";var t=require("../../ops/unstack"),r=require("../../tensor");r.Tensor.prototype.unstack=function(r){return this.throwIfDisposed(),(0,t.unstack)(this,r)};
},{"../../ops/unstack":"JyML","../../tensor":"Zqvm"}],"rAQI":[function(require,module,exports) {
"use strict";var e=require("../../ops/where"),r=require("../../tensor");r.Tensor.prototype.where=function(r,t){return this.throwIfDisposed(),(0,e.where)(r,this,t)};
},{"../../ops/where":"AEtV","../../tensor":"Zqvm"}],"UsAE":[function(require,module,exports) {
"use strict";var e=require("../../ops/ops"),r=require("../../tensor");r.Tensor.prototype.zerosLike=function(){return this.throwIfDisposed(),(0,e.zerosLike)(this)};
},{"../../ops/ops":"DHFH","../../tensor":"Zqvm"}],"j3gW":[function(require,module,exports) {
"use strict";require("./abs"),require("./acos"),require("./acosh"),require("./add_strict"),require("./add"),require("./all"),require("./any"),require("./arg_max"),require("./arg_min"),require("./as_scalar"),require("./as_type"),require("./as1d"),require("./as2d"),require("./as3d"),require("./as4d"),require("./as5d"),require("./asin"),require("./asinh"),require("./atan"),require("./atan2"),require("./atanh"),require("./avg_pool"),require("./batch_to_space_nd"),require("./batchnorm"),require("./broadcast_to"),require("./cast"),require("./ceil"),require("./clip_by_value"),require("./concat"),require("./conv1d"),require("./conv2d_transpose"),require("./conv2d"),require("./cos"),require("./cosh"),require("./cumsum"),require("./depth_to_space"),require("./depthwise_conv2D_deprecated"),require("./depthwise_conv2d"),require("./dilation2d"),require("./div_no_nan"),require("./div_strict"),require("./div"),require("./dot"),require("./elu"),require("./equal_strict"),require("./equal"),require("./erf"),require("./exp"),require("./expand_dims"),require("./expm1"),require("./fft"),require("./flatten"),require("./floor"),require("./floorDiv"),require("./gather"),require("./greater_equal_strict"),require("./greater_equal"),require("./greater_strict"),require("./greater"),require("./ifft"),require("./irfft"),require("./is_finite"),require("./is_inf"),require("./is_nan"),require("./leaky_relu"),require("./less_equal_strict"),require("./less_equal"),require("./less_strict"),require("./less"),require("./local_response_normalization"),require("./log_sigmoid"),require("./log_softmax"),require("./log_sum_exp"),require("./log"),require("./log1p"),require("./logical_and"),require("./logical_not"),require("./logical_or"),require("./logical_xor"),require("./mat_mul"),require("./max_pool"),require("./max"),require("./maximum_strict"),require("./maximum"),require("./mean"),require("./min"),require("./minimum_strict"),require("./minimum"),require("./mirror_pad"),require("./mod_strict"),require("./mod"),require("./mul_strict"),require("./mul"),require("./neg"),require("./norm"),require("./not_equal_strict"),require("./not_equal"),require("./one_hot"),require("./ones_like"),require("./pad"),require("./pool"),require("./pow_strict"),require("./pow"),require("./prelu"),require("./prod"),require("./reciprocal"),require("./relu"),require("./relu6"),require("./reshape_as"),require("./reshape"),require("./resize_bilinear"),require("./resize_nearest_neighbor"),require("./reverse"),require("./rfft"),require("./round"),require("./rsqrt"),require("./selu"),require("./separable_conv2d"),require("./sigmoid"),require("./sign"),require("./sin"),require("./sinh"),require("./slice"),require("./softmax"),require("./softplus"),require("./space_to_batch_nd"),require("./split"),require("./sqrt"),require("./square"),require("./squared_difference"),require("./squared_difference_strict"),require("./squeeze"),require("./stack"),require("./step"),require("./strided_slice"),require("./sub_strict"),require("./sub"),require("./sum"),require("./tan"),require("./tanh"),require("./tile"),require("./to_bool"),require("./to_float"),require("./to_int"),require("./topk"),require("./transpose"),require("./unique"),require("./unsorted_segment_sum"),require("./unstack"),require("./where"),require("./zeros_like");
},{"./abs":"zcLW","./acos":"LKnl","./acosh":"UBln","./add_strict":"COiO","./add":"DDJL","./all":"vC12","./any":"vCFc","./arg_max":"OfId","./arg_min":"vFuN","./as_scalar":"gbD2","./as_type":"CKnG","./as1d":"rgSA","./as2d":"OHUw","./as3d":"ksPE","./as4d":"ERyS","./as5d":"lWXD","./asin":"Dkcz","./asinh":"KT0D","./atan":"XxHc","./atan2":"ewwi","./atanh":"yG2q","./avg_pool":"qc0h","./batch_to_space_nd":"TEk5","./batchnorm":"ybJw","./broadcast_to":"TepF","./cast":"WvHj","./ceil":"Ix57","./clip_by_value":"FmfZ","./concat":"TEzh","./conv1d":"Zj0y","./conv2d_transpose":"FhaC","./conv2d":"Rvuo","./cos":"AP2e","./cosh":"wD3s","./cumsum":"yc2x","./depth_to_space":"A6jr","./depthwise_conv2D_deprecated":"IV2P","./depthwise_conv2d":"S9BW","./dilation2d":"JA4d","./div_no_nan":"dAwZ","./div_strict":"JMc5","./div":"MYEU","./dot":"xFpT","./elu":"kZJ1","./equal_strict":"Yf44","./equal":"fxqX","./erf":"q7MR","./exp":"kscu","./expand_dims":"BzmH","./expm1":"M7As","./fft":"WnMy","./flatten":"kXgZ","./floor":"B9Dj","./floorDiv":"ecOL","./gather":"Qd9H","./greater_equal_strict":"aIin","./greater_equal":"uqRT","./greater_strict":"OVeG","./greater":"Uje9","./ifft":"WF8f","./irfft":"cr1Q","./is_finite":"h1Oj","./is_inf":"cpUL","./is_nan":"HvEi","./leaky_relu":"ATFp","./less_equal_strict":"QxVf","./less_equal":"vRSt","./less_strict":"z7p9","./less":"wnit","./local_response_normalization":"GFcv","./log_sigmoid":"wC7w","./log_softmax":"APSH","./log_sum_exp":"MkA8","./log":"j6PZ","./log1p":"Upg8","./logical_and":"HSHt","./logical_not":"iSl1","./logical_or":"lMYn","./logical_xor":"PqBZ","./mat_mul":"P9oR","./max_pool":"xQGY","./max":"uzjL","./maximum_strict":"eEYj","./maximum":"mVr2","./mean":"lSoa","./min":"HBNN","./minimum_strict":"cAu2","./minimum":"aASa","./mirror_pad":"BYoE","./mod_strict":"HhPO","./mod":"qheI","./mul_strict":"xY1r","./mul":"UN9z","./neg":"VaCK","./norm":"jugM","./not_equal_strict":"O2GY","./not_equal":"tagr","./one_hot":"pwhM","./ones_like":"vl1j","./pad":"bptQ","./pool":"pEWq","./pow_strict":"kuTt","./pow":"tyPa","./prelu":"liMd","./prod":"ZnBE","./reciprocal":"xgoS","./relu":"xT5F","./relu6":"RO95","./reshape_as":"i5EZ","./reshape":"ZFTL","./resize_bilinear":"AfQE","./resize_nearest_neighbor":"V1cc","./reverse":"bqA7","./rfft":"g1KE","./round":"D1n8","./rsqrt":"ISKb","./selu":"gFht","./separable_conv2d":"nAn3","./sigmoid":"WD0L","./sign":"G1Xq","./sin":"f1mE","./sinh":"y2EA","./slice":"RxO2","./softmax":"nLHP","./softplus":"dZ4g","./space_to_batch_nd":"PrQx","./split":"x8H6","./sqrt":"vQQq","./square":"BQbO","./squared_difference":"iEDO","./squared_difference_strict":"M2FA","./squeeze":"vCOr","./stack":"Ihkq","./step":"Z1N9","./strided_slice":"XR3k","./sub_strict":"i2aS","./sub":"ZLai","./sum":"Gywn","./tan":"p61D","./tanh":"GAcA","./tile":"NSPB","./to_bool":"DiqZ","./to_float":"k2bt","./to_int":"KUHL","./topk":"XyeS","./transpose":"QQmE","./unique":"BzD0","./unsorted_segment_sum":"nscj","./unstack":"w6ne","./where":"rAQI","./zeros_like":"UsAE"}],"tKjQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./base_side_effects");var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})}),require("./register_all_gradients"),require("./public/chained_ops/register_all_chained_ops");
},{"./base_side_effects":"j1BI","./base":"rPpE","./register_all_gradients":"Y37a","./public/chained_ops/register_all_chained_ops":"j3gW"}],"BnDD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.epsilon=n,exports.setEpsilon=r,exports.imageDataFormat=o;var e=require("@tensorflow/tfjs-core");let t;function n(){return null==t&&(t=(0,e.backend)().epsilon()),t}function r(e){t=e}function o(){return"channelsLast"}
},{"@tensorflow/tfjs-core":"tKjQ"}],"g8PH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IndexError=exports.AssertionError=exports.NotImplementedError=exports.ValueError=exports.RuntimeError=exports.AttributeError=void 0;class r extends Error{constructor(t){super(t),Object.setPrototypeOf(this,r.prototype)}}exports.AttributeError=r;class t extends Error{constructor(r){super(r),Object.setPrototypeOf(this,t.prototype)}}exports.RuntimeError=t;class e extends Error{constructor(r){super(r),Object.setPrototypeOf(this,e.prototype)}}exports.ValueError=e;class o extends Error{constructor(r){super(r),Object.setPrototypeOf(this,o.prototype)}}exports.NotImplementedError=o;class s extends Error{constructor(r){super(r),Object.setPrototypeOf(this,s.prototype)}}exports.AssertionError=s;class p extends Error{constructor(r){super(r),Object.setPrototypeOf(this,p.prototype)}}exports.IndexError=p;
},{}],"nEuI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pyListRepeat=r,exports.assert=n,exports.count=o,exports.singletonOrArray=s,exports.toList=i,exports.objectListUid=a,exports.toSnakeCase=u,exports.toCamelCase=l,exports.serializeKerasObject=f,exports.deserializeKerasObject=y,exports.numberCompare=g,exports.reverseNumberCompare=d,exports.stringToDType=h,exports.stringsEqual=w,exports.unique=b,exports.isObjectEmpty=m,exports.checkStringTypeUnionValue=$,exports.checkArrayTypeAndLength=x,exports.assertPositiveInteger=j,exports.formatAsFriendlyString=A,exports.debounce=O,exports.mapActivationToFusedKernel=v,exports.getCartesianProductOfValues=E;var e=require("@tensorflow/tfjs-core"),t=require("../errors");function r(e,t){if(Array.isArray(e)){let r=[];for(let n=0;n<t;n++)r=r.concat(e);return r}{const r=new Array(t);return r.fill(e),r}}function n(e,r){if(!e)throw new t.AssertionError(r)}function o(e,t){let r=0;for(const n of e)n===t&&r++;return r}function s(e){return 1===e.length?e[0]:e}function i(e){return Array.isArray(e)?e:[e]}function a(e){const r=i(e);let n="";for(const o of r){if(null==o.id)throw new t.ValueError(`Object ${o} passed to objectListUid without an id`);""!==n&&(n+=", "),n=`${n}${Math.abs(o.id)}`}return n}function u(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function l(e){return e.length<=1?e:-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let c={};function f(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function p(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(e=>p(e));else{const t=Object.keys(e);for(const r of t){const t=e[r];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?p(t):e[r]=t.value)}}}function y(e,r={},n={},o="object",s=!1){if("string"==typeof e){const s=e;let i;if(s in n)i=n[s];else if(s in c)i=c[s];else if(null==(i=r[s]))throw new t.ValueError(`Unknown ${o}: ${e}. `+"This may be due to one of the following reasons:\n"+`1. The ${o} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${o} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");return i}{const i=e;if(null==i.className||null==i.config)throw new t.ValueError(`${o}: Improper config format: `+`${JSON.stringify(i)}.\n`+"'className' and 'config' must set.");const a=i.className;let u,l;if(a in n?[u,l]=n[a]:a in c?[u,l]=c.className:a in r&&([u,l]=r[a]),null==u)throw new t.ValueError(`Unknown ${o}: ${a}. `+"This may be due to one of the following reasons:\n"+`1. The ${o} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${o} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){const e={};for(const n of Object.keys(c))e[n]=c[n];for(const o of Object.keys(n))e[o]=n[o];i.config.customObjects=e;const t=Object.assign({},c);for(const o of Object.keys(n))c[o]=n[o];p(i.config);const r=l(u,i.config,n,s);return c=Object.assign({},t),r}{const e=Object.assign({},c);for(const r of Object.keys(n))c[r]=n[r];const t=new u(i.config);return c=Object.assign({},e),t}}}function g(e,t){return e<t?-1:e>t?1:0}function d(e,t){return-1*g(e,t)}function h(e){switch(e){case"float32":return"float32";default:throw new t.ValueError(`Invalid dtype: ${e}`)}}function w(e,t){if(null==e||null==t)return e===t;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function b(e){if(null==e)return e;const t=[];for(const r of e)-1===t.indexOf(r)&&t.push(r);return t}function m(e){if(null==e)throw new t.ValueError(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function $(e,r,n){if(null!=n&&e.indexOf(n)<0)throw new t.ValueError(`${n} is not a valid ${r}.  Valid values are ${e} or null/undefined.`)}function x(e,t,r=0,o=1/0){return n(r>=0),n(o>=r),Array.isArray(e)&&e.length>=r&&e.length<=o&&e.every(e=>typeof e===t)}function j(t,r){Array.isArray(t)?(e.util.assert(t.length>0,()=>`${r} is unexpectedly an empty array.`),t.forEach((e,t)=>j(e,`element ${t+1} of ${r}`))):e.util.assert(Number.isInteger(t)&&t>0,()=>`Expected ${r} to be a positive integer, but got `+`${A(t)}.`)}function A(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>A(e)).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}function O(t,r){let n,o=e.util.now();return(...s)=>{const i=e.util.now();return i-o<r?n:(o=i,n=t(...s))}}function v(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function E(...e){n(e.length>0,"arrayOfValues is empty");for(const t of e)n(Array.isArray(t),"one of the values is not an array"),n(t.length>0,"one of the values is empty");return e.reduce((e,t)=>0===e.length?t.map(e=>[e]):t.map(t=>e.map(e=>[...e,t])).reduce((e,t)=>e.concat(t),[]),[])}
},{"@tensorflow/tfjs-core":"tKjQ","../errors":"g8PH"}],"FL2F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.serializeConstraint=p,exports.deserializeConstraint=m,exports.getConstraint=f,exports.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP=exports.MinMaxNorm=exports.NonNeg=exports.UnitNorm=exports.MaxNorm=exports.Constraint=void 0;var e=s(require("@tensorflow/tfjs-core")),t=require("./backend/common"),a=require("./utils/generic_utils");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=s?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(a,r,n):a[r]=e[r]}return a.default=e,t&&t.set(e,a),a}function r(t,a){return(0,e.tidy)(()=>e.sqrt(e.sum(e.mul(t,t),a,!0)))}class n extends e.serialization.Serializable{getConfig(){return{}}}exports.Constraint=n;class l extends n{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>{const i=r(a,this.axis),s=e.clipByValue(i,0,this.maxValue);return e.mul(a,e.div(s,e.add((0,t.epsilon)(),i)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}exports.MaxNorm=l,l.className="MaxNorm",e.serialization.registerClass(l);class u extends n{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>e.div(a,e.add((0,t.epsilon)(),r(a,this.axis))))}getConfig(){return{axis:this.axis}}}exports.UnitNorm=u,u.className="UnitNorm",e.serialization.registerClass(u);class o extends n{apply(t){return e.relu(t)}}exports.NonNeg=o,o.className="NonNeg",e.serialization.registerClass(o);class x extends n{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(a){return(0,e.tidy)(()=>{const i=r(a,this.axis),s=e.add(e.mul(this.rate,e.clipByValue(i,this.minValue,this.maxValue)),e.mul(1-this.rate,i));return e.mul(a,e.div(s,e.add((0,t.epsilon)(),i)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}exports.MinMaxNorm=x,x.className="MinMaxNorm",e.serialization.registerClass(x);const c={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function p(e){return(0,a.serializeKerasObject)(e)}function m(t,i={}){return(0,a.deserializeKerasObject)(t,e.serialization.SerializationMap.getMap().classNameMap,i,"constraint")}function f(e){if(null==e)return null;if("string"==typeof e){return m({className:e in c?c[e]:e,config:{}})}return e instanceof n?e:m(e)}exports.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP=c;
},{"@tensorflow/tfjs-core":"tKjQ","./backend/common":"BnDD","./utils/generic_utils":"nEuI"}],"sdZT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxNorm=r,exports.unitNorm=e,exports.nonNeg=t,exports.minMaxNorm=o;var n=require("./constraints");function r(r){return new n.MaxNorm(r)}function e(r){return new n.UnitNorm(r)}function t(){return new n.NonNeg}function o(r){return new n.MinMaxNorm(r)}
},{"./constraints":"FL2F"}],"hIJg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VALID_SAMPLE_WEIGHT_MODES=exports.VALID_BIDIRECTIONAL_MERGE_MODES=exports.VALID_POOL_MODE_VALUES=exports.VALID_PADDING_MODE_VALUES=exports.VALID_DATA_FORMAT_VALUES=void 0;const _=["channelsFirst","channelsLast"];exports.VALID_DATA_FORMAT_VALUES=_;const A=["valid","same","causal"];exports.VALID_PADDING_MODE_VALUES=A;const s=["max","avg"];exports.VALID_POOL_MODE_VALUES=s;const D=["sum","mul","concat","ave"];exports.VALID_BIDIRECTIONAL_MERGE_MODES=D;const e=["temporal"];exports.VALID_SAMPLE_WEIGHT_MODES=e;
},{}],"oZnC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkDataFormat=o,exports.checkPaddingMode=r,exports.checkPoolMode=c,exports.nameScope=s,exports.getScopedTensorName=p,exports.getUniqueTensorName=_,exports.isValidTensorName=h;var e=require("./keras_format/common"),t=require("./utils/generic_utils");const n=new Map;function o(n){(0,t.checkStringTypeUnionValue)(e.VALID_DATA_FORMAT_VALUES,"DataFormat",n)}function r(n){(0,t.checkStringTypeUnionValue)(e.VALID_PADDING_MODE_VALUES,"PaddingMode",n)}function c(n){(0,t.checkStringTypeUnionValue)(e.VALID_POOL_MODE_VALUES,"PoolMode",n)}const a=[],i="/";function s(e,t){a.push(e);try{const e=t();return a.pop(),e}catch(n){throw a.pop(),n}}function u(){return 0===a.length?"":a.join(i)+i}function p(e){if(!h(e))throw new Error("Not a valid tensor name: '"+e+"'");return u()+e}function _(e){if(!h(e))throw new Error("Not a valid tensor name: '"+e+"'");n.has(e)||n.set(e,0);const t=n.get(e);if(n.set(e,n.get(e)+1),t>0){const o=`${e}_${t}`;return n.set(o,1),o}return e}const d=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function h(e){return!!e.match(d)}
},{"./keras_format/common":"hIJg","./utils/generic_utils":"nEuI"}],"ujnL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInteger=o,exports.arrayProd=u,exports.min=i,exports.max=s,exports.sum=c,exports.mean=f,exports.variance=l,exports.median=p,exports.range=y;var r=n(require("@tensorflow/tfjs-core")),e=require("../errors");function t(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return t=function(){return r},r}function n(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=t();if(e&&e.has(r))return e.get(r);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){var a=o?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=r[u]}return n.default=r,e&&e.set(r,n),n}function o(r){return r===parseInt(r.toString(),10)}function u(r,e,t){null==e&&(e=0),null==t&&(t=r.length);let n=1;for(let o=e;o<t;++o)n*=r[o];return n}function a(e){return e=Array.isArray(e)?new Float32Array(e):e,(0,r.tensor1d)(e)}function i(e){return r.min(a(e)).dataSync()[0]}function s(e){return r.max(a(e)).dataSync()[0]}function c(e){return r.sum(a(e)).dataSync()[0]}function f(r){return c(r)/r.length}function l(e){const t=r.sub(a(e),(0,r.scalar)(f(e)));return r.sum(r.mul(t,t)).dataSync()[0]/e.length}function p(r){const e=r.slice().sort((r,e)=>r-e),t=Math.floor((e.length-1)/2),n=Math.ceil((e.length-1)/2);return t===n?e[t]:(e[t]+e[n])/2}function y(r,t){if(t<r)throw new e.ValueError(`end (${t}) < begin (${r}) is forbidden.`);const n=[];for(let e=r;e<t;++e)n.push(e);return n}
},{"@tensorflow/tfjs-core":"tKjQ","../errors":"g8PH"}],"xmUi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setBackend=u,exports.getBackend=c,exports.isBackendSymbolic=p,exports.countParams=h,exports.cast=l,exports.expandDims=d,exports.repeat=f,exports.flatten=k,exports.batchFlatten=w,exports.sliceAlongFirstAxis=x,exports.sliceAlongLastAxis=m,exports.sliceAlongAxis=y,exports.concatenate=g,exports.concatAlongFirstAxis=b,exports.tile=A,exports.randomNormal=$,exports.dot=E,exports.sign=v,exports.oneHot=F,exports.gather=V,exports.square=q,exports.pow=O,exports.biasAdd=L,exports.elu=j,exports.softsign=D,exports.dropout=B,exports.hardSigmoid=I,exports.inTrainPhase=M;var e=o(require("@tensorflow/tfjs-core")),r=require("../common"),t=require("../errors"),n=o(require("../utils/math_utils")),a=require("./common");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(t,a,o):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}let i="webgl";function u(r){e.setBackend(r),i=r}function c(){return i}function p(){return!1}function h(e){const r=e.shape;return r.length>0?r.reduce((e,r)=>e*r):1}function l(e,r){return e.asType(r)}function d(e,r=-1){const t=e.shape.slice();return r<0&&(r=t.length+r+1),t.splice(r,0,1),e.reshape(t)}function f(r,n){return(0,e.tidy)(()=>{if(2!==r.shape.length)throw new t.ValueError("repeat() expects a rank-2 tensor, but received a "+`rank-${r.shape.length} tensor.`);return A(d(r,1),[1,n,1])})}function k(e){const r=[n.arrayProd(e.shape)];return e.reshape(r)}function w(e){if(e.rank<=1)throw new t.ValueError(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const r=[e.shape[0],n.arrayProd(e.shape,1)];return e.reshape(r)}function x(r,n,a){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:return e.slice2d(r,[n,0],[a,r.shape[1]]);case 3:return e.slice3d(r,[n,0,0],[a,r.shape[1],r.shape[2]]);case 4:return e.slice4d(r,[n,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3]]);case 5:return e.slice(r,[n,0,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3],r.shape[4]]);case 6:return e.slice(r,[n,0,0,0,0,0],[a,r.shape[1],r.shape[2],r.shape[3],r.shape[4],r.shape[5]]);default:throw new t.ValueError("sliceAlongFirstAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function m(r,n,a){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:return e.slice2d(r,[0,n],[r.shape[0],a]);case 3:return e.slice3d(r,[0,0,n],[r.shape[0],r.shape[1],a]);case 4:return e.slice4d(r,[0,0,0,n],[r.shape[0],r.shape[1],r.shape[2],a]);default:throw new t.ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function y(r,n,a,s){return(0,e.tidy)(()=>{switch(r.rank){case 1:return e.slice1d(r,n,a);case 2:switch(s){case 1:return x(r,n,a);case 2:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}case 3:switch(s){case 1:return x(r,n,a);case 2:return e.slice3d(r,[0,n,0],[r.shape[0],a,r.shape[2]]);case 3:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}case 4:switch(s){case 1:return x(r,n,a);case 2:return e.slice4d(r,[0,n,0,0],[r.shape[0],a,r.shape[2],r.shape[3]]);case 3:return e.slice4d(r,[0,0,n,0],[r.shape[0],r.shape[1],a,r.shape[3]]);case 4:return m(r,n,a);default:throw new t.ValueError("The axis is not within the rank of the tensor "+`${s}`)}default:throw new t.ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+`${r.rank}`)}})}function g(r,t=-1){let n;return t<0&&(t=0!==(n=r[0].rank)?n:0),t===r[0].rank&&(t=-1),e.concat(r,t)}function b(r,n){switch(r.rank){case 1:return e.concat1d([r,n]);case 2:return e.concat2d([r,n],0);case 3:return e.concat3d([r,n],0);case 4:return e.concat4d([r,n],0);default:throw new t.ValueError("concatAlongFirstAxis() received an unsupported "+`tensor rank: ${r.rank}`)}}function A(r,n){if(Array.isArray(n)||(n=[n]),r.rank!==n.length)throw new t.ValueError(`The length of input n (${n.length}) does not match `+`the number of dimensions in input x (${r.rank})`);return e.tile(r,n)}function $(r,t=0,n=1,a,s){return e.randomNormal(r,t,n,a,s)}function E(r,n,s,o){if(r.rank<2||n.rank<2)throw new t.NotImplementedError("dot requires both inputs to be rank >= 2"+` but got x shape = ${r.shape} and y shape = ${n.shape}`);if(n.rank>=3){if(r.shape.slice(-1)[0]!==n.shape.slice(-2)[0])throw new t.NotImplementedError("If rank y >= 3, then the second last dim"+` of y must equal the last dim of x but got x shape = ${r.shape} and `+` y shape = ${n.shape}`)}if(2===r.rank&&2===n.rank){const t=!1,i=!1;return e.fused.matMul({a:r,b:n,transposeA:t,transposeB:i,bias:o?P(r.rank,o,(0,a.imageDataFormat)()):null,activation:s})}{const t=r.shape.slice(),i=t.pop();r=r.reshape([-1,i]);const u=n.shape.slice(),c=u.pop(),p=u.pop(),h=[...u,c],l=Array.from({length:n.rank},(e,r)=>0===r?n.rank-2:r<=n.rank-2?r-1:r);n=n.transpose(l).reshape([p,-1]);const d=[...t,...h],f=!1,k=!1;return e.fused.matMul({a:r,b:n,transposeA:f,transposeB:k,bias:o?P(r.rank,o,(0,a.imageDataFormat)()):null,activation:s}).reshape(d)}}function v(r){return(0,e.tidy)(()=>{const t=(0,e.zerosLike)(r),n=(0,e.onesLike)(r);return(0,e.where)(e.equal(r,t),t,(0,e.where)(e.greater(r,(0,e.zerosLike)(r)),n,e.mul(-1,n)))})}function F(r,t){return(0,e.tidy)(()=>{if(1!==r.rank)throw new Error("Only 1D one-hot tensors are supported in the deeplearn backend, at present.");return r=r.toInt(),e.oneHot(r,t).toFloat()})}function V(r,t,n){return(0,e.tidy)(()=>(t=Array.isArray(t)?(0,e.tensor1d)(t,"int32"):t.toInt(),e.gather(r,t,n)))}function q(r){return e.mul(r,r)}function O(r,n){return(0,e.tidy)(()=>{if("number"==typeof n&&(n=(0,e.scalar)(Math.round(n),"int32")),"int32"!==n.dtype)throw new t.NotImplementedError(`Non-int32 dtype (${n.dtype}) is not supported by pow() yet`);return e.pow(r,n)})}function P(e,r,n){const a=r.shape;if(1!==r.rank&&r.rank!==e)throw new t.ValueError(`Unexpected bias dimensions: ${r.rank}`+`; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===a.length?r.reshape([1,a[0],1,1,1]):r.reshape([1,a[3],a[0],a[1],a[2]]);if("channelsLast"===n)return 1===a.length?r.reshape([1,1,1,1,a[0]]):r.reshape([1].concat(a))}else if(4===e){if("channelsFirst"===n)return 1===a.length?r.reshape([1,a[0],1,1]):r.reshape([1,a[2],a[0],a[1]]);if("channelsLast"===n)return 1===a.length?r.reshape([1,1,1,a[0]]):r.reshape([1].concat(a))}else if(3===e){if("channelsFirst"===n)return 1===a.length?r.reshape([1,a[0],1]):r.reshape([1,a[1],a[0]]);if("channelsLast"===n)return 1===a.length?r.reshape([1,1,a[0]]):r.reshape([1].concat(a))}else if(e<3)return r;throw new t.ValueError(`Unsupported input rank by biasAdd: ${r.rank}`)}function L(t,n,s){return(0,e.tidy)(()=>(null==s&&(s=(0,a.imageDataFormat)()),(0,r.checkDataFormat)(s),t.add(P(t.rank,n,s))))}function j(r,n=1){if(1!==n)throw new t.NotImplementedError(`Support for alpha values other than 1 (${n}) is not implemented `+"yet.");return e.elu(r)}function D(r){return(0,e.tidy)(()=>e.div(r,e.abs(r).add(1)))}function B(r,t,n,a){return(0,e.tidy)(()=>e.dropout(r,t,n,a))}function I(r){return(0,e.tidy)(()=>{const t=e.add(.5,e.mul(.2,r));return e.clipByValue(t,0,1)})}function M(e,r,t=!1){return t?e():r()}
},{"@tensorflow/tfjs-core":"tKjQ","../common":"oZnC","../errors":"g8PH","../utils/math_utils":"ujnL","./common":"BnDD"}],"tYCU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializerClassNames=exports.VALID_DISTRIBUTION_VALUES=exports.VALID_FAN_MODE_VALUES=void 0;const e=["fanIn","fanOut","fanAvg"];exports.VALID_FAN_MODE_VALUES=e;const o=["normal","uniform","truncatedNormal"];exports.VALID_DISTRIBUTION_VALUES=o;const t=["Zeros","Ones","Constant","RandomNormal","RandomUniform","TruncatedNormal","VarianceScaling","Orthogonal","Identity"];exports.initializerClassNames=t;
},{}],"NnFu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkFanMode=u,exports.checkDistribution=m,exports.serializeInitializer=T,exports.getInitializer=z,exports.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=exports.Orthogonal=exports.LeCunUniform=exports.LeCunNormal=exports.HeUniform=exports.HeNormal=exports.GlorotNormal=exports.GlorotUniform=exports.VarianceScaling=exports.Identity=exports.TruncatedNormal=exports.RandomNormal=exports.RandomUniform=exports.Constant=exports.Ones=exports.Zeros=exports.Initializer=void 0;var e=require("@tensorflow/tfjs-core"),t=l(require("./backend/tfjs_backend")),s=require("./common"),r=require("./errors"),n=require("./keras_format/initializer_config"),a=require("./utils/generic_utils"),i=require("./utils/math_utils");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=r?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(s,n,a):s[n]=e[n]}return s.default=e,t&&t.set(e,s),s}function u(e){(0,a.checkStringTypeUnionValue)(n.VALID_FAN_MODE_VALUES,"FanMode",e)}function m(e){(0,a.checkStringTypeUnionValue)(n.VALID_DISTRIBUTION_VALUES,"Distribution",e)}class d extends e.serialization.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}exports.Initializer=d;class c extends d{apply(t,s){return(0,e.zeros)(t,s)}}exports.Zeros=c,c.className="Zeros",e.serialization.registerClass(c);class h extends d{apply(t,s){return(0,e.ones)(t,s)}}exports.Ones=h,h.className="Ones",e.serialization.registerClass(h);class f extends d{constructor(e){if(super(),"object"!=typeof e)throw new r.ValueError(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new r.ValueError(`config must have value set but got ${e}`);this.value=e.value}apply(t,s){return(0,e.tidy)(()=>(0,e.mul)((0,e.scalar)(this.value),(0,e.ones)(t,s)))}getConfig(){return{value:this.value}}}exports.Constant=f,f.className="Constant",e.serialization.registerClass(f);class p extends d{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(t,s){return(0,e.randomUniform)(t,this.minval,this.maxval,s)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}exports.RandomUniform=p,p.className="RandomUniform",e.serialization.registerClass(p);class g extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,s){if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`randomNormal does not support dType ${s}.`);return t.randomNormal(e,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}exports.RandomNormal=g,g.className="RandomNormal",e.serialization.registerClass(g);class N extends d{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(t,s){if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`truncatedNormal does not support dType ${s}.`);return(0,e.truncatedNormal)(t,this.mean,this.stddev,s,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}exports.TruncatedNormal=N,N.className="TruncatedNormal",e.serialization.registerClass(N);class x extends d{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(t,s){return(0,e.tidy)(()=>{if(2!==t.length||t[0]!==t[1])throw new r.ValueError("Identity matrix initializer can only be used for 2D square matrices.");return(0,e.mul)(this.gain,(0,e.eye)(t[0]))})}getConfig(){return{gain:this.gain}}}function C(e,t="channelsLast"){let r,n;if((0,s.checkDataFormat)(t),2===e.length)r=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=(0,i.arrayProd)(e,2);r=e[1]*t,n=e[0]*t}else if("channelsLast"===t){const t=(0,i.arrayProd)(e,0,e.length-2);r=e[e.length-2]*t,n=e[e.length-1]*t}}else{const t=(0,i.arrayProd)(e);r=Math.sqrt(t),n=Math.sqrt(t)}return[r,n]}exports.Identity=x,x.className="Identity",e.serialization.registerClass(x);class I extends d{constructor(e){if(super(),e.scale<0)throw new r.ValueError(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,u(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,m(this.distribution),this.seed=e.seed}apply(t,s){const n=C(t),a=n[0],i=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,a):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(a+i)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(s=s||"float32")&&"int32"!==s)throw new r.NotImplementedError(`${this.getClassName()} does not support dType ${s}.`);return(0,e.truncatedNormal)(t,0,n,s,this.seed)}{const r=Math.sqrt(3*o);return(0,e.randomUniform)(t,-r,r,s)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}exports.VarianceScaling=I,I.className="VarianceScaling",e.serialization.registerClass(I);class U extends I{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.GlorotUniform=U,U.className="GlorotUniform",e.serialization.registerClass(U);class y extends I{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.GlorotNormal=y,y.className="GlorotNormal",e.serialization.registerClass(y);class E extends I{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.HeNormal=E,E.className="HeNormal",e.serialization.registerClass(E);class v extends I{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.HeUniform=v,v.className="HeUniform",e.serialization.registerClass(v);class L extends I{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.LeCunNormal=L,L.className="LeCunNormal",e.serialization.registerClass(L);class A extends I{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return I.className}}exports.LeCunUniform=A,A.className="LeCunNormal",e.serialization.registerClass(A);class _ extends d{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new r.NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.")}apply(s,n){return(0,e.tidy)(()=>{if(s.length<2)throw new r.NotImplementedError("Shape must be at least 2D.");s[0]*s[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+`than 2000 (${s[0]*s[1]}) elements: `+"Slowness may result.");const n=s[0]>s[1]?[s[1],s[0]]:s,a=t.randomNormal(n,0,1,"float32");let i=e.linalg.gramSchmidt(a);return s[0]>s[1]&&(i=i.transpose()),(0,e.mul)(this.gain,i)})}getConfig(){return{gain:this.gain,seed:this.seed}}}exports.Orthogonal=_,_.className="Orthogonal",e.serialization.registerClass(_);const b={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function D(t,s={}){return(0,a.deserializeKerasObject)(t,e.serialization.SerializationMap.getMap().classNameMap,s,"initializer")}function T(e){return(0,a.serializeKerasObject)(e)}function z(e){if("string"==typeof e){const t=e in b?b[e]:e;if("GlorotNormal"===t)return new y;if("GlorotUniform"===t)return new U;if("HeNormal"===t)return new E;if("HeUniform"===t)return new v;if("LeCunNormal"===t)return new L;if("LeCunUniform"===t)return new A;{const e={};return e.className=t,e.config={},D(e)}}return e instanceof d?e:D(e)}exports.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=b;
},{"@tensorflow/tfjs-core":"tKjQ","./backend/tfjs_backend":"xmUi","./common":"oZnC","./errors":"g8PH","./keras_format/initializer_config":"tYCU","./utils/generic_utils":"nEuI","./utils/math_utils":"ujnL"}],"e3pB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=r,exports.ones=e,exports.constant=o,exports.randomUniform=t,exports.randomNormal=u,exports.truncatedNormal=i,exports.identity=a,exports.varianceScaling=s,exports.glorotUniform=c,exports.glorotNormal=f,exports.heNormal=l,exports.heUniform=m,exports.leCunNormal=p,exports.leCunUniform=x,exports.orthogonal=w;var n=require("./initializers");function r(){return new n.Zeros}function e(){return new n.Ones}function o(r){return new n.Constant(r)}function t(r){return new n.RandomUniform(r)}function u(r){return new n.RandomNormal(r)}function i(r){return new n.TruncatedNormal(r)}function a(r){return new n.Identity(r)}function s(r){return new n.VarianceScaling(r)}function c(r){return new n.GlorotUniform(r)}function f(r){return new n.GlorotNormal(r)}function l(r){return new n.HeNormal(r)}function m(r){return new n.HeUniform(r)}function p(r){return new n.LeCunNormal(r)}function x(r){return new n.LeCunUniform(r)}function w(r){return new n.Orthogonal(r)}
},{"./initializers":"NnFu"}],"URZT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNextUniqueTensorId=t,exports.getUid=r;let e=0;function t(){return e++}const n={};function r(e=""){return e in n||(n[e]=0),n[e]+=1,e+n[e].toString()}
},{}],"Lonb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArrayOfShapes=e,exports.normalizeShapeList=t,exports.getExactlyOneTensor=n,exports.getExactlyOneShape=a;var r=require("../errors");function e(r){return Array.isArray(r)&&Array.isArray(r[0])}function t(r){return 0===r.length?[]:Array.isArray(r[0])?r:[r]}function n(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new r.ValueError(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function a(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new r.ValueError(`Expected exactly 1 Shape; got ${e.length}`)}return e}
},{"../errors":"g8PH"}],"h3ym":[function(require,module,exports) {
"use strict";function e(e){let t=0;for(const r of e)0===r.shape.length?t+=1:t+=r.shape.reduce((e,t)=>e*t);return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.countParamsInWeights=e;
},{}],"yJYS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.variable=l,exports.zerosVariable=p,exports.zerosLike=d,exports.onesVariable=c,exports.onesLike=f,exports.eyeVariable=h,exports.randomUniformVariable=m,exports.truncatedNormalVariable=b,exports.randomNormalVariable=w,exports.update=y,exports.updateAdd=v,exports.updateSub=N,exports.batchGetValue=x,exports.batchSetValue=g,exports.gradients=V,exports.LayerVariable=void 0;var e=o(require("@tensorflow/tfjs-core")),t=require("./backend/state"),r=require("./common"),n=require("./errors");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}const i="Variable";class s{constructor(n,a="float32",o=i,s=!0,u=null){this.dtype=null==a?"float32":a,this.shape=n.shape,this.id=(0,t.getNextUniqueTensorId)(),o=null==o?i:o,this.originalName=(0,r.getScopedTensorName)(o),this.name=(0,r.getUniqueTensorName)(this.originalName),this.trainable_=s,this.constraint=u,this.val=e.variable(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),u(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function u(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function l(e,t,r,n){return new s(e,t,r,!0,n)}function p(t,r,n){return new s(e.zeros(t),r,n)}function d(t,r,n){return new s(e.zerosLike(t),r,n)}function c(t,r,n){const a=e.ones(t);return new s(a,r,n)}function f(t,r,n){const a=e.onesLike(t);return new s(a,r,n)}function h(t,r,n){return new s(e.eye(t),r,n)}function m(t,r,n,a,o,i="randomUniform"){return new s(e.randomUniform(t,r,n,a),a,i)}function b(t,r=0,a=1,o,i,u="truncatedNormal"){if("float32"!==(o=o||"float32")&&"int32"!==o)throw new n.NotImplementedError(`randomNormal does not support dType ${o}.`);return new s(e.truncatedNormal(t,r,a,o,i),o,u)}function w(t,r=0,a=1,o,i,u="randomNormal"){if("float32"!==(o=o||"float32")&&"int32"!==o)throw new n.NotImplementedError(`randomNormalVariable does not support dType ${o}.`);return new s(e.randomNormal(t,r,a,o,i),o,u)}function y(e,t){return e.write(t)}function v(t,r){return t.write(e.add(t.read(),r))}function N(t,r){return t.write(e.sub(t.read(),r))}function x(e){return e.map(e=>e.read())}function g(e){e.forEach(e=>{e[0].write(e[1])})}function V(t,r){const n=r.map(e=>e.read()),a=(0,e.variableGrads)(t,n);return r.map(e=>a.grads[e.name])}exports.LayerVariable=s;
},{"@tensorflow/tfjs-core":"tKjQ","./backend/state":"URZT","./common":"oZnC","./errors":"g8PH"}],"c19E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSourceInputs=w,exports.Layer=exports.Node=exports.SymbolicTensor=exports.InputSpec=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../backend/state"),n=require("../common"),i=require("../errors"),s=require("../initializers"),r=l(require("../utils/generic_utils")),o=l(require("../utils/types_utils")),a=l(require("../utils/variable_utils")),h=require("../variables");function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var r=i?Object.getOwnPropertyDescriptor(t,s):null;r&&(r.get||r.set)?Object.defineProperty(n,s,r):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}class p{constructor(t){this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}exports.InputSpec=p;class d{constructor(t,i,s,r,o,a,h){this.dtype=t,this.shape=i,this.sourceLayer=s,this.inputs=r,this.callArgs=o,this.outputTensorIndex=h,this.id=(0,e.getNextUniqueTensorId)(),null!=a&&(this.originalName=(0,n.getScopedTensorName)(a),this.name=(0,n.getUniqueTensorName)(this.originalName)),this.rank=i.length}}exports.SymbolicTensor=d;let c=0;class f{constructor(t,e){this.callArgs=e,this.id=c++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)null!=e?t.push(e.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}exports.Node=f;let b=0;class g extends t.serialization.Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=b++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const t=this.getClassName();n=r.toSnakeCase(t)+"_"+(0,e.getUid)(t)}if(this.name=n,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}null!=t.weights?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new i.RuntimeError("The layer has never been called "+`and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new i.ValueError(`Asked to get ${e} at node ${t}, `+`but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return r.singletonOrArray(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return r.singletonOrArray(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new i.AttributeError(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new i.AttributeError(`Layer ${this.name}`+" is not connected, no input to return.");return r.singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new i.AttributeError(`Layer ${this.name}`+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new i.AttributeError(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return r.singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=r.toList(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=r.toList(this.inputSpec);if(t.length!==e.length)throw new i.ValueError(`Layer ${this.name} expects ${e.length} inputs, `+`but it received ${t.length} input tensors. `+`Input received: ${t}`);for(let n=0;n<t.length;n++){const s=t[n],r=e[n];if(null==r)continue;const o=s.rank;if(null!=r.ndim&&o!==r.ndim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}: `+`expected ndim=${r.ndim}, found ndim=${o}`);if(null!=r.maxNDim&&o>r.maxNDim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}`+`: expected max_ndim=${r.maxNDim}, found ndim=${o}`);if(null!=r.minNDim&&o<r.minNDim)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name}`+`: expected min_ndim=${r.minNDim}, found ndim=${o}.`);if(null!=r.dtype&&s.dtype!==r.dtype)throw new i.ValueError(`Input ${n} is incompatible with layer ${this.name} `+`: expected dtype=${r.dtype}, found dtype=${s.dtype}.`);if(r.axes){const t=s.shape;for(const e in r.axes){const s=Number(e),o=r.axes[e],a=s>=0?t[s]:t[t.length+s];if(null!=o&&-1===[o,null].indexOf(a))throw new i.ValueError(`Input ${n} is incompatible with layer `+`${this.name}: expected axis ${s} of input shape to `+`have value ${o} but got shape ${t}.`)}}if(null!=r.shape)for(let t=0;t<r.shape.length;++t){const e=r.shape[t],o=s.shape[t];if(null!=e&&null!=o&&e!==o)throw new i.ValueError(`Input ${n} is incompatible with layer `+`${this.name}: expected shape=${r.shape}, `+`found shape=${s.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const s=r.toList(t);let o=!0;for(const n of s)if(!(n instanceof d)){o=!1;break}let a=!0;for(const n of s)if(n instanceof d){a=!1;break}if(o===a)throw new i.ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return(0,n.nameScope)(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of r.toList(t))e.push(n.shape);this.build(r.singletonOrArray(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(t),a){let n=this.call(t,e);const o=r.toList(n),a=[];for(let t of o)-1!==s.indexOf(t)&&(t=t.clone()),a.push(t);if(n=r.singletonOrArray(a),null!=this.activityRegularizer)throw new i.NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}{const n=y(t),s=this.computeOutputShape(n);let o;const a=m(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),o=null!=s&&s.length>0&&Array.isArray(s[0])?s.map((n,i)=>new d(a,n,this,r.toList(t),e,this.name,i)):new d(a,s,this,r.toList(t),e,this.name),this.addInboundNode(t,o,null,null,n,s,e),this._refCount++,null!=this.activityRegularizer)throw new i.NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+`${JSON.stringify(t)}) does not match that of the `+`batchInputShape (${JSON.stringify(this.batchInputShape)}) `+`of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((n,i)=>{null!=n&&null!=t[i]&&t[i]!==n&&(e=!0)}),e&&console.warn("The shape of the input tensor "+`(${JSON.stringify(t)}) does not `+`match the expectation of layer ${this.name}: `+`${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new i.AttributeError(`The layer ${this.name} has never been called and thus has no `+"defined output shape.");const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new i.AttributeError(`The layer ${this.name} has multiple inbound nodes with different `+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new i.RuntimeError(`You tried to call countParams() on ${this.name}, `+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return a.countParamsInWeights(this.weights)}build(t){this.built=!0}getWeights(t=!1){return(0,h.batchGetValue)(t?this.trainableWeights:this.weights)}setWeights(e){(0,t.tidy)(()=>{const n=this.weights;if(n.length!==e.length)throw new i.ValueError(`You called setWeights(weights) on layer "${this.name}" `+`with a weight list of length ${e.length}, `+`but the layer was expecting ${n.length} weights. `+`Provided weights: ${e}...`);if(0===n.length)return;const s=[],r=(0,h.batchGetValue)(n);for(let o=0;o<r.length;++o){const a=r[o],h=n[o],u=e[o];if(!t.util.arraysEqual(a.shape,u.shape))throw new i.ValueError(`Layer weight shape ${a.shape} `+`not compatible with provided weight shape ${u.shape}`);s.push([h,u])}(0,h.batchSetValue)(s)})}addWeight(t,e,n,r,o,a,u){if(-1!==this._addedWeightNames.indexOf(t))throw new i.ValueError(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=(0,s.getInitializer)("zeros"));const l=r.apply(e,n),p=new h.LayerVariable(l,n,t,a,u);return l.dispose(),null!=o&&this.addLoss(()=>o.apply(p.read())),null==a&&(a=!0),a?this._trainableWeights.push(p):this._nonTrainableWeights.push(p),p}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=r.toList(t),void 0!==this._losses&&null!==this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.");e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.")})}return null}return e}addInboundNode(t,e,n,i,s,a,h=null){const u=r.toList(t);e=r.toList(e),n=r.toList(n),i=r.toList(i),s=o.normalizeShapeList(s),a=o.normalizeShapeList(a);const l=[],p=[],d=[];for(const r of u)l.push(r.sourceLayer),p.push(r.nodeIndex),d.push(r.tensorIndex);new f({outboundLayer:this,inboundLayers:l,nodeIndices:p,tensorIndices:d,inputTensors:u,outputTensors:e,inputMasks:n,outputMasks:i,inputShapes:s,outputShapes:a},h);for(let r=0;r<e.length;r++)e[r].sourceLayer=this,e[r].nodeIndex=this.inboundNodes.length-1,e[r].tensorIndex=r}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been `+"built yet.");if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used `+"yet.");this.assertNotDisposed();let t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function y(t){t=r.toList(t);const e=[];for(const n of t)e.push(n.shape);return r.singletonOrArray(e)}function m(t){return"float32"}function w(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];{const t=e.inboundNodes[n];if(0===t.inboundLayers.length)return t.inputTensors;{const e=[];for(let n=0;n<t.inboundLayers.length;n++){const i=w(t.inputTensors[n],t.inboundLayers[n],t.nodeIndices[n]);for(const t of i)-1===e.indexOf(t)&&e.push(t)}return e}}}exports.Layer=g;
},{"@tensorflow/tfjs-core":"tKjQ","../backend/state":"URZT","../common":"oZnC","../errors":"g8PH","../initializers":"NnFu","../utils/generic_utils":"nEuI","../utils/types_utils":"Lonb","../utils/variable_utils":"h3ym","../variables":"yJYS"}],"etSf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Input=p,exports.InputLayer=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../backend/state"),n=require("../errors"),a=require("./topology");class s extends a.Layer{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:(0,t.getUid)("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new n.ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let s=e.batchInputShape;if(null==s){if(null==e.inputShape)throw new n.ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");s=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new n.ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const p=e.dtype||"float32";this.batchInputShape=s,this.dtype=p,this.inputSpec=[{shape:s}];const r=new a.SymbolicTensor(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new a.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[s],outputShapes:[s]})}apply(e,t){throw new n.ValueError("Cannot pass any input to an "+`InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function p(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new n.ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let a=e.dtype;return null==a&&(a="float32"),new s({batchInputShape:t,name:e.name,dtype:a,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}exports.InputLayer=s,s.className="InputLayer",e.serialization.registerClass(s);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/state":"URZT","../errors":"g8PH","./topology":"c19E"}],"DCYJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveScalarsInLogs=e,exports.disposeTensorsInLogs=o;var s=require("@tensorflow/tfjs-core");async function e(e){if(null==e)return;const o=[],n=[],t=[];for(const s in e){const r=e[s];if("number"!=typeof r){const e=r;o.push(e.data()),n.push(s),t.push(e)}}if(o.length>0){const r=await Promise.all(o);for(let s=0;s<r.length;++s)e[n[s]]=r[s][0];(0,s.dispose)(t)}}function o(s){if(null!=s)for(const e in s){const o=s[e];"number"!=typeof o&&o.dispose()}}
},{"@tensorflow/tfjs-core":"tKjQ"}],"xKlN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.standardizeCallbacks=y,exports.configureCallbacks=E,exports.CallbackConstructorRegistry=exports.CustomCallback=exports.History=exports.BaseLogger=exports.CallbackList=exports.BaseCallback=exports.DEFAULT_YIELD_EVERY_MS=exports.ModelLoggingVerbosity=void 0;var t,s=require("@tensorflow/tfjs-core"),n=require("./errors"),e=require("./logs"),o=i(require("./utils/generic_utils"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var s=a();if(s&&s.has(t))return s.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=e?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,s&&s.set(t,n),n}exports.ModelLoggingVerbosity=t,function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(t||(exports.ModelLoggingVerbosity=t={}));const r=125;exports.DEFAULT_YIELD_EVERY_MS=r;class c{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,s){}async onEpochEnd(t,s){}async onBatchBegin(t,s){}async onBatchEnd(t,s){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}exports.BaseCallback=c;class l{constructor(t,s=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=s}append(t){this.callbacks.push(t)}setParams(t){for(const s of this.callbacks)s.setParams(t)}setModel(t){for(const s of this.callbacks)s.setModel(t)}async onEpochBegin(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onEpochBegin(t,s)}async onEpochEnd(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onEpochEnd(t,s)}async onBatchBegin(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onBatchBegin(t,s)}async onBatchEnd(t,s){null==s&&(s={});for(const n of this.callbacks)await n.onBatchEnd(t,s)}async onTrainBegin(t){null==t&&(t={});for(const s of this.callbacks)await s.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const s of this.callbacks)await s.onTrainEnd(t)}}exports.CallbackList=l;class h extends c{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){null==n&&(n={});const e=null==n.size?0:n.size;this.seen+=e;for(const o in n){const t=n[o];if("number"==typeof t)this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+t*e;else{let n;o in this.totals?n=this.totals[o]:this.totals[o]=0;const a=(0,s.tidy)(()=>(0,s.add)(this.totals[o],(0,s.mul)(t,e)));this.totals[o]=a,null!=n&&n.dispose()}}}async onEpochEnd(t,n){if(null!=n)for(const e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?n[e]=this.totals[e]/this.seen:(0,s.tidy)(()=>{const t=(0,s.mul)((0,s.div)(1,this.seen),this.totals[e]);n[e]=t,this.totals[e].dispose(),(0,s.keep)(n[e])}))}}exports.BaseLogger=h;class u extends c{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,s){null==s&&(s={}),this.epoch.push(t);for(const n in s)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(s[n])}async syncData(){const t=[],s=[],n=[];for(const o in this.history){const e=this.history[o];for(let a=0;a<e.length;++a)if("number"!=typeof e[a]){const i=e[a];t.push(i.data()),s.push(o),n.push(a)}}const e=await Promise.all(t);for(let o=0;o<e.length;++o){this.history[s[o]][n[o]].dispose(),this.history[s[o]][n[o]]=e[o][0]}}}exports.History=u;class p extends c{constructor(t,n){if(super(),this.currentEpoch=0,this.yieldEvery=n||"auto","auto"===this.yieldEvery&&(this.yieldEvery=r),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");s.util.isNumber(this.yieldEvery)&&(this.maybeWait=o.debounce(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,o){const a=[];null!=this.yield&&(await(0,e.resolveScalarsInLogs)(o),a.push(this.yield(t,n,o))),a.push((0,s.nextFrame)()),await Promise.all(a)}async onEpochBegin(t,s){this.currentEpoch=t,null!=this.epochBegin&&(await(0,e.resolveScalarsInLogs)(s),await this.epochBegin(t,s))}async onEpochEnd(t,n){const o=[];null!=this.epochEnd&&(await(0,e.resolveScalarsInLogs)(n),o.push(this.epochEnd(t,n))),"epoch"===this.yieldEvery&&o.push((0,s.nextFrame)()),await Promise.all(o)}async onBatchBegin(t,s){null!=this.batchBegin&&(await(0,e.resolveScalarsInLogs)(s),await this.batchBegin(t,s))}async onBatchEnd(t,n){const o=[];null!=this.batchEnd&&(await(0,e.resolveScalarsInLogs)(n),o.push(this.batchEnd(t,n))),"batch"===this.yieldEvery?o.push((0,s.nextFrame)()):s.util.isNumber(this.yieldEvery)&&o.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(o)}async onTrainBegin(t){null!=this.trainBegin&&(await(0,e.resolveScalarsInLogs)(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await(0,e.resolveScalarsInLogs)(t),await this.trainEnd(t))}}function y(t,s){if(null==t&&(t={}),t instanceof c)return[t];if(Array.isArray(t)&&t[0]instanceof c)return t;return o.toList(t).map(t=>new p(t,s))}exports.CustomCallback=p;class d{constructor(){}static registerCallbackConstructor(t,n){s.util.assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, "+`but got ${t}`),d.checkForDuplicate(n),null==d.constructors[t]&&(d.constructors[t]=[]),d.constructors[t].push(n)}static checkForDuplicate(t){for(const s in d.constructors){d.constructors[+s].forEach(s=>{if(s===t)throw new n.ValueError("Duplicate callback constructor.")})}}static clear(){d.constructors={}}static createCallbacks(t){const s=[];for(const n in d.constructors){const e=+n;t>=e&&s.push(...d.constructors[e])}return s.map(t=>new t)}}function E(t,s,n,e,o,a,i,r,c){const p=new u,y=[new h,...d.createCallbacks(s)];null!=t&&y.push(...t),y.push(p);const E=new l(y);return E.setParams({epochs:n,initialEpoch:e,samples:o,steps:a,batchSize:i,verbose:s,doValidation:r,metrics:c}),{callbackList:E,history:p}}exports.CallbackConstructorRegistry=d,d.constructors={};
},{"@tensorflow/tfjs-core":"tKjQ","./errors":"g8PH","./logs":"DCYJ","./utils/generic_utils":"nEuI"}],"T26j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserialize=i;var e=require("@tensorflow/tfjs-core"),r=require("../utils/generic_utils");function i(i,t={},a=!1){return(0,r.deserializeKerasObject)(i,e.serialization.SerializationMap.getMap().classNameMap,t,"layer",a)}
},{"@tensorflow/tfjs-core":"tKjQ","../utils/generic_utils":"nEuI"}],"bdSS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.l2Normalize=u,exports.meanSquaredError=i,exports.meanAbsoluteError=a,exports.meanAbsolutePercentageError=l,exports.meanSquaredLogarithmicError=p,exports.squaredHinge=c,exports.hinge=m,exports.categoricalHinge=d,exports.logcosh=f,exports.categoricalCrossentropy=y,exports.sparseCategoricalCrossentropy=x,exports.sigmoidCrossEntropyWithLogits=g,exports.binaryCrossentropy=b,exports.kullbackLeiblerDivergence=h,exports.poisson=E,exports.cosineProximity=M,exports.get=B,exports.lossesMap=exports.cosine=exports.KLD=exports.kld=exports.MSLE=exports.msle=exports.MAPE=exports.mape=exports.MAE=exports.mae=exports.MSE=exports.mse=void 0;var e=n(require("@tensorflow/tfjs-core")),r=require("./backend/common"),t=n(require("./backend/tfjs_backend")),o=require("./errors");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(t,n,u):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function u(o,s){return(0,e.tidy)(()=>{"float32"!==o.dtype&&(o=o.asType("float32"));const n=e.sum(t.square(o),s,!0),u=e.fill(n.shape,(0,r.epsilon)()),i=e.sqrt(e.maximum(n,u));return e.div(o,i)})}function i(r,o){return(0,e.tidy)(()=>e.mean(t.square(e.sub(o,r)),-1))}function a(r,t){return(0,e.tidy)(()=>e.mean(e.abs(e.sub(t,r)),-1))}function l(t,o){return(0,e.tidy)(()=>{const s=e.sub(t,o),n=e.clipByValue(e.abs(t),(0,r.epsilon)(),Number.MAX_VALUE),u=e.abs(e.div(s,n));return e.mul(100,e.mean(u,-1))})}function p(o,s){return(0,e.tidy)(()=>{const n=e.clipByValue(s,(0,r.epsilon)(),Number.MAX_VALUE),u=e.log(e.add(1,n)),i=e.clipByValue(o,(0,r.epsilon)(),Number.MAX_VALUE),a=e.log(e.add(1,i));return e.mean(t.square(e.sub(u,a)),-1)})}function c(r,o){return(0,e.tidy)(()=>{const s=e.maximum(0,e.sub(1,e.mul(r,o)));return e.mean(t.square(s),-1)})}function m(r,t){return(0,e.tidy)(()=>{const o=e.maximum(0,e.sub(1,e.mul(r,t)));return e.mean(o,-1)})}function d(r,t){return(0,e.tidy)(()=>{const o=e.sum(e.mul(r,t),-1),s=e.max(e.mul(e.sub(1,r),t),-1);return e.maximum(0,e.add(1,e.sub(s,o)))})}function f(r,t){return(0,e.tidy)(()=>{const o=Math.log(2),s=e.sub(t,r),n=e.sub(e.add(s,e.softplus(e.mul(-2,s))),o);return e.mean(n,-1)})}function y(t,o,s=!1){return(0,e.tidy)(()=>{if(s)o=e.softmax(o);else{const r=e.sum(o,o.shape.length-1,!0);o=e.div(o,r)}return o=e.clipByValue(o,(0,r.epsilon)(),1-(0,r.epsilon)()),e.neg(e.sum(e.mul(t.toFloat(),e.log(o)),o.shape.length-1))})}function x(o,s,n=!1){return(0,e.tidy)(()=>{const u=e.floor(t.flatten(o)).toInt(),i=(s=e.clipByValue(s,(0,r.epsilon)(),1-(0,r.epsilon)())).shape;return y(e.oneHot(u,i[i.length-1]).reshape(i),s,n)})}function g(r,t){if(!e.util.arraysEqual(r.shape,t.shape))throw new o.ValueError("logits and labels must have the same shape, but got shapes "+`${JSON.stringify(r.shape)} and ${JSON.stringify(t.shape)}`);return(0,e.tidy)(()=>{const e=t.relu(),o=t.abs().neg();return e.sub(t.mul(r)).add(o.exp().log1p())})}function b(t,o){return(0,e.tidy)(()=>{let s;return s=e.clipByValue(o,(0,r.epsilon)(),1-(0,r.epsilon)()),s=e.log(e.div(s,e.sub(1,s))),e.mean(g(t,s),-1)})}function h(t,o){return(0,e.tidy)(()=>{const s=e.clipByValue(t,(0,r.epsilon)(),1),n=e.clipByValue(o,(0,r.epsilon)(),1);return e.sum(e.mul(t,e.log(e.div(s,n))),-1)})}function E(t,o){return(0,e.tidy)(()=>{const s=e.log(e.add((0,r.epsilon)(),o));return e.mean(e.sub(o,e.mul(t,s)),-1)})}function M(r,t){return(0,e.tidy)(()=>{const o=u(r,-1),s=u(t,-1),n=e.mul(o,s);return e.neg(e.sum(n,-1))})}const q=i;exports.mse=q;const v=i;exports.MSE=v;const A=a;exports.mae=A;const k=a;exports.MAE=k;const L=l;exports.mape=L;const V=l;exports.MAPE=V;const w=p;exports.msle=w;const C=p;exports.MSLE=C;const P=h;exports.kld=P;const O=h;exports.KLD=O;const S=M;exports.cosine=S;const j={meanSquaredError:i,meanAbsoluteError:a,meanAbsolutePercentageError:l,meanSquaredLogarithmicError:p,squaredHinge:c,hinge:m,categoricalHinge:d,logcosh:f,categoricalCrossentropy:y,sparseCategoricalCrossentropy:x,binaryCrossentropy:b,kullbackLeiblerDivergence:h,poisson:E,cosineProximity:M};function B(e){if("string"==typeof e){if(e in j)return j[e];let r=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(r=`Unknown loss ${e}. `+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new o.ValueError(r)}return e}exports.lossesMap=j;
},{"@tensorflow/tfjs-core":"tKjQ","./backend/common":"BnDD","./backend/tfjs_backend":"xmUi","./errors":"g8PH"}],"GLK6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryAccuracy=c,exports.categoricalAccuracy=i,exports.precision=f,exports.recall=y,exports.binaryCrossentropy=d,exports.sparseCategoricalAccuracy=x,exports.topKCategoricalAccuracy=g,exports.sparseTopKCategoricalAccuracy=m,exports.get=P,exports.getLossOrMetricName=j,exports.metricsMap=exports.sparseCategoricalCrossentropy=exports.cosine=exports.categoricalCrossentropy=exports.MAPE=exports.mape=exports.MAE=exports.mae=exports.MSE=exports.mse=void 0;var e=a(require("@tensorflow/tfjs-core")),r=a(require("./backend/tfjs_backend")),t=require("./errors"),o=require("./losses"),n=a(require("./utils/generic_utils"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function c(t,o){return(0,e.tidy)(()=>{const n=e.mul(.5,e.onesLike(o)),s=r.cast(e.greater(o,n),t.dtype);return e.mean(e.equal(t,s),-1)})}function i(t,o){return(0,e.tidy)(()=>r.cast(e.equal(e.argMax(t,-1),e.argMax(o,-1)),"float32"))}function u(r,t){return(0,e.tidy)(()=>e.logicalAnd(r.equal(1),t.equal(1)).sum().cast("float32"))}function p(r,t){return(0,e.tidy)(()=>e.logicalAnd(r.equal(1),t.equal(0)).sum().cast("float32"))}function l(r,t){return(0,e.tidy)(()=>e.logicalAnd(r.equal(0),t.equal(1)).sum().cast("float32"))}function f(r,t){return(0,e.tidy)(()=>{const o=u(r,t),n=l(r,t),s=o.add(n);return e.where(e.greater(s,0),o.div(s),0).cast("float32")})}function y(r,t){return(0,e.tidy)(()=>{const o=u(r,t),n=p(r,t),s=o.add(n);return e.where(e.greater(s,0),o.div(s),0).cast("float32")})}function d(e,r){return(0,o.binaryCrossentropy)(e,r)}function x(r,t){return r.rank===t.rank&&(r=r.squeeze([r.rank-1])),(t=t.argMax(-1)).dtype!==r.dtype&&(t=t.asType(r.dtype)),e.equal(r,t).asType("float32")}function g(e,r){throw new t.NotImplementedError}function m(e,r){throw new t.NotImplementedError}const M=o.meanSquaredError;exports.mse=M;const b=o.meanSquaredError;exports.MSE=b;const A=o.meanAbsoluteError;exports.mae=A;const E=o.meanAbsoluteError;exports.MAE=E;const q=o.meanAbsolutePercentageError;exports.mape=q;const C=o.meanAbsolutePercentageError;exports.MAPE=C;const w=o.categoricalCrossentropy;exports.categoricalCrossentropy=w;const k=o.cosineProximity;exports.cosine=k;const O=o.sparseCategoricalCrossentropy;exports.sparseCategoricalCrossentropy=O;const v={binaryAccuracy:c,categoricalAccuracy:i,precision:f,categoricalCrossentropy:w,sparseCategoricalCrossentropy:O,mse:M,MSE:b,mae:A,MAE:E,mape:q,MAPE:C,cosine:k};function P(e){if("string"==typeof e&&e in v)return v[e];if("string"!=typeof e&&null!=e)return e;throw new t.ValueError(`Unknown metric ${e}`)}function j(e){if(n.assert(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let r;for(const t of Object.keys(o.lossesMap))if(o.lossesMap[t]===e){r=t;break}if(void 0!==r)return r;for(const t of Object.keys(v))if(v[t]===e){r=t;break}return void 0!==r?r:e.name}}exports.metricsMap=v;
},{"@tensorflow/tfjs-core":"tKjQ","./backend/tfjs_backend":"xmUi","./errors":"g8PH","./losses":"bdSS","./utils/generic_utils":"nEuI"}],"t9aE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOptimizer=d;var a=require("@tensorflow/tfjs-core"),r=require("./backend/common"),e=require("./errors");function d(d){const t={Adagrad:()=>a.train.adagrad(.01),Adadelta:()=>a.train.adadelta(1,.95,(0,r.epsilon)()),Adam:()=>a.train.adam(.001,.9,.999,(0,r.epsilon)()),Adamax:()=>a.train.adamax(.002,.9,.999,(0,r.epsilon)(),0),RMSProp:()=>a.train.rmsprop(.001,.9,0,(0,r.epsilon)()),SGD:()=>a.train.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,d in t)return t[d]();throw new e.ValueError(`Unknown Optimizer ${d}`)}
},{"@tensorflow/tfjs-core":"tKjQ","./backend/common":"BnDD","./errors":"g8PH"}],"bKmK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkUserDefinedMetadata=t,exports.plainObjectCheck=r,exports.MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=void 0;const e=1048576;function t(t,o,n=!1){if(null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!r(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>e&&console.warn(`User-defined metadata of model "${o}" is too large in `+`size (length=${r.length} when serialized). It is not `+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+`${e}.`)}}function r(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const o of t){if("string"!=typeof o)return!1;if(!r(e[o]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!r(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}exports.MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=e;
},{}],"KyUX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.printSummary=t;var e=require("./variable_utils");function t(t,l,i,c=console.log){const u=o(t),h=["Layer (type)","Output shape","Param #"];let f;if(u?(l=l||65,i=i||[.45,.85,1]):(l=l||98,i=i||[.33,.55,.67,1]),i[i.length-1]<=1&&(i=i.map(e=>Math.floor(l*e))),!u){h.push("Receives inputs"),f=[];for(const e in t.nodesByDepth)f.push(...t.nodesByDepth[e])}c("_".repeat(l)),s(h,i,c),c("=".repeat(l));const p=t.layers;for(let e=0;e<p.length;++e)u?a(p[e],i,c):r(p[e],i,f,c),c((e===p.length-1?"=":"_").repeat(l));t.checkTrainableWeightsConsistency();const g=n(t),d=(0,e.countParamsInWeights)(t.nonTrainableWeights);c(`Total params: ${g+d}`),c(`Trainable params: ${g}`),c(`Non-trainable params: ${d}`),c("_".repeat(l))}function n(t){let n;return n=null!=t.collectedTrainableWeights?(0,e.countParamsInWeights)(t.collectedTrainableWeights):(0,e.countParamsInWeights)(t.trainableWeights)}function o(e){let t=!0;const n=[],o=[];for(const s in e.nodesByDepth)n.push(e.nodesByDepth[s]);for(const s of n){if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}o.push(...s)}if(t)for(const s of e.layers){let e=!1;for(const n of s.inboundNodes)if(-1!==o.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}function s(e,t,n=console.log){let o="";for(let s=0;s<e.length;++s)s>0&&(o=o.slice(0,o.length-1)+" "),o=(o+=e[s]).slice(0,t[s]),o+=" ".repeat(t[s]-o.length);n(o)}function a(e,t,n){let o;try{o=JSON.stringify(e.outputShape)}catch(a){o="multiple"}s([`${e.name} (${e.getClassName()})`,o,e.countParams().toString()],t,n)}function r(e,t,n,o){let a;try{a=JSON.stringify(e.outputShape)}catch(u){a="multiple"}const r=[];for(const s of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(s)))for(let e=0;e<s.inboundLayers.length;++e){const t=s.inboundLayers[e].name,n=s.nodeIndices[e],o=s.tensorIndices[e];r.push(`${t}[${n}][${o}]`)}const l=e.name,i=e.getClassName(),c=0===r.length?"":r[0];s([`${l} (${i})`,a,e.countParams().toString(),c],t,o);for(let h=1;h<r.length;++h)s(["","","",r[h]],t,o)}
},{"./variable_utils":"h3ym"}],"YLgq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.convertPythonicToTs=o,exports.convertTsToPythonic=u;var e=n(require("../utils/generic_utils"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t();if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,n&&n.set(e,r),r}function r(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function o(t,n){if(null===t)return null;if("string"==typeof t)return e.toCamelCase(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],u=t.length;for(let s=0;s<u;++s){const u=t[s];r(n,s,u)?e.push(u):e.push(o(u,n))}return e}{const n={};for(const r of Object.keys(t)){const u=t[r];if("name"===r&&"string"==typeof u)n[r]=u;else{const t=e.toCamelCase(r);n[t]=o(u,t)}}return n}}function u(t,n){if(null==t)return null;if("string"==typeof t)return e.toSnakeCase(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){const e=[],o=t.length;for(let s=0;s<o;++s){const o=t[s];r(n,s,o)?e.push(o):e.push(u(o,n))}return e}{const n={};for(const r of Object.keys(t)){const o=t[r],s=e.toSnakeCase(r);n[s]="name"!==r&&"className"!==r||"string"!=typeof o?u(o,r):o}return n}}
},{"../utils/generic_utils":"nEuI"}],"s8OD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.execute=l,exports.getTopologicalSortAndRecipientCountsForOneFetch=h,exports.FeedDict=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../errors"),t=require("../utils/generic_utils"),s=require("./input_layer"),o=require("./topology");function i(t,s){if(null==t.dtype||t.dtype===s.dtype)return s;try{return(0,e.cast)(s,t.dtype)}catch(o){throw new n.ValueError(`The dtype of the feed (${s.dtype}) can not be cast to the dtype `+`of the key '${t.name}' (${t.dtype}).`)}}class r{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof r)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(null==e)return;for(const n of e)this.add(n.key,n.value)}}add(e,t,s){if(null!=this.id2Value[e.id])throw new n.ValueError(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=i(e,t),this.name2Id[e.name]=e.id,null!=s&&(this.id2Mask[e.id]=s),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof o.SymbolicTensor){if(null==this.id2Value[e.id])throw new n.ValueError(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new n.ValueError(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof o.SymbolicTensor){if(null==this.id2Value[e.id])throw new n.ValueError(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new n.ValueError(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&(0,e.dispose)(this.id2Mask)}}exports.FeedDict=r;const a={},u={};function l(n,o,i,l){const c=null!=i&&i.training,h=Array.isArray(n),p=h?n:[n],m=p.map(e=>e.name),y=[],g=o.names();for(const e of m)-1!==g.indexOf(e)?y.push(o.getValue(e)):y.push(null);null!=l&&(l.maxNumTensors=-1/0,l.minNumTensors=1/0);const k=m.join(",")+"|"+o.names().join(",");let V,M;if(null==a[k]){const e=d(p,o);V=e.sorted,M=e.recipientCounts,a[k]=V,u[k]=M}V=a[k],M={},c||Object.assign(M,u[k]);const w=new r(o);for(let r=0;r<V.length;++r){if(null!=l){const n=(0,e.memory)().numTensors;n>l.maxNumTensors&&(l.maxNumTensors=n),n<l.minNumTensors&&(l.minNumTensors=n)}const n=V[r],a=n.sourceLayer;if(a instanceof s.InputLayer)continue;const u=[],d=[],h=[];let p=!1;for(const e of n.inputs){const n=w.getValue(e),t=w.getMask(e);u.push(n),d.push(t),null!=t&&(p=!0),c||(M[e.name]--,0!==M[e.name]||o.hasKey(e)||-1!==m.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||h.push(n))}p&&((i=i||{}).mask=d[0]);const g=(0,t.toList)(a.apply(u,i));let k=null;a.supportsMasking&&(k=a.computeMask(u,d));const x=f(n),T=Array.isArray(x)?x:[x];for(let e=0;e<T.length;++e){w.hasKey(T[e])||w.add(T[e],g[e],Array.isArray(k)?k[0]:k);const n=m.indexOf(T[e].name);-1!==n&&(y[n]=g[e])}c||(0,e.dispose)(h)}return w.disposeMasks(),h?y:y[0]}function d(n,t){e.util.assert(null!=n&&n.length>0,()=>"Expected at least one fetch, got none");let s=[],o={};if(1===n.length){const e=h(n[0],t);s=e.sorted,o=e.recipientMap}else{const e=new Set;for(const i of n){const{sorted:n,recipientMap:r}=h(i,t);for(const t of n)e.has(t.name)||(s.push(t),e.add(t.name));for(const e in r)null==o[e]&&(o[e]=new Set),r[e].forEach(n=>o[e].add(n))}}return{sorted:s,recipientCounts:c(o)}}function c(e){const n={};for(const t in e)n[t]=e[t].size;return n}function h(e,n){const t=new Set,s=[],o={};for(const a of n.names())t.add(a);const i=[],r=[];for(i.push(e);i.length>0;){const e=i[i.length-1];if(t.has(e.name)){i.pop();continue}const n=r[r.length-1]===i.length-1;if(0===e.inputs.length||n)i.pop(),s.push(e),t.add(e.name),n&&r.pop();else{r.push(i.length-1);for(const n of e.inputs)null==o[n.name]&&(o[n.name]=new Set),o[n.name].add(e.name),t.has(n.name)||i.push(n)}}return{sorted:s,recipientMap:o}}function f(e){let n;if(1===e.sourceLayer.inboundNodes.length)n=e.sourceLayer.output;else{let t=null;for(let n=0;n<e.sourceLayer.inboundNodes.length;++n)for(const s of e.sourceLayer.inboundNodes[n].outputTensors)if(s.id===e.id){t=n;break}n=e.sourceLayer.getOutputAt(t)}return n}
},{"@tensorflow/tfjs-core":"tKjQ","../errors":"g8PH","../utils/generic_utils":"nEuI","./input_layer":"etSf","./topology":"c19E"}],"V3Vi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Container=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../backend/state"),s=require("../errors"),n=require("../layers/serialization"),o=d(require("../utils/generic_utils")),i=require("../utils/serialization_utils"),r=d(require("../utils/types_utils")),a=require("../variables"),u=require("../version"),l=require("./executor"),h=require("./input_layer"),p=require("./topology");function c(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function d(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=n?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=t[o]}return s.default=t,e&&e.set(t,s),s}class f extends p.Layer{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=(0,e.getUid)(t)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],o.unique(this.inputs).length!==this.inputs.length)throw new s.ValueError("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+`${this.inputs.map(t=>t.name)}`);o.unique(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+`${this.outputs.map(t=>t.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const e of this.outputs){const t=e.sourceLayer,s=e.nodeIndex,n=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(s),this.outputLayersTensorIndices.push(n)}for(const e of this.inputs){const t=e.sourceLayer,s=e.nodeIndex,n=e.tensorIndex;o.assert(0===s,"input layer has >1 nodes"),o.assert(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(s),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let e=0;e<this.inputLayers.length;e++){const s=this.inputLayers[e];if(!(s instanceof h.InputLayer))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+`Received inputs: ${t.inputs}. `+`Input ${e} (0-based) originates `+`from layer type ${s.getClassName()}.`);this.inputNames.push(s.name),this.feedInputShapes.push(s.batchInputShape),this.feedInputNames.push(s.name)}for(const e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const n={},i={},r={},a={},u={},l=[],c=(t,e,n,o,i,r)=>{null!=o&&null!=i&&null!=r||(o=t.sourceLayer,i=t.nodeIndex,r=t.tensorIndex);const a=o.inboundNodes[i];if(-1!==n.indexOf(a))throw new s.RuntimeError(`The tensor ${t.name} at layer "${o.name}" `+"is part of a cycle.");if(-1!==e.indexOf(a))return;this.containerNodes.add(f.nodeKey(o,i)),o.id in u||(u[o.id]=Object.keys(u).length),-1===n.indexOf(a)&&n.push(a);const h=a.inboundLayers.length;for(let s=0;s<h;s++){const t=a.inputTensors[s],o=a.inboundLayers[s],i=a.nodeIndices[s],r=a.tensorIndices[s];c(t,e,n,o,i,r)}for(e.push(a);n.indexOf(a)>=0;)n.splice(n.indexOf(a),1);l.push(a)},d=[],y=[];for(const e of this.outputs)c(e,d,y);const m=l.slice().reverse();for(const e of m){i[e.id]=e,e.id in n||(n[e.id]=0);let t=n[e.id];const s=null==r[e.outboundLayer.id]?0:r[e.outboundLayer.id];t=Math.max(t,s),r[e.outboundLayer.id]=t,a[e.outboundLayer.id]=e.outboundLayer,n[e.id]=t;for(let o=0;o<e.inboundLayers.length;o++){const s=e.inboundLayers[o],r=e.nodeIndices[o],a=s.inboundNodes[r],u=null==n[a.id]?0:n[a.id];n[a.id]=Math.max(t+1,u),i[a.id]=a}}const g={};for(const e in n){const t=n[e];t in g||(g[t]=[]),g[t].push(i[e])}const b={};for(const e in r){const t=r[e];t in b||(b[t]=[]),b[t].push(a[e])}let L=Object.keys(b).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);this.layers=[];for(const e of L){const t=b[e];t.sort((t,e)=>{const s=u[t.id],n=u[e.id];return s<n?-1:s>n?1:0});for(const e of t)e instanceof f&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=b,L=Object.keys(g).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);const w=this.inputs.slice(),N=[];for(const e of L)for(const t of g[e]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===w.indexOf(n))throw new s.RuntimeError(`Graph disconnected: cannot obtain value for tensor ${n}`+` at layer "${e.name}". `+"The following previous layers were accessed without "+`issue: ${N}`);for(const e of t.outputTensors)w.push(e);N.push(e.name)}}this.nodesByDepth=g;const I=this.layers.map(t=>t.name);for(const e of I){const t=I.filter(t=>t===e).length;if(1!==t)throw new s.RuntimeError(`The name "${e}" is used ${t} times `+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(I))}this.outboundNodes=[],this.inboundNodes=[],new p.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new s.ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let o=0;for(const r of this.layers)for(const t of r.weights){if(null!=n[t.originalName])throw new s.ValueError(`Duplicate weight name: ${t.originalName}`);n[t.originalName]=t,o++}const i=[];for(const r in t){let o=r;if(null==n[r]){const t=r.split("/");o=t.slice(0,-2).concat([t[t.length-1]]).join("/")}if(null!=n[o])i.push([n[o],t[r]]);else if(e)throw new s.ValueError(`Provided weight data has no target variable: ${r}`);delete n[o]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new s.ValueError(`${t.length} of ${o} weights are not set: `+`${t}`)}(0,a.batchSetValue)(i)}updatedConfig(){const t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion=`tfjs-layers ${u.version}`,e.backend="TensorFlow.js",e}toJSON(t,e=!0){const s=(0,i.convertTsToPythonic)(this.updatedConfig());return e?JSON.stringify(s):s}call(e,s){return(0,t.tidy)(()=>{e=o.toList(e);const t=new l.FeedDict;for(let s=0;s<this.inputs.length;++s)t.add(this.inputs[s],e[s]);return(0,l.execute)(this.outputs,t,s)})}computeMask(e,s){return(0,t.tidy)(()=>{let t;return e=o.toList(e),t=null==s?o.pyListRepeat(null,e.length):o.toList(s),this.runInternalGraph(e,t)[1]})}computeOutputShape(t){const e=r.normalizeShapeList(t);if(e.length!==this.inputLayers.length)throw new s.ValueError(`Invalid inputShape argument ${t}: `+`model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let s=0;s<e.length;s++){const t=this.inputLayers[s],o=e[s];n[t.name+"_0_0"]=o}const i=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);if(i.length>1)for(const s of i){const t=this.nodesByDepth[s];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const s=[];for(let o=0;o<e.inboundLayers.length;o++){const t=e.inboundLayers[o],i=e.nodeIndices[o],r=e.tensorIndices[o],a=n[`${t.name}_${i}_${r}`];s.push(a)}const i=t.computeOutputShape(o.singletonOrArray(s)),a=r.normalizeShapeList(i),u=t.inboundNodes.indexOf(e);for(let e=0;e<a.length;e++){n[`${t.name}_${u}_${e}`]=a[e]}}}const a=[],u=[];for(let s=0;s<this.outputLayers.length;s++){const t=this.outputLayers[s],e=this.outputLayersNodeIndices[s],n=this.outputLayersTensorIndices[s],o=`${t.name}_${e}_${n}`;u.push(o)}for(let s=0;s<u.length;s++){const t=u[s];o.assert(t in n),a.push(n[t])}return o.singletonOrArray(a)}runInternalGraph(t,e){null==e&&(e=o.pyListRepeat(null,t.length));const n={};for(let s=0;s<this.inputs.length;++s){const o=this.inputs[s],i=t[s],r=e[s];n[o.id]=[i,r]}const i=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(o.reverseNumberCompare);for(const l of i){const t=this.nodesByDepth[l];for(const e of t){const t=e.outboundLayer,i=e.inputTensors,r=e.outputTensors,a=new Array;for(const e of i)e.id in n&&a.push(n[e.id]);if(a.length===i.length){let i,u,l,h,p={};if(null!=e.callArgs&&(p=e.callArgs),1===a.length){const[e,s]=a[0];null==p.mask&&(p.mask=s),l=o.toList(t.call(e,p)),h=o.toList(t.computeMask(e,s)),i=[e],u=[s]}else i=a.map(t=>t[0]),u=a.map(t=>t[1]),null==p.mask&&(p.mask=u),l=o.toList(t.call(i,p)),h=o.toList(t.computeMask(i,u));if(t.activityRegularizer)throw new s.NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<r.length;++t){const e=r[t],s=l[t],o=h[t];n[e.id]=[s,o]}}}}const r=[],a=[],u=[];for(const s of this.outputs){o.assert(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[t,e]=n[s.id];u.push(t.shape),r.push(t),a.push(e)}return[r,a,u]}buildNodeConversionMap(t){const e={};let s;for(const n of this.layers){s=n instanceof f?1:0;for(let t=0;t<n.inboundNodes.length;t++){const o=f.nodeKey(n,t);this.containerNodes.has(o)&&(e[o]=s,s+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new s.ValueError(`Was asked to retrieve layer at index ${e}, but model only `+`has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new s.ValueError("Provide either a layer name or layer index");for(const s of this.layers)if(s.name===t)return s;throw new s.ValueError(`No such layer: ${t}`)}calculateLosses(){return(0,t.tidy)(()=>{const t=[];for(const e of this.layers)for(let s=0;s<e.inboundNodes.length;++s){const n=f.nodeKey(e,s);this.containerNodes.has(n)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),s=[];for(const r of this.layers){const t=r.getClassName(),n=r.getConfig(),o=[];for(let s=0;s<r.inboundNodes.length;s++){const t=r.inboundNodes[s],n=f.nodeKey(r,s);let a={};if(this.containerNodes.has(n)){if(t.callArgs)try{JSON.stringify(t.callArgs),a=t.callArgs}catch(i){console.warn(`Layer ${r.name} was passed `+"non-serializable keyword arguments: "+`${t.callArgs}. They will not be included `+"in the serialized model (and thus will be missing at deserialization time)."),a={}}if(t.inboundLayers.length>0){const s=[];for(let n=0;n<t.inboundLayers.length;n++){const o=t.inboundLayers[n],i=t.nodeIndices[n],r=t.tensorIndices[n];let u=e[f.nodeKey(o,i)];null==u&&(u=0),s.push([o.name,u,r,a])}o.push(s)}}}const a={};a.name=r.name,a.className=t,a.config=n,a.inboundNodes=o,s.push(a)}t.layers=s;const n=[];for(let r=0;r<this.inputLayers.length;r++){const t=this.inputLayers[r],s=this.inputLayersNodeIndices[r],o=f.nodeKey(t,s);if(!this.containerNodes.has(o))continue;let i=e[o];null==i&&(i=0);const a=this.inputLayersTensorIndices[r];n.push([t.name,i,a])}t.inputLayers=n;const o=[];for(let r=0;r<this.outputLayers.length;r++){const t=this.outputLayers[r],s=this.outputLayersNodeIndices[r],n=f.nodeKey(t,s);if(!this.containerNodes.has(n))continue;let i=e[n];null==i&&(i=0);const a=this.outputLayersTensorIndices[r];o.push([t.name,i,a])}return t.outputLayers=o,t}static fromConfig(t,e,i={},r=!1){const a={},u={};function l(t,e){t.name in u?u[t.name].push(e):u[t.name]=[e]}function h(t,e){const s=[];let n;for(const o of e){const i=o[0],r=o[1],u=o[2];if(n=null==o[3]?{}:o[3],!(i in a))return void l(t,e);const h=a[i];if(h.inboundNodes.length<=r)return void l(t,e);const p=h.inboundNodes[r];s.push(p.outputTensors[u])}s.length>0&&t.apply(o.singletonOrArray(s),n)}function p(t){const o=t.name,i=(0,n.deserialize)(t,null!=e.customObjects?e.customObjects:{});i.setFastWeightInitDuringBuild(r),a[o]=i,t.inboundNodes.forEach(t=>{if(!(t instanceof Array))throw new s.ValueError(`Corrupted configuration, expected array for nodeData: ${t}`);l(i,t)})}const c=e.name,d=e.layers;for(const s of d)p(s);for(;!o.isObjectEmpty(u);)for(const t of d){const e=a[t.name];if(e.name in u){const t=u[e.name];delete u[e.name];for(const s of t)h(e,s)}}const f=[],y=[],m=e.inputLayers;for(const s of m){const t=s[0],e=s[1],n=s[2];o.assert(t in a);const i=a[t].inboundNodes[e].outputTensors;f.push(i[n])}const g=e.outputLayers;for(const s of g){const t=s[0],e=s[1],n=s[2];o.assert(t in a);const i=a[t].inboundNodes[e].outputTensors;y.push(i[n])}return new t({inputs:f,outputs:y,name:c})}get stateful(){if(this._stateful)throw new s.ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){(0,t.tidy)(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}exports.Container=f;
},{"@tensorflow/tfjs-core":"tKjQ","../backend/state":"URZT","../errors":"g8PH","../layers/serialization":"T26j","../utils/generic_utils":"nEuI","../utils/serialization_utils":"YLgq","../utils/types_utils":"Lonb","../variables":"yJYS","../version":"yMuw","./executor":"s8OD","./input_layer":"etSf","./topology":"c19E"}],"IGU4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.standardizeClassWeights=r,exports.standardizeSampleWeights=n,exports.standardizeWeights=s,exports.computeWeightedLoss=o;var e=require("@tensorflow/tfjs-core");function t(e,t,r){const n=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===n)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==n)throw new Error(`Provided ${r} is an array of ${e.length} `+`element(s), but the model has ${n} outputs. `+"Make sure a set of weights is provided for each model output.");return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const r=[];return t.forEach(t=>{t in e?r.push(e[t]):r.push(null)}),r}throw new Error(`The model has multiple (${n}) outputs, `+`so ${r} must be either an array with `+`${n} elements or an object with ${t} keys. `+`Provided ${r} not understood: ${JSON.stringify(e)}`)}function r(e,r){return t(e,r,"classWeight")}function n(e,r){return t(e,r,"sampleWeight")}async function s(t,r,n,s){if(null!=r||null!=s)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const r=(0,e.tidy)(()=>{if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1){const e=1;return t.argMax(e)}if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) `+"during handling of class weights. The size is expected to be >= 1.")}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during `+"handling of class weights. The rank is expected to be 1 or 2.")}),s=Array.from(await r.data());(0,e.dispose)(r);const o=[];return s.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. "+`The class ${e} exists in the data but not in `+"classWeight");o.push(n[e])}),(0,e.tensor1d)(o,"float32")}return null}function o(t,r){return(0,e.mul)(t,r)}
},{"@tensorflow/tfjs-core":"tKjQ"}],"SuK7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fitDataset=p,exports.evaluateDataset=b;var t=r(require("@tensorflow/tfjs-core")),e=require("../base_callbacks"),a=require("../errors"),s=require("../logs"),i=require("../utils/generic_utils"),n=require("./training_utils");function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=s?Object.getOwnPropertyDescriptor(t,i):null;n&&(n.get||n.set)?Object.defineProperty(a,i,n):a[i]=t[i]}return a.default=t,e&&e.set(t,a),a}const l=32;function c(e,a){let s,i;const n=a;s=n.xs,i=n.ys,t.util.assert(null!=s&&null!=i,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+`${a}`);const o=u("input",e.inputNames,s),r=u("output",e.outputNames,i),l=o[0].shape[0];t.util.assert(o.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset `+`provides ${o.length} inputs.  (Expected input keys: `+`${JSON.stringify(e.inputNames)})`),t.util.assert(r.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset `+`provides ${r.length} outputs.  (Expected output keys: `+`${JSON.stringify(e.outputNames)})`);for(let c=0;c<o.length;c++)t.util.assert(o[c].shape[0]===l,()=>"Batch size mismatch: input "+`${e.inputNames[c]} has ${o[c].shape[0]}; `+`expected  ${l} based on input ${e.inputNames[0]}.`);for(let c=0;c<r.length;c++)t.util.assert(r[c].shape[0]===l,()=>"Batch size mismatch: output "+`${e.outputNames[c]} has ${r[c].shape[0]}; `+`expected  ${l} based on input ${e.inputNames[0]}.`);return{xs:o,ys:r}}function u(e,s,i){if(i instanceof t.Tensor)return[i];if(Array.isArray(i))return t.util.assert(i.length===s.length,()=>`Received an array of ${i.length} Tensors, but expected ${s.length} to match the ${e} keys ${s}.`),i;{const t=[];for(const n of s){if(null==i[n])throw new a.ValueError("The feature data generated by the dataset lacks the required "+`${e} key '${n}'.`);t.push(i[n])}return t}}function h(t){if(3===t.length)throw new a.NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function p(a,o,r){const u=null!=r.batchesPerEpoch;if(t.util.assert(null!=a.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),t.util.assert(null!=r,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),t.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+`integer, but got ${r.epochs}`),t.util.assert(!u||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+`positive integer if specified, but got ${r.batchesPerEpoch}`),t.util.assert(null==r.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),a.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");a.isTraining=!0;try{const p=null!=r.validationData;let g,b;if(p)if(f(r.validationData))t.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+`but got ${r.validationBatches}`);else{const t=h(r.validationData);g=t.xs,b=t.ys}const y=a.makeTrainFunction(),v=a.getDedupedMetricsNames();let m;m=p?v.slice().concat(v.map(t=>"val_"+t)):v.slice();const w=(0,e.standardizeCallbacks)(r.callbacks,r.yieldEvery),$=null==r.verbose?1:r.verbose,{callbackList:E,history:x}=(0,e.configureCallbacks)(w,$,r.epochs,null,null,d(o,r),null,p,m);E.setModel(a),a.history=x,await E.onTrainBegin(),a.stopTraining_=!1;let D=null==r.initialEpoch?0:r.initialEpoch,N=await o.iterator();for(;D<r.epochs;){const e={};await E.onEpochBegin(D);let h=0,d=0;for(u||(N=await o.iterator());!u||h<r.batchesPerEpoch;){const o=await N.next();if(u&&o.done){console.warn("You provided `batchesPerEpoch` as "+`${r.batchesPerEpoch}, `+"but your dataset iterator ran out of data after "+`${h} batches; `+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+`${r.batchesPerEpoch*r.epochs} batches). `+"You may need to use the repeat() function when building your dataset.");break}if(null!=o.value){const{xs:e,ys:i}=c(a,o.value),l={};l.batch=d,l.size=e[0].shape[0],await E.onBatchBegin(d,l);const u=[];if(null!=r.classWeight){const t=(0,n.standardizeClassWeights)(r.classWeight,a.outputNames);for(let e=0;e<t.length;++e)u.push(await(0,n.standardizeWeights)(i[e],null,t[e]))}const p=e.concat(i).concat(u),f=y(p);t.dispose(p);for(let a=0;a<v.length;++a){const e=v[a],s=f[a];l[e]=s,t.keep(s)}await E.onBatchEnd(d,l),(0,s.disposeTensorsInLogs)(l),d++,h++}if(u?h>=r.batchesPerEpoch:o.done){if(p){let t;t=f(r.validationData)?(0,i.toList)(await a.evaluateDataset(r.validationData,{batches:r.validationBatches})):(0,i.toList)(a.evaluate(g,b,{batchSize:null==r.validationBatchSize?l:r.validationBatchSize,verbose:0}));for(let s=0;s<a.metricsNames.length;++s)e[`val_${a.metricsNames[s]}`]=t[s]}break}if(a.stopTraining_)break}if(await E.onEpochEnd(D,e),D++,a.stopTraining_)break}return await E.onTrainEnd(),await a.history.syncData(),a.history}finally{a.isTraining=!1}}function d(t,e){let a=null;return null!=e.batchesPerEpoch?a=e.batchesPerEpoch:Number.isFinite(t.size)&&(a=t.size),a}function f(t){return"function"==typeof t.iterator}function g(t){return"function"==typeof t.next}async function b(e,s,n){const o=null!=(n=n||{}).batches,r=e.testFunction;let l=[];if(n.verbose>0)throw new a.NotImplementedError("Verbose mode is not implemented yet.");t.util.assert(!o||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+`received ${JSON.stringify(n.batches)}`);const u=g(s)?s:await s.iterator();let h=0,p=0;for(;!o||p<n.batches;){const a=await u.next();if(l=t.tidy(()=>{if(a.value){const{xs:s,ys:i}=c(e,a.value),n=s.concat(i),o=t.tidy(()=>r(n));if(t.dispose(n),0===p)for(let e=0;e<o.length;++e)l.push((0,t.scalar)(0));const u=n[0].shape[0];for(let e=0;e<o.length;++e){const a=o[e],s=l[e];l[e]=t.tidy(()=>t.add(l[e],t.mul(u,a))),p>0&&t.dispose(s)}t.dispose(o),h+=u,++p}return l}),a.done){o&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+`batches (in this case, ${n.batches} batches). `+"You may need to use the repeat() function when building your dataset.");break}}for(let a=0;a<l.length;++a){const e=l[a];l[a]=t.div(l[a],h),t.dispose(e)}return(0,i.singletonOrArray)(l)}
},{"@tensorflow/tfjs-core":"tKjQ","../base_callbacks":"xKlN","../errors":"g8PH","../logs":"DCYJ","../utils/generic_utils":"nEuI","./training_utils":"IGU4"}],"kLAX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkBatchSize=l,exports.sliceArrays=c,exports.sliceArraysByIndices=u,exports.makeBatches=p,exports.fitTensors=d,exports.ensureTensorsRank2OrHigher=h,exports.disposeNewTensors=g;var e=o(require("@tensorflow/tfjs-core")),t=require("../backend/tfjs_backend"),n=require("../base_callbacks"),i=require("../errors"),a=require("../logs"),r=require("../utils/math_utils");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(n,a,r):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function l(t){e.util.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function c(e,n,i){return null==e?[null]:Array.isArray(e)?e.map(e=>(0,t.sliceAlongFirstAxis)(e,n,i-n)):(0,t.sliceAlongFirstAxis)(e,n,i-n)}function u(n,i){return e.tidy(()=>null==n?null:Array.isArray(n)?n.map(e=>u(e,i)):(0,t.gather)(n,"int32"===i.dtype?i:i.toInt()))}function p(e,t){const n=[];let i=0,a=null;for(;i<e;)(a=i+t)>=e&&(a=e),n.push([i,a]),i=a;return n}async function f(s,o,l,c,f,d,h,g,y,v,b,w,m,k,E){null==f&&(f=32),null==d&&(d=1),null==b&&(b=!0),null==m&&(m=0);let D=!1;if(null!=y&&null!=v&&(D=!0),null!=E&&(D=!0,null==k))throw new i.ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const T=s.checkNumSamples(l,f,k,"steps_per_epoch");let x;null!=T&&(x=(0,r.range)(0,T)),null==h&&(h=1);const{callbackList:A,history:_}=(0,n.configureCallbacks)(g,h,d,m,T,k,f,D,w);A.setModel(s),s.history=_,await A.onTrainBegin(),s.stopTraining_=!1;for(let n=m;n<d;++n){await A.onEpochBegin(n);const r={};if(null!=k)throw new i.NotImplementedError("stepsPerEpoch mode is not implemented yet.");{if("batch"===b)throw new i.NotImplementedError("batch shuffling is not implemneted yet");b&&e.util.shuffle(x);const n=(0,e.tensor1d)(x),d=p(T,f);for(let i=0;i<d.length;++i){const p={};if(await A.onBatchBegin(i,p),e.tidy(()=>{const a=d[i][0],h=d[i][1],g=(0,t.sliceAlongFirstAxis)(n,a,h-a);p.batch=i,p.size=h-a;const b=u(l,g),w=o(b);for(let t=0;t<c.length;++t){const n=c[t],i=w[t];p[n]=i,e.keep(i)}if(i===d.length-1&&D){const t=s.testLoop(y,v,f);for(let n=0;n<c.length;++n){const i=c[n],a=t[n];e.keep(a),r["val_"+i]=a}}}),await A.onBatchEnd(i,p),(0,a.disposeTensorsInLogs)(p),s.stopTraining_)break}n.dispose()}if(await A.onEpochEnd(n,r),s.stopTraining_)break}return await A.onTrainEnd(),await s.history.syncData(),s.history}async function d(t,a,r,s={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let o,u,p,d,h,y,v;t.isTraining=!0;try{const b=null==s.batchSize?32:s.batchSize;l(b);const w=!1,m=await t.standardizeUserData(a,r,s.sampleWeight,s.classWeight,w,b);o=m[0],u=m[1],v=m[2];let k,E=!1;if(null!=s.validationData&&s.validationData.length>0){if(E=!0,2!==s.validationData.length)throw 3===s.validationData.length?new i.NotImplementedError("validationData including sample weights is not supported yet."):new i.ValueError("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+`${s.validationData} is invalid.`);p=s.validationData[0],d=s.validationData[1];const e=!0,n=await t.standardizeUserData(p,d,null,null,e,b);h=n[0],y=n[1],k=h.concat(y)}else if(null!=s.validationSplit&&s.validationSplit>0&&s.validationSplit<1){E=!0;const e=Math.floor(o[0].shape[0]*(1-s.validationSplit)),t=o[0].shape[0];h=c(o,e,t),o=c(o,0,e),y=c(u,e,t),u=c(u,0,e),k=h.concat(y)}else null!=s.validationSteps&&(E=!0);const D=o.concat(u).concat(v);t.checkTrainableWeightsConsistency();const T=t.makeTrainFunction(),x=t.getDedupedMetricsNames();let A,_;E?(t.makeTestFunction(),A=t.testFunction,_=x.slice().concat(x.map(e=>"val_"+e))):(A=null,k=[],_=x.slice());const O=(0,n.standardizeCallbacks)(s.callbacks,s.yieldEvery);return await f(t,T,D,x,b,s.epochs,s.verbose,O,A,k,s.shuffle,_,s.initialEpoch,null,null)}finally{t.isTraining=!1,g(o,a),g(u,r),g(h,p),g(y,d),null!=v&&e.dispose(v)}}function h(n){const i=[];n instanceof e.Tensor&&(n=[n]);for(let e=0;e<n.length;++e){const a=n[e];if(1===a.rank)i.push((0,t.expandDims)(a,1));else{if(0===a.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");i.push(a)}}return i}function g(t,n){if(null==t)return;const i=[];if(n instanceof e.Tensor)i.push(n.id);else if(Array.isArray(n))n.forEach(e=>i.push(e.id));else if(null!=n)for(const e in n){const t=n[e];i.push(t.id)}const a=[];if(t instanceof e.Tensor)-1===i.indexOf(t.id)&&a.push(t);else if(Array.isArray(t))t.forEach(e=>{-1===i.indexOf(e.id)&&a.push(e)});else if(null!=t)for(const e in t){const n=t[e];-1===i.indexOf(n.id)&&a.push(n)}a.forEach(e=>{e.isDisposed||e.dispose()})}
},{"@tensorflow/tfjs-core":"tKjQ","../backend/tfjs_backend":"xmUi","../base_callbacks":"xKlN","../errors":"g8PH","../logs":"DCYJ","../utils/math_utils":"ujnL"}],"VhEh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDataTensor=T,exports.isDataArray=A,exports.isDataDict=z,exports.standardizeInputData=$,exports.checkArrayLengths=E,exports.collectMetrics=N,exports.Functional=exports.LayersModel=void 0;var e=O(require("@tensorflow/tfjs-core")),t=O(require("../backend/tfjs_backend")),s=require("../common"),r=require("../errors"),i=require("../layers/serialization"),n=O(require("../losses")),o=O(require("../metrics")),a=O(require("../optimizers")),l=require("../user_defined_metadata"),h=require("../utils/generic_utils"),u=require("../utils/layer_utils"),c=require("../utils/math_utils"),p=require("../utils/serialization_utils"),f=require("../version"),d=require("./container"),g=require("./executor"),m=require("./training_dataset"),y=require("./training_tensors"),w=require("./training_utils");function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function O(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=r?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(s,i,n):s[i]=e[i]}return s.default=e,t&&t.set(e,s),s}function T(t){return t instanceof e.Tensor}function A(e){return Array.isArray(e)}function z(e){return!T(e)&&!A(e)}function $(e,t,s,i=!0,n=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(A(e)&&e.length>0)t=!0;else if(z(e)){for(const s in e)if(e.hasOwnProperty(s)){t=!0;break}}else t=!0;if(t)throw new r.ValueError(`Error when checking model ${n} expected no data, `+`but got ${e}`)}return[]}if(null==e)return t.map(e=>null);let o;if(z(e)){e=e,o=[];for(const s of t){if(null==e[s])throw new r.ValueError(`No data provided for "${s}". Need data for each key in: `+`${t}`);o.push(e[s])}}else if(A(e)){if((e=e).length!==t.length)throw new r.ValueError(`Error when checking model ${n}: the Array of `+"Tensors that you are passing to your model is not the size the "+`model expected. Expected to see ${t.length} Tensor(s), but `+`instead got the following list of Tensor(s): ${e}`);o=e}else{if(e=e,t.length>1)throw new r.ValueError(`The model ${n} expects ${t.length} Tensor(s), `+`but only received one Tensor. Found: Tensor with shape ${e.shape}`);o=[e]}if(o=(0,y.ensureTensorsRank2OrHigher)(o),null!=s)for(let a=0;a<t.length;++a){if(null==s[a])continue;const e=o[a];if(e.shape.length!==s[a].length)throw new r.ValueError(`Error when checking ${n}: expected ${t[a]} `+`to have ${s[a].length} dimension(s). but got array with `+`shape ${e.shape}`);for(let o=0;o<s[a].length;++o){if(0===o&&!i)continue;const l=e.shape[o],h=s[a][o];if(null!=h&&h>=0&&l!==h)throw new r.ValueError(`Error when checking ${n}: expected ${t[a]} `+`to have shape [${s[a]}], but got array with shape `+`[${e.shape}].`)}}return o}function E(t,s,i){const n=(0,h.unique)(t.map(e=>e.shape[0]));n.sort();const o=(0,h.unique)(s.map(e=>e.shape[0]));if(o.sort(),n.length>1)throw new r.ValueError("All input Tensors (x) should have the same number of samples. Got array shapes: "+`${JSON.stringify(t.map(e=>e.shape))}`);if(o.length>1)throw new r.ValueError("All target Tensors (y) should have the same number of samples. Got array shapes: "+`${JSON.stringify(s.map(e=>e.shape))}`);if(n.length>0&&o.length>0&&!e.util.arraysEqual(n,o))throw new r.ValueError("Input Tensors should have the same number of samples as target "+`Tensors. Found ${n[0]} input sample(s) and ${o[0]} target `+"sample(s).")}function v(e,t,s){const i=[n.meanSquaredError,n.binaryCrossentropy,n.categoricalCrossentropy];for(let o=0;o<e.length;++o){const a=e[o],l=t[o],h=s[o];if(null!=l){if(l===n.categoricalCrossentropy&&1===a.shape[a.shape.length-1])throw new r.ValueError(`You are passing a target array of shape ${a.shape} while using `+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==i.indexOf(l)){const e=a.shape.slice(1),t=h.slice(1);for(let s=0;s<e.length;++s){const i=e[s],n=t[s];if(null!=n&&i!==n)throw new r.ValueError(`A target Tensor with shape ${a.shape} was passed for an `+`output of shape ${h}, while using a loss function that `+"expects targets to have the same shape as the output.")}}}}}function x(e,t,s,i=!0,n=""){let o;if(Array.isArray(e)){if(e.length!==t.length)throw new r.ValueError(`Error when checking model ${n}: the Array of `+"Tensors that you are passing to your model is not the size the "+`the model expected. Expected to see ${t.length} Tensor(s),`+` but instead got ${e.length} Tensors(s).`);o=e}else{if(t.length>1)throw new r.ValueError(`The model expects ${t.length} ${n} Tensors, `+"but only received one Tensor. Found: array with shape "+`${JSON.stringify(e.shape)}.`);o=[e]}if(null!=s)for(let a=0;a<t.length;++a){if(null==s[a])continue;const e=o[a];if(e.shape.length!==s[a].length)throw new r.ValueError(`Error when checking ${n}: expected ${t[a]} `+`to have ${s[a].length} dimension(s), but got array with `+`shape ${JSON.stringify(e.shape)}`);for(let o=0;o<s[a].length;++o){if(0===o&&!i)continue;const l=e.shape[o],h=s[a][o];if(null!=h&&h!==l)throw new r.ValueError(`Error when checking ${n}: expected `+`${t[a]} to have shape ${JSON.stringify(s[a])} but `+`got array with shape ${JSON.stringify(e.shape)}.`)}}}function N(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let s;if("string"==typeof e||"function"==typeof e)s=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+`function, Array, or Object, found: ${e}`);s=e}if(Array.isArray(s))return t.map(e=>s);{const e=[];for(const r of t){let t=s.hasOwnProperty(r)?s[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}const k="layers-model";class S extends d.Container{constructor(e){super(e),this.isTraining=!1}summary(e,t,s=console.log){if(!this.built)throw new r.ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");(0,u.printSummary)(this,e,t,s)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer_=a.getOptimizer(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof e.Optimizer))throw new r.ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let i=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new r.ValueError("When passing an Array as loss, it should have one entry per "+`model output. The model has ${this.outputs.length} output(s), `+`but you passed loss=${t.loss}.`);const e=t.loss;i=e.map(e=>n.get(e))}else{const e=n.get(t.loss);this.outputs.forEach(t=>{i.push(e)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new r.ValueError(`Unknown entry in loss dictionary: "${e}". `+`Only expected the following keys: ${this.outputNames}`);for(const e of this.outputNames)null==t.loss[e]&&console.warn(`Output "${e}" is missing from loss dictionary. We assume `+"this was done on purpose, and we will not be expecting data "+`to be passed to ${e} during training`),i.push(n.get(t.loss[e]))}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let e=0;e<this.outputs.length;++e){const t=this.internalOutputShapes[e],s=this.outputNames[e];this.feedOutputNames.push(s),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[e])}const l=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],(0,s.nameScope)("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==l.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});const h=N(t.metrics,this.outputNames),u=(e,t,s)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([s,e])};(0,s.nameScope)("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==l.indexOf(e))continue;(t=>{let r,i,a;for(const l of t){if("string"==typeof l&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(l)){const t=this.internalOutputShapes[e];let s;1===t[t.length-1]||this.lossFunctions[e]===n.binaryCrossentropy?-1!==["accuracy","acc"].indexOf(l)?i=o.binaryAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.binaryCrossentropy):this.lossFunctions[e]===n.sparseCategoricalCrossentropy?-1!==["accuracy","acc"].indexOf(l)?i=o.sparseCategoricalAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.sparseCategoricalCrossentropy):-1!==["accuracy","acc"].indexOf(l)?i=o.categoricalAccuracy:-1!==["crossentropy","ce"].indexOf(l)&&(i=o.categoricalCrossentropy),-1!==["accuracy","acc"].indexOf(l)?s="acc":-1!==["crossentropy","ce"].indexOf(l)&&(s="ce"),a=i,r=""+s}else{const e=o.get(l);a=e,r=""+o.getLossOrMetricName(l)}let t;(0,s.nameScope)(r,()=>{t=a}),u(e,r,t)}})(h[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,s={}){const r=null==s.batchSize?32:s.batchSize;(0,y.checkBatchSize)(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const n=i[0].concat(i[1]);this.makeTestFunction();const o=this.testFunction,a=this.testLoop(o,n,r,s.verbose,s.steps);return(0,h.singletonOrArray)(a)}finally{(0,y.disposeNewTensors)(i[0],e),(0,y.disposeNewTensors)(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),(0,m.evaluateDataset)(this,e,t)}checkNumSamples(e,t,s,i="steps"){let n;if(null!=s){if(n=null,null!=t)throw new r.ValueError(`If ${i} is set, batchSize must be null or undefined.`+`Got batchSize = ${t}`)}else{if(null==e)throw new r.ValueError("Either the input data should have a defined shape, or "+`${i} shoud be specified.`);n=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return n}execute(t,s){if(Array.isArray(s)&&0===s.length)throw new r.ValueError("`outputs` is an empty Array, which is not allowed.");const i=Array.isArray(s),n=i?s:[s],o=this.retrieveSymbolicTensors(n),a=new g.FeedDict;if(t instanceof e.Tensor&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new r.ValueError(`The number of inputs provided (${t.length}) `+"does not match the number of inputs of this model "+`(${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)a.add(this.inputs[e],t[e])}else for(const e of this.inputs){const s=t[e.name];if(null==s)throw new r.ValueError(`No value is provided for the model's input ${e.name}`);a.add(e,s)}const l=(0,g.execute)(o,a);return i?l:l[0]}retrieveSymbolicTensors(e){const t=(0,h.pyListRepeat)(null,e.length);let s=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],n=i.map(e=>e.name);for(let r=0;r<e.length;++r){const o=n.indexOf(e[r]);if(-1!==o&&(t[r]=i[o],s--),0===s)break}if(0===s)break}if(s>0){const s=[];throw t.forEach((t,r)=>{null==t&&s.push(e[r])}),new r.ValueError("Cannot find SymbolicTensors for output name(s): "+`${JSON.stringify(s)}`)}return t}predictLoop(t,s=32,i=!1){return e.tidy(()=>{const n=this.checkNumSamples(t);if(i)throw new r.NotImplementedError("Verbose predictLoop() is not implemented yet.");const o=(0,y.makeBatches)(n,s),a=this.outputs.map(e=>[]);for(let s=0;s<o.length;++s){e.tidy(()=>{const e=o[s][0],r=o[s][1],i=(0,y.sliceArrays)(t,e,r),n=[];if(Array.isArray(i))for(let t=0;t<i.length;++t)n.push({key:this.inputs[t],value:i[t]});else n.push({key:this.inputs[0],value:i});const a=new g.FeedDict(n);return(0,g.execute)(this.outputs,a)}).forEach((e,t)=>a[t].push(e))}return(0,h.singletonOrArray)(a.map(t=>e.concat(t,0)))})}predict(e,t={}){const s=(0,y.ensureTensorsRank2OrHigher)(e);x(s,this.inputNames,this.feedInputShapes,!1);try{const r=null==t.batchSize?32:t.batchSize;return(0,y.checkBatchSize)(r),this.predictLoop(s,r)}finally{(0,y.disposeNewTensors)(s,e)}}predictOnBatch(e){x(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,s=!0,i){if(null==this.optimizer_)throw new r.RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const o=[];for(let r=0;r<this.feedOutputShapes.length;++r){const e=this.feedOutputShapes[r];this.feedLossFns[r]===n.sparseCategoricalCrossentropy?o.push(e.slice(0,e.length-1).concat([1])):o.push(e)}if(E(e=$(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=$(t,this.feedOutputNames,o,!1,"target"),null),v(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=i&&i>0&&e[0].shape[0]%i!=0)throw new r.ValueError("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+`${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,s,r,i=!0,n){const[o,a]=this.standardizeUserDataXY(e,t,i,n);if(null!=s)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=(0,w.standardizeClassWeights)(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await(0,w.standardizeWeights)(a[t],null,e[t]))}return[o,a,l]}testLoop(s,i,n,o=0,a){return e.tidy(()=>{const l=this.checkNumSamples(i,n,a,"steps"),h=[];if(o>0)throw new r.NotImplementedError("Verbose mode is not implemented yet.");if(null!=a)throw new r.NotImplementedError("steps mode in testLoop() is not implemented yet");{const r=(0,y.makeBatches)(l,n),o=(0,e.tensor1d)((0,c.range)(0,l));for(let n=0;n<r.length;++n){const a=r[n][0],l=r[n][1],u=t.sliceAlongFirstAxis(o,a,l-a),c=(0,y.sliceArraysByIndices)(i,u),p=s(c);if(0===n)for(let t=0;t<p.length;++t)h.push((0,e.scalar)(0));for(let t=0;t<p.length;++t){const s=p[t];h[t]=e.add(h[t],e.mul(l-a,s))}}for(let t=0;t<h.length;++t)h[t]=e.div(h[t],l)}return h})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let s=0;s<e.length;++s){const r=e[s];let i=r;if((0,h.count)(e,r)>1){i+=`_${(0,h.count)(e.slice(0,s),r)}`}t.push(i)}return t}makeTrainFunction(){return t=>{const s=[],r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),n=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],a=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:r[e]});const a=new g.FeedDict(t),l=(0,g.execute)(this.outputs,a,{training:!0});let h;for(let r=0;r<this.lossFunctions.length;++r){let t=(0,this.lossFunctions[r])(i[r],l[r]);null!=n[r]&&(t=(0,w.computeWeightedLoss)(t,n[r]));const o=e.mean(t);s.push(o),h=0===r?t:e.add(h,t)}for(let r=0;r<this.metricsTensors.length;++r){let t;if(this.outputs.length>1&&r<this.outputs.length)t=s[r];else{const s=this.metricsTensors[r][0],n=this.metricsTensors[r][1];t=e.mean(s(i[n],l[n]))}e.keep(t),o.push(t)}return h=e.mean(h),this.calculateLosses().forEach(t=>{h=e.add(h,t)}),h},!0,a)].concat(o)}}makeTestFunction(){this.testFunction=(t=>e.tidy(()=>{const s=[];let r;const i=t.slice(0,this.inputs.length),n=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:i[e]});const a=new g.FeedDict(o),l=(0,g.execute)(this.outputs,a);for(let t=0;t<this.lossFunctions.length;++t){const i=this.lossFunctions[t],o=e.mean(i(n[t],l[t]));r=0===t?o:e.add(r,o),s.push(r)}for(let t=0;t<this.metricsTensors.length;++t){const r=this.metricsTensors[t][0],i=this.metricsTensors[t][1],o=e.mean(r(n[i],l[i]));s.push(o)}return s}))}async fit(e,t,s={}){return(0,y.fitTensors)(this,e,t,s)}async fitDataset(e,t){return(0,m.fitDataset)(this,e,t)}async trainOnBatch(t,s){const r=await this.standardizeUserData(t,s),i=r[0],n=r[1],o=this.makeTrainFunction()(i.concat(n)),a=[];for(const e of o){const t=await e.data();a.push(t[0])}return e.dispose(o),(0,h.singletonOrArray)(a)}getNamedWeights(e){const t=[],s=null!=e&&e.trainableOnly,r=s?this.trainableWeights:this.weights,i=this.getWeights(s);for(let n=0;n<r.length;++n)s&&!r[n].trainable||t.push({name:r[n].originalName,tensor:i[n]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const s=e.memory().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=s-e.memory().numTensors}return t}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=(0,h.toSnakeCase)(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>(0,h.toSnakeCase)(e))}else{const t=Object.keys(this.loss);e={};const s=this.loss;for(const r of t){if("string"!=typeof s[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=(0,h.toSnakeCase)(s[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[(0,h.toSnakeCase)(o.getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>(0,h.toSnakeCase)(o.getLossOrMetricName(e)));{const e={};for(const t in this.metrics)e[t]=(0,h.toSnakeCase)(o.getLossOrMetricName(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=(0,p.convertPythonicToTs)(e.optimizer_config),s=(0,i.deserialize)(t);let r,n;if("string"==typeof e.loss)r=(0,h.toCamelCase)(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(e=>(0,h.toCamelCase)(e));else if(null!=e.loss){r={};for(const t in e.loss)r[t]=(0,h.toCamelCase)(e.loss[t])}if(Array.isArray(e.metrics))n=e.metrics.map(e=>(0,h.toCamelCase)(e));else if(null!=e.metrics){n={};for(const t in e.metrics)n[t]=(0,h.toCamelCase)(e.metrics[t])}this.compile({loss:r,metrics:n,optimizer:s})}async save(t,s){if("string"==typeof t){const s=e.io.getSaveHandlers(t);if(0===s.length)throw new r.ValueError(`Cannot find any save handlers for URL '${t}'`);if(s.length>1)throw new r.ValueError(`Found more than one (${s.length}) save handlers for `+`URL '${t}'`);t=s[0]}if(null==t.save)throw new r.ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const i=await e.io.encodeWeights(this.getNamedWeights(s)),n={modelTopology:this.toJSON(null,!1),format:k,generatedBy:`TensorFlow.js tfjs-layers v${f.version}`,convertedBy:null};if(null!=s&&s.includeOptimizer&&null!=this.optimizer){n.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:s,specs:r}=await e.io.encodeWeights(await this.optimizer.getWeights(),t);i.specs.push(...r),i.data=e.io.concatenateArrayBuffers([i.data,s])}if(null!=this.userDefinedMetadata){const e=!0;(0,l.checkUserDefinedMetadata)(this.userDefinedMetadata,this.name,e),n.userDefinedMetadata=this.userDefinedMetadata}return n.weightData=i.data,n.weightSpecs=i.specs,t.save(n)}setUserDefinedMetadata(e){(0,l.checkUserDefinedMetadata)(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}exports.LayersModel=S,S.className="Model",e.serialization.registerClass(S);class C extends S{}exports.Functional=C,C.className="Functional",e.serialization.registerClass(C);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/tfjs_backend":"xmUi","../common":"oZnC","../errors":"g8PH","../layers/serialization":"T26j","../losses":"bdSS","../metrics":"GLK6","../optimizers":"t9aE","../user_defined_metadata":"bKmK","../utils/generic_utils":"nEuI","../utils/layer_utils":"KyUX","../utils/math_utils":"ujnL","../utils/serialization_utils":"YLgq","../version":"yMuw","./container":"V3Vi","./executor":"s8OD","./training_dataset":"SuK7","./training_tensors":"kLAX","./training_utils":"IGU4"}],"pAmT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.modelFromJSON=p,exports.loadLayersModelInternal=m,exports.loadLayersModelFromIOHandler=c,exports.Sequential=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./backend/state"),i=require("./engine/input_layer"),s=require("./engine/topology"),o=require("./engine/training"),n=require("./errors"),r=require("./layers/serialization"),l=d(require("./utils/generic_utils")),a=require("./utils/serialization_utils"),u=require("./utils/types_utils");function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=s?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}async function p(t,i){"modelTopology"in t||(t={modelTopology:t});let s=(t=t).modelTopology;null!=s.model_config&&(s=s.model_config);const o=(0,a.convertPythonicToTs)(s),n=(0,r.deserialize)(o,i);if(null!=t.weightsManifest){const i=await e.io.loadWeights(t.weightsManifest,t.pathPrefix,n.weights.map(e=>e.originalName)),s={};for(const e of n.weights)s[e.originalName]=i[e.originalName];n.loadWeights(s),(0,e.dispose)(i)}return n}async function m(t,i){if(null==i&&(i={}),"string"==typeof t){const s=e.io.getLoadHandlers(t,i);if(0===s.length)s.push(e.io.browserHTTPRequest(t,i));else if(s.length>1)throw new n.ValueError(`Found more than one (${s.length}) load handlers for `+`URL '${t}'`);t=s[0]}return c(t,void 0,i)}async function c(t,i,s){if(null==s&&(s={}),null==t.load)throw new n.ValueError("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const o=await t.load();let l=o.modelTopology;null!=l.model_config&&(l=l.model_config);const u=null==s.strict||s.strict,h=null!=o.weightData&&null!=o.weightSpecs&&u,d=(0,r.deserialize)((0,a.convertPythonicToTs)(l),i,h),p=o.trainingConfig;if(null!=p&&d.loadTrainingConfig(p),null!=o.userDefinedMetadata&&d.setUserDefinedMetadata(o.userDefinedMetadata),null!=o.weightData){if(null==o.weightSpecs)throw new n.ValueError("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:t,optimizerWeights:i}=f(o.weightData,o.weightSpecs);d.loadWeights(t,u),null!=d.optimizer&&i.length>0&&await d.optimizer.setWeights(i),(0,e.dispose)(t),(0,e.dispose)(i.map(e=>e.tensor))}return d}function f(t,i){const s=e.io.decodeWeights(t,i),o={},n=[];return i.forEach(e=>{"optimizer"===e.group?n.push({name:e.name,tensor:s[e.name]}):o[e.name]=s[e.name]}),{modelWeights:o,optimizerWeights:n}}class g extends o.LayersModel{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:(0,t.getUid)("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new n.ValueError("Negative dimension size caused by adding layer "+`${e.name} with input shape [`+`${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof g||e instanceof o.LayersModel;let r;if(t){if(1!==(r=e).outputs.length)throw new n.ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==r.inputs.length)throw new n.ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new n.ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=(0,i.Input)({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(1!==e.inboundNodes.length)throw new n.ValueError("A layer added to a Sequential model must not already be "+`connected somewhere else. LayersModel received layer ${e.name} `+`which has ${e.inboundNodes.length} pre-existing inbound `+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new n.ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=(0,s.getSourceInputs)(this.outputs[0])}this.inboundNodes=[],new s.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:l.pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if((0,u.getExactlyOneShape)(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new o.LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,i=console.log){this.built||this.build(),super.summary(e,t,i)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,i={}){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(e,t,i)}async evaluateDataset(e,t){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,i={}){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.fit(e,t,i)}async fitDataset(e,t){if(!this.built)throw new n.RuntimeError("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(t,i,s={},o=!1){let l,a={};if(i instanceof Array){if(null==i[0].className||"Merge"===i[0].className)throw new n.ValueError("Legacy serialization format not supported yet.");l=i}else e.util.assert(null!=i.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),l=i.layers,delete i.layers,a=i;const u=new t(a);if(!(u instanceof g))throw new n.NotImplementedError(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(const e of l){const t=void 0,i=(0,r.deserialize)(e,t,o);o&&i.setFastWeightInitDuringBuild(!0),u.add(i)}return u}set stopTraining(e){if(null==this.model)throw new n.ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new n.ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const i={};i.className=t.getClassName(),i.config=t.getConfig(),e.push(i)}return{name:this.name,layers:e}}}exports.Sequential=g,g.className="Sequential",e.serialization.registerClass(g);
},{"@tensorflow/tfjs-core":"tKjQ","./backend/state":"URZT","./engine/input_layer":"etSf","./engine/topology":"c19E","./engine/training":"VhEh","./errors":"g8PH","./layers/serialization":"T26j","./utils/generic_utils":"nEuI","./utils/serialization_utils":"YLgq","./utils/types_utils":"Lonb"}],"WTcZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.model=o,exports.sequential=u,exports.loadLayersModel=l,exports.input=i,exports.registerCallbackConstructor=s;var e=require("./base_callbacks"),r=require("./engine/input_layer"),t=require("./engine/training"),n=require("./models");function o(e){return new t.LayersModel(e)}function u(e){return new n.Sequential(e)}function l(e,r){return null==r&&(r={}),(0,n.loadLayersModelInternal)(e,r)}function i(e){return(0,r.Input)(e)}function s(r,t){e.CallbackConstructorRegistry.registerCallbackConstructor(r,t)}
},{"./base_callbacks":"xKlN","./engine/input_layer":"etSf","./engine/training":"VhEh","./models":"pAmT"}],"T3Eo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.serializeActivation=z,exports.deserializeActivation=N,exports.getActivation=C,exports.Swish=exports.LogSoftmax=exports.Softmax=exports.Tanh=exports.Softsign=exports.Softplus=exports.HardSigmoid=exports.Sigmoid=exports.Linear=exports.Relu6=exports.Relu=exports.Selu=exports.Elu=exports.Activation=void 0;var e=a(require("@tensorflow/tfjs-core")),s=a(require("./backend/tfjs_backend")),t=require("./utils/generic_utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=r();if(s&&s.has(e))return s.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=a?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(t,i,l):t[i]=e[i]}return t.default=e,s&&s.set(e,t),t}class i extends e.serialization.Serializable{getConfig(){return{}}}exports.Activation=i;class l extends i{apply(e,t=1){return s.elu(e,t)}}exports.Elu=l,l.className="elu",e.serialization.registerClass(l);class o extends i{apply(s){return e.selu(s)}}exports.Selu=o,o.className="selu",e.serialization.registerClass(o);class n extends i{apply(s){return e.relu(s)}}exports.Relu=n,n.className="relu",e.serialization.registerClass(n);class p extends i{apply(s){return(0,e.tidy)(()=>e.minimum(6,e.relu(s)))}}exports.Relu6=p,p.className="relu6",e.serialization.registerClass(p);class u extends i{apply(e){return e}}exports.Linear=u,u.className="linear",e.serialization.registerClass(u);class c extends i{apply(s){return e.sigmoid(s)}}exports.Sigmoid=c,c.className="sigmoid",e.serialization.registerClass(c);class x extends i{apply(e){return s.hardSigmoid(e)}}exports.HardSigmoid=x,x.className="hardSigmoid",e.serialization.registerClass(x);class f extends i{apply(s){return e.softplus(s)}}exports.Softplus=f,f.className="softplus",e.serialization.registerClass(f);class g extends i{apply(e){return s.softsign(e)}}exports.Softsign=g,g.className="softsign",e.serialization.registerClass(g);class d extends i{apply(s){return e.tanh(s)}}exports.Tanh=d,d.className="tanh",e.serialization.registerClass(d);class m extends i{apply(s,t=-1){return e.softmax(s,t)}}exports.Softmax=m,m.className="softmax",e.serialization.registerClass(m);class y extends i{apply(s,t=-1){return e.logSoftmax(s,t)}}exports.LogSoftmax=y,y.className="logSoftmax",e.serialization.registerClass(y);class S extends i{apply(s,t=1){return(0,e.tidy)(()=>e.sigmoid(s.mul(t)).mul(s))}}function z(e){return e.getClassName()}function N(s,r={}){return(0,t.deserializeKerasObject)(s,e.serialization.SerializationMap.getMap().classNameMap,r,"activation")}function C(e){if(null==e){const e={className:"linear",config:{}};return N(e)}if("string"==typeof e){const s={};return s.className=e,s.config={},N(s)}return e instanceof i?e:N(e)}exports.Swish=S,S.className="swish",e.serialization.registerClass(S);
},{"@tensorflow/tfjs-core":"tKjQ","./backend/tfjs_backend":"xmUi","./utils/generic_utils":"nEuI"}],"utpK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.l1=a,exports.l2=o,exports.serializeRegularizer=f,exports.deserializeRegularizer=p,exports.getRegularizer=d,exports.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=exports.L1L2=exports.Regularizer=void 0;var e=n(require("@tensorflow/tfjs-core")),r=n(require("./backend/tfjs_backend")),t=require("./utils/generic_utils");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function i(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+`object, but received: ${e}`)}class s extends e.serialization.Serializable{}exports.Regularizer=s;class u extends s{constructor(e){super(),i(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return(0,e.tidy)(()=>{let l=(0,e.zeros)([1]);return this.hasL1&&(l=(0,e.add)(l,(0,e.sum)(e.mul(this.l1,(0,e.abs)(t))))),this.hasL2&&(l=(0,e.add)(l,(0,e.sum)(e.mul(this.l2,r.square(t))))),l.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,r){return new e({l1:r.l1,l2:r.l2})}}function a(e){return i(e),new u({l1:null!=e?e.l1:null,l2:0})}function o(e){return i(e),new u({l2:null!=e?e.l2:null,l1:0})}exports.L1L2=u,u.className="L1L2",e.serialization.registerClass(u);const c={l1l2:"L1L2"};function f(e){return(0,t.serializeKerasObject)(e)}function p(r,l={}){return(0,t.deserializeKerasObject)(r,e.serialization.SerializationMap.getMap().classNameMap,l,"regularizer")}function d(e){if(null==e)return null;if("string"==typeof e){return p({className:e in c?c[e]:e,config:{}})}return e instanceof s?e:p(e)}exports.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP=c;
},{"@tensorflow/tfjs-core":"tKjQ","./backend/tfjs_backend":"xmUi","./utils/generic_utils":"nEuI"}],"bB42":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Softmax=exports.ThresholdedReLU=exports.ELU=exports.PReLU=exports.LeakyReLU=exports.ReLU=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../activations"),s=require("../backend/tfjs_backend"),a=require("../constraints"),r=require("../engine/topology"),i=require("../errors"),l=require("../initializers"),n=require("../regularizers"),h=require("../utils/types_utils");class u extends r.Layer{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(t,s){t=(0,h.getExactlyOneTensor)(t);let a=(0,e.relu)(t);return null!=this.maxValue&&(a=(0,e.clipByValue)(a,0,this.maxValue)),a}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}exports.ReLU=u,u.className="ReLU",e.serialization.registerClass(u);class o extends r.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(t,s){const a=(0,h.getExactlyOneTensor)(t);return(0,e.leakyRelu)(a,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}exports.LeakyReLU=o,o.className="LeakyReLU",e.serialization.registerClass(o);class p extends r.Layer{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=(0,l.getInitializer)(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=(0,n.getRegularizer)(e.alphaRegularizer),this.alphaConstraint=(0,a.getConstraint)(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new i.ValueError("Expected sharedAxes to be a number or an array of numbers, "+`but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=(0,h.getExactlyOneShape)(e)).slice(1);if(null!=this.sharedAxes)for(const a of this.sharedAxes)t[a-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(null!=this.sharedAxes)for(let a=1;a<e.length;++a)s[a]=e[a];this.inputSpec=[new r.InputSpec({ndim:e.length,axes:s})],this.built=!0}call(t,s){return t=(0,h.getExactlyOneTensor)(t),(0,e.prelu)(t,this.alpha.read())}getConfig(){const e={alphaInitializer:(0,l.serializeInitializer)(this.alphaInitializer),alphaRegularizer:(0,n.serializeRegularizer)(this.alphaRegularizer),alphaConstraint:(0,a.serializeConstraint)(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}exports.PReLU=p,p.className="PReLU",e.serialization.registerClass(p);class c extends r.Layer{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new i.NotImplementedError(`Non-default alpha value (${e.alpha}) is not supported by the `+"ELU layer yet.");this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(t,s){const a=(0,h.getExactlyOneTensor)(t);return(0,e.elu)(a)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}exports.ELU=c,c.className="ELU",e.serialization.registerClass(c);class g extends r.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const a=(0,h.getExactlyOneTensor)(e);return a.mul((0,s.cast)(a.greater(this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}exports.ThresholdedReLU=g,g.className="ThresholdedReLU",e.serialization.registerClass(g);class x extends r.Layer{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new t.Softmax).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){const s=(0,h.getExactlyOneTensor)(e);return this.softmax(s,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}exports.Softmax=x,x.className="Softmax",e.serialization.registerClass(x);
},{"@tensorflow/tfjs-core":"tKjQ","../activations":"T3Eo","../backend/tfjs_backend":"xmUi","../constraints":"FL2F","../engine/topology":"c19E","../errors":"g8PH","../initializers":"NnFu","../regularizers":"utpK","../utils/types_utils":"Lonb"}],"pL4s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeArray=n,exports.convOutputLength=u,exports.deconvLength=i;var e=require("../errors"),r=require("./generic_utils"),t=require("./math_utils");function n(n,u,i){if("number"==typeof n)return(0,r.pyListRepeat)(n,u);if(n.length!==u)throw new e.ValueError(`The ${i} argument must be an integer or tuple of ${u} integers.`+` Received: ${n.length} elements.`);for(let r=0;r<u;++r){const o=n[r];if(!(0,t.isInteger)(o))throw new e.ValueError(`The ${i} argument must be an integer or tuple of ${u}`+` integers. Received: ${JSON.stringify(n)} including a`+` non-integer number ${o}`)}return n}function u(e,r,t,n,u=1){if(null==e)return e;let i;return i="same"===t?e:e-(r+(r-1)*(u-1))+1,Math.floor((i+n-1)/n)}function i(r,n,u,i){if(null==r)return null;if("valid"===i)r=r*n+(0,t.max)([u-n,0]);else{if("same"!==i)throw new e.ValueError(`Unsupport padding mode: ${i}.`);r*=n}return r}
},{"../errors":"g8PH","./generic_utils":"nEuI","./math_utils":"ujnL"}],"zHua":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preprocessConv2DInput=f,exports.preprocessConv3DInput=m,exports.conv1dWithBias=z,exports.conv1d=b,exports.conv2d=v,exports.conv2dWithBiasActivation=k,exports.conv3d=w,exports.conv3dWithBias=C,exports.UpSampling2D=exports.Cropping2D=exports.Conv1D=exports.SeparableConv2D=exports.SeparableConv=exports.Conv2DTranspose=exports.Conv3D=exports.Conv2D=exports.Conv=exports.BaseConv=void 0;var e=g(require("@tensorflow/tfjs-core")),t=require("../activations"),i=require("../backend/common"),r=g(require("../backend/tfjs_backend")),n=require("../common"),s=require("../constraints"),a=require("../engine/topology"),o=require("../errors"),l=require("../initializers"),h=require("../regularizers"),p=require("../utils/conv_utils"),d=g(require("../utils/generic_utils")),u=require("../utils/types_utils");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=e[n]}return i.default=e,t&&t.set(e,i),i}function f(t,i){return(0,e.tidy)(()=>((0,n.checkDataFormat)(i),"channelsFirst"===i?e.transpose(t,[0,2,3,1]):t))}function m(t,i){return(0,e.tidy)(()=>((0,n.checkDataFormat)(i),"channelsFirst"===i?e.transpose(t,[0,2,3,4,1]):t))}function z(t,s,a,l=1,h="valid",p,d=1){return(0,e.tidy)(()=>{if(null==p&&(p=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(p),3!==t.shape.length)throw new o.ValueError("The input of a conv1dWithBias operation should be 3, but is "+`${t.shape.length} instead.`);if(3!==s.shape.length)throw new o.ValueError("The kernel for a conv1dWithBias operation should be 3, but is "+`${s.shape.length} instead`);if(null!=a&&1!==a.shape.length)throw new o.ValueError("The bias for a conv1dWithBias operation should be 1, but is "+`${s.shape.length} instead`);if("channelsFirst"===p&&(t=e.transpose(t,[0,2,1])),"causal"===h)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let u=e.conv1d(t,s,l,"same"===h?"same":"valid","NWC",d);return null!=a&&(u=r.biasAdd(u,a)),u})}function b(t,i,r=1,s="valid",a,o=1){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),z(t,i,null,r,s,a,o)))}function v(t,i,r=[1,1],s="valid",a,o){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),k(t,i,null,r,s,a,o)))}function k(t,r,s,a=[1,1],l="valid",h,p,d=null){return(0,e.tidy)(()=>{if(null==h&&(h=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(h),3!==t.rank&&4!==t.rank)throw new o.ValueError("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+`but received ${t.rank}.`);if(3!==r.rank&&4!==r.rank)throw new o.ValueError("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+`but received ${t.rank}.`);let u=f(t,h);if("causal"===l)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=e.fused.conv2d({x:u,filter:r,strides:a,pad:"same"===l?"same":"valid",dilations:p,dataFormat:"NHWC",bias:s,activation:d}),"channelsFirst"===h&&(u=e.transpose(u,[0,3,1,2])),u})}function w(t,i,r=[1,1,1],s="valid",a,o){return(0,e.tidy)(()=>((0,n.checkDataFormat)(a),C(t,i,null,r,s,a,o)))}function C(t,s,a,l=[1,1,1],h="valid",p,d){return(0,e.tidy)(()=>{if(null==p&&(p=(0,i.imageDataFormat)()),(0,n.checkDataFormat)(p),4!==t.rank&&5!==t.rank)throw new o.ValueError("conv3dWithBias expects input to be of rank 4 or 5, but received "+`${t.rank}.`);if(4!==s.rank&&5!==s.rank)throw new o.ValueError("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+`${t.rank}.`);let u=m(t,p);if("causal"===h)throw new o.NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return u=e.conv3d(u,s,l,"same"===h?"same":"valid","NDHWC",d),null!=a&&(u=r.biasAdd(u,a)),"channelsFirst"===p&&(u=e.transpose(u,[0,4,1,2,3])),u})}class y extends a.Layer{constructor(e,i){if(super(i),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",y.verifyArgs(i),this.rank=e,d.assertPositiveInteger(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new o.NotImplementedError(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is `+"not implemented yet.");if(this.kernelSize=(0,p.normalizeArray)(i.kernelSize,e,"kernelSize"),this.strides=(0,p.normalizeArray)(null==i.strides?1:i.strides,e,"strides"),this.padding=null==i.padding?"valid":i.padding,(0,n.checkPaddingMode)(this.padding),this.dataFormat=null==i.dataFormat?"channelsLast":i.dataFormat,(0,n.checkDataFormat)(this.dataFormat),this.activation=(0,t.getActivation)(i.activation),this.useBias=null==i.useBias||i.useBias,this.biasInitializer=(0,l.getInitializer)(i.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=(0,s.getConstraint)(i.biasConstraint),this.biasRegularizer=(0,h.getRegularizer)(i.biasRegularizer),this.activityRegularizer=(0,h.getRegularizer)(i.activityRegularizer),this.dilationRate=(0,p.normalizeArray)(null==i.dilationRate?1:i.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or an array of a single number for 1D convolution, but received "+`${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or array of two numbers for 2D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new o.ValueError("dilationRate must be a number or array of three numbers for 3D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(d.assert("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!d.checkArrayTypeAndLength(e.kernelSize,"number",1,3))throw new o.ValueError("BaseConv expects config.kernelSize to be number or number[] with "+`length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:(0,t.serializeActivation)(this.activation),useBias:this.useBias,biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),biasRegularizer:(0,h.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,h.serializeRegularizer)(this.activityRegularizer),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint)},i=super.getConfig();return Object.assign(e,i),e}}exports.BaseConv=y;class I extends y{constructor(e,t){super(e,t),this.kernel=null,I.verifyArgs(t),this.filters=t.filters,d.assertPositiveInteger(this.filters,"filters"),this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.kernelRegularizer=(0,h.getRegularizer)(t.kernelRegularizer)}build(e){e=(0,u.getExactlyOneShape)(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new o.ValueError("The channel dimension of the input should be defined. "+`Found ${e[t]}`);const i=e[t],r=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:i}}],this.built=!0}call(t,i){return(0,e.tidy)(()=>{let e;t=(0,u.getExactlyOneTensor)(t);const i=null==this.bias?null:this.bias.read(),r=d.mapActivationToFusedKernel(this.activation.getClassName());if(null!=r&&2===this.rank)e=k(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=z(t,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=k(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new o.NotImplementedError("convolutions greater than 3D are not implemented yet.");e=C(t,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(e){e=(0,u.getExactlyOneShape)(e);const t=[],i="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let n=0;n<i.length;++n){const e=(0,p.convOutputLength)(i[n],this.kernelSize[n],this.padding,this.strides[n],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[n]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t)).push(this.filters):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),kernelRegularizer:(0,h.serializeRegularizer)(this.kernelRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new o.ValueError("Convolution layer expected config.filters to be a 'number' > 0 "+`but got ${JSON.stringify(e.filters)}`)}}exports.Conv=I;class S extends I{constructor(e){super(2,e),S.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!d.checkArrayTypeAndLength(e.kernelSize,"number",1,2))throw new o.ValueError("Conv2D expects config.kernelSize to be number or number[] with "+`length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv2D=S,S.className="Conv2D",e.serialization.registerClass(S);class R extends I{constructor(e){super(3,e),R.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new o.ValueError("Conv3D expects config.kernelSize to be number or"+` [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv3D=R,R.className="Conv3D",e.serialization.registerClass(R);class F extends S{constructor(e){if(super(e),this.inputSpec=[new a.InputSpec({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new o.ValueError("Conv2DTranspose currently supports only padding modes 'same' "+`and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=(0,u.getExactlyOneShape)(e)).length)throw new o.ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new o.ValueError("The channel dimension of the inputs should be defined. Found `None`.");const i=e[t],r=this.kernelSize.concat([this.filters,i]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new a.InputSpec({ndim:4,axes:{[t]:i}})],this.built=!0}call(t,i){return e.tidy(()=>{let i=(0,u.getExactlyOneTensor)(t);if(4!==i.shape.length)throw new o.ValueError("Conv2DTranspose.call() expects input tensor to be rank-4, but "+`received a tensor of rank-${i.shape.length}`);const n=i.shape,s=n[0];let a,l;"channelsFirst"===this.dataFormat?(a=2,l=3):(a=1,l=2);const h=n[a],d=n[l],c=this.kernelSize[0],g=this.kernelSize[1],f=this.strides[0],m=this.strides[1],z=[s,(0,p.deconvLength)(h,f,c,this.padding),(0,p.deconvLength)(d,m,g,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(i=e.transpose(i,[0,2,3,1]));let b=e.conv2dTranspose(i,this.kernel.read(),z,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(b=e.transpose(b,[0,3,1,2])),null!=this.bias&&(b=r.biasAdd(b,this.bias.read(),this.dataFormat)),null!=this.activation&&(b=this.activation.apply(b)),b})}computeOutputShape(e){const t=(e=(0,u.getExactlyOneShape)(e)).slice();let i,r,n;"channelsFirst"===this.dataFormat?(i=1,r=2,n=3):(i=3,r=1,n=2);const s=this.kernelSize[0],a=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return t[i]=this.filters,t[r]=(0,p.deconvLength)(t[r],o,s,this.padding),t[n]=(0,p.deconvLength)(t[n],l,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}exports.Conv2DTranspose=F,F.className="Conv2DTranspose",e.serialization.registerClass(F);class E extends I{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new o.ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new o.ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new o.ValueError(`SeparableConv${this.rank}D supports only padding modes: `+`'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=(0,l.getInitializer)(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=(0,h.getRegularizer)(t.depthwiseRegularizer),this.depthwiseConstraint=(0,s.getConstraint)(t.depthwiseConstraint),this.pointwiseInitializer=(0,l.getInitializer)(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=(0,h.getRegularizer)(t.pointwiseRegularizer),this.pointwiseConstraint=(0,s.getConstraint)(t.pointwiseConstraint)}build(e){if((e=(0,u.getExactlyOneShape)(e)).length<this.rank+2)throw new o.ValueError(`Inputs to SeparableConv${this.rank}D should have rank `+`${this.rank+2}, but received input shape: `+`${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new o.ValueError("The channel dimension of the inputs should be defined, "+`but found ${JSON.stringify(e[t])}`);const i=e[t],r=this.kernelSize.concat([i,this.depthMultiplier]),n=[];for(let s=0;s<this.rank;++s)n.push(1);n.push(i*this.depthMultiplier,this.filters);this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",n,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new a.InputSpec({ndim:this.rank+2,axes:{[t]:i}})],this.built=!0}call(t,i){return(0,e.tidy)(()=>{let i;if(t=(0,u.getExactlyOneTensor)(t),1===this.rank)throw new o.NotImplementedError("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=e.transpose(t,[0,2,3,1])),i=e.separableConv2d(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(i=r.biasAdd(i,this.bias.read(),this.dataFormat)),null!=this.activation&&(i=this.activation.apply(i)),"channelsFirst"===this.dataFormat&&(i=e.transpose(i,[0,3,1,2])),i})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=(0,l.serializeInitializer)(this.depthwiseInitializer),e.pointwiseInitializer=(0,l.serializeInitializer)(this.pointwiseInitializer),e.depthwiseRegularizer=(0,h.serializeRegularizer)(this.depthwiseRegularizer),e.pointwiseRegularizer=(0,h.serializeRegularizer)(this.pointwiseRegularizer),e.depthwiseConstraint=(0,s.serializeConstraint)(this.depthwiseConstraint),e.pointwiseConstraint=(0,s.serializeConstraint)(this.pointwiseConstraint),e}}exports.SeparableConv=E,E.className="SeparableConv";class x extends E{constructor(e){super(2,e)}}exports.SeparableConv2D=x,x.className="SeparableConv2D",e.serialization.registerClass(x);class A extends I{constructor(e){super(1,e),A.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!d.checkArrayTypeAndLength(e.kernelSize,"number",1,1))throw new o.ValueError("Conv1D expects config.kernelSize to be number or number[] with "+`length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}exports.Conv1D=A,A.className="Conv1D",e.serialization.registerClass(A);class D extends a.Layer{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(t,i){return(0,e.tidy)(()=>{if(t=(0,u.getExactlyOneTensor)(t),"channelsLast"===this.dataFormat){const e=r.sliceAlongAxis(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return r.sliceAlongAxis(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=r.sliceAlongAxis(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return r.sliceAlongAxis(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Cropping2D=D,D.className="Cropping2D",e.serialization.registerClass(D);class N extends a.Layer{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],i=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,i]}{const t=null==e[1]?null:this.size[0]*e[1],i=null==e[2]?null:this.size[1]*e[2];return[e[0],t,i,e[3]]}}call(t,i){return e.tidy(()=>{let i=(0,u.getExactlyOneTensor)(t);const r=i.shape;if("channelsFirst"===this.dataFormat){i=e.transpose(i,[0,2,3,1]);const t=this.size[0]*r[2],n=this.size[1]*r[3],s=i.resizeNearestNeighbor([t,n]);return e.transpose(s,[0,3,1,2])}{const e=this.size[0]*r[1],t=this.size[1]*r[2];return i.resizeNearestNeighbor([e,t])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.UpSampling2D=N,N.className="UpSampling2D",e.serialization.registerClass(N);
},{"@tensorflow/tfjs-core":"tKjQ","../activations":"T3Eo","../backend/common":"BnDD","../backend/tfjs_backend":"xmUi","../common":"oZnC","../constraints":"FL2F","../engine/topology":"c19E","../errors":"g8PH","../initializers":"NnFu","../regularizers":"utpK","../utils/conv_utils":"pL4s","../utils/generic_utils":"nEuI","../utils/types_utils":"Lonb"}],"jB2z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=c,exports.DepthwiseConv2D=void 0;var e=d(require("@tensorflow/tfjs-core")),t=require("../backend/common"),i=d(require("../backend/tfjs_backend")),r=require("../common"),s=require("../constraints"),n=require("../errors"),a=require("../initializers"),l=require("../regularizers"),h=require("../utils/conv_utils"),o=require("../utils/types_utils"),u=require("./convolutional");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=r?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(i,s,n):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}function c(i,s,a=[1,1],l="valid",h,o){return(0,e.tidy)(()=>{null==h&&(h=(0,t.imageDataFormat)()),(0,r.checkDataFormat)(h);let p=(0,u.preprocessConv2DInput)(i,h);if(4!==i.rank)throw new n.ValueError("Input for depthwiseConv2d is required to be 4-D, but is instead "+`${i.rank}-D`);if(4!==s.rank)throw new n.ValueError("depthwiseKernel is required to be 4-D, but is instead "+`${s.rank}-D`);return p=e.depthwiseConv2d(p,s,a,"same"===l?"same":"valid","NHWC",o),"channelsFirst"===h&&(p=e.transpose(p,[0,3,1,2])),p})}class w extends u.BaseConv{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=(0,a.getInitializer)(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=(0,s.getConstraint)(e.depthwiseConstraint),this.depthwiseRegularizer=(0,l.getRegularizer)(e.depthwiseRegularizer)}build(e){if((e=(0,o.getExactlyOneShape)(e)).length<4)throw new n.ValueError("Inputs to DepthwiseConv2D should have rank 4. "+`Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new n.ValueError("The channel dimension of the inputs to DepthwiseConv2D should "+`be defined, but is not (${e[t]}).`);const i=e[t],r=[this.kernelSize[0],this.kernelSize[1],i,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[i*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,r){return(0,e.tidy)(()=>{let e=c(t=(0,o.getExactlyOneTensor)(t),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(e=i.biasAdd(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(e){e=(0,o.getExactlyOneShape)(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],i="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=(0,h.convOutputLength)(t,this.kernelSize[0],this.padding,this.strides[0]),n=(0,h.convOutputLength)(i,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,s,n]:[e[0],s,n,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=(0,a.serializeInitializer)(this.depthwiseInitializer),e.depthwiseRegularizer=(0,l.serializeRegularizer)(this.depthwiseRegularizer),e.depthwiseConstraint=(0,s.serializeConstraint)(this.depthwiseRegularizer),e}}exports.DepthwiseConv2D=w,w.className="DepthwiseConv2D",e.serialization.registerClass(w);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/common":"BnDD","../backend/tfjs_backend":"xmUi","../common":"oZnC","../constraints":"FL2F","../errors":"g8PH","../initializers":"NnFu","../regularizers":"utpK","../utils/conv_utils":"pL4s","../utils/types_utils":"Lonb","./convolutional":"zHua"}],"bLYN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.standardizeArgs=I,exports.rnn=R,exports.generateDropoutMask=E,exports.StackedRNNCells=exports.LSTM=exports.LSTMCell=exports.GRU=exports.GRUCell=exports.SimpleRNN=exports.SimpleRNNCell=exports.RNNCell=exports.RNN=void 0;var t=d(require("@tensorflow/tfjs-core")),e=require("../activations"),i=d(require("../backend/tfjs_backend")),r=require("../common"),s=require("../constraints"),n=require("../engine/topology"),a=require("../errors"),l=require("../initializers"),u=require("../regularizers"),o=require("../utils/generic_utils"),h=d(require("../utils/math_utils")),c=require("../utils/types_utils"),p=require("../variables"),g=require("./serialization");function z(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return z=function(){return t},t}function d(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=z();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var n=r?Object.getOwnPropertyDescriptor(t,s):null;n&&(n.get||n.set)?Object.defineProperty(i,s,n):i[s]=t[s]}return i.default=t,e&&e.set(t,i),i}function I(t,e,i,r){if(Array.isArray(t)){if(null!=e||null!=i)throw new a.ValueError("When inputs is an array, neither initialState or constants should be provided");null!=r&&(i=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=s(e),constants:i=s(i)}}function R(e,i,r,s=!1,n,l,u=!1,o=!1){return t.tidy(()=>{const c=i.shape.length;if(c<3)throw new a.ValueError(`Input should be at least 3D, but is ${c}D.`);const p=[1,0].concat(h.range(2,c));if(i=t.transpose(i,p),null!=l)throw new a.NotImplementedError("The rnn() functoin of the deeplearn.js backend does not support constants yet.");u&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=n&&((n=n.asType("bool").asType("float32")).rank===c-1&&(n=t.expandDims(n,-1)),n=t.transpose(n,p)),s&&(i=t.reverse(i,0),null!=n&&(n=t.reverse(n,0)));const g=[];let z,d=r;const I=i.shape[0],R=t.unstack(i);let k,m;null!=n&&(k=t.unstack(n));for(let i=0;i<I;++i){const r=R[i],s=t.tidy(()=>e(r,d));if(null==n)z=s[0],d=s[1];else{const e=t.tidy(()=>{const e=k[i],r=t.onesLike(e).sub(e);return{output:s[0].mul(e).add(d[0].mul(r)),newStates:d.map((t,i)=>s[1][i].mul(e).add(t.mul(r)))}});z=e.output,d=e.newStates}o&&g.push(z)}if(o){const e=1;m=t.stack(g,e)}return[z,m,d]})}class k extends n.Layer{constructor(t){let e;if(super(t),null==t.cell)throw new a.ValueError("cell property is missing for the constructor of RNN.");if(null==(e=Array.isArray(t.cell)?new N({cells:t.cell}):t.cell).stateSize)throw new a.ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new n.InputSpec({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return h.range(0,t).map(t=>null)}return this.states_}setStates(t){this.states_=t}computeOutputShape(t){(0,c.isArrayOfShapes)(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const i=e[0];let r;if(r=this.returnSequences?[t[0],t[1],i]:[t[0],i],this.returnState){const i=[];for(const r of e)i.push([t[0],r]);return[r].concat(i)}return r}computeMask(e,i){return t.tidy(()=>{Array.isArray(i)&&(i=i[0]);const t=this.returnSequences?i:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let i=0;i<t;++i)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(e){if(null!=this.numConstants)throw new a.NotImplementedError("Constants support is not implemented in RNN yet.");(0,c.isArrayOfShapes)(e)&&(e=e[0]),e=e;const i=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new n.InputSpec({shape:[i,null,...r]});const s=[e[0]].concat(e.slice(2));let l;if(this.cell.build(s),l=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!t.util.arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),l))throw new a.ValueError("An initialState was passed that is not compatible with "+`cell.stateSize. Received stateSpec=${this.stateSpec}; `+`However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=l.map(t=>new n.InputSpec({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(e,i=!1){(0,t.tidy)(()=>{if(!this.stateful)throw new a.AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(null==r)throw new a.ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>t.zeros([r,e])):this.states_=[t.zeros([r,this.cell.stateSize])];else if(null==e)t.dispose(this.states_),null!=this.keptStates&&(t.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>t.zeros([r,e])):this.states_[0]=t.zeros([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new a.ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${e.length} state value(s). Input `+`received: ${e}`);!0===i?this.keptStates.push(this.states_.slice()):t.dispose(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],n=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,l=[r,n];if(!t.util.arraysEqual(s.shape,l))throw new a.ValueError(`State ${i} is incompatible with layer ${this.name}: `+`expected shape=${l}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(e=>t.keep(e.clone()))})}apply(t,e){let i=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const s=I(t,i,r,this.numConstants);t=s.inputs,i=s.initialState,r=s.constants;let a=[],l=[];if(null!=i){e.initialState=i,a=a.concat(i),this.stateSpec=[];for(const t of i)this.stateSpec.push(new n.InputSpec({shape:t.shape}));l=l.concat(this.stateSpec)}if(null!=r&&(e.constants=r,a=a.concat(r),this.numConstants=r.length),a[0]instanceof n.SymbolicTensor){const i=[t].concat(a),r=this.inputSpec.concat(l),s=this.inputSpec;this.inputSpec=r;const n=super.apply(i,e);return this.inputSpec=s,n}return super.apply(t,e)}call(e,i){return(0,t.tidy)(()=>{const t=null==i?null:i.mask,r=null==i?null:i.training;let s=null==i?null:i.initialState;e=(0,c.getExactlyOneTensor)(e),null==s&&(s=this.stateful?this.states_:this.getInitialState(e));const n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==n)throw new a.ValueError(`RNN Layer has ${n} state(s) but was passed `+`${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const l={training:r},u=R((t,e)=>{const i=this.cell.call([t].concat(e),l);return[i[0],i.slice(1)]},e,s,this.goBackwards,t,null,this.unroll,this.returnSequences),o=u[0],h=u[1],p=u[2];this.stateful&&this.resetStates(p,r);const g=this.returnSequences?h:o;return this.returnState?[g].concat(p):g})}getInitialState(e){return(0,t.tidy)(()=>{let r=t.zeros(e.shape);return r=t.sum(r,[1,2]),r=i.expandDims(r),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?i.tile(r,[1,t]):r):this.cell.stateSize>1?[i.tile(r,[1,this.cell.stateSize])]:[r]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);const i=this.cell.getConfig();return this.getClassName()===k.className&&(e.cell={className:this.cell.getClassName(),config:i}),Object.assign({},i,t,e)}static fromConfig(t,e,i={}){const r=e.cell,s=(0,g.deserialize)(r,i);return new t(Object.assign(e,{cell:s}))}}exports.RNN=k,k.className="RNN",t.serialization.registerClass(k);class m extends n.Layer{}exports.RNNCell=m;class f extends m{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=(0,c.getExactlyOneShape)(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,t.tidy)(()=>{if(2!==(e=e).length)throw new a.ValueError(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let s=e[1];e=e[0];const n=null!=r.training&&r.training;let l;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:n})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(s),rate:this.recurrentDropout,training:n}));const u=this.dropoutMask,o=this.recurrentDropoutMask;l=null!=u?i.dot(t.mul(e,u),this.kernel.read()):i.dot(e,this.kernel.read()),null!=this.bias&&(l=i.biasAdd(l,this.bias.read())),null!=o&&(s=t.mul(s,o));let h=t.add(l,i.dot(s,this.recurrentKernel.read()));return null!=this.activation&&(h=this.activation.apply(h)),[h,h]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,i)}}exports.SimpleRNNCell=f,f.className="SimpleRNNCell",t.serialization.registerClass(f);class A extends k{constructor(t){t.cell=new f(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return new t(e)}}exports.SimpleRNN=A,A.className="SimpleRNN",t.serialization.registerClass(A);class S extends m{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new a.ValueError("GRUCell does not support reset_after parameter set to true.");this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=(0,e.getActivation)(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){const e=(t=(0,c.getExactlyOneShape)(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,r){return(0,t.tidy)(()=>{if(2!==(e=e).length)throw new a.ValueError("GRUCell expects 2 input Tensors (inputs, h, c), got "+`${e.length}.`);const s=null!=r.training&&r.training;let n=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:s,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(n),rate:this.recurrentDropout,training:s,count:3}));const l=this.dropoutMask,u=this.recurrentDropoutMask;let o,h,c;0<this.dropout&&this.dropout<1&&(e=t.mul(e,l[0]));let p=i.dot(e,this.kernel.read());this.useBias&&(p=i.biasAdd(p,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(n=t.mul(n,u[0]));const g=this.recurrentKernel.read(),[z,d]=t.split(g,[2*this.units,this.units],g.rank-1),I=i.dot(n,z),[R,k,m]=t.split(p,3,p.rank-1),[f,A]=t.split(I,2,I.rank-1);o=this.recurrentActivation.apply(t.add(R,f)),h=this.recurrentActivation.apply(t.add(k,A));const S=i.dot(t.mul(h,n),d);c=this.activation.apply(t.add(m,S));const C=t.add(t.mul(o,n),t.mul(t.add(1,t.neg(o)),c));return[C,C]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),recurrentActivation:(0,e.serializeActivation)(this.recurrentActivation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,i)}}exports.GRUCell=S,S.className="GRUCell",t.serialization.registerClass(S);class C extends k{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new S(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}exports.GRU=C,C.className="GRU",t.serialization.registerClass(C);class b extends m{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,(0,o.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=(0,e.getActivation)(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=(0,l.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=(0,l.getInitializer)(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=(0,l.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=(0,u.getRegularizer)(t.kernelRegularizer),this.recurrentRegularizer=(0,u.getRegularizer)(t.recurrentRegularizer),this.biasRegularizer=(0,u.getRegularizer)(t.biasRegularizer),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.recurrentConstraint=(0,s.getConstraint)(t.recurrentConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.dropout=h.min([1,h.max([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=h.min([1,h.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;const r=(t=(0,c.getExactlyOneShape)(t))[t.length-1];let s;if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,r=this.units;s=new((e=class extends l.Initializer{apply(e,s){const n=t.apply([r]),a=(new l.Ones).apply([r]),u=t.apply([2*r]);return i.concatAlongFirstAxis(i.concatAlongFirstAxis(n,a),u)}}).className="CustomInit",e)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,r){return(0,t.tidy)(()=>{const s=null!=r.training&&r.training;if(3!==(e=e).length)throw new a.ValueError("LSTMCell expects 3 input Tensors (inputs, h, c), got "+`${e.length}.`);let n=e[1];const l=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=E({ones:()=>t.onesLike(e),rate:this.dropout,training:s,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=E({ones:()=>t.onesLike(n),rate:this.recurrentDropout,training:s,count:4}));const u=this.dropoutMask,o=this.recurrentDropoutMask;let h,c,p,g;0<this.dropout&&this.dropout<1&&(e=t.mul(e,u[0]));let z=i.dot(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(n=t.mul(n,o[0])),z=t.add(z,i.dot(n,this.recurrentKernel.read())),this.useBias&&(z=i.biasAdd(z,this.bias.read()));const[d,I,R,k]=t.split(z,4,z.rank-1);h=this.recurrentActivation.apply(d),c=this.recurrentActivation.apply(I),p=t.add(t.mul(c,l),t.mul(h,this.activation.apply(R))),g=this.recurrentActivation.apply(k);const m=t.mul(g,this.activation.apply(p));return[m,m,p]})}getConfig(){const t=super.getConfig(),i={units:this.units,activation:(0,e.serializeActivation)(this.activation),recurrentActivation:(0,e.serializeActivation)(this.recurrentActivation),useBias:this.useBias,kernelInitializer:(0,l.serializeInitializer)(this.kernelInitializer),recurrentInitializer:(0,l.serializeInitializer)(this.recurrentInitializer),biasInitializer:(0,l.serializeInitializer)(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:(0,u.serializeRegularizer)(this.kernelRegularizer),recurrentRegularizer:(0,u.serializeRegularizer)(this.recurrentRegularizer),biasRegularizer:(0,u.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),recurrentConstraint:(0,s.serializeConstraint)(this.recurrentConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,i)}}exports.LSTMCell=b,b.className="LSTMCell",t.serialization.registerClass(b);class y extends k{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new b(t),super(t)}call(e,i){return(0,t.tidy)(()=>{null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=null==i?null:i.mask,s=null==i?null:i.training,n=null==i?null:i.initialState;return super.call(e,{mask:r,training:s,initialState:n})})}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}exports.LSTM=y,y.className="LSTM",t.serialization.registerClass(y);class N extends m{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(e,i){return(0,t.tidy)(()=>{let t=(e=e).slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(t.splice(0,e.stateSize.length)):r.push(t.splice(0,1));r.reverse();const s=[];let n;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];t=r[a],n=0===a?[e[0]].concat(t):[n[0]].concat(t),n=l.call(n,i),s.push(n.slice(1))}t=[];for(const e of s.slice().reverse())t.push(...e);return[n[0]].concat(t)})}build(t){let e;(0,c.isArrayOfShapes)(t)&&(t=t[0]),t=t,this.cells.forEach((i,s)=>{(0,r.nameScope)(`RNNCell_${s}`,()=>{i.build(t),e=Array.isArray(i.stateSize)?i.stateSize[0]:i.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=super.getConfig(),e={cells:this.cells.map(t=>({className:t.getClassName(),config:t.getConfig()}))};return Object.assign({},t,e)}static fromConfig(t,e,i={}){const r=[];for(const s of e.cells)r.push((0,g.deserialize)(s,i));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return(0,p.batchGetValue)(t)}setWeights(t){const e=[];for(const i of this.cells){const r=i.weights.length,s=t.splice(r);for(let t=0;t<i.weights.length;++t)e.push([i.weights[t],s[t]])}(0,p.batchSetValue)(e)}}function E(e){const{ones:r,rate:s,training:n=!1,count:a=1}=e,l=()=>i.dropout(r(),s),u=()=>i.inTrainPhase(l,r,n);return!a||a<=1?t.keep(u().clone()):Array(a).fill(void 0).map(u).map(e=>t.keep(e.clone()))}exports.StackedRNNCells=N,N.className="StackedRNNCells",t.serialization.registerClass(N);
},{"@tensorflow/tfjs-core":"tKjQ","../activations":"T3Eo","../backend/tfjs_backend":"xmUi","../common":"oZnC","../constraints":"FL2F","../engine/topology":"c19E","../errors":"g8PH","../initializers":"NnFu","../regularizers":"utpK","../utils/generic_utils":"nEuI","../utils/math_utils":"ujnL","../utils/types_utils":"Lonb","../variables":"yJYS","./serialization":"T26j"}],"h4CE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConvLSTM2D=exports.ConvLSTM2DCell=void 0;var t=c(require("@tensorflow/tfjs-core")),e=c(require("../backend/tfjs_backend")),s=require("../common"),i=require("../engine/topology"),r=require("../errors"),n=require("../initializers"),a=require("../utils/conv_utils"),l=require("../utils/generic_utils"),o=require("../utils/types_utils"),u=require("./recurrent");function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=i?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(s,r,n):s[r]=t[r]}return s.default=t,e&&e.set(t,s),s}var p=function(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(s[i[r]]=t[i[r]])}return s};class d extends u.RNNCell{}class f extends u.RNN{constructor(t){if(t.unroll)throw new r.NotImplementedError("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new r.NotImplementedError("It is not possible at the moment to stack convolutional cells.");super(t),this.inputSpec=[new i.InputSpec({ndim:5})]}call(e,s){return t.tidy(()=>{if(null!=this.cell.dropoutMask&&(t.dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(t.dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),s&&s.constants)throw new r.ValueError("ConvRNN2D cell does not support constants");const i=null==s?null:s.mask,n=null==s?null:s.training,a=null==s?null:s.initialState;return super.call(e,{mask:i,training:n,initialState:a})})}computeOutputShape(t){let e=this.computeSingleOutputShape(t);return this.returnSequences||(e=[e[0],...e.slice(2)]),this.returnState&&(e=[e,...Array(2).fill([t[0],...e.slice(-3)])]),e}getInitialState(e){return t.tidy(()=>{const{stateSize:s}=this.cell,i=e.shape,r=this.computeSingleOutputShape(i),n=[r[0],...r.slice(2)],a=t.zeros(n);return Array.isArray(s)?Array(s.length).fill(a):[a]})}resetStates(e,s=!1){t.tidy(()=>{if(!this.stateful)throw new r.AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const i=this.inputSpec[0].shape,n=this.computeSingleOutputShape(i),a=[n[0],...n.slice(2)];if(null==i[0])throw new r.ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>t.zeros(a)):this.states_=[t.zeros(a)];else if(null==e)t.dispose(this.states_),null!=this.keptStates&&(t.dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>t.zeros(a)):this.states_[0]=t.zeros(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new r.ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${e.length} state value(s). Input `+`received: ${e}`);s?this.keptStates.push(this.states_.slice()):t.dispose(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],n=a;if(!t.util.arraysEqual(i.shape,n))throw new r.ValueError(`State ${s} is incompatible with layer ${this.name}: `+`expected shape=${n}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(e=>t.keep(e.clone()))})}computeSingleOutputShape(t){const{dataFormat:e,filters:s,kernelSize:i,padding:r,strides:n,dilationRate:l}=this.cell,o="channelsFirst"===e,u=t[o?3:2],h=t[o?4:3],c=(0,a.convOutputLength)(u,i[0],r,n[0],l[0]),p=(0,a.convOutputLength)(h,i[1],r,n[1],l[1]);return[...t.slice(0,2),...o?[s,c,p]:[c,p,s]]}}f.className="ConvRNN2D";class g extends u.LSTMCell{constructor(t){const{filters:e,kernelSize:i,strides:r,padding:n,dataFormat:o,dilationRate:u}=t;super(Object.assign({},t,{units:e})),this.filters=e,(0,l.assertPositiveInteger)(this.filters,"filters"),this.kernelSize=(0,a.normalizeArray)(i,2,"kernelSize"),this.kernelSize.forEach(t=>(0,l.assertPositiveInteger)(t,"kernelSize")),this.strides=(0,a.normalizeArray)(r||1,2,"strides"),this.strides.forEach(t=>(0,l.assertPositiveInteger)(t,"strides")),this.padding=n||"valid",(0,s.checkPaddingMode)(this.padding),this.dataFormat=o||"channelsLast",(0,s.checkDataFormat)(this.dataFormat),this.dilationRate=(0,a.normalizeArray)(u||1,2,"dilationRate"),this.dilationRate.forEach(t=>(0,l.assertPositiveInteger)(t,"dilationRate"))}build(s){var i;s=(0,o.getExactlyOneShape)(s);const a="channelsFirst"===this.dataFormat?1:s.length-1;if(null==s[a])throw new r.ValueError("The channel dimension of the input should be defined. "+`Found ${s[a]}`);const l=s[a],u=this.kernelSize.concat([l,4*this.filters]);this.kernel=this.addWeight("kernel",u,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const h=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",h,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let s;if(this.unitForgetBias){const r=this.biasInitializer,a=this.filters;s=new((i=class extends n.Initializer{apply(s,i){const n=r.apply([a]),l=t.ones([a]),o=r.apply([2*a]);return e.concatenate([n,l,o])}}).className="CustomInit",i)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,s,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,s){return t.tidy(()=>{if(3!==e.length)throw new r.ValueError("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+`${e.length}.`);const i=s.training||!1,n=e[0],a=e[1],l=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=(0,u.generateDropoutMask)({ones:()=>t.onesLike(n),rate:this.dropout,training:i,count:4}));const o=this.dropoutMask,h=(e,s,i)=>s&&s[i]?t.mul(s[i],e):e;let c=h(n,o,0),p=h(n,o,1),d=h(n,o,2),f=h(n,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=(0,u.generateDropoutMask)({ones:()=>t.onesLike(a),rate:this.recurrentDropout,training:i,count:4}));const g=this.recurrentDropoutMask;let y=h(a,g,0),S=h(a,g,1),v=h(a,g,2),m=h(a,g,3);const[k,b,C,z]=t.split(this.kernel.read(),4,3),[w,O,M,N]=this.useBias?t.split(this.bias.read(),4):[null,null,null,null];c=this.inputConv(c,k,w,this.padding),p=this.inputConv(p,b,O,this.padding),d=this.inputConv(d,C,M,this.padding),f=this.inputConv(f,z,N,this.padding);const[D,I,_,A]=t.split(this.recurrentKernel.read(),4,3);y=this.recurrentConv(y,D),S=this.recurrentConv(S,I),v=this.recurrentConv(v,_),m=this.recurrentConv(m,A);const R=this.recurrentActivation.apply(t.add(c,y)),F=this.recurrentActivation.apply(t.add(p,S)),j=t.add(t.mul(F,l),t.mul(R,this.activation.apply(t.add(d,v)))),x=t.mul(this.recurrentActivation.apply(t.add(f,m)),this.activation.apply(j));return[x,x,j]})}getConfig(){const t=super.getConfig(),{units:e}=t,s=p(t,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},s,i)}inputConv(s,i,r,n){const a=t.conv2d(s,i,this.strides,n||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return r?e.biasAdd(a,r,this.dataFormat):a}recurrentConv(e,s){return t.conv2d(e,s,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}exports.ConvLSTM2DCell=g,g.className="ConvLSTM2DCell",t.serialization.registerClass(g);class y extends f{constructor(t){const e=new g(t);super(Object.assign({},t,{cell:e}))}static fromConfig(t,e){return new t(e)}}exports.ConvLSTM2D=y,y.className="ConvLSTM2D",t.serialization.registerClass(y);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/tfjs_backend":"xmUi","../common":"oZnC","../engine/topology":"c19E","../errors":"g8PH","../initializers":"NnFu","../utils/conv_utils":"pL4s","../utils/generic_utils":"nEuI","../utils/types_utils":"Lonb","./recurrent":"bLYN"}],"Trhv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Masking=exports.Permute=exports.Reshape=exports.RepeatVector=exports.Activation=exports.Flatten=exports.Dense=exports.SpatialDropout1D=exports.Dropout=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../activations"),i=p(require("../backend/tfjs_backend")),s=require("../constraints"),r=require("../engine/topology"),n=require("../errors"),a=require("../initializers"),o=require("../regularizers"),l=require("../utils/generic_utils"),u=require("../utils/math_utils"),h=require("../utils/types_utils");function c(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function p(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=s?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}class g extends r.Layer{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,i=[];for(let s=0;s<this.noiseShape.length;++s)i.push(null==this.noiseShape[s]?e[s]:this.noiseShape[s]);return i}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);const t=(0,h.getExactlyOneTensor)(e);if(0<this.rate&&this.rate<1){const e=null!=s.training&&s.training,r=this.getNoiseShape(t);return i.inTrainPhase(()=>i.dropout(t,this.rate,r,this.seed),()=>t,e)}return e})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}exports.Dropout=g,g.className="Dropout",t.serialization.registerClass(g);class d extends g{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}exports.SpatialDropout1D=d,d.className="SpatialDropout1D",t.serialization.registerClass(d);class m extends r.Layer{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,(0,l.assertPositiveInteger)(this.units,"units"),this.activation=(0,e.getActivation)(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=(0,a.getInitializer)(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=(0,a.getInitializer)(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=(0,s.getConstraint)(t.kernelConstraint),this.biasConstraint=(0,s.getConstraint)(t.biasConstraint),this.kernelRegularizer=(0,o.getRegularizer)(t.kernelRegularizer),this.biasRegularizer=(0,o.getRegularizer)(t.biasRegularizer),this.activityRegularizer=(0,o.getRegularizer)(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){const e=(t=(0,h.getExactlyOneShape)(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){const e=(t=(0,h.getExactlyOneShape)(t)).slice();return e[e.length-1]=this.units,e}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);const t=(0,h.getExactlyOneTensor)(e),r=(0,l.mapActivationToFusedKernel)(this.activation.getClassName());let n;return null!=r?n=i.dot(t,this.kernel.read(),r,this.bias?this.bias.read():null):(n=i.dot(t,this.kernel.read()),null!=this.bias&&(n=i.biasAdd(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){const t={units:this.units,activation:(0,e.serializeActivation)(this.activation),useBias:this.useBias,kernelInitializer:(0,a.serializeInitializer)(this.kernelInitializer),biasInitializer:(0,a.serializeInitializer)(this.biasInitializer),kernelRegularizer:(0,o.serializeRegularizer)(this.kernelRegularizer),biasRegularizer:(0,o.serializeRegularizer)(this.biasRegularizer),activityRegularizer:(0,o.serializeRegularizer)(this.activityRegularizer),kernelConstraint:(0,s.serializeConstraint)(this.kernelConstraint),biasConstraint:(0,s.serializeConstraint)(this.biasConstraint)},i=super.getConfig();return Object.assign(t,i),t}}exports.Dense=m,m.className="Dense",t.serialization.registerClass(m);class f extends r.Layer{constructor(t){super(t=t||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=(0,h.getExactlyOneShape)(t);for(const e of t.slice(1))if(null==e)throw new n.ValueError('The shape of the input to "Flatten" is not fully defined '+`(got ${t.slice(1)}). Make sure to pass a complete `+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],(0,u.arrayProd)(t,1)]}call(e,s){return(0,t.tidy)(()=>{this.invokeCallHook(e,s);let t=(0,h.getExactlyOneTensor)(e);if("channelsFirst"===this.dataFormat&&t.rank>1){const e=[0];for(let i=2;i<t.rank;++i)e.push(i);e.push(1),t=t.transpose(e)}return i.batchFlatten(t)})}getConfig(){const t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}exports.Flatten=f,f.className="Flatten",t.serialization.registerClass(f);class k extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.activation=(0,e.getActivation)(t.activation)}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const t=(0,h.getExactlyOneTensor)(e);return this.activation.apply(t)})}getConfig(){const t={activation:(0,e.serializeActivation)(this.activation)},i=super.getConfig();return Object.assign(t,i),t}}exports.Activation=k,k.className="Activation",t.serialization.registerClass(k);class y extends r.Layer{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(e,s){return(0,t.tidy)(()=>(e=(0,h.getExactlyOneTensor)(e),i.repeat(e,this.n)))}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}exports.RepeatVector=y,y.className="RepeatVector",t.serialization.registerClass(y);class z extends r.Layer{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const i="Total size of new array must be unchanged.",s=e.slice();let r=1,a=null;for(let l=0;l<s.length;++l){const t=s[l];if(this.isUnknown(t)){if(null!==a)throw new n.ValueError("Can only specifiy one unknown dimension.");a=l}else r*=t}const o=(0,u.arrayProd)(t);if(null!==a){if(0===r||o%r!=0)throw new n.ValueError(i);s[a]=o/r}else if(o!==r)throw new n.ValueError(i);return s}computeOutputShape(t){let e=!1;for(let i=0;i<t.length;++i)if(this.isUnknown(t[i])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const t=(0,h.getExactlyOneTensor)(e),s=t.shape,r=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return t.reshape(r)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}exports.Reshape=z,z.className="Reshape",t.serialization.registerClass(z);class b extends r.Layer{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+`${e.dims} instead.`);const i=(0,u.range)(1,e.dims.length+1);if(!t.util.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new r.InputSpec({ndim:this.dims.length+1})]}computeOutputShape(t){const e=(t=(0,h.getExactlyOneShape)(t)).slice();return this.dims.forEach((i,s)=>{e[s+1]=t[i]}),e}call(e,i){return(0,t.transpose)((0,h.getExactlyOneTensor)(e),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}exports.Permute=b,b.className="Permute",t.serialization.registerClass(b);class S extends r.Layer{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(e,i){const s=(0,h.getExactlyOneTensor)(e);return(0,t.any)((0,t.notEqual)(s,this.maskValue),-1)}call(e,i){return(0,t.tidy)(()=>{this.invokeCallHook(e,i);const s=(0,h.getExactlyOneTensor)(e),r=(0,t.any)((0,t.notEqual)(s,this.maskValue),-1,!0);return s.mul(r.asType(s.dtype))})}}exports.Masking=S,S.className="Masking",t.serialization.registerClass(S);
},{"@tensorflow/tfjs-core":"tKjQ","../activations":"T3Eo","../backend/tfjs_backend":"xmUi","../constraints":"FL2F","../engine/topology":"c19E","../errors":"g8PH","../initializers":"NnFu","../regularizers":"utpK","../utils/generic_utils":"nEuI","../utils/math_utils":"ujnL","../utils/types_utils":"Lonb"}],"Kpzs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Embedding=void 0;var e=require("@tensorflow/tfjs-core"),t=h(require("../backend/tfjs_backend")),i=require("../constraints"),n=require("../engine/topology"),r=require("../errors"),s=require("../initializers"),u=require("../regularizers"),a=h(require("../utils/generic_utils")),l=require("../utils/types_utils");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=n?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}class p extends n.Layer{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(a.toList(e.inputLength))}this.inputDim=e.inputDim,a.assertPositiveInteger(this.inputDim,"inputDim"),this.outputDim=e.outputDim,a.assertPositiveInteger(this.outputDim,"outputDim"),this.embeddingsInitializer=(0,s.getInitializer)(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=(0,u.getRegularizer)(e.embeddingsRegularizer),this.activityRegularizer=(0,u.getRegularizer)(e.activityRegularizer),this.embeddingsConstraint=(0,i.getConstraint)(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(t,i){return(0,e.tidy)(()=>this.maskZero?(t=(0,l.getExactlyOneTensor)(t),(0,e.notEqual)(t,(0,e.zerosLike)(t))):null)}computeOutputShape(e){if(e=(0,l.getExactlyOneShape)(e),null==this.inputLength)return[...e,this.outputDim];const t=a.toList(this.inputLength);if(t.length!==e.length-1)throw new r.ValueError(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${e}`);{let i=0;for(let n=0;n<t.length;++n){const s=t[n],u=e[n+1];if(null!=s&&null!=u&&s!==u)throw new r.ValueError(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${e}`);null==s&&(t[i]=u),i++}}return[e[0],...t,this.outputDim]}call(i,n){return(0,e.tidy)(()=>{this.invokeCallHook(i,n);let e=(0,l.getExactlyOneTensor)(i);return"int32"!==e.dtype&&(e=t.cast(e,"int32")),t.gather(this.embeddings.read(),e.as1D()).reshape((0,l.getExactlyOneShape)(this.computeOutputShape(e.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:(0,s.serializeInitializer)(this.embeddingsInitializer),embeddingsRegularizer:(0,u.serializeRegularizer)(this.embeddingsRegularizer),activityRegularizer:(0,u.serializeRegularizer)(this.activityRegularizer),embeddingsConstraint:(0,i.serializeConstraint)(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}exports.Embedding=p,p.className="Embedding",e.serialization.registerClass(p);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/tfjs_backend":"xmUi","../constraints":"FL2F","../engine/topology":"c19E","../errors":"g8PH","../initializers":"NnFu","../regularizers":"utpK","../utils/generic_utils":"nEuI","../utils/types_utils":"Lonb"}],"Fqgj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=c,exports.multiply=g,exports.average=m,exports.maximum=x,exports.minimum=w,exports.concatenate=O,exports.Dot=exports.Concatenate=exports.Minimum=exports.Maximum=exports.Average=exports.Multiply=exports.Add=exports.Merge=void 0;var e=u(require("@tensorflow/tfjs-core")),t=u(require("../backend/tfjs_backend")),r=require("../engine/topology"),n=require("../errors"),s=require("../losses"),l=u(require("../utils/generic_utils")),a=u(require("../utils/math_utils")),i=require("../utils/types_utils");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=n?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}class h extends r.Layer{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new n.NotImplementedError}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const r=e.slice(0,e.length-t.length);for(let s=0;s<t.length;++s){const l=e[e.length-t.length+s],a=t[s];if(null==l||null==a||l<0||a<0)r.push(null);else if(1===l)r.push(a);else if(1===a)r.push(l);else{if(l!==a)throw new n.ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(l)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[(0,i.getExactlyOneShape)(e)]),(e=e).length<2)throw new n.ValueError("A merge layer should be called on an Array of at least 2 inputs."+` Got ${e.length} input(s).`);let t=[];for(const n of e)null!=n&&null!==n[0]&&t.push(n[0]);if((t=l.unique(t)).length>1)throw new n.ValueError("Can not merge tensors with different batch sizes. "+`Got tensors with shapes: ${JSON.stringify(e)}.`);let r=null==e[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const t=null==e[n]?null:e[n].slice(1);r=this.computeElementwiseOpOutputShape(r,t)}const s=e.map(e=>e.length);-1===e.indexOf(null)&&1===l.unique(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(r,n){return(0,e.tidy)(()=>{if(r=r,this.reshapeRequired){const n=[],s=r.map(e=>e.rank);if(-1===s.indexOf(null)){const e=a.max(s);for(let s of r){const r=s.rank;for(let n=0;n<e-r;++n)s=t.expandDims(s,1);n.push(s)}return this.mergeFunction(n)}{let t=!1;for(const i of r){const r=i.rank;if(null==r){const r=i.shape,s=r[0],l=r.slice(1).concat([s]);let o=i.reshape([s].concat(a.arrayProd(r.slice(1))));o=(o=e.transpose(o,[1,0])).reshape(l),n.push(o),t=!0}else if(r>1){const s=a.range(1,r).concat([0]);n.push(e.transpose(i,s)),t=!0}else n.push(i)}let s=this.mergeFunction(n);const l=s.rank;if(t)if(null==l){const t=s.shape,r=t[t.length-1],n=[r].concat(t.slice(0,t.length-1));s=e.transpose(s.reshape([-1,r]),[1,0]).reshape(n)}else if(l>1){const t=[l-1].concat(a.range(0,l-1));s=e.transpose(s,t)}return s}}return this.mergeFunction(r)})}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let r=[];for(const n of e)null!=n&&null!==n[0]&&r.push(n[0]);return t=1===(r=l.unique(r)).length?r.concat(t):[null].concat(t)}computeMask(t,r){return e.tidy(()=>{if(null==r)return null;if(!Array.isArray(r))throw new n.ValueError("`mask` should be an Array");if(!Array.isArray(t))throw new n.ValueError("`inputs` should be an Array");if(r.length!==t.length)throw new n.ValueError("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+`(${t.length} vs ${r.length})`);if(r.every(e=>null==e))return null;let s=(r=r.map(t=>null==t?t:e.expandDims(t,0)))[0];for(let t=1;t<r.length-1;++t)s=e.logicalAnd(s,r[t]);return s})}}exports.Merge=h;class p extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.add(r,t[n]);return r})}}function c(e){if(Array.isArray(e)){return new p({}).apply(e)}return new p(e)}exports.Add=p,p.className="Add",e.serialization.registerClass(p);class f extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.mul(r,t[n]);return r})}}function g(e){if(Array.isArray(e)){return new f({}).apply(e)}return new f(e)}exports.Multiply=f,f.className="Multiply",e.serialization.registerClass(f);class y extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0].clone();for(let n=1;n<t.length;++n)r=e.add(r,t[n]);return e.mul(1/t.length,r)})}}function m(e){if(Array.isArray(e)){return new y({}).apply(e)}return new y(e)}exports.Average=y,y.className="Average",e.serialization.registerClass(y);class d extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0];for(let n=1;n<t.length;++n)r=e.maximum(r,t[n]);return r})}}function x(e){if(Array.isArray(e)){return new d({}).apply(e)}return new d(e)}exports.Maximum=d,d.className="Maximum",e.serialization.registerClass(d);class A extends h{constructor(e){super(e)}mergeFunction(t){return(0,e.tidy)(()=>{let r=t[0];for(let n=1;n<t.length;++n)r=e.minimum(r,t[n]);return r})}}function w(e){if(Array.isArray(e)){return new A({}).apply(e)}return new A(e)}exports.Minimum=A,A.className="Minimum",e.serialization.registerClass(A);class b extends h{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new n.ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let r=!0;for(const e of t)if(null!=e){r=!1;break}if(r)return;const s=[];for(let n=0;n<t.length;++n){const r=t[n].slice();r.splice(this.axis,1);let l=!1;for(const t of s)if(e.util.arraysEqual(t,r)){l=!0;break}l||s.push(r)}if(s.length>1)throw new n.ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(r){return(0,e.tidy)(()=>t.concatenate(r,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new n.ValueError("A `Concatenate` layer should be called on a list of inputs.");const t=e,r=t[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const n of t.slice(1)){if(null==r[s]||null==n[s]){r[s]=null;break}r[s]+=n[s]}return r}computeMask(t,r){if(null==r)return null;if(!Array.isArray(r))throw new n.ValueError("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new n.ValueError("`inputs` should be an array for Concatenate");if(r.length!==t.length)throw new n.ValueError(`Mismatch in the length of mask (${r.length}) `+`and the legnth of inputs (${t.length})`);return e.tidy(()=>{let n=!0;if(r.forEach(e=>{null==e||(n=!1)}),n)return null;const s=[];for(let a=0;a<t.length;++a)null==r[a]?s.push(e.onesLike(t[a]).asType("bool")):r[a].rank<t[a].rank?s.push(e.expandDims(r[a],-1)):s.push(r[a]);const l=e.concat(s,this.axis);return e.all(l,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function O(e){if(Array.isArray(e)){return new b({}).apply(e)}return new b(e)}function k(e,t){for(;e<0;)e+=t;return e}function E(t,r,s){if(t.shape.length>3||r.shape.length>3)throw new n.NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(e.util.assert(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+`but got ${t.shape.length}`),e.util.assert(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+`but got ${r.shape.length}`),"number"==typeof s&&(s=[s,s]),"complex64"===t.dtype||"complex64"===r.dtype)throw new n.NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");const l=t.shape.length,a=r.shape.length;null==s&&(s=[l-1,a-2]);const i=s;return e.tidy(()=>{let e,n;if(l>a){e=l-a;const t=[];for(let r=0;r<e;++r)t.push(1);r=r.reshape(r.shape.concat(t))}else if(a>l){e=a-l;const r=[];for(let t=0;t<e;++t)r.push(1);t=t.reshape(t.shape.concat(r))}else e=0;if(2===t.shape.length&&2===r.shape.length)n=i[0]===i[1]?t.mul(r).sum(i[0]):t.transpose([1,0]).mul(r).sum(i[1]);else{const e=i[0]!==t.shape.length-1,s=i[1]===r.shape.length-1;n=t.matMul(r,e,s)}if(e>0){let t;const r=[];for(let n=t=l>a?l+a-3:l-1;n<t+e;++n)r.push(n);n=n.squeeze(r)}return 1===n.shape.length&&(n=n.expandDims(1)),n})}exports.Concatenate=b,b.className="Concatenate",e.serialization.registerClass(b);class D extends h{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){e.util.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const r=t[0],s=t[1];if(r.length>3||s.length>3)throw new n.NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const l=this.interpretAxes(r,s);if(r[l[0]]!==s[l[1]])throw new n.ValueError("Dimension incompatibility: "+`${r[l[0]]} !== ${s[l[1]]}`)}mergeFunction(e){if(2!==e.length)throw new n.ValueError("A `Dot` layer must be called on exactly 2 inputs, "+`but received ${e.length} input(s).`);let t,r=e[0],l=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,r)=>k(t,e[r].shape.length)):[k(this.axes,r.shape.length),k(this.axes,l.shape.length)],this.normalize&&(r=(0,s.l2Normalize)(r,t[0]),l=(0,s.l2Normalize)(l,t[1])),E(r,l,t)}interpretAxes(e,t){let r;return r=Array.isArray(this.axes)?this.axes:[k(this.axes,e.length),k(this.axes,t.length)]}computeOutputShape(t){e.util.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const r=t[0].slice(),s=t[1].slice();if(r.length>3||s.length>3)throw new n.NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const l=this.interpretAxes(r,s);r.splice(l[0],1),s.splice(l[1],1),s.splice(0,1);const a=r.concat(s);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}exports.Dot=D,D.className="Dot",e.serialization.registerClass(D);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/tfjs_backend":"xmUi","../engine/topology":"c19E","../errors":"g8PH","../losses":"bdSS","../utils/generic_utils":"nEuI","../utils/math_utils":"ujnL","../utils/types_utils":"Lonb"}],"LeYd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AlphaDropout=exports.GaussianDropout=exports.GaussianNoise=void 0;var t=require("@tensorflow/tfjs-core"),e=n(require("../backend/tfjs_backend")),r=require("../engine/topology"),s=require("../utils/types_utils");function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=s?Object.getOwnPropertyDescriptor(t,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}class i extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{this.invokeCallHook(r,a);const t=(0,s.getExactlyOneTensor)(r);return e.inTrainPhase(()=>e.randomNormal(t.shape,0,this.stddev).add(t),()=>t,a.training||!1)})}}exports.GaussianNoise=i,i.className="GaussianNoise",t.serialization.registerClass(i);class o extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{this.invokeCallHook(r,a);const t=(0,s.getExactlyOneTensor)(r);if(this.rate>0&&this.rate<1){const r=()=>{const r=Math.sqrt(this.rate/(1-this.rate));return t.mul(e.randomNormal(t.shape,1,r))};return e.inTrainPhase(r,()=>t,a.training||!1)}return t})}}exports.GaussianDropout=o,o.className="GaussianDropout",t.serialization.registerClass(o);class u extends r.Layer{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||(0,s.getExactlyOneTensor)(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(r,a){return(0,t.tidy)(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(r),i=()=>{const a=(0,s.getExactlyOneTensor)(r),i=-1.7580993408473766;let o=(0,t.greaterEqual)((0,t.randomUniform)(n),this.rate);o=e.cast(o,"float32");const u=((1-this.rate)*(1+this.rate*i**2))**-.5,p=-u*i*this.rate;return a.mul(o).add(o.add(-1).mul(i)).mul(u).add(p)};return e.inTrainPhase(i,()=>(0,s.getExactlyOneTensor)(r),a.training||!1)}return r})}}exports.AlphaDropout=u,u.className="AlphaDropout",t.serialization.registerClass(u);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/tfjs_backend":"xmUi","../engine/topology":"c19E","../utils/types_utils":"Lonb"}],"jVQe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNormalization=g,exports.normalizeBatchInTraining=z,exports.LayerNormalization=exports.BatchNormalization=void 0;var i=u(require("@tensorflow/tfjs-core")),e=require("../constraints"),t=require("../engine/topology"),a=require("../errors"),r=require("../initializers"),s=require("../regularizers"),n=u(require("../utils/generic_utils")),l=u(require("../utils/math_utils")),o=require("../utils/types_utils");function h(){if("function"!=typeof WeakMap)return null;var i=new WeakMap;return h=function(){return i},i}function u(i){if(i&&i.__esModule)return i;if(null===i||"object"!=typeof i&&"function"!=typeof i)return{default:i};var e=h();if(e&&e.has(i))return e.get(i);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var s=a?Object.getOwnPropertyDescriptor(i,r):null;s&&(s.get||s.set)?Object.defineProperty(t,r,s):t[r]=i[r]}return t.default=i,e&&e.set(i,t),t}function g(e,t,r,s,n,l=.001){let o;if(2===e.rank)o=i.batchNorm2d(e,t,r,s,n,l);else if(3===e.rank)o=i.batchNorm3d(e,t,r,s,n,l);else{if(4!==e.rank)throw new a.NotImplementedError(`batchNormalization is not implemented for array of rank ${e.rank} `+"yet");o=i.batchNorm4d(e,t,r,s,n,l)}return o}function m(e,t,a,r,s=.001){return(0,i.tidy)(()=>{const n=i.moments(e,r),l=n.mean,o=n.variance;return[g(e,l,o,a,t,s),l,o]})}function c(e,t,a,r,s=.001){return(0,i.tidy)(()=>{const n=i.moments(e,r),o=n.mean,h=n.variance,u=[];for(const i of l.range(0,e.rank))-1!==r.indexOf(i)?u.push(1):u.push(e.shape[i]);const m=o.reshape(u),c=h.reshape(u),z=null==t?null:t.reshape(u),p=null==a?null:a.reshape(u);return[g(e,m,c,p,z,s),o,h]})}function z(e,t,a,r,s=.001){return i.util.arraysEqual(r.slice().sort(),l.range(0,e.rank-1))?m(e,t,a,r,s):c(e,t,a,r,s)}class p extends t.Layer{constructor(i){null==i&&(i={}),super(i),this.supportsMasking=!0,this.axis=null==i.axis?-1:i.axis,this.momentum=null==i.momentum?.99:i.momentum,this.epsilon=null==i.epsilon?.001:i.epsilon,this.center=null==i.center||i.center,this.scale=null==i.scale||i.scale,this.betaInitializer=(0,r.getInitializer)(i.betaInitializer||"zeros"),this.gammaInitializer=(0,r.getInitializer)(i.gammaInitializer||"ones"),this.movingMeanInitializer=(0,r.getInitializer)(i.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=(0,r.getInitializer)(i.movingVarianceInitializer||"ones"),this.betaConstraint=(0,e.getConstraint)(i.betaConstraint),this.gammaConstraint=(0,e.getConstraint)(i.gammaConstraint),this.betaRegularizer=(0,s.getRegularizer)(i.betaRegularizer),this.gammaRegularizer=(0,s.getRegularizer)(i.gammaRegularizer)}build(i){i=(0,o.getExactlyOneShape)(i);const e=this.axis>=0?this.axis:this.axis+i.length,r=i[e];if(null==r)throw new a.ValueError(`Axis ${e} of input tensor should have a defined dimension but `+"the layer received an input with shape "+`${JSON.stringify(i)}.`);this.inputSpec=[new t.InputSpec({ndim:i.length,axes:{[e]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return(0,i.tidy)(()=>{const a=null!=t.training&&t.training,r=(0,o.getExactlyOneTensor)(e),s=r.shape,h=s.length,u=l.range(0,h),m=this.axis>=0?this.axis:this.axis+h;u.splice(m,1);const c=n.pyListRepeat(1,h);c[m]=s[m];const p=u.slice();p.sort();const b=!i.util.arraysEqual(p,l.range(0,h).slice(0,h-1));if(!a)return(()=>{if(b){const i=this.movingMean.read().reshape(c),e=this.movingVariance.read().reshape(c),t=this.center?this.beta.read().reshape(c):null,a=this.scale?this.gamma.read().reshape(c):null;return g(r,i,e,t,a,this.epsilon)}return g(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[f,d,x]=z(r,this.gamma.read(),this.beta.read(),u,this.epsilon),I=(e,t,a)=>{i.tidy(()=>{const i=1-a,r=e.read(),s=r.sub(t).mul(i);e.write(r.sub(s))})};return(()=>{I(this.movingMean,d,this.momentum),I(this.movingVariance,x,this.momentum)})(),f})}getConfig(){const i={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,r.serializeInitializer)(this.betaInitializer),gammaInitializer:(0,r.serializeInitializer)(this.gammaInitializer),movingMeanInitializer:(0,r.serializeInitializer)(this.movingMeanInitializer),movingVarianceInitializer:(0,r.serializeInitializer)(this.movingVarianceInitializer),betaRegularizer:(0,s.serializeRegularizer)(this.betaRegularizer),gammaRegularizer:(0,s.serializeRegularizer)(this.gammaRegularizer),betaConstraint:(0,e.serializeConstraint)(this.betaConstraint),gammaConstraint:(0,e.serializeConstraint)(this.gammaConstraint)},t=super.getConfig();return Object.assign(i,t),i}}exports.BatchNormalization=p,p.className="BatchNormalization",i.serialization.registerClass(p);class b extends t.Layer{constructor(i){if(null==i&&(i={}),super(i),this.axis=null==i.axis?-1:i.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+`but received ${JSON.stringify(this.axis)}`);for(const i of this.axis)if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, "+`but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==i.epsilon?.001:i.epsilon,this.center=null==i.center||i.center,this.scale=null==i.scale||i.scale,this.betaInitializer=(0,r.getInitializer)(i.betaInitializer||"zeros"),this.gammaInitializer=(0,r.getInitializer)(i.gammaInitializer||"ones"),this.betaRegularizer=(0,s.getRegularizer)(i.betaRegularizer),this.gammaRegularizer=(0,s.getRegularizer)(i.gammaRegularizer),this.supportsMasking=!0}build(i){const e=(i=(0,o.getExactlyOneShape)(i)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=e);for(const a of this.axis)if(a<0||a>=e)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==n.unique(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const t=this.axis.map(e=>i[e]);this.scale?this.gamma=this.addWeight("gamma",t,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",t,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0}call(e,t){const a=(0,o.getExactlyOneTensor)(e),r=a.shape,s=r.length;return(0,i.tidy)(()=>{let{mean:e,variance:t}=(0,i.moments)(a,this.axis,!0);const l=n.pyListRepeat(1,s);for(const i of this.axis)l[i]=r[i];const o=i=>null!=i&&i.shape.length!==s&&this.axis!==[s-1]?i.reshape(l):i;let h=o(this.gamma.read()),u=o(this.beta.read());const m=[],c=[];for(let i=0;i<s;++i)-1!==this.axis.indexOf(i)?(m.push(r[i]),c.push(1)):(m.push(1),c.push(r[i]));return e=e.tile(m),t=t.tile(m),h=h.tile(c),u=u.tile(c),g(a,e,t,u,h,this.epsilon)})}getConfig(){const i={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,r.serializeInitializer)(this.betaInitializer),gammaInitializer:(0,r.serializeInitializer)(this.gammaInitializer),betaRegularizer:(0,s.serializeRegularizer)(this.betaRegularizer),gammaRegularizer:(0,s.serializeRegularizer)(this.gammaRegularizer)},e=super.getConfig();return Object.assign(i,e),i}}exports.LayerNormalization=b,b.className="LayerNormalization",i.serialization.registerClass(b);
},{"@tensorflow/tfjs-core":"tKjQ","../constraints":"FL2F","../engine/topology":"c19E","../errors":"g8PH","../initializers":"NnFu","../regularizers":"utpK","../utils/generic_utils":"nEuI","../utils/math_utils":"ujnL","../utils/types_utils":"Lonb"}],"LD3L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.temporalPadding=o,exports.spatial2dPadding=l,exports.ZeroPadding2D=void 0;var e=d(require("@tensorflow/tfjs-core")),t=require("../backend/common"),n=require("../engine/topology"),a=require("../errors"),r=require("../utils/types_utils");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var d=a?Object.getOwnPropertyDescriptor(e,r):null;d&&(d.get||d.set)?Object.defineProperty(n,r,d):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function o(t,n){return(0,e.tidy)(()=>{if(3!==t.rank)throw new a.ValueError("temporalPadding expects input tensor to be 3-D, but received a "+`${t.rank}-D tensor.`);if(null==n&&(n=[1,1]),2!==n.length)throw new a.ValueError("temporalPadding expects input padding pattern to be a length-2 "+`array, but received a length-${n.length} array.`);const r=[[0,0],n,[0,0]];return e.pad(t,r)})}function l(n,r,i){return(0,e.tidy)(()=>{if(4!==n.rank)throw new a.ValueError("temporalPadding expects input tensor to be 4-D, but received a "+`${n.rank}-D tensor.`);if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new a.ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==i&&(i=(0,t.imageDataFormat)()),"channelsLast"!==i&&"channelsFirst"!==i)throw new a.ValueError(`Unknown data format: ${i}. `+"Supported data formats are 'channelsLast' and 'channelsFirst.");let d;return d="channelsFirst"===i?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],e.pad(n,d)})}class p extends n.Layer{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?(0,t.imageDataFormat)():e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new a.ValueError("ZeroPadding2D expects padding to be a length-2 array, but "+`received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new a.ValueError("ZeroPadding2D expects height padding to be a length-2 array, "+`but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new a.ValueError("ZeroPadding2D expects width padding to be a length-2 array, "+`but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new n.InputSpec({ndim:4})]}computeOutputShape(e){let t,n;return e=(0,r.getExactlyOneShape)(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(t,n){return(0,e.tidy)(()=>l((0,r.getExactlyOneTensor)(t),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.ZeroPadding2D=p,p.className="ZeroPadding2D",e.serialization.registerClass(p);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/common":"BnDD","../engine/topology":"c19E","../errors":"g8PH","../utils/types_utils":"Lonb"}],"QwV1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool2d=u,exports.pool3d=g,exports.GlobalMaxPooling2D=exports.GlobalAveragePooling2D=exports.GlobalPooling2D=exports.GlobalMaxPooling1D=exports.GlobalAveragePooling1D=exports.GlobalPooling1D=exports.AveragePooling3D=exports.MaxPooling3D=exports.Pooling3D=exports.AveragePooling2D=exports.MaxPooling2D=exports.Pooling2D=exports.AveragePooling1D=exports.MaxPooling1D=exports.Pooling1D=void 0;var e=c(require("@tensorflow/tfjs-core")),t=require("../backend/common"),s=c(require("../backend/tfjs_backend")),o=require("../common"),i=require("../engine/topology"),r=require("../errors"),a=require("../utils/conv_utils"),n=require("../utils/generic_utils"),l=require("../utils/types_utils"),d=require("./convolutional");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(s,i,r):s[i]=e[i]}return s.default=e,t&&t.set(e,s),s}function u(s,i,r,a,n,l){return(0,e.tidy)(()=>{let p;(0,o.checkDataFormat)(n),(0,o.checkPoolMode)(l),(0,o.checkPaddingMode)(a),null==r&&(r=[1,1]),null==a&&(a="valid"),null==n&&(n=(0,t.imageDataFormat)()),null==l&&(l="max"),s=(0,d.preprocessConv2DInput)(s,n);const c="same"===a?"same":"valid";return p="max"===l?e.maxPool(s,i,r,c):e.avgPool(s,i,r,c),"channelsFirst"===n&&(p=e.transpose(p,[0,3,1,2])),p})}function g(s,i,r,a,n,l){return(0,e.tidy)(()=>{let p;(0,o.checkDataFormat)(n),(0,o.checkPoolMode)(l),(0,o.checkPaddingMode)(a),null==r&&(r=[1,1,1]),null==a&&(a="valid"),null==n&&(n=(0,t.imageDataFormat)()),null==l&&(l="max"),s=(0,d.preprocessConv3DInput)(s,n);const c="same"===a?"same":"valid";return p="max"===l?e.maxPool3d(s,i,r,c):e.avgPool3d(s,i,r,c),"channelsFirst"===n&&(p=e.transpose(p,[0,4,1,2,3])),p})}class h extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new r.ValueError("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if((0,n.assertPositiveInteger)(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new r.ValueError("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(e.strides)}`);this.strides=e.strides}(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:3})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);const t=(0,a.convOutputLength)(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(t,o){return(0,e.tidy)(()=>{this.invokeCallHook(t,o),t=s.expandDims((0,l.getExactlyOneTensor)(t),2);const i=this.poolingFunction((0,l.getExactlyOneTensor)(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return e.squeeze(i,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling1D=h;class m extends h{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"max")}}exports.MaxPooling1D=m,m.className="MaxPooling1D",e.serialization.registerClass(m);class x extends h{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"avg")}}exports.AveragePooling1D=x,x.className="AveragePooling1D",e.serialization.registerClass(x);class S extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new r.ValueError("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+`${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];(0,n.assertPositiveInteger)(this.poolSize,"poolSize"),(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:4})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],s="channelsFirst"===this.dataFormat?e[3]:e[2];return t=(0,a.convOutputLength)(t,this.poolSize[0],this.padding,this.strides[0]),s=(0,a.convOutputLength)(s,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,s]:[e[0],t,s,e[3]]}call(t,s){return(0,e.tidy)(()=>(this.invokeCallHook(t,s),this.poolingFunction((0,l.getExactlyOneTensor)(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling2D=S;class P extends S{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"max")}}exports.MaxPooling2D=P,P.className="MaxPooling2D",e.serialization.registerClass(P);class y extends S{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),u(e,t,s,i,r,"avg")}}exports.AveragePooling2D=y,y.className="AveragePooling2D",e.serialization.registerClass(y);class v extends i.Layer{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new r.ValueError("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+`${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];(0,n.assertPositiveInteger)(this.poolSize,"poolSize"),(0,n.assertPositiveInteger)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),(0,o.checkPaddingMode)(this.padding),this.inputSpec=[new i.InputSpec({ndim:5})]}computeOutputShape(e){e=(0,l.getExactlyOneShape)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],s="channelsFirst"===this.dataFormat?e[3]:e[2],o="channelsFirst"===this.dataFormat?e[4]:e[3];return t=(0,a.convOutputLength)(t,this.poolSize[0],this.padding,this.strides[0]),s=(0,a.convOutputLength)(s,this.poolSize[1],this.padding,this.strides[1]),o=(0,a.convOutputLength)(o,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,s,o]:[e[0],t,s,o,e[4]]}call(t,s){return(0,e.tidy)(()=>(this.invokeCallHook(t,s),this.poolingFunction((0,l.getExactlyOneTensor)(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.Pooling3D=v;class z extends v{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),g(e,t,s,i,r,"max")}}exports.MaxPooling3D=z,z.className="MaxPooling3D",e.serialization.registerClass(z);class D extends v{constructor(e){super(e)}poolingFunction(e,t,s,i,r){return(0,o.checkDataFormat)(r),(0,o.checkPaddingMode)(i),g(e,t,s,i,r,"avg")}}exports.AveragePooling3D=D,D.className="AveragePooling3D",e.serialization.registerClass(D);class F extends i.Layer{constructor(e){super(e),this.inputSpec=[new i.InputSpec({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new r.NotImplementedError}}exports.GlobalPooling1D=F;class f extends F{constructor(e){super(e||{})}call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return e.mean(s,1)})}}exports.GlobalAveragePooling1D=f,f.className="GlobalAveragePooling1D",e.serialization.registerClass(f);class b extends F{constructor(e){super(e||{})}call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return e.max(s,1)})}}exports.GlobalMaxPooling1D=b,b.className="GlobalMaxPooling1D",e.serialization.registerClass(b);class O extends i.Layer{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,o.checkDataFormat)(this.dataFormat),this.inputSpec=[new i.InputSpec({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new r.NotImplementedError}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}exports.GlobalPooling2D=O;class k extends O{call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return"channelsLast"===this.dataFormat?e.mean(s,[1,2]):e.mean(s,[2,3])})}}exports.GlobalAveragePooling2D=k,k.className="GlobalAveragePooling2D",e.serialization.registerClass(k);class M extends O{call(t,s){return(0,e.tidy)(()=>{const s=(0,l.getExactlyOneTensor)(t);return"channelsLast"===this.dataFormat?e.max(s,[1,2]):e.max(s,[2,3])})}}exports.GlobalMaxPooling2D=M,M.className="GlobalMaxPooling2D",e.serialization.registerClass(M);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/common":"BnDD","../backend/tfjs_backend":"xmUi","../common":"oZnC","../engine/topology":"c19E","../errors":"g8PH","../utils/conv_utils":"pL4s","../utils/generic_utils":"nEuI","../utils/types_utils":"Lonb","./convolutional":"zHua"}],"DneN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkBidirectionalMergeMode=y,exports.Bidirectional=exports.TimeDistributed=exports.Wrapper=void 0;var e=h(require("@tensorflow/tfjs-core")),t=h(require("../backend/tfjs_backend")),r=require("../common"),a=require("../engine/topology"),i=require("../errors"),s=require("../keras_format/common"),n=h(require("../utils/generic_utils")),l=require("../utils/types_utils"),o=require("./recurrent"),c=require("./serialization");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function h(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}class d extends a.Layer{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){const a=t.layer,i=(0,c.deserialize)(a,r);delete t.layer;const s={layer:i};return Object.assign(s,t),new e(s)}}exports.Wrapper=d;class g extends d{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=(0,l.getExactlyOneShape)(e)).length<3)throw new i.ValueError("TimeDistributed layer expects an input shape >= 3D, but received "+`input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=(0,l.getExactlyOneShape)(e))[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),a=e[1];return[r[0],a].concat(r.slice(1))}call(t,r){return(0,e.tidy)(()=>{t=(0,l.getExactlyOneTensor)(t);return(0,o.rnn)((e,t)=>{return[(0,l.getExactlyOneTensor)(this.layer.call(e,r)),[]]},t,[],!1,null,null,!1,!0)[1]})}}function y(e){n.checkStringTypeUnionValue(s.VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",e)}exports.TimeDistributed=g,g.className="TimeDistributed",e.serialization.registerClass(g);const p="concat";class f extends d{constructor(e){super(e);const t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=(0,c.deserialize)(r),t.goBackwards=!0!==t.goBackwards;const a={};if(a.className=e.layer.getClassName(),a.config=t,this.backwardLayer=(0,c.deserialize)(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?p:e.mergeMode,y(this.mergeMode),e.weights)throw new i.NotImplementedError("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t,r,a,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(a=i.slice(1),t=i[0]):t=i[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,r=[t]):r=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?r.concat(a).concat(a.slice()):[t].concat(a).concat(a.slice()):n.singletonOrArray(r)}apply(e,t){let r=null==t?null:t.initialState,s=null==t?null:t.constants;null==t&&(t={});const n=(0,o.standardizeArgs)(e,r,s,this.numConstants);if(e=n.inputs,r=n.initialState,s=n.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==s)return super.apply(e,t);const l=[],c=[];if(null!=r){const e=r.length;if(e%2>0)throw new i.ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,l.push(...r);const s=r.map(e=>new a.InputSpec({shape:e.shape}));this.forwardLayer.stateSpec=s.slice(0,e/2),this.backwardLayer.stateSpec=s.slice(e/2),c.push(...s)}if(null!=s)throw new i.NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");const u=l[0]instanceof a.SymbolicTensor;for(const o of l)if(o instanceof a.SymbolicTensor!==u)throw new i.ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(u){const r=[e].concat(l),a=this.inputSpec.concat(c),i=this.inputSpec;this.inputSpec=a;const s=super.apply(r,t);return this.inputSpec=i,s}return super.apply(e,t)}call(r,a){return(0,e.tidy)(()=>{const i=a.initialState;let s,n,l,o;if(null==i)s=this.forwardLayer.call(r,a),n=this.backwardLayer.call(r,a);else{const e=i.slice(0,i.length/2),t=i.slice(i.length/2);s=this.forwardLayer.call(r,Object.assign(a,{initialState:e})),n=this.backwardLayer.call(r,Object.assign(a,{initialState:t}))}return this.returnState&&(Array.isArray(s)&&(l=s.slice(1).concat(n.slice(1))),s=s[0],n=n[0]),this.returnSequences&&(n=e.reverse(n,1)),"concat"===this.mergeMode?o=t.concatenate([s,n]):"sum"===this.mergeMode?o=e.add(s,n):"ave"===this.mergeMode?o=e.mul(.5,e.add(s,n)):"mul"===this.mergeMode?o=e.mul(s,n):null==this.mergeMode&&(o=[s,n]),this.returnState?null==this.mergeMode?o.concat(l):[o].concat(l):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){(0,r.nameScope)(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),(0,r.nameScope)(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let r;if(Array.isArray(t)&&(t=t[0]),r=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map(e=>null);return Array.isArray(r)?r.concat(e).concat(e):[r].concat(e).concat(e)}return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const r=(0,c.deserialize)(t.layer);if(delete t.layer,null!=t.numConstants)throw new i.NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=t;return a.layer=r,new e(a)}}exports.Bidirectional=f,f.className="Bidirectional",e.serialization.registerClass(f);
},{"@tensorflow/tfjs-core":"tKjQ","../backend/tfjs_backend":"xmUi","../common":"oZnC","../engine/topology":"c19E","../errors":"g8PH","../keras_format/common":"hIJg","../utils/generic_utils":"nEuI","../utils/types_utils":"Lonb","./recurrent":"bLYN","./serialization":"T26j"}],"H7bA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inputLayer=w,exports.elu=m,exports.reLU=v,exports.leakyReLU=P,exports.prelu=D,exports.softmax=b,exports.thresholdedReLU=y,exports.conv1d=N,exports.conv2d=C,exports.conv2dTranspose=R,exports.conv3d=L,exports.separableConv2d=M,exports.cropping2D=q,exports.upSampling2d=h,exports.depthwiseConv2d=S,exports.activation=A,exports.dense=U,exports.dropout=G,exports.spatialDropout1d=T,exports.flatten=k,exports.repeatVector=z,exports.reshape=_,exports.permute=j,exports.embedding=O,exports.add=B,exports.average=E,exports.concatenate=V,exports.maximum=F,exports.minimum=I,exports.multiply=Z,exports.dot=H,exports.batchNormalization=J,exports.layerNormalization=K,exports.zeroPadding2d=Q,exports.averagePooling1d=W,exports.avgPool1d=X,exports.avgPooling1d=Y,exports.averagePooling2d=$,exports.avgPool2d=ee,exports.avgPooling2d=ne,exports.averagePooling3d=re,exports.avgPool3d=oe,exports.avgPooling3d=te,exports.globalAveragePooling1d=ue,exports.globalAveragePooling2d=ie,exports.globalMaxPooling1d=ae,exports.globalMaxPooling2d=le,exports.maxPooling1d=se,exports.maxPooling2d=pe,exports.maxPooling3d=ce,exports.gru=xe,exports.gruCell=fe,exports.lstm=de,exports.lstmCell=ge,exports.simpleRNN=we,exports.simpleRNNCell=me,exports.convLstm2d=ve,exports.convLstm2dCell=Pe,exports.rnn=De,exports.stackedRNNCells=be,exports.bidirectional=ye,exports.timeDistributed=Ne,exports.gaussianNoise=qe,exports.gaussianDropout=he,exports.alphaDropout=Se,exports.masking=Ae,Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return n.Layer}}),Object.defineProperty(exports,"input",{enumerable:!0,get:function(){return r.input}}),Object.defineProperty(exports,"RNN",{enumerable:!0,get:function(){return d.RNN}}),Object.defineProperty(exports,"RNNCell",{enumerable:!0,get:function(){return d.RNNCell}}),exports.maxPool2d=exports.maxPool1d=exports.globalMaxPool2d=exports.globalMaxPool1d=void 0;var e=require("./engine/input_layer"),n=require("./engine/topology"),r=require("./exports"),o=require("./layers/advanced_activations"),t=require("./layers/convolutional"),u=require("./layers/convolutional_depthwise"),i=require("./layers/convolutional_recurrent"),a=require("./layers/core"),l=require("./layers/embeddings"),s=require("./layers/merge"),p=require("./layers/noise"),c=require("./layers/normalization"),x=require("./layers/padding"),f=require("./layers/pooling"),d=require("./layers/recurrent"),g=require("./layers/wrappers");function w(n){return new e.InputLayer(n)}function m(e){return new o.ELU(e)}function v(e){return new o.ReLU(e)}function P(e){return new o.LeakyReLU(e)}function D(e){return new o.PReLU(e)}function b(e){return new o.Softmax(e)}function y(e){return new o.ThresholdedReLU(e)}function N(e){return new t.Conv1D(e)}function C(e){return new t.Conv2D(e)}function R(e){return new t.Conv2DTranspose(e)}function L(e){return new t.Conv3D(e)}function M(e){return new t.SeparableConv2D(e)}function q(e){return new t.Cropping2D(e)}function h(e){return new t.UpSampling2D(e)}function S(e){return new u.DepthwiseConv2D(e)}function A(e){return new a.Activation(e)}function U(e){return new a.Dense(e)}function G(e){return new a.Dropout(e)}function T(e){return new a.SpatialDropout1D(e)}function k(e){return new a.Flatten(e)}function z(e){return new a.RepeatVector(e)}function _(e){return new a.Reshape(e)}function j(e){return new a.Permute(e)}function O(e){return new l.Embedding(e)}function B(e){return new s.Add(e)}function E(e){return new s.Average(e)}function V(e){return new s.Concatenate(e)}function F(e){return new s.Maximum(e)}function I(e){return new s.Minimum(e)}function Z(e){return new s.Multiply(e)}function H(e){return new s.Dot(e)}function J(e){return new c.BatchNormalization(e)}function K(e){return new c.LayerNormalization(e)}function Q(e){return new x.ZeroPadding2D(e)}function W(e){return new f.AveragePooling1D(e)}function X(e){return W(e)}function Y(e){return W(e)}function $(e){return new f.AveragePooling2D(e)}function ee(e){return $(e)}function ne(e){return $(e)}function re(e){return new f.AveragePooling3D(e)}function oe(e){return re(e)}function te(e){return re(e)}function ue(e){return new f.GlobalAveragePooling1D(e)}function ie(e){return new f.GlobalAveragePooling2D(e)}function ae(e){return new f.GlobalMaxPooling1D(e)}function le(e){return new f.GlobalMaxPooling2D(e)}function se(e){return new f.MaxPooling1D(e)}function pe(e){return new f.MaxPooling2D(e)}function ce(e){return new f.MaxPooling3D(e)}function xe(e){return new d.GRU(e)}function fe(e){return new d.GRUCell(e)}function de(e){return new d.LSTM(e)}function ge(e){return new d.LSTMCell(e)}function we(e){return new d.SimpleRNN(e)}function me(e){return new d.SimpleRNNCell(e)}function ve(e){return new i.ConvLSTM2D(e)}function Pe(e){return new i.ConvLSTM2DCell(e)}function De(e){return new d.RNN(e)}function be(e){return new d.StackedRNNCells(e)}function ye(e){return new g.Bidirectional(e)}function Ne(e){return new g.TimeDistributed(e)}const Ce=ae;exports.globalMaxPool1d=Ce;const Re=le;exports.globalMaxPool2d=Re;const Le=se;exports.maxPool1d=Le;const Me=pe;function qe(e){return new p.GaussianNoise(e)}function he(e){return new p.GaussianDropout(e)}function Se(e){return new p.AlphaDropout(e)}function Ae(e){return new a.Masking(e)}exports.maxPool2d=Me;
},{"./engine/input_layer":"etSf","./engine/topology":"c19E","./exports":"WTcZ","./layers/advanced_activations":"bB42","./layers/convolutional":"zHua","./layers/convolutional_depthwise":"jB2z","./layers/convolutional_recurrent":"h4CE","./layers/core":"Trhv","./layers/embeddings":"Kpzs","./layers/merge":"Fqgj","./layers/noise":"LeYd","./layers/normalization":"jVQe","./layers/padding":"LD3L","./layers/pooling":"QwV1","./layers/recurrent":"bLYN","./layers/wrappers":"DneN"}],"P7CD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryAccuracy=o,exports.binaryCrossentropy=c,exports.sparseCategoricalAccuracy=u,exports.categoricalAccuracy=a,exports.categoricalCrossentropy=i,exports.precision=s,exports.recall=p,exports.cosineProximity=f,exports.meanAbsoluteError=l,exports.meanAbsolutePercentageError=y,exports.MAPE=x,exports.mape=b,exports.meanSquaredError=m,exports.MSE=g,exports.mse=A;var r=n(require("./losses")),e=n(require("./metrics"));function t(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return t=function(){return r},r}function n(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=t();if(e&&e.has(r))return e.get(r);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)){var u=o?Object.getOwnPropertyDescriptor(r,c):null;u&&(u.get||u.set)?Object.defineProperty(n,c,u):n[c]=r[c]}return n.default=r,e&&e.set(r,n),n}function o(r,t){return e.binaryAccuracy(r,t)}function c(r,t){return e.binaryCrossentropy(r,t)}function u(r,t){return e.sparseCategoricalAccuracy(r,t)}function a(r,t){return e.categoricalAccuracy(r,t)}function i(r,t){return e.categoricalCrossentropy(r,t)}function s(r,t){return e.precision(r,t)}function p(r,t){return e.recall(r,t)}function f(e,t){return r.cosineProximity(e,t)}function l(e,t){return r.meanAbsoluteError(e,t)}function y(e,t){return r.meanAbsolutePercentageError(e,t)}function x(e,t){return r.meanAbsolutePercentageError(e,t)}function b(e,t){return r.meanAbsolutePercentageError(e,t)}function m(e,t){return r.meanSquaredError(e,t)}function g(e,t){return r.meanSquaredError(e,t)}function A(e,t){return r.meanSquaredError(e,t)}
},{"./losses":"bdSS","./metrics":"GLK6"}],"vMrg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"modelFromJSON",{enumerable:!0,get:function(){return e.modelFromJSON}});var e=require("./models");
},{"./models":"pAmT"}],"g3Ks":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.l1l2=n,exports.l1=o,exports.l2=u;var e=t(require("./regularizers"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function n(r){return new e.L1L2(r)}function o(r){return e.l1(r)}function u(r){return e.l2(r)}
},{"./regularizers":"utpK"}],"qGrw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.earlyStopping=l,exports.callbacks=exports.EarlyStopping=exports.Callback=void 0;var t=require("./base_callbacks"),e=require("./engine/training"),o=require("./errors"),i=require("./logs");class s extends t.BaseCallback{constructor(){super(...arguments),this.model=null}setModel(t){if(!(t instanceof e.LayersModel))throw new Error("model must be a LayersModel, not some other Container");this.model=t}}function n(t,e){return t<e}function r(t,e){return t>e}exports.Callback=s;class a extends s{constructor(t){if(super(),null==t&&(t={}),t.restoreBestWeights)throw new o.NotImplementedError("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=t.monitor||"val_loss",this.minDelta=Math.abs(t.minDelta||0),this.patience=t.patience||0,this.verbose=t.verbose||0,this.mode=t.mode||"auto",this.baseline=t.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. `+"Falling back to mode 'auto'."),this.mode="auto"),"min"===this.mode?this.monitorFunc=n:"max"===this.mode?this.monitorFunc=r:-1!==this.monitor.indexOf("acc")?this.monitorFunc=r:this.monitorFunc=n,this.monitorFunc===n&&(this.minDelta*=-1)}async onTrainBegin(t){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===n?1/0:-1/0}async onEpochEnd(t,e){await(0,i.resolveScalarsInLogs)(e);const o=this.getMonitorValue(e);null!=o&&(this.monitorFunc(o-this.minDelta,this.best)?(this.best=o,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)))}async onTrainEnd(t){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(t){null==t&&(t={});const e=t[this.monitor];return null==e&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. `+`Available metrics are: ${Object.keys(t)}`),e}}function l(t){return new a(t)}exports.EarlyStopping=a;const h={earlyStopping:l};exports.callbacks=h;
},{"./base_callbacks":"xKlN","./engine/training":"VhEh","./errors":"g8PH","./logs":"DCYJ"}],"QdjH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"CallbackList",{enumerable:!0,get:function(){return u.CallbackList}}),Object.defineProperty(exports,"CustomCallback",{enumerable:!0,get:function(){return u.CustomCallback}}),Object.defineProperty(exports,"History",{enumerable:!0,get:function(){return u.History}}),Object.defineProperty(exports,"Callback",{enumerable:!0,get:function(){return a.Callback}}),Object.defineProperty(exports,"callbacks",{enumerable:!0,get:function(){return a.callbacks}}),Object.defineProperty(exports,"EarlyStopping",{enumerable:!0,get:function(){return a.EarlyStopping}}),Object.defineProperty(exports,"InputSpec",{enumerable:!0,get:function(){return s.InputSpec}}),Object.defineProperty(exports,"SymbolicTensor",{enumerable:!0,get:function(){return s.SymbolicTensor}}),Object.defineProperty(exports,"LayersModel",{enumerable:!0,get:function(){return l.LayersModel}}),Object.defineProperty(exports,"input",{enumerable:!0,get:function(){return p.input}}),Object.defineProperty(exports,"loadLayersModel",{enumerable:!0,get:function(){return p.loadLayersModel}}),Object.defineProperty(exports,"model",{enumerable:!0,get:function(){return p.model}}),Object.defineProperty(exports,"registerCallbackConstructor",{enumerable:!0,get:function(){return p.registerCallbackConstructor}}),Object.defineProperty(exports,"sequential",{enumerable:!0,get:function(){return p.sequential}}),Object.defineProperty(exports,"RNN",{enumerable:!0,get:function(){return c.RNN}}),Object.defineProperty(exports,"Sequential",{enumerable:!0,get:function(){return b.Sequential}}),Object.defineProperty(exports,"LayerVariable",{enumerable:!0,get:function(){return f.LayerVariable}}),Object.defineProperty(exports,"version_layers",{enumerable:!0,get:function(){return y.version}}),exports.regularizers=exports.models=exports.metrics=exports.layers=exports.initializers=exports.constraints=void 0;var e=x(require("./exports_constraints"));exports.constraints=e;var r=x(require("./exports_initializers"));exports.initializers=r;var t=x(require("./exports_layers"));exports.layers=t;var n=x(require("./exports_metrics"));exports.metrics=n;var o=x(require("./exports_models"));exports.models=o;var i=x(require("./exports_regularizers"));exports.regularizers=i;var u=require("./base_callbacks"),a=require("./callbacks"),s=require("./engine/topology"),l=require("./engine/training"),p=require("./exports"),c=require("./layers/recurrent"),b=require("./models"),f=require("./variables"),y=require("./version");function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function x(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=d();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}
},{"./exports_constraints":"sdZT","./exports_initializers":"e3pB","./exports_layers":"H7bA","./exports_metrics":"P7CD","./exports_models":"vMrg","./exports_regularizers":"g3Ks","./base_callbacks":"xKlN","./callbacks":"qGrw","./engine/topology":"c19E","./engine/training":"VhEh","./exports":"WTcZ","./layers/recurrent":"bLYN","./models":"pAmT","./variables":"yJYS","./version":"yMuw"}],"gSET":[function(require,module,exports) {
"use strict";var T,_;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SaverDef=exports.DataType=void 0,exports.DataType=T,function(T){T[T.DT_INVALID=0]="DT_INVALID",T[T.DT_FLOAT=1]="DT_FLOAT",T[T.DT_DOUBLE=2]="DT_DOUBLE",T[T.DT_INT32=3]="DT_INT32",T[T.DT_UINT8=4]="DT_UINT8",T[T.DT_INT16=5]="DT_INT16",T[T.DT_INT8=6]="DT_INT8",T[T.DT_STRING=7]="DT_STRING",T[T.DT_COMPLEX64=8]="DT_COMPLEX64",T[T.DT_INT64=9]="DT_INT64",T[T.DT_BOOL=10]="DT_BOOL",T[T.DT_QINT8=11]="DT_QINT8",T[T.DT_QUINT8=12]="DT_QUINT8",T[T.DT_QINT32=13]="DT_QINT32",T[T.DT_BFLOAT16=14]="DT_BFLOAT16",T[T.DT_FLOAT_REF=101]="DT_FLOAT_REF",T[T.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",T[T.DT_INT32_REF=103]="DT_INT32_REF",T[T.DT_UINT8_REF=104]="DT_UINT8_REF",T[T.DT_INT16_REF=105]="DT_INT16_REF",T[T.DT_INT8_REF=106]="DT_INT8_REF",T[T.DT_STRING_REF=107]="DT_STRING_REF",T[T.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",T[T.DT_INT64_REF=109]="DT_INT64_REF",T[T.DT_BOOL_REF=110]="DT_BOOL_REF",T[T.DT_QINT8_REF=111]="DT_QINT8_REF",T[T.DT_QUINT8_REF=112]="DT_QUINT8_REF",T[T.DT_QINT32_REF=113]="DT_QINT32_REF",T[T.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(T||(exports.DataType=T={})),exports.SaverDef=_,function(T){let _;!function(T){T[T.LEGACY=0]="LEGACY",T[T.V1=1]="V1",T[T.V2=2]="V2"}(_=T.CheckpointFormatVersion||(T.CheckpointFormatVersion={}))}(_||(exports.SaverDef=_={}));
},{}],"mkrd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerOp=t,exports.getRegisteredOp=r,exports.deregisterOp=s;const e={};function t(t,r){const s={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:r};e[t]=s}function r(t){return e[t]}function s(t){delete e[t]}
},{}],"AzqT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getParamValue=e,exports.getTensor=n,exports.getTensorsForCurrentContenxt=r,exports.getNodeNameAndIndex=o,exports.parseNodeName=u,exports.split=i,exports.getPadding=c,exports.cloneTensor=p;var t=require("@tensorflow/tfjs-core");function e(e,r,o,s,u){const i=r.inputParams[e];if(i&&void 0!==i.inputIndexStart){const e=i.inputIndexStart,c=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd;if("tensor"===i.type)return n(r.inputNames[i.inputIndexStart],o,s,u);if("tensors"===i.type){return r.inputNames.slice(e,c).map(t=>n(t,o,s,u))}const p=n(r.inputNames.slice(e)[0],o,s,u),a=p.dataSync();return"number"===i.type?a[0]:t.util.toNestedArray(p.shape,a)}const c=r.attrParams[e];return c&&c.value}function n(t,e,n,r){const[o,i]=u(t);if(null!=r){const t=r.getHashTableHandleByName(o);if(null!=t)return t}const c=n.currentContextIds.find(t=>!!e[s(o,t)]);return void 0!==c?e[s(o,c)][i]:void 0}function r(t,e,n){return e[s(t,n.currentContextId)]}function o(t,e){const[n,r]=u(t);return[s(n,e&&e.currentContextId),r]}function s(t,e){return e?`${t}-${e}`:t}function u(t){const e=t.split(":");return 1===e.length?[t,0]:[e[0],Number(e[e.length-1])]}function i(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function c(t,n,r){let o=e("pad",t,n,r);if("explicit"===o){o=e("explicitPaddings",t,n,r);const s=[[0,0],[0,0],[0,0],[0,0]];for(let t=0;t<4;t++)s[t][0]=o[2*t],s[t][1]=o[2*t+1];return s}return o}function p(e){return e.kept?e:(0,t.clone)(e)}
},{"@tensorflow/tfjs-core":"tKjQ"}],"qQmG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"Niwa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"b4J2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}];exports.json=e;
},{}],"vx5J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];exports.json=t;
},{}],"bZB1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];exports.json=e;
},{}],"bKrZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"Cgyf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];exports.json=t;
},{}],"LqNK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];exports.json=t;
},{}],"KBpN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}];exports.json=e;
},{}],"iO2U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}];exports.json=e;
},{}],"PQ0Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=t;
},{}],"r7AS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];exports.json=e;
},{}],"qk0h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}];exports.json=t;
},{}],"EFxQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];exports.json=e;
},{}],"eRVz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}];exports.json=e;
},{}],"UtHd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];exports.json=t;
},{}],"Ijg0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.json=void 0;const t=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}];exports.json=t;
},{}],"HjUb":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var e=arguments[3],t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.decodeBase64=O,exports.parseStringParam=A,exports.getStringParam=k,exports.getBoolParam=q,exports.getNumberParam=V,exports.parseDtypeParam=I,exports.getFuncParam=w,exports.getDtypeParam=j,exports.getDtypeArrayParam=E,exports.parseTensorShapeParam=S,exports.getTensorShapeParam=M,exports.getNumericArrayParam=B,exports.getStringArrayParam=C,exports.getTensorShapeArrayParam=z,exports.getBoolArrayParam=F,exports.OperationMapper=void 0;var a=require("@tensorflow/tfjs-core"),r=P(require("../data/compiled_api")),n=require("./custom_op/register"),s=require("./executors/utils"),u=P(require("./op_list/arithmetic")),o=P(require("./op_list/basic_math")),i=P(require("./op_list/control")),p=P(require("./op_list/convolution")),c=P(require("./op_list/creation")),l=P(require("./op_list/dynamic")),f=P(require("./op_list/evaluation")),d=P(require("./op_list/graph")),m=P(require("./op_list/hash_table")),h=P(require("./op_list/image")),g=P(require("./op_list/logical")),y=P(require("./op_list/matrices")),N=P(require("./op_list/normalization")),b=P(require("./op_list/reduction")),D=P(require("./op_list/slice_join")),_=P(require("./op_list/spectral")),T=P(require("./op_list/transformation"));function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function P(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(a,n,s):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}class x{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[u,o,i,p,c,l,f,g,h,d,y,N,b,D,_,T,m].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){const a=e.node,r=[],n=[],u=[],o=a.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?n.push(e[t.name]):null!=t.input&&0!==t.input.length||u.push(e[t.name]),e),{});let i=[];const p=[];let c={},l={};null!=t&&(c=this.mapSignatureEntries(t.inputs),l=this.mapSignatureEntries(t.outputs));const f=Object.keys(o);f.forEach(e=>{const t=o[e];t.inputNames.forEach(e=>{const[a]=(0,s.getNodeNameAndIndex)(e);t.inputs.push(o[a]),o[a].children.push(t)})}),0===Object.keys(l).length?f.forEach(e=>{const t=o[e];0===t.children.length&&p.push(t)}):Object.keys(l).forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e),a=o[t];null!=a&&(a.signatureKey=l[e],p.push(a))}),Object.keys(c).length>0?Object.keys(c).forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e),a=o[t];a&&(a.signatureKey=c[e],i.push(a))}):i=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));const m={nodes:o,inputs:i,outputs:p,weights:n,placeholders:r,signature:t,functions:d};return u.length>0&&(m.initNodes=u),m}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,a)=>(t[e[a].name]=a,t),{})}mapNode(e){const t=(0,n.getRegisteredOp)(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const a={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.substr(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(a.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(a.attrParams=t.attrs.reduce((t,a)=>{const r=a.type;let n=void 0;switch(a.type){case"string":void 0===(n=k(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=k(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":void 0===(n=C(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=C(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":void 0===(n=V(e.attr,a.tfName,a.defaultValue||0))&&a.tfDeprecatedName&&(n=V(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":void 0===(n=B(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=B(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":void 0===(n=q(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=q(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":void 0===(n=F(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=F(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":void 0===(n=M(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=M(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":void 0===(n=z(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=z(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":void 0===(n=j(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=j(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":void 0===(n=E(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=E(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":void 0===(n=w(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=w(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return t[a.name]={value:n,type:r},t},{})),a}mapFunction(e){const t=e.nodeDef,a=[];let r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&a.push(e[t.name]),e),{}));const n=[],u=[];e.signature.inputArg.forEach(e=>{const[t]=(0,s.getNodeNameAndIndex)(e.name),a={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:I(e.type),type:"dtype"}},children:[]};a.signatureKey=e.name,n.push(a),r[t]=a}),Object.keys(r).forEach(e=>{const t=r[e];t.inputNames.forEach(e=>{const[a]=(0,s.getNodeNameAndIndex)(e);t.inputs.push(r[a]),r[a].children.push(t)})});const o=e.ret;e.signature.outputArg.forEach(e=>{const[t,a]=(0,s.getNodeNameAndIndex)(o[e.name]),n=r[t];null!=n&&(n.defaultOutput=a,u.push(n))});const i=this.mapArgsToSignature(e);return{nodes:r,inputs:n,outputs:u,weights:a,placeholders:[],signature:i}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,a)=>(t[a.name]=this.mapArgToTensorInfo(a,e.ret),t),{})}}mapArgToTensorInfo(e,t){let a=e.name;return null!=t&&(a=t[a]),{name:a,dtype:e.type}}}function O(e){const r=(0,a.env)().global;if(void 0!==r.atob)return r.atob(e);if(void 0!==t)return new t(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function A(e,t){const a=Array.isArray(e)?String.fromCharCode.apply(null,e):O(e);return t?a:a.toLowerCase()}function k(e,t,a,r=!1){const n=e[t];return null!=n?A(n.s,r):a}function q(e,t,a){const r=e[t];return r?r.b:a}function V(e,t,a){const r=e[t]||{},n=null!=r.i?r.i:null!=r.f?r.f:a;return"number"==typeof n?n:parseInt(n,10)}function I(e){switch("string"==typeof e&&(e=r.DataType[e]),e){case r.DataType.DT_FLOAT:return"float32";case r.DataType.DT_INT32:case r.DataType.DT_INT64:case r.DataType.DT_INT8:case r.DataType.DT_UINT8:return"int32";case r.DataType.DT_BOOL:return"bool";case r.DataType.DT_DOUBLE:return"float32";case r.DataType.DT_STRING:return"string";default:return null}}function w(e,t,a){const r=e[t];return r&&r.func?r.func.name:a}function j(e,t,a){const r=e[t];return r&&r.type?I(r.type):a}function E(e,t,a){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>I(e)):a}function S(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function M(e,t,a){const r=e[t];return r&&r.shape?S(r.shape):a}function B(e,t,a){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):a}function C(e,t,a,r=!1){const n=e[t];return n&&n.list&&n.list.s?n.list.s.map(e=>A(e,r)):a}function z(e,t,a){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>S(e)):a}function F(e,t,a){const r=e[t];return r&&r.list&&r.list.b?r.list.b:a}exports.OperationMapper=x;
},{"@tensorflow/tfjs-core":"tKjQ","../data/compiled_api":"gSET","./custom_op/register":"mkrd","./executors/utils":"AzqT","./op_list/arithmetic":"qQmG","./op_list/basic_math":"Niwa","./op_list/control":"b4J2","./op_list/convolution":"vx5J","./op_list/creation":"bZB1","./op_list/dynamic":"bKrZ","./op_list/evaluation":"Cgyf","./op_list/graph":"LqNK","./op_list/hash_table":"KBpN","./op_list/image":"iO2U","./op_list/logical":"PQ0Y","./op_list/matrices":"r7AS","./op_list/normalization":"qk0h","./op_list/reduction":"EFxQ","./op_list/slice_join":"eRVz","./op_list/spectral":"UtHd","./op_list/transformation":"Ijg0","buffer":"HgFv"}],"A11r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NodeValueImpl=void 0;var t=require("../executors/utils"),r=require("../operation_mapper");class e{constructor(t,r,e){this.node=t,this.tensorMap=r,this.context=e,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,r)=>(t[r]=this.getAttr(r),t),{}))}getInput(r){return(0,t.getTensor)(r,this.tensorMap,this.context)}getAttr(e,s){const n=this.node.rawAttrs[e];if(null!=n.tensor)return(0,t.getTensor)(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return(0,r.getNumberParam)(this.node.rawAttrs,e,s);if(null!=n.s)return(0,r.getStringParam)(this.node.rawAttrs,e,s);if(null!=n.b)return(0,r.getBoolParam)(this.node.rawAttrs,e,s);if(null!=n.shape)return(0,r.getTensorShapeParam)(this.node.rawAttrs,e,s);if(null!=n.type)return(0,r.getDtypeParam)(this.node.rawAttrs,e,s);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return(0,r.getNumericArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.s)return(0,r.getStringArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.shape)return(0,r.getTensorShapeArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.b)return(0,r.getBoolArrayParam)(this.node.rawAttrs,e,s);if(null!=n.list.type)return(0,r.getDtypeArrayParam)(this.node.rawAttrs,e,s)}return s}}exports.NodeValueImpl=e;
},{"../executors/utils":"AzqT","../operation_mapper":"HjUb"}],"v53G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ops");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});
},{"./ops":"DHFH"}],"I69s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r();if(a&&a.has(e))return a.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=u?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(t,o,n):t[o]=e[o]}return t.default=e,a&&a.set(e,t),t}const u=(r,t,u)=>{switch(r.op){case"BiasAdd":case"AddV2":case"Add":return[e.add((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"AddN":return[e.addN((0,a.getParamValue)("tensors",r,t,u))];case"FloorMod":case"Mod":return[e.mod((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Mul":return[e.mul((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"RealDiv":case"Div":return[e.div((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"DivNoNan":return[e.divNoNan((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"FloorDiv":return[e.floorDiv((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Sub":return[e.sub((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Minimum":return[e.minimum((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Maximum":return[e.maximum((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Pow":return[e.pow((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"SquaredDifference":return[e.squaredDifference((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const o="arithmetic";exports.CATEGORY=o;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"J5T1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r();if(a&&a.has(e))return a.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var n=u?Object.getOwnPropertyDescriptor(e,l):null;n&&(n.get||n.set)?Object.defineProperty(t,l,n):t[l]=e[l]}return t.default=e,a&&a.set(e,t),t}const u=(r,t,u)=>{switch(r.op){case"Abs":case"ComplexAbs":return[e.abs((0,a.getParamValue)("x",r,t,u))];case"Acos":return[e.acos((0,a.getParamValue)("x",r,t,u))];case"Acosh":return[e.acosh((0,a.getParamValue)("x",r,t,u))];case"Asin":return[e.asin((0,a.getParamValue)("x",r,t,u))];case"Asinh":return[e.asinh((0,a.getParamValue)("x",r,t,u))];case"Atan":return[e.atan((0,a.getParamValue)("x",r,t,u))];case"Atan2":return[e.atan2((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("y",r,t,u))];case"Atanh":return[e.atanh((0,a.getParamValue)("x",r,t,u))];case"Ceil":return[e.ceil((0,a.getParamValue)("x",r,t,u))];case"Complex":return[e.complex((0,a.getParamValue)("real",r,t,u),(0,a.getParamValue)("imag",r,t,u))];case"Cos":return[e.cos((0,a.getParamValue)("x",r,t,u))];case"Cosh":return[e.cosh((0,a.getParamValue)("x",r,t,u))];case"Elu":return[e.elu((0,a.getParamValue)("x",r,t,u))];case"Erf":return[e.erf((0,a.getParamValue)("x",r,t,u))];case"Exp":return[e.exp((0,a.getParamValue)("x",r,t,u))];case"Expm1":return[e.expm1((0,a.getParamValue)("x",r,t,u))];case"Floor":return[e.floor((0,a.getParamValue)("x",r,t,u))];case"Log":return[e.log((0,a.getParamValue)("x",r,t,u))];case"Log1p":return[e.log1p((0,a.getParamValue)("x",r,t,u))];case"Imag":return[e.imag((0,a.getParamValue)("x",r,t,u))];case"Neg":return[e.neg((0,a.getParamValue)("x",r,t,u))];case"Reciprocal":return[e.reciprocal((0,a.getParamValue)("x",r,t,u))];case"Real":return[e.real((0,a.getParamValue)("x",r,t,u))];case"Relu":return[e.relu((0,a.getParamValue)("x",r,t,u))];case"Round":return[e.round((0,a.getParamValue)("x",r,t,u))];case"Selu":return[e.selu((0,a.getParamValue)("x",r,t,u))];case"Sigmoid":return[e.sigmoid((0,a.getParamValue)("x",r,t,u))];case"Sin":return[e.sin((0,a.getParamValue)("x",r,t,u))];case"Sign":return[e.sign((0,a.getParamValue)("x",r,t,u))];case"Sinh":return[e.sinh((0,a.getParamValue)("x",r,t,u))];case"Softplus":return[e.softplus((0,a.getParamValue)("x",r,t,u))];case"Sqrt":return[e.sqrt((0,a.getParamValue)("x",r,t,u))];case"Square":return[e.square((0,a.getParamValue)("x",r,t,u))];case"Tanh":return[e.tanh((0,a.getParamValue)("x",r,t,u))];case"Tan":return[e.tan((0,a.getParamValue)("x",r,t,u))];case"Relu6":case"ClipByValue":return[e.clipByValue((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("clipValueMin",r,t,u),(0,a.getParamValue)("clipValueMax",r,t,u))];case"Rsqrt":return[e.rsqrt((0,a.getTensor)(r.inputNames[0],t,u))];case"Prod":return[e.prod((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("axes",r,t,u))];case"LeakyRelu":return[e.leakyRelu((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("alpha",r,t,u))];case"Prelu":return[e.prelu((0,a.getParamValue)("x",r,t,u),(0,a.getParamValue)("alpha",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const l="basic_math";exports.CATEGORY=l;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"CqqQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertShapesMatchAllowUndefinedSize=t,exports.shapesEqualAllowUndefinedSize=r;var e=require("@tensorflow/tfjs-core");function t(t,n,s=""){e.util.assert(r(t,n),()=>s+` Shapes ${t} and ${n} must match`)}function r(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(-1!==e[r]&&-1!==t[r]&&e[r]!==t[r])return!1;return!0}
},{"@tensorflow/tfjs-core":"tKjQ"}],"R7cE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TensorArray=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./tensor_utils");class s{constructor(t,s,r,i,n,a,h){this.name=t,this.dtype=s,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=n,this.dynamicSize=a,this.clearAfterRead=h,this.tensors=[],this.closed_=!1,this.idTensor=(0,e.scalar)(0),(0,e.keep)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read `+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(s,r){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(s<0||!this.dynamicSize&&s>=this.maxSize)throw new Error(`Tried to write to index ${s}, but array is not resizeable and size is: ${this.maxSize}`);const i=this.tensors[s]||{};if(r.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s},\n          because the value dtype is ${r.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=r.shape),(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,r.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${s}.`),i.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s}, because it has already been read.`);if(i.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${s}, because it has already been written.`);i.tensor=r,(0,e.keep)(r),i.written=!0,this.tensors[s]=i}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,`+`because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,s)=>this.write(e,t[s]))}gather(s,r){if(r&&r!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${r}`);if(s)s=s.slice(0,this.size());else{s=[];for(let e=0;e<this.size();e++)s.push(e)}if(0===s.length)return(0,e.tensor)([],[0].concat(this.elementShape));const i=this.readMany(s);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),(0,e.stack)(i,0)}concat(s){if(s&&s!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${s}`);if(0===this.size())return(0,e.tensor)([],[0].concat(this.elementShape));const r=[];for(let e=0;e<this.size();e++)r.push(e);const i=this.readMany(r);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,i[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${i[0].shape})`),(0,e.concat)(i,0)}scatter(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);if(t.length!==s.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${s.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,(0,e.unstack)(s,0))}split(t,s){if(s.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${s.dtype}`);let r=0;const i=t.map(e=>r+=e);if(r!==s.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${s.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), `+"and the TensorArray is not marked as dynamically resizeable");const n=0===r?0:s.size/r,a=[];(0,e.tidy)(()=>{s=(0,e.reshape)(s,[1,r,n]);for(let r=0;r<t.length;++r){const h=[0,0===r?0:i[r-1],0],o=[1,t[r],n];a[r]=(0,e.reshape)((0,e.slice)(s,h,o),this.elementShape)}return a});const h=[];for(let e=0;e<t.length;e++)h[e]=e;this.writeMany(h,a)}}exports.TensorArray=s;
},{"@tensorflow/tfjs-core":"tKjQ","./tensor_utils":"CqqQ"}],"LWO8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromTensor=n,exports.reserve=r,exports.scatter=i,exports.split=h,exports.TensorList=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./tensor_utils");class s{constructor(s,n,r,i=-1){this.tensors=s,this.elementShape=n,this.elementDtype=r,null!=s&&s.forEach(s=>{if(r!==s.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${s.dtype}`);(0,t.assertShapesMatchAllowUndefinedSize)(n,s.shape,"TensorList shape mismatch: "),(0,e.keep)(s)}),this.idTensor=(0,e.scalar)(0),this.maxNumElements=i,(0,e.keep)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new s([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(s,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(-1!==r&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);return(0,t.assertShapesMatchAllowUndefinedSize)(s,this.elementShape,"TensorList shape mismatch: "),(0,e.tidy)(()=>{const t=this.tensors.map(t=>(0,e.reshape)(t,s));return(0,e.stack)(t,0)})}popBack(s,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const r=this.tensors.pop();return(0,t.assertShapesMatchAllowUndefinedSize)(r.shape,s,"TensorList shape mismatch: "),(0,e.reshape)(r,s)}pushBack(s){if(s.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${s.dtype}, but list elements ${this.elementDtype}`);if((0,t.assertShapesMatchAllowUndefinedSize)(s.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");(0,e.keep)(s),this.tensors.push(s)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);this.tensors.length=e}getItem(e,s,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);return(0,t.assertShapesMatchAllowUndefinedSize)(this.tensors[e].shape,s,"TensorList shape mismatch: "),this.tensors[e]}setItem(s,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(s<0||-1!==this.maxNumElements&&s>=this.maxNumElements)throw new Error(`Trying to set element ${s} in a list with max ${this.maxNumElements} elements.`);(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,n.shape,"TensorList shape mismatch: "),(0,e.keep)(n),this.tensors[s]=n}gather(s,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,r,"TensorList shape mismatch: "),0===(s=s.slice(0,this.size())).length?(0,e.tensor)([],[0].concat(this.elementShape)):(0,e.tidy)(()=>{const t=s.map(t=>(0,e.reshape)(this.tensors[t],r));return(0,e.stack)(t,0)})}concat(s,n){if(s&&s!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${s}`);return(0,t.assertShapesMatchAllowUndefinedSize)(this.elementShape,n,"TensorList shape mismatch: "),0===this.size()?(0,e.tensor)([],[0].concat(this.elementShape)):(0,e.tidy)(()=>{const t=this.tensors.map(t=>(0,e.reshape)(t,n));return(0,e.concat)(t,0)})}}function n(n,r,i){const h=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==i)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${i}`);const o=n.shape.slice(1);(0,t.assertShapesMatchAllowUndefinedSize)(o,r,"TensorList shape mismatch: ");const a=(0,e.unstack)(n);return new s(a,r,h)}function r(e,t,n){return new s([],e,t,n)}function i(t,n,r,i){if(n.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${t.shape[0]}`);const h=Math.max(...n);if(null!=i&&-1!==i&&h>=i)throw new Error(`Max index must be < array size (${h}  vs. ${i})`);const o=new s([],r,t.dtype,i),a=(0,e.unstack)(t,0);return n.forEach((e,t)=>{o.setItem(e,a[t])}),o}function h(t,n,r){let i=0;const h=n.map(e=>i+=e);if(i!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${i}, and tensor's shape is: ${t.shape}`);const o=0===i?0:t.size/i,a=(0,e.tidy)(()=>{const s=[];t=(0,e.reshape)(t,[1,i,o]);for(let i=0;i<n.length;++i){const a=[0,0===i?0:h[i-1],0],l=[1,n[i],o];s[i]=(0,e.reshape)((0,e.slice)(t,a,l),r)}return t.dispose(),s}),l=new s([],r,t.dtype,n.length);for(let e=0;e<a.length;e++)l.setItem(e,a[e]);return l}exports.TensorList=s;
},{"@tensorflow/tfjs-core":"tKjQ","./tensor_utils":"CqqQ"}],"pl7c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../../executor/tensor_array"),r=require("../../executor/tensor_list"),t=require("./utils");const n=async(n,s,o)=>{switch(n.op){case"If":case"StatelessIf":{const e=(0,t.getParamValue)("thenBranch",n,s,o),a=(0,t.getParamValue)("elseBranch",n,s,o),r=(0,t.getParamValue)("cond",n,s,o),i=(0,t.getParamValue)("args",n,s,o);return(await r.data())[0]?o.functionMap[e].executeFunctionAsync(i,o.tensorArrayMap,o.tensorListMap):o.functionMap[a].executeFunctionAsync(i,o.tensorArrayMap,o.tensorListMap)}case"While":case"StatelessWhile":{const e=(0,t.getParamValue)("body",n,s,o),a=(0,t.getParamValue)("cond",n,s,o),r=(0,t.getParamValue)("args",n,s,o),i=await o.functionMap[a].executeFunctionAsync(r,o.tensorArrayMap,o.tensorListMap),u=r.map(e=>e.id);let c=await i[0].data();i.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||e.dispose()});let l=r;for(;c[0];){const r=l,t=(l=await o.functionMap[e].executeFunctionAsync(l,o.tensorArrayMap,o.tensorListMap)).map(e=>e.id);r.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});const n=await o.functionMap[a].executeFunctionAsync(l,o.tensorArrayMap,o.tensorListMap);c=await n[0].data(),n.forEach(e=>{e.kept||-1!==u.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return l}case"LoopCond":{const e=(0,t.getParamValue)("pred",n,s,o);return[(0,t.cloneTensor)(e)]}case"Switch":{const e=(0,t.getParamValue)("pred",n,s,o);let a=(0,t.getParamValue)("data",n,s,o);return a.kept||(a=(0,t.cloneTensor)(a)),(await e.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{const e=n.inputNames.find(e=>void 0!==(0,t.getTensor)(e,s,o));if(e){const a=(0,t.getTensor)(e,s,o);return[(0,t.cloneTensor)(a)]}return}case"Enter":{const e=(0,t.getParamValue)("frameName",n,s,o),a=(0,t.getParamValue)("tensor",n,s,o);return o.enterFrame(e),[(0,t.cloneTensor)(a)]}case"Exit":{const e=(0,t.getParamValue)("tensor",n,s,o);return o.exitFrame(),[(0,t.cloneTensor)(e)]}case"NextIteration":{const e=(0,t.getParamValue)("tensor",n,s,o);return o.nextIteration(),[(0,t.cloneTensor)(e)]}case"TensorArrayV3":{const r=(0,t.getParamValue)("size",n,s,o),i=(0,t.getParamValue)("dtype",n,s,o),u=(0,t.getParamValue)("elementShape",n,s,o),c=(0,t.getParamValue)("dynamicSize",n,s,o),l=(0,t.getParamValue)("clearAfterRead",n,s,o),m=(0,t.getParamValue)("identicalElementShapes",n,s,o),d=(0,t.getParamValue)("name",n,s,o),g=new a.TensorArray(d,i,r,u,m,c,l);return o.addTensorArray(g),[g.idTensor,(0,e.scalar)(1)]}case"TensorArrayWriteV3":{const e=(0,t.getParamValue)("tensorArrayId",n,s,o),a=(0,t.getParamValue)("index",n,s,o),r=(0,t.getParamValue)("tensor",n,s,o),i=o.getTensorArray(e.id);return i.write(a,r),[i.idTensor]}case"TensorArrayReadV3":{const e=(0,t.getParamValue)("tensorArrayId",n,s,o),a=(0,t.getParamValue)("index",n,s,o);return[o.getTensorArray(e.id).read(a)]}case"TensorArrayGatherV3":{const e=(0,t.getParamValue)("tensorArrayId",n,s,o),a=(0,t.getParamValue)("indices",n,s,o),r=(0,t.getParamValue)("dtype",n,s,o);return[o.getTensorArray(e.id).gather(a,r)]}case"TensorArrayScatterV3":{const e=(0,t.getParamValue)("tensorArrayId",n,s,o),a=(0,t.getParamValue)("indices",n,s,o),r=(0,t.getParamValue)("tensor",n,s,o),i=o.getTensorArray(e.id);return i.scatter(a,r),[i.idTensor]}case"TensorArrayConcatV3":{const e=(0,t.getParamValue)("tensorArrayId",n,s,o),a=o.getTensorArray(e.id),r=(0,t.getParamValue)("dtype",n,s,o);return[a.concat(r)]}case"TensorArraySplitV3":{const e=(0,t.getParamValue)("tensorArrayId",n,s,o),a=(0,t.getParamValue)("tensor",n,s,o),r=(0,t.getParamValue)("lengths",n,s,o),i=o.getTensorArray(e.id);return i.split(r,a),[i.idTensor]}case"TensorArraySizeV3":{const a=(0,t.getParamValue)("tensorArrayId",n,s,o),r=o.getTensorArray(a.id);return[(0,e.scalar)(r.size(),"int32")]}case"TensorArrayCloseV3":{const e=(0,t.getParamValue)("tensorArrayId",n,s,o),a=o.getTensorArray(e.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{const e=(0,t.getParamValue)("tensorListId",n,s,o),a=(0,t.getParamValue)("index",n,s,o),r=(0,t.getParamValue)("tensor",n,s,o),i=o.getTensorList(e.id);return i.setItem(a,r),[i.idTensor]}case"TensorListGetItem":{const e=(0,t.getParamValue)("tensorListId",n,s,o),a=(0,t.getParamValue)("index",n,s,o),r=(0,t.getParamValue)("elementShape",n,s,o),i=(0,t.getParamValue)("elementDType",n,s,o);return[o.getTensorList(e.id).getItem(a,r,i)]}case"TensorListScatterV2":case"TensorListScatter":{const e=(0,t.getParamValue)("indices",n,s,o),a=(0,t.getParamValue)("tensor",n,s,o),i=(0,t.getParamValue)("elementShape",n,s,o),u=(0,t.getParamValue)("numElements",n,s,o),c=(0,r.scatter)(a,e,i,u);return o.addTensorList(c),[c.idTensor]}case"TensorListReserve":{const e=(0,t.getParamValue)("elementShape",n,s,o),a=(0,t.getParamValue)("elementDType",n,s,o),i=(0,t.getParamValue)("numElements",n,s,o),u=(0,r.reserve)(e,a,i);return o.addTensorList(u),[u.idTensor]}case"TensorListGather":{const e=(0,t.getParamValue)("tensorListId",n,s,o),a=(0,t.getParamValue)("indices",n,s,o),r=(0,t.getParamValue)("elementShape",n,s,o),i=(0,t.getParamValue)("elementDType",n,s,o);return[o.getTensorList(e.id).gather(a,i,r)]}case"TensorListStack":{const e=(0,t.getParamValue)("tensorListId",n,s,o),a=(0,t.getParamValue)("elementShape",n,s,o),r=(0,t.getParamValue)("elementDType",n,s,o),i=(0,t.getParamValue)("numElements",n,s,o);return[o.getTensorList(e.id).stack(a,r,i)]}case"TensorListFromTensor":{const e=(0,t.getParamValue)("tensor",n,s,o),a=(0,t.getParamValue)("elementShape",n,s,o),i=(0,t.getParamValue)("elementDType",n,s,o),u=(0,r.fromTensor)(e,a,i);return o.addTensorList(u),[u.idTensor]}case"TensorListConcat":{const e=(0,t.getParamValue)("tensorListId",n,s,o),a=o.getTensorList(e.id),r=(0,t.getParamValue)("dtype",n,s,o),i=(0,t.getParamValue)("elementShape",n,s,o);return[a.concat(r,i)]}case"TensorListPushBack":{const e=(0,t.getParamValue)("tensorListId",n,s,o),a=(0,t.getParamValue)("tensor",n,s,o),r=o.getTensorList(e.id);return r.pushBack(a),[r.idTensor]}case"TensorListPopBack":{const e=(0,t.getParamValue)("tensorListId",n,s,o),a=(0,t.getParamValue)("elementShape",n,s,o),r=(0,t.getParamValue)("elementDType",n,s,o);return[o.getTensorList(e.id).popBack(a,r)]}case"TensorListSplit":{const e=(0,t.getParamValue)("tensor",n,s,o),a=(0,t.getParamValue)("elementShape",n,s,o),i=(0,t.getParamValue)("lengths",n,s,o),u=(0,r.split)(e,i,a);return o.addTensorList(u),[u.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};exports.executeOp=n;const s="control";exports.CATEGORY=s;
},{"@tensorflow/tfjs-core":"tKjQ","../../executor/tensor_array":"R7cE","../../executor/tensor_list":"LWO8","./utils":"AzqT"}],"DXkW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t();if(a&&a.has(e))return a.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=o?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s]}return r.default=e,a&&a.set(e,r),r}function o(e,t,r){const[o,s]=(0,a.getParamValue)("fusedOps",e,t,r),n="biasadd"===o,i="prelu"===s,u="fusedbatchnorm"===o,l=(0,a.getParamValue)("numArgs",e,t,r);if(n){if(i&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const d=(0,a.getParamValue)("strides",e,t,r),g=(0,a.getPadding)(e,t,r),m=(0,a.getParamValue)("dataFormat",e,t,r).toUpperCase(),P=(0,a.getParamValue)("dilations",e,t,r),[p,c]=(0,a.getParamValue)("args",e,t,r);return{stride:d,pad:g,dataFormat:m,dilations:P,biasArg:p,preluArg:c,activationFunc:s}}const s=(t,r,s)=>{switch(t.op){case"Conv1D":{const o=(0,a.getParamValue)("stride",t,r,s),n=(0,a.getParamValue)("pad",t,r,s),i=(0,a.getParamValue)("dataFormat",t,r,s).toUpperCase(),u=(0,a.getParamValue)("dilation",t,r,s);return[e.conv1d((0,a.getParamValue)("x",t,r,s),(0,a.getParamValue)("filter",t,r,s),o,n,i,u)]}case"Conv2D":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getPadding)(t,r,s),i=(0,a.getParamValue)("dataFormat",t,r,s).toUpperCase(),u=(0,a.getParamValue)("dilations",t,r,s);return[e.conv2d((0,a.getParamValue)("x",t,r,s),(0,a.getParamValue)("filter",t,r,s),[o[1],o[2]],n,i,[u[1],u[2]])]}case"_FusedConv2D":{const{stride:n,pad:i,dataFormat:u,dilations:l,biasArg:d,preluArg:g,activationFunc:m}=o(t,r,s);return[e.fused.conv2d({x:(0,a.getParamValue)("x",t,r,s),filter:(0,a.getParamValue)("filter",t,r,s),strides:[n[1],n[2]],pad:i,dataFormat:u,dilations:[l[1],l[2]],bias:d,activation:m,preluActivationWeights:g})]}case"FusedDepthwiseConv2dNative":{const{stride:n,pad:i,dataFormat:u,dilations:l,biasArg:d,preluArg:g,activationFunc:m}=o(t,r,s);return[e.fused.depthwiseConv2d({x:(0,a.getParamValue)("x",t,r,s),filter:(0,a.getParamValue)("filter",t,r,s),strides:[n[1],n[2]],pad:i,dataFormat:u,dilations:[l[1],l[2]],bias:d,activation:m,preluActivationWeights:g})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const o=(0,a.getParamValue)("outputShape",t,r,s),n=(0,a.getParamValue)("strides",t,r,s),i=(0,a.getPadding)(t,r,s);return[e.conv2dTranspose((0,a.getParamValue)("x",t,r,s),(0,a.getParamValue)("filter",t,r,s),o,[n[1],n[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getPadding)(t,r,s),i=(0,a.getParamValue)("dilations",t,r,s),u=(0,a.getParamValue)("dataFormat",t,r,s).toUpperCase();return[e.depthwiseConv2d((0,a.getParamValue)("input",t,r,s),(0,a.getParamValue)("filter",t,r,s),[o[1],o[2]],n,u,[i[1],i[2]])]}case"Conv3D":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getParamValue)("pad",t,r,s),i=(0,a.getParamValue)("dataFormat",t,r,s).toUpperCase(),u=(0,a.getParamValue)("dilations",t,r,s);return[e.conv3d((0,a.getParamValue)("x",t,r,s),(0,a.getParamValue)("filter",t,r,s),[o[1],o[2],o[3]],n,i,[u[1],u[2],u[3]])]}case"AvgPool":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getParamValue)("pad",t,r,s),i=(0,a.getParamValue)("kernelSize",t,r,s);return[e.avgPool((0,a.getParamValue)("x",t,r,s),[i[1],i[2]],[o[1],o[2]],n)]}case"MaxPool":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getParamValue)("pad",t,r,s),i=(0,a.getParamValue)("kernelSize",t,r,s);return[e.maxPool((0,a.getParamValue)("x",t,r,s),[i[1],i[2]],[o[1],o[2]],n)]}case"MaxPoolWithArgmax":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getParamValue)("pad",t,r,s),i=(0,a.getParamValue)("kernelSize",t,r,s),u=(0,a.getParamValue)("includeBatchInIndex",t,r,s),{result:l,indexes:d}=e.maxPoolWithArgmax((0,a.getParamValue)("x",t,r,s),[i[1],i[2]],[o[1],o[2]],n,u);return[l,d]}case"AvgPool3D":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getParamValue)("pad",t,r,s),i=(0,a.getParamValue)("kernelSize",t,r,s);return[e.avgPool3d((0,a.getParamValue)("x",t,r,s),[i[1],i[2],i[3]],[o[1],o[2],o[3]],n)]}case"MaxPool3D":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getParamValue)("pad",t,r,s),i=(0,a.getParamValue)("kernelSize",t,r,s);return[e.maxPool3d((0,a.getParamValue)("x",t,r,s),[i[1],i[2],i[3]],[o[1],o[2],o[3]],n)]}case"Dilation2D":{const o=(0,a.getParamValue)("strides",t,r,s),n=(0,a.getParamValue)("pad",t,r,s),i=(0,a.getParamValue)("dilations",t,r,s),u=o[1],l=o[2],d=i[1],g=i[2];return[e.dilation2d((0,a.getParamValue)("x",t,r,s),(0,a.getParamValue)("filter",t,r,s),[u,l],n,[d,g],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=s;const n="convolution";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"y7Ce":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t();if(a&&a.has(e))return a.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=u?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}const u=(t,r,u)=>{switch(t.op){case"Fill":{const n=(0,a.getParamValue)("shape",t,r,u),o=(0,a.getParamValue)("dtype",t,r,u),l=(0,a.getParamValue)("value",t,r,u);return[e.fill(n,l,o)]}case"LinSpace":{const n=(0,a.getParamValue)("start",t,r,u),o=(0,a.getParamValue)("stop",t,r,u),l=(0,a.getParamValue)("num",t,r,u);return[e.linspace(n,o,l)]}case"Multinomial":{const n=(0,a.getParamValue)("logits",t,r,u),o=(0,a.getParamValue)("numSamples",t,r,u),l=(0,a.getParamValue)("seed",t,r,u);return[e.multinomial(n,o,l)]}case"OneHot":{const n=(0,a.getParamValue)("indices",t,r,u),o=(0,a.getParamValue)("depth",t,r,u),l=(0,a.getParamValue)("onValue",t,r,u),s=(0,a.getParamValue)("offValue",t,r,u);return[e.oneHot(n,o,l,s)]}case"Ones":return[e.ones((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"OnesLike":return[e.onesLike((0,a.getParamValue)("x",t,r,u))];case"RandomUniform":return[e.randomUniform((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("minval",t,r,u),(0,a.getParamValue)("maxval",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"Range":{const n=(0,a.getParamValue)("start",t,r,u),o=(0,a.getParamValue)("stop",t,r,u),l=(0,a.getParamValue)("step",t,r,u);return[e.range(n,o,l,(0,a.getParamValue)("dtype",t,r,u))]}case"TruncatedNormal":{const n=(0,a.getParamValue)("shape",t,r,u),o=(0,a.getParamValue)("mean",t,r,u),l=(0,a.getParamValue)("stdDev",t,r,u),s=(0,a.getParamValue)("seed",t,r,u);return[e.truncatedNormal(n,o,l,(0,a.getParamValue)("dtype",t,r,u),s)]}case"Zeros":return[e.zeros((0,a.getParamValue)("shape",t,r,u),(0,a.getParamValue)("dtype",t,r,u))];case"ZerosLike":return[e.zerosLike((0,a.getParamValue)("x",t,r,u))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=u;const n="creation";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"RJKi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=s?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(o,a,n):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}function s(e,r,o){return{boxes:(0,t.getParamValue)("boxes",e,r,o),scores:(0,t.getParamValue)("scores",e,r,o),maxOutputSize:(0,t.getParamValue)("maxOutputSize",e,r,o),iouThreshold:(0,t.getParamValue)("iouThreshold",e,r,o),scoreThreshold:(0,t.getParamValue)("scoreThreshold",e,r,o),softNmsSigma:(0,t.getParamValue)("softNmsSigma",e,r,o)}}const a=async(r,o,a)=>{switch(r.op){case"NonMaxSuppressionV5":{const{boxes:t,scores:n,maxOutputSize:u,iouThreshold:i,scoreThreshold:c,softNmsSigma:p}=s(r,o,a),l=await e.image.nonMaxSuppressionWithScoreAsync(t,n,u,i,c,p);return[l.selectedIndices,l.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:n,scores:u,maxOutputSize:i,iouThreshold:c,scoreThreshold:p}=s(r,o,a),l=(0,t.getParamValue)("padToMaxOutputSize",r,o,a),d=await e.image.nonMaxSuppressionPaddedAsync(n,u,i,c,p,l);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:t,scores:n,maxOutputSize:u,iouThreshold:i,scoreThreshold:c}=s(r,o,a);return[await e.image.nonMaxSuppressionAsync(t,n,u,i,c)]}case"Where":{const s=e.cast((0,t.getParamValue)("condition",r,o,a),"bool"),n=[await e.whereAsync(s)];return s.dispose(),n}case"ListDiff":return e.setdiff1dAsync((0,t.getParamValue)("x",r,o,a),(0,t.getParamValue)("y",r,o,a));default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=a;const n="dynamic";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"yW03":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}const n=(r,o,n)=>{switch(r.op){case"TopKV2":{const u=(0,t.getParamValue)("x",r,o,n),a=(0,t.getParamValue)("k",r,o,n),s=(0,t.getParamValue)("sorted",r,o,n),i=e.topk(u,a,s);return[i.values,i.indices]}case"Unique":{const u=(0,t.getParamValue)("x",r,o,n),a=e.unique(u);return[a.values,a.indices]}case"UniqueV2":{const u=(0,t.getParamValue)("x",r,o,n),a=(0,t.getParamValue)("axis",r,o,n),s=e.unique(u,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const u="evaluation";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"GTlu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),r=require("./utils");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}const n=(t,a,n)=>{switch(t.op){case"Const":return a[t.name];case"PlaceholderWithDefault":const o=(0,r.getParamValue)("default",t,a,n);return[(0,r.getTensor)(t.name,a,n)||o];case"Placeholder":return[(0,r.getTensor)(t.name,a,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const e=(0,r.getParamValue)("x",t,a,n);return[(0,r.cloneTensor)(e)]}case"IdentityN":return(0,r.getParamValue)("x",t,a,n).map(e=>(0,r.cloneTensor)(e));case"Snapshot":const s=(0,r.getParamValue)("x",t,a,n);return[(0,r.cloneTensor)(s)];case"Shape":return[e.tensor1d((0,r.getParamValue)("x",t,a,n).shape,"int32")];case"ShapeN":return(0,r.getParamValue)("x",t,a,n).map(r=>e.tensor1d(r.shape));case"Size":return[e.scalar((0,r.getParamValue)("x",t,a,n).size,"int32")];case"Rank":return[e.scalar((0,r.getParamValue)("x",t,a,n).rank,"int32")];case"NoOp":return[e.scalar(1)];case"Print":const u=(0,r.getParamValue)("x",t,a,n),c=(0,r.getParamValue)("data",t,a,n),l=(0,r.getParamValue)("message",t,a,n),p=(0,r.getParamValue)("summarize",t,a,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let e=0;e<c.length;e++)console.log(Array.prototype.slice.call(c[e].dataSync()).slice(0,p));return[u];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=n;const o="graph";exports.CATEGORY="graph";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"XQDv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HashTable=void 0;var e=require("@tensorflow/tfjs-core");class t{constructor(t,s){this.keyDType=t,this.valueDType=s,this.handle=(0,e.scalar)(0),this.tensorMap=new Map,(0,e.keep)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}async import(t,s){this.checkKeyAndValueTensor(t,s);const r=await t.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),(0,e.tidy)(()=>{const t=(0,e.unstack)(s),n=r.length,a=t.length;e.util.assert(n===a,()=>"The number of elements doesn't match, keys has "+`${n} elements, the values has ${a} `+"elements.");for(let s=0;s<n;s++){const n=r[s],a=t[s];(0,e.keep)(a),this.tensorMap.set(n,a)}return this.handle})}async find(t,s){this.checkKeyAndValueTensor(t,s);const r=await t.data();return(0,e.tidy)(()=>{const t=[];for(let e=0;e<r.length;e++){const n=r[e],a=this.findWithDefault(n,s);t.push(a)}return(0,e.stack)(t)})}findWithDefault(e,t){const s=this.tensorMap.get(e);return null!=s?s:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got `+`${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got `+`${t.dtype}`)}}exports.HashTable=t;
},{"@tensorflow/tfjs-core":"tKjQ"}],"Bx0Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=require("../../executor/hash_table"),a=require("./utils");const t=async(t,r,l,s)=>{switch(t.op){case"HashTable":case"HashTableV2":{const o=(0,a.getParamValue)("keyDType",t,r,l),u=(0,a.getParamValue)("valueDType",t,r,l),p=new e.HashTable(o,u);return s.addHashTable(t.name,p),[p.handle]}case"LookupTableImport":case"LookupTableImportV2":{const e=(0,a.getParamValue)("tableHandle",t,r,l,s),o=(0,a.getParamValue)("keys",t,r,l),u=(0,a.getParamValue)("values",t,r,l),p=s.getHashTableById(e.id);return[await p.import(o,u)]}case"LookupTableFind":case"LookupTableFindV2":{const e=(0,a.getParamValue)("tableHandle",t,r,l,s),o=(0,a.getParamValue)("keys",t,r,l),u=(0,a.getParamValue)("defaultValue",t,r,l),p=s.getHashTableById(e.id);return[await p.find(o,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=t;const r="hash_table";exports.CATEGORY=r;
},{"../../executor/hash_table":"XQDv","./utils":"AzqT"}],"lklz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=a(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),r=require("./utils");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(a,i,n):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}const o=(t,a,o)=>{switch(t.op){case"ResizeBilinear":{const i=(0,r.getParamValue)("images",t,a,o),n=(0,r.getParamValue)("size",t,a,o),s=(0,r.getParamValue)("alignCorners",t,a,o);return[e.image.resizeBilinear(i,[n[0],n[1]],s)]}case"ResizeNearestNeighbor":{const i=(0,r.getParamValue)("images",t,a,o),n=(0,r.getParamValue)("size",t,a,o),s=(0,r.getParamValue)("alignCorners",t,a,o);return[e.image.resizeNearestNeighbor(i,[n[0],n[1]],s)]}case"CropAndResize":{const i=(0,r.getParamValue)("image",t,a,o),n=(0,r.getParamValue)("boxes",t,a,o),s=(0,r.getParamValue)("boxInd",t,a,o),u=(0,r.getParamValue)("cropSize",t,a,o),l=(0,r.getParamValue)("method",t,a,o),p=(0,r.getParamValue)("extrapolationValue",t,a,o);return[e.image.cropAndResize(i,n,s,u,l,p)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const i="image";exports.CATEGORY="image";
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"WR1C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r();if(a&&a.has(e))return a.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var o=u?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(t,l,o):t[l]=e[l]}return t.default=e,a&&a.set(e,t),t}const u=(r,t,u)=>{switch(r.op){case"Equal":return[e.equal((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"NotEqual":return[e.notEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Greater":return[e.greater((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"GreaterEqual":return[e.greaterEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Less":return[e.less((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LessEqual":return[e.lessEqual((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LogicalAnd":return[e.logicalAnd((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"LogicalNot":return[e.logicalNot((0,a.getParamValue)("a",r,t,u))];case"LogicalOr":return[e.logicalOr((0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];case"Select":case"SelectV2":return[e.where((0,a.getParamValue)("condition",r,t,u),(0,a.getParamValue)("a",r,t,u),(0,a.getParamValue)("b",r,t,u))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const l="logical";exports.CATEGORY=l;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"VTuv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=s?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}const s=(a,r,s)=>{switch(a.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[e.matMul((0,t.getParamValue)("a",a,r,s),(0,t.getParamValue)("b",a,r,s),(0,t.getParamValue)("transposeA",a,r,s),(0,t.getParamValue)("transposeB",a,r,s))];case"Transpose":return[e.transpose((0,t.getParamValue)("x",a,r,s),(0,t.getParamValue)("perm",a,r,s))];case"_FusedMatMul":const[u,o]=(0,t.getParamValue)("fusedOps",a,r,s),n="biasadd"===u,i="prelu"===o,l=(0,t.getParamValue)("numArgs",a,r,s);if(n){if(i&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[p,c]=(0,t.getParamValue)("args",a,r,s);return[e.fused.matMul({a:(0,t.getParamValue)("a",a,r,s),b:(0,t.getParamValue)("b",a,r,s),transposeA:(0,t.getParamValue)("transposeA",a,r,s),transposeB:(0,t.getParamValue)("transposeB",a,r,s),bias:p,activation:o,preluActivationWeights:c})];default:throw TypeError(`Node type ${a.op} is not implemented`)}};exports.executeOp=s;const u="matrices";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"CRkV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t();if(a&&a.has(e))return a.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,a&&a.set(e,r),r}const o=(t,r,o)=>{switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[e.batchNorm((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("mean",t,r,o),(0,a.getParamValue)("variance",t,r,o),(0,a.getParamValue)("offset",t,r,o),(0,a.getParamValue)("scale",t,r,o),(0,a.getParamValue)("epsilon",t,r,o))];case"LRN":return[e.localResponseNormalization((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("radius",t,r,o),(0,a.getParamValue)("bias",t,r,o),(0,a.getParamValue)("alpha",t,r,o),(0,a.getParamValue)("beta",t,r,o))];case"Softmax":return[e.softmax((0,a.getParamValue)("x",t,r,o))];case"LogSoftmax":return[e.logSoftmax((0,a.getParamValue)("x",t,r,o))];case"SparseToDense":return[e.sparseToDense((0,a.getParamValue)("sparseIndices",t,r,o),(0,a.getParamValue)("outputShape",t,r,o),(0,a.getParamValue)("sparseValues",t,r,o),(0,a.getParamValue)("defaultValue",t,r,o))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const u="normalization";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"CxNH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=t(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r();if(a&&a.has(e))return a.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=u?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(t,s,n):t[s]=e[s]}return t.default=e,a&&a.set(e,t),t}const u=(r,t,u)=>{switch(r.op){case"Max":{const s=(0,a.getParamValue)("axis",r,t,u),n=(0,a.getParamValue)("keepDims",r,t,u);return[e.max((0,a.getParamValue)("x",r,t,u),s,n)]}case"Mean":{const s=(0,a.getParamValue)("axis",r,t,u),n=(0,a.getParamValue)("keepDims",r,t,u);return[e.mean((0,a.getParamValue)("x",r,t,u),s,n)]}case"Min":{const s=(0,a.getParamValue)("axis",r,t,u),n=(0,a.getParamValue)("keepDims",r,t,u);return[e.min((0,a.getParamValue)("x",r,t,u),s,n)]}case"Sum":{const s=(0,a.getParamValue)("axis",r,t,u),n=(0,a.getParamValue)("keepDims",r,t,u);return[e.sum((0,a.getParamValue)("x",r,t,u),s,n)]}case"All":{const s=(0,a.getParamValue)("axis",r,t,u),n=(0,a.getParamValue)("keepDims",r,t,u);return[e.all((0,a.getParamValue)("x",r,t,u),s,n)]}case"Any":{const s=(0,a.getParamValue)("axis",r,t,u),n=(0,a.getParamValue)("keepDims",r,t,u);return[e.any((0,a.getParamValue)("x",r,t,u),s,n)]}case"ArgMax":{const s=(0,a.getParamValue)("axis",r,t,u);return[e.argMax((0,a.getParamValue)("x",r,t,u),s)]}case"ArgMin":{const s=(0,a.getParamValue)("axis",r,t,u);return[e.argMin((0,a.getParamValue)("x",r,t,u),s)]}case"Prod":{const s=(0,a.getParamValue)("axis",r,t,u),n=(0,a.getParamValue)("keepDims",r,t,u);return[e.prod((0,a.getParamValue)("x",r,t,u),s,n)]}case"Cumsum":{const s=(0,a.getParamValue)("axis",r,t,u),n=(0,a.getParamValue)("exclusive",r,t,u),o=(0,a.getParamValue)("reverse",r,t,u);return[e.cumsum((0,a.getParamValue)("x",r,t,u),s,n,o)]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const s="reduction";exports.CATEGORY=s;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"jhyE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=require("@tensorflow/tfjs-core"),a=s(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=r();if(a&&a.has(e))return a.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var n=s?Object.getOwnPropertyDescriptor(e,u):null;n&&(n.get||n.set)?Object.defineProperty(t,u,n):t[u]=e[u]}return t.default=e,a&&a.set(e,t),t}const u=(r,s,u)=>{switch(r.op){case"ConcatV2":case"Concat":{const e=(0,t.getParamValue)("n",r,s,u),n=(0,t.getParamValue)("axis",r,s,u);let l=(0,t.getParamValue)("tensors",r,s,u);return l=l.slice(0,e),[a.concat(l,n)]}case"GatherV2":case"Gather":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("x",r,s,u),l=(0,t.getParamValue)("indices",r,s,u);return[a.gather(n,a.cast(l,"int32"),e)]}case"ReverseV2":case"Reverse":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("x",r,s,u);return[a.reverse(n,e)]}case"Slice":{const e=(0,t.getParamValue)("begin",r,s,u),n=(0,t.getParamValue)("size",r,s,u);return[a.slice((0,t.getParamValue)("x",r,s,u),e,n)]}case"StridedSlice":{const e=(0,t.getParamValue)("begin",r,s,u),n=(0,t.getParamValue)("end",r,s,u),l=(0,t.getParamValue)("strides",r,s,u),c=(0,t.getParamValue)("beginMask",r,s,u),o=(0,t.getParamValue)("endMask",r,s,u),i=(0,t.getParamValue)("ellipsisMask",r,s,u),p=(0,t.getParamValue)("newAxisMask",r,s,u),g=(0,t.getParamValue)("shrinkAxisMask",r,s,u),P=(0,t.getParamValue)("x",r,s,u);return[a.stridedSlice(P,e,n,l,c,o,i,p,g)]}case"Pack":return(0,e.tidy)(()=>{const n=(0,t.getParamValue)("axis",r,s,u),l=(0,t.getParamValue)("tensors",r,s,u),c=l[0].shape,o=a.squeeze(l[0]).shape,i=l.map(t=>{const r=e.util.arraysEqual(t.shape,c);if(!r&&!e.util.arraysEqual(a.squeeze(t).shape,o))throw new Error("the input tensors shape does not match");return r?t:a.reshape(t,c)});return[a.stack(i,n)]});case"Unpack":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("tensor",r,s,u);return a.unstack(n,e)}case"Tile":{const e=(0,t.getParamValue)("reps",r,s,u);return[a.tile((0,t.getParamValue)("x",r,s,u),e)]}case"Split":case"SplitV":{const e=(0,t.getParamValue)("axis",r,s,u),n=(0,t.getParamValue)("numOrSizeSplits",r,s,u),l=(0,t.getParamValue)("x",r,s,u);return a.split(l,n,e)}case"ScatterNd":{const e=(0,t.getParamValue)("indices",r,s,u),n=(0,t.getParamValue)("values",r,s,u),l=(0,t.getParamValue)("shape",r,s,u);return[a.scatterND(e,n,l)]}case"GatherNd":{const e=(0,t.getParamValue)("x",r,s,u),n=(0,t.getParamValue)("indices",r,s,u);return[a.gatherND(e,n)]}case"SparseToDense":{const e=(0,t.getParamValue)("sparseIndices",r,s,u),n=(0,t.getParamValue)("outputShape",r,s,u),l=(0,t.getParamValue)("sparseValues",r,s,u),c=(0,t.getParamValue)("defaultValue",r,s,u);return[a.sparseToDense(e,l,n,l.dtype===c.dtype?c:a.cast(c,l.dtype))]}default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=u;const n="slice_join";exports.CATEGORY=n;
},{"@tensorflow/tfjs-core":"tKjQ","@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"ygRt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=o(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),t=require("./utils");function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}const n=(r,o,n)=>{switch(r.op){case"FFT":return[e.fft((0,t.getParamValue)("x",r,o,n))];case"IFFT":return[e.ifft((0,t.getParamValue)("x",r,o,n))];case"RFFT":return[e.rfft((0,t.getParamValue)("x",r,o,n))];case"IRFFT":return[e.irfft((0,t.getParamValue)("x",r,o,n))];default:throw TypeError(`Node type ${r.op} is not implemented`)}};exports.executeOp=n;const u="spectral";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"iwMG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CATEGORY=exports.executeOp=void 0;var e=r(require("@tensorflow/tfjs-core/dist/ops/ops_for_converter")),a=require("./utils");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=t();if(a&&a.has(e))return a.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,a&&a.set(e,r),r}const o=(t,r,o)=>{switch(t.op){case"Cast":return[e.cast((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("dtype",t,r,o))];case"ExpandDims":{const u=(0,a.getParamValue)("axis",t,r,o);return[e.expandDims((0,a.getParamValue)("x",t,r,o),u)]}case"Squeeze":{const u=(0,a.getParamValue)("axis",t,r,o);return[e.squeeze((0,a.getParamValue)("x",t,r,o),u)]}case"Reshape":return[e.reshape((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("shape",t,r,o))];case"MirrorPad":return[e.mirrorPad((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("padding",t,r,o),(0,a.getParamValue)("mode",t,r,o))];case"PadV2":case"Pad":return[e.pad((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("padding",t,r,o),(0,a.getParamValue)("constantValue",t,r,o))];case"SpaceToBatchND":{const u=(0,a.getParamValue)("blockShape",t,r,o),s=(0,a.getParamValue)("paddings",t,r,o);return[e.spaceToBatchND((0,a.getParamValue)("x",t,r,o),u,s)]}case"BatchToSpaceND":{const u=(0,a.getParamValue)("blockShape",t,r,o),s=(0,a.getParamValue)("crops",t,r,o);return[e.batchToSpaceND((0,a.getParamValue)("x",t,r,o),u,s)]}case"DepthToSpace":{const u=(0,a.getParamValue)("blockSize",t,r,o),s=(0,a.getParamValue)("dataFormat",t,r,o).toUpperCase();return[e.depthToSpace((0,a.getParamValue)("x",t,r,o),u,s)]}case"BroadcastTo":return[e.broadcastTo((0,a.getParamValue)("x",t,r,o),(0,a.getParamValue)("shape",t,r,o))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};exports.executeOp=o;const u="transformation";exports.CATEGORY=u;
},{"@tensorflow/tfjs-core/dist/ops/ops_for_converter":"v53G","./utils":"AzqT"}],"m4Uz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.executeOp=w;var e=g(require("@tensorflow/tfjs-core")),r=require("./custom_op/node_value_impl"),t=require("./custom_op/register"),u=g(require("./executors/arithmetic_executor")),c=g(require("./executors/basic_math_executor")),o=g(require("./executors/control_executor")),i=g(require("./executors/convolution_executor")),n=g(require("./executors/creation_executor")),s=g(require("./executors/dynamic_executor")),a=g(require("./executors/evaluation_executor")),x=g(require("./executors/graph_executor")),p=g(require("./executors/hash_table_executor")),l=g(require("./executors/image_executor")),d=g(require("./executors/logical_executor")),_=g(require("./executors/matrices_executor")),f=g(require("./executors/normalization_executor")),y=g(require("./executors/reduction_executor")),O=g(require("./executors/slice_join_executor")),m=g(require("./executors/spectral_executor")),q=g(require("./executors/transformation_executor"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var o=u?Object.getOwnPropertyDescriptor(e,c):null;o&&(o.get||o.set)?Object.defineProperty(t,c,o):t[c]=e[c]}return t.default=e,r&&r.set(e,t),t}function w(h,g,w,b){const v=((h,g,w)=>{switch(h.category){case"arithmetic":return e.tidy(()=>u.executeOp(h,g,w));case"basic_math":return e.tidy(()=>c.executeOp(h,g,w));case"control":return o.executeOp(h,g,w);case"convolution":return e.tidy(()=>i.executeOp(h,g,w));case"creation":return e.tidy(()=>n.executeOp(h,g,w));case"dynamic":return s.executeOp(h,g,w);case"evaluation":return e.tidy(()=>a.executeOp(h,g,w));case"image":return e.tidy(()=>l.executeOp(h,g,w));case"graph":return e.tidy(()=>x.executeOp(h,g,w));case"logical":return e.tidy(()=>d.executeOp(h,g,w));case"matrices":return e.tidy(()=>_.executeOp(h,g,w));case"normalization":return e.tidy(()=>f.executeOp(h,g,w));case"reduction":return e.tidy(()=>y.executeOp(h,g,w));case"slice_join":return e.tidy(()=>O.executeOp(h,g,w));case"spectral":return e.tidy(()=>m.executeOp(h,g,w));case"transformation":return e.tidy(()=>q.executeOp(h,g,w));case"hash_table":return p.executeOp(h,g,w,b);case"custom":const v=(0,t.getRegisteredOp)(h.op);if(v&&v.customExecutor)return v.customExecutor(new r.NodeValueImpl(h,g,w));throw TypeError(`Custom op ${h.op} is not registered.`);default:throw TypeError(`Unknown op '${h.op}'. File an issue at `+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(h,g,w);return e.util.isPromise(v)?v.then(e=>[].concat(e)):[].concat(v)}
},{"@tensorflow/tfjs-core":"tKjQ","./custom_op/node_value_impl":"A11r","./custom_op/register":"mkrd","./executors/arithmetic_executor":"I69s","./executors/basic_math_executor":"J5T1","./executors/control_executor":"pl7c","./executors/convolution_executor":"DXkW","./executors/creation_executor":"y7Ce","./executors/dynamic_executor":"RJKi","./executors/evaluation_executor":"yW03","./executors/graph_executor":"GTlu","./executors/hash_table_executor":"Bx0Y","./executors/image_executor":"lklz","./executors/logical_executor":"WR1C","./executors/matrices_executor":"VTuv","./executors/normalization_executor":"CRkV","./executors/reduction_executor":"CxNH","./executors/slice_join_executor":"jhyE","./executors/spectral_executor":"ygRt","./executors/transformation_executor":"iwMG"}],"B3WA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExecutionContext=void 0;class t{constructor(t={},e={},s={},n={}){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=s,this.functionMap=n,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const s=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(s))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(const e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}exports.ExecutionContext=t;
},{}],"K8Aa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExecutionSubgraph=n,exports.getNodesInTopologicalOrder=s,exports.isControlFlow=p,exports.isDynamicShape=r,exports.isHashTable=u;var e=require("../operations/executors/utils");function n(n,s,o,t){const a=new Set,i=[];let l=null,h=null;const c=new Set,d=Object.keys(n).map(n=>(0,e.parseNodeName)(n)[0]);let m=[];null!=t&&(m=t.map(n=>(0,e.parseNodeName)(n.name)[0]));const f=[...s];for(;f.length>0;){const e=f.pop();(p(e)||r(e)||u(e))&&null==l&&(h=(l=e).children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),null==o[e.name]&&(-1===d.indexOf(e.name)&&-1===m.indexOf(e.name)&&(0!==e.inputs.length?e.inputs.forEach(e=>{c.has(e.name)||(c.add(e.name),f.push(e))}):i.push(e.name)))}return{inputs:n,outputs:s,usedNodes:a,missingInputs:i,dynamicNode:l,syncInputs:h}}function s(n,s,o){const{usedNodes:t,inputs:a}=o,p=[],r=Object.keys(a).map(n=>(0,e.parseNodeName)(n)[0]).map(e=>n.nodes[e]),u=n.initNodes;r.forEach(e=>{t.has(e.name)&&p.push(e)}),n.weights.forEach(e=>{t.has(e.name)&&p.push(e)}),null!=u&&u.forEach(e=>{t.has(e.name)&&p.push(e)});const i=new Set,l=[];for(;p.length>0;){const e=p.pop();i.add(e.name),s[e.name]||l.push(e),e.children.forEach(e=>{!i.has(e.name)&&t.has(e.name)&&e.inputs.every(e=>i.has(e.name))&&p.push(e)})}return l}const o=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],t=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],a=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function p(e){return o.indexOf(e.op)>=0}function r(e){return t.indexOf(e.op)>=0}function u(e){return a.indexOf(e.op)>=0}
},{"../operations/executors/utils":"AzqT"}],"Iso8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GraphExecutor=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../operations/executors/utils"),s=require("../operations/operation_executor"),n=require("./execution_context"),o=require("./model_analysis");class i{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new i(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map(e=>t[e].map(t=>t.id));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}getCompilationKey(t,e){const s=t.map(t=>t.name).sort(),n=e.map(t=>t.name).sort();return s.join(this.SEPERATOR)+"--"+n.join(this.SEPERATOR)}compile(t,e){const s=(0,o.getExecutionSubgraph)(t,e,this.weightMap,this._initNodes),{missingInputs:n,dynamicNode:i,syncInputs:a}=s;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has `+`the dynamic op '${i.op}'. Please use `+"model.executeAsync() instead. Alternatively, to avoid the "+`dynamic ops, specify the inputs [${a}]`);if(n.length>0){const s=e.map(t=>t.name),o=Object.keys(t);throw new Error(`Cannot compute the outputs [${s}] from the provided inputs `+`[${o}]. Missing the following inputs: [${n}]`)}return(0,o.getNodesInTopologicalOrder)(this.graph,this.weightMap,s)}execute(o,i){o=this.mapInputs(o);const a=Object.keys(o).sort();this.checkInputs(o),this.checkInputShapeAndType(o),i=this.mapOutputs(i),this.checkOutputs(i);const r=a.map(t=>this.graph.nodes[(0,e.parseNodeName)(t)[0]]),u=i.map(t=>(0,e.parseNodeName)(t)[0]);let p=u.map(t=>this.graph.nodes[t]);0===p.length&&(p=this._outputs);const h=this.getCompilationKey(r,p);let c=this.compiledMap.get(h);null==c&&(c=this.compile(o,p),this.compiledMap.set(h,c));const d={},l={};return(0,t.tidy)(()=>{const a=new n.ExecutionContext(this.weightMap,d,l,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(o).forEach(t=>{const[s,n]=(0,e.parseNodeName)(t),i=[];i[n]=o[t],r[s]=i});const p=this.getFrozenTensorIds(r),h={};for(let e=0;e<c.length;e++){const n=c[e];if(!r[n.name]){const e=(0,s.executeOp)(n,r,a,this._resourceManager);if(t.util.isPromise(e))throw new Error(`The execution of the op '${n.op}' returned a promise. `+"Please use model.executeAsync() instead.");r[n.name]=e,this.checkTensorForDisposal(n.name,n,r,a,p,u,h)}}return null==this.parent&&a.dispose(p),i.map(t=>(0,e.getTensor)(t,r,a))})}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(t=>t.map(t=>t.id)));return new Set(e)}checkTensorForDisposal(t,s,n,o,i,a,r){"control"!==s.category&&-1===a.indexOf(t)&&(n[t].forEach(t=>{null!=t&&(r[t.id]=(r[t.id]||0)+s.children.length)}),s.inputs.forEach(t=>{if("control"!==t.category){const s=(0,e.getTensorsForCurrentContenxt)(t.name,n,o);null!=s&&s.forEach(t=>{if(t&&!i.has(t.id)){const e=r[t.id];1===e?(t.dispose(),delete r[t.id]):null!=e&&r[t.id]--}})}}))}async executeAsync(t,e){return this._executeAsync(t,e)}async _executeAsync(t,s,o=!1,i={},a={}){o||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),s=this.mapOutputs(s),this.checkOutputs(s));const r=new n.ExecutionContext(this.weightMap,i,a,this.functionExecutorMap),u=await this.executeWithControlFlow(t,r,s,o),p=s.map(t=>(0,e.getTensor)(t,u,r)),h=p.map(t=>t.id),c=Object.keys(t).map(e=>t[e].id),d=new Set([...h,...c,...this.weightIds]);return Object.keys(u).forEach(t=>{u[t].forEach(t=>{!t||t.isDisposed||d.has(t.id)||t.dispose()})}),null==this.parent&&r.dispose(d),p}async executeFunctionAsync(t,e,s){const n=t.reduce((t,e,s)=>(t[this.inputs[s].name]=e,t),{});return this._executeAsync(n,this.outputNodes,!0,e,s)}async executeWithControlFlow(t,s,n,i){const a=Object.keys(t),r=a.map(t=>this.graph.nodes[(0,e.parseNodeName)(t)[0]]),u=n.map(t=>(0,e.parseNodeName)(t)[0]);let p=u.map(t=>this.graph.nodes[t]);0===p.length&&(p=this._outputs);const{usedNodes:h,missingInputs:c,dynamicNode:d,syncInputs:l}=(0,o.getExecutionSubgraph)(t,p,this.weightMap,this._initNodes),m=[...r,...this.graph.weights,...this._initNodes||[]].map(t=>({node:t,contexts:s.currentContext})),g=Object.assign({},this.weightMap);Object.keys(t).forEach(s=>{const[n,o]=(0,e.parseNodeName)(s),i=[];i[o]=t[s],g[n]=i});const y={},f=this.getFrozenTensorIds(g),x={};for(;m.length>0;){const t=this.processStack(r,m,s,g,x,f,u,y,h);await Promise.all(t)}null!=d||i||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=p.filter(t=>!(0,o.isControlFlow)(t)&&!(0,e.getTensor)(t.name,g,s)).map(t=>t.name);if(w.length>0){let t="";throw null!=d&&(t="Alternatively, to avoid the dynamic ops, use model.execute() "+`and specify the inputs [${l}]`),new Error(`Cannot compute the outputs [${w}] from the provided `+`inputs [${a}]. Consider providing the following inputs: `+`[${c}]. ${t}`)}return g}processStack(n,o,i,a,r,u,p,h,c){const d=[];for(;o.length>0;){const n=o.pop();i.currentContext=n.contexts;let l="";if("Enter"===n.node.op&&(0,e.getParamValue)("isConstant",n.node,a,i)&&([l]=(0,e.getNodeNameAndIndex)(n.node.name,i)),null==a[n.node.name]){const m=(0,s.executeOp)(n.node,a,i,this._resourceManager);l||([l]=(0,e.getNodeNameAndIndex)(n.node.name,i));const g=i.currentContext;t.util.isPromise(m)?d.push(m.then(t=>(a[l]=t,i.currentContext=g,this.checkTensorForDisposal(l,n.node,a,i,u,p,h),this.processChildNodes(n.node,o,i,a,r,c),t))):(a[l]=m,this.checkTensorForDisposal(l,n.node,a,i,u,p,h),this.processChildNodes(n.node,o,i,a,r,c))}else this.processChildNodes(n.node,o,i,a,r,c)}return d}processChildNodes(t,s,n,o,i,a){t.children.forEach(t=>{const[r]=(0,e.getNodeNameAndIndex)(t.name,n);!i[r]&&a.has(t.name)&&("Merge"===t.op?t.inputNames.some(t=>!!(0,e.getTensor)(t,o,n))&&(i[r]=!0,s.push({contexts:n.currentContext,node:t})):t.inputNames.every(t=>!!(0,e.getTensor)(t,o,n))&&(i[r]=!0,s.push({contexts:n.currentContext,node:t})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(t=>t.dispose()))}checkInputShapeAndType(s){Object.keys(s).forEach(n=>{const o=s[n],[i]=(0,e.parseNodeName)(n),a=this.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){const e=a.attrParams.shape.value,s=e.length===o.shape.length&&o.shape.every((t,s)=>-1===e[s]||e[s]===t);t.util.assert(s,()=>`The shape of dict['${a.name}'] provided in `+`model.execute(dict) must be [${e}], but was `+`[${o.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&t.util.assert(o.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in `+"model.execute(dict) must be "+`${a.attrParams.dtype.value}, but was ${o.dtype}`)})}mapInputs(t){const e={};for(const s in t)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[s]){e[this._signature.inputs[s].name]=t[s]}else e[s]=t[s];return e}checkInputs(t){const s=Object.keys(t).filter(t=>{const[s]=(0,e.parseNodeName)(t);return null==this.graph.nodes[s]});if(s.length>0)throw new Error("The dict provided in model.execute(dict) has "+`keys: [${s}] that are not part of graph`)}mapOutputs(t){return t.map(t=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[t]){return this._signature.outputs[t].name}return t},{})}checkOutputs(t){t.forEach(t=>{const[s]=(0,e.parseNodeName)(t);if(!this.graph.nodes[s])throw new Error(`The output '${t}' is not found in the graph`)})}}exports.GraphExecutor=i;
},{"@tensorflow/tfjs-core":"tKjQ","../operations/executors/utils":"AzqT","../operations/operation_executor":"m4Uz","./execution_context":"B3WA","./model_analysis":"K8Aa"}],"EEB2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResourceManager=void 0;class e{constructor(e={},a={}){this.hashTableNameToHandle=e,this.hashTableMap=a}addHashTable(e,a){this.hashTableNameToHandle[e]=a.handle,this.hashTableMap[a.id]=a}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}exports.ResourceManager=e;
},{}],"p7uH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadGraphModel=a,exports.GraphModel=exports.DEFAULT_MODEL_NAME=exports.TFHUB_SEARCH_PARAM=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../operations/operation_mapper"),r=require("./graph_executor"),s=require("./resource_manager");const o="?tfjs-format=file";exports.TFHUB_SEARCH_PARAM=o;const n="model.json";exports.DEFAULT_MODEL_NAME=n;class i{constructor(e,t={}){this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new s.ResourceManager}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=e.io.browserHTTPRequest(t,this.loadOptions);else{const r=e.io.getLoadHandlers(t,this.loadOptions);if(0===r.length)r.push(e.io.browserHTTPRequest(t,this.loadOptions));else if(r.length>1)throw new Error(`Found more than one (${r.length}) load handlers for `+`URL '${[t]}'`);this.handler=r[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=await this.handler.load();return this.loadSync(e)}loadSync(s){this.artifacts=s;const o=this.artifacts.modelTopology;let n={};null!=this.artifacts.userDefinedMetadata&&(n=this.artifacts.userDefinedMetadata.signature),this.version=`${o.versions.producer}.${o.versions.minConsumer}`;const i=e.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new r.GraphExecutor(t.OperationMapper.Instance.transformGraph(o,n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(i),this.executor.resourceManager=this.resourceManager,null!=s.modelInitializer){const e=t.OperationMapper.Instance.transformGraph(s.modelInitializer);this.initializer=new r.GraphExecutor(e),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(t,r){if("string"==typeof t){const r=e.io.getSaveHandlers(t);if(0===r.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for `+`URL '${t}'`);t=r[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}predict(e,t){return this.execute(e,this.outputNodes)}normalizeInputs(t){if(!(t instanceof e.Tensor||Array.isArray(t)))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+`the graph model has ${this.inputNodes.length} placeholders, `+`while there are ${t.length} input tensors.`);return this.inputNodes.reduce((e,r,s)=>(e[r]=t[s],e),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function a(e,t={}){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=`${e}${n}${o}`);const r=new i(e,t);return await r.load(),r}exports.GraphModel=i;
},{"@tensorflow/tfjs-core":"tKjQ","../operations/operation_mapper":"HjUb","./graph_executor":"Iso8","./resource_manager":"EEB2"}],"Fdt9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"GraphModel",{enumerable:!0,get:function(){return e.GraphModel}}),Object.defineProperty(exports,"loadGraphModel",{enumerable:!0,get:function(){return e.loadGraphModel}}),Object.defineProperty(exports,"deregisterOp",{enumerable:!0,get:function(){return r.deregisterOp}}),Object.defineProperty(exports,"registerOp",{enumerable:!0,get:function(){return r.registerOp}}),Object.defineProperty(exports,"version_converter",{enumerable:!0,get:function(){return t.version}});var e=require("./executor/graph_model"),r=require("./operations/custom_op/register"),t=require("./version");
},{"./executor/graph_model":"p7uH","./operations/custom_op/register":"mkrd","./version":"yMuw"}],"GZYp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepMap=n,exports.deepZip=u,exports.zipToList=a,exports.deepMapAndAwaitAll=s,exports.isIterable=c,exports.canTensorify=f;var e=t(require("@tensorflow/tfjs-core"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function t(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function n(e,r){return o(e,r)}function o(e,r,t=new Map,n=new Set){if(null==e)return null;if(n.has(e))throw new Error("Circular references are not supported.");if(t.has(e))return t.get(e);const u=r(e);if(u.recurse&&null!==u.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(u.recurse){if(c(e)){const u=Array.isArray(e)?[]:{};n.add(e);for(const i in e){const a=o(e[i],r,t,n);u[i]=a}return n.delete(e),u}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return t.set(e,u.value),u.value}function u(e,r=a){return i(e,r)}function i(e,r,t=new Set){const n=e[0];if(t.has(n))throw new Error("Circular references are not supported.");const o=r(e);if(o.recurse&&null!==o.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse){if(c(n)){const o=Array.isArray(n)?[]:{};t.add(n);for(const u in n){const n=i(e.map(e=>e[u]),r,t);o[u]=n}return t.delete(n),o}throw new Error(`Can't recurse into non-iterable type: ${n}`)}return o.value}function a(e){return null===e?null:c(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function s(r,t){const n=new Map;o(r,t,n);for(const o of Array.from(n.keys())){const r=n.get(o);if(e.util.isPromise(r)){const e=await r;n.set(o,e)}}return o(r,t,n)}function c(r){return null!=r&&!ArrayBuffer.isView(r)&&(Array.isArray(r)||"object"==typeof r&&!(r instanceof e.Tensor))}function f(r){return null==r||l(r)||Array.isArray(r)||"object"==typeof r&&r instanceof e.Tensor||e.util.isTypedArray(r)}function l(e){return null===e||"object"!=typeof e&&"function"!=typeof e}
},{"@tensorflow/tfjs-core":"tKjQ"}],"VKSU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepClone=u;var e=n(require("@tensorflow/tfjs-core")),r=require("./deep_map");function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=u?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(n,o,c):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function u(e){return(0,r.deepMap)(e,o)}function o(t){return t instanceof e.Tensor?{value:t.clone(),recurse:!1}:(0,r.isIterable)(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}
},{"@tensorflow/tfjs-core":"tKjQ","./deep_map":"GZYp"}],"Tuac":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RingBuffer=void 0;class t{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,i){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=i}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const i of t)this.push(i)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const i=this.wrap(this.begin+t),e=this.get(i);return this.set(i,this.pop()),e}}exports.RingBuffer=t;
},{}],"VHdk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GrowingRingBuffer=void 0;var e=require("./ring_buffer");class s extends e.RingBuffer{constructor(){super(s.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,s=new Array(e),t=this.length();for(let i=0;i<t;i++)s[i]=this.get(this.wrap(this.begin+i));this.data=s,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=t}}exports.GrowingRingBuffer=s,s.INITIAL_CAPACITY=32;
},{"./ring_buffer":"Tuac"}],"J4LB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.iteratorFromItems=l,exports.iteratorFromIncrementing=h,exports.iteratorFromFunction=c,exports.iteratorFromConcatenated=m,exports.iteratorFromConcatenatedFunction=d,exports.iteratorFromZipped=p,exports.ShuffleIterator=exports.PrefetchIterator=exports.ZipMismatchMode=exports.ChainedIterator=exports.OneToManyIterator=exports.LazyIterator=void 0;var t,e=o(require("@tensorflow/tfjs-core")),r=o(require("seedrandom")),s=require("../util/deep_clone"),n=require("../util/deep_map"),a=require("../util/growing_ring_buffer"),i=require("../util/ring_buffer");function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=s?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}function l(t){return new x(t)}function h(t){let e=t;return c(()=>({value:e++,done:!1}))}function c(t){return new y(t)}function m(t,e){return new E(t,e)}function d(t,e,r){return m(c(t).take(e),r)}function p(e,r=t.FAIL){return new O(e,r)}class f{async toArray(){const t=[];let e=await this.next();for(;!e.done;)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let r=await t.next();for(;!r.done;)e.push(r.value),r=await t.next();return e}async resolveFully(){let t=await this.next();for(;!t.done;)t=await this.next()}async resolveWhile(t){let e=await this.next(),r=t(e.value);for(;!e.done&&r;)r=t((e=await this.next()).value)}handleErrors(t){return new M(this,t)}filter(t){return new g(this,t)}map(t){return new F(this,t)}mapAsync(t){return new T(this,t)}serialMapAsync(t){return new T(this,t).serial()}flatmap(t){return new S(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new I(this,t,e)}columnMajorBatch(t,e=!0,r=n.zipToList){return this.rowMajorBatch(t,e).map(t=>(0,n.deepZip)(t,r))}concatenate(t,e){return new E(l([this,t]),e)}take(t){return t<0||null==t?this:new R(this,t)}skip(t){return t<0||null==t?this:new w(this,t)}prefetch(t){return new P(this,t)}shuffle(t,e){return new C(this,t,e)}serial(){return new v(this)}}exports.LazyIterator=f;class x extends f{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:(0,s.deepClone)(t),done:!1}}}class y extends f{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message=`Error thrown while iterating through a dataset: ${t.message}`,t}}}class v extends f{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class w extends f{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const t=await this.upstream.next();if(t.done)return t;e.dispose(t.value)}return this.upstream.next()}}class R extends f{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class I extends f{constructor(t,e,r=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];for(;t.length<this.batchSize;){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class g extends f{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;e.dispose(t.value)}}}class F extends f{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Map`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const r=e.tensor_util.getTensorsInContainer(t.value),s=this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return{value:s,done:!1}}}class M extends f{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class T extends f{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const r=e.tensor_util.getTensorsInContainer(t.value),s=await this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return{value:s,done:!1}}}class b extends f{constructor(){super(),this.outputQueue=new a.GrowingRingBuffer,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}exports.OneToManyIterator=b;class S extends b{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const t=await this.upstream.next();if(t.done)return!1;const r=e.tensor_util.getTensorsInContainer(t.value),s=this.transform(t.value),n=e.tensor_util.getTensorsInContainer(s);this.outputQueue.pushAll(s);for(const a of r)e.tensor_util.isTensorInList(a,n)||a.dispose();return!0}}class E extends f{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}exports.ChainedIterator=E,exports.ZipMismatchMode=t,function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(t||(exports.ZipMismatchMode=t={}));class O extends f{constructor(e,r=t.FAIL){super(),this.iterators=e,this.mismatchMode=r,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let r=0,s=0;const a=await(0,n.deepMapAndAwaitAll)(this.iterators,function(t){if(t instanceof f)return{value:t.next().then(t=>(r++,t.done&&s++,t.value)),recurse:!1};return{value:null,recurse:!0}});if(r===s)return{value:null,done:!0};if(s>0)switch(this.mismatchMode){case t.FAIL:throw new Error("Zipped streams should have the same length. "+`Mismatched at element ${this.count}.`);case t.SHORTEST:return{value:null,done:!0};case t.LONGEST:}return this.count++,{value:a,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class P extends f{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new i.RingBuffer(e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}exports.PrefetchIterator=P;class C extends P{constructor(t,s,n){super(t,s),this.upstream=t,this.windowSize=s,this.upstreamExhausted=!1,this.random=r.alea(n||e.util.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}exports.ShuffleIterator=C;
},{"@tensorflow/tfjs-core":"tKjQ","seedrandom":"izQb","../util/deep_clone":"VKSU","../util/deep_map":"GZYp","../util/growing_ring_buffer":"VHdk","../util/ring_buffer":"Tuac"}],"Mmcf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.datasetFromIteratorFn=o,exports.array=u,exports.zip=l,exports.Dataset=void 0;var t=n(require("@tensorflow/tfjs-core")),e=n(require("seedrandom")),r=require("./iterators/lazy_iterator"),i=require("./util/deep_map");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=i?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}class a{constructor(){this.size=null}batch(e,r=!0){const i=this;let s;return t.util.assert(e>0,()=>`batchSize needs to be positive, but it is\n      ${e}`),o(async()=>(await i.iterator()).columnMajorBatch(e,r,c),s=this.size===1/0||null==this.size?this.size:r?Math.ceil(this.size/e):Math.floor(this.size/e))}concatenate(t){const e=this;let r;return o(async()=>(await e.iterator()).concatenate(await t.iterator()),r=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null)}filter(e){const r=this;let i;return o(async()=>(await r.iterator()).filter(r=>t.tidy(()=>e(r))),i=this.size===1/0?1/0:null)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(e){const r=this;return o(async()=>(await r.iterator()).map(r=>t.tidy(()=>e(r))),this.size)}mapAsync(t){const e=this;return o(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return o(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let i;return o(async()=>{const i=(0,r.iteratorFromFunction)(async()=>({value:await e.iterator(),done:!1}));return(0,r.iteratorFromConcatenated)(i.take(t))},i=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null)}skip(t){const e=this;let r;return o(async()=>(await e.iterator()).skip(t),r=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null)}shuffle(r,i,s=!0){if(null==r||r<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+`bufferSize to the dataset size (${this.size} elements)`);const n=this,a=e.alea(i||t.util.now().toString());return o(async()=>{let t=a.int32();return s&&(t+=a.int32()),(await n.iterator()).shuffle(r,t.toString())},this.size)}take(t){const e=this;let r;return o(async()=>(await e.iterator()).take(t),r=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function o(t,e=null){return new class extends a{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function u(t){return o(async()=>(0,r.iteratorFromItems)(t),t.length)}function l(t){if(!(0,i.isIterable)(t))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(t))for(let r=0;r<t.length;r++)e=null==e?t[r].size:Math.min(e,t[r].size);else if(t instanceof Object)for(const r in t)e=null==e?t[r].size:Math.min(e,t[r].size);return o(async()=>{const e=await(0,i.deepMapAndAwaitAll)(t,t=>{if(t instanceof a)return{value:t.iterator(),recurse:!1};if((0,i.isIterable)(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return(0,r.iteratorFromZipped)(e,r.ZipMismatchMode.SHORTEST)},e)}function c(t){if(null===t)return null;const e=t[0];if((0,i.canTensorify)(e)){return{value:f(t),recurse:!1}}return{value:null,recurse:!0}}function f(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof t.Tensor?t.stack(e):t.tensor(e)}exports.Dataset=a,a.MAX_BUFFER_SIZE=1e4;
},{"@tensorflow/tfjs-core":"tKjQ","seedrandom":"izQb","./iterators/lazy_iterator":"J4LB","./util/deep_map":"GZYp"}],"XqC6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextLineDataset=void 0;var t=require("../dataset");class e extends t.Dataset{constructor(t){super(),this.input=t}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(t=>(t.endsWith("\r")&&(t=t.slice(0,-1)),t))}}exports.TextLineDataset=e;
},{"../dataset":"Mmcf"}],"IBHK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CSVDataset=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../dataset"),s=require("./text_line_dataset");const i='"',l=Symbol("out"),a=Symbol("field"),n=Symbol("quote"),o=Symbol("quoteafterquote"),r=Symbol("quoteinquote");class u extends t.Dataset{constructor(t,i){super(),this.input=t,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new s.TextLineDataset(t),i||(i={}),this.hasHeader=!1!==i.hasHeader,this.fullColumnNames=i.columnNames,this.columnConfigs=i.columnConfigs,this.configuredColumnsOnly=i.configuredColumnsOnly,i.delimWhitespace?(e.util.assert(null==i.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=i.delimiter?i.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const t=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&t&&e.util.assert(t.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=t);const s=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),i=Object.keys(s).filter(e=>s[e]>1);if(e.util.assert(0===i.length,()=>"Duplicate column names found: "+i.toString()),this.columnConfigs)for(const e of Object.keys(this.columnConfigs)){if(-1===this.fullColumnNames.indexOf(e))throw new Error('The key "'+e+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const e=await this.base.iterator(),t=await e.next();if(t.done)throw new Error("No data was found for CSV parsing.");const s=t.value;return this.parseRow(s,!1)}return null}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){const t=this.parseRow(e),s={},i={};for(let l=0;l<this.fullColumnNames.length;l++){const a=this.fullColumnNames[l],n=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||n){const o=t[l];let r=null;if(""===o)if(n&&void 0!==n.default)r=n.default;else{if(n&&(n.required||n.isLabel))throw new Error(`Required column ${a} is empty in this line: ${e}`);r=void 0}else{const e=Number(o);if(isNaN(e))r=n&&"bool"===n.dtype?this.getBoolean(o):o;else if(n&&n.dtype)switch(n.dtype){case"float32":r=e;break;case"int32":r=Math.floor(e);break;case"bool":r=this.getBoolean(o);break;default:r=e}else r=e}n&&n.isLabel?i[a]=r:s[a]=r}}return 0===Object.keys(i).length?s:{xs:s,ys:i}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){const s=[];let u=0;const h=e.length;let m=l;for(let c=0;c<h;c++)switch(m){case l:switch(e.charAt(c)){case i:u=c+1,m=n;break;case this.delimiter:if(u=c+1," "===this.delimiter&&this.delimWhitespace)break;s.push(""),m=l;break;default:m=a,u=c}break;case a:switch(e.charAt(c)){case this.delimiter:s.push(e.substring(u,c)),m=l,u=c+1}break;case n:switch(e.charAt(c)){case i:m=o}break;case o:switch(e.charAt(c)){case this.delimiter:s.push(e.substring(u,c-1)),m=l,u=c+1;break;case i:m=n;break;default:m=r}break;case r:switch(e.charAt(c)){case i:m=n}}if(m===o?s.push(e.substring(u,h-1)):s.push(e.substring(u)),t&&s.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${s}`);return s}}exports.CSVDataset=u;
},{"@tensorflow/tfjs-core":"tKjQ","../dataset":"Mmcf","./text_line_dataset":"XqC6"}],"w9BO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MicrophoneIterator=void 0;var t=require("@tensorflow/tfjs-core"),e=require("./lazy_iterator");class a extends e.LazyIterator{constructor(t){super(),this.microphoneConfig=t,this.isClosed=!1,this.fftSize=t.fftSize||1024;const e=Math.log2(this.fftSize);if(this.fftSize<0||e<4||e>14||!Number.isInteger(e))throw new Error("Invalid fftSize: it must be a power of 2 between "+`2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=t.numFramesPerSpectrogram||43,this.sampleRateHz=t.sampleRateHz,this.columnTruncateLength=t.columnTruncateLength||this.fftSize,this.audioTrackConstraints=t.audioTrackConstraints,this.smoothingTimeConstant=t.smoothingTimeConstant||0,this.includeSpectrogram=!1!==t.includeSpectrogram,this.includeWaveform=!0===t.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if((0,t.env)().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");const i=new a(e);return await i.start(),i}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(a){throw new Error(`Error thrown while initializing video stream: ${a.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const t=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new t,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: "+`Expected: ${this.sampleRateHz}; `+`Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;const e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let t,e;const a=await this.getAudioData();if(this.includeSpectrogram){const e=this.flattenQueue(a.freqDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const t=this.flattenQueue(a.timeDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:t,waveform:e},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const t=[],e=[];let a=0;return new Promise(i=>{const r=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&i({freqDataQueue:t,timeDataQueue:e}),t.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),e.push(this.timeData.slice())),++a===this.numFrames&&(clearInterval(r),i({freqDataQueue:t,timeDataQueue:e}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(t){const e=t[0].length,a=new Float32Array(t.length*e);return t.forEach((t,i)=>a.set(t,i*e)),a}getTensorFromAudioDataArray(e,a){const i=new Float32Array(t.util.sizeFromShape(a));return i.set(e,i.length-e.length),(0,t.tensor)(i,a)}}exports.MicrophoneIterator=a;
},{"@tensorflow/tfjs-core":"tKjQ","./lazy_iterator":"J4LB"}],"cAzF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebcamIterator=void 0;var e=require("@tensorflow/tfjs-core"),i=require("./lazy_iterator");class t extends i.LazyIterator{constructor(i,t){if(super(),this.webcamVideoElement=i,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=(0,e.tensor1d)([0],"int32"),this.webcamConfig.centerCrop){const i=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,r=(1-i)/2,s=(1-t)/2,o=r+i,n=t+s;this.cropBox=(0,e.tensor2d)([s,r,n,o],[1,4])}else this.cropBox=(0,e.tensor2d)([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(i,r={}){if((0,e.env)().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!i){if(i=document.createElement("video"),!r.resizeWidth||!r.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");i.width=r.resizeWidth,i.height=r.resizeHeight}const s=new t(i,r);return await s.start(),s}async start(){this.webcamConfig.facingMode&&e.util.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. `+"Please provide 'user' or 'environment'");try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(i){throw i.message=`Error thrown while initializing video stream: ${i.message}`,i}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=(()=>{e()})})}async next(){if(this.isClosed)return{value:null,done:!0};let i;try{i=e.browser.fromPixels(this.webcamVideoElement)}catch(t){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(t)}`)}if(!this.resize)return{value:i,done:!1};try{return{value:this.cropAndResizeFrame(i),done:!1}}catch(t){throw new Error(`Error thrown cropping the video: ${t.message}`)}finally{i.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(i){return(0,e.tidy)(()=>{const t=i.toFloat().expandDims(0);let r;const s=(r=e.image.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear")).shape;return r.reshape(s.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}exports.WebcamIterator=t;
},{"@tensorflow/tfjs-core":"tKjQ","./lazy_iterator":"J4LB"}],"tIOf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataSource=void 0;class e{}exports.DataSource=e;
},{}],"HKqF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StringIterator=void 0;var t=require("./lazy_iterator");class r extends t.LazyIterator{split(t){return new e(this,t)}}exports.StringIterator=r;class e extends r{constructor(t,r){super(),this.upstream=t,this.impl=new s(t,r)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class s extends t.OneToManyIterator{constructor(t,r){super(),this.upstream=t,this.separator=r,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const t=await this.upstream.next();if(t.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);const r=t.value.split(this.separator);r[0]=this.carryover+r[0];for(const e of r.slice(0,-1))this.outputQueue.push(e);return this.carryover=r[r.length-1],!0}}
},{"./lazy_iterator":"J4LB"}],"trES":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.ByteChunkIterator=void 0;var r=require("@tensorflow/tfjs-core"),t=require("./lazy_iterator"),s=require("./string_iterator");class u extends t.LazyIterator{decodeUTF8(){return new o(this)}}exports.ByteChunkIterator=u;class o extends s.StringIterator{constructor(e){super(),this.upstream=e,this.impl=new n(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class n extends t.OneToManyIterator{constructor(e){if(super(),this.upstream=e,(0,r.env)().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:e}=require("string_decoder");this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const t=await this.upstream.next();let s,u;return!t.done&&(s=t.value,u=(0,r.env)().get("IS_BROWSER")?this.decoder.decode(s,{stream:!0}):this.decoder.write(e.from(s.buffer)),this.outputQueue.push(u),!0)}}
},{"@tensorflow/tfjs-core":"tKjQ","./lazy_iterator":"J4LB","./string_iterator":"HKqF","string_decoder":"bWtT","buffer":"HgFv"}],"vozD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileChunkIterator=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./byte_chunk_iterator");class r extends t.ByteChunkIterator{constructor(t,r={}){super(),this.file=t,this.options=r,e.util.assert(t instanceof Uint8Array||!!(0,e.env)().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=r.offset||0,this.chunkSize=r.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};const e=new Promise((e,t)=>{const r=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,r)));else{const i=new FileReader;i.onload=(r=>{let n=i.result;if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),!(n instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(n)}),i.onabort=(e=>t(new Error("Aborted"))),i.onerror=(e=>t(new Error(e.type)));const n=this.file.slice(this.offset,r);i.readAsArrayBuffer(n)}this.offset=r});return{value:await e,done:!1}}}exports.FileChunkIterator=r;
},{"@tensorflow/tfjs-core":"tKjQ","./byte_chunk_iterator":"trES"}],"Xkgm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.urlChunkIterator=t;var e=require("@tensorflow/tfjs-core"),r=require("./file_chunk_iterator");async function t(t,i={}){let n,a;"string"==typeof t?n=t:(n=t.url,a=o(t));const c=await e.util.fetch(n,a);if(c.ok){const e=new Uint8Array(await c.arrayBuffer());return new r.FileChunkIterator(e,i)}throw new Error(c.statusText)}const o=e=>{return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};
},{"@tensorflow/tfjs-core":"tKjQ","./file_chunk_iterator":"vozD"}],"CZZc":[function(require,module,exports) {
"use strict";function e(e){return"string"==typeof e&&"file://"===e.substr(0,7)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isLocalPath=e;
},{}],"S8Uz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileDataSource=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../datasource"),r=require("../iterators/file_chunk_iterator"),i=require("../util/source_util");class s extends t.DataSource{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if((0,i.isLocalPath)(this.input)&&(0,e.env)().get("IS_NODE")){const e=require("fs");this.input=e.readFileSync(this.input.substr(7))}return new r.FileChunkIterator(this.input,this.options)}}exports.FileDataSource=s;
},{"@tensorflow/tfjs-core":"tKjQ","../datasource":"tIOf","../iterators/file_chunk_iterator":"vozD","../util/source_util":"CZZc","fs":"bWtT"}],"wzph":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.URLDataSource=void 0;var r=require("../datasource"),e=require("../iterators/url_chunk_iterator"),t=require("../util/source_util"),i=require("./file_data_source");class s extends r.DataSource{constructor(r,e={}){super(),this.url=r,this.fileOptions=e}async iterator(){return(0,t.isLocalPath)(this.url)?new i.FileDataSource(this.url,this.fileOptions).iterator():(0,e.urlChunkIterator)(this.url,this.fileOptions)}}exports.URLDataSource=s;
},{"../datasource":"tIOf","../iterators/url_chunk_iterator":"Xkgm","../util/source_util":"CZZc","./file_data_source":"S8Uz"}],"zWUb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.csv=s,exports.func=c,exports.generator=i,exports.webcam=u,exports.microphone=p;var r=require("./dataset"),e=require("./datasets/csv_dataset"),t=require("./iterators/lazy_iterator"),a=require("./iterators/microphone_iterator"),o=require("./iterators/webcam_iterator"),n=require("./sources/url_data_source");function s(r,t={}){return new e.CSVDataset(new n.URLDataSource(r),t)}function c(e){const a=(0,t.iteratorFromFunction)(e);return(0,r.datasetFromIteratorFn)(async()=>a)}function i(e){return(0,r.datasetFromIteratorFn)(async()=>{const r=await e();return(0,t.iteratorFromFunction)(()=>r.next())})}async function u(r,e){return o.WebcamIterator.create(r,e)}async function p(r){return a.MicrophoneIterator.create(r)}
},{"./dataset":"Mmcf","./datasets/csv_dataset":"IBHK","./iterators/lazy_iterator":"J4LB","./iterators/microphone_iterator":"w9BO","./iterators/webcam_iterator":"cAzF","./sources/url_data_source":"wzph"}],"vb3M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"array",{enumerable:!0,get:function(){return e.array}}),Object.defineProperty(exports,"Dataset",{enumerable:!0,get:function(){return e.Dataset}}),Object.defineProperty(exports,"zip",{enumerable:!0,get:function(){return e.zip}}),Object.defineProperty(exports,"CSVDataset",{enumerable:!0,get:function(){return r.CSVDataset}}),Object.defineProperty(exports,"TextLineDataset",{enumerable:!0,get:function(){return t.TextLineDataset}}),Object.defineProperty(exports,"csv",{enumerable:!0,get:function(){return n.csv}}),Object.defineProperty(exports,"func",{enumerable:!0,get:function(){return n.func}}),Object.defineProperty(exports,"generator",{enumerable:!0,get:function(){return n.generator}}),Object.defineProperty(exports,"microphone",{enumerable:!0,get:function(){return n.microphone}}),Object.defineProperty(exports,"webcam",{enumerable:!0,get:function(){return n.webcam}}),Object.defineProperty(exports,"FileDataSource",{enumerable:!0,get:function(){return a.FileDataSource}}),Object.defineProperty(exports,"URLDataSource",{enumerable:!0,get:function(){return u.URLDataSource}}),Object.defineProperty(exports,"version_data",{enumerable:!0,get:function(){return o.version}});var e=require("./dataset"),r=require("./datasets/csv_dataset"),t=require("./datasets/text_line_dataset"),n=require("./readers"),a=require("./sources/file_data_source"),u=require("./sources/url_data_source"),o=require("./version");
},{"./dataset":"Mmcf","./datasets/csv_dataset":"IBHK","./datasets/text_line_dataset":"XqC6","./readers":"zWUb","./sources/file_data_source":"S8Uz","./sources/url_data_source":"wzph","./version":"yMuw"}],"A1gl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertNotComplex=r;var e=require("@tensorflow/tfjs-core");function r(r,t){Array.isArray(r)||(r=[r]),r.forEach(r=>{null!=r&&e.util.assert("complex64"!==r.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}
},{"@tensorflow/tfjs-core":"tKjQ"}],"W90s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MathBackendCPU=void 0;var t=o(require("@tensorflow/tfjs-core")),e=o(require("seedrandom")),r=require("./cpu_util");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=o?Object.getOwnPropertyDescriptor(t,a):null;n&&(n.get||n.set)?Object.defineProperty(r,a,n):r[a]=t[a]}return r.default=t,e&&e.set(t,r),r}const a=t.kernel_impls.nonMaxSuppressionV3Impl,n=t.kernel_impls.split,i=t.kernel_impls.tile,l=t.kernel_impls.topkImpl,d=t.kernel_impls.whereImpl;class c extends t.KernelBackend{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new t.DataStorage(this,(0,t.engine)())}write(e,r,s){this.firstUse&&(this.firstUse=!1,(0,t.env)().get("IS_NODE")&&t.backend_util.warn("\n============================\nHi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const o={};return this.data.set(o,{values:e,dtype:s,refCount:1}),o}makeTensorInfo(e,r,s){let o;if("string"===r&&null!=s&&s.length>0&&t.util.isString(s[0])){const a=s.map(e=>t.util.encodeString(e));o=this.write(a,e,r)}else o=this.write(s,e,r);return{dataId:o,shape:e,dtype:r}}incRef(t){this.data.get(t).refCount++}decRef(t){if(this.data.has(t)){this.data.get(t).refCount--}}move(t,e,r,s){this.data.set(t,{values:e,dtype:s,refCount:1})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(e){const{dtype:r,complexTensorInfos:s}=this.data.get(e);if("complex64"===r){const e=this.readSync(s.real.dataId),r=this.readSync(s.imag.dataId);return t.backend_util.mergeRealAndImagArrays(e,r)}return this.data.get(e).values}bufferSync(e){const r=this.readSync(e.dataId);let s=r;if("string"===e.dtype)try{s=r.map(e=>t.util.decodeString(e))}catch(o){throw new Error("Failed to decode encoded string bytes into utf-8")}return t.buffer(e.shape,e.dtype,s)}makeOutput(e,r,s){const o=this.write(e,r,s);return(0,t.engine)().makeTensorFromDataId(o,r,s,this)}disposeData(t){if(this.data.has(t)){const{complexTensorInfos:e}=this.data.get(t);null!=e&&(this.disposeData(e.real.dataId),this.disposeData(e.imag.dataId)),this.data.delete(t)}}disposeIntermediateTensorInfo(t){const e=t.dataId;if(this.data.has(e)){const t=this.data.get(e);t.refCount--,t.refCount<1&&this.disposeData(e)}}async time(e){const r=t.util.now();return e(),{kernelMs:t.util.now()-r}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}stridedSlice(e,s,o,a){(0,r.assertNotComplex)(e,"stridedSlice");const n=t.slice_util.computeOutShape(s,o,a);if(n.some(t=>0===t))return t.tensor([],n);const i=t.buffer(n,e.dtype),l=this.bufferSync(e);for(let t=0;t<i.size;t++){const e=i.indexToLoc(t),r=new Array(e.length);for(let t=0;t<r.length;t++)r[t]=e[t]*a[t]+s[t];i.set(l.get(...r),...e)}return i.toTensor()}diag(e){const r=this.readSync(e.dataId),s=t.buffer([e.size,e.size],e.dtype),o=s.values;for(let t=0;t<r.length;t++)o[t*e.size+t]=r[t];return s.toTensor()}unstack(e,r){const s=e.shape[r],o=new Array(e.rank-1);let a=0;for(let t=0;t<e.rank;t++)t!==r&&(o[a++]=e.shape[t]);const n=new Array(e.rank).fill(0),i=e.shape.slice();i[r]=1;const l=new Array(s);for(let d=0;d<l.length;d++)n[r]=d,l[d]=t.slice(e,n,i).reshape(o);return l}reverse(e,s){(0,r.assertNotComplex)(e,"reverse");const o=t.buffer(e.shape,e.dtype),a=this.bufferSync(e);for(let t=0;t<o.size;t++){const r=o.indexToLoc(t),n=r.slice();s.forEach(t=>n[t]=e.shape[t]-1-n[t]),o.set(a.get(...n),...r)}return o.toTensor()}neg(e){return(0,r.assertNotComplex)(e,"neg"),t.mul(t.scalar(-1),e)}addN(e){(0,r.assertNotComplex)(e,"addN");const s=e.map(t=>this.readSync(t.dataId)),o=t.buffer(e[0].shape,e[0].dtype),a=o.values;for(let t=0;t<e.length;t++){const e=s[t];for(let t=0;t<a.length;t++)a[t]+=e[t]}return o.toTensor()}softmax(e,r){const s=t.util.parseAxisParam([r],e.shape),o=(0,t.max)(e,s),a=t.backend_util.expandShapeToKeepDim(o.shape,s),n=t.sub(e,o.reshape(a)),i=t.exp(n),l=this.sum(i,s).reshape(a);return t.div(i,l)}pow(t,e){return(0,r.assertNotComplex)([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.pow(t,e))}floorDiv(t,e){(0,r.assertNotComplex)([t,e],"floorDiv");return this.broadcastedBinaryOp(t,e,"int32",(t,e)=>Math.floor(t/e))}sum(e,s){(0,r.assertNotComplex)(e,"sum"),t.backend_util.assertAxesAreInnerMostDims("sum",s,e.rank);const[o,a]=t.backend_util.computeOutAndReduceShapes(e.shape,s),n=(0,t.upcastType)(e.dtype,"int32"),i=t.zeros(o,n),l=t.util.sizeFromShape(a),d=this.readSync(i.dataId),c=this.readSync(e.dataId);for(let t=0;t<d.length;++t){const e=t*l;let r=0;for(let t=0;t<l;++t)r+=c[e+t];d[t]=r}return i}prod(e,s){(0,r.assertNotComplex)(e,"sum");const[o,a]=t.backend_util.computeOutAndReduceShapes(e.shape,s),n=(0,t.upcastType)(e.dtype,"int32"),i=t.zeros(o,n),l=t.util.sizeFromShape(a),d=this.readSync(i.dataId),c=this.readSync(e.dataId);for(let t=0;t<d.length;++t){const e=t*l;let r=1;for(let t=0;t<l;++t)r*=c[e+t];d[t]=r}return i}unsortedSegmentSum(e,s,o){(0,r.assertNotComplex)(e,"unsortedSegmentSum");const a=[],n=e.rank-s.rank;for(let t=0;t<n;++t)s=s.expandDims(t+1);for(let r=0;r<o;++r){const o=t.scalar(r,"int32"),n=t.equal(o,s).asType("float32").mul(e).sum(0);a.push(n)}return t.stack(a)}argMin(e,s){(0,r.assertNotComplex)(e,"argMin");const o=[s];t.backend_util.assertAxesAreInnerMostDims("argMin",o,e.rank);const[a,n]=t.backend_util.computeOutAndReduceShapes(e.shape,o),i=t.zeros(a,"int32"),l=t.util.sizeFromShape(n),d=this.readSync(i.dataId),c=this.readSync(e.dataId);for(let t=0;t<d.length;++t){const e=t*l;let r=c[e],s=0;for(let t=0;t<l;++t){const o=c[e+t];o<r&&(r=o,s=t)}d[t]=s}return i}argMax(e,s){(0,r.assertNotComplex)(e,"argMax");const o=[s];t.backend_util.assertAxesAreInnerMostDims("argMax",o,e.rank);const[a,n]=t.backend_util.computeOutAndReduceShapes(e.shape,o),i=t.zeros(a,"int32"),l=t.util.sizeFromShape(n),d=this.readSync(i.dataId),c=this.readSync(e.dataId);for(let t=0;t<d.length;++t){const e=t*l;let r=c[e],s=0;for(let t=0;t<l;++t){const o=c[e+t];o>r&&(r=o,s=t)}d[t]=s}return i}cumsum(e,s,o,a){if((0,r.assertNotComplex)(e,"cumsum"),s!==e.rank-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${e.rank-1} `+`but got axis=${s}`);const n=(0,t.upcastType)(e.dtype,"int32"),i=t.zeros(e.shape,n),l=this.readSync(i.dataId),d=this.readSync(e.dataId),c=e.shape[e.rank-1],h=a?(t,e)=>t+c-e-1:(t,e)=>t+e;for(let t=0;t<d.length;t+=c)for(let e=0;e<c;e++){const r=h(t,e);if(0===e)l[r]=o?0:d[r];else{const s=h(t,e-1);l[r]=o?d[s]+l[s]:d[r]+l[s]}}return i}equal(t,e){return(0,r.assertNotComplex)([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t===e?1:0)}notEqual(t,e){return(0,r.assertNotComplex)([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t!==e?1:0)}less(t,e){return(0,r.assertNotComplex)([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<e?1:0)}lessEqual(t,e){return(0,r.assertNotComplex)([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<=e?1:0)}greater(t,e){return(0,r.assertNotComplex)([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>e?1:0)}greaterEqual(t,e){return(0,r.assertNotComplex)([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>=e?1:0)}logicalAnd(t,e){return(0,r.assertNotComplex)([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t&&e)}logicalOr(t,e){return(0,r.assertNotComplex)([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t||e)}select(e,s,o){(0,r.assertNotComplex)([e,s,o],"select");const a=this.readSync(e.dataId),n=this.readSync(s.dataId),i=this.readSync(o.dataId),l=t.zeros(s.shape,(0,t.upcastType)(s.dtype,o.dtype)),d=this.readSync(l.dataId);let c=0;const h=0===e.rank||e.rank>1||1===s.rank?1:t.util.sizeFromShape(s.shape.slice(1));for(let t=0;t<a.length;t++)for(let e=0;e<h;e++)1===a[t]?d[c++]=n[t]:d[c++]=i[t];return l}where(t){(0,r.assertNotComplex)([t],"where");const e=this.readSync(t.dataId);return d(t.shape,e)}topk(t,e,s){(0,r.assertNotComplex)(t,"topk");const o=this.readSync(t.dataId);return l(o,t.shape,t.dtype,e,s)}min(e,s){(0,r.assertNotComplex)(e,"min"),t.backend_util.assertAxesAreInnerMostDims("min",s,e.rank);const[o,a]=t.backend_util.computeOutAndReduceShapes(e.shape,s),n=t.zeros(o,e.dtype),i=t.util.sizeFromShape(a),l=this.readSync(n.dataId),d=this.readSync(e.dataId);for(let t=0;t<l.length;++t){const e=t*i;let r=d[e];for(let t=0;t<i;++t){const s=d[e+t];s<r&&(r=s)}l[t]=r}return n}minimum(t,e){return(0,r.assertNotComplex)([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.min(t,e))}mod(t,e){return(0,r.assertNotComplex)([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const r=t%e;return t<0&&e<0||t>=0&&e>=0?r:(r+e)%e})}maximum(t,e){return(0,r.assertNotComplex)([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.max(t,e))}all(e,s){(0,r.assertNotComplex)(e,"all"),t.backend_util.assertAxesAreInnerMostDims("all",s,e.rank);const[o,a]=t.backend_util.computeOutAndReduceShapes(e.shape,s),n=t.zeros(o,e.dtype),i=t.util.sizeFromShape(a),l=this.readSync(n.dataId),d=this.readSync(e.dataId);for(let t=0;t<l.length;++t){const e=t*i;let r=d[e];for(let t=0;t<i;++t){const s=d[e+t];r=r&&s}l[t]=r}return n}any(e,s){(0,r.assertNotComplex)(e,"any"),t.backend_util.assertAxesAreInnerMostDims("any",s,e.rank);const[o,a]=t.backend_util.computeOutAndReduceShapes(e.shape,s),n=t.zeros(o,e.dtype),i=t.util.sizeFromShape(a),l=this.readSync(n.dataId),d=this.readSync(e.dataId);for(let t=0;t<l.length;++t){const e=t*i;let r=d[e];for(let t=0;t<i;++t){const s=d[e+t];r=r||s}l[t]=r}return n}squaredDifference(t,e){return(0,r.assertNotComplex)([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const r=t-e;return r*r})}eluDer(t,e){(0,r.assertNotComplex)([t,e],"eluDer");const s=new Float32Array(e.size),o=this.readSync(e.dataId),a=this.readSync(t.dataId);for(let r=0;r<o.length;++r){const t=o[r];s[r]=t>=1?a[r]:a[r]*(t+1)}return this.makeOutput(s,e.shape,"float32")}atan2(t,e){return(0,r.assertNotComplex)([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.atan2(t,e))}tile(t,e){return(0,r.assertNotComplex)(t,"tile"),i(this.bufferSync(t),e)}gather(e,s,o){(0,r.assertNotComplex)([e,s],"gather");const a=e.shape.slice(),n=this.readSync(s.dataId);a[o]=n.length;const i=t.buffer(a,e.dtype),l=this.bufferSync(e);for(let t=0;t<i.size;++t){const e=i.indexToLoc(t),r=e.slice();r[o]=n[e[o]];const s=l.locToIndex(r);i.values[t]=l.values[s]}return i.toTensor()}batchToSpaceND(e,s,o){(0,r.assertNotComplex)([e],"batchToSpaceND");const a=s.reduce((t,e)=>t*e),n=t.backend_util.getReshaped(e.shape,s,a),i=t.backend_util.getPermuted(n.length,s.length),l=t.backend_util.getReshapedPermuted(e.shape,s,a),d=t.backend_util.getSliceBeginCoords(o,s.length),c=t.backend_util.getSliceSize(l,o,s.length);return t.transpose(e.reshape(n),i).reshape(l).slice(d,c)}pool3d(e,s,o){(0,r.assertNotComplex)(e,"pool3d");const a=s.strideDepth,n=s.strideHeight,i=s.strideWidth,l=s.dilationDepth,d=s.dilationHeight,c=s.dilationWidth,h=s.effectiveFilterDepth,p=s.effectiveFilterHeight,u=s.effectiveFilterWidth,f=s.padInfo.front,m=s.padInfo.top,y=s.padInfo.left,g="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=this.readSync(e.dataId),b=t.buffer(s.outShape,e.dtype),I=b.values,x=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],k=s.outShape[2]*s.outShape[3]*s.outShape[4],N=s.outShape[3]*s.outShape[4],M=s.outShape[4];for(let t=0;t<s.batchSize;++t){const r=t*x,b=t*e.strides[0];for(let t=0;t<s.inChannels;++t)for(let x=0;x<s.outDepth;++x){const C=x*a-f;let D=C;for(;D<0;)D+=l;const z=Math.min(s.inDepth,h+C),w=r+x*k;for(let r=0;r<s.outHeight;++r){const a=r*n-m;let h=a;for(;h<0;)h+=d;const f=Math.min(s.inHeight,p+a),x=w+r*N;for(let r=0;r<s.outWidth;++r){const a=r*i-y;let n=a;for(;n<0;)n+=c;const p=Math.min(s.inWidth,u+a),m=x+r*M;let k=g,N=0,C=0;for(let r=D;r<z;r+=l){const s=b+r*e.strides[1];for(let r=h;r<f;r+=d){const a=s+r*e.strides[2];for(let r=n;r<p;r+=c){const s=S[a+r*e.strides[3]+t];if("max"===o&&s>k?k=s:"avg"===o&&(N+=s,C++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}I[m+t]="avg"===o?N/C:k}}}}return b.toTensor()}avgPool3d(t,e){return(0,r.assertNotComplex)(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()}avgPool3dBackprop(e,s,o){(0,r.assertNotComplex)([e,s],"avgPool3dBackprop");const a=o.strideDepth,n=o.strideHeight,i=o.strideWidth,l=o.filterDepth,d=o.filterHeight,c=o.filterWidth,h=o.dilationDepth,p=o.dilationHeight,u=o.dilationWidth,f=o.effectiveFilterDepth,m=o.effectiveFilterHeight,y=o.effectiveFilterWidth,g=f-1-o.padInfo.front,S=y-1-o.padInfo.left,b=m-1-o.padInfo.top,I=t.buffer(s.shape,"float32"),x=1/(l*d*c),k=this.bufferSync(e);for(let t=0;t<o.batchSize;++t)for(let e=0;e<o.inChannels;++e)for(let r=0;r<o.inDepth;++r)for(let s=0;s<o.inHeight;++s)for(let l=0;l<o.inWidth;++l){const d=r-g,c=s-b,N=l-S;let M=0;for(let r=0;r<f;r+=h){const s=(d+r)/a;if(!(s<0||s>=o.outDepth||Math.floor(s)!==s))for(let r=0;r<m;r+=p){const a=(c+r)/n;if(!(a<0||a>=o.outHeight||Math.floor(a)!==a))for(let r=0;r<y;r+=u){const n=(N+r)/i;n<0||n>=o.outWidth||Math.floor(n)!==n||(M+=k.get(t,s,a,n,e))}}}I.set(M*x,t,r,s,l,e)}return I.toTensor()}maxPool3d(t,e){return(0,r.assertNotComplex)(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()}maxPool3dPositions(e,r){const s=t.buffer(r.outShape,"int32"),o=r.strideDepth,a=r.strideHeight,n=r.strideWidth,i=r.dilationDepth,l=r.dilationHeight,d=r.dilationWidth,c=r.effectiveFilterDepth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,u=r.padInfo.front,f=r.padInfo.top,m=r.padInfo.left,y=this.bufferSync(e);for(let t=0;t<r.batchSize;++t)for(let e=0;e<r.inChannels;++e)for(let g=0;g<r.outDepth;++g){const S=g*o-u;let b=S;for(;b<0;)b+=i;const I=Math.min(r.inDepth,c+S);for(let o=0;o<r.outHeight;++o){const c=o*a-f;let u=c;for(;u<0;)u+=l;const x=Math.min(r.inHeight,h+c);for(let a=0;a<r.outWidth;++a){const f=a*n-m;let k=f;for(;k<0;)k+=d;const N=Math.min(r.inWidth,p+f);let M=Number.NEGATIVE_INFINITY,C=-1;for(let r=b;r<I;r+=i){const s=r-S;for(let o=u;o<x;o+=l){const a=o-c;for(let n=k;n<N;n+=d){const i=n-f,l=y.get(t,r,o,n,e);l>=M&&(M=l,C=s*h*p+a*h+i)}}}s.set(C,t,g,o,a,e)}}}return s.toTensor()}maxPool3dBackprop(e,s,o,a){(0,r.assertNotComplex)([s,o],"maxPool3dBackprop");const n=this.maxPool3dPositions(s,a),i=a.strideDepth,l=a.strideHeight,d=a.strideWidth,c=a.dilationDepth,h=a.dilationHeight,p=a.dilationWidth,u=a.effectiveFilterDepth,f=a.effectiveFilterHeight,m=a.effectiveFilterWidth,y=u-1-a.padInfo.front,g=m-1-a.padInfo.left,S=f-1-a.padInfo.top,b=t.buffer(s.shape,"float32"),I=this.bufferSync(n),x=this.bufferSync(e);for(let t=0;t<a.batchSize;++t)for(let e=0;e<a.inChannels;++e)for(let r=0;r<a.inDepth;++r)for(let s=0;s<a.inHeight;++s)for(let o=0;o<a.inWidth;++o){const n=r-y,k=s-S,N=o-g;let M=0;for(let r=0;r<u;r+=c){const s=(n+r)/i;if(!(s<0||s>=a.outDepth||Math.floor(s)!==s))for(let o=0;o<f;o+=h){const n=(k+o)/l;if(!(n<0||n>=a.outHeight||Math.floor(n)!==n))for(let i=0;i<m;i+=p){const l=(N+i)/d;if(l<0||l>=a.outWidth||Math.floor(l)!==l)continue;const c=u*f*m-1-I.get(t,s,n,l,e)===r*f*m+o*m+i?1:0;0!==c&&(M+=x.get(t,s,n,l,e)*c)}}}b.set(M,t,r,s,o,e)}return b.toTensor()}resizeBilinear(e,s,o,a){(0,r.assertNotComplex)(e,"resizeBilinear");const[n,i,l,d]=e.shape,c=this.readSync(e.dataId),h=new Float32Array(t.util.sizeFromShape([n,s,o,d])),p=[a&&s>1?i-1:i,a&&o>1?l-1:l],u=[a&&s>1?s-1:s,a&&o>1?o-1:o];let f=0;const m=p[0]/u[0],y=p[1]/u[1];for(let t=0;t<n;t++)for(let r=0;r<s;r++){const s=m*r,a=Math.floor(s),n=s-a,p=Math.min(i-1,Math.ceil(s)),u=t*e.strides[0]+a*e.strides[1],g=t*e.strides[0]+p*e.strides[1];for(let t=0;t<o;t++){const r=y*t,s=Math.floor(r),o=r-s,a=Math.min(l-1,Math.ceil(r)),i=u+s*e.strides[2],p=g+s*e.strides[2],m=u+a*e.strides[2],S=g+a*e.strides[2];for(let t=0;t<d;t++){const e=c[i+t],r=c[p+t],s=e+(c[m+t]-e)*o,a=s+(r+(c[S+t]-r)*o-s)*n;h[f++]=a}}}return t.tensor(h,[n,s,o,d])}resizeBilinearBackprop(e,s,o){(0,r.assertNotComplex)([e,s],"resizeBilinearBackprop");const[a,n,i,l]=s.shape,[,d,c]=e.shape,h=new Float32Array(a*n*i*l),p=[o&&d>1?n-1:n,o&&c>1?i-1:i],u=[o&&d>1?d-1:d,o&&c>1?c-1:c],f=p[0]/u[0],m=p[1]/u[1],y=this.readSync(e.dataId);let g=0;for(let t=0;t<a;t++){const e=t*s.strides[0];for(let t=0;t<d;t++){const r=t*f,o=Math.floor(r),a=Math.min(Math.ceil(r),n-1),d=e+o*s.strides[1],p=e+a*s.strides[1],u=r-o,S=1-u;for(let t=0;t<c;t++){const e=t*m,r=Math.floor(e),o=Math.min(Math.ceil(e),i-1),a=e-r,n=1-a,c=d+r*s.strides[2],f=d+o*s.strides[2],b=p+r*s.strides[2],I=p+o*s.strides[2],x=S*n,k=S*a,N=u*n,M=u*a;for(let t=0;t<l;t++){const e=y[g++];h[c+t]+=e*x,h[f+t]+=e*k,h[b+t]+=e*N,h[I+t]+=e*M}}}}return t.tensor4d(h,[a,i,n,l],s.dtype)}resizeNearestNeighbor(e,s,o,a){(0,r.assertNotComplex)(e,"resizeNearestNeighbor");const[n,i,l,d]=e.shape,c=this.readSync(e.dataId),h=new Float32Array(n*s*o*d),p=[a&&s>1?i-1:i,a&&o>1?l-1:l],u=[a&&s>1?s-1:s,a&&o>1?o-1:o],f=p[0]/u[0],m=p[1]/u[1];let y=0;for(let t=0;t<n;t++){const r=t*e.strides[0];for(let t=0;t<s;t++){const s=f*t,n=r+Math.min(i-1,a?Math.round(s):Math.floor(s))*e.strides[1];for(let t=0;t<o;t++){const r=m*t,s=n+Math.min(l-1,a?Math.round(r):Math.floor(r))*e.strides[2];for(let t=0;t<d;t++){const e=c[s+t];h[y++]=e}}}}return t.tensor(h,[n,s,o,d],e.dtype)}resizeNearestNeighborBackprop(e,s,o){(0,r.assertNotComplex)([e,s],"resizeNearestNeighborBackprop");const[a,n,i,l]=s.shape,[,d,c]=e.shape,h=new Float32Array(a*n*i*l),p=this.readSync(e.dataId),u=[o&&d>1?n-1:n,o&&c>1?i-1:i],f=[o&&d>1?d-1:d,o&&c>1?c-1:c],m=u[0]/f[0],y=u[1]/f[1],g=1/m,S=1/y,b=2*Math.ceil(g)+2,I=2*Math.ceil(S)+2;for(let t=0;t<a;t++){const r=t*s.strides[0];for(let t=0;t<n;t++){const a=r+t*s.strides[1],u=Math.floor(t*g),f=Math.floor(u-b/2);for(let g=0;g<i;g++){const u=a+g*s.strides[2],x=Math.floor(g*S),k=Math.floor(x-I/2);for(let s=0;s<l;s++){let a=0;for(let l=0;l<b;l++){const h=l+f;if(h<0||h>=d)continue;const u=r+h*e.strides[1],S=h*m;if(t===Math.min(n-1,o?Math.round(S):Math.floor(S)))for(let t=0;t<I;t++){const r=t+k;if(r<0||r>=c)continue;const n=u+r*e.strides[2],l=r*y;g===Math.min(i-1,o?Math.round(l):Math.floor(l))&&(a+=p[n+s])}}h[u+s]=a}}}}return t.tensor4d(h,s.shape,s.dtype)}localResponseNormalization4D(e,s,o,a,n){(0,r.assertNotComplex)(e,"localResponseNormalization4D");const i=e.shape[3],l=i-1,d=this.readSync(e.dataId),c=e.size,h=new Float32Array(c);function p(t){const e=t%i;let r=t-e+Math.max(0,e-s);const o=t-e+Math.min(e+s,l);let a=0;for(;r<=o;r++){const t=d[r];a+=t*t}return a}for(let t=0;t<c;t++){const e=p(t),r=d[t]*Math.pow(o+a*e,-n);h[t]=r}return t.tensor4d(h,e.shape)}LRNGrad(e,s,o,a,n,i,l){(0,r.assertNotComplex)(e,"LRNGrad");const d=e.shape[3],c=this.readSync(e.dataId),h=this.readSync(s.dataId),p=this.readSync(o.dataId),u=new Float32Array(e.size),f=e.size;for(let t=0;t<f;t++){const e=t%d,r=t-e+Math.max(0,e-a),s=t-e+Math.min(d,e+a+1);let o=0;for(let t=r;t<s;t++)o+=Math.pow(h[t],2);o=i*o+n;for(let a=r;a<s;a++){let e=-2*i*l*h[a]*p[t]/o;t===a&&(e+=Math.pow(o,-l)),e*=c[t],u[a]+=e}}return t.tensor4d(u,e.shape)}multinomial(s,o,a,n){(0,r.assertNotComplex)(s,"multinomial");const i=o?s:t.softmax(s),l=i.shape[0],d=i.shape[1],c=t.zeros([l,a],"int32"),h=this.readSync(c.dataId),p=this.readSync(i.dataId);for(let t=0;t<l;++t){const r=t*d,s=new Float32Array(d-1);s[0]=p[r];for(let t=1;t<s.length;++t)s[t]=s[t-1]+p[r+t];const o=e.alea(n.toString()),i=t*a;for(let t=0;t<a;++t){const e=o();h[i+t]=s.length;for(let r=0;r<s.length;r++)if(e<s[r]){h[i+t]=r;break}}}return c}oneHot(e,s,o,a){(0,r.assertNotComplex)(e,"oneHot");const n=new Float32Array(e.size*s);n.fill(a);const i=this.readSync(e.dataId);for(let t=0;t<e.size;++t)i[t]>=0&&i[t]<s&&(n[t*s+i[t]]=o);return t.tensor2d(n,[e.size,s],"int32")}nonMaxSuppression(t,e,s,o,n){(0,r.assertNotComplex)(t,"nonMaxSuppression");const i=this.readSync(t.dataId),l=this.readSync(e.dataId);return a(i,l,s,o,n)}depthToSpace(e,r,s){t.util.assert("NHWC"===s,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`),t.util.assert(r>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${r}`);const o=e.shape[0],a=e.shape[1],n=e.shape[2],i=e.shape[3],l=a*r,d=n*r,c=i/(r*r),h=this.readSync(e.dataId),p=new Float32Array(o*l*d*c);let u=0;for(let t=0;t<o;++t)for(let e=0;e<l;++e){const s=Math.floor(e/r),o=e%r;for(let e=0;e<d;++e){const l=Math.floor(e/r),d=(o*r+e%r)*c;for(let e=0;e<c;++e){const r=e+d+i*(l+n*(s+a*t));p[u++]=h[r]}}}return t.tensor4d(p,[o,l,d,c])}broadcastedBinaryOp(e,r,s,o){const a=t.backend_util.assertAndGetBroadcastShape(e.shape,r.shape),n=t.buffer(a,s),i=this.readSync(e.dataId),l=this.readSync(r.dataId),d=t.backend_util.getBroadcastDims(e.shape,a),c=t.backend_util.getBroadcastDims(r.shape,a),h=n.values;if(d.length+c.length===0)for(let t=0;t<h.length;++t)h[t]=o(i[t%i.length],l[t%l.length]);else{const t=this.bufferSync(e),s=this.bufferSync(r);for(let a=0;a<h.length;++a){const p=n.indexToLoc(a),u=p.slice(-e.rank);d.forEach(t=>u[t]=0);const f=t.locToIndex(u),m=p.slice(-r.rank);c.forEach(t=>m[t]=0);const y=s.locToIndex(m);h[a]=o(i[f],l[y])}}return n.toTensor()}split(t,e,r){return n(t,e,r)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}cropAndResize(e,r,s,o,a,n){const[i,l,d,c]=e.shape,h=r.shape[0],[p,u]=o,f=t.buffer([h,p,u,c],"float32"),m=this.readSync(r.dataId),y=this.readSync(s.dataId),g=this.readSync(e.dataId),S=e.strides,b=f.strides;for(let t=0;t<h;t++){const e=4*t,r=m[e],s=m[e+1],o=m[e+2],h=m[e+3],I=y[t];if(I>=i)continue;const x=p>1?(o-r)*(l-1)/(p-1):0,k=u>1?(h-s)*(d-1)/(u-1):0;for(let i=0;i<p;i++){const e=p>1?r*(l-1)+i*x:.5*(r+o)*(l-1);if(e<0||e>l-1)for(let r=0;r<u;r++)for(let e=0;e<c;e++){const s=e+r*b[2]+i*b[1]+t*b[0];f.values[s]=n}else if("bilinear"===a){const r=Math.floor(e),o=Math.ceil(e),a=e-r;for(let e=0;e<u;e++){const l=u>1?s*(d-1)+e*k:.5*(s+h)*(d-1);if(l<0||l>d-1){for(let r=0;r<c;r++){const s=r+e*b[2]+i*b[1]+t*b[0];f.values[s]=n}continue}const p=Math.floor(l),m=Math.ceil(l),y=l-p;for(let s=0;s<c;s++){let n=s+p*S[2]+r*S[1]+I*S[0];const l=g[n],d=g[n=s+m*S[2]+r*S[1]+I*S[0]],c=g[n=s+p*S[2]+o*S[1]+I*S[0]],h=l+(d-l)*y,u=c+(g[n=s+m*S[2]+o*S[1]+I*S[0]]-c)*y;n=s+e*b[2]+i*b[1]+t*b[0],f.values[n]=h+(u-h)*a}}}else for(let r=0;r<u;++r){const o=u>1?s*(d-1)+r*k:.5*(s+h)*(d-1);if(o<0||o>d-1){for(let e=0;e<c;e++){const s=e+r*b[2]+i*b[1]+t*b[0];f.values[s]=n}continue}const a=Math.round(o),l=Math.round(e);for(let e=0;e<c;e++){const s=e+a*S[2]+l*S[1]+I*S[0],o=e+r*b[2]+i*b[1]+t*b[0];f.values[o]=g[s]}}}}return f.toTensor()}sparseToDense(e,r,s,o){const{sliceRank:a,numUpdates:n,sliceSize:i,strides:l,outputSize:d}=t.backend_util.calculateShapes(r,e,s);return this.scatter(e,r,s,d,i,n,a,l,o,!1)}gatherND(e,r){const s=r.shape,o=s[s.length-1],[a,n,i,l]=t.backend_util.prepareAndValidate(e,r);if(0===n)return t.tensor([],a,e.dtype);const d=new t.TensorBuffer([n,i],e.dtype),c=this.readSync(r.dataId),h=this.readSync(e.dataId);for(let t=0;t<n;t++){const r=[];let s=0;for(let e=0;e<o;e++){const a=c[t*o+e];s+=a*l[e],r.push(a)}if(s<0||s>=e.size/i)throw new Error(`Invalid indices: ${r} does not index into ${e.shape}`);for(let e=0;e<i;e++)d.values[t*i+e]=h[s*i+e]}return d.toTensor().reshape(a)}scatterND(e,r,s){const{sliceRank:o,numUpdates:a,sliceSize:n,strides:i,outputSize:l}=t.backend_util.calculateShapes(r,e,s),d=t.scalar(0);return this.scatter(e,r,s,l,n,a,o,i,d,!0)}onesLike(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return t.fill(e.shape,1,e.dtype)}zerosLike(e){const r=t.util.getArrayFromDType(e.dtype,t.util.sizeFromShape(e.shape));return this.makeOutput(r,e.shape,e.dtype)}linspace(e,r,s){return t.backend_util.linspaceImpl(e,r,s)}scatter(e,r,s,o,a,n,i,l,d,c){const h=[o/a,a],p=this.readSync(e.dataId),u=this.readSync(r.dataId);if(0===o)return t.tensor([],s,r.dtype);const f=new t.TensorBuffer(h,r.dtype);f.values.fill(this.readSync(d.dataId)[0]);for(let t=0;t<n;t++){const e=[];let n=0;for(let r=0;r<i;r++){const s=p[t*i+r];e.push(s),n+=s*l[r]}if(n<0||n>=o/a)throw new Error(`Invalid indices: ${e} does not index into ${s}`);for(let s=0;s<a;s++)c?f.values[n*a+s]+=u[t*a+s]:f.values[n*a+s]=0===r.rank?u[0]:u[t*a+s]}return f.toTensor().reshape(s)}}exports.MathBackendCPU=c;
},{"@tensorflow/tfjs-core":"tKjQ","seedrandom":"izQb","./cpu_util":"A1gl"}],"r8e2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simpleAbsImpl=t,exports.absConfig=exports.abs=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const t=new Float32Array(e.length);for(let a=0;a<e.length;++a)t[a]=Math.abs(e[a]);return t}const a=a=>{const{x:s}=a.inputs,o=a.backend;let r=new Float32Array(e.util.sizeFromShape(s.shape));if("complex64"!==s.dtype){r=t(o.data.get(s.dataId).values)}else{const e=o.data.get(s.dataId),t=e.complexTensorInfos.real,a=e.complexTensorInfos.imag,n=o.data.get(t.dataId).values,l=o.data.get(a.dataId).values;for(let s=0;s<n.length;s++){const e=n[s],t=l[s];r[s]=Math.hypot(e,t)}}return o.makeOutput(r,s.shape,"float32")};exports.abs=a;const s={kernelName:e.Abs,backendName:"cpu",kernelFunc:a};exports.absConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ"}],"pLxa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimpleBinaryKernelImpl=t;var e=require("@tensorflow/tfjs-core");function t(t){return(l,r,o,n,i)=>{const c=e.backend_util.assertAndGetBroadcastShape(l,r),s=c.length,u=e.util.computeStrides(c),a=e.util.sizeFromShape(c),d=e.util.getTypedArrayFromDType(i,a),h=l.length,g=r.length,p=e.util.computeStrides(l),f=e.util.computeStrides(r),m=e.backend_util.getBroadcastDims(l,c),S=e.backend_util.getBroadcastDims(r,c);if(m.length+S.length===0)for(let e=0;e<d.length;++e)d[e]=t(o[e%o.length],n[e%n.length]);else for(let x=0;x<d.length;++x){const l=e.util.indexToLoc(x,s,u),r=l.slice(-h);m.forEach(e=>r[e]=0);const i=e.util.locToIndex(r,h,p),c=l.slice(-g);S.forEach(e=>c[e]=0);const a=e.util.locToIndex(c,g,f);d[x]=t(o[i],n[a])}return[d,c]}}
},{"@tensorflow/tfjs-core":"tKjQ"}],"EwVZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=a,exports.complexConfig=void 0;var e=require("@tensorflow/tfjs-core");function a(e){const{inputs:a,backend:o}=e,{real:t,imag:n}=a,r=o.data.get(t.dataId).values,s=o.data.get(n.dataId).values,l=o.makeTensorInfo(t.shape,"complex64");return o.data.get(l.dataId).complexTensorInfos={real:o.makeTensorInfo(t.shape,"float32",r),imag:o.makeTensorInfo(n.shape,"float32",s)},l}const o={kernelName:e.Complex,backendName:"cpu",kernelFunc:a};exports.complexConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ"}],"y2xn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:n}=e,{x:d}=t;return n.incRef(d.dataId),{dataId:d.dataId,shape:d.shape,dtype:d.dtype}}const n={kernelName:e.Identity,backendName:"cpu",kernelFunc:t};exports.identityConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ"}],"KspA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=t,exports.realConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:a}=e,{input:r}=t,n=a.data.get(r.dataId).complexTensorInfos.real,o=a.data.get(n.dataId).values;return a.makeTensorInfo(n.shape,n.dtype,o)}const a={kernelName:e.Real,backendName:"cpu",kernelFunc:t};exports.realConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ"}],"Aadb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=s,exports.castConfig=void 0;var e=i(require("@tensorflow/tfjs-core")),t=require("../utils/binary_impl"),r=require("./Complex"),n=require("./Identity"),o=require("./Real");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function s(a){const{inputs:i,backend:p,attrs:u}=a,{x:d}=i,{dtype:c}=u;if("complex64"===c){if("complex64"===d.dtype)return(0,n.identity)({inputs:{x:d},backend:p});const t=e.zeros(d.shape),o=s({inputs:{x:d},backend:p,attrs:{dtype:"float32"}}),a=(0,r.complex)({inputs:{real:o,imag:t},backend:p});return t.dispose(),p.disposeIntermediateTensorInfo(o),a}if("complex64"===d.dtype){const e=(0,o.real)({inputs:{input:d},backend:p}),t=s({inputs:{x:e},backend:p,attrs:{dtype:c}});return p.disposeIntermediateTensorInfo(e),t}if(!e.util.hasEncodingLoss(d.dtype,c)){const e=(0,n.identity)({inputs:{x:d},backend:p});return{dataId:e.dataId,shape:e.shape,dtype:c}}if("int32"===c){const e=p.data.get(d.dataId).values,t=Int32Array.from(e);return p.makeTensorInfo(d.shape,"int32",t)}if("bool"===c){const r=p.data.get(d.dataId).values,n=e.util.toTypedArray([0],d.dtype),[o,a]=(0,t.createSimpleBinaryKernelImpl)((e,t)=>e!==t?1:0)(d.shape,[],r,n,"bool");return p.makeTensorInfo(a,"bool",o)}throw new Error(`Error in Cast: failed to cast ${d.dtype} to ${c}`)}const p={kernelName:e.Cast,backendName:"cpu",kernelFunc:s};exports.castConfig=p;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/binary_impl":"pLxa","./Complex":"EwVZ","./Identity":"y2xn","./Real":"KspA"}],"MzwO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryKernelFunc=s,exports.createComplexBinaryKernelImpl=o;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("../kernels/Cast"),n=require("../kernels/Complex");function s(e,s,o,r){return null==o?({inputs:a,backend:n})=>{const{a:o,b:l}=a,d=n;(0,t.assertNotComplex)([o,l],e);const i=d.data.get(o.dataId).values,c=d.data.get(l.dataId).values,u=r||o.dtype,[p,m]=s(o.shape,l.shape,i,c,u);return d.makeTensorInfo(m,u,p)}:({inputs:e,backend:t})=>{const{a:l,b:d}=e,i=t;if("complex64"===l.dtype||"complex64"===d.dtype){const e=(0,a.cast)({inputs:{x:l},backend:i,attrs:{dtype:"complex64"}}),t=i.data.get(e.dataId),s=t.complexTensorInfos.real,r=t.complexTensorInfos.imag,c=i.data.get(s.dataId).values,u=i.data.get(r.dataId).values,p=(0,a.cast)({inputs:{x:d},backend:i,attrs:{dtype:"complex64"}}),m=i.data.get(p.dataId),g=m.complexTensorInfos.real,I=m.complexTensorInfos.imag,f=i.data.get(g.dataId).values,x=i.data.get(I.dataId).values,[h,T,y]=o(l.shape,d.shape,c,u,f,x),k=i.makeTensorInfo(y,"float32",h),b=i.makeTensorInfo(y,"float32",T),v=(0,n.complex)({inputs:{real:k,imag:b},backend:i});return i.disposeIntermediateTensorInfo(e),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(b),v}{const e=i.data.get(l.dataId).values,t=i.data.get(d.dataId).values,a=r||l.dtype,[n,o]=s(l.shape,d.shape,e,t,a);return i.makeTensorInfo(o,a,n)}}}function o(t){return(a,n,s,o,r,l)=>{const d=e.backend_util.assertAndGetBroadcastShape(a,n),i=e.util.sizeFromShape(d),c=d.length,u=e.util.computeStrides(d),p=e.util.getTypedArrayFromDType("float32",i),m=e.util.getTypedArrayFromDType("float32",i),g=e.backend_util.getBroadcastDims(a,d),I=e.backend_util.getBroadcastDims(n,d),f=e.backend_util.mergeRealAndImagArrays(s,o),x=e.backend_util.mergeRealAndImagArrays(r,l),h=a.length,T=e.util.computeStrides(a),y=n.length,k=e.util.computeStrides(n);if(g.length+I.length===0)for(let e=0;e<p.length;e++){const a=e%f.length,n=e%x.length,s=t(f[2*a],f[2*a+1],x[2*n],x[2*n+1]);p[e]=s.real,m[e]=s.imag}else for(let b=0;b<p.length;b++){const a=e.util.indexToLoc(b,c,u),n=a.slice(-h);g.forEach(e=>n[e]=0);const s=e.util.locToIndex(n,h,T),o=a.slice(-y);I.forEach(e=>o[e]=0);const r=e.util.locToIndex(o,y,k),l=t(f[2*s],f[2*s+1],x[2*r],x[2*r+1]);p[b]=l.real,m[b]=l.imag}return[p,m,d]}}
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","../kernels/Cast":"Aadb","../kernels/Complex":"EwVZ"}],"UlsL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addConfig=exports.add=exports.addComplexImpl=exports.addImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),d=require("../utils/kernel_utils");const l=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e+r);exports.addImpl=l;const o=(0,d.createComplexBinaryKernelImpl)((e,r,d,l)=>({real:e+d,imag:r+l}));exports.addComplexImpl=o;const t=(0,d.binaryKernelFunc)(e.Add,l,o);exports.add=t;const p={kernelName:e.Add,backendName:"cpu",kernelFunc:t};exports.addConfig=p;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/binary_impl":"pLxa","../utils/kernel_utils":"MzwO"}],"q6xE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSimpleUnaryImpl=r;var e=require("@tensorflow/tfjs-core");function r(r){return(t,o,n)=>{const l=e.util.getTypedArrayFromDType(o,t.length);for(let e=0;e<t.length;++e)l[e]=r(t[e],n);return l}}
},{"@tensorflow/tfjs-core":"tKjQ"}],"BW68":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryKernelFunc=r,exports.unaryKernelFuncFromImpl=n;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function r(r,n,o){return({inputs:s,attrs:u,backend:a})=>{const{x:p}=s;if((0,e.assertNotComplex)(p,r),"string"===p.dtype||"string"===o)throw new Error("unaryKernelFunc does not support string input/output");const i=a,c=i.data.get(p.dataId).values,d=t.util.sizeFromShape(p.shape),l=o||p.dtype,y=t.util.getArrayFromDType(l,d);for(let t=0;t<d;++t)y[t]=n(c[t],u);return i.makeTensorInfo(p.shape,l,y)}}function n(t,r,n){return({inputs:o,attrs:s,backend:u})=>{const{x:a}=o;if((0,e.assertNotComplex)(a,t),"string"===a.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const p=u,i=p.data.get(a.dataId).values,c=n||a.dtype,d=r(i,c,s);return p.makeTensorInfo(a.shape,c,d)}}
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"pkVL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilConfig=exports.ceil=exports.ceilImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),l=require("../utils/unary_utils");const i=(0,r.createSimpleUnaryImpl)(e=>Math.ceil(e));exports.ceilImpl=i;const t=(0,l.unaryKernelFuncFromImpl)(e.Ceil,i);exports.ceil=t;const o={kernelName:e.Ceil,backendName:"cpu",kernelFunc:t};exports.ceilConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_impl":"q6xE","../utils/unary_utils":"BW68"}],"aEU3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expConfig=exports.exp=exports.expImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),p=require("../utils/unary_utils");const t=(0,r.createSimpleUnaryImpl)(e=>Math.exp(e));exports.expImpl=t;const o=(0,p.unaryKernelFuncFromImpl)(e.Exp,t);exports.exp=o;const s={kernelName:e.Exp,backendName:"cpu",kernelFunc:o};exports.expConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_impl":"q6xE","../utils/unary_utils":"BW68"}],"MXIz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1Config=exports.expm1=exports.expm1Impl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),p=require("../utils/unary_utils");const t=(0,r.createSimpleUnaryImpl)(e=>Math.expm1(e));exports.expm1Impl=t;const o=(0,p.unaryKernelFuncFromImpl)(e.Expm1,t);exports.expm1=o;const m={kernelName:e.Expm1,backendName:"cpu",kernelFunc:o};exports.expm1Config=m;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_impl":"q6xE","../utils/unary_utils":"BW68"}],"Oh0i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorConfig=exports.floor=exports.floorImpl=void 0;var o=require("@tensorflow/tfjs-core"),r=require("../utils/unary_impl"),e=require("../utils/unary_utils");const l=(0,r.createSimpleUnaryImpl)(o=>Math.floor(o));exports.floorImpl=l;const t=(0,e.unaryKernelFuncFromImpl)(o.Floor,l);exports.floor=t;const s={kernelName:o.Floor,backendName:"cpu",kernelFunc:t};exports.floorConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_impl":"q6xE","../utils/unary_utils":"BW68"}],"fST7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logConfig=exports.log=exports.logImpl=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_impl"),r=require("../utils/unary_utils");const l=(0,o.createSimpleUnaryImpl)(e=>Math.log(e));exports.logImpl=l;const t=(0,r.unaryKernelFuncFromImpl)(e.Log,l);exports.log=t;const s={kernelName:e.Log,backendName:"cpu",kernelFunc:t};exports.logConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_impl":"q6xE","../utils/unary_utils":"BW68"}],"TG6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,s){const l=e.util.getTypedArrayFromDType(s,e.util.sizeFromShape(o));for(let e=0;e<l.length;++e){const o=e*r;let s=t[o];for(let e=0;e<r;++e){const r=t[o+e];r>s&&(s=r)}l[e]=s}return l}
},{"@tensorflow/tfjs-core":"tKjQ"}],"M0SG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyConfig=exports.multiply=exports.multiplyComplexImpl=exports.multiplyImpl=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/binary_impl"),r=require("../utils/kernel_utils");const t=(0,l.createSimpleBinaryKernelImpl)((e,l)=>e*l);exports.multiplyImpl=t;const p=(0,r.createComplexBinaryKernelImpl)((e,l,r,t)=>({real:e*r-l*t,imag:e*t+l*r}));exports.multiplyComplexImpl=p;const i=(0,r.binaryKernelFunc)(e.Multiply,t,p);exports.multiply=i;const o={kernelName:e.Multiply,backendName:"cpu",kernelFunc:i};exports.multiplyConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/binary_impl":"pLxa","../utils/kernel_utils":"MzwO"}],"LW7g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualConfig=exports.notEqual=exports.notEqualImpl=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/binary_impl"),r=require("../utils/kernel_utils");const t=(0,o.createSimpleBinaryKernelImpl)((e,o)=>e!==o?1:0);exports.notEqualImpl=t;const l=(0,r.binaryKernelFunc)(e.NotEqual,t,null,"bool");exports.notEqual=l;const n={kernelName:e.NotEqual,backendName:"cpu",kernelFunc:l};exports.notEqualConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/binary_impl":"pLxa","../utils/kernel_utils":"MzwO"}],"r8RP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrtConfig=exports.rsqrt=exports.rsqrtImpl=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../utils/unary_impl"),t=require("../utils/unary_utils");const s=(0,e.createSimpleUnaryImpl)(r=>1/Math.sqrt(r));exports.rsqrtImpl=s;const o=(0,t.unaryKernelFuncFromImpl)(r.Rsqrt,s);exports.rsqrt=o;const n={kernelName:r.Rsqrt,backendName:"cpu",kernelFunc:o};exports.rsqrtConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_impl":"q6xE","../utils/unary_utils":"BW68"}],"gWrS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sliceImpl=s,exports.slice=i,exports.sliceConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function s(t,s,i,o,r){const l=e.slice_util.isSliceContinous(o,s,i),c=e.util.sizeFromShape(i),n=e.util.computeStrides(o);if(l){const i=e.slice_util.computeFlatOffset(s,n);return t.subarray(i,i+c)}const u=e.util.getTypedArrayFromDType(r,c);for(let a=0;a<c;++a){const r=i.length,l=e.util.computeStrides(i),c=e.util.indexToLoc(a,r,l).map((e,t)=>e+s[t]),p=e.util.locToIndex(c,o.length,n);u[a]=t[p]}return u}function i(i){const{inputs:o,backend:r,attrs:l}=i,{x:c}=o,{begin:n,size:u}=l;(0,t.assertNotComplex)(c,"slice");const[a,p]=e.slice_util.parseSliceParams(c,n,u);e.slice_util.assertParamsValid(c,a,p);const d=s(r.data.get(c.dataId).values,a,p,c.shape,c.dtype);return r.makeTensorInfo(p,c.dtype,d)}const o={kernelName:e.Slice,backendName:"cpu",kernelFunc:i};exports.sliceConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"XZTE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceConfig=exports.squaredDifference=exports.squaredDifferenceImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),n=require("../utils/kernel_utils");const s=(0,r.createSimpleBinaryKernelImpl)((e,r)=>{const n=e-r;return n*n});exports.squaredDifferenceImpl=s;const i=(0,n.binaryKernelFunc)(e.SquaredDifference,s);exports.squaredDifference=i;const t={kernelName:e.SquaredDifference,backendName:"cpu",kernelFunc:i};exports.squaredDifferenceConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/binary_impl":"pLxa","../utils/kernel_utils":"MzwO"}],"Ptp1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subConfig=exports.sub=exports.subComplexImpl=exports.subImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),s=require("../utils/kernel_utils");const l=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e-r);exports.subImpl=l;const o=(0,s.createComplexBinaryKernelImpl)((e,r,s,l)=>({real:e-s,imag:r-l}));exports.subComplexImpl=o;const t=(0,s.binaryKernelFunc)(e.Sub,l,o);exports.sub=t;const p={kernelName:e.Sub,backendName:"cpu",kernelFunc:t};exports.subConfig=p;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/binary_impl":"pLxa","../utils/kernel_utils":"MzwO"}],"ijN7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,r,o,l,i){const s=r.length,u=e.util.sizeFromShape(r),n=e.util.computeStrides(r),p=e.util.computeStrides(i),c=e.util.getTypedArrayFromDType(o,e.util.sizeFromShape(i));for(let a=0;a<u;++a){const r=e.util.indexToLoc(a,s,n),o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[l[e]];c[e.util.locToIndex(o,s,p)]=t[a]}return c}
},{"@tensorflow/tfjs-core":"tKjQ"}],"cM5Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uniqueImpl=t;var e=require("@tensorflow/tfjs-core");function t(t,o,s,r){const n=e.util.parseAxisParam(o,s)[0],l=[1,s[0],1];for(let e=0;e<n;e++)l[0]*=s[e];l[1]=s[n];for(let e=n+1;e<s.length;e++)l[2]*=s[e];const u={},f=new Int32Array(s[n]),c=new e.TensorBuffer(l,r,t),i=[],a=1===l[0]&&1===l[2];for(let e=0;e<s[n];e++){let o;if(a)o=t[e].toString();else{const t=[];for(let o=0;o<l[0];o++)for(let s=0;s<l[2];s++)t.push(c.get(o,e,s));o=t.join(",")}if(void 0!==u[o])f[e]=u[o];else{const t=Object.keys(u).length;u[o]=t,f[e]=t,i.push(e)}}const p=l.slice();p[1]=Object.keys(u).length;const h=new e.TensorBuffer(p,r);i.forEach((e,t)=>{for(let o=0;o<l[0];o++)for(let s=0;s<l[2];s++)h.set(c.get(o,e,s),o,t,s)});const g=s.slice();return g[n]=p[1],{outputValues:h.values,outputShape:g,indices:f}}
},{"@tensorflow/tfjs-core":"tKjQ"}],"iYMh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"simpleAbsImpl",{enumerable:!0,get:function(){return e.simpleAbsImpl}}),Object.defineProperty(exports,"addImpl",{enumerable:!0,get:function(){return r.addImpl}}),Object.defineProperty(exports,"ceilImpl",{enumerable:!0,get:function(){return t.ceilImpl}}),Object.defineProperty(exports,"expImpl",{enumerable:!0,get:function(){return n.expImpl}}),Object.defineProperty(exports,"expm1Impl",{enumerable:!0,get:function(){return l.expm1Impl}}),Object.defineProperty(exports,"floorImpl",{enumerable:!0,get:function(){return u.floorImpl}}),Object.defineProperty(exports,"logImpl",{enumerable:!0,get:function(){return p.logImpl}}),Object.defineProperty(exports,"maxImpl",{enumerable:!0,get:function(){return i.maxImpl}}),Object.defineProperty(exports,"multiplyImpl",{enumerable:!0,get:function(){return o.multiplyImpl}}),Object.defineProperty(exports,"notEqualImpl",{enumerable:!0,get:function(){return m.notEqualImpl}}),Object.defineProperty(exports,"rsqrtImpl",{enumerable:!0,get:function(){return s.rsqrtImpl}}),Object.defineProperty(exports,"sliceImpl",{enumerable:!0,get:function(){return c.sliceImpl}}),Object.defineProperty(exports,"squaredDifferenceImpl",{enumerable:!0,get:function(){return f.squaredDifferenceImpl}}),Object.defineProperty(exports,"subImpl",{enumerable:!0,get:function(){return b.subImpl}}),Object.defineProperty(exports,"transposeImpl",{enumerable:!0,get:function(){return a.transposeImpl}}),Object.defineProperty(exports,"uniqueImpl",{enumerable:!0,get:function(){return I.uniqueImpl}});var e=require("./kernels/Abs"),r=require("./kernels/Add"),t=require("./kernels/Ceil"),n=require("./kernels/Exp"),l=require("./kernels/Expm1"),u=require("./kernels/Floor"),p=require("./kernels/Log"),i=require("./kernels/Max_impl"),o=require("./kernels/Multiply"),m=require("./kernels/NotEqual"),s=require("./kernels/Rsqrt"),c=require("./kernels/Slice"),f=require("./kernels/SquaredDifference"),b=require("./kernels/Sub"),a=require("./kernels/Transpose_impl"),I=require("./kernels/Unique_impl");
},{"./kernels/Abs":"r8e2","./kernels/Add":"UlsL","./kernels/Ceil":"pkVL","./kernels/Exp":"aEU3","./kernels/Expm1":"MXIz","./kernels/Floor":"Oh0i","./kernels/Log":"fST7","./kernels/Max_impl":"TG6C","./kernels/Multiply":"M0SG","./kernels/NotEqual":"LW7g","./kernels/Rsqrt":"r8RP","./kernels/Slice":"gWrS","./kernels/SquaredDifference":"XZTE","./kernels/Sub":"Ptp1","./kernels/Transpose_impl":"ijN7","./kernels/Unique_impl":"cM5Y"}],"DOsN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"MathBackendCPU",{enumerable:!0,get:function(){return r.MathBackendCPU}}),Object.defineProperty(exports,"version_cpu",{enumerable:!0,get:function(){return n.version}}),exports.shared=void 0;var e=require("@tensorflow/tfjs-core"),r=require("./backend_cpu"),t=u(require("./shared"));exports.shared=t;var n=require("./version");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}(0,e.registerBackend)("cpu",()=>new r.MathBackendCPU,1);
},{"@tensorflow/tfjs-core":"tKjQ","./backend_cpu":"W90s","./shared":"iYMh","./version":"yMuw"}],"Lle9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluConfig=exports.elu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Elu,e=>e>=0?e:Math.exp(e)-1);exports.elu=u;const t={kernelName:e.Elu,backendName:"cpu",kernelFunc:u};exports.eluConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"h4JL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=n,exports.preluConfig=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../cpu_util"),t=require("../utils/binary_impl");const a=(0,t.createSimpleBinaryKernelImpl)((e,r)=>e<0?r*e:e);function n(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t;(0,r.assertNotComplex)([s,o],"prelu");const p=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[l,i]=a(s.shape,o.shape,p,u,s.dtype);return n.makeTensorInfo(i,s.dtype,l)}const s={kernelName:e.Prelu,backendName:"cpu",kernelFunc:n};exports.preluConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","../utils/binary_impl":"pLxa"}],"eOXz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reluConfig=exports.relu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Relu,e=>Math.max(0,e));exports.relu=u;const t={kernelName:e.Relu,backendName:"cpu",kernelFunc:u};exports.reluConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"eXOt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6Config=exports.relu6=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=(0,r.unaryKernelFunc)(e.Relu6,e=>Math.min(Math.max(0,e),6));exports.relu6=u;const t={kernelName:e.Relu6,backendName:"cpu",kernelFunc:u};exports.relu6Config=t;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"axfg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyActivation=i;var e=require("../kernels/Elu"),r=require("../kernels/Identity"),n=require("../kernels/Prelu"),u=require("../kernels/Relu"),t=require("../kernels/Relu6");function i(i,l,s,a){if("linear"===s)return(0,r.identity)({inputs:{x:l},backend:i});if("relu"===s)return(0,u.relu)({inputs:{x:l},backend:i});if("elu"===s)return(0,e.elu)({inputs:{x:l},backend:i});if("relu6"===s)return(0,t.relu6)({inputs:{x:l},backend:i});if("prelu"===s)return(0,n.prelu)({inputs:{x:l,alpha:a},backend:i});throw new Error(`Activation ${s} has not been implemented for the CPU backend.`)}
},{"../kernels/Elu":"Lle9","../kernels/Identity":"y2xn","../kernels/Prelu":"h4JL","../kernels/Relu":"eOXz","../kernels/Relu6":"eXOt"}],"Phr1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=s,exports.reshapeConfig=void 0;var e=require("@tensorflow/tfjs-core");function s(s){const{inputs:a,backend:t,attrs:n}=s,{x:o}=a,{shape:p}=n,r=e.util.sizeFromShape(o.shape),h=e.util.inferFromImplicitShape(p,r),l=e.util.sizeFromShape(h);e.util.assert(r===l,()=>`The new shape (${h}) has ${l} elements and the old `+`shape (${o.shape}) has ${r} elements. The new shape and old `+"shape must have the same number of elements."),t.incRef(o.dataId);const d=t.data.get(o.dataId);if(null!=d.complexTensorInfos){const e=d.complexTensorInfos.real,s=d.complexTensorInfos.imag;e.shape=h,s.shape=h}return{dataId:o.dataId,shape:h,dtype:o.dtype}}const a={kernelName:e.Reshape,backendName:"cpu",kernelFunc:s};exports.reshapeConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ"}],"ajCN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMul=a,exports.batchMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Reshape");function a(a){const{inputs:n,backend:r,attrs:o}=a,{a:p,b:h}=n,{transposeA:i,transposeB:u}=o;(0,t.assertNotComplex)([p,h],"matMul");const l=p.shape.length,c=h.shape.length,d=i?p.shape[l-2]:p.shape[l-1],m=u?h.shape[c-1]:h.shape[c-2],f=i?p.shape[l-1]:p.shape[l-2],M=u?h.shape[c-2]:h.shape[c-1],b=p.shape.slice(0,-2),k=h.shape.slice(0,-2),x=e.util.sizeFromShape(b),$=e.util.sizeFromShape(k),v=x===$||1===x||1===$;e.util.assert(l>=2&&c>=2&&v,()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${b}) and (${k}).`);const I=(x>$?p.shape.slice(0,-2):h.shape.slice(0,-2)).concat([f,M]);e.util.assert(d===m,()=>`Error in matMul: inner shapes (${d}) and (`+`${m}) of Tensors with shapes ${p.shape} and `+`${h.shape} and transposeA=${i}`+` and transposeB=${u} must match.`);const g=i?[x,d,f]:[x,f,d],S=u?[$,M,m]:[$,m,M],T=(0,s.reshape)({inputs:{x:p},backend:r,attrs:{shape:g}}),q=(0,s.reshape)({inputs:{x:h},backend:r,attrs:{shape:S}}),y=i?T.shape[1]:T.shape[2],z=i?T.shape[2]:T.shape[1],B=u?q.shape[1]:q.shape[2],C=Math.max(x,$),F=r.data.get(T.dataId).values,N=r.data.get(q.dataId).values,_=e.util.computeStrides(T.shape),j=e.util.computeStrides(q.shape),[w,A,E]=i?[_[0],1,_[1]]:[_[0],_[1],1],[G,O,P]=u?[1,j[1],j[0]]:[j[1],1,j[0]],R=z*B,D=(0,e.buffer)([C,z,B],T.dtype),H=D.values,J=r.blockSize;for(let e=0;e<C;e++)for(let t=0;t<z;t+=J)for(let s=0;s<B;s+=J)for(let a=0;a<y;a+=J){const n=Math.min(t+J,z),r=Math.min(s+J,B),o=Math.min(a+J,y);for(let p=t;p<n;p++)for(let t=s;t<r;t++){let s=0;for(let n=a;n<o;n++){const a=Math.min(e,x-1)*w,r=Math.min(e,$-1)*P;s+=F[a+p*A+n*E]*N[n*G+t*O+r]}H[e*R+(p*B+t)]+=s}}return r.disposeIntermediateTensorInfo(T),r.disposeIntermediateTensorInfo(q),r.makeTensorInfo(I,D.dtype,D.values)}const n={kernelName:e.BatchMatMul,backendName:"cpu",kernelFunc:a};exports.batchMatMulConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","./Reshape":"Phr1"}],"y5Ok":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._fusedMatMul=r,exports._fusedMatMulConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fused_utils"),s=require("./Add"),a=require("./BatchMatMul");function r(e){const{inputs:r,backend:n,attrs:u}=e,{a:o,b:i,bias:c,preluActivationWeights:p}=r,{transposeA:d,transposeB:l,activation:f}=u;let M,b,_;const k=[];M=(0,a.batchMatMul)({inputs:{a:o,b:i},attrs:{transposeA:d,transposeB:l},backend:n}),c&&(b=(0,s.add)({inputs:{a:M,b:c},backend:n}),k.push(M),M=b),f&&(_=(0,t.applyActivation)(n,M,f,p),k.push(M),M=_);for(const t of k)n.disposeIntermediateTensorInfo(t);return M}const n={kernelName:e._FusedMatMul,backendName:"cpu",kernelFunc:r};exports._fusedMatMulConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/fused_utils":"axfg","./Add":"UlsL","./BatchMatMul":"ajCN"}],"vphf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosConfig=exports.acos=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Acos,e=>Math.acos(e));exports.acos=s;const r={kernelName:e.Acos,backendName:"cpu",kernelFunc:s};exports.acosConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"xVpC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshConfig=exports.acosh=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Acosh,e=>Math.acosh(e));exports.acosh=s;const r={kernelName:e.Acosh,backendName:"cpu",kernelFunc:s};exports.acoshConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"b1tE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinConfig=exports.asin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const s=(0,n.unaryKernelFunc)(e.Asin,e=>Math.asin(e));exports.asin=s;const r={kernelName:e.Asin,backendName:"cpu",kernelFunc:s};exports.asinConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"J7Sc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhConfig=exports.asinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const s=(0,n.unaryKernelFunc)(e.Asinh,e=>Math.asinh(e));exports.asinh=s;const r={kernelName:e.Asinh,backendName:"cpu",kernelFunc:s};exports.asinhConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"QN72":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanConfig=exports.atan=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const n=(0,t.unaryKernelFunc)(e.Atan,e=>Math.atan(e));exports.atan=n;const a={kernelName:e.Atan,backendName:"cpu",kernelFunc:n};exports.atanConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"UgfJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhConfig=exports.atanh=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const n=(0,t.unaryKernelFunc)(e.Atanh,e=>Math.atanh(e));exports.atanh=n;const a={kernelName:e.Atanh,backendName:"cpu",kernelFunc:n};exports.atanhConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"yOLZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool=e,exports.maxPoolPositions=i;var t=require("@tensorflow/tfjs-core");function e(e,i,o,n,r,h){const a=r.strideHeight,f=r.strideWidth,l=r.dilationHeight,s=r.dilationWidth,u=r.effectiveFilterHeight,d=r.effectiveFilterWidth,c=r.padInfo.top,p=r.padInfo.left,I="max"===h?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=(0,t.buffer)(r.outShape,o),N=g.values,m=r.outShape[1]*r.outShape[2]*r.outShape[3],W=r.outShape[2]*r.outShape[3],H=r.outShape[3];for(let t=0;t<r.batchSize;++t){const i=t*m,o=t*n[0];for(let t=0;t<r.inChannels;++t)for(let g=0;g<r.outHeight;++g){const m=g*a-c,S=Math.max(0,m),b=Math.min(r.inHeight,u+m),v=i+g*W;for(let i=0;i<r.outWidth;++i){const a=i*f-p,u=Math.max(0,a),c=Math.min(r.inWidth,d+a);let g=I,m=0,W=0;for(let i=S;i<b;i+=l){const r=o+i*n[1];for(let i=u;i<c;i+=s){const o=e[r+i*n[2]+t];"max"===h&&o>g?g=o:"avg"===h&&(m+=o,W++)}if(isNaN(g))break}N[v+i*H+t]="avg"===h?m/W:g}}}return g}function i(e,i,o,n,r=!1,h=!1){const a=(0,t.buffer)(n.outShape,"int32"),f=n.strideHeight,l=n.strideWidth,s=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterHeight,c=n.effectiveFilterWidth,p=n.padInfo.top,I=n.padInfo.left,g=(0,t.buffer)(i,o,e);for(let t=0;t<n.batchSize;++t)for(let e=0;e<n.inChannels;++e)for(let i=0;i<n.outHeight;++i){const o=i*f-p;let N=o;for(;N<0;)N+=s;const m=Math.min(n.inHeight,d+o);for(let f=0;f<n.outWidth;++f){const d=f*l-I;let p=d;for(;p<0;)p+=u;const W=Math.min(n.inWidth,c+d);let H=Number.NEGATIVE_INFINITY,S=-1;for(let i=N;i<m;i+=s){const a=i-o;for(let o=p;o<W;o+=u){const f=o-d,l=g.get(t,i,o,e);l>H&&(H=l,S=r?h?((t*n.inHeight+i)*n.inWidth+o)*n.inChannels+e:(i*n.inWidth+o)*n.inChannels+e:a*c+f)}}a.set(S,t,i,f,e)}}return a}
},{"@tensorflow/tfjs-core":"tKjQ"}],"T59m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=r,exports.avgPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils"),i=require("./Identity");function r(r){const{inputs:s,backend:a,attrs:n}=r,{x:l}=s;(0,t.assertNotComplex)(l,"avgPool");const{filterSize:u,strides:d,pad:p,dimRoundingMode:c}=n;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const f=e.backend_util.computePool2DInfo(l.shape,u,d,1,p,c);let g;if(1===f.filterWidth&&1===f.filterHeight&&e.util.arraysEqual(f.inShape,f.outShape))g=(0,i.identity)({inputs:{x:l},backend:a});else{const t=a.data.get(l.dataId).values,i=e.util.computeStrides(l.shape),r=(0,o.pool)(t,l.shape,l.dtype,i,f,"avg");g=a.makeTensorInfo(f.outShape,l.dtype,r.values)}return g}const s={kernelName:e.AvgPool,backendName:"cpu",kernelFunc:r};exports.avgPoolConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","../utils/pool_utils":"yOLZ","./Identity":"y2xn"}],"RUph":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolBackprop=o,exports.avgPoolBackpropConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:i,backend:r,attrs:a}=o,{dy:l,input:f}=i,n=f;(0,t.assertNotComplex)([l,f],"avgPoolBackprop");const{filterSize:s,strides:p,pad:c}=a,d=e.backend_util.computePool2DInfo(n.shape,s,p,1,c),u=d.strideHeight,h=d.strideWidth,g=d.filterHeight,v=d.filterWidth,k=d.dilationHeight,b=d.dilationWidth,P=d.effectiveFilterHeight,H=d.effectiveFilterWidth,W=H-1-d.padInfo.left,m=P-1-d.padInfo.top,x=(0,e.buffer)(n.shape,"float32"),B=1/(g*v),I=r.data.get(l.dataId).values,C=(0,e.buffer)(l.shape,"float32",I);for(let e=0;e<d.batchSize;++e)for(let t=0;t<d.inChannels;++t)for(let o=0;o<d.inHeight;++o)for(let i=0;i<d.inWidth;++i){const r=o-m,a=i-W;let l=0;for(let o=0;o<P;o+=k){const i=(r+o)/u;if(!(i<0||i>=d.outHeight||Math.floor(i)!==i))for(let o=0;o<H;o+=b){const r=(a+o)/h;r<0||r>=d.outWidth||Math.floor(r)!==r||(l+=C.get(e,i,r,t))}}x.set(l*B,e,o,i,t)}return r.makeTensorInfo(x.shape,x.dtype,x.values)}const i={kernelName:e.AvgPoolBackprop,backendName:"cpu",kernelFunc:o};exports.avgPoolBackpropConfig=i;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"In1K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm=t,exports.batchNormConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../cpu_util");function t(t){const{inputs:n,backend:r,attrs:l}=t,{x:s,scale:o,offset:h,mean:u,variance:i}=n;e.util.assert(u.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),e.util.assert(null==h||u.shape.length===h.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),e.util.assert(null==o||u.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),(0,a.assertNotComplex)([s,u,i,o,h],"batchNorm");let{varianceEpsilon:d}=l;null==d&&(d=.001);const c=r.data.get(s.dataId).values,g=r.data.get(u.dataId).values,p=r.data.get(i.dataId).values,m=o?r.data.get(o.dataId).values:new Float32Array([1]),v=h?r.data.get(h.dataId).values:new Float32Array([0]),f=new Float32Array(c.length),q=v.length,k=m.length,N=p.length,b=g.length;let x=0,I=0,y=0,F=0;for(let e=0;e<c.length;++e)f[e]=v[x++]+(c[e]-g[I++])*m[y++]/Math.sqrt(p[F++]+d),x>=q&&(x=0),I>=b&&(I=0),y>=k&&(y=0),F>=N&&(F=0);return r.makeTensorInfo(s.shape,s.dtype,f)}const n={kernelName:e.FusedBatchNorm,backendName:"cpu",kernelFunc:t};exports.batchNormConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"bbrB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipConfig=exports.clip=void 0;var e=require("@tensorflow/tfjs-core"),l=require("../utils/unary_utils");const r=(0,l.unaryKernelFunc)(e.ClipByValue,(e,l)=>{const r=l;return e>r.clipValueMax?r.clipValueMax:e<r.clipValueMin?r.clipValueMin:e});exports.clip=r;const i={kernelName:e.ClipByValue,backendName:"cpu",kernelFunc:r};exports.clipConfig=i;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"yPZ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=t,exports.imagConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:a}=e,{input:n}=t,o=a.data.get(n.dataId).complexTensorInfos.imag,r=a.data.get(o.dataId).values;return a.makeTensorInfo(o.shape,o.dtype,r)}const a={kernelName:e.Imag,backendName:"cpu",kernelFunc:t};exports.imagConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ"}],"kwAi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=r,exports.concatConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Complex"),a=require("./Imag"),s=require("./Real"),n=require("./Reshape");function r(o){const{inputs:p,backend:i,attrs:c}=o,{axis:u}=c,d=e.util.parseAxisParam(u,p[0].shape)[0];let l=e.backend_util.computeOutShape(p.map(e=>e.shape),d);if(0===e.util.sizeFromShape(l))return i.makeTensorInfo(l,p[0].dtype,[]);const m=p.filter(t=>e.util.sizeFromShape(t.shape)>0);if(1===m.length)return m[0];const h=m.map(e=>e.shape);if(e.backend_util.assertParamsConsistent(h,d),"complex64"===m[0].dtype){const e=m.map(e=>(0,s.real)({inputs:{input:e},backend:i})),n=m.map(e=>(0,a.imag)({inputs:{input:e},backend:i})),o=r({inputs:e,backend:i,attrs:{axis:d}}),p=r({inputs:n,backend:i,attrs:{axis:d}}),c=(0,t.complex)({inputs:{real:o,imag:p},backend:i});return e.forEach(e=>i.disposeIntermediateTensorInfo(e)),n.forEach(e=>i.disposeIntermediateTensorInfo(e)),i.disposeIntermediateTensorInfo(o),i.disposeIntermediateTensorInfo(p),c}const f=m.map(t=>{const a=[-1,e.util.sizeFromShape(t.shape.slice(d))];return(0,n.reshape)({inputs:{x:t},backend:i,attrs:{shape:a}})});l=e.backend_util.computeOutShape(f.map(e=>e.shape),1);const k=e.util.getTypedArrayFromDType(m[0].dtype,e.util.sizeFromShape(l));if(1===f[0].shape[0]){let t=0;f.forEach(a=>{const s=i.data.get(a.dataId).values,n=e.util.sizeFromShape(a.shape);k.set(s,t),t+=n})}else{let e=0;f.forEach(t=>{const a=i.data.get(t.dataId).values;let s=0;for(let n=0;n<t.shape[0];++n){const r=n*l[1]+e;for(let e=0;e<t.shape[1];++e)k[r+e]=a[s++]}e+=t.shape[1]})}const I=e.backend_util.computeOutShape(m.map(e=>e.shape),d),b=i.makeTensorInfo(I,p[0].dtype,k);return f.forEach(e=>i.disposeIntermediateTensorInfo(e)),b}const o={kernelName:e.Concat,backendName:"cpu",kernelFunc:r};exports.concatConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","./Complex":"EwVZ","./Imag":"yPZ8","./Real":"KspA","./Reshape":"Phr1"}],"wrip":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2D=o,exports.conv2DConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:s,attrs:i}=o,{x:a,filter:r}=n,{strides:d,pad:c,dataFormat:l,dilations:u,dimRoundingMode:f}=i;(0,e.assertNotComplex)([a,r],"conv2d");const p=t.backend_util.convertConv2DDataFormat(l),h=t.backend_util.computeConv2DInfo(a.shape,r.shape,d,u,c,f,!1,p),v=h.filterHeight,m=h.filterWidth,g=h.dilationHeight,C=h.dilationWidth,k=h.padInfo.left,D=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new t.TensorBuffer(h.outShape,a.dtype),I=t.util.computeStrides(a.shape),H=t.util.computeStrides(r.shape),W=I[0],_=b?I[1]:I[2],F=b?I[2]:1,S=b?1:I[1],y=x.strides[0],N=b?x.strides[1]:x.strides[2],j=b?x.strides[2]:1,q=b?1:x.strides[1],w=s.data.get(a.dataId).values,M=s.data.get(r.dataId).values,T=x.values;for(let t=0;t<h.batchSize;++t){const e=t*W,o=t*y;for(let t=0;t<h.outHeight;++t){const n=o+t*N,s=t*h.strideHeight-D;for(let t=0;t<v;++t){const o=s+t*g;if(o<0||o>=h.inHeight)continue;const i=t*H[0],a=e+o*_;for(let t=0;t<h.outWidth;++t){const e=n+t*j,o=t*h.strideWidth-k;for(let t=0;t<m;++t){const n=o+t*C;if(n<0||n>=h.inWidth)continue;const s=a+n*F;let r=i+t*H[1];for(let t=0;t<h.inChannels;++t){const o=w[s+t*S];for(let t=0;t<h.outChannels;++t)T[e+t*q]+=o*M[r+t];r+=h.outChannels}}}}}}return s.makeTensorInfo(x.shape,x.dtype,T)}const n={kernelName:t.Conv2D,backendName:"cpu",kernelFunc:o};exports.conv2DConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"xPjq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=o,exports.conv2DBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:r,attrs:n}=o,{x:i,dy:s}=a,{strides:l,pad:c,dataFormat:d,dimRoundingMode:p,filterShape:f}=n;(0,t.assertNotComplex)([i,s],"conv2dBackpropFilter");const u=e.backend_util.convertConv2DDataFormat(d),h=e.backend_util.computeConv2DInfo(i.shape,f,l,1,c,p,!1,u),{strideHeight:v,strideWidth:g,filterHeight:m,filterWidth:k}=h,F="channelsLast"===h.dataFormat,x=new e.TensorBuffer(h.filterShape,"float32"),B=h.padInfo.left,C=h.padInfo.top,M=r.data.get(i.dataId).values,D=r.data.get(s.dataId).values,b=new e.TensorBuffer(i.shape,i.dtype,M),I=new e.TensorBuffer(s.shape,s.dtype,D);for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((C-e)/v)),o=Math.min(h.outHeight,(h.inHeight+C-e)/v);for(let a=0;a<k;++a){const r=Math.max(0,Math.ceil((B-a)/g)),n=Math.min(h.outWidth,(h.inWidth+B-a)/g);for(let i=0;i<h.inChannels;++i)for(let s=0;s<h.outChannels;++s){let l=0;for(let c=0;c<h.batchSize;++c)for(let d=t;d<o;++d){const t=e+d*v-C;for(let e=r;e<n;++e){const o=a+e*g-B;l+=F?b.get(c,t,o,i)*I.get(c,d,e,s):b.get(c,i,t,o)*I.get(c,s,d,e)}}x.set(l,e,a,i,s)}}}return r.makeTensorInfo(x.shape,x.dtype,x.values)}const a={kernelName:e.Conv2DBackpropFilter,backendName:"cpu",kernelFunc:o};exports.conv2DBackpropFilterConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"Up3H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=o,exports.conv2DBackpropInputConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:a,backend:n,attrs:r}=o,{dy:s,filter:i}=a,{inputShape:p,strides:d,pad:c,dataFormat:l,dimRoundingMode:u}=r;(0,e.assertNotComplex)([s,i],"conv2dBackpropInput");const f=t.util.computeStrides(i.shape),h=t.util.computeStrides(s.shape);let m=t.backend_util.convertConv2DDataFormat(l);const v=t.backend_util.computeConv2DInfo(p,i.shape,d,1,c,u,!1,m),k=new t.TensorBuffer(v.inShape,"float32"),I=k.values,g=n.data.get(s.dataId).values,C=n.data.get(i.dataId).values,[M,x,D]=f,{batchSize:b,filterHeight:B,filterWidth:S,inChannels:_,inHeight:F,inWidth:H,outChannels:W,outHeight:y,outWidth:N,strideHeight:j,strideWidth:q}=v;m=v.dataFormat;const w=B-1-v.padInfo.top,T=S-1-v.padInfo.left,z="channelsLast"===m,L=k.strides[0],O=z?k.strides[1]:k.strides[2],P=z?k.strides[2]:1,R=z?1:k.strides[1],A=h[0],E=z?h[1]:h[2],G=z?h[2]:1,J=z?1:h[1];for(let t=0;t<b;++t)for(let e=0;e<_;++e)for(let o=0;o<F;++o){const a=o-w,n=Math.max(0,Math.ceil(a/j)),r=Math.min(y,(B+a)/j);for(let s=0;s<H;++s){const i=s-T,p=Math.max(0,Math.ceil(i/q)),d=Math.min(N,(S+i)/q);let c=0;for(let o=n;o<r;++o){const n=o*j-a;for(let a=p;a<d;++a){const r=A*t+E*o+G*a,s=M*(B-1-n)+x*(S-1-(a*q-i))+D*e;for(let t=0;t<W;++t){c+=g[r+J*t]*C[s+t]}}}I[L*t+O*o+P*s+R*e]=c}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const a={kernelName:t.Conv2DBackpropInput,backendName:"cpu",kernelFunc:o};exports.conv2DBackpropInputConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"nzys":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3D=o,exports.conv3DConfig=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:s,attrs:i}=o,{x:r,filter:a}=n,{strides:l,pad:c,dilations:d}=i;(0,e.assertNotComplex)([r,a],"conv3d");const u=t.backend_util.computeConv3DInfo(r.shape,a.shape,l,d,c),{filterDepth:f,filterHeight:p,filterWidth:h,dilationDepth:v,dilationHeight:C,dilationWidth:D,padInfo:g}=u,m=g.front,k=g.left,x=g.top,b=new t.TensorBuffer(u.outShape,r.dtype),H=s.data.get(r.dataId).values,I=s.data.get(a.dataId).values,W=b.values,S=t.util.computeStrides(r.shape),_=t.util.computeStrides(a.shape);for(let t=0;t<u.batchSize;++t){const e=t*S[0],o=t*b.strides[0];for(let t=0;t<u.outDepth;++t){const n=o+t*b.strides[1],s=t*u.strideDepth-m;for(let t=0;t<f;++t){const o=s+t*v;if(o<0||o>=u.inDepth)continue;const i=t*_[0],r=e+o*S[1];for(let t=0;t<u.outHeight;++t){const e=n+t*b.strides[2],o=t*u.strideHeight-x;for(let t=0;t<p;++t){const n=o+t*C;if(n<0||n>=u.inHeight)continue;const s=i+t*_[1],a=r+n*S[2];for(let t=0;t<u.outWidth;++t){const o=e+t*u.outChannels,n=t*u.strideWidth-k;for(let t=0;t<h;++t){const e=n+t*D;if(e<0||e>=u.inWidth)continue;const i=s+t*_[2],r=a+e*u.inChannels;let l=i;for(let t=0;t<u.inChannels;++t){const e=H[r+t];for(let t=0;t<u.outChannels;++t)W[o+t]+=e*I[l+t];l+=u.outChannels}}}}}}}}return s.makeTensorInfo(b.shape,b.dtype,b.values)}const n={kernelName:t.Conv3D,backendName:"cpu",kernelFunc:o};exports.conv3DConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"vnbt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilterV2=o,exports.conv3DBackpropFilterV2Config=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:r,backend:a,attrs:n}=o,{x:i,dy:s}=r,{strides:l,pad:p,filterShape:c}=n;(0,e.assertNotComplex)([i,s],"conv3dBackpropFilterV2");const d=t.util.computeStrides(i.shape),f=t.util.computeStrides(s.shape),h=t.backend_util.computeConv3DInfo(i.shape,c,l,1,p),u=h.strideDepth,m=h.strideHeight,v=h.strideWidth,k=h.filterDepth,M=h.filterHeight,x=h.filterWidth,D=new t.TensorBuffer(h.filterShape,"float32"),g=D.values,[C,I,B,F]=D.strides,b=a.data.get(s.dataId).values,[S,V,H,W]=f,_=a.data.get(i.dataId).values,[y,N,j,q]=d,w=h.padInfo.front,T=h.padInfo.left,z=h.padInfo.top;for(let t=0;t<k;++t){const e=Math.max(0,Math.ceil((w-t)/u)),o=Math.min(h.outDepth,(h.inDepth+w-t)/u),r=t*C;for(let a=0;a<M;++a){const n=Math.max(0,Math.ceil((z-a)/m)),i=Math.min(h.outHeight,(h.inHeight+z-a)/m),s=a*I+r;for(let r=0;r<x;++r){const l=Math.max(0,Math.ceil((T-r)/v)),p=Math.min(h.outWidth,(h.inWidth+T-r)/v),c=r*B+s;for(let s=0;s<h.inChannels;++s){const d=s*F+c;for(let c=0;c<h.outChannels;++c){let f=0;for(let d=0;d<h.batchSize;++d){const h=d*y,k=d*S;for(let d=e;d<o;++d){const e=(t+d*u-w)*N+h,o=d*V+k;for(let t=n;t<i;++t){const n=(a+t*m-z)*j+e,i=t*H+o;for(let t=l;t<p;++t){const e=t*W+i;f+=_[(r+t*v-T)*q+n+s]*b[e+c]}}}}g[d+c]=f}}}}}return a.makeTensorInfo(D.shape,D.dtype,D.values)}const r={kernelName:t.Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:o};exports.conv3DBackpropFilterV2Config=r;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"BJ3o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInputV2=o,exports.conv3DBackpropInputV2Config=void 0;var t=require("@tensorflow/tfjs-core"),e=require("../cpu_util");function o(o){const{inputs:n,backend:a,attrs:r}=o,{dy:i,filter:p}=n,{pad:s,strides:c,inputShape:l}=r;(0,e.assertNotComplex)([i],"conv3dBackpropInputV2");const u=t.util.computeStrides(i.shape),d=t.util.computeStrides(p.shape),h=t.backend_util.computeConv3DInfo(l,p.shape,c,1,s),f=new t.TensorBuffer(h.inShape,"float32"),m=f.values,[v,I,k,M]=f.strides,D=a.data.get(i.dataId).values,[g,x,C,B]=u,b=a.data.get(p.dataId).values,[S,V,H,W]=d,{batchSize:_,filterDepth:y,filterHeight:N,filterWidth:j,inChannels:q,inDepth:w,inHeight:T,inWidth:z,outChannels:F,outDepth:O,outHeight:P,outWidth:A,strideDepth:E,strideHeight:G,strideWidth:J}=h,K=y-1-h.padInfo.front,L=N-1-h.padInfo.top,Q=j-1-h.padInfo.left;for(let t=0;t<_;++t)for(let e=0;e<q;++e)for(let o=0;o<w;++o){const n=o-K,a=Math.max(0,Math.ceil(n/E)),r=Math.min(O,(y+n)/E);for(let i=0;i<T;++i){const p=i-L,s=Math.max(0,Math.ceil(p/G)),c=Math.min(P,(N+p)/G);for(let l=0;l<z;++l){const u=l-Q,d=Math.max(0,Math.ceil(u/J)),h=Math.min(A,(j+u)/J);let f=0;for(let o=a;o<r;++o){const a=o*E-n;for(let n=s;n<c;++n){const r=n*G-p;for(let i=d;i<h;++i){const p=g*t+x*o+C*n+B*i,s=S*(y-1-a)+V*(N-1-r)+H*(j-1-(i*J-u))+W*e;for(let t=0;t<F;++t){f+=D[p+t]*b[s+t]}}}}m[v*t+I*o+k*i+M*l+e]=f}}}return a.makeTensorInfo(f.shape,f.dtype,f.values)}const n={kernelName:t.Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:o};exports.conv3DBackpropInputV2Config=n;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"gSkV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosConfig=exports.cos=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Cos,e=>Math.cos(e));exports.cos=s;const r={kernelName:e.Cos,backendName:"cpu",kernelFunc:s};exports.cosConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"QT63":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshConfig=exports.cosh=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const s=(0,o.unaryKernelFunc)(e.Cosh,e=>Math.cosh(e));exports.cosh=s;const r={kernelName:e.Cosh,backendName:"cpu",kernelFunc:s};exports.coshConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"PbFg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNative=i,exports.depthwiseConv2dNativeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function i(i){const{inputs:s,backend:n,attrs:o}=i,{x:r,filter:d}=s,{strides:a,pad:l,dilations:u,dimRoundingMode:c}=o;(0,t.assertNotComplex)([r,d],"depthwiseConv2DNative");const h=e.util.computeStrides(r.shape),p=e.util.computeStrides(d.shape);let f=u;null==f&&(f=[1,1]),e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(a,f),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${a} and dilations '${f}'`);const v=e.backend_util.computeConv2DInfo(r.shape,d.shape,a,f,l,c,!0),{filterHeight:C,filterWidth:g,dilationHeight:m,dilationWidth:w,padInfo:N}=v,b=N.left,k=N.top,x=v.outChannels/v.inChannels,H=new e.TensorBuffer(v.outShape,r.dtype),I=n.data.get(r.dataId).values,S=n.data.get(d.dataId).values,W=H.values;for(let e=0;e<v.batchSize;++e){const t=e*h[0],i=e*H.strides[0];for(let e=0;e<v.outHeight;++e){const s=i+e*H.strides[1],n=e*v.strideHeight-b;for(let e=0;e<C;++e){const i=n+e*m;if(i<0||i>=v.inHeight)continue;const o=e*p[0],r=t+i*h[1];for(let e=0;e<v.outWidth;++e){const t=s+e*H.strides[2],i=e*v.strideWidth-k;for(let e=0;e<g;++e){const s=i+e*w;if(s<0||s>=v.inWidth)continue;const n=o+e*p[1],d=r+s*v.inChannels;let a=t,l=n;for(let e=0;e<v.inChannels;++e){const t=I[d+e];for(let e=0;e<x;++e)W[a+e]+=t*S[l+e];a+=x,l+=x}}}}}}return n.makeTensorInfo(H.shape,H.dtype,H.values)}const s={kernelName:e.DepthwiseConv2dNative,backendName:"cpu",kernelFunc:i};exports.depthwiseConv2dNativeConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"rVR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=o,exports.depthwiseConv2dNativeBackpropFilterConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:n,attrs:i}=o,{x:r,dy:s}=a,{strides:d,dilations:p,pad:l,dimRoundingMode:h,filterShape:c}=i;(0,t.assertNotComplex)([r,s],"depthwiseConv2dNativeBackpropFilter");const f=e.backend_util.computeConv2DInfo(r.shape,c,d,p,l,h,!0),{strideHeight:u,strideWidth:v,filterHeight:C,filterWidth:g}=f,k=new e.TensorBuffer(f.filterShape,"float32"),m=f.padInfo.left,w=f.padInfo.top,M=f.outChannels/f.inChannels,x=n.data.get(r.dataId).values,B=new e.TensorBuffer(r.shape,r.dtype,x),N=n.data.get(s.dataId).values,F=new e.TensorBuffer(s.shape,s.dtype,N);for(let e=0;e<C;++e){const t=Math.max(0,Math.ceil((w-e)/u)),o=Math.min(f.outHeight,(f.inHeight+w-e)/u);for(let a=0;a<g;++a){const n=Math.max(0,Math.ceil((m-a)/v)),i=Math.min(f.outWidth,(f.inWidth+m-a)/v);for(let r=0;r<f.outChannels;++r){const s=Math.trunc(r/M),d=r%M;let p=0;for(let l=0;l<f.batchSize;++l)for(let d=t;d<o;++d){const t=e+d*u-w;for(let e=n;e<i;++e){const o=a+e*v-m;p+=B.get(l,t,o,s)*F.get(l,d,e,r)}}k.set(p,e,a,s,d)}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const a={kernelName:e.DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:o};exports.depthwiseConv2dNativeBackpropFilterConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"kly0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=o,exports.depthwiseConv2dNativeBackpropInputConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function o(o){const{inputs:a,backend:i,attrs:n}=o,{dy:s,filter:p}=a,{strides:r,dilations:d,pad:u,dimRoundingMode:l,inputShape:c}=n;(0,t.assertNotComplex)([s,p],"depthwiseConv2DNativeBackpropInput");const h=e.util.computeStrides(s.shape),f=e.util.computeStrides(p.shape),v=e.backend_util.computeConv2DInfo(c,p.shape,r,d,u,l,!0),m=new e.TensorBuffer(v.inShape,"float32"),k=m.values,[C,I,g]=m.strides,M=i.data.get(s.dataId).values,[N,w,x]=h,B=i.data.get(p.dataId).values,[b,S,H]=f,{batchSize:W,filterHeight:_,filterWidth:y,inChannels:D,inHeight:j,inWidth:q,outChannels:T,outHeight:z,outWidth:F,strideHeight:O,strideWidth:P}=v,R=_-1-v.padInfo.top,A=y-1-v.padInfo.left,E=T/D;for(let e=0;e<W;++e)for(let t=0;t<D;++t)for(let o=0;o<j;++o){const a=o-R,i=Math.max(0,Math.ceil(a/O)),n=Math.min(z,(_+a)/O);for(let s=0;s<q;++s){const p=s-A,r=Math.max(0,Math.ceil(p/P)),d=Math.min(F,(y+p)/P);let u=0;for(let o=i;o<n;++o){const i=o*O-a;for(let a=r;a<d;++a){const n=N*e+w*o+x*a,s=b*(_-1-i)+S*(y-1-(a*P-p))+H*t;for(let e=0;e<E;++e){u+=M[n+(t*E+e)]*B[s+e]}}}k[C*e+I*o+g*s+t]=u}}return i.makeTensorInfo(m.shape,m.dtype,m.values)}const a={kernelName:e.DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:o};exports.depthwiseConv2dNativeBackpropInputConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"gImL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2D,backendName:"cpu",kernelFunc:({inputs:e,backend:i,attrs:o})=>{const{x:d,filter:a}=e,{strides:l,pad:n,dilations:r}=o,s=i,p=s.data.get(d.dataId).values,u=d.shape.length,h=s.data.get(a.dataId).values,c=a.shape.length,{batchSize:f,inHeight:g,inWidth:y,inChannels:I,outHeight:m,outWidth:x,padInfo:S,strideHeight:b,strideWidth:H,filterHeight:N,filterWidth:T,dilationHeight:W,dilationWidth:k,outShape:v}=t.backend_util.computeDilation2DInfo(d.shape,a.shape,l,n,"NHWC",r),D=t.util.sizeFromShape(v),_=v.length,C=t.util.getArrayFromDType(d.dtype,D);for(let F=0;F<f;++F)for(let e=0;e<m;++e){const i=e*b-S.top;for(let o=0;o<x;++o){const l=o*H-S.left;for(let n=0;n<I;++n){let r=Number.MIN_SAFE_INTEGER;for(let e=0;e<N;++e){const o=i+e*W;if(o>=0&&o<g)for(let i=0;i<T;++i){const s=l+i*k;if(s>=0&&s<y){const l=t.util.locToIndex([F,o,s,n],u,t.util.computeStrides(d.shape)),f=t.util.locToIndex([e,i,n],c,t.util.computeStrides(a.shape)),g=p[l]+h[f];g>r&&(r=g)}}}C[t.util.locToIndex([F,e,o,n],_,t.util.computeStrides(v))]=r}}}return{dataId:s.write(t.util.toTypedArray(C,d.dtype),v,d.dtype),shape:v,dtype:d.dtype}}};exports.dilation2dConfig=e;
},{"@tensorflow/tfjs-core":"tKjQ"}],"Ziqg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dBackpropFilterConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:e,backend:a,attrs:i})=>{const{x:r,filter:o,dy:d}=e,{strides:s,pad:l,dilations:n}=i,p=a,u=t.util.toNestedArray(r.shape,p.data.get(r.dataId).values),h=t.util.toNestedArray(o.shape,p.data.get(o.dataId).values),{batchSize:c,inHeight:f,inWidth:y,inChannels:g,outHeight:k,outWidth:N,padInfo:I,strideHeight:b,strideWidth:m,filterHeight:v,filterWidth:A,dilationHeight:D,dilationWidth:F,outShape:H}=t.backend_util.computeDilation2DInfo(r.shape,o.shape,s,l,"NHWC",n);t.util.assert(d.rank===H.length,()=>`Error in ${t.Dilation2DBackpropFilter}, dy `+`must have the same rank as output ${H.length}, but got `+`${d.rank}`);const W=t.util.toNestedArray(H,p.data.get(d.dataId).values),_=t.util.makeZerosNestedTypedArray(o.shape,o.dtype);for(let t=0;t<c;++t)for(let e=0;e<k;++e){const a=e*b-I.top;for(let i=0;i<N;++i){const r=i*m-I.left;for(let o=0;o<g;++o){let d=Number.MIN_SAFE_INTEGER,s=0,l=0;for(let e=0;e<v;++e){const i=a+e*D;if(i>=0&&i<f)for(let a=0;a<A;++a){const n=r+a*F;if(n>=0&&n<y){const r=u[t][i][n][o]+h[e][a][o];r>d&&(d=r,s=e,l=a)}}}_[s][l][o]+=W[t][e][i][o]}}}return{dataId:p.write(t.util.toTypedArray(_,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.dilation2dBackpropFilterConfig=e;
},{"@tensorflow/tfjs-core":"tKjQ"}],"uynu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dBackpropInputConfig=void 0;var t=require("@tensorflow/tfjs-core");const e={kernelName:t.Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:e,backend:a,attrs:i})=>{const{x:o,filter:r,dy:d}=e,{strides:n,pad:s,dilations:p}=i,l=a,u=t.util.toNestedArray(o.shape,l.data.get(o.dataId).values),h=t.util.toNestedArray(r.shape,l.data.get(r.dataId).values),{batchSize:c,inHeight:f,inWidth:y,inChannels:g,outHeight:k,outWidth:I,padInfo:N,strideHeight:b,strideWidth:m,filterHeight:v,filterWidth:A,dilationHeight:D,dilationWidth:H,outShape:W}=t.backend_util.computeDilation2DInfo(o.shape,r.shape,n,s,"NHWC",p);t.util.assert(d.rank===W.length,()=>`Error in ${t.Dilation2DBackpropInput}, dy `+`must have the same rank as output ${W.length}, but got `+`${d.rank}`);const _=t.util.toNestedArray(W,l.data.get(d.dataId).values),x=t.util.makeZerosNestedTypedArray(o.shape,o.dtype);for(let t=0;t<c;++t)for(let e=0;e<k;++e){const a=e*b-N.top;for(let i=0;i<I;++i){const o=i*m-N.left;for(let r=0;r<g;++r){let d=Number.MIN_SAFE_INTEGER,n=a<0?0:a,s=o<0?0:o;for(let e=0;e<v;++e){const i=a+e*D;if(i>=0&&i<f)for(let a=0;a<A;++a){const p=o+a*H;if(p>=0&&p<y){const o=u[t][i][p][r]+h[e][a][r];o>d&&(d=o,n=i,s=p)}}}x[t][n][s][r]+=_[t][e][i][r]}}}return{dataId:l.write(t.util.toTypedArray(x,o.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.dilation2dBackpropInputConfig=e;
},{"@tensorflow/tfjs-core":"tKjQ"}],"uwgF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divConfig=exports.div=exports.divImpl=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/binary_impl"),i=require("../utils/kernel_utils");const t=(0,r.createSimpleBinaryKernelImpl)((e,r)=>e/r);exports.divImpl=t;const n=(0,i.binaryKernelFunc)(e.Div,t);exports.div=n;const o={kernelName:e.Div,backendName:"cpu",kernelFunc:n};exports.divConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/binary_impl":"pLxa","../utils/kernel_utils":"MzwO"}],"s5kW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfConfig=exports.erf=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const t=e.backend_util.ERF_P,n=e.backend_util.ERF_A1,u=e.backend_util.ERF_A2,a=e.backend_util.ERF_A3,s=e.backend_util.ERF_A4,c=e.backend_util.ERF_A5,i=(0,r.unaryKernelFunc)(e.Erf,e=>{const r=Math.sign(e),i=Math.abs(e),o=1/(1+t*i);return r*(1-((((c*o+s)*o+a)*o+u)*o+n)*o*Math.exp(-i*i))});exports.erf=i;const o={kernelName:e.Erf,backendName:"cpu",kernelFunc:i};exports.erfConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"ZgfO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fftBatch=m,exports.fftImpl=p;var e=require("@tensorflow/tfjs-core"),n=require("../kernels/Add"),a=require("../kernels/Complex"),t=require("../kernels/Concat"),o=require("../kernels/Div"),s=require("../kernels/Identity"),r=require("../kernels/Imag"),i=require("../kernels/Multiply"),d=require("../kernels/Real"),l=require("../kernels/Slice"),I=require("../kernels/Sub");function m(n,t,o){const s=n.shape,r=s[0],i=s[1],d=o.data.get(n.dataId),I=d.complexTensorInfos.real,m=d.complexTensorInfos.imag,f=[r,i],u=e.util.sizeFromShape(f),c=e.util.getTypedArrayFromDType("float32",u),T=e.util.getTypedArrayFromDType("float32",u);for(let x=0;x<r;x++){const n=(0,l.slice)({inputs:{x:I},backend:o,attrs:{begin:[x,0],size:[1,i]}}),s=(0,l.slice)({inputs:{x:m},backend:o,attrs:{begin:[x,0],size:[1,i]}}),r=(0,a.complex)({inputs:{real:n,imag:s},backend:o}),{real:d,imag:f}=p(r,t,o),u=e.backend_util.mergeRealAndImagArrays(d,f);for(let a=0;a<i;a++){const n=e.backend_util.getComplexWithIndex(u,a);c[x*i+a]=n.real,T[x*i+a]=n.imag}o.disposeIntermediateTensorInfo(n),o.disposeIntermediateTensorInfo(s),o.disposeIntermediateTensorInfo(r)}const k=o.makeTensorInfo(f,"float32",c),g=o.makeTensorInfo(f,"float32",T),b=(0,a.complex)({inputs:{real:k,imag:g},backend:o});return o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(g),b}function p(n,a,t){const r=e.util.sizeFromShape(n.shape),i=t.data.get(n.dataId),d=t.data.get(i.complexTensorInfos.real.dataId).values,l=t.data.get(i.complexTensorInfos.imag.dataId).values;if(f(r)){const i=u(d,l,r,a,t),I=[n.shape[0],n.shape[1]];if(a){const n=t.makeTensorInfo(I,"float32",i.real),a=t.makeTensorInfo(I,"float32",i.imag),d=t.makeTensorInfo([],"float32",e.util.createScalarValue(r,"float32")),l=(0,s.identity)({inputs:{x:d},backend:t}),m=o.divConfig.kernelFunc({inputs:{a:n,b:d},backend:t}),p=o.divConfig.kernelFunc({inputs:{a:a,b:l},backend:t}),f=t.data.get(m.dataId).values,u=t.data.get(p.dataId).values;return t.disposeIntermediateTensorInfo(n),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(l),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(p),{real:f,imag:u}}return i}{const n=c(e.backend_util.mergeRealAndImagArrays(d,l),r,a);return e.backend_util.splitRealAndImagArrays(n)}}function f(e){return 0==(e&e-1)}function u(o,s,l,m,p){if(1===l)return{real:o,imag:s};const f=e.backend_util.mergeRealAndImagArrays(o,s),c=l/2,T=e.backend_util.complexWithEvenIndex(f),k=T.real,g=T.imag,b=[k.length],x=p.makeTensorInfo(b,"float32",k),y=p.makeTensorInfo(b,"float32",g),h=(0,a.complex)({inputs:{real:x,imag:y},backend:p}),A=e.backend_util.complexWithOddIndex(f),_=A.real,v=A.imag,q=[_.length],F=p.makeTensorInfo(q,"float32",_),C=p.makeTensorInfo(q,"float32",v),R=(0,a.complex)({inputs:{real:F,imag:C},backend:p}),S=u(k,g,c,m,p),z=S.real,W=S.imag,D=[z.length],j=p.makeTensorInfo(D,"float32",z),w=p.makeTensorInfo(D,"float32",W),M=(0,a.complex)({inputs:{real:j,imag:w},backend:p}),O=u(_,v,c,m,p),B=O.real,E=O.imag,P=[B.length],V=p.makeTensorInfo(P,"float32",B),G=p.makeTensorInfo(P,"float32",E),H=(0,a.complex)({inputs:{real:V,imag:G},backend:p}),J=e.backend_util.exponents(l,m),K=[J.real.length],L=p.makeTensorInfo(K,"float32",J.real),N=p.makeTensorInfo(K,"float32",J.imag),Q=(0,a.complex)({inputs:{real:L,imag:N},backend:p}),U=(0,i.multiply)({inputs:{a:Q,b:H},backend:p}),X=(0,n.add)({inputs:{a:M,b:U},backend:p}),Y=(0,I.sub)({inputs:{a:M,b:U},backend:p}),Z=(0,d.real)({inputs:{input:X},backend:p}),$=(0,d.real)({inputs:{input:Y},backend:p}),ee=(0,r.imag)({inputs:{input:X},backend:p}),ne=(0,r.imag)({inputs:{input:Y},backend:p}),ae=(0,t.concat)({inputs:[Z,$],backend:p,attrs:{axis:0}}),te=(0,t.concat)({inputs:[ee,ne],backend:p,attrs:{axis:0}}),oe=p.data.get(ae.dataId).values,se=p.data.get(te.dataId).values;return p.disposeIntermediateTensorInfo(x),p.disposeIntermediateTensorInfo(y),p.disposeIntermediateTensorInfo(h),p.disposeIntermediateTensorInfo(F),p.disposeIntermediateTensorInfo(C),p.disposeIntermediateTensorInfo(R),p.disposeIntermediateTensorInfo(j),p.disposeIntermediateTensorInfo(w),p.disposeIntermediateTensorInfo(M),p.disposeIntermediateTensorInfo(V),p.disposeIntermediateTensorInfo(G),p.disposeIntermediateTensorInfo(H),p.disposeIntermediateTensorInfo(L),p.disposeIntermediateTensorInfo(N),p.disposeIntermediateTensorInfo(Q),p.disposeIntermediateTensorInfo(U),p.disposeIntermediateTensorInfo(X),p.disposeIntermediateTensorInfo(Y),p.disposeIntermediateTensorInfo(Z),p.disposeIntermediateTensorInfo(ee),p.disposeIntermediateTensorInfo($),p.disposeIntermediateTensorInfo(ne),p.disposeIntermediateTensorInfo(ae),p.disposeIntermediateTensorInfo(te),{real:oe,imag:se}}function c(n,a,t){const o=new Float32Array(2*a);for(let s=0;s<a;s++){let r=0,i=0;for(let o=0;o<a;o++){const d=e.backend_util.exponent(s*o,a,t),l=e.backend_util.getComplexWithIndex(n,o);r+=l.real*d.real-l.imag*d.imag,i+=l.real*d.imag+l.imag*d.real}t&&(r/=a,i/=a),e.backend_util.assignToTypedArray(o,r,i,s)}return o}
},{"@tensorflow/tfjs-core":"tKjQ","../kernels/Add":"UlsL","../kernels/Complex":"EwVZ","../kernels/Concat":"kwAi","../kernels/Div":"uwgF","../kernels/Identity":"y2xn","../kernels/Imag":"yPZ8","../kernels/Multiply":"M0SG","../kernels/Real":"KspA","../kernels/Slice":"gWrS","../kernels/Sub":"Ptp1"}],"W56Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=r,exports.fftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fft_utils"),s=require("./Reshape");function r(r){const{inputs:n,backend:a}=r,{input:o}=n,p=e.util.sizeFromShape(o.shape),i=o.shape[o.shape.length-1],f=p/i,u=(0,s.reshape)({inputs:{x:o},backend:a,attrs:{shape:[f,i]}}),c=(0,t.fftBatch)(u,!1,a),h=(0,s.reshape)({inputs:{x:c},backend:a,attrs:{shape:o.shape}});return a.disposeIntermediateTensorInfo(u),a.disposeIntermediateTensorInfo(c),h}const n={kernelName:e.FFT,backendName:"cpu",kernelFunc:r};exports.fftConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/fft_utils":"ZgfO","./Reshape":"Phr1"}],"Tj2g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=r,exports.fillConfig=void 0;var e=require("@tensorflow/tfjs-core");function r(r){const{backend:t,attrs:l}=r,{shape:n,value:i,dtype:s}=l,f=s||e.util.inferDtype(i),u=e.util.getArrayFromDType(f,e.util.sizeFromShape(n));return o(u,i,f),t.makeTensorInfo(n,f,u)}const t={kernelName:e.Fill,backendName:"cpu",kernelFunc:r};function o(e,r,t){e.fill(r)}exports.fillConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ"}],"iwNS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRightConfig=void 0;var e=require("@tensorflow/tfjs-core");const t={kernelName:e.FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:t,attrs:r,backend:o})=>{const{image:a}=t,s=o,p=e.util.getTypedArrayFromDType(a.dtype,e.util.sizeFromShape(a.shape)),[i,n,d,l]=a.shape,f=s.data.get(a.dataId).values;for(let e=0;e<i;e++){const t=e*d*n*l;for(let e=0;e<n;e++){const r=e*(d*l);for(let o=0;o<d;o++){const a=o*l;for(let s=0;s<l;s++){const n=[i,e,o,s][2],c=Math.round(d-n),u=t+r+a+s;let h=f[u];if(c>=0&&c<d){h=f[t+r+c*l+s]}p[u]=h}}}}return{dataId:s.write(p,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};exports.flipLeftRightConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ"}],"ehCA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedConv2D=o,exports.fusedConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fused_utils"),n=require("./Add"),i=require("./Conv2D");function o(e){const{inputs:o,backend:s,attrs:r}=e,{x:d,filter:a,bias:u,preluActivationWeights:c}=o,{strides:f,pad:p,dataFormat:l,dilations:v,dimRoundingMode:m,activation:b}=r;let C=(0,i.conv2D)({inputs:{x:d,filter:a},backend:s,attrs:{strides:f,pad:p,dataFormat:l,dilations:v,dimRoundingMode:m}});if(u){const e=C;C=(0,n.add)({inputs:{a:C,b:u},backend:s}),s.disposeIntermediateTensorInfo(e)}if(b){const e=C;C=(0,t.applyActivation)(s,C,b,c),s.disposeIntermediateTensorInfo(e)}return C}const s={kernelName:e.FusedConv2D,backendName:"cpu",kernelFunc:o};exports.fusedConv2DConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/fused_utils":"axfg","./Add":"UlsL","./Conv2D":"wrip"}],"VfYh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedDepthwiseConv2D=n,exports.fusedDepthwiseConv2DConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fused_utils"),i=require("./Add"),s=require("./DepthwiseConv2dNative");function n(e){const{inputs:n,backend:o,attrs:d}=e,{x:r,filter:a,bias:u,preluActivationWeights:p}=n,{strides:c,pad:f,dataFormat:l,dilations:v,dimRoundingMode:D,activation:m}=d;let C=(0,s.depthwiseConv2dNative)({inputs:{x:r,filter:a},backend:o,attrs:{strides:c,pad:f,dataFormat:l,dilations:v,dimRoundingMode:D}});if(u){const e=C;C=(0,i.add)({inputs:{a:C,b:u},backend:o}),o.disposeIntermediateTensorInfo(e)}if(m){const e=C;C=(0,t.applyActivation)(o,C,m,p),o.disposeIntermediateTensorInfo(e)}return C}const o={kernelName:e.FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:n};exports.fusedDepthwiseConv2DConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/fused_utils":"axfg","./Add":"UlsL","./DepthwiseConv2dNative":"PbFg"}],"z2oo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=r,exports.ifftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/fft_utils"),s=require("./Reshape");function r(r){const{inputs:n,backend:i}=r,{input:a}=n,o=e.util.sizeFromShape(a.shape),p=a.shape[a.shape.length-1],f=o/p,u=(0,s.reshape)({inputs:{x:a},backend:i,attrs:{shape:[f,p]}}),c=(0,t.fftBatch)(u,!0,i),h=(0,s.reshape)({inputs:{x:c},backend:i,attrs:{shape:a.shape}});return i.disposeIntermediateTensorInfo(u),i.disposeIntermediateTensorInfo(c),h}const n={kernelName:e.IFFT,backendName:"cpu",kernelFunc:r};exports.ifftConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/fft_utils":"ZgfO","./Reshape":"Phr1"}],"umqI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFiniteConfig=exports.isFinite=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/unary_utils");const t=(0,i.unaryKernelFunc)(e.IsFinite,e=>Number.isFinite(e)?1:0,"bool");exports.isFinite=t;const n={kernelName:e.IsFinite,backendName:"cpu",kernelFunc:t};exports.isFiniteConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"iZ8Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInfConfig=exports.isInf=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../utils/unary_utils");const n=(0,s.unaryKernelFunc)(e.IsInf,e=>Math.abs(e)===1/0?1:0,"bool");exports.isInf=n;const r={kernelName:e.IsInf,backendName:"cpu",kernelFunc:n};exports.isInfConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"Gp3w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNConfig=exports.isNaN=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const s=(0,r.unaryKernelFunc)(e.IsNan,e=>Number.isNaN(e)?1:0,"bool");exports.isNaN=s;const o={kernelName:e.IsNan,backendName:"cpu",kernelFunc:s};exports.isNaNConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"EEj8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1pConfig=exports.log1p=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../utils/unary_utils");const r=(0,o.unaryKernelFunc)(e.Log1p,e=>Math.log1p(e));exports.log1p=r;const t={kernelName:e.Log1p,backendName:"cpu",kernelFunc:r};exports.log1pConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"aUKR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNotConfig=exports.logicalNot=void 0;var o=require("@tensorflow/tfjs-core"),e=require("../utils/unary_utils");const t=(0,e.unaryKernelFunc)(o.LogicalNot,o=>o?0:1,"bool");exports.logicalNot=t;const r={kernelName:o.LogicalNot,backendName:"cpu",kernelFunc:t};exports.logicalNotConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"Vr6A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("./Max_impl"),s=require("./Transpose_impl");const n={kernelName:e.Max,backendName:"cpu",kernelFunc:({inputs:n,attrs:r,backend:i})=>{const{x:l}=n,{reductionIndices:o,keepDims:p}=r,u=i;let d=l.shape;const c=d.length,m=e.util.parseAxisParam(o,d);let x=m;const k=e.backend_util.getAxesPermutation(x,c);let _=u.data.get(l.dataId).values;if(null!=k){const t=new Array(c);for(let e=0;e<t.length;e++)t[e]=d[k[e]];_=(0,s.transposeImpl)(_,d,l.dtype,k,t),x=e.backend_util.getInnerMostAxes(x.length,c),d=t}(0,t.assertNotComplex)(l,"max"),e.backend_util.assertAxesAreInnerMostDims("max",x,c);const[b,f]=e.backend_util.computeOutAndReduceShapes(d,x),g=e.util.sizeFromShape(f),h=(0,a.maxImpl)(_,g,b,l.dtype),y=u.write(h,b,l.dtype);let A=b;if(p){A=e.backend_util.expandShapeToKeepDim(b,m)}return{dataId:y,shape:A,dtype:l.dtype}}};exports.maxConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","./Max_impl":"TG6C","./Transpose_impl":"ijN7"}],"zeqh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=r,exports.maxPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils"),i=require("./Identity");function r(r){const{inputs:s,backend:a,attrs:n}=r,{x:l}=s;(0,t.assertNotComplex)(l,"maxPool");const{filterSize:u,strides:d,pad:p,dimRoundingMode:c}=n;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const m=e.backend_util.computePool2DInfo(l.shape,u,d,1,p,c);let x;if(1===m.filterWidth&&1===m.filterHeight&&e.util.arraysEqual(m.inShape,m.outShape))x=(0,i.identity)({inputs:{x:l},backend:a});else{const t=a.data.get(l.dataId).values,i=e.util.computeStrides(l.shape),r=(0,o.pool)(t,l.shape,l.dtype,i,m,"max");x=a.makeTensorInfo(m.outShape,l.dtype,r.values)}return x}const s={kernelName:e.MaxPool,backendName:"cpu",kernelFunc:r};exports.maxPoolConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","../utils/pool_utils":"yOLZ","./Identity":"y2xn"}],"iRw9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolBackprop=a,exports.maxPoolBackpropConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),o=require("../utils/pool_utils");function a(a){const{inputs:i,backend:r,attrs:l}=a,{dy:s,input:n,output:p}=i,f=n;(0,t.assertNotComplex)([n,p],"maxPoolBackprop");const{filterSize:d,strides:u,pad:c,dimRoundingMode:h}=l,g=e.backend_util.computePool2DInfo(f.shape,d,u,1,c,h),k=r.data.get(f.dataId).values,m=(0,e.buffer)(g.outShape,f.dtype,(0,o.maxPoolPositions)(k,f.shape,f.dtype,g).values),x=g.strideHeight,v=g.strideWidth,P=g.dilationHeight,b=g.dilationWidth,I=g.effectiveFilterHeight,y=g.effectiveFilterWidth,B=y-1-g.padInfo.left,H=I-1-g.padInfo.top,M=(0,e.buffer)(f.shape,"float32"),W=r.data.get(s.dataId).values,_=(0,e.buffer)(s.shape,"float32",W);for(let e=0;e<g.batchSize;++e)for(let t=0;t<g.inChannels;++t)for(let o=0;o<g.inHeight;++o)for(let a=0;a<g.inWidth;++a){const i=o-H,r=a-B;let l=0;for(let o=0;o<I;o+=P){const a=(i+o)/x;if(!(a<0||a>=g.outHeight||Math.floor(a)!==a))for(let i=0;i<y;i+=b){const s=(r+i)/v;if(s<0||s>=g.outWidth||Math.floor(s)!==s)continue;const n=I*y-1-m.get(e,a,s,t)===o*y+i?1:0;0!==n&&(l+=_.get(e,a,s,t)*n)}}M.set(l,e,o,a,t)}return r.makeTensorInfo(M.shape,M.dtype,M.values)}const i={kernelName:e.MaxPoolBackprop,backendName:"cpu",kernelFunc:a};exports.maxPoolBackpropConfig=i;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","../utils/pool_utils":"yOLZ"}],"tbe0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxImpl=t;var e=require("@tensorflow/tfjs-core"),o=require("../utils/pool_utils");function t(t,r,s,l,u){const i=e.util.computeStrides(r),a=(0,o.pool)(t,r,s,i,u,"max"),n=(0,o.maxPoolPositions)(t,r,s,u,!0,l);return[a.values,n.values]}
},{"@tensorflow/tfjs-core":"tKjQ","../utils/pool_utils":"yOLZ"}],"v1Dz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),a=require("./MaxPoolWithArgmax_impl");const o={kernelName:e.MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:o,attrs:r,backend:p})=>{const{x:i}=o,{filterSize:d,strides:s,pad:l,includeBatchInIndex:n}=r,u=p;(0,t.assertNotComplex)(i,"MaxPoolWithArgmax");const x=u.data.get(i.dataId).values,c=e.backend_util.computePool2DInfo(i.shape,d,s,[1,1],l),[h,m]=(0,a.maxPoolWithArgmaxImpl)(x,i.shape,i.dtype,n,c),g=u.write(h,c.outShape,i.dtype),P=u.write(m,c.outShape,i.dtype);return[{dataId:g,shape:c.outShape,dtype:i.dtype},{dataId:P,shape:c.outShape,dtype:"int32"}]}};exports.maxPoolWithArgmaxConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","./MaxPoolWithArgmax_impl":"tbe0"}],"Dpp4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPad=r,exports.mirrorPadConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function r(r){const{inputs:o,backend:a,attrs:p}=r,{x:d}=o,{paddings:i,mode:s}=p;(0,t.assertNotComplex)(d,"mirrorPad");const n=i.map((e,t)=>e[0]+d.shape[t]+e[1]),l=i.map(e=>e[0]),u=i.map((e,t)=>e[0]+d.shape[t]),c="reflect"===s?0:1,m=a.data.get(d.dataId).values,f=d.shape.length,h=e.util.computeStrides(d.shape),x=e.util.sizeFromShape(n),y=n.length,g=e.util.computeStrides(n),P=e.util.getTypedArrayFromDType(d.dtype,x);for(let t=0;t<x;t++){let r=e.util.indexToLoc(t,y,g);for(let e=0;e<y;e++)r[e]<l[e]?r[e]=2*l[e]-r[e]-c:r[e]>=u[e]&&(r[e]=2*(u[e]-1)-r[e]+c);r=r.map((e,t)=>e-l[t]);const o=e.util.locToIndex(r,f,h);P[t]=m[o]}return{dataId:a.write(P,n,d.dtype),shape:n,dtype:d.dtype}}const o={kernelName:e.MirrorPad,backendName:"cpu",kernelFunc:r};exports.mirrorPadConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"Op2K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV4Config=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../cpu_util");const o=e.kernel_impls.nonMaxSuppressionV4Impl,t={kernelName:e.NonMaxSuppressionV4,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{boxes:r,scores:a}=e,{maxOutputSize:u,iouThreshold:p,scoreThreshold:d,padToMaxOutputSize:i}=n,l=t;(0,s.assertNotComplex)(r,"NonMaxSuppressionPadded");const c=l.data.get(r.dataId).values,x=l.data.get(a.dataId).values,{selectedIndices:M,validOutputs:S}=o(c,x,u,p,d,i);return[M,S]}};exports.nonMaxSuppressionV4Config=t;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"Yz07":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV5Config=void 0;var e=require("@tensorflow/tfjs-core"),s=require("../cpu_util");const o=e.kernel_impls.nonMaxSuppressionV5Impl,r={kernelName:e.NonMaxSuppressionV5,backendName:"cpu",kernelFunc:({inputs:e,backend:r,attrs:t})=>{const{boxes:n,scores:a}=e,{maxOutputSize:p,iouThreshold:u,scoreThreshold:i,softNmsSigma:c}=t,d=r;(0,s.assertNotComplex)(n,"NonMaxSuppressionWithScore");const l=d.data.get(n.dataId).values,x=d.data.get(a.dataId).values,S=p,m=u,f=i,M=c,{selectedIndices:N,selectedScores:g}=o(l,x,S,m,f,M);return[N,g]}};exports.nonMaxSuppressionV5Config=r;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"DDMF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.padV2=a,exports.padV2Config=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");function a(a){const{inputs:p,backend:o,attrs:r}=a,{x:s}=p,{paddings:d,constantValue:i}=r;(0,t.assertNotComplex)(s,"pad");const n=d.map((e,t)=>e[0]+s.shape[t]+e[1]),u=d.map(e=>e[0]),l=o.data.get(s.dataId).values,c=e.util.sizeFromShape(s.shape),m=s.shape.length,h=e.util.computeStrides(s.shape),f=e.util.sizeFromShape(n),x=n.length,y=e.util.computeStrides(n),g=e.util.getTypedArrayFromDType(s.dtype,f);0!==i&&g.fill(i);for(let t=0;t<c;t++){const a=e.util.indexToLoc(t,m,h).map((e,t)=>e+u[t]);g[e.util.locToIndex(a,x,y)]=l[t]}return{dataId:o.write(g,n,s.dtype),shape:n,dtype:s.dtype}}const p={kernelName:e.PadV2,backendName:"cpu",kernelFunc:a};exports.padV2Config=p;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"pkS2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocalConfig=exports.reciprocal=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const c=(0,r.unaryKernelFunc)(e.Reciprocal,e=>1/e);exports.reciprocal=c;const o={kernelName:e.Reciprocal,backendName:"cpu",kernelFunc:c};exports.reciprocalConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"kBDl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffsetConfig=void 0;var e=require("@tensorflow/tfjs-core");const t={kernelName:e.RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:t,attrs:a,backend:r})=>{const{image:o}=t,{radians:s,fillValue:n,center:i}=a,d=r,p=e.util.getTypedArrayFromDType(o.dtype,e.util.sizeFromShape(o.shape)),[f,l,c,u]=o.shape,[h,y]=e.backend_util.getImageCenter(i,l,c),g=Math.sin(s),m=Math.cos(s),b=d.data.get(o.dataId).values;for(let e=0;e<f;e++){const t=e*c*l*u;for(let e=0;e<l;e++){const a=e*(c*u);for(let r=0;r<c;r++){const o=r*u;for(let s=0;s<u;s++){const i=[f,e,r,s],d=i[2],k=i[1];let M=(d-h)*m-(k-y)*g,v=(d-h)*g+(k-y)*m;M=Math.round(M+h),v=Math.round(v+y);let O=n;if("number"!=typeof n&&(O=3===s?255:n[s]),M>=0&&M<c&&v>=0&&v<l){O=b[t+v*(c*u)+M*u+s]}p[t+a+o+s]=O}}}}return{dataId:d.write(p,o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};exports.rotateWithOffsetConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ"}],"aWfW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.roundConfig=exports.round=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const o=(0,r.unaryKernelFunc)(e.Round,e=>{const r=Math.floor(e);return e-r<.5?Math.floor(e):e-r>.5?Math.ceil(e):r%2==0?r:r+1});exports.round=o;const n={kernelName:e.Round,backendName:"cpu",kernelFunc:o};exports.roundConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"IeOr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.seluConfig=exports.selu=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const u=e.backend_util.SELU_SCALEALPHA,s=e.backend_util.SELU_SCALE,t=(0,r.unaryKernelFunc)(e.Selu,e=>e>=0?s*e:u*(Math.exp(e)-1));exports.selu=t;const l={kernelName:e.Selu,backendName:"cpu",kernelFunc:t};exports.seluConfig=l;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"wo2o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidConfig=exports.sigmoid=void 0;var e=require("@tensorflow/tfjs-core"),i=require("../utils/unary_utils");const o=(0,i.unaryKernelFunc)(e.Sigmoid,e=>1/(1+Math.exp(-e)));exports.sigmoid=o;const r={kernelName:e.Sigmoid,backendName:"cpu",kernelFunc:o};exports.sigmoidConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"rWft":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.signConfig=exports.sign=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sign,e=>e<0?-1:e>0?1:0);exports.sign=r;const s={kernelName:e.Sign,backendName:"cpu",kernelFunc:r};exports.signConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"tlfG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinConfig=exports.sin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sin,e=>Math.sin(e));exports.sin=r;const s={kernelName:e.Sin,backendName:"cpu",kernelFunc:r};exports.sinConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"TBbP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinhConfig=exports.sinh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const r=(0,n.unaryKernelFunc)(e.Sinh,e=>Math.sinh(e));exports.sinh=r;const s={kernelName:e.Sinh,backendName:"cpu",kernelFunc:r};exports.sinhConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"rFKw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplusConfig=exports.softplus=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const s=1.1920928955078125e-7,o=Math.log(s)+2,r=(0,t.unaryKernelFunc)(e.Softplus,e=>{const t=e>-o,s=e<o,r=Math.exp(e);let u;return u=s?r:t?e:Math.log(1+r)});exports.softplus=r;const u={kernelName:e.Softplus,backendName:"cpu",kernelFunc:r};exports.softplusConfig=u;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"JzEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=r,exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./Transpose_impl");function r(e){const{inputs:r,attrs:a,backend:n}=e,{x:o}=r,{perm:p}=a;(0,t.assertNotComplex)(o,"transpose");const d=o.shape.length,u=new Array(d);for(let t=0;t<u.length;t++)u[t]=o.shape[p[t]];const c=n.data.get(o.dataId).values,i=(0,s.transposeImpl)(c,o.shape,o.dtype,p,u);return{dataId:n.write(i,u,o.dtype),shape:u,dtype:o.dtype}}const a={kernelName:e.Transpose,backendName:"cpu",kernelFunc:r};exports.transposeConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","./Transpose_impl":"ijN7"}],"r9Le":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchND=r,exports.spaceToBatchNDConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),s=require("./PadV2"),a=require("./Reshape"),n=require("./Transpose");function r(r){const{inputs:p,backend:o,attrs:c}=r,{x:i}=p,{blockShape:u,paddings:d}=c;(0,t.assertNotComplex)([i],"spaceToBatchND");const h=e.util.sizeFromShape(u),l=[[0,0]];l.push(...d);for(let e=1+u.length;e<i.shape.length;++e)l.push([0,0]);const k=s.padV2Config.kernelFunc({inputs:{x:i},backend:o,attrs:{paddings:l,constantValue:0}}),g=e.backend_util.getReshaped(k.shape,u,h,!1),b=e.backend_util.getPermuted(g.length,u.length,!1),f=e.backend_util.getReshapedPermuted(k.shape,u,h,!1),m={x:k},x={shape:g},T=(0,a.reshape)({inputs:m,backend:o,attrs:x}),N={x:T},I={perm:b},_=(0,n.transpose)({inputs:N,backend:o,attrs:I}),q={x:_},B={shape:f},D=(0,a.reshape)({inputs:q,backend:o,attrs:B});return o.disposeIntermediateTensorInfo(k),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(_),D}const p={kernelName:e.SpaceToBatchND,backendName:"cpu",kernelFunc:r};exports.spaceToBatchNDConfig=p;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","./PadV2":"DDMF","./Reshape":"Phr1","./Transpose":"JzEX"}],"ejn2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrtConfig=exports.sqrt=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../utils/unary_utils");const t=(0,r.unaryKernelFunc)(e.Sqrt,e=>Math.sqrt(e));exports.sqrt=t;const s={kernelName:e.Sqrt,backendName:"cpu",kernelFunc:t};exports.sqrtConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"tBAU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util");const r={kernelName:e.Square,backendName:"cpu",kernelFunc:({inputs:e,backend:r})=>{const{x:a}=e,s=r;(0,t.assertNotComplex)(a,"square");const o=s.data.get(a.dataId).values,n=new Float32Array(o.length);for(let t=0;t<o.length;++t){const e=o[t];n[t]=e*e}return{dataId:s.write(n,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};exports.squareConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl"}],"zpLW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stepConfig=exports.step=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../utils/unary_utils");const r=(0,t.unaryKernelFunc)(e.Step,(e,t)=>{const r=t;return isNaN(e)?NaN:e>0?1:r.alpha});exports.step=r;const s={kernelName:e.Step,backendName:"cpu",kernelFunc:r};exports.stepConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"lHRn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanConfig=exports.tan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const t=(0,n.unaryKernelFunc)(e.Tan,e=>Math.tan(e));exports.tan=t;const r={kernelName:e.Tan,backendName:"cpu",kernelFunc:t};exports.tanConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"GzDW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanhConfig=exports.tanh=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../utils/unary_utils");const t=(0,n.unaryKernelFunc)(e.Tanh,e=>Math.tanh(e));exports.tanh=t;const r={kernelName:e.Tanh,backendName:"cpu",kernelFunc:t};exports.tanhConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../utils/unary_utils":"BW68"}],"ZZBE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=n,exports.uniqueConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../cpu_util"),u=require("./Unique_impl");function n(e){const{inputs:n,attrs:o,backend:r}=e,{axis:i}=o,{x:s}=n;(0,t.assertNotComplex)(s,"unique");const a=r.data.get(s.dataId).values,{outputValues:p,outputShape:c,indices:l}=(0,u.uniqueImpl)(a,i,s.shape,s.dtype);return[r.makeTensorInfo(c,s.dtype,p),r.makeTensorInfo([l.length],"int32",l)]}const o={kernelName:e.Unique,backendName:"cpu",kernelFunc:n};exports.uniqueConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../cpu_util":"A1gl","./Unique_impl":"cM5Y"}],"PXqZ":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),r=require("./kernels/_FusedMatMul"),i=require("./kernels/Abs"),n=require("./kernels/Acos"),o=require("./kernels/Acosh"),s=require("./kernels/Add"),l=require("./kernels/Asin"),u=require("./kernels/Asinh"),f=require("./kernels/Atan"),C=require("./kernels/Atanh"),g=require("./kernels/AvgPool"),k=require("./kernels/AvgPoolBackprop"),a=require("./kernels/BatchMatMul"),q=require("./kernels/BatchNorm"),t=require("./kernels/Cast"),p=require("./kernels/Ceil"),c=require("./kernels/Clip"),d=require("./kernels/Complex"),v=require("./kernels/Concat"),h=require("./kernels/Conv2D"),D=require("./kernels/Conv2DBackpropFilter"),B=require("./kernels/Conv2DBackpropInput"),x=require("./kernels/Conv3D"),F=require("./kernels/Conv3DBackpropFilterV2"),N=require("./kernels/Conv3DBackpropInputV2"),m=require("./kernels/Cos"),M=require("./kernels/Cosh"),S=require("./kernels/DepthwiseConv2dNative"),I=require("./kernels/DepthwiseConv2dNativeBackpropFilter"),P=require("./kernels/DepthwiseConv2dNativeBackpropInput"),A=require("./kernels/Dilation2D"),R=require("./kernels/Dilation2DBackpropFilter"),V=require("./kernels/Dilation2DBackpropInput"),w=require("./kernels/Div"),T=require("./kernels/Elu"),b=require("./kernels/Erf"),E=require("./kernels/Exp"),L=require("./kernels/Expm1"),y=require("./kernels/FFT"),W=require("./kernels/Fill"),O=require("./kernels/FlipLeftRight"),_=require("./kernels/Floor"),j=require("./kernels/FusedConv2D"),K=require("./kernels/FusedDepthwiseConv2D"),U=require("./kernels/Identity"),z=require("./kernels/IFFT"),G=require("./kernels/Imag"),H=require("./kernels/IsFinite"),J=require("./kernels/IsInf"),Q=require("./kernels/IsNaN"),X=require("./kernels/Log"),Y=require("./kernels/Log1p"),Z=require("./kernels/LogicalNot"),$=require("./kernels/Max"),ee=require("./kernels/MaxPool"),re=require("./kernels/MaxPoolBackprop"),ie=require("./kernels/MaxPoolWithArgmax"),ne=require("./kernels/MirrorPad"),oe=require("./kernels/Multiply"),se=require("./kernels/NonMaxSuppressionV4"),le=require("./kernels/NonMaxSuppressionV5"),ue=require("./kernels/NotEqual"),fe=require("./kernels/PadV2"),Ce=require("./kernels/Prelu"),ge=require("./kernels/Real"),ke=require("./kernels/Reciprocal"),ae=require("./kernels/Relu"),qe=require("./kernels/Relu6"),te=require("./kernels/Reshape"),pe=require("./kernels/RotateWithOffset"),ce=require("./kernels/Round"),de=require("./kernels/Rsqrt"),ve=require("./kernels/Selu"),he=require("./kernels/Sigmoid"),De=require("./kernels/Sign"),Be=require("./kernels/Sin"),xe=require("./kernels/Sinh"),Fe=require("./kernels/Slice"),Ne=require("./kernels/Softplus"),me=require("./kernels/SpaceToBatchND"),Me=require("./kernels/Sqrt"),Se=require("./kernels/Square"),Ie=require("./kernels/SquaredDifference"),Pe=require("./kernels/Step"),Ae=require("./kernels/Sub"),Re=require("./kernels/Tan"),Ve=require("./kernels/Tanh"),we=require("./kernels/Transpose"),Te=require("./kernels/Unique");const be=[r._fusedMatMulConfig,i.absConfig,n.acosConfig,o.acoshConfig,s.addConfig,l.asinConfig,u.asinhConfig,f.atanConfig,C.atanhConfig,g.avgPoolConfig,k.avgPoolBackpropConfig,a.batchMatMulConfig,q.batchNormConfig,t.castConfig,p.ceilConfig,c.clipConfig,d.complexConfig,v.concatConfig,D.conv2DBackpropFilterConfig,B.conv2DBackpropInputConfig,h.conv2DConfig,F.conv3DBackpropFilterV2Config,N.conv3DBackpropInputV2Config,x.conv3DConfig,m.cosConfig,M.coshConfig,S.depthwiseConv2dNativeConfig,I.depthwiseConv2dNativeBackpropFilterConfig,P.depthwiseConv2dNativeBackpropInputConfig,A.dilation2dConfig,V.dilation2dBackpropInputConfig,R.dilation2dBackpropFilterConfig,w.divConfig,T.eluConfig,b.erfConfig,E.expConfig,L.expm1Config,y.fftConfig,W.fillConfig,O.flipLeftRightConfig,_.floorConfig,j.fusedConv2DConfig,K.fusedDepthwiseConv2DConfig,U.identityConfig,z.ifftConfig,G.imagConfig,H.isFiniteConfig,J.isInfConfig,Q.isNaNConfig,X.logConfig,Y.log1pConfig,Z.logicalNotConfig,ee.maxPoolConfig,re.maxPoolBackpropConfig,ie.maxPoolWithArgmaxConfig,$.maxConfig,ne.mirrorPadConfig,oe.multiplyConfig,se.nonMaxSuppressionV4Config,le.nonMaxSuppressionV5Config,ue.notEqualConfig,fe.padV2Config,Ce.preluConfig,ge.realConfig,ke.reciprocalConfig,ae.reluConfig,qe.relu6Config,te.reshapeConfig,pe.rotateWithOffsetConfig,ce.roundConfig,de.rsqrtConfig,ve.seluConfig,he.sigmoidConfig,De.signConfig,Be.sinConfig,xe.sinhConfig,Fe.sliceConfig,Ne.softplusConfig,me.spaceToBatchNDConfig,Me.sqrtConfig,Se.squareConfig,Ie.squaredDifferenceConfig,Pe.stepConfig,Ae.subConfig,Re.tanConfig,Ve.tanhConfig,we.transposeConfig,Te.uniqueConfig];for(const Ee of be)(0,e.registerKernel)(Ee);
},{"@tensorflow/tfjs-core":"tKjQ","./kernels/_FusedMatMul":"y5Ok","./kernels/Abs":"r8e2","./kernels/Acos":"vphf","./kernels/Acosh":"xVpC","./kernels/Add":"UlsL","./kernels/Asin":"b1tE","./kernels/Asinh":"J7Sc","./kernels/Atan":"QN72","./kernels/Atanh":"UgfJ","./kernels/AvgPool":"T59m","./kernels/AvgPoolBackprop":"RUph","./kernels/BatchMatMul":"ajCN","./kernels/BatchNorm":"In1K","./kernels/Cast":"Aadb","./kernels/Ceil":"pkVL","./kernels/Clip":"bbrB","./kernels/Complex":"EwVZ","./kernels/Concat":"kwAi","./kernels/Conv2D":"wrip","./kernels/Conv2DBackpropFilter":"xPjq","./kernels/Conv2DBackpropInput":"Up3H","./kernels/Conv3D":"nzys","./kernels/Conv3DBackpropFilterV2":"vnbt","./kernels/Conv3DBackpropInputV2":"BJ3o","./kernels/Cos":"gSkV","./kernels/Cosh":"QT63","./kernels/DepthwiseConv2dNative":"PbFg","./kernels/DepthwiseConv2dNativeBackpropFilter":"rVR5","./kernels/DepthwiseConv2dNativeBackpropInput":"kly0","./kernels/Dilation2D":"gImL","./kernels/Dilation2DBackpropFilter":"Ziqg","./kernels/Dilation2DBackpropInput":"uynu","./kernels/Div":"uwgF","./kernels/Elu":"Lle9","./kernels/Erf":"s5kW","./kernels/Exp":"aEU3","./kernels/Expm1":"MXIz","./kernels/FFT":"W56Q","./kernels/Fill":"Tj2g","./kernels/FlipLeftRight":"iwNS","./kernels/Floor":"Oh0i","./kernels/FusedConv2D":"ehCA","./kernels/FusedDepthwiseConv2D":"VfYh","./kernels/Identity":"y2xn","./kernels/IFFT":"z2oo","./kernels/Imag":"yPZ8","./kernels/IsFinite":"umqI","./kernels/IsInf":"iZ8Y","./kernels/IsNaN":"Gp3w","./kernels/Log":"fST7","./kernels/Log1p":"EEj8","./kernels/LogicalNot":"aUKR","./kernels/Max":"Vr6A","./kernels/MaxPool":"zeqh","./kernels/MaxPoolBackprop":"iRw9","./kernels/MaxPoolWithArgmax":"v1Dz","./kernels/MirrorPad":"Dpp4","./kernels/Multiply":"M0SG","./kernels/NonMaxSuppressionV4":"Op2K","./kernels/NonMaxSuppressionV5":"Yz07","./kernels/NotEqual":"LW7g","./kernels/PadV2":"DDMF","./kernels/Prelu":"h4JL","./kernels/Real":"KspA","./kernels/Reciprocal":"pkS2","./kernels/Relu":"eOXz","./kernels/Relu6":"eXOt","./kernels/Reshape":"Phr1","./kernels/RotateWithOffset":"kBDl","./kernels/Round":"aWfW","./kernels/Rsqrt":"r8RP","./kernels/Selu":"IeOr","./kernels/Sigmoid":"wo2o","./kernels/Sign":"rWft","./kernels/Sin":"tlfG","./kernels/Sinh":"TBbP","./kernels/Slice":"gWrS","./kernels/Softplus":"rFKw","./kernels/SpaceToBatchND":"r9Le","./kernels/Sqrt":"ejn2","./kernels/Square":"tBAU","./kernels/SquaredDifference":"XZTE","./kernels/Step":"zpLW","./kernels/Sub":"Ptp1","./kernels/Tan":"lHRn","./kernels/Tanh":"GzDW","./kernels/Transpose":"JzEX","./kernels/Unique":"ZZBE"}],"txfD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})}),require("./register_all_kernels");
},{"./base":"DOsN","./register_all_kernels":"PXqZ"}],"SALK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearWebGLContext=n,exports.setWebGLContext=o,exports.getWebGLContext=r;const e={},t={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function n(t){delete e[t]}function o(t,n){e[t]=n}function r(t){if(!(t in e)){const n=l(t);if(null===n)return console.log("Could not get context for WebGL version",t),null;e[t]=n}const n=e[t];return n.isContextLost()?(delete e[t],r(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),e[t])}function a(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function l(n){if(1!==n&&2!==n)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const o=a(n);return o.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete e[n]},!1),1===n?o.getContext("webgl",t)||o.getContext("experimental-webgl",t):o.getContext("webgl2",t)}
},{}],"K2eT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUnpackedMatrixTextureShapeWidthHeight=a,exports.getUnpackedArraySizeFromMatrixSize=n,exports.getColorMatrixTextureShapeWidthHeight=i,exports.getDenseTexShape=u,exports.getMatrixSizeFromUnpackedArraySize=l,exports.decodeMatrixFromUnpackedColorRGBAArray=A,exports.getPackedMatrixTextureShapeWidthHeight=x,exports.getPackedRGBAArraySizeFromMatrixShape=c,exports.getTextureConfig=s,exports.PhysicalTextureType=exports.TextureUsage=exports.PackingScheme=void 0;var e,t,r,o=require("@tensorflow/tfjs-core");function a(e,t){return[t,e]}function n(e,t){return e*t}function i(e,t){return[4*t,e]}function u(e){const t=o.util.sizeFromShape(e),r=Math.ceil(t/4);return o.util.sizeToSquarishShape(r)}function l(e,t){if(e%t!=0)throw new Error(`unpackedSize (${e}) must be a multiple of `+`${t}`);return e/t}function A(e,t,r){const o=e.length*r/4;if(t.length<o)throw new Error(`matrix length (${t.length}) must be >= ${o}`);let a=0;for(let n=0;n<e.length;n+=4)for(let o=0;o<r;o++)t[a++]=e[n+o]}function x(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function c(e,t){const[r,o]=x(e,t);return r*o*4}function s(e,t){const r=e;let a,n,i,u,l,A,x,c,s,p;return 2===(0,o.env)().getNumber("WEBGL_VERSION")?(a=r.R32F,n=r.R16F,i=r.RGBA16F,u=r.RGBA32F,l=r.RED,x=4,c=1,s=r.HALF_FLOAT,p=r.FLOAT):(a=e.RGBA,n=e.RGBA,i=e.RGBA,u=r.RGBA,l=e.RGBA,x=4,c=4,s=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT),{internalFormatFloat:a,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:u,textureFormatFloat:l,downloadTextureFormat:A=e.RGBA,downloadUnpackNumChannels:x,defaultNumChannels:c,textureTypeHalfFloat:s,textureTypeFloat:p}}exports.PackingScheme=e,function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(e||(exports.PackingScheme=e={})),exports.TextureUsage=t,function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(t||(exports.TextureUsage=t={})),exports.PhysicalTextureType=r,function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(r||(exports.PhysicalTextureType=r={}));
},{"@tensorflow/tfjs-core":"tKjQ"}],"ElKU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.callAndCheck=n,exports.canBeRepresented=i,exports.getWebGLErrorMessage=E,exports.getExtensionOrThrow=f,exports.createVertexShader=s,exports.createFragmentShader=l,exports.createProgram=F,exports.linkProgram=R,exports.validateProgram=g,exports.createStaticVertexBuffer=x,exports.createStaticIndexBuffer=_,exports.getNumChannels=b,exports.createTexture=h,exports.validateTextureSize=m,exports.createFramebuffer=A,exports.bindVertexBufferToProgramAttribute=d,exports.bindTextureUnit=U,exports.unbindTextureUnit=p,exports.getProgramUniformLocationOrThrow=M,exports.getProgramUniformLocation=L,exports.bindTextureToProgramUniformSampler=S,exports.bindCanvasToFramebuffer=I,exports.bindColorTextureToFramebuffer=O,exports.unbindColorTextureFromFramebuffer=B,exports.validateFramebuffer=N,exports.getFramebufferErrorMessage=C,exports.getBatchDim=w,exports.getRowsCols=G,exports.getShapeAs3D=X,exports.getTextureShapeFromLogicalShape=W,exports.isReshapeFree=V,exports.getWebGLMaxTextureSize=H,exports.resetMaxTextureSize=k,exports.resetMaxTexturesInShader=q,exports.getMaxTexturesInShader=z,exports.getWebGLDisjointQueryTimerVersion=j,exports.hasExtension=Y,exports.isWebGLVersionEnabled=Z,exports.isCapableOfRenderingToFloatTexture=K,exports.isDownloadFloatTextureEnabled=Q,exports.isWebGLFenceEnabled=re,exports.assertNotComplex=te;var e=require("@tensorflow/tfjs-core"),r=require("./canvas_util"),t=require("./tex_util");function n(r,t){const n=t();return(0,e.env)().getBool("DEBUG")&&o(r),n}function o(e){const r=e.getError();if(r!==e.NO_ERROR)throw new Error("WebGL Error: "+E(e,r))}const u=5.96e-8,a=65504;function i(r){return!!((0,e.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===r||u<Math.abs(r)&&Math.abs(r)<a)}function E(e,r){switch(r){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${r}`}}function f(e,r){return D(e,()=>e.getExtension(r),'Extension "'+r+'" not supported on this browser.')}function s(e,r){const t=D(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(n(e,()=>e.shaderSource(t,r)),n(e,()=>e.compileShader(t)),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function l(e,r){const t=D(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(n(e,()=>e.shaderSource(t,r)),n(e,()=>e.compileShader(t)),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw T(r,e.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const c=/ERROR: [0-9]+:([0-9]+):/g;function T(r,t){const n=c.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(r);const o=+n[1],u=r.split("\n"),a=u.length.toString().length+2,i=u.map((r,t)=>e.util.rightPad((t+1).toString(),a)+r);let E=0;for(let e=0;e<i.length;e++)E=Math.max(i[e].length,E);const f=i.slice(0,o-1),s=i.slice(o-1,o),l=i.slice(o);console.log(f.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${e.util.rightPad(s[0],E)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(l.join("\n"))}function F(e){return D(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function R(e,r){if(n(e,()=>e.linkProgram(r)),!1===e.getProgramParameter(r,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function g(e,r){if(n(e,()=>e.validateProgram(r)),!1===e.getProgramParameter(r,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function x(e,r){const t=D(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return n(e,()=>e.bindBuffer(e.ARRAY_BUFFER,t)),n(e,()=>e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)),t}function _(e,r){const t=D(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return n(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t)),n(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)),t}function b(){return 2===(0,e.env)().getNumber("WEBGL_VERSION")?1:4}function h(e){return D(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function m(r,t){const n=(0,e.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(r<=0||t<=0){throw new Error("Requested texture size "+`[${r}x${t}]`+" is invalid.")}if(r>n||t>n){throw new Error("Requested texture size "+`[${r}x${t}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}}function A(e){return D(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function d(e,r,t,o,u,a,i){const E=e.getAttribLocation(r,t);return-1!==E&&(n(e,()=>e.bindBuffer(e.ARRAY_BUFFER,o)),n(e,()=>e.vertexAttribPointer(E,u,e.FLOAT,!1,a,i)),n(e,()=>e.enableVertexAttribArray(E)),!0)}function U(e,r,t){P(e,t),n(e,()=>e.activeTexture(e.TEXTURE0+t)),n(e,()=>e.bindTexture(e.TEXTURE_2D,r))}function p(e,r){P(e,r),n(e,()=>e.activeTexture(e.TEXTURE0+r)),n(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function M(e,r,t){return D(e,()=>e.getUniformLocation(r,t),'uniform "'+t+'" not present in program.')}function L(e,r,t){return e.getUniformLocation(r,t)}function S(e,r,t,o){n(e,()=>U(e,r,o)),n(e,()=>e.uniform1i(t,o))}function I(e){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),n(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),n(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function O(e,r,t){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),n(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0))}function B(e,r){n(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,r)),n(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function N(e){const r=e.checkFramebufferStatus(e.FRAMEBUFFER);if(r!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+C(e,r))}function C(e,r){switch(r){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${r}`}}function D(e,r,t){const o=n(e,()=>r());if(null==o)throw new Error(t);return o}function P(e,r){const t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=r+e.TEXTURE0;if(n<e.TEXTURE0||n>t){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${t}]`}.`)}}function w(r,t=2){return e.util.sizeFromShape(r.slice(0,r.length-t))}function G(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function X(e){let r=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(r=[w(e),...G(e)]),r}function W(r,t=!1){let n=(0,e.env)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(r=r.map((t,n)=>n>=r.length-2?e.util.nearestLargerEven(r[n]):r[n])).length&&(r=[2,r[0]])),2!==r.length){const t=e.util.squeezeShape(r);r=t.newShape}let o=e.util.sizeFromShape(r);if(r.length<=1&&o<=n)return[1,o];if(2===r.length&&r[0]<=n&&r[1]<=n)return r;if(3===r.length&&r[0]*r[1]<=n&&r[2]<=n)return[r[0]*r[1],r[2]];if(3===r.length&&r[0]<=n&&r[1]*r[2]<=n)return[r[0],r[1]*r[2]];if(4===r.length&&r[0]*r[1]*r[2]<=n&&r[3]<=n)return[r[0]*r[1]*r[2],r[3]];if(4===r.length&&r[0]<=n&&r[1]*r[2]*r[3]<=n)return[r[0],r[1]*r[2]*r[3]];if(t){const t=w(r);let n=2,u=2;return r.length&&([n,u]=G(r)),o=t*(n/2)*(u/2),e.util.sizeToSquarishShape(o).map(e=>2*e)}return e.util.sizeToSquarishShape(o)}function v(e){return e%2==0}function V(r,t){if(r=r.slice(-2),t=t.slice(-2),e.util.arraysEqual(r,t))return!0;if(!r.length||!t.length)return!0;if(0===r[0]||0===r[1]||0===t[0]||0===t[1])return!0;if(r.length!==t.length){const e=r.slice(-1)[0],n=t.slice(-1)[0];if(e===n)return!0;if(v(e)&&v(n)&&(1===r[0]||1===t[0]))return!0}return r[1]===t[1]&&v(r[0])&&v(t[0])}let y,$;function H(e){if(null==y){const t=(0,r.getWebGLContext)(e);y=t.getParameter(t.MAX_TEXTURE_SIZE)}return y}function k(){y=null}function q(){$=null}function z(e){if(null==$){const t=(0,r.getWebGLContext)(e);$=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$)}function j(e){if(0===e)return 0;let t;const n=(0,r.getWebGLContext)(e);return t=Y(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Y(n,"EXT_disjoint_timer_query")?1:0}function Y(e,r){return null!=e.getExtension(r)}function Z(e){try{if(null!=(0,r.getWebGLContext)(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function K(e){if(0===e)return!1;const t=(0,r.getWebGLContext)(e);if(1===e){if(!Y(t,"OES_texture_float"))return!1}else if(!Y(t,"EXT_color_buffer_float"))return!1;return J(t)}function Q(e){if(0===e)return!1;const t=(0,r.getWebGLContext)(e);if(1!==e){if(Y(t,"EXT_color_buffer_float"))return J(t);const e="EXT_color_buffer_half_float";if(Y(t,e)){const r=t.getExtension(e);return ee(t,r)}return!1}return!!Y(t,"OES_texture_float")&&(!!Y(t,"WEBGL_color_buffer_float")&&J(t))}function J(e){const r=(0,t.getTextureConfig)(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,r.internalFormatFloat,1,1,0,r.textureFormatFloat,r.textureTypeFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const u=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(o),u}function ee(e,r){const n=(0,t.getTextureConfig)(e,r),o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const u=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(o),e.deleteFramebuffer(u),a}function re(e){if(2!==e)return!1;return null!=(0,r.getWebGLContext)(e).fenceSync}function te(r,t){Array.isArray(r)||(r=[r]),r.forEach(r=>{null!=r&&e.util.assert("complex64"!==r.dtype,()=>`${t} does not support complex64 tensors `+"in the WebGL backend.")})}
},{"@tensorflow/tfjs-core":"tKjQ","./canvas_util":"SALK","./tex_util":"K2eT"}],"eHv8":[function(require,module,exports) {
"use strict";var E=require("@tensorflow/tfjs-core"),e=require("./webgl_util");const _=(0,E.env)();_.registerFlag("HAS_WEBGL",()=>_.getNumber("WEBGL_VERSION")>0),_.registerFlag("WEBGL_VERSION",()=>(0,e.isWebGLVersionEnabled)(2)?2:(0,e.isWebGLVersionEnabled)(1)?1:0),_.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),_.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===_.get("WEBGL_VERSION")),_.registerFlag("WEBGL_CPU_FORWARD",()=>!0),_.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),_.registerFlag("WEBGL_PACK",()=>_.getBool("HAS_WEBGL")),_.registerFlag("WEBGL_PACK_NORMALIZATION",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_CLIP",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),_.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_PACK_REDUCE",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_LAZILY_UNPACK",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_CONV_IM2COL",()=>_.getBool("WEBGL_PACK")),_.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>(0,e.getWebGLMaxTextureSize)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>(0,e.getMaxTexturesInShader)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const E=_.getNumber("WEBGL_VERSION");return 0===E?0:(0,e.getWebGLDisjointQueryTimerVersion)(E)}),_.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>_.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!E.device_util.isMobile()),_.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>(0,e.isCapableOfRenderingToFloatTexture)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!_.getBool("WEBGL_FORCE_F16_TEXTURES")&&_.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),_.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>(0,e.isDownloadFloatTextureEnabled)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_FENCE_API_ENABLED",()=>(0,e.isWebGLFenceEnabled)(_.getNumber("WEBGL_VERSION"))),_.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{return _.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),_.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,E=>{if(E<0&&-1!==E)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+`delete) or at least 0, but got ${E}.`)});
},{"@tensorflow/tfjs-core":"tKjQ","./webgl_util":"ElKU"}],"ND1T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uniqueImplCPU=exports.transposeImplCPU=exports.rsqrtImplCPU=exports.maxImplCPU=exports.floorImplCPU=exports.subImplCPU=exports.sliceImplCPU=exports.multiplyImplCPU=exports.logImplCPU=exports.expm1ImplCPU=exports.expImplCPU=exports.ceilImplCPU=exports.addImplCPU=exports.simpleAbsImplCPU=void 0;var e=r(require("@tensorflow/tfjs-backend-cpu/dist/shared"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=l?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const{simpleAbsImpl:t,addImpl:l,ceilImpl:o,expImpl:s,expm1Impl:m,floorImpl:I,logImpl:x,maxImpl:n,multiplyImpl:i,rsqrtImpl:u,sliceImpl:P,subImpl:C,transposeImpl:U,uniqueImpl:a}=e;exports.uniqueImplCPU=a,exports.transposeImplCPU=U,exports.subImplCPU=C,exports.sliceImplCPU=P,exports.rsqrtImplCPU=u,exports.multiplyImplCPU=i,exports.maxImplCPU=n,exports.logImplCPU=x,exports.floorImplCPU=I,exports.expm1ImplCPU=m,exports.expImplCPU=s,exports.ceilImplCPU=o,exports.addImplCPU=l,exports.simpleAbsImplCPU=t;
},{"@tensorflow/tfjs-backend-cpu/dist/shared":"iYMh"}],"C7FY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddNProgram=void 0;class t{constructor(t,s){this.outputShape=[],this.outputShape=t,this.variableNames=s.map((t,s)=>`T${s}`);const e=[];this.variableNames.forEach(t=>{e.push(`float v${t} = get${t}AtOutCoords();`)});const o=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${e.join("\n        ")}\n\n        float result = ${o};\n        setOutput(result);\n      }\n    `}}exports.AddNProgram=t;
},{}],"eEUv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddNPackedProgram=void 0;class t{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>`T${e}`);const s=[];this.variableNames.forEach(t=>{s.push(`vec4 v${t} = get${t}AtOutCoords();`)});const a=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${s.join("\n        ")}\n\n        vec4 result = ${a};\n        setOutput(result);\n      }\n    `}}exports.AddNPackedProgram=t;
},{}],"tfJl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArgMinMaxProgram=void 0;class t{constructor(t,e,n){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:a}=t;n||this.variableNames.push("bestIndicesA"),this.outputShape=[s,a];const o="max"===e?">":"<",d=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${i}; i++) {\n          int inIdx = ${d};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${o} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}exports.ArgMinMaxProgram=t;
},{}],"ioBk":[function(require,module,exports) {
"use strict";function e(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function t(t,r){return 1===r?[t]:e(t,r)}function r(e,t){if(1===e)return"rc";let r="";for(let n=0;n<e;n++)r+=t[n],n<e-1&&(r+=",");return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVecChannels=e,exports.getChannels=t,exports.getSourceCoords=r;
},{}],"q4Yv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlslDifferences=e;var n=require("@tensorflow/tfjs-core");function e(){let e,a,t,u,l,v,o,r,i,s;return 2===(0,n.env)().getNumber("WEBGL_VERSION")?(e="#version 300 es",a="in",t="out",u="in",l="texture",v="outputColor",o="out vec4 outputColor;",r="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",i="",s="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",a="attribute",t="varying",u="varying",l="texture2D",v="gl_FragColor",o="",r="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",i="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",s="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:a,varyingVs:t,varyingFs:u,texture2D:l,output:v,defineOutput:o,defineSpecialNaN:r,defineSpecialInf:i,defineRound:s}}
},{"@tensorflow/tfjs-core":"tKjQ"}],"YXiX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLogicalCoordinatesFromFlatIndex=e,exports.dotify=o,exports.getFlatIndexFrom3D=r,exports.ENCODE_FLOAT_SNIPPET=void 0;var n=require("@tensorflow/tfjs-core");function e(e,t,o="index"){const r=n.util.computeStrides(t);return r.map((n,t)=>{return`${`int ${e[t]} = ${o} / ${n}`}; ${t===r.length-1?`int ${e[t+1]} = ${o} - ${e[t]} * ${n}`:`index -= ${e[t]} * ${n}`};`}).join("")}function t(n){return 1===n.length?`${n[0]}`:`vec${n.length}(${n.join(",")})`}function o(n,e){if(n.length!==e.length)throw new Error("Vectors to be dotted must be of the same length -"+`got ${n.length} and ${e.length}`);const o=[],r=Math.floor(n.length/4),c=n.length%4;for(let l=0;l<r;l++){const r=n.slice(4*l,4*l+4),c=e.slice(4*l,4*l+4);o.push(`${t(r)}, ${t(c)}`)}if(0!==c){let c=n.slice(4*r),l=e.slice(4*r);1===c.length&&(c=c.map(n=>`float(${n})`),l=l.map(n=>`float(${n})`)),o.push(`${t(c)}, ${t(l)}`)}return o.map((n,e)=>`dot(${n})`).join("+")}function r(e){const t=n.util.computeStrides(e).map(n=>n.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}const c="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";exports.ENCODE_FLOAT_SNIPPET=c;
},{"@tensorflow/tfjs-core":"tKjQ"}],"GECe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeShader=c,exports.getCoordsDataType=W;var n=require("@tensorflow/tfjs-core"),e=require("./glsl_version"),t=o(require("./shader_compiler_util"));function r(){if("function"!=typeof WeakMap)return null;var n=new WeakMap;return r=function(){return n},n}function o(n){if(n&&n.__esModule)return n;if(null===n||"object"!=typeof n&&"function"!=typeof n)return{default:n};var e=r();if(e&&e.has(n))return e.get(n);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var c=o?Object.getOwnPropertyDescriptor(n,i):null;c&&(c.get||c.set)?Object.defineProperty(t,i,c):t[i]=n[i]}return t.default=n,e&&e.set(n,t),t}const{getBroadcastDims:i}=n.backend_util;function c(t,r,o,i){const c=[];t.forEach(e=>{const t=n.util.sizeFromShape(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?c.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(c.push(`uniform sampler2D ${e.name};`),c.push(`uniform int offset${e.name};`))});const u=c.join("\n"),l=t.map(n=>a(n,r,i)).join("\n"),f=r.texShape,v=(0,e.getGlslDifferences)(),g=$(v);let m,w,R=x(v);return r.isPacked?(m=s(r.logicalShape,f),w=h(v)):(m=p(r.logicalShape,f),w=d(v)),i&&(R+=C),[R,g,w,u,m,l,o].join("\n")}function u(n){const e=n.shapeInfo.logicalShape;switch(e.length){case 0:return N(n);case 1:return k(n);case 2:return j(n);case 3:return E(n);case 4:return L(n);case 5:return P(n);case 6:return _(n);default:throw new Error(`${e.length}-D input sampling`+" is not yet supported")}}function l(n){switch(n.shapeInfo.logicalShape.length){case 0:return M(n);case 1:return F(n);case 2:return A(n);case 3:return z(n);default:return q(n)}}function a(n,e,t=!1){let r="";r+=t?l(n):u(n);const o=n.shapeInfo.logicalShape,i=e.logicalShape;return o.length<=i.length&&(r+=t?H(n,e):B(n,e)),r}function s(n,e){switch(n.length){case 0:return m();case 1:return w(n,e);case 2:return V(n,e);case 3:return y(n,e);default:return I(n,e)}}function p(n,e){switch(n.length){case 0:return m();case 1:return R(n,e);case 2:return D(n,e);case 3:return S(n,e);case 4:return T(n,e);case 5:return U(n,e);case 6:return O(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function $(n){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${n.texture2D}(textureSampler, uv).r;\n    }\n  `}function d(n){return`\n    void setOutput(float val) {\n      ${n.output} = vec4(val, 0, 0, 0);\n    }\n  `}function h(n){return`\n    void setOutput(vec4 val) {\n      ${n.output} = val;\n    }\n  `}function x(n){return`${n.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${n.varyingFs} vec2 resultUV;\n    ${n.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${n.defineSpecialNaN}\n    ${n.defineSpecialInf}\n    ${n.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${f}\n    ${v}\n    ${g}\n  `}const f="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",v="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",g="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",C="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function m(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function w(n,e){const t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===t[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${t[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return 2 * (resTexRC.x * ${t[1]} + resTexRC.y);\n    }\n  `}function R(n,e){return 1===e[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${e[1]}.0);\n      }\n    `:1===e[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${e[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      return resTexRC.x * ${e[1]} + resTexRC.y;\n    }\n  `}function y(n,e){const t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(n[2]/2),o=r*Math.ceil(n[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}function S(n,e){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],n);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}function I(n,e){const t=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(n[n.length-1]/2),o=r*Math.ceil(n[n.length-2]/2);let i=o,c="",u="b, r, c";for(let l=2;l<n.length-1;l++)c=`\n      int b${l} = index / ${i*=n[n.length-l-1]};\n      index -= b${l} * ${i};\n    `+c,u=`b${l}, `+u;return`\n    ivec${n.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${c}\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${n.length}(${u});\n    }\n  `}function T(n,e){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2"],n);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}function U(n,e){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3"],n);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},\n                             ${e[1]}));\n\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}function O(n,e){const r=t.getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3","d4"],n);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${e[0]}, ${e[1]}));\n      int index = resTexRC.x * ${e[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}function V(e,t){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(n.util.arraysEqual(e,t))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const o=Math.ceil(e[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${o});\n      int c = imod(index, ${o}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}function D(e,t){return n.util.arraysEqual(e,t)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}function b(n){return`offset${n}`}function M(n){const t=n.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${(0,e.getGlslDifferences)().texture2D}(${t}, halfCR);\n    }\n  `}function N(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`float ${t}() {return ${e};}`;const[r,o]=n.shapeInfo.texShape;if(1===r&&1===o)return`\n      float ${t}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const[i,c]=n.shapeInfo.texShape;return`\n    float ${t}() {\n      vec2 uv = uvFromFlat(${i}, ${c}, ${b(e)});\n      return sampleTexture(${e}, uv);\n    }\n  `}function F(n){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),o=n.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=(0,e.getGlslDifferences)();return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${c.texture2D}(${t}, uv);\n    }\n  `}function k(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1);if(n.shapeInfo.isUniform)return`\n      float ${t}(int index) {\n        ${G(n)}\n      }\n    `;const r=n.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&&1===o)return`\n      float ${t}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const c=b(e);return 1===i?`\n      float ${t}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${c}) + 0.5) / ${o}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===o?`\n      float ${t}(int index) {\n        vec2 uv = vec2((float(index + ${c}) + 0.5) / ${i}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n    float ${t}(int index) {\n      vec2 uv = uvFromFlat(${o}, ${i}, index + ${c});\n      return sampleTexture(${e}, uv);\n    }\n  `}function A(t){const r=t.shapeInfo.logicalShape,o=t.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),c=t.shapeInfo.texShape,u=c[0],l=c[1],a=(0,e.getGlslDifferences)();if(null!=c&&n.util.arraysEqual(r,c))return`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${u}.0);\n\n        return ${a.texture2D}(${o}, uv);\n      }\n    `;const s=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(r[1]/2)}, ${s[0]}, ${s[1]}, row, col);\n      return ${a.texture2D}(${o}, uv);\n    }\n  `}function j(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&n.util.arraysEqual(t,i)){const n=i[0];return`\n    float ${o}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${i[1]}.0, ${n}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:c,keptDims:l}=n.util.squeezeShape(t),a=c;if(a.length<t.length){const n=["row","col"];return`\n      ${u(J(e,a))}\n      float ${o}(int row, int col) {\n        return ${o}(${K(n,l)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));\n        ${G(e)}\n      }\n    `;const s=i[0],p=i[1],$=b(r);return 1===p?`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${$}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${s}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===s?`\n    float ${o}(int row, int col) {\n      float index = dot(vec3(row, col, ${$}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${p}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n  float ${o}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${t[1]} + col + ${$};\n    vec2 uv = uvFromFlat(${s}, ${p}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}function z(n){const t=n.shapeInfo.logicalShape,r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n.shapeInfo.texShape,c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===t[0]){const e=[1,2],r=["b","row","col"];return`\n        ${l(J(n,t.slice(1)))}\n        vec4 ${o}(int b, int row, int col) {\n          return ${o}(${K(r,e)});\n        }\n      `}const u=c[0],a=c[1],s=Math.ceil(t[2]/2);return`\n    vec4 ${o}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${u}, ${a}, ${s*Math.ceil(t[1]/2)}, ${s}, b, row, col);\n      return ${(0,e.getGlslDifferences)().texture2D}(${r}, uv);\n    }\n  `}function E(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[1]*t[2],c=t[2],{newShape:l,keptDims:a}=n.util.squeezeShape(t),s=l;if(s.length<t.length){const n=["row","col","depth"];return`\n        ${u(J(e,s))}\n        float ${o}(int row, int col, int depth) {\n          return ${o}(${K(n,a)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${i}, ${c}, 1)));\n        ${G(e)}\n      }\n    `;const p=e.shapeInfo.texShape,$=p[0],d=p[1],h=e.shapeInfo.flatOffset;return d===i&&null==h?`\n        float ${o}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${c}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${$}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `:d===c&&null==h?`\n    float ${o}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${$}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n      float ${o}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${i} + col * ${c} + depth + ${b(r)};\n        vec2 uv = uvFromFlat(${$}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}function q(n){const t=n.shapeInfo.logicalShape,r=t.length,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),c=n.shapeInfo.texShape,u=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],l=u[0],a=u[1],s=Math.ceil(t[r-1]/2);let p=s*Math.ceil(t[r-2]/2),$="int b, int row, int col",d=`b * ${p} + (row / 2) * ${s} + (col / 2)`;for(let e=2;e<r-1;e++)$=`int b${e}, `+$,d=`b${e} * ${p*=t[r-e-1]} + `+d;return`\n    vec4 ${i}(${$}) {\n      int index = ${d};\n      int texR = index / ${a};\n      int texC = index - texR * ${a};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}, ${l});\n      return ${(0,e.getGlslDifferences)().texture2D}(${o}, uv);\n    }\n  `}function L(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[3],c=t[2]*i,l=t[1]*c,{newShape:a,keptDims:s}=n.util.squeezeShape(t);if(a.length<t.length){const n=["row","col","depth","depth2"];return`\n      ${u(J(e,a))}\n      float ${o}(int row, int col, int depth, int depth2) {\n        return ${o}(${K(n,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${l}, ${c}, ${i}, 1)));\n        ${G(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,$=e.shapeInfo.texShape,d=$[0],h=$[1];return h===l&&null==p?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${c}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:h===i&&null==p?`\n      float ${o}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${t[1]*t[2]}, ${t[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${l} + col * ${c} +\n          depth * ${i} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${h}, index + ${b(r)});\n      return sampleTexture(${r}, uv);\n    }\n  `}function P(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t[4],c=t[3]*i,l=t[2]*c,a=t[1]*l,{newShape:s,keptDims:p}=n.util.squeezeShape(t);if(s.length<t.length){const n=["row","col","depth","depth2","depth3"];return`\n      ${u(J(e,s))}\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        return ${o}(${K(n,p)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${a}, ${l}, ${c}, ${i})) +\n          depth3;\n        ${G(e)}\n      }\n    `;const $=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],x=d[1];return x===a&&null==$?`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${l}, ${c}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${x}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:x===i&&null==$?`\n      float ${o}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${x}.0, ${h}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${l} + depth * ${c} +\n          depth2 * ${i} + depth3 + ${b(r)};\n      vec2 uv = uvFromFlat(${h}, ${x}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}function _(e){const t=e.shapeInfo.logicalShape,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),{newShape:i,keptDims:c}=n.util.squeezeShape(t);if(i.length<t.length){const n=["row","col","depth","depth2","depth3","depth4"];return`\n      ${u(J(e,i))}\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${o}(${K(n,c)});\n      }\n    `}const l=t[5],a=t[4]*l,s=t[3]*a,p=t[2]*s,$=t[1]*p;if(e.shapeInfo.isUniform)return`\n      float ${o}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${$}, ${p}, ${s}, ${a})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${l}, 1)));\n        ${G(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,x=h[0],f=h[1];return f===$&&null==d?`\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${p}, ${s}, ${a}, ${l})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${x}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:f===l&&null==d?`\n      float ${o}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${x}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${o}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${$} + col * ${p} + depth * ${s} +\n          depth2 * ${a} + depth3 * ${l} + depth4 + ${b(r)};\n      vec2 uv = uvFromFlat(${x}, ${f}, index);\n      return sampleTexture(${r}, uv);\n    }\n  `}function G(e){const t=e.name,r=n.util.sizeFromShape(e.shapeInfo.logicalShape);return r<2?`return ${t};`:`\n    for (int i = 0; i < ${r}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function H(e,t){const r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),c="get"+o+"AtOutCoords",u=e.shapeInfo.logicalShape.length,l=t.logicalShape.length,a=i(e.shapeInfo.logicalShape,t.logicalShape),s=W(l),p=l-u;let $;const d=["x","y","z","w","u","v"];$=0===u?"":l<2&&a.length>=1?"coords = 0;":a.map(n=>`coords.${d[n+p]} = 0;`).join("\n");let h="";h=l<2&&u>0?"coords":e.shapeInfo.logicalShape.map((n,e)=>`coords.${d[e+p]}`).join(", ");let x="return outputValue;";const f=1===n.util.sizeFromShape(e.shapeInfo.logicalShape),v=1===n.util.sizeFromShape(t.logicalShape);if(1!==u||f||v){if(f&&!v)x=1===l?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(a.length){const n=u-2,e=u-1;a.indexOf(n)>-1&&a.indexOf(e)>-1?x="return vec4(outputValue.x);":a.indexOf(n)>-1?x="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(e)>-1&&(x="return vec4(outputValue.xx, outputValue.zz);")}}else x="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${c}() {\n      ${s} coords = getOutputCoords();\n      ${$}\n      vec4 outputValue = get${o}(${h});\n      ${x}\n    }\n  `}function B(e,t){const r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),c="get"+o+"AtOutCoords",u=t.texShape,l=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,s=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===s&&null==e.shapeInfo.flatOffset&&n.util.arraysEqual(l,u))return`\n      float ${c}() {\n        return sampleTexture(${r}, resultUV);\n      }\n    `;const p=W(s),$=i(e.shapeInfo.logicalShape,t.logicalShape),d=s-a;let h;const x=["x","y","z","w","u","v"];let f="";return`\n    float ${c}() {\n      ${p} coords = getOutputCoords();\n      ${h=0===a?"":s<2&&$.length>=1?"coords = 0;":$.map(n=>`coords.${x[n+d]} = 0;`).join("\n")}\n      return get${o}(${f=s<2&&a>0?"coords":e.shapeInfo.logicalShape.map((n,e)=>`coords.${x[e+d]}`).join(", ")});\n    }\n  `}function W(n){if(n<=1)return"int";if(2===n)return"ivec2";if(3===n)return"ivec3";if(4===n)return"ivec4";if(5===n)return"ivec5";if(6===n)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function J(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function K(n,e){return e.map(e=>n[e]).join(", ")}
},{"@tensorflow/tfjs-core":"tKjQ","./glsl_version":"q4Yv","./shader_compiler_util":"YXiX"}],"YhXY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ArgMinMaxPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./packing_util"),t=require("./shader_compiler");class c{constructor(c,o,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,e.util.assert(c.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const i=c[c.length-1],r=Math.ceil(i/o);this.outputShape=c.slice(0,-1),r>1&&this.outputShape.push(r),a||this.variableNames.push("bestIndicesA");const d=this.outputShape,l=d.length,$=(0,t.getCoordsDataType)(l),u=(0,n.getChannels)("coords",l);let h,p;if(1===r){p=l+1;const e=(0,t.getCoordsDataType)(p);h=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[l-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[l-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[l-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[l-2]};`}else p=l,h=`\n        ${$} sourceLocR = coords;\n        ++${u[l-1]};\n        ${$} sourceLocG = coords;\n        ++${u[l-2]};\n        ${$} sourceLocA = coords;\n        --${u[l-1]};\n        ${$} sourceLocB = coords;\n        --${u[l-2]};`;const x=["x","y","z","w","u","v"].slice(0,p),g="."+x[p-1],v=x.map(e=>"int "+e),C=(0,n.getChannels)("sourceLocR",p-1).concat("inIdx.r"),I=(0,n.getChannels)("sourceLocG",p-1).concat("inIdx.g"),b=(0,n.getChannels)("sourceLocB",p-1).concat("inIdx.b"),A=(0,n.getChannels)("sourceLocA",p-1).concat("inIdx.a"),j="max"===s?"greaterThan":"lessThan",L=a?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${C.join()}),\n                             getBestIndicesAChannel(${I.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${A.join()})));`,B=`vec4(\n            getAChannel(${C.join()}),\n            hasNextCol ? getAChannel(${I.join()}) : 0.,\n            hasNextRow ? getAChannel(${b.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${A.join()}) : 0.)`,m=a?"":`\n      float getBestIndicesAChannel(${v.join()}) {\n        return getChannel(getBestIndicesA(${x.join()}),\n                                          vec2(${x.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${v.join()}) {\n        return getChannel(getA(${x.join()}),\n                               vec2(${x.slice(-2).join()}));\n      }\n      ${m}\n      void main() {\n        ${$} coords = getOutputCoords();\n        bool hasNextCol = ${u[l-1]} < ${d[l-1]-1};\n        bool hasNextRow = ${u[l-2]} < ${d[l-2]-1};\n        ${h}\n        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},\n          sourceLocB${g}, sourceLocA${g}) * ${o};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${B};\n\n        for (int i = 0; i < ${o}; i++) {\n          inIdx = srcIdx;\n          ${L}\n          vec4 candidate = ${B};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${j}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}exports.ArgMinMaxPackedProgram=c;
},{"@tensorflow/tfjs-core":"tKjQ","./packing_util":"ioBk","./shader_compiler":"GECe"}],"qxDp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AvgPool3DBackpropProgram=exports.AvgPool2DBackpropProgram=void 0;class t{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,o=t.filterWidth,i=t.strideHeight,d=t.strideWidth,e=t.dilationHeight,r=t.dilationWidth,a=t.effectiveFilterHeight,y=t.effectiveFilterWidth,l=a-1-t.padInfo.top,s=y-1-t.padInfo.left,c=1/(n*o);this.userCode=`\n      const ivec2 pads = ivec2(${l}, ${s});\n      const float avgMultiplier = float(${c});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${a};\n            wR += ${e}) {\n          float dyR = float(dyRCorner + wR) / ${i}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${y};\n            wC+= ${r}) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.AvgPool2DBackpropProgram=t;class n{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,o=t.filterHeight,i=t.filterWidth,d=t.strideDepth,e=t.strideHeight,r=t.strideWidth,a=t.dilationDepth,y=t.dilationHeight,l=t.dilationWidth,s=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,C=s-1-t.padInfo.front,p=c-1-t.padInfo.top,h=f-1-t.padInfo.left,u=1/(n*o*i);this.userCode=`\n      const ivec3 pads = ivec3(${C}, ${p}, ${h});\n      const float avgMultiplier = float(${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n            wD += ${a}) {\n          float dyD = float(dyDCorner + wD) / ${d}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${c};\n              wR += ${y}) {\n            float dyR = float(dyRCorner + wR) / ${e}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${f};\n                wC += ${l}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.AvgPool3DBackpropProgram=n;
},{}],"loxm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BinaryOpProgram=exports.PRELU=exports.ELU_DER=exports.MOD=exports.MIN=exports.MAX=exports.LOGICAL_OR=exports.LOGICAL_AND=exports.GREATER_EQUAL=exports.GREATER=exports.LESS_EQUAL=exports.LESS=exports.EQUAL=exports.SQUARED_DIFFERENCE=exports.POW=exports.INT_DIV=void 0;var t=require("@tensorflow/tfjs-core");const r="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",n="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n";exports.INT_DIV=n;const o="\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n";exports.POW=o;const e="return (a - b) * (a - b);";exports.SQUARED_DIFFERENCE=e;const s="return float(a == b);";exports.EQUAL=s;const a="return float(a < b);";exports.LESS=a;const i="return float(a <= b);";exports.LESS_EQUAL=i;const p="return float(a > b);";exports.GREATER=p;const b="return float(a >= b);";exports.GREATER_EQUAL=b;const u="return float(a >= 1.0 && b >= 1.0);";exports.LOGICAL_AND=u;const x="return float(a >= 1.0 || b >= 1.0);";exports.LOGICAL_OR=x;const E=r+"\n  return max(a, b);\n";exports.MAX=E;const A=r+"\n  return min(a, b);\n";exports.MIN=A;const c="if (b == 0.0) return NAN;\n  return mod(a, b);";exports.MOD=c;const f="return (b >= 1.0) ? a : a * (b + 1.0);";exports.ELU_DER=f;const l="return (a < 0.) ? b * a : a;";exports.PRELU=l;class L{constructor(r,n,o){this.variableNames=["A","B"],this.outputShape=t.backend_util.assertAndGetBroadcastShape(n,o),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${r}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}exports.BinaryOpProgram=L;
},{"@tensorflow/tfjs-core":"tKjQ"}],"tIa8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BinaryOpPackedProgram=exports.MOD=exports.MIN=exports.MAX=exports.LOGICAL_OR=exports.LOGICAL_AND=exports.GREATER_EQUAL=exports.GREATER=exports.LESS_EQUAL=exports.LESS=exports.NOT_EQUAL=exports.EQUAL=exports.ELU_DER=exports.PRELU=exports.POW=exports.INT_DIV=void 0;var e=require("@tensorflow/tfjs-core"),n=require("./packing_util"),t=require("./shader_compiler");const s="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n",r="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n";exports.INT_DIV=r;const o="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+s+"\n  return result;\n";exports.POW=o;const a="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";exports.PRELU=a;const u="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n";exports.ELU_DER=u;const c="\n  return vec4(equal(a, b));\n";exports.EQUAL=c;const i="\n  return vec4(notEqual(a, b));\n";exports.NOT_EQUAL=i;const l="\n  return vec4(lessThan(a, b));\n";exports.LESS=l;const v="\n  return vec4(lessThanEqual(a, b));\n";exports.LESS_EQUAL=v;const p="\n  return vec4(greaterThan(a, b));\n";exports.GREATER=p;const d="\n  return vec4(greaterThanEqual(a, b));\n";exports.GREATER_EQUAL=d;const b="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n";exports.LOGICAL_AND=b;const x="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n";exports.LOGICAL_OR=x;const E="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+s+"\n  return result;\n";exports.MAX=E;const h="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+s+"\n  return result;\n";exports.MIN=h;const O="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+s+"\n  return result;\n";exports.MOD=O;class N{constructor(s,r,o,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.backend_util.assertAndGetBroadcastShape(r,o);const u=this.outputShape.length;let c="";if(a)if(0===u||1===e.util.sizeFromShape(this.outputShape))c="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(c=`\n          ${(0,t.getCoordsDataType)(u)} coords = getOutputCoords();\n        `,1===u)c+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=(0,n.getChannels)("coords",u);c+=`\n            bool nextRowOutOfBounds =\n              (${e[u-2]} + 1) >= ${this.outputShape[u-2]};\n            bool nextColOutOfBounds =\n              (${e[u-1]} + 1) >= ${this.outputShape[u-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${s}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${c}\n\n        setOutput(result);\n      }\n    `}}exports.BinaryOpPackedProgram=N;
},{"@tensorflow/tfjs-core":"tKjQ","./packing_util":"ioBk","./shader_compiler":"GECe"}],"Hn7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClipProgram=void 0;class t{constructor(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(t,o){return(n,i)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(i,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(i,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,o)}}}exports.ClipProgram=t;
},{}],"QMfg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClipPackedProgram=void 0;class t{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(t,n){return(o,e)=>{null==this.minLoc&&(this.minLoc=o.getUniformLocationNoThrow(e,"minVal"),this.maxLoc=o.getUniformLocationNoThrow(e,"maxVal")),o.gl.uniform1f(this.minLoc,t),o.gl.uniform1f(this.maxLoc,n)}}}exports.ClipPackedProgram=t;
},{}],"FiqB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComplexAbsProgram=void 0;class e{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}exports.ComplexAbsProgram=e;
},{}],"ljE8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Conv3DDerInputProgram=exports.Conv3DDerFilterProgram=exports.Conv2DDerInputProgram=exports.Conv2DDerFilterProgram=void 0;class n{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideHeight,o=n.strideWidth,e=n.padInfo.top,d=n.padInfo.left,i="channelsLast"===n.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${e};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${o} - ${d};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              if (${i}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DDerFilterProgram=n;class t{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterHeight,o=n.filterWidth,e=n.strideHeight,d=n.strideWidth,i="channelsLast"===n.dataFormat,r=t-1-n.padInfo.top,a=o-1-n.padInfo.left,s=i?1:2,y=i?2:3,C=i?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${C}];\n\n        ivec2 dyCorner = ivec2(coords[${s}], coords[${y}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${o} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n\n              if (${i}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv2DDerInputProgram=t;class o{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideDepth,o=n.strideHeight,e=n.strideWidth,d=n.padInfo.front,i=n.padInfo.top,r=n.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yF = 0; yF < ${n.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${d};\n\n            if (xF < 0 || xF >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${n.outHeight}; yR++) {\n              int xR = wR + yR * ${o} - ${i};\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${n.outWidth}; yC++) {\n                int xC = wC + yC * ${e} - ${r};\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DDerFilterProgram=o;class e{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterDepth,o=n.filterHeight,e=n.filterWidth,d=n.strideDepth,i=n.strideHeight,r=n.strideWidth,a=t-1-n.padInfo.front,s=o-1-n.padInfo.top,y=e-1-n.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${a}, ${s}, ${y});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${d}.0;\n\n          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${o}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${i}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${o} - 1 - wR;\n\n            for (int wC = 0; wC < ${e}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${e} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DDerInputProgram=e;
},{}],"JDyd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConv2DDerInputProgram=exports.DepthwiseConv2DDerFilterProgram=void 0;class n{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;const t=n.strideHeight,o=n.strideWidth,e=n.padInfo.top,d=n.padInfo.left,i=n.outChannels/n.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${i} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${n.batchSize}; b++) {\n          for (int yR = 0; yR < ${n.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${e};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${n.outWidth}; yC++) {\n              int xC = wC + yC * ${o} - ${d};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.DepthwiseConv2DDerFilterProgram=n;class t{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;const t=n.filterHeight,o=n.filterWidth,e=n.strideHeight,d=n.strideWidth,i=t-1-n.padInfo.top,r=o-1-n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${i}, ${r});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${d}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${o} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.DepthwiseConv2DDerInputProgram=t;
},{}],"R3Xc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Conv3DProgram=exports.Conv2DProgram=void 0;class n{constructor(n,t=!1,e=null,o=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;const d=n.padInfo.top,i=n.padInfo.left,a=n.strideHeight,s=n.strideWidth,x=n.dilationHeight,r=n.dilationWidth,c=n.filterHeight,C=n.filterWidth,l=4*Math.floor(n.inChannels/4),w=n.inChannels%4,h="channelsLast"===n.dataFormat,R=h?1:2,$=h?2:3,u=h?3:1;let g="",v="";e&&(g=o?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${e}\n        }`:`\n          float activation(float x) {\n            ${e}\n          }\n        `,v="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${g}\n\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${d}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${u}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${R}], coords[${$}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${c}; wR++) {\n          int xR = xRCorner + wR * ${x};\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${C}; wC++) {\n            int xC = xCCorner + wC * ${r};\n\n            if (xC < 0 || xC >= ${n.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${l}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${h}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===w}) {\n\n              if (${h}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${l}) *\n                    getW(wR, wC, ${l}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${l}, xR, xC) *\n                    getW(wR, wC, ${l}, d2);\n              }\n\n            } else if (${2===w}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${l}, d2),\n                getW(wR, wC, ${l} + 1, d2)\n              );\n\n              if (${h}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${l}),\n                  getX(batch, xR, xC, ${l} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${l}, xR, xC),\n                  getX(batch, ${l} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===w}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${l}, d2),\n                getW(wR, wC, ${l} + 1, d2),\n                getW(wR, wC, ${l} + 2, d2)\n              );\n\n              if (${h}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${l}),\n                  getX(batch, xR, xC, ${l} + 1),\n                  getX(batch, xR, xC, ${l} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${l}, xR, xC),\n                  getX(batch, ${l} + 1, xR, xC),\n                  getX(batch, ${l} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${f}\n        ${v}\n        setOutput(result);\n      }\n    `}}exports.Conv2DProgram=n;class t{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;const t=n.padInfo.front,e=n.padInfo.top,o=n.padInfo.left,d=n.strideDepth,i=n.strideHeight,a=n.strideWidth,s=n.dilationDepth,x=n.dilationHeight,r=n.dilationWidth,c=n.filterDepth,C=n.filterHeight,l=n.filterWidth,w=4*Math.floor(n.inChannels/4),h=n.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${d}, ${i}, ${a});\n      const ivec3 pads = ivec3(${t}, ${e}, ${o});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${C}; wR++) {\n            int xR = xRCorner + wR * ${x};\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${l}; wC++) {\n              int xC = xCCorner + wC * ${r};\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${w}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===h}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${w}) *\n                  getW(wF, wR, wC, ${w}, d2);\n              } else if (${2===h}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${w}),\n                  getX(batch, xF, xR, xC, ${w} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${w}, d2),\n                  getW(wF, wR, wC, ${w} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===h}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${w}),\n                  getX(batch, xF, xR, xC, ${w} + 1),\n                  getX(batch, xF, xR, xC, ${w} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${w}, d2),\n                  getW(wF, wR, wC, ${w} + 1, d2),\n                  getW(wF, wR, wC, ${w} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.Conv3DProgram=t;
},{}],"PIxO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConv2DProgram=void 0;class t{constructor(t,n=!1,o=null,e=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.inHeight,s=t.inWidth,r=t.padInfo.top,a=t.padInfo.left,d=t.strideHeight,l=t.strideWidth,C=t.dilationHeight,c=t.dilationWidth,h=t.filterHeight,u=t.filterWidth,x=t.outChannels/t.inChannels;let v="",p="";o&&(v=e?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${o}\n        }`:`\n          float activation(float x) {\n            ${o}\n          }\n        `,p="result = activation(result);");const f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),e&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${v}\n\n      const ivec2 strides = ivec2(${d}, ${l});\n      const ivec2 pads = ivec2(${r}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${x};\n        int q = d2 - d1 * ${x};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${C};\n\n          if (xR < 0 || xR >= ${i}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${u}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${s}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${f}\n        ${p}\n        setOutput(result);\n      }\n    `}}exports.DepthwiseConv2DProgram=t;
},{}],"MhQp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthwiseConvPacked2DProgram=void 0;var e=require("@tensorflow/tfjs-core");class n{constructor(n,x=!1,t=null,$=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;const C=n.inHeight,s=n.inWidth,f=n.padInfo.top,i=n.padInfo.left,c=n.strideHeight,l=n.strideWidth,R=n.dilationHeight,r=n.dilationWidth,o=n.filterHeight,a=n.filterWidth,v=a;let d="int xR; int xC; int xCOffset;";for(let e=0;e<o;e++)for(let n=0;n<a;n++)d+=`\n          vec4 xTexelR${e}C${2*n} = vec4(0.);\n          vec4 wR${e}C${n} = vec4(0.);\n          vec4 xR${e}C${n} = vec4(0.);`;for(let T=0;T<o;T++)for(let n=0;n<v;n++){const x=2*n;if(d+=`\n          xR = xRCorner + ${T*R};\n          xC = xCCorner + ${x*r};\n        `,1===l){if(x<a&&(d+=i%2==1?`\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ${C} && xCOffset >= 0 && xCOffset < ${s}) {\n                  xTexelR${T}C${x} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${s}) {\n                    xTexelR${T}C${x}.zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR${T}C${x} = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ${C} && xCOffset >= 0 && xCOffset < ${s}) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${s}) {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR${T}C${x} = vec4(previous.zw, xTexelR${T}C${x}.xy);\n                } else {\n                  xR${T}C${x} = vec4(0, 0, xTexelR${T}C${x}.xy);\n                }\n              `:`\n                if(xR >= 0 && xR < ${C} && xC >= 0 && xC < ${s}) {\n                  xTexelR${T}C${x} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${T}C${x} = vec4(0.);\n                }\n\n                xR${T}C${x} = xTexelR${T}C${x};\n              `,x+1<a)){const n=i%2==0?e.util.nearestLargerEven(r):r;r%2==0&&i%2==1||r%2!=0&&i%2!=1?(d+=`\n                  xCOffset = xC + ${i%2} + ${n};\n\n                  if(xR >= 0 && xR < ${C} &&\n                    xCOffset >= 0 && xCOffset < ${s}) {\n                    xTexelR${T}C${x+2} = getX(batch, xR, xCOffset, d1);\n                  }\n                `,r>1&&(d+=`\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ${C} &&\n                      xCOffset >= 0 && xCOffset < ${s}) {\n                      xTexelR${T}C${x} = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR${T}C${x} = vec4(0.);\n                    }\n                  `),d+=`\n                  xR${T}C${x+1} = vec4(\n                    xTexelR${T}C${x}.zw, xTexelR${T}C${x+2}.xy);\n                `):d+=`\n                  xCOffset = xC + ${n};\n\n                  if(xR >= 0 && xR < ${C} &&\n                    xCOffset >= 0 && xCOffset < ${s}) {\n                    xTexelR${T}C${x+2} = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR${T}C${x+1} = xTexelR${T}C${x+2};\n                `}}else x<a&&(d+=`\n              if(xR >= 0 && xR < ${C}) {\n            `,i%2==1?(d+=`\n                xCOffset = xC + 1 - ${l};\n                if(xCOffset >= 0 && xCOffset < ${s}) {\n                  xTexelR${T}C${x} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${T}C${x} = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${s}) {\n                  xTexelR${T}C${x+2} = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR${T}C${x+2} = vec4(0.);\n                }\n\n                xR${T}C${x} = vec4(\n                  xTexelR${T}C${x}.zw, xTexelR${T}C${x+2}.zw);\n              `,x+1<a&&(d+=`\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ${l};\n                  if(xCOffset >= 0 && xCOffset < ${s}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR${T}C${x+1} = vec4(xTexelR${T}C${x+2}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < ${s}) {\n                  xTexelR${T}C${x} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${T}C${x} = vec4(0.);\n                }\n\n                xCOffset = xC + ${l};\n                if(xCOffset >= 0 && xCOffset < ${s}) {\n                  xTexelR${T}C${x+2} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${T}C${x+2} = vec4(0.);\n                }\n\n                xR${T}C${x} = vec4(\n                  xTexelR${T}C${x}.xy, xTexelR${T}C${x+2}.xy);\n              `,x+1<a&&(d+=`\n                  xR${T}C${x+1} = vec4(\n                    xTexelR${T}C${x}.zw, xTexelR${T}C${x+2}.zw);\n                `)),d+="}");x<a&&(d+=`\n            vec4 wTexelR${T}C${x} = getW(${T}, ${x}, d1, q);\n            wR${T}C${x} = vec4(wTexelR${T}C${x}.xz, wTexelR${T}C${x}.xz);\n          `,x+1<a&&(d+=`\n              vec4 wTexelR${T}C${x+1} = getW(${T}, ${x+1}, d1, q);\n              wR${T}C${x+1} =\n                vec4(wTexelR${T}C${x+1}.xz, wTexelR${T}C${x+1}.xz);`))}for(let e=0;e<o;e++)for(let n=0;n<a;n++)d+=`dotProd += xR${e}C${n} * wR${e}C${n};`;let O="",u="";t&&(O=$?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${t}\n        }`:`vec4 activation(vec4 x) {\n          ${t}\n        }`,u="result = activation(result);");const h=x?"result += getBiasAtOutCoords();":"";x&&this.variableNames.push("bias"),$&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${O}\n\n      const ivec2 strides = ivec2(${c}, ${l});\n      const ivec2 pads = ivec2(${f}, ${i});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ${d}\n\n        vec4 result = dotProd;\n        ${h}\n        ${u}\n        setOutput(result);\n      }\n    `}}exports.DepthwiseConvPacked2DProgram=n;
},{"@tensorflow/tfjs-core":"tKjQ"}],"m8RR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CropAndResizeProgram=void 0;class e{constructor(e,t,o,n,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,s,c]=e,[l]=t,[u,f]=o;this.outputShape=[l,u,f,c];const d="bilinear"===n?1:0,[x,C]=[`${i-1}.0`,`${s-1}.0`],[g,R,b]=u>1?[`${(i-1)/(u-1)}`,"(y2-y1) * height_ratio",`y1*${x} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${x}`],[h,p,m]=f>1?[`${(s-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${C} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${C}`];this.userCode=`\n      const float height_ratio = float(${g});\n      const float width_ratio = float(${h});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${R};\n        float width_scale = ${p};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${x} ) {\n          setOutput(float(${r}));\n          return;\n        }\n        float in_x = ${m};\n        if( in_x < 0.0 || in_x > ${C} ) {\n          setOutput(float(${r}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}exports.CropAndResizeProgram=e;
},{}],"viqN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CumSumProgram=void 0;var t=require("./shader_compiler");class e{constructor(e,o,i){this.variableNames=["x"],this.outputShape=e;const u=e.length,s=o?"0.0":`getX(${n(u,"coords")})`,d=e[e.length-1];let $="",a="";o?($=i?`end != ${d-1}`:"end != 0",a=i?"end + 1":"end - 1"):($=i?`end + pow2 < ${d}`:"end >= pow2",a=i?"end + pow2":"end - pow2"),this.userCode=`\n      uniform float index;\n      void main() {\n        ${(0,t.getCoordsDataType)(u)} coords = getOutputCoords();\n        int end = ${r(u,"coords")};\n        float val = ${s};\n        int pow2 = int(pow(2.0, index));\n        if (${$}) {\n          int idx = ${a};\n          ${r(u,"coords")} = idx;\n          val += getX(${n(u,"coords")});\n        }\n        setOutput(val);\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.index&&(this.index=e.getUniformLocation(n,"index")),e.gl.uniform1f(this.index,t)}}}function n(t,e){if(1===t)return`${e}`;if(2===t)return`${e}.x, ${e}.y`;if(3===t)return`${e}.x, ${e}.y, ${e}.z`;if(4===t)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}function r(t,e){if(1===t)return`${e}`;if(2===t)return`${e}.y`;if(3===t)return`${e}.z`;if(4===t)return`${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}exports.CumSumProgram=e;
},{"./shader_compiler":"GECe"}],"sUTu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecodeMatrixProgram=void 0;var e=require("./glsl_version"),t=i(require("./shader_compiler_util")),r=require("./tex_util");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=i?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}class o{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=r.PackingScheme.DENSE;const i=(0,r.getDenseTexShape)(n),o=(0,e.getGlslDifferences)();this.outputShape=n,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${i[0]}, ${i[1]}));\n        int index = 4 * (resTexRC.x * ${i[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.DecodeMatrixProgram=o;
},{"./glsl_version":"q4Yv","./shader_compiler_util":"YXiX","./tex_util":"K2eT"}],"XjYn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecodeMatrixPackedProgram=void 0;var e=require("./glsl_version"),t=i(require("./shader_compiler_util")),r=require("./tex_util");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=i?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}class o{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=r.PackingScheme.DENSE;const i=(0,r.getDenseTexShape)(n),o=(0,e.getGlslDifferences)();this.outputShape=n,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],n)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${i[0]}, ${i[1]}));\n        int index = 4 * (resTexRC.x * ${i[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.DecodeMatrixPackedProgram=o;
},{"./glsl_version":"q4Yv","./shader_compiler_util":"YXiX","./tex_util":"K2eT"}],"akjq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DepthToSpaceProgram=void 0;class t{constructor(t,o,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=o,this.dataFormat=i,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${o};\n      int offset_h = imod(h, ${o});\n      int in_w = w / ${o};\n      int offset_w = imod(w, ${o});\n      int offset_d = (offset_h * ${o} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}exports.DepthToSpaceProgram=t;
},{}],"L3VF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DiagProgram=void 0;class o{constructor(o){this.variableNames=["X"],this.outputShape=[o,o],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}exports.DiagProgram=o;
},{}],"mRoK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeFloatProgram=void 0;var e=require("./glsl_version"),t=require("./shader_compiler_util"),o=require("./tex_util");class r{constructor(r){this.variableNames=["A"],this.outTexUsage=o.TextureUsage.DOWNLOAD;const s=(0,e.getGlslDifferences)();this.outputShape=r,this.userCode=`\n      ${t.ENCODE_FLOAT_SNIPPET}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${s.output} = encode_float(x);\n      }\n    `}}exports.EncodeFloatProgram=r;
},{"./glsl_version":"q4Yv","./shader_compiler_util":"YXiX","./tex_util":"K2eT"}],"t7X1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeFloatPackedProgram=void 0;var e=require("./glsl_version"),t=require("./shader_compiler_util"),o=require("./tex_util");class r{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=o.TextureUsage.DOWNLOAD;const s=(0,e.getGlslDifferences)();this.outputShape=r,this.userCode=`\n      ${t.ENCODE_FLOAT_SNIPPET}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${s.output} = encode_float(x);\n      }\n    `}}exports.EncodeFloatPackedProgram=r;
},{"./glsl_version":"q4Yv","./shader_compiler_util":"YXiX","./tex_util":"K2eT"}],"xnt0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeMatrixProgram=void 0;var e=require("./glsl_version"),t=r(require("./shader_compiler_util"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}class o{constructor(n,r,o=!1){this.variableNames=["A"];const s=(0,e.getGlslDifferences)(),[l,u]=r;this.outputShape=n;let i="result";o&&(i="floor(result * 255. + 0.5)"),this.userCode=`\n      ${t.getFlatIndexFrom3D(n)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / ${u};\n        int c = imod(flatIndex, ${u});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${u}.0, ${l}.0);\n        vec4 values = ${s.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${s.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}}exports.EncodeMatrixProgram=o;
},{"./glsl_version":"q4Yv","./shader_compiler_util":"YXiX"}],"flVd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EncodeMatrixPackedProgram=void 0;var e=require("./glsl_version"),t=r(require("./shader_compiler_util"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var s=o?Object.getOwnPropertyDescriptor(e,l):null;s&&(s.get||s.set)?Object.defineProperty(r,l,s):r[l]=e[l]}return r.default=e,t&&t.set(e,r),r}class o{constructor(n,r,o=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const l=(0,e.getGlslDifferences)(),[s,a]=r;this.outputShape=n;let u="",c="result";o&&(c="floor(result * 255. + 0.5)");for(let e=0;e<=1;e++)for(let t=0;t<=1;t++){const r=2*e+t;u+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${n[2]}) {\n            localCoords[2] += ${t};\n            if(localCoords[1] + ${e} < ${n[1]}) {\n              localCoords[1] += ${e};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${a};\n              c = imod(flatIndex, ${a});\n              uv = (vec2(c, r) + halfCR) / vec2(${a}.0, ${s}.0);\n              values = ${l.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${r}] = values[0];\n              } else if(offset == 1) {\n                result[${r}] = values[1];\n              } else if(offset == 2) {\n                result[${r}] = values[2];\n              } else {\n                result[${r}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${t.getFlatIndexFrom3D(n)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${u}\n\n        ${l.output} = ${c};\n      }\n    `}}exports.EncodeMatrixPackedProgram=o;
},{"./glsl_version":"q4Yv","./shader_compiler_util":"YXiX"}],"Dw2h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FillProgram=void 0;class t{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(t){return(e,o)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(o,"value")),e.gl.uniform1f(this.valueLoc,t)}}}exports.FillProgram=t;
},{}],"ppix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GatherProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,o){this.variableNames=["A","indices"];const n=t.slice();n[o]=s,this.outputShape=n,this.rank=n.length;const i=(0,e.getCoordsDataType)(this.rank),a=r(t,o);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        setOutput(getA(${a}));\n      }\n    `}}function r(e,t){const r=e.length;if(r>4)throw Error(`Gather for rank ${r} is not yet supported`);if(1===r)return"int(getIndices(resRC))";const s=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[];for(let n=0;n<e.length;n++)n===t?o.push(`int(getIndices(${s[n]}))`):o.push(`${s[n]}`);return o.join()}exports.GatherProgram=t;
},{"./shader_compiler":"GECe"}],"DWgl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GatherNDProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,i){this.sliceDim=t,this.strides=s,this.variableNames=["x","indices"],this.outputShape=i;const r=(0,e.getCoordsDataType)(s.length),n=(0,e.getCoordsDataType)(i.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${n} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${o};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}exports.GatherNDProgram=t;
},{"./shader_compiler":"GECe"}],"XLbs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createVertexShader=o,exports.createVertexBuffer=u,exports.createIndexBuffer=i,exports.getInternalFormatForFloat32MatrixTexture=l,exports.createFloat32MatrixTexture=x,exports.getInternalFormatForFloat16MatrixTexture=d,exports.createFloat16MatrixTexture=f,exports.getInternalFormatForUnsignedBytesMatrixTexture=T,exports.createUnsignedBytesMatrixTexture=F,exports.getInternalFormatForPackedMatrixTexture=A,exports.createPackedMatrixTexture=s,exports.getInternalFormatForFloat16PackedMatrixTexture=E,exports.createFloat16PackedMatrixTexture=p,exports.bindVertexProgramAttributeStreams=P,exports.uploadDenseMatrixToTexture=_,exports.uploadPixelDataToTexture=h,exports.createBufferFromOutputTexture=B,exports.downloadFloat32MatrixFromBuffer=R,exports.downloadByteEncodedFloatMatrixFromOutputTexture=U,exports.downloadPackedMatrixFromBuffer=g,exports.downloadMatrixFromPackedOutputTexture=k;var e=require("./glsl_version"),t=a(require("./tex_util")),r=a(require("./webgl_util"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function o(t){const n=(0,e.getGlslDifferences)(),a=`${n.version}\n    precision highp float;\n    ${n.attribute} vec3 clipSpacePos;\n    ${n.attribute} vec2 uv;\n    ${n.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`;return r.createVertexShader(t,a)}function u(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return r.createStaticVertexBuffer(e,t)}function i(e){const t=new Uint16Array([0,1,2,2,1,3]);return r.createStaticIndexBuffer(e,t)}function c(e,t,n,a,o,u){r.validateTextureSize(t,n);const i=r.createTexture(e),c=e.TEXTURE_2D;return r.callAndCheck(e,()=>e.bindTexture(c,i)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)),r.callAndCheck(e,()=>e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)),r.callAndCheck(e,()=>e.texImage2D(c,0,a,t,n,0,o,u,null)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null)),i}function l(e){return e.internalFormatFloat}function x(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,l(a),a.textureFormatFloat,e.FLOAT)}function d(e){return e.internalFormatHalfFloat}function f(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,d(a),a.textureFormatFloat,a.textureTypeHalfFloat)}function T(e){return e.downloadTextureFormat}function F(e,r,n,a){const[o,u]=t.getUnpackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,T(a),e.RGBA,e.UNSIGNED_BYTE)}function A(e){return e.internalFormatPackedFloat}function s(e,r,n,a){const[o,u]=t.getPackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,A(a),e.RGBA,e.FLOAT)}function E(e){return e.internalFormatPackedHalfFloat}function p(e,r,n,a){const[o,u]=t.getPackedMatrixTextureShapeWidthHeight(r,n);return c(e,o,u,E(a),e.RGBA,a.textureTypeHalfFloat)}function P(e,t,n){return r.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),r.bindVertexBufferToProgramAttribute(e,t,"clipSpacePos",n,3,20,0)&&r.bindVertexBufferToProgramAttribute(e,t,"uv",n,2,20,12)}function _(e,t,n,a,o,u){let i,c,l;r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,t)),o instanceof Uint8Array?(i=new Uint8Array(n*a*4),c=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*a*4),c=e.FLOAT,l=u.internalFormatPackedFloat),i.set(o),r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,a,0,e.RGBA,c,i)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function h(e,t,n){r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):r.callAndCheck(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),r.callAndCheck(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function B(e,t,n,a){const o=e.createBuffer();r.callAndCheck(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const u=16*t*n;return r.callAndCheck(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,u,e.STREAM_READ)),r.callAndCheck(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),r.callAndCheck(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function R(e,t,r){const n=e,a=new Float32Array(r);return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,a),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),a}function U(e,n,a,o){const[u,i]=t.getUnpackedMatrixTextureShapeWidthHeight(n,a),c=new Uint8Array(t.getUnpackedArraySizeFromMatrixSize(n*a,4));return r.callAndCheck(e,()=>e.readPixels(0,0,u,i,o.downloadTextureFormat,e.UNSIGNED_BYTE,c)),new Float32Array(c.buffer)}function g(e,r,n,a,o,u,i,c){const l=e,x=new Float32Array(t.getPackedRGBAArraySizeFromMatrixShape(u,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,r),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,x),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),x}function k(e,t,n){const a=new Float32Array(t*n*4);return r.callAndCheck(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a)),a}
},{"./glsl_version":"q4Yv","./tex_util":"K2eT","./webgl_util":"ElKU"}],"WZG3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearSearchLastTrue=l,exports.GPGPUContext=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./canvas_util"),r=n(require("./gpgpu_util")),i=n(require("./tex_util")),o=n(require("./webgl_util"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=i?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}class u{constructor(s){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=(0,e.env)().getNumber("WEBGL_VERSION");null!=s?(this.gl=s,(0,t.setWebGLContext)(n,s)):this.gl=(0,t.getWebGLContext)(n);let u="WEBGL_color_buffer_float";if(1===(0,e.env)().getNumber("WEBGL_VERSION")){const t="OES_texture_float",r="OES_texture_half_float";if(this.textureFloatExtension=o.getExtensionOrThrow(this.gl,t),o.hasExtension(this.gl,r))this.textureHalfFloatExtension=o.getExtensionOrThrow(this.gl,r);else if((0,e.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(u),o.hasExtension(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=o.getExtensionOrThrow(this.gl,"EXT_color_buffer_half_float");else if((0,e.env)().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(u="EXT_color_buffer_float",o.hasExtension(this.gl,u))this.colorBufferFloatExtension=this.gl.getExtension(u);else{if(!o.hasExtension(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=r.createVertexBuffer(this.gl),this.indexBuffer=r.createIndexBuffer(this.gl),this.framebuffer=o.createFramebuffer(this.gl),this.textureConfig=i.getTextureConfig(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,e.env)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;o.callAndCheck(e,()=>e.finish()),o.callAndCheck(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),o.callAndCheck(e,()=>e.deleteFramebuffer(this.framebuffer)),o.callAndCheck(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),o.callAndCheck(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),o.callAndCheck(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat32MatrixTexture(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat16MatrixTexture(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),r.createUnsignedBytesMatrixTexture(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),r.uploadPixelDataToTexture(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,i,o){this.throwIfDisposed(),r.uploadDenseMatrixToTexture(this.gl,e,t,i,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),r.createFloat16PackedMatrixTexture(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),r.createPackedMatrixTexture(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),o.callAndCheck(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,i){return this.downloadMatrixDriver(e,()=>r.downloadByteEncodedFloatMatrixFromOutputTexture(this.gl,t,i,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,i,o,s,n){return r.downloadPackedMatrixFromBuffer(this.gl,e,t,i,o,s,n,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return r.downloadFloat32MatrixFromBuffer(this.gl,e,t)}createBufferFromTexture(e,t,i){this.bindTextureToFrameBuffer(e);const o=r.createBufferFromOutputTexture(this.gl,t,i,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(t){let r,i;if((0,e.env)().getBool("WEBGL_FENCE_API_ENABLED")){const e=t,o=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),i=(()=>{const t=e.clientWaitSync(o,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED}),r=o}else(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),i=(()=>this.isQueryAvailable(r,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))):i=(()=>!0);return{query:r,isFencePassed:i}}downloadMatrixFromPackedTexture(e,t,i){return this.downloadMatrixDriver(e,()=>r.downloadMatrixFromPackedOutputTexture(this.gl,t,i))}createProgram(e){this.throwIfDisposed();const t=this.gl,i=o.createFragmentShader(t,e),s=r.createVertexShader(t),n=o.createProgram(t);return o.callAndCheck(t,()=>t.attachShader(n,s)),o.callAndCheck(t,()=>t.attachShader(n,i)),o.linkProgram(t,n),this.debug&&o.validateProgram(t,n),this.vertexAttrsAreBound||(this.setProgram(n),this.vertexAttrsAreBound=r.bindVertexProgramAttributeStreams(t,this.program,this.vertexBuffer)),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&o.callAndCheck(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&o.validateProgram(this.gl,this.program),o.callAndCheck(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?o.getProgramUniformLocationOrThrow(this.gl,e,t):o.getProgramUniformLocation(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),o.bindTextureToProgramUniformSampler(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[o,s]=i.getPackedMatrixTextureShapeWidthHeight(t,r);this.setOutputMatrixTextureDriver(e,o,s)}setOutputMatrixWriteRegion(e,t,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,t)}setOutputPackedMatrixWriteRegion(e,t,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&o.validateProgram(this.gl,this.program),o.validateFramebuffer(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),o.callAndCheck(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=o.getExtensionOrThrow(this.gl,2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),r=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,r),r}endQuery(){if(2===(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await e.util.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),r=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=l(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(t,r){this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||e.util.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),o.bindColorTextureToFramebuffer(this.gl,e,this.framebuffer),this.debug&&o.validateFramebuffer(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(o.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.debug&&o.validateFramebuffer(this.gl)):o.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const i=this.gl;o.bindColorTextureToFramebuffer(i,e,this.framebuffer),this.debug&&o.validateFramebuffer(i),this.outputTexture=e,o.callAndCheck(i,()=>i.viewport(0,0,t,r)),o.callAndCheck(i,()=>i.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,i){this.throwIfDisposed(),o.callAndCheck(this.gl,()=>this.gl.scissor(e,t,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function l(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}exports.GPGPUContext=u;
},{"@tensorflow/tfjs-core":"tKjQ","./canvas_util":"SALK","./gpgpu_util":"XLbs","./tex_util":"K2eT","./webgl_util":"ElKU"}],"JQJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileProgram=n,exports.runProgram=i,exports.makeShaderKey=s;var e=require("@tensorflow/tfjs-core"),t=r(require("./shader_compiler"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function n(a,r,n,o){const i=r.userCode,s=n.map((e,t)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:r.variableNames[t],shapeInfo:a}}),f=s.map(e=>e.shapeInfo),l={logicalShape:o.shape,texShape:o.texData.texShape,isUniform:!1,isPacked:o.texData.isPacked,flatOffset:null},u=t.makeShader(s,l,i,r.packedInputs),c=a.createProgram(u);let p=null;const m=a.getUniformLocation(c,"NAN",!1);1===(0,e.env)().getNumber("WEBGL_VERSION")&&(p=a.getUniformLocation(c,"INFINITY",!1));const h={};for(let e=0;e<r.variableNames.length;e++){const t=r.variableNames[e],n=!1;h[t]=a.getUniformLocation(c,t,n),h[`offset${t}`]=a.getUniformLocation(c,`offset${t}`,n)}return{program:r,source:u,webGLProgram:c,uniformLocations:h,inShapeInfos:f,outShapeInfo:l,infLoc:p,nanLoc:m}}function o(t,a){if(t.length!==a.length)throw Error(`Binary was compiled with ${t.length} inputs, but `+`was executed with ${a.length} inputs`);t.forEach((t,r)=>{const n=t.logicalShape,o=a[r],i=o.shape;if(!e.util.arraysEqual(n,i))throw Error("Binary was compiled with different shapes than "+`the current args. Shapes ${n} and ${i} must match`);if(t.isUniform&&o.isUniform)return;const s=t.texShape,f=o.isUniform?null:o.texData.texShape;if(!e.util.arraysEqual(s,f))throw Error("Binary was compiled with different texture shapes than the"+` current args. Shape ${s} and ${f} must match`)})}function i(t,a,r,n,i){o(a.inShapeInfos,r),o([a.outShapeInfo],[n]);const s=n.texData.texture,f=n.texData.texShape;n.texData.isPacked?t.setOutputPackedMatrixTexture(s,f[0],f[1]):t.setOutputMatrixTexture(s,f[0],f[1]),t.setProgram(a.webGLProgram),1===(0,e.env)().getNumber("WEBGL_VERSION")&&null!==a.infLoc&&t.gl.uniform1f(a.infLoc,1/0),null!==a.nanLoc&&t.gl.uniform1f(a.nanLoc,NaN),r.forEach((r,n)=>{const o=a.program.variableNames[n],i=a.uniformLocations[o],s=a.uniformLocations[`offset${o}`];if(null!=i)if(r.isUniform)if(e.util.sizeFromShape(r.shape)<2)t.gl.uniform1f(i,r.uniformValues[0]);else{let e=r.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(i,e)}else null!=r.texData.slice&&null!=s&&t.gl.uniform1i(s,r.texData.slice.flatOffset),t.setInputMatrixTexture(r.texData.texture,i,n)}),null!=i&&i(t,a.webGLProgram),t.executeProgram()}function s(e,t,a){let r="";t.concat(a).forEach(e=>{const t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,a=e.isUniform?"uniform":e.texData.texShape;r+=`${e.shape}_${a}_${t}`});const n=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+n}
},{"@tensorflow/tfjs-core":"tKjQ","./shader_compiler":"GECe"}],"OKnA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Im2ColPackedProgram=void 0;var n=require("./glsl_version");class e{constructor(e,t,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const{filterWidth:s,inChannels:o,strideWidth:r,strideHeight:d,padInfo:l,outWidth:c,dilationWidth:a,dilationHeight:f,dataFormat:$}=i,{left:h,top:p}=l,u=o*s,m=(0,n.getGlslDifferences)(),v="channelsLast"===$,g=v?0:1,x=v?1:2;let D="";for(let n=0;n<=1;n++)for(let i=0;i<=1;i++)D+=`\n          blockIndex = rc.y + ${i};\n          pos = rc.x + ${n};\n\n          if(blockIndex < ${e[1]} && pos < ${e[0]}) {\n            offsetY = int(blockIndex / (${c})) * ${d} - ${p};\n            d0 = offsetY + ${f} * (pos / ${u});\n\n            if(d0 < ${t[g]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${c}.) * ${r}. - ${h}.);\n              d1 = offsetX + ${a} * (int(mod(float(pos), ${u}.) / ${o}.));\n\n              if(d1 < ${t[x]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${o}.));\n\n                if (${v}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*n+i}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*n+i}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${D}\n\n        ${m.output} = result;\n      }\n    `}}exports.Im2ColPackedProgram=e;
},{"./glsl_version":"q4Yv"}],"TwHO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNProgram=void 0;class t{constructor(t,o,n,s,e){this.variableNames=["x"],this.outputShape=[];const r=o,i=t[3]-1;let a;this.outputShape=t;const d=`float(${n}) + float(${s}) * sum`;a=.5===e?`inversesqrt(${d})`:1===e?`1.0/(${d})`:`exp(log(${d}) * float(-${e}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${r}; j <= ${r}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${i}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${a};\n        setOutput(val);\n      }\n    `}}exports.LRNProgram=t;
},{}],"ul1d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNGradProgram=void 0;class n{constructor(n,t,e,i,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=t,this.bias=e,this.alpha=i,this.beta=o,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${i}) * norm + float(${e});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${i})\n                * float(${o})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${o});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}exports.LRNGradProgram=n;
},{}],"tDQy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRNPackedProgram=void 0;class e{constructor(e,n,t,o,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const r=n,c=e[3]-1;let s;this.outputShape=e;const u=`float(${t}) + float(${o}) * sum`;s=.5===a?`inversesqrt(${u})`:1===a?`1.0/(${u})`:`exp(log(${u}) * float(-${a}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${r};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${r}; j <= ${r}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${c}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}exports.LRNPackedProgram=e;
},{}],"SRFh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MaxPool3DBackpropProgram=exports.MaxPool2DBackpropProgram=void 0;class n{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const t=n.strideHeight,o=n.strideWidth,e=n.dilationHeight,i=n.effectiveFilterHeight,d=n.effectiveFilterWidth,r=i-1-n.padInfo.top,a=d-1-n.padInfo.left,s=i*d-1;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${e}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${o}.0;\n\n            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${s} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${d} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.MaxPool2DBackpropProgram=n;class t{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;const t=n.strideDepth,o=n.strideHeight,e=n.strideWidth,i=n.dilationDepth,d=n.dilationHeight,r=n.dilationWidth,a=n.effectiveFilterDepth,s=n.effectiveFilterHeight,y=n.effectiveFilterWidth,c=a-1-n.padInfo.front,l=s-1-n.padInfo.top,C=y-1-n.padInfo.left,f=a*s*y-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${l}, ${C});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${a};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${s};\n              wR += ${d}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${y};\n                wC += ${r}) {\n              float dyC = float(dyCCorner + wC) / ${e}.0;\n\n              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${f} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${s} * ${y} +\n                  wR * ${y} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}exports.MaxPool3DBackpropProgram=t;
},{}],"Lcjg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatMulPackedProgram=void 0;class t{constructor(t,e,n,i=!1,s=!1,a=!1,r=null,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;const o=i?t[1]:t[2],u=Math.ceil(o/2),l=i?"i * 2, rc.y":"rc.y, i * 2",v=s?"rc.z, i * 2":"i * 2, rc.z",x=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let h="",p="";r&&(h=c?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${r}\n        }`:`vec4 activation(vec4 x) {\n          ${r}\n        }`,p="result = activation(result);");const b=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights");let $="rc.x",m="rc.x";t[0]<e[0]?$=`int(min(float(rc.x), ${t[0]-1}.))`:e[0]<t[0]&&(m=`int(min(float(rc.x), ${e[0]-1}.))`),this.userCode=`\n      ${h}\n\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${u}; i++) {\n          int batchA = ${$};\n          int batchB = ${m};\n          vec4 a = getMatrixA(batchA, ${l});\n          vec4 b = getMatrixB(batchB, ${v});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${x[0]} * ${d[0]});\n          result += (${x[1]} * ${d[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${b}\n\n        ${p}\n\n        setOutput(result);\n      }\n    `}}exports.MatMulPackedProgram=t;
},{}],"jUsu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultinomialProgram=void 0;class t{constructor(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(n,"seed")),e.gl.uniform1f(this.seedLoc,t)}}}exports.MultinomialProgram=t;
},{}],"qxZv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OneHotProgram=void 0;class o{constructor(o,t,e,s){this.variableNames=["indices"],this.outputShape=[o,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${s}), float(${e}),\n                      float(index == coords.y)));\n      }\n    `}}exports.OneHotProgram=o;
},{}],"V5VG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PackProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class n{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;const r=n.length;if(0===r)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const u=(0,t.getChannels)("rc",r),i=(0,e.getCoordsDataType)(r),g=c(r,n,u),p=o(r,n[n.length-1],n[n.length-2],u),l=s(n,u);this.userCode=`\n        void main() {\n          ${i} rc = getOutputCoords();\n\n          if(${g}) {\n            setOutput(vec4(0));\n          } else {\n            ${p}\n\n            setOutput(vec4(${l}));\n          }\n        }\n      `}}}function r(t,e){const n=[];for(let r=0;r<=1;r++)for(let c=0;c<=1;c++){let o=`${0===r?"r":"rp1"}, ${0===c?"c":"cp1"}`;for(let n=2;n<t;n++)o=`${e[e.length-1-n]},`+o;n.push(o)}return n}function c(t,e,n){if(1===t)return`rc > ${e[0]}`;let r="";for(let c=t-2;c<t;c++)r+=`${n[c]} >= ${e[c]}`,c<t-1&&(r+="||");return r}function o(t,e,n,r){if(1===t)return"";const c=r.slice(-2);return`\n    int r = ${c[0]};\n    int c = ${c[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${e};\n    bool rEdge = rp1 >= ${n};\n  `}function s(t,e){const n=t.length,c=r(n,e);return 1===n?`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${c[0]}),\n          cEdge ? 0. : getA(${c[1]}),\n          rEdge ? 0. : getA(${c[2]}),\n          rEdge || cEdge ? 0. : getA(${c[3]})`}exports.PackProgram=n;
},{"./packing_util":"ioBk","./shader_compiler":"GECe"}],"gMCd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PadProgram=void 0;var t=require("./shader_compiler");class n{constructor(n,o,e){this.variableNames=["x"],this.outputShape=o.map((t,o)=>t[0]+n[o]+t[1]);const s=n.length,r=(0,t.getCoordsDataType)(s),a=o.map(t=>t[0]).join(","),u=o.map((t,o)=>t[0]+n[o]).join(","),d=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);this.userCode=1!==s?`\n      ${r} start = ${r}(${a});\n      ${r} end = ${r}(${u});\n\n      void main() {\n        ${r} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(${e}));\n        } else {\n          ${r} coords = outC - start;\n          setOutput(getX(${d}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${u};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(${e}));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}exports.PadProgram=n;
},{"./shader_compiler":"GECe"}],"vqPE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PadPackedProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class n{constructor(n,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map((t,e)=>t[0]+n[e]+t[1]);const a=n.length,o=(0,e.getCoordsDataType)(a),u=r.map(t=>t[0]).join(","),c=r.map((t,e)=>t[0]+n[e]).join(","),i=(0,t.getChannels)("rc",a),$=(0,t.getChannels)("source",a),p=`${i[a-1]} < ${this.outputShape[a-1]}`,l=1===a?"source":`vec2(${$.slice(-2).join()})`,d=[`${o} rc = outputLoc;`,`${i[a-1]} += 1;\n       if(${p}) {\n      `,1===a?"":`}\n       rc = outputLoc;\n       ${i[a-2]} += 1;\n       if(${i[a-2]} < ${this.outputShape[a-2]}) {`,1===a?"":`  ${i[a-1]} += 1;\n         if(${p}) {`],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let t=0,e=1===a?2:4;t<e;t++)g+=`\n        ${d[t]}\n        if (${h}) {\n          result[${t}] = float(${s});\n        } else {\n          ${o} source = rc - start;\n          result[${t}] = getChannel(getX(${$.join()}), ${l});\n        }\n      `;g+=1===a?"} ":"}}",this.userCode=`\n      const ${o} start = ${o}(${u});\n      const ${o} end = ${o}(${c});\n\n      void main() {\n        ${o} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${g}\n        setOutput(result);\n      }\n    `}}exports.PadPackedProgram=n;
},{"./packing_util":"ioBk","./shader_compiler":"GECe"}],"MH8O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pool3DProgram=exports.Pool2DProgram=void 0;class n{constructor(n,e,t,i=!1,a=!1){if(this.variableNames=["x"],"avg"===e&&t)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,x=n.strideHeight,r=n.strideWidth,c=n.dilationHeight,l=n.dilationWidth,u=n.effectiveFilterHeight,s=n.effectiveFilterWidth,C=n.padInfo.top,d=n.padInfo.left;this.outputShape=n.outShape;const $="avg"===e,h=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,v=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`;let f="0.0";if($||(f="-1.0 / 1e-20"),t){const e=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${x}, ${r});\n        const ivec2 pads = ivec2(${C}, ${d});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${u};\n              wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${s};\n                wC += ${l}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${n.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${e} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${i?a?h:v:`wR * ${s} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let R=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(R="avgValue / count");const V=4*Math.floor(o/4),g=o%4,m=`\n      if (${$}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${x}, ${r});\n      const ivec2 pads = ivec2(${C}, ${d});\n      const float initializationValue = ${f};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${f});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${u};\n            wR += ${c}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${n.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${V}; wC += 4) {\n            int xC = xCCorner + wC * ${l};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              getValue(batch, xR, xC + 3 * ${l}, d)\n            );\n\n            ${m}\n          }\n\n          int xC = xCCorner + ${V};\n          if (${1===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${m}\n          } else if (${2===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${m}\n          } else if (${3===g}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${l}, d),\n              getValue(batch, xR, xC + 2 * ${l}, d),\n              initializationValue\n            );\n\n            ${m}\n          }\n        }\n        setOutput(${R});\n      }\n    `}}exports.Pool2DProgram=n;class e{constructor(n,e,t,i=!1,a=!1){if(this.variableNames=["x"],"avg"===e&&t)throw new Error("Cannot compute positions for average pool.");const o=n.filterWidth,x=n.strideDepth,r=n.strideHeight,c=n.strideWidth,l=n.dilationDepth,u=n.dilationHeight,s=n.dilationWidth,C=n.effectiveFilterDepth,d=n.effectiveFilterHeight,$=n.effectiveFilterWidth,h=n.padInfo.front,v=n.padInfo.top,f=n.padInfo.left;this.outputShape=n.outShape;const R="avg"===e;let V="0.0";if(R||(V="-1.0 / 1e-20"),t){const e=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${x}, ${r}, ${c});\n        const ivec3 pads = ivec3(${h}, ${v}, ${f});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${C};\n              wD += ${l}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${n.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${d};\n                wR += ${u}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${n.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${$};\n                  wC += ${s}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${n.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${e} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${i?a?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${d} * ${$} +\n                      wR * ${$} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let g=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(g="avgValue / count");const m=4*Math.floor(o/4),w=o%4,p=`\n      if (${R}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${x}, ${r}, ${c});\n      const ivec3 pads = ivec3(${h}, ${v}, ${f});\n      const float initializationValue = ${V};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${n.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${V});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${C};\n            wD += ${l}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${n.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${d};\n            wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${n.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${m}; wC += 4) {\n              int xC = xCCorner + wC * ${s};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${s}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${s}, ch)\n              );\n\n              ${p}\n            }\n\n            int xC = xCCorner + ${m};\n            if (${1===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${p}\n            } else if (${2===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${p}\n            } else if (${3===w}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${s}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${s}, ch),\n                initializationValue\n              );\n\n              ${p}\n            }\n          }\n          setOutput(${g});\n        }\n      }\n    `}}exports.Pool3DProgram=e;
},{}],"DWsN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReduceProgram=void 0;class n{constructor(n,e){this.variableNames=["x"];const{windowSize:a,batchSize:l,inSize:t,outSize:i}=n;this.outputShape=[l,i];let u="0.0",o="";"prod"===e?u="1.0":"min"===e?(u="1.0 / 1e-20",o="min"):"max"===e&&(u="-1.0 / 1e-20",o="max");let d=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?d="sumValue":"prod"===e?d="prodValue":"all"===e?d="allValue":"any"===e&&(d="anyValue");const s=4*Math.floor(a/4),V=a%4;let c=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n      }\n    `,r="vec4";"all"===e?(u="1.0",c="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",r="bvec4"):"any"===e&&(u="0.0",c="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",r="bvec4");let f="";t%a>0&&(f=`\n        if (inIdx < 0 || inIdx >= ${t}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${u};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${f}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${a};\n\n        vec4 minMaxValue = vec4(${u});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${c}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${2===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${c}\n        } else if (${3===V}) {\n          ${r} values = ${r}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${c}\n        }\n        setOutput(${d});\n      }\n    `}}exports.ReduceProgram=n;
},{}],"ppfd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReshapePackedProgram=void 0;var t=n(require("./shader_compiler_util"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}class r{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;let r="";for(let t=0;t<4;t++){let e="thisRC = rc;";t%2==1&&(e+="thisRC.z += 1;"),t>1&&(e+="thisRC.y += 1;"),r+=`\n        ${e}\n        ${t>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${t}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${t>0?"}":""}\n      `}this.userCode=`\n      ${i(n)}\n      ${t.getFlatIndexFrom3D(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${e[1]};\n        int cols = ${e[2]};\n\n        ${r}\n\n        setOutput(result);\n      }\n    `}}function i(e){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${t.getLogicalCoordinatesFromFlatIndex(["r","c","d"],e)}\n      return ivec3(r, c, d);\n    }\n  `}exports.ReshapePackedProgram=r;
},{"./shader_compiler_util":"YXiX"}],"oShx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearBackpropProgram=void 0;class t{constructor(t,n,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;const[,o,i]=n.shape,[,d,r]=t.shape,a=[e&&d>1?o-1:o,e&&r>1?i-1:i],f=[e&&d>1?d-1:d,e&&r>1?r-1:r],l=a[0]/f[0],s=a[1]/f[1],x=1/l,c=1/s,p=2*Math.ceil(x)+2,y=2*Math.ceil(c)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${l});\n        const float widthScale = float(${s});\n\n        const float invHeightScale = float(${x});\n        const float invWidthScale = float(${c});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${y});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${d}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${r}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}exports.ResizeBilinearBackpropProgram=t;
},{}],"KwIP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearProgram=void 0;class e{constructor(e,o,t,n){this.variableNames=["A"],this.outputShape=[];const[c,r,i,s]=e;this.outputShape=[c,o,t,s];const u=[n&&o>1?r-1:r,n&&t>1?i-1:i],a=[n&&o>1?o-1:o,n&&t>1?t-1:t];this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/a[0]},\n          ${u[1]/a[1]});\n      const vec2 inputShapeRC = vec2(${r}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeBilinearProgram=e;
},{}],"W8HY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeBilinearPackedProgram=void 0;class e{constructor(e,o,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[c,r,s,u]=e;this.outputShape=[c,o,t,u];const l=[n&&o>1?r-1:r,n&&t>1?s-1:s],C=[n&&o>1?o-1:o,n&&t>1?t-1:t];this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${l[0]/C[0]},\n          ${l[1]/C[1]},\n          ${l[1]/C[1]});\n      const vec3 inputShapeRC = vec3(${r}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${u-1};\n        bool hasNextRow = coords.z < ${t-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeBilinearPackedProgram=e;
},{}],"b9bD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeNearestNeigborBackpropProgram=void 0;class t{constructor(t,n,o){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n.shape;const[,e,a]=n.shape,[,r,i]=t.shape,s=[o&&r>1?e-1:e,o&&i>1?a-1:a],f=[o&&r>1?r-1:r,o&&i>1?i-1:i],l=s[0]/f[0],c=s[1]/f[1],d=1/l,u=1/c,y=2*Math.ceil(d)+2,h=2*Math.ceil(u)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${l});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${d});\n        const float invWidthScale = float(${u});\n\n        const int winHeight = int(${y});\n        const int winWidth = int(${h});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${r}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${i}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${f[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${f[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${e}) - 1),\n                ${o} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${a}) - 1),\n                ${o} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}exports.ResizeNearestNeigborBackpropProgram=t;
},{}],"ROs9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeNearestNeighborProgram=void 0;class e{constructor(e,t,o,n){this.variableNames=["A"],this.outputShape=[];const[r,s,c,i]=e;this.outputShape=[r,t,o,i];const u=[n&&t>1?s-1:s,n&&o>1?c-1:c],a=[n&&t>1?t-1:t,n&&o>1?o-1:o],p=n?"0.5":"0.0";this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/a[0]},\n          ${u[1]/a[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${c}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}exports.ResizeNearestNeighborProgram=e;
},{}],"W1eJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReverseProgram=void 0;var e=require("./shader_compiler");class o{constructor(o,t){this.variableNames=["x"];const r=o.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=o,1===r)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${o[0]} - coord - 1));\n        }\n      `);const s=o.map((e,r)=>(e=>-1!==t.indexOf(e)&&1!==o[e]?`${o[e]} - coords[${e}] - 1`:`coords[${e}]`)(r)).join(","),n=(0,e.getCoordsDataType)(r);this.userCode=`\n      void main() {\n        ${n} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}exports.ReverseProgram=o;
},{"./shader_compiler":"GECe"}],"fzs6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReversePackedProgram=void 0;var e=require("./packing_util"),t=require("./shader_compiler");class n{constructor(n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=n.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=n;const u=(0,e.getChannels)("rc",s),i=`${u[s-1]} + 1 < ${this.outputShape[s-1]}`,o=`${u[s-2]} + 1 < ${this.outputShape[s-2]}`,c=(0,t.getCoordsDataType)(s);function a(e){const t=n.map((t,s)=>(function(e,t){return-1!==r.indexOf(e)&&1!==n[e]?`${n[e]} - ${t[e]} - 1`:`${t[e]}`})(s,e));return`getChannel(getX(${t.join(",")}), vec2(${t.slice(-2).join(",")}))`}this.userCode=1===s?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${n[0]} - rc - 1),\n            ${n[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),\n                ${n[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${c} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return a(e)}(u.slice())};\n          if(${i}){\n            result.g = ${function(e){return e[s-1]="("+e[s-1]+" + 1)",a(e)}(u.slice())};\n          }\n          if(${o}) {\n            result.b = ${function(e){return e[s-2]="("+e[s-2]+" + 1)",a(e)}(u.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[s-1]="("+e[s-1]+" + 1)",e[s-2]="("+e[s-2]+" + 1)",a(e)}(u.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}exports.ReversePackedProgram=n;
},{"./packing_util":"ioBk","./shader_compiler":"GECe"}],"fi5f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,n,o,s,r,d,i=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=d;const a=(0,e.getCoordsDataType)(r.length),u=(0,e.getCoordsDataType)(d.length);let l="";1===o?l="i":2===o&&(l="i, j");const c=`getIndices(${l})`;let f="";1===s?f="i":2===s&&(f="i, coords[1]");const p=`getUpdates(${f})`,$=n>1?"strides[j]":"strides";this.userCode=`\n        ${a} strides = ${a}(${r});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${n}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${$};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${p};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}exports.ScatterProgram=t;
},{"./shader_compiler":"GECe"}],"xNFg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SegmentOpProgram=void 0;class n{constructor(n,e){this.variableNames=["x","segmentIds"];const t=n.windowSize,i=n.batchSize,a=n.inSize,d=n.numSegments,g=d*Math.ceil(a/t);this.outputShape=[i,g];const I=4*Math.floor(t/4),l=t%4,u="\n        sumValue += dot(values, segFilter);\n    ";let r="";a%t>0&&(r=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return initializationValue;\n        }\n      `);let c="";a%t>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${a}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${r}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${c}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${d})) * float(${t}));\n        int currentSeg = int(mod(float(outIdx), float(${d})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${I}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${I};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}exports.SegmentOpProgram=n;
},{}],"Yqhs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,r,s){let o,n;if(this.variableNames=["c","a","b"],this.outputShape=r,s>4)throw Error(`Where for rank ${s} is not yet supported`);if(1===s)n="resRC",o="resRC";else{const e=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[];for(let o=0;o<r.length;o++)a.push(`${e[o]}`),o<t&&s.push(`${e[o]}`);o=s.join(),n=a.join()}const a=(0,e.getCoordsDataType)(s);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${o});\n        if (cVal >= 1.0) {\n          setOutput(getA(${n}));\n        } else {\n          setOutput(getB(${n}));\n        }\n      }\n    `}}exports.SelectProgram=t;
},{"./shader_compiler":"GECe"}],"Jzxz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SliceProgram=void 0;var t=require("./shader_compiler");class r{constructor(r){this.variableNames=["source"],this.outputShape=r,this.rank=r.length;const s=(0,t.getCoordsDataType)(this.rank),n=`uniform int start[${this.rank}];`,i=e(this.rank);let a;a=`\n        ${s} sourceLoc;\n        ${s} coords = getOutputCoords();\n        ${r.map((t,r)=>`sourceLoc.${o[r]} = start[${r}] + coords.${o[r]};`).join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${a}\n        setOutput(getSource(${i}));\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${t.length})`);return(r,o)=>{null==this.startLoc&&(this.startLoc=r.getUniformLocationNoThrow(o,"start"),null==this.startLoc)||r.gl.uniform1iv(this.startLoc,t)}}}exports.SliceProgram=r;const o=["x","y","z","w","u","v"];function e(t){if(1===t)return"sourceLoc";if(t<=6)return o.slice(0,t).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}
},{"./shader_compiler":"GECe"}],"Svca":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SlicePackedProgram=void 0;var t=require("./packing_util"),n=require("./shader_compiler");class r{constructor(r){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.rank=r.length;const s=(0,n.getCoordsDataType)(this.rank),e=(0,t.getChannels)("coords",this.rank),i=(0,t.getChannels)("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${a})`,h=`\n      result.x = ${o};\n      if (++${e[this.rank-1]} < ${r[this.rank-1]}) {\n        ++${i[this.rank-1]};\n        result.y = ${o};\n        --${i[this.rank-1]};\n      }\n    `,c=1===this.rank?"":`\n      --${e[this.rank-1]};\n      if (++${e[this.rank-2]} < ${r[this.rank-2]}) {\n        ++${i[this.rank-2]};\n        result.z = ${o};\n        if (++${e[this.rank-1]} < ${r[this.rank-1]}) {\n          ++${i[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,u=this.rank<=4?`sourceLoc = coords +\n            ${s}(${r.map((t,n)=>`start[${n}]`).join()});`:r.map((t,n)=>`${i[n]} = ${e[n]} + start[${n}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${s} coords = getOutputCoords();\n        ${s} sourceLoc;\n        ${u}\n        vec4 result = vec4(0.);\n        ${h}\n        ${c}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${t.length})`);return(n,r)=>{null==this.startLoc&&(this.startLoc=n.getUniformLocationNoThrow(r,"start"),null==this.startLoc)||n.gl.uniform1iv(this.startLoc,t)}}}exports.SlicePackedProgram=r;
},{"./packing_util":"ioBk","./shader_compiler":"GECe"}],"ErpK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StridedSliceProgram=void 0;var e=require("./shader_compiler");class t{constructor(t,s,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,i=(0,e.getCoordsDataType)(r.length),d=(0,e.getCoordsDataType)(r.length);let n="";if(1===o)n="coords * strides + begin";else{let e=0;n=r.map((t,s)=>(e++,1===r.length?`coords * strides[${s}] + begin[${s}]`:`coords[${e-1}] * strides[${s}] + begin[${s}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${s});\n\n      void main() {\n        ${d} coords = getOutputCoords();\n        setOutput(getX(${n}));\n      }\n    `}}exports.StridedSliceProgram=t;
},{"./shader_compiler":"GECe"}],"dYbW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeBytes=i,exports.TextureManager=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./gpgpu_util"),r=require("./tex_util");class s{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,s){const u=h(t,s),n=a(e,u,s);n in this.freeTextures||(this.freeTextures[n]=[]),n in this.usedTextures||(this.usedTextures[n]=[]);const T=i(e,u,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[n].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=T,this.log();const e=this.freeTextures[n].shift();return this.usedTextures[n].push(e),e}let x;return u===r.PhysicalTextureType.PACKED_2X2_FLOAT32?x=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.PACKED_2X2_FLOAT16?x=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.UNPACKED_FLOAT32?x=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.UNPACKED_FLOAT16?x=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):u===r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE&&(x=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[n].push(x),this.numUsedTextures++,this._numBytesAllocated+=T,this.log(),x}releaseTexture(t,r,s,u){if(null==this.freeTextures)return;const n=h(s,u),T=a(r,n,u);T in this.freeTextures||(this.freeTextures[T]=[]);const x=i(r,n,this.gpgpu.gl,this.gpgpu.textureConfig,u),o=(0,e.env)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(t),this._numBytesAllocated-=x):(this.freeTextures[T].push(t),this.numFreeTextures++,this._numBytesFree+=x),this.numUsedTextures--;const l=this.usedTextures[T],c=l.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});for(const e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function u(e,t){const r=e;if(t===r.R32F)return 4;if(t===r.R16F)return 2;if(t===r.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===r.RGBA16F)return 8;throw new Error(`Unknown internal format ${t}`)}function i(e,t,s,i,T){const h=n(t,i);let a;if(T){const[t,s]=(0,r.getPackedMatrixTextureShapeWidthHeight)(e[0],e[1]);a=t*s}else{const[t,s]=(0,r.getUnpackedMatrixTextureShapeWidthHeight)(e[0],e[1]);a=t*s}return a*u(s,h)}function n(e,s){switch(e){case r.PhysicalTextureType.PACKED_2X2_FLOAT32:return(0,t.getInternalFormatForPackedMatrixTexture)(s);case r.PhysicalTextureType.PACKED_2X2_FLOAT16:return(0,t.getInternalFormatForFloat16PackedMatrixTexture)(s);case r.PhysicalTextureType.UNPACKED_FLOAT32:return(0,t.getInternalFormatForFloat32MatrixTexture)(s);case r.PhysicalTextureType.UNPACKED_FLOAT16:return(0,t.getInternalFormatForFloat16MatrixTexture)(s);case r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE:return(0,t.getInternalFormatForUnsignedBytesMatrixTexture)(s);default:throw new Error(`Unknown physical texture type ${e}`)}}function T(t){return(0,e.env)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?r.PhysicalTextureType.PACKED_2X2_FLOAT32:r.PhysicalTextureType.UNPACKED_FLOAT32:t?r.PhysicalTextureType.PACKED_2X2_FLOAT16:r.PhysicalTextureType.UNPACKED_FLOAT16}function h(e,t){if(e===r.TextureUsage.UPLOAD)return r.PhysicalTextureType.PACKED_2X2_FLOAT32;if(e===r.TextureUsage.RENDER||null==e)return T(t);if(e===r.TextureUsage.DOWNLOAD||e===r.TextureUsage.PIXELS)return r.PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function a(e,t,r){return`${e[0]}_${e[1]}_${t}_${r}`}exports.TextureManager=s;
},{"@tensorflow/tfjs-core":"tKjQ","./gpgpu_util":"XLbs","./tex_util":"K2eT"}],"v7OW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TileProgram=void 0;var e=require("./shader_compiler");class r{constructor(r,s){this.variableNames=["A"];const o=new Array(r.length);for(let e=0;e<o.length;e++)o[e]=r[e]*s[e];this.outputShape=o,this.rank=o.length;const n=(0,e.getCoordsDataType)(this.rank),i=t(r);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function t(e){const r=e.length;if(r>5)throw Error(`Tile for rank ${r} is not yet supported`);if(1===r)return`imod(resRC, ${e[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${t[o]}, ${e[o]})`);return s.join()}exports.TileProgram=r;
},{"./shader_compiler":"GECe"}],"f9fL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STEP=l,exports.CLONE=exports.LOGICAL_NOT=exports.RECIPROCAL=exports.ERF=exports.ATANH=exports.ACOSH=exports.ASINH=exports.TANH=exports.COSH=exports.SINH=exports.ATAN=exports.ACOS=exports.ASIN=exports.SOFTPLUS=exports.SIGMOID=exports.RSQRT=exports.SQRT=exports.LOG1P=exports.LOG=exports.EXPM1=exports.EXP=exports.ROUND=exports.IS_FINITE=exports.IS_INF=exports.IS_NAN=exports.SIGN=exports.FLOOR=exports.CEIL=exports.NEG=exports.SELU=exports.ELU=exports.RELU6=exports.RELU=exports.ABS=exports.LINEAR=exports.UnaryOpProgram=void 0;var t=require("@tensorflow/tfjs-core");class n{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.userCode=`\n      float unaryOperation(float x) {\n        ${n}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpProgram=n;const e="if (isnan(x)) return x;",r="return x;";exports.LINEAR=r;const o="return abs(x);";exports.ABS=o;const s=e+"\n  return (x < 0.0) ? 0.0 : x;\n";exports.RELU=s;const x=e+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";exports.RELU6=x;const a="return (x >= 0.0) ? x : (exp(x) - 1.0);";exports.ELU=a;const p=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${t.backend_util.SELU_SCALEALPHA};\n  float scale = ${t.backend_util.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`;function l(t=0){return e+`\n    return x > 0.0 ? 1.0 : float(${t});\n  `}exports.SELU=p;const u="return -x;";exports.NEG=u;const i="return ceil(x);";exports.CEIL=i;const c="return floor(x);";exports.FLOOR=c;const f="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n";exports.SIGN=f;const A="return float(isnan(x));";exports.IS_NAN=A;const N="return float(isinf(x));";exports.IS_INF=N;const S="return float(!isnan(x) && !isinf(x));";exports.IS_FINITE=S;const E="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n";exports.ROUND=E;const O="return exp(x);";exports.EXP=O;const L="return exp(x) - 1.0;";exports.EXPM1=L;const _="if (x < 0.0) return NAN;\n  return log(x);";exports.LOG=_;const I="return log(1.0 + x);";exports.LOG1P=I;const b="return sqrt(x);";exports.SQRT=b;const d="return inversesqrt(x);";exports.RSQRT=d;const R="return 1.0 / (1.0 + exp(-1.0 * x));";exports.SIGMOID=R;const g="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n";exports.SOFTPLUS=g;const h=e+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n";exports.ASIN=h;const C=e+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n";exports.ACOS=C;const F=e+"\n  return atan(x);\n";exports.ATAN=F;const T="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n";exports.SINH=T;const P="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n";exports.COSH=P;const m="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n";exports.TANH=m;const U=e+"return log(x + sqrt(x * x + 1.0));";exports.ASINH=U;const G=e+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));";exports.ACOSH=G;const H=e+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;";exports.ATANH=H;const k=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${t.backend_util.ERF_P};\n  float a1 = ${t.backend_util.ERF_A1};\n  float a2 = ${t.backend_util.ERF_A2};\n  float a3 = ${t.backend_util.ERF_A3};\n  float a4 = ${t.backend_util.ERF_A4};\n  float a5 = ${t.backend_util.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`;exports.ERF=k;const $="return 1.0 / x;";exports.RECIPROCAL=$;const y="return float(!(x >= 1.0));";exports.LOGICAL_NOT=y;const v="return x;";exports.CLONE=v;
},{"@tensorflow/tfjs-core":"tKjQ"}],"biR8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnaryOpPackedProgram=exports.ELU=exports.RELU6=exports.RELU=exports.LOG=exports.LINEAR=void 0;const e="return x;";exports.LINEAR=e;const r="\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n";exports.LOG=r;const s="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";exports.RELU=s;const t="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n";exports.RELU6=t;const n="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n";exports.ELU=n;class a{constructor(e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${r}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}exports.UnaryOpPackedProgram=a;
},{}],"EQmp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UnpackProgram=void 0;var e=require("./packing_util"),t=require("./shader_compiler");class r{constructor(r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=r;const s=r.length,n=(0,e.getChannels)("rc",s),o=(0,t.getCoordsDataType)(s),a=(0,e.getSourceCoords)(s,n),c=n.slice(-2),p=s<=1?"rc":`vec2(${c.join(",")})`;this.userCode=`\n      void main() {\n        ${o} rc = getOutputCoords();\n        vec4 packedInput = getA(${a});\n\n        setOutput(getChannel(packedInput, ${p}));\n      }\n    `}}exports.UnpackProgram=r;
},{"./packing_util":"ioBk","./shader_compiler":"GECe"}],"ICWE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBinaryCache=Ie,exports.MathBackendWebGL=exports.MATMUL_SHARED_DIM_THRESHOLD=exports.EPSILON_FLOAT16=exports.EPSILON_FLOAT32=void 0,require("./flags_webgl");var e=me(require("@tensorflow/tfjs-core")),t=require("./kernel_utils/shared"),n=require("./addn_gpu"),r=require("./addn_packed_gpu"),a=require("./argminmax_gpu"),s=require("./argminmax_packed_gpu"),i=require("./avg_pool_backprop_gpu"),o=me(require("./binaryop_gpu")),p=me(require("./binaryop_packed_gpu")),u=require("./canvas_util"),h=require("./clip_gpu"),l=require("./clip_packed_gpu"),c=require("./complex_abs_gpu"),d=require("./conv_backprop_gpu"),m=require("./conv_backprop_gpu_depthwise"),g=require("./conv_gpu"),P=require("./conv_gpu_depthwise"),A=require("./conv_packed_gpu_depthwise"),_=require("./crop_and_resize_gpu"),R=require("./cumsum_gpu"),O=require("./decode_matrix_gpu"),y=require("./decode_matrix_packed_gpu"),f=require("./depth_to_space_gpu"),I=require("./diag_gpu"),k=require("./encode_float_gpu"),w=require("./encode_float_packed_gpu"),E=require("./encode_matrix_gpu"),B=require("./encode_matrix_packed_gpu"),x=require("./fill_gpu"),D=require("./gather_gpu"),C=require("./gather_nd_gpu"),S=require("./gpgpu_context"),L=me(require("./gpgpu_math")),T=require("./im2col_packed_gpu"),v=require("./lrn_gpu"),U=require("./lrn_grad_gpu"),b=require("./lrn_packed_gpu"),N=require("./max_pool_backprop_gpu"),M=require("./mulmat_packed_gpu"),W=require("./multinomial_gpu"),G=require("./onehot_gpu"),q=require("./pack_gpu"),F=require("./pad_gpu"),z=require("./pad_packed_gpu"),K=require("./pool_gpu"),H=require("./reduce_gpu"),Y=require("./reshape_packed_gpu"),V=require("./resize_bilinear_backprop_gpu"),Q=require("./resize_bilinear_gpu"),X=require("./resize_bilinear_packed_gpu"),j=require("./resize_nearest_neighbor_backprop_gpu"),$=require("./resize_nearest_neighbor_gpu"),J=require("./reverse_gpu"),Z=require("./reverse_packed_gpu"),ee=require("./scatter_gpu"),te=require("./segment_gpu"),ne=require("./select_gpu"),re=require("./slice_gpu"),ae=require("./slice_packed_gpu"),se=require("./strided_slice_gpu"),ie=me(require("./tex_util")),oe=require("./texture_manager"),pe=require("./tile_gpu"),ue=me(require("./unaryop_gpu")),he=me(require("./unaryop_packed_gpu")),le=require("./unpack_gpu"),ce=me(require("./webgl_util"));function de(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return de=function(){return e},e}function me(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=de();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}const{segment_util:ge}=e.backend_util,Pe=e.kernel_impls.split,Ae=e.kernel_impls.tile,_e=e.kernel_impls.topkImpl,Re=e.kernel_impls.whereImpl,Oe=1e-7;exports.EPSILON_FLOAT32=Oe;const ye=1e-4;exports.EPSILON_FLOAT16=ye;const fe={};function Ie(e){return e in fe?fe[e]:(fe[e]={},fe[e])}function ke(e,t=!1){if("linear"===e)return t?he.LINEAR:ue.LINEAR;if("relu"===e)return t?he.RELU:ue.RELU;if("elu"===e)return t?he.ELU:ue.ELU;if("relu6"===e)return t?he.RELU6:ue.RELU6;if("prelu"===e)return t?p.PRELU:o.PRELU;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}const we=128,Ee=600;function Be(){return null==(0,e.env)().global.screen?1024:(0,e.env)().global.screen.height*(0,e.env)().global.screen.width*window.devicePixelRatio*Ee/1024/1024}const xe=1e3;exports.MATMUL_SHARED_DIM_THRESHOLD=xe;class De extends e.KernelBackend{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!(0,e.env)().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){const t=(0,u.getWebGLContext)((0,e.env)().getNumber("WEBGL_VERSION"));this.binaryCache=Ie((0,e.env)().getNumber("WEBGL_VERSION")),this.gpgpu=new S.GPGPUContext(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=t,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;this.textureManager=new oe.TextureManager(this.gpgpu),this.numMBBeforeWarning=Be(),this.texData=new e.DataStorage(this,(0,e.engine)())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(t,n,r){if(((0,e.env)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,e.env)().getBool("DEBUG"))&&this.checkNumericalProblems(t),"complex64"===r&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={};return this.texData.set(a,{shape:n,dtype:r,values:t,usage:ie.TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0}),a}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(t,n,r,a){if((0,e.env)().getBool("DEBUG")&&this.checkNumericalProblems(n),"complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:a,values:n,usage:ie.TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0})}disposeIntermediateTensorInfo(e){const t=e.dataId;if(this.texData.has(t)){const e=this.texData.get(t);e.refCount--,e.refCount<1&&this.disposeData(t)}}readSync(t){const n=this.texData.get(t),{values:r,dtype:a,complexTensorInfos:s,slice:i,shape:o,isPacked:p}=n;if(null!=i){let e;e=p?new he.UnaryOpPackedProgram(o,ue.CLONE):new ue.UnaryOpProgram(o,ue.CLONE);const n=this.runWebGLProgram(e,[{dataId:t,shape:o,dtype:a}],a),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=r)return this.convertAndCacheOnCPU(t);if("string"===a)return r;const u=null!=this.activeTimers;let h,l;if(u&&(h=e.util.now()),"complex64"===a){const t=this.readSync(s.real.dataId),n=this.readSync(s.imag.dataId);l=e.backend_util.mergeRealAndImagArrays(t,n)}else l=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=e.util.now()-h),this.convertAndCacheOnCPU(t,l)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const n=this.texData.get(t),{values:r,shape:a,slice:s,dtype:i,complexTensorInfos:o,isPacked:p}=n;if(null!=s){let e;e=p?new he.UnaryOpPackedProgram(a,ue.CLONE):new ue.UnaryOpProgram(a,ue.CLONE);const n=this.runWebGLProgram(e,[{dataId:t,shape:a,dtype:i}],i),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=r)return this.convertAndCacheOnCPU(t);if(!(0,e.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,e.env)().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,h,l=null;if("complex64"!==i&&(0,e.env)().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(t);const e=this.texData.get(u.dataId);l=this.gpgpu.createBufferFromTexture(e.texture,...ie.getDenseTexShape(a))}if(this.pendingRead.set(t,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){const t=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),n=t[0],r=t[1];h=e.backend_util.mergeRealAndImagArrays(n,r)}else if(null==l)h=this.getValuesFromTexture(t);else{const t=e.util.sizeFromShape(a);h=this.gpgpu.downloadFloat32MatrixFromBuffer(l,t)}null!=u&&this.disposeIntermediateTensorInfo(u);const c=this.convertAndCacheOnCPU(t,h),d=this.pendingRead.get(t);return this.pendingRead.delete(t),d.forEach(e=>e(c)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),c}checkNumericalProblems(t){if(null!=t)for(let n=0;n<t.length;n++){const r=t[n];if(!ce.canBeRepresented(r)){if((0,e.env)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${r} cannot be represented with your `+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error(`The value ${r} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:n,dtype:r,isPacked:a}=this.texData.get(t),s=e.util.sizeFromShape(n);if((0,e.env)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const e=this.decode(t),r=this.texData.get(e.dataId),a=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...ie.getDenseTexShape(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(e),a}const i=(0,e.env)().getBool("WEBGL_PACK")&&!0===a,o=i?ce.getShapeAs3D(n):n,p=i?new w.EncodeFloatPackedProgram(o):new k.EncodeFloatProgram(o),u=this.runWebGLProgram(p,[{shape:o,dtype:r,dataId:t}],"float32"),h=this.texData.get(u.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),l}async time(t){const n=this.activeTimers,r=[];let a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t();const s=e.util.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=e.util.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=n,a&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if((0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(s);o.kernelMs=e.util.sum(t),o.getExtraProfileInfo=(()=>t.map((e,t)=>({name:i[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", "))}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:e.util.now(),endMs:null}}endTimer(t){return(0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=e.util.now(),t)}async getQueryTime(t){if((0,e.env)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(e){if(this.pendingDisposal.has(e))return;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(!this.texData.has(e))return;if(this.texData.get(e).complexParentRefCount>0)return void this.texData.get(e).refCount--;this.releaseGPUData(e);const{complexTensorInfos:t}=this.texData.get(e);null!=t&&(this.texData.get(t.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.real),this.texData.get(t.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.imag)),this.texData.delete(e)}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:a,isPacked:s,slice:i}=this.texData.get(e),o=i&&i.origDataId||e,p=this.dataRefCount.get(o);p>1?this.dataRefCount.set(o,p-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,s)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}getCPUBackend(){return(0,e.env)().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=(0,e.engine)().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(t,n=we){const r=this.getCPUBackend();return this.warnedAboutCPUBackend||null!=r||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=r&&t.every(t=>null==this.texData.get(t.dataId).texture&&e.util.sizeFromShape(t.shape)<n)}getGPGPUContext(){return this.gpgpu}slice(n,r,a){if(this.shouldExecuteOnCPU([n])){const e=(0,t.sliceImplCPU)(this.texData.get(n.dataId).values,r,a,n.shape,n.dtype);return this.makeOutput(a,n.dtype,e)}if(0===e.util.sizeFromShape(a))return(0,e.tensor)([],a,n.dtype);const{isPacked:s}=this.texData.get(n.dataId),i=e.slice_util.isSliceContinous(n.shape,r,a);if(s||!i){const t=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ae.SlicePackedProgram(a):new re.SliceProgram(a),s=t.getCustomSetupFunc(r);return this.compileAndRun(t,[n],null,s)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,a)}shallowSlice(t,n,r){const a=this.texData.get(t.dataId),s=this.makeOutput(r,t.dtype),i=this.texData.get(s.dataId);Object.assign(i,a),i.shape=r,i.dtype=t.dtype;let o=e.slice_util.computeFlatOffset(n,t.strides);a.slice&&(o+=a.slice.flatOffset),i.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||t.dataId};const p=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,p+1),s}stridedSlice(t,n,r,a){const s=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.stridedSlice(t,n,r,a));if(s)return s;const i=e.slice_util.computeOutShape(n,r,a);if(i.some(e=>0===e))return(0,e.tensor)([],i);const o=new se.StridedSliceProgram(n,a,i);return this.compileAndRun(o,[t])}reverse(t,n){const r=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Z.ReversePackedProgram(t.shape,n):new J.ReverseProgram(t.shape,n);return this.compileAndRun(r,[t])}neg(t){const n=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.neg(t));if(n)return n;if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,ue.NEG,t.dtype);const r=new ue.UnaryOpProgram(t.shape,ue.NEG);return this.compileAndRun(r,[t])}batchMatMul(t,n,r,a){const s=r?t.shape[2]:t.shape[1],i=a?n.shape[1]:n.shape[2],o=r?t.shape[1]:t.shape[2],p=Math.max(t.shape[0],n.shape[0]);if((1===s||1===i)&&o>xe){r&&(t=(0,e.transpose)(t,[0,2,1])),a&&(n=(0,e.transpose)(n,[0,2,1]));const s=1===i?t:t.as3D(p,o,1),u=1===i?2:1,h=1===i?n.as3D(p,1,o):n;return e.mul(s,h).sum(u,!0)}const u=(0,e.upcastType)(t.dtype,n.dtype),h=new M.MatMulPackedProgram(t.shape,n.shape,[p,s,i],r,a);return this.compileAndRun(h,[t,n],u)}fusedBatchMatMul({a:t,b:n,transposeA:r,transposeB:a,bias:s,activation:i,preluActivationWeights:o}){const p=r?t.shape[2]:t.shape[1],u=a?n.shape[1]:n.shape[2],h=Math.max(t.shape[0],n.shape[0]),l=(0,e.upcastType)(t.dtype,n.dtype),c=null!=s,d=null!=o,m=i?ke(i,!0):null,g=new M.MatMulPackedProgram(t.shape,n.shape,[h,p,u],r,a,c,m,d),P=[t,n];return s&&P.push(s),o&&P.push(o),this.compileAndRun(g,P,l)}localResponseNormalization4D(t,n,r,a,s){const i=(0,e.env)().getBool("WEBGL_PACK_NORMALIZATION")?new b.LRNPackedProgram(t.shape,n,r,a,s):new v.LRNProgram(t.shape,n,r,a,s);return this.compileAndRun(i,[t])}LRNGrad(e,t,n,r,a,s,i){const o=new U.LRNGradProgram(t.shape,r,a,s,i);return this.compileAndRun(o,[t,n,e])}tile(t,n){if("string"===t.dtype){const r=this.readSync(t.dataId).map(t=>e.util.decodeString(t)),a=(0,e.buffer)(t.shape,t.dtype,r);return Ae(a,n)}const r=new pe.TileProgram(t.shape,n);return this.compileAndRun(r,[t])}pad(t,n,r){const a=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new z.PadPackedProgram(t.shape,n,r):new F.PadProgram(t.shape,n,r);return this.compileAndRun(a,[t])}gather(e,t,n){const r=this.tryRunOnCpuOrThrow([e,t],()=>this.cpuBackend.gather(e,t,n));if(r)return r;const a=new D.GatherProgram(e.shape,t.size,n);return this.compileAndRun(a,[e,t])}batchToSpaceND(t,n,r){e.util.assert(t.rank<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=n.reduce((e,t)=>e*t),s=e.backend_util.getReshaped(t.shape,n,a),i=e.backend_util.getPermuted(s.length,n.length),o=e.backend_util.getReshapedPermuted(t.shape,n,a),p=e.backend_util.getSliceBeginCoords(r,n.length),u=e.backend_util.getSliceSize(o,r,n.length);return(0,e.transpose)(t.reshape(s),i).reshape(o).slice(p,u)}spaceToBatchND(t,n,r){e.util.assert(t.rank<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=n.reduce((e,t)=>e*t),s=[[0,0]];s.push(...r);for(let e=1+n.length;e<t.shape.length;++e)s.push([0,0]);const i=t.pad(s),o=e.backend_util.getReshaped(i.shape,n,a,!1),p=e.backend_util.getPermuted(o.length,n.length,!1),u=e.backend_util.getReshapedPermuted(i.shape,n,a,!1),h=(0,e.transpose)(i.reshape(o),p);return(0,e.reshape)(h,u)}reduce(t,n,r){const a=t.shape[0],s=t.shape[1],i=e.backend_util.computeOptimalWindowSize(s),o={windowSize:i,inSize:s,batchSize:a,outSize:Math.ceil(s/i)},p=new H.ReduceProgram(o,n),u=this.compileAndRun(p,[t],r);return 1===u.shape[1]?u:this.reduce(u,n,r)}argReduce(t,n,r=null){let s=t.shape[0],i=t.shape[1];null!=r&&(s=r.shape[0],i=r.shape[1]);const o=e.backend_util.computeOptimalWindowSize(i),p={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},u=new a.ArgMinMaxProgram(p,n,null==r),h=[t];null!=r&&h.push(r);const l=this.compileAndRun(u,h,"int32");return 1===l.shape[1]?l:this.argReduce(t,n,l)}argReducePacked(t,n,r=null){const a=null!=r?r.shape:t.shape,i=a[a.length-1],o=e.backend_util.computeOptimalWindowSize(i),p=new s.ArgMinMaxPackedProgram(a,o,n,null==r),u=null==r?[t]:[t,r],h=this.compileAndRun(p,u,"int32");return h.rank===t.rank?this.argReducePacked(t,n,h):h}sum(t,n){e.backend_util.assertAxesAreInnerMostDims("sum",n,t.rank);const[r,a]=e.backend_util.computeOutAndReduceShapes(t.shape,n),s=e.util.sizeFromShape(a),i=t.as2D(-1,s),o=e.sumOutType(t.dtype);return this.reduce(i,"sum",o).reshape(r)}prod(t,n){const r=this.tryRunOnCpuOrThrow([t],()=>this.cpuBackend.prod(t,n));if(r)return r;const[a,s]=e.backend_util.computeOutAndReduceShapes(t.shape,n),i=e.util.sizeFromShape(s),o=t.as2D(-1,i),p=e.sumOutType(t.dtype);return this.reduce(o,"prod",p).reshape(a)}unsortedSegmentSum(t,n,r){let a=0;const s=e.backend_util.getAxesPermutation([a],t.rank);let i=t;null!=s&&(i=(0,e.transpose)(t,s),a=e.backend_util.getInnerMostAxes(1,t.rank)[0]);const o=ge.computeOutShape(i.shape,a,r),p=e.util.sizeFromShape([i.shape[a]]),u=i.as2D(-1,p),h=e.sumOutType(t.dtype);let l=this.segOpCompute(u,"unsortedSegmentSum",n,h,r).reshape(o);return null!=s&&(l=(0,e.transpose)(l,e.backend_util.getUndoAxesPermutation(s))),l}segOpCompute(t,n,r,a,s){const i=t.shape[0],o=t.shape[1],p=ge.segOpComputeOptimalWindowSize(o,s),u={windowSize:p,inSize:o,batchSize:i,numSegments:s},h=new te.SegmentOpProgram(u,n),l=this.compileAndRun(h,[t,r],a);return l.shape[1]===s?l:(r=(0,e.range)(0,s).tile([o/p]),this.segOpCompute(l,n,r,a,s))}argMinMaxReduce(t,n,r){const a=[n];if(e.backend_util.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.rank),!(0,e.env)().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){const[n,s]=e.backend_util.computeOutAndReduceShapes(t.shape,a),i=e.util.sizeFromShape(s),o=t.as2D(-1,i);return this.argReduce(o,r).reshape(n)}return this.argReducePacked(t,r)}argMin(e,t){return this.argMinMaxReduce(e,t,"min")}argMax(e,t){return this.argMinMaxReduce(e,t,"max")}cumsum(e,t,n,r){if(t!==e.rank-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${e.rank-1} `+`but got axis=${t}`);const a=e.shape[t];let s=e;for(let i=0;i<=Math.ceil(Math.log2(a))-1;i++){const t=new R.CumSumProgram(e.shape,!1,r),n=t.getCustomSetupFunc(i),a=s;s=this.compileAndRun(t,[s],s.dtype,n),a.dispose()}if(n){const t=new R.CumSumProgram(e.shape,n,r),a=s;s=this.compileAndRun(t,[s]),a.dispose()}return s}equal(t,n){if((0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,p.EQUAL,"bool");const r=new o.BinaryOpProgram(o.EQUAL,t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")}less(t,n){const r=this.tryRunOnCpuOrThrow([t,n],()=>this.cpuBackend.less(t,n));if(r)return r;if((0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,p.LESS,"bool");const a=new o.BinaryOpProgram(o.LESS,t.shape,n.shape);return this.compileAndRun(a,[t,n],"bool")}lessEqual(t,n){if((0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,p.LESS_EQUAL,"bool");const r=new o.BinaryOpProgram(o.LESS_EQUAL,t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")}greater(t,n){const r=this.tryRunOnCpuOrThrow([t,n],()=>this.cpuBackend.greater(t,n));if(r)return r;if((0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,p.GREATER,"bool");const a=new o.BinaryOpProgram(o.GREATER,t.shape,n.shape);return this.compileAndRun(a,[t,n],"bool")}greaterEqual(t,n){if((0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,p.GREATER_EQUAL,"bool");const r=new o.BinaryOpProgram(o.GREATER_EQUAL,t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")}logicalNot(e){const t=new ue.UnaryOpProgram(e.shape,ue.LOGICAL_NOT);return this.compileAndRun(t,[e])}logicalAnd(t,n){if((0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,p.LOGICAL_AND,"bool");const r=new o.BinaryOpProgram(o.LOGICAL_AND,t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")}logicalOr(t,n){if((0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,p.LOGICAL_OR,"bool");const r=new o.BinaryOpProgram(o.LOGICAL_OR,t.shape,n.shape);return this.compileAndRun(r,[t,n],"bool")}select(t,n,r){const a=new ne.SelectProgram(t.rank,n.shape,n.rank);return this.compileAndRun(a,[t,n,r],(0,e.upcastType)(n.dtype,r.dtype))}where(t){e.backend_util.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return Re(t.shape,n)}topk(e,t,n){const r=e.dataSync();return _e(r,e.shape,e.dtype,t,n)}min(t,n){e.backend_util.assertAxesAreInnerMostDims("min",n,t.rank);const[r,a]=e.backend_util.computeOutAndReduceShapes(t.shape,n),s=e.util.sizeFromShape(a),i=t.as2D(-1,s);return this.reduce(i,"min",i.dtype).reshape(r)}minimum(t,n){const r=this.tryRunOnCpuOrThrow([t,n],()=>this.cpuBackend.minimum(t,n));if(r)return r;const a=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p.BinaryOpPackedProgram(p.MIN,t.shape,n.shape):new o.BinaryOpProgram(o.MIN,t.shape,n.shape);return this.compileAndRun(a,[t,n])}mod(t,n){const r=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p.BinaryOpPackedProgram(p.MOD,t.shape,n.shape):new o.BinaryOpProgram(o.MOD,t.shape,n.shape);return this.compileAndRun(r,[t,n])}maximum(t,n){const r=this.tryRunOnCpuOrThrow([t,n],()=>this.cpuBackend.maximum(t,n));if(r)return r;const a=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p.BinaryOpPackedProgram(p.MAX,t.shape,n.shape):new o.BinaryOpProgram(o.MAX,t.shape,n.shape);return this.compileAndRun(a,[t,n])}all(t,n){e.backend_util.assertAxesAreInnerMostDims("all",n,t.rank);const[r,a]=e.backend_util.computeOutAndReduceShapes(t.shape,n),s=e.util.sizeFromShape(a),i=t.as2D(-1,s);return this.reduce(i,"all",i.dtype).reshape(r)}any(t,n){e.backend_util.assertAxesAreInnerMostDims("any",n,t.rank);const[r,a]=e.backend_util.computeOutAndReduceShapes(t.shape,n),s=e.util.sizeFromShape(a),i=t.as2D(-1,s);return this.reduce(i,"any",i.dtype).reshape(r)}floorDiv(t,n){const r=o.INT_DIV;if((0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,n,p.INT_DIV,"int32");const a=new o.BinaryOpProgram(r,t.shape,n.shape);return this.compileAndRun(a,[t,n],"int32")}packedUnaryOp(e,t,n){const r=new he.UnaryOpPackedProgram(e.shape,t);return this.compileAndRun(r,[e],n)}packedBinaryOp(e,t,n,r,a=!1){const s=new p.BinaryOpPackedProgram(n,e.shape,t.shape,a);return this.compileAndRun(s,[e,t],r)}makeComplexComponentTensorInfo(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}addN(t){if(1===t.length)return t[0];if(t.length>(0,e.env)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}const a=t.map(e=>e.dtype).reduce((t,n)=>(0,e.upcastType)(t,n)),s=t.map(e=>e.shape),i=(0,e.env)().getBool("WEBGL_PACK")?new r.AddNPackedProgram(t[0].shape,s):new n.AddNProgram(t[0].shape,s);return this.compileAndRun(i,t,a)}pow(t,n){const r=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p.BinaryOpPackedProgram(p.POW,t.shape,n.shape):new o.BinaryOpProgram(o.POW,t.shape,n.shape),a=(0,e.upcastType)(t.dtype,n.dtype);return this.compileAndRun(r,[t,n],a)}ceil(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.ceilImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,ue.CEIL,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.CEIL);return this.compileAndRun(r,[n])}floor(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.floorImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,ue.FLOOR,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.FLOOR);return this.compileAndRun(r,[n])}sign(e){const t=new ue.UnaryOpProgram(e.shape,ue.SIGN);return this.compileAndRun(t,[e])}isNaN(e){const t=new ue.UnaryOpProgram(e.shape,ue.IS_NAN);return this.compileAndRun(t,[e],"bool")}isInf(e){const t=new ue.UnaryOpProgram(e.shape,ue.IS_INF);return this.compileAndRun(t,[e],"bool")}isFinite(e){const t=new ue.UnaryOpProgram(e.shape,ue.IS_FINITE);return this.compileAndRun(t,[e],"bool")}round(e){const t=new ue.UnaryOpProgram(e.shape,ue.ROUND);return this.compileAndRun(t,[e])}exp(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.expImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,ue.EXP,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.EXP);return this.compileAndRun(r,[n])}expm1(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.expm1ImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,ue.EXPM1,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.EXPM1);return this.compileAndRun(r,[n])}softmax(t,n){const r=e.util.parseAxisParam([n],t.shape),a=(0,e.max)(t,r),s=e.backend_util.expandShapeToKeepDim(a.shape,r),i=e.sub(t,a.reshape(s)),o=this.exp(i),p=this.sum(o,r).reshape(s);return(0,e.div)(o,p)}log(n){if(this.shouldExecuteOnCPU([n])){const e=(0,t.logImplCPU)(this.texData.get(n.dataId).values,n.dtype);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,he.LOG,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.LOG);return this.compileAndRun(r,[n])}log1p(e){const t=new ue.UnaryOpProgram(e.shape,ue.LOG1P);return this.compileAndRun(t,[e])}sqrt(e){const t=new ue.UnaryOpProgram(e.shape,ue.SQRT);return this.compileAndRun(t,[e])}rsqrt(e){if(this.shouldExecuteOnCPU([e])){const n=(0,t.rsqrtImplCPU)(this.texData.get(e.dataId).values,e.dtype);return this.makeOutput(e.shape,e.dtype,n)}const n=new ue.UnaryOpProgram(e.shape,ue.RSQRT);return this.compileAndRun(n,[e])}reciprocal(e){const t=new ue.UnaryOpProgram(e.shape,ue.RECIPROCAL);return this.compileAndRun(t,[e])}relu(t){let n;return n=(0,e.env)().getBool("WEBGL_PACK")?new he.UnaryOpPackedProgram(t.shape,he.RELU):new ue.UnaryOpProgram(t.shape,ue.RELU),this.compileAndRun(n,[t])}relu6(t){let n;return n=(0,e.env)().getBool("WEBGL_PACK")?new he.UnaryOpPackedProgram(t.shape,he.RELU6):new ue.UnaryOpProgram(t.shape,ue.RELU6),this.compileAndRun(n,[t])}prelu(t,n){const r=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p.BinaryOpPackedProgram(p.PRELU,t.shape,n.shape):new o.BinaryOpProgram(o.PRELU,t.shape,n.shape);return this.compileAndRun(r,[t,n])}elu(t){if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,he.ELU,t.dtype);const n=new ue.UnaryOpProgram(t.shape,ue.ELU);return this.compileAndRun(n,[t])}eluDer(t,n){const r=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p.BinaryOpPackedProgram(p.ELU_DER,t.shape,n.shape):new o.BinaryOpProgram(o.ELU_DER,t.shape,n.shape);return this.compileAndRun(r,[t,n])}selu(e){const t=new ue.UnaryOpProgram(e.shape,ue.SELU);return this.compileAndRun(t,[e])}clip(t,n,r){let a;const s=(a=(0,e.env)().getBool("WEBGL_PACK_CLIP")?new l.ClipPackedProgram(t.shape):new h.ClipProgram(t.shape)).getCustomSetupFunc(n,r);return this.compileAndRun(a,[t],null,s)}abs(n){if(this.shouldExecuteOnCPU([n])&&"complex64"!==n.dtype){const e=(0,t.simpleAbsImplCPU)(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,e)}if((0,e.env)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,ue.ABS,n.dtype);const r=new ue.UnaryOpProgram(n.shape,ue.ABS);return this.compileAndRun(r,[n])}complexAbs(e){const t=this.texData.get(e.dataId),n=new c.ComplexAbsProgram(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensorInfos.real),this.makeComplexComponentTensorInfo(e,t.complexTensorInfos.imag)];return this.compileAndRun(n,r)}sigmoid(e){const t=new ue.UnaryOpProgram(e.shape,ue.SIGMOID);return this.compileAndRun(t,[e])}softplus(e){const t=new ue.UnaryOpProgram(e.shape,ue.SOFTPLUS);return this.compileAndRun(t,[e])}asin(e){const t=new ue.UnaryOpProgram(e.shape,ue.ASIN);return this.compileAndRun(t,[e])}acos(e){const t=new ue.UnaryOpProgram(e.shape,ue.ACOS);return this.compileAndRun(t,[e])}atan(e){const t=new ue.UnaryOpProgram(e.shape,ue.ATAN);return this.compileAndRun(t,[e])}sinh(e){const t=new ue.UnaryOpProgram(e.shape,ue.SINH);return this.compileAndRun(t,[e])}cosh(e){const t=new ue.UnaryOpProgram(e.shape,ue.COSH);return this.compileAndRun(t,[e])}tanh(e){const t=new ue.UnaryOpProgram(e.shape,ue.TANH);return this.compileAndRun(t,[e])}asinh(e){const t=new ue.UnaryOpProgram(e.shape,ue.ASINH);return this.compileAndRun(t,[e])}acosh(e){const t=new ue.UnaryOpProgram(e.shape,ue.ACOSH);return this.compileAndRun(t,[e])}atanh(e){const t=new ue.UnaryOpProgram(e.shape,ue.ATANH);return this.compileAndRun(t,[e])}erf(e){const t=new ue.UnaryOpProgram(e.shape,ue.ERF);return this.compileAndRun(t,[e])}step(e,t){const n=new ue.UnaryOpProgram(e.shape,ue.STEP(t));return this.compileAndRun(n,[e])}conv2dByMatMul(t,n,r,a,s,i){const o=t.shape,p=this.texData.get(t.dataId),u=r.inChannels,h=o[0]*o[1]*o[2],l=r.outChannels,c="channelsLast"===r.dataFormat,d=(1===h||1===l)&&u>xe,m=o[2]%2!=0&&!!p.isPacked;if(d||!(0,e.env)().getBool("WEBGL_LAZILY_UNPACK")||!(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){const p=c?o[0]*o[1]*o[2]:o[0]*o[2]*o[3],u=(0,e.reshape)(t,[1,p,r.inChannels]),h=(0,e.reshape)(n,[1,r.inChannels,r.outChannels]),l=this.fusedBatchMatMul({a:u,b:h,transposeA:!1,transposeB:!1,bias:a,activation:s,preluActivationWeights:i});return(0,e.reshape)(l,r.outShape)}const g=c?o[0]*o[1]*(o[2]+1):o[0]*o[2]*(o[3]+1),P={dataId:t.dataId,shape:[1,g,r.inChannels],dtype:t.dtype},A=p.shape;p.shape=p.shape.slice(),p.shape[p.shape.length-2]++,e.util.assert(ce.isReshapeFree(p.shape,P.shape),()=>`packed reshape ${p.shape} to ${P.shape} isn't free`);const _=(0,e.reshape)(n,[1,r.inChannels,r.outChannels]),R=this.fusedBatchMatMul({a:P,b:_,transposeA:!1,transposeB:!1,bias:a,activation:s,preluActivationWeights:i}),O=this.texData.get(R.dataId);return e.util.assert(O.isPacked,()=>"batchMatMul result is expected to be packed"),p.shape=A,O.shape=r.outShape,(0,e.engine)().makeTensorFromDataId(R.dataId,r.outShape,R.dtype)}conv2dWithIm2Row(e,t,n,r,a,s){const{filterWidth:i,filterHeight:o,inChannels:p,outWidth:u,outHeight:h,dataFormat:l}=n,c="channelsLast"===l,d=i*o*p,m=h*u,g=[d,m],P=e.squeeze([0]),A=t.reshape([1,d,-1]),_=new T.Im2ColPackedProgram(g,P.shape,n),R=this.compileAndRun(_,[P]).reshape([1,g[0],g[1]]),O=null!=r,y=null!=s,f=a?ke(a,!0):null,I=new M.MatMulPackedProgram(R.shape,A.shape,[1,m,n.outChannels],!0,!1,O,f,y),k=[R,A];r&&k.push(r),y&&k.push(s);const w=this.compileAndRun(I,k);return c?w.reshape([1,h,u,n.outChannels]):w.reshape([1,n.outChannels,h,u])}fusedConv2d({input:t,filter:n,convInfo:r,bias:a,activation:s,preluActivationWeights:i}){if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,a,s,i);if((0,e.env)().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,a,s,i);const o=null!=a,p=null!=i,u=s?ke(s,!1):null,h=new g.Conv2DProgram(r,o,u,p),l=[t,n];return a&&l.push(a),i&&l.push(i),this.compileAndRun(h,l)}conv2d(t,n,r){if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r);if((0,e.env)().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r);const a=new g.Conv2DProgram(r);return this.compileAndRun(a,[t,n])}conv2dDerInput(e,t,n){const r=new d.Conv2DDerInputProgram(n);return this.compileAndRun(r,[e,t])}conv2dDerFilter(e,t,n){const r=new d.Conv2DDerFilterProgram(n);return this.compileAndRun(r,[e,t])}fusedDepthwiseConv2D({input:t,filter:n,convInfo:r,bias:a,activation:s,preluActivationWeights:i}){const o=(0,e.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1,p=s?ke(s,o):null,u=[t,n],h=null!=a,l=null!=i;let c;return h&&u.push(a),l&&u.push(i),o?(c=new A.DepthwiseConvPacked2DProgram(r,h,p,l),this.compileAndRun(c,u)):(c=new P.DepthwiseConv2DProgram(r,h,p,l),this.compileAndRun(c,u))}depthwiseConv2D(t,n,r){let a;return(0,e.env)().getBool("WEBGL_PACK_DEPTHWISECONV")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1?(a=new A.DepthwiseConvPacked2DProgram(r),this.compileAndRun(a,[t,n])):(a=new P.DepthwiseConv2DProgram(r),this.compileAndRun(a,[t,n]))}depthwiseConv2DDerInput(e,t,n){const r=new m.DepthwiseConv2DDerInputProgram(n);return this.compileAndRun(r,[e,t])}depthwiseConv2DDerFilter(e,t,n){const r=new m.DepthwiseConv2DDerFilterProgram(n);return this.compileAndRun(r,[e,t])}conv3d(e,t,n){const r=new g.Conv3DProgram(n);return this.compileAndRun(r,[e,t])}conv3dDerInput(e,t,n){const r=new d.Conv3DDerInputProgram(n);return this.compileAndRun(r,[e,t])}conv3dDerFilter(e,t,n){const r=new d.Conv3DDerFilterProgram(n);return this.compileAndRun(r,[e,t])}unstack(e,t){const n=e.shape[t],r=new Array(e.rank-1);let a=0;for(let p=0;p<e.rank;p++)p!==t&&(r[a++]=e.shape[p]);const s=new Array(e.rank).fill(0),i=e.shape.slice();i[t]=1;const o=new Array(n);for(let p=0;p<o.length;p++)s[t]=p,o[p]=this.slice(e,s,i).reshape(r);return o}avgPool3d(e,t){const n=new K.Pool3DProgram(t,"avg",!1);return this.compileAndRun(n,[e],"float32")}avgPool3dBackprop(e,t,n){const r=new i.AvgPool3DBackpropProgram(n);return this.compileAndRun(r,[e],t.dtype)}maxPool3d(e,t){const n=new K.Pool3DProgram(t,"max",!1);return this.compileAndRun(n,[e],"float32")}maxPool3dBackprop(e,t,n,r){const a=new K.Pool3DProgram(r,"max",!0),s=this.compileAndRun(a,[t]),i=new N.MaxPool3DBackpropProgram(r),o=this.compileAndRun(i,[e,s],t.dtype);return s.dispose(),o}resizeBilinear(t,n,r,a){const s=(0,e.env)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new X.ResizeBilinearPackedProgram(t.shape,n,r,a):new Q.ResizeBilinearProgram(t.shape,n,r,a);return this.compileAndRun(s,[t],"float32")}resizeBilinearBackprop(e,t,n){const r=new V.ResizeBilinearBackpropProgram(e,t,n);return this.compileAndRun(r,[e])}resizeNearestNeighbor(e,t,n,r){const a=new $.ResizeNearestNeighborProgram(e.shape,t,n,r);return this.compileAndRun(a,[e])}resizeNearestNeighborBackprop(e,t,n){const r=new j.ResizeNearestNeigborBackpropProgram(e,t,n);return this.compileAndRun(r,[e])}multinomial(t,n,r,a){const s=n?t:(0,e.softmax)(t),i=s.shape[0],o=s.shape[1],p=new W.MultinomialProgram(i,o,r),u=p.getCustomSetupFunc(a);return this.compileAndRun(p,[s],"int32",u)}oneHot(e,t,n,r){const a=new G.OneHotProgram(e.size,t,n,r);return this.compileAndRun(a,[e])}diag(e){const t=new I.DiagProgram(e.size);return this.compileAndRun(t,[e])}cropAndResize(e,t,n,r,a,s){const i=new _.CropAndResizeProgram(e.shape,t.shape,r,a,s);return this.compileAndRun(i,[e,t,n],"float32")}depthToSpace(t,n,r){e.util.assert(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`);const a=t.shape[0],s="NHWC"===r?t.shape[1]:t.shape[2],i="NHWC"===r?t.shape[2]:t.shape[3],o="NHWC"===r?t.shape[3]:t.shape[1],p=s*n,u=i*n,h=o/(n*n),l="NHWC"===r?[a,p,u,h]:[a,h,p,u],c=new f.DepthToSpaceProgram(l,n,r);return this.compileAndRun(c,[t])}split(e,t,n){return Pe(e,t,n)}scatterND(t,n,r){const{sliceRank:a,numUpdates:s,sliceSize:i,strides:o,outputSize:p}=e.backend_util.calculateShapes(n,t,r),u=[p/i,i],h=t.reshape([s,a]),l=n.reshape([s,i]);if(0===p)return e.backend_util.reshapeTensor((0,e.tensor)([]),r);const c=(0,e.scalar)(0),d=new ee.ScatterProgram(s,a,h.rank,l.rank,o,u);return this.compileAndRun(d,[l,h,c]).reshape(r)}sparseToDense(t,n,r,a){const{sliceRank:s,numUpdates:i,strides:o,outputSize:p}=e.backend_util.calculateShapes(n,t,r),u=new ee.ScatterProgram(i,s,t.rank,n.rank,o,[p,1],!1);return this.compileAndRun(u,[n,t,a]).reshape(r)}gatherND(t,n){const r=n.shape,a=r[r.length-1],[s,i,o,p]=e.backend_util.prepareAndValidate(t,n),u=n.reshape([i,a]),h=t.reshape([t.size/o,o]),l=new C.GatherNDProgram(a,p,[i,o]);return this.compileAndRun(l,[h,u]).reshape(s)}fill(t,n,r){if("string"===(r=r||e.util.inferDtype(n))){const a=e.util.getArrayFromDType(r,e.util.sizeFromShape(t));return a.fill(n),(0,e.engine)().makeTensor(a,t,r,this)}{const e=new x.FillProgram(t,n),a=e.getCustomSetupFunc(n);return this.compileAndRun(e,[],r,a)}}onesLike(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)}zerosLike(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)}linspace(t,n,r){return e.backend_util.linspaceImpl(t,n,r)}makeTensorInfo(e,t,n){const r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(t,n,r){const{dataId:a}=this.makeTensorInfo(t,n,r);return(0,e.engine)().makeTensorFromDataId(a,t,n,this)}unpackTensor(e){const t=new le.UnpackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new q.PackProgram(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[ce.getBatchDim(e.shape),...ce.getRowsCols(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[ce.getBatchDim(t),...ce.getRowsCols(t)],s=new Y.ReshapePackedProgram(a,n),i=this.runWebGLProgram(s,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e){const t=this.texData.get(e),{isPacked:n,shape:r,dtype:a}=t,s=ce.getShapeAs3D(r);let i;i=n?new y.DecodeMatrixPackedProgram(s):new O.DecodeMatrixProgram(s);return{dtype:a,shape:r,dataId:this.runWebGLProgram(i,[{shape:s,dtype:a,dataId:e}],a,null,!0).dataId}}runWebGLProgram(t,n,r,a,s=!1){const i=this.makeTensorInfo(t.outputShape,r),o=this.texData.get(i.dataId);if(t.packedOutput&&(o.isPacked=!0),t.outPackingScheme===ie.PackingScheme.DENSE){const e=ie.getDenseTexShape(t.outputShape);o.texShape=e.map(e=>2*e)}if(null!=t.outTexUsage&&(o.usage=t.outTexUsage),0===e.util.sizeFromShape(i.shape))return o.values=e.util.getTypedArrayFromDType(i.dtype,0),i;const p=[],u=n.map(n=>{if("complex64"===n.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let r=this.texData.get(n.dataId);if(null==r.texture){if(!t.packedInputs&&e.util.sizeFromShape(n.shape)<=(0,e.env)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:n.shape,texData:null,isUniform:!0,uniformValues:r.values};t.packedInputs&&(r.isPacked=!0,r.shape=n.shape)}else if(!!r.isPacked!=!!t.packedInputs)n=r.isPacked?this.unpackTensor(n):this.packTensor(n),p.push(n),r=this.texData.get(n.dataId);else if(r.isPacked&&!ce.isReshapeFree(r.shape,n.shape)){const e=n,t=n.shape;n.shape=r.shape,n=this.packedReshape(n,t),p.push(n),r=this.texData.get(n.dataId),e.shape=t}return this.uploadToGPU(n.dataId),{shape:n.shape,texData:r,isUniform:!1}});this.uploadToGPU(i.dataId);const h={shape:i.shape,texData:o,isUniform:!1},l=L.makeShaderKey(t,u,h),c=this.getAndSaveBinary(l,()=>L.compileProgram(this.gpgpu,t,u,h)),d=null!=this.activeTimers;let m;if(d&&(m=this.startTimer()),L.runProgram(this.gpgpu,c,u,h,a),p.forEach(e=>this.disposeIntermediateTensorInfo(e)),d&&(m=this.endTimer(m),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(m)})),!(0,e.env)().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===s){const e=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),e}return i}compileAndRun(t,n,r,a,s=!1){r=r||n[0].dtype;const i=this.runWebGLProgram(t,n,r,a,s);return(0,e.engine)().makeTensorFromDataId(i.dataId,i.shape,i.dtype)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,e.env)().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,e.tidy)(()=>{if(!(0,e.env)().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=(0,e.env)().getBool("DEBUG");(0,e.env)().set("DEBUG",!1);const n=this.abs((0,e.scalar)(1e-8)).dataSync()[0];if((0,e.env)().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?Oe:ye}uploadToGPU(t){const n=this.texData.get(t),{shape:r,dtype:a,values:s,texture:i,usage:o,isPacked:p}=n;if(null!=i)return;const u=null!=this.activeTimers;let h;u&&(h=e.util.now());let l=n.texShape;if(null==l&&(l=ce.getTextureShapeFromLogicalShape(r,p),n.texShape=l),null!=s){const t=ce.getShapeAs3D(r);let i,o=l[1],c=l[0];const d=s instanceof Uint8Array;p?([o,c]=ie.getPackedMatrixTextureShapeWidthHeight(l[0],l[1]),i=new B.EncodeMatrixPackedProgram(t,[c,o],d)):i=new E.EncodeMatrixProgram(t,[c,o],d);const m=this.makeTensorInfo([c,o],a);this.texData.get(m.dataId).usage=d?ie.TextureUsage.PIXELS:ie.TextureUsage.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(m.dataId),o,c,s);const g=!0,P=this.runWebGLProgram(i,[m],a,null,g),A=this.texData.get(P.dataId);n.texture=A.texture,n.texShape=A.texShape,n.isPacked=A.isPacked,n.usage=A.usage,this.disposeIntermediateTensorInfo(m),this.texData.delete(P.dataId),n.values=null,u&&(this.uploadWaitMs+=e.util.now()-h)}else{const e=this.acquireTexture(l,o,a,p);n.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=Ce(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, `+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}computeBytes(t,n){return t[0]*t[1]*e.util.bytesPerElement(n)}tryRunOnCpuOrThrow(t,n){if(this.shouldExecuteOnCPU(t))try{return n()}catch(r){if((0,e.env)().getBool("IS_TEST"))throw new Error("CPU forwarding failed")}return null}}function Ce(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}exports.MathBackendWebGL=De;
},{"./flags_webgl":"eHv8","@tensorflow/tfjs-core":"tKjQ","./kernel_utils/shared":"ND1T","./addn_gpu":"C7FY","./addn_packed_gpu":"eEUv","./argminmax_gpu":"tfJl","./argminmax_packed_gpu":"YhXY","./avg_pool_backprop_gpu":"qxDp","./binaryop_gpu":"loxm","./binaryop_packed_gpu":"tIa8","./canvas_util":"SALK","./clip_gpu":"Hn7I","./clip_packed_gpu":"QMfg","./complex_abs_gpu":"FiqB","./conv_backprop_gpu":"ljE8","./conv_backprop_gpu_depthwise":"JDyd","./conv_gpu":"R3Xc","./conv_gpu_depthwise":"PIxO","./conv_packed_gpu_depthwise":"MhQp","./crop_and_resize_gpu":"m8RR","./cumsum_gpu":"viqN","./decode_matrix_gpu":"sUTu","./decode_matrix_packed_gpu":"XjYn","./depth_to_space_gpu":"akjq","./diag_gpu":"L3VF","./encode_float_gpu":"mRoK","./encode_float_packed_gpu":"t7X1","./encode_matrix_gpu":"xnt0","./encode_matrix_packed_gpu":"flVd","./fill_gpu":"Dw2h","./gather_gpu":"ppix","./gather_nd_gpu":"DWgl","./gpgpu_context":"WZG3","./gpgpu_math":"JQJv","./im2col_packed_gpu":"OKnA","./lrn_gpu":"TwHO","./lrn_grad_gpu":"ul1d","./lrn_packed_gpu":"tDQy","./max_pool_backprop_gpu":"SRFh","./mulmat_packed_gpu":"Lcjg","./multinomial_gpu":"jUsu","./onehot_gpu":"qxZv","./pack_gpu":"V5VG","./pad_gpu":"gMCd","./pad_packed_gpu":"vqPE","./pool_gpu":"MH8O","./reduce_gpu":"DWsN","./reshape_packed_gpu":"ppfd","./resize_bilinear_backprop_gpu":"oShx","./resize_bilinear_gpu":"KwIP","./resize_bilinear_packed_gpu":"W8HY","./resize_nearest_neighbor_backprop_gpu":"b9bD","./resize_nearest_neighbor_gpu":"ROs9","./reverse_gpu":"W1eJ","./reverse_packed_gpu":"fzs6","./scatter_gpu":"fi5f","./segment_gpu":"xNFg","./select_gpu":"Yqhs","./slice_gpu":"Jzxz","./slice_packed_gpu":"Svca","./strided_slice_gpu":"ErpK","./tex_util":"K2eT","./texture_manager":"dYbW","./tile_gpu":"v7OW","./unaryop_gpu":"f9fL","./unaryop_packed_gpu":"biR8","./unpack_gpu":"EQmp","./webgl_util":"ElKU"}],"ecCd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.forceHalfFloat=a,Object.defineProperty(exports,"MathBackendWebGL",{enumerable:!0,get:function(){return n.MathBackendWebGL}}),Object.defineProperty(exports,"setWebGLContext",{enumerable:!0,get:function(){return o.setWebGLContext}}),Object.defineProperty(exports,"GPGPUContext",{enumerable:!0,get:function(){return u.GPGPUContext}}),exports.webgl_util=exports.gpgpu_util=void 0;var e=require("@tensorflow/tfjs-core"),t=p(require("./gpgpu_util"));exports.gpgpu_util=t;var r=p(require("./webgl_util"));exports.webgl_util=r;var n=require("./backend_webgl"),o=require("./canvas_util"),u=require("./gpgpu_context");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(){(0,e.env)().set("WEBGL_FORCE_F16_TEXTURES",!0)}
},{"@tensorflow/tfjs-core":"tKjQ","./gpgpu_util":"XLbs","./webgl_util":"ElKU","./backend_webgl":"ICWE","./canvas_util":"SALK","./gpgpu_context":"WZG3"}],"nWkO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={webgl:!0,version_webgl:!0};Object.defineProperty(exports,"version_webgl",{enumerable:!0,get:function(){return o.version}}),exports.webgl=void 0;var r=require("@tensorflow/tfjs-core"),t=require("./backend_webgl"),o=require("./version"),n=require("./webgl");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))}),r.device_util.isBrowser()&&(0,r.registerBackend)("webgl",()=>new t.MathBackendWebGL,2);const l={forceHalfFloat:n.forceHalfFloat};exports.webgl=l;
},{"@tensorflow/tfjs-core":"tKjQ","./backend_webgl":"ICWE","./version":"yMuw","./webgl":"ecCd"}],"L3yO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.identity=t,exports.identityConfig=void 0;var e=require("@tensorflow/tfjs-core");function t(e){const{inputs:t,backend:n}=e,{x:d}=t;return n.incRef(d.dataId),{dataId:d.dataId,shape:d.shape,dtype:d.dtype}}const n={kernelName:e.Identity,backendName:"webgl",kernelFunc:t};exports.identityConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ"}],"Qnak":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=n,exports.complexConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function n(e){const{inputs:n,backend:o}=e,{real:a,imag:r}=n,c=o.makeTensorInfo(a.shape,"complex64"),s=o.texData.get(c.dataId),i=(0,t.identity)({inputs:{x:a},backend:o});o.texData.get(i.dataId).complexParentRefCount++;const p=(0,t.identity)({inputs:{x:r},backend:o});return o.texData.get(p.dataId).complexParentRefCount++,s.complexTensorInfos={real:i,imag:p},c}const o={kernelName:e.Complex,backendName:"webgl",kernelFunc:n};exports.complexConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","./Identity":"L3yO"}],"xHF3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unaryKernelFunc=u,exports.binaryKernelFunc=d,exports.CHECK_NAN_SNIPPET_BINARY_PACKED=exports.CHECK_NAN_SNIPPET_BINARY=exports.CHECK_NAN_SNIPPET_UNARY=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../binaryop_gpu"),t=require("../binaryop_packed_gpu"),a=require("../kernels/Complex"),n=require("../unaryop_gpu");const s="if (isnan(x)) return x;";exports.CHECK_NAN_SNIPPET_UNARY=s;const p="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";exports.CHECK_NAN_SNIPPET_BINARY=p;const o="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n";function u(e){return({inputs:r,backend:t})=>{const{x:a}=r,s=t,p=new n.UnaryOpProgram(a.shape,e);return s.runWebGLProgram(p,[a],a.dtype)}}function d({opSnippet:n,packedOpSnippet:s,checkOutOfBounds:p=!1,supportsComplex:o=!1,cpuKernelImpl:u,dtype:d}){return({inputs:N,backend:i})=>{const{a:l,b:c}=N,I=i;if(o&&"complex64"===l.dtype){const t=I.texData.get(l.dataId),s=I.texData.get(c.dataId),[p,o]=[[t.complexTensorInfos.real,s.complexTensorInfos.real],[t.complexTensorInfos.imag,s.complexTensorInfos.imag]].map(t=>{const[a,s]=t,p={dataId:a.dataId,dtype:a.dtype,shape:l.shape},o={dataId:s.dataId,dtype:s.dtype,shape:c.shape},u=new r.BinaryOpProgram(n,l.shape,c.shape);return I.runWebGLProgram(u,[p,o],(0,e.upcastType)(a.dtype,s.dtype))}),u=(0,a.complex)({inputs:{real:p,imag:o},backend:I});return I.disposeIntermediateTensorInfo(p),I.disposeIntermediateTensorInfo(o),u}const _=d||(0,e.upcastType)(l.dtype,c.dtype);if(I.shouldExecuteOnCPU([l,c])&&null!=u){const e=I.texData.get(l.dataId),r=I.texData.get(c.dataId),[t,a]=u(l.shape,c.shape,e.values,r.values,_),n=I.makeTensorInfo(a,_);return I.texData.get(n.dataId).values=t,n}let x;return x=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=s?new t.BinaryOpPackedProgram(s,l.shape,c.shape,p):new r.BinaryOpProgram(n,l.shape,c.shape),I.runWebGLProgram(x,[l,c],_)}}exports.CHECK_NAN_SNIPPET_BINARY_PACKED=o;
},{"@tensorflow/tfjs-core":"tKjQ","../binaryop_gpu":"loxm","../binaryop_packed_gpu":"tIa8","../kernels/Complex":"Qnak","../unaryop_gpu":"f9fL"}],"DrXz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addConfig=exports.addKernelFunc=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../kernel_utils/shared");const t="return a + b;",l=(0,r.binaryKernelFunc)({opSnippet:t,packedOpSnippet:t,supportsComplex:!0,cpuKernelImpl:n.addImplCPU});exports.addKernelFunc=l;const p={kernelName:e.Add,backendName:"webgl",kernelFunc:l};exports.addConfig=p;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3","../kernel_utils/shared":"ND1T"}],"RIca":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2Config=exports.atan2=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const t=n.CHECK_NAN_SNIPPET_BINARY+"\n  return atan(a, b);\n",r="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+n.CHECK_NAN_SNIPPET_BINARY_PACKED+"\n  return result;\n",a=(0,n.binaryKernelFunc)({opSnippet:t,packedOpSnippet:r});exports.atan2=a;const s={kernelName:e.Atan2,backendName:"webgl",kernelFunc:a};exports.atan2Config=s;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3"}],"W99P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=i,exports.avgPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../pool_gpu"),o=require("../webgl_util"),r=require("./Identity");function i(i){const{inputs:n,backend:s,attrs:a}=i,{x:l}=n;(0,o.assertNotComplex)(l,"avgPool");const{filterSize:u,strides:d,pad:c,dimRoundingMode:g}=a;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const p=e.backend_util.computePool2DInfo(l.shape,u,d,1,c,g);if(1===p.filterWidth&&1===p.filterHeight&&e.util.arraysEqual(p.inShape,p.outShape))return(0,r.identity)({inputs:{x:l},backend:s});const f=new t.Pool2DProgram(p,"avg",!1);return s.runWebGLProgram(f,[l],"float32")}const n={kernelName:e.AvgPool,backendName:"webgl",kernelFunc:i};exports.avgPoolConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../pool_gpu":"MH8O","../webgl_util":"ElKU","./Identity":"L3yO"}],"hVEz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolBackprop=p,exports.avgPoolBackpropConfig=void 0;var o=require("@tensorflow/tfjs-core"),e=require("../avg_pool_backprop_gpu"),r=require("../webgl_util");function p(p){const{inputs:t,backend:a,attrs:n}=p,{dy:c,input:l}=t,s=l;(0,r.assertNotComplex)([c,l],"avgPoolBackprop");const{filterSize:i,strides:u,pad:g}=n,k=o.backend_util.computePool2DInfo(s.shape,i,u,1,g),d=new e.AvgPool2DBackpropProgram(k);return a.runWebGLProgram(d,[c],s.dtype)}const t={kernelName:o.AvgPoolBackprop,backendName:"webgl",kernelFunc:p};exports.avgPoolBackpropConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ","../avg_pool_backprop_gpu":"qxDp","../webgl_util":"ElKU"}],"a2ow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BatchNormProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e,a,s,o,r,n){this.outputShape=[],this.variableNames=["x","mean","variance"],t.backend_util.assertAndGetBroadcastShape(e,a),t.backend_util.assertAndGetBroadcastShape(e,s);let l="0.0";null!=o&&(t.backend_util.assertAndGetBroadcastShape(e,o),this.variableNames.push("offset"),l="getOffsetAtOutCoords()");let i="1.0";null!=r&&(t.backend_util.assertAndGetBroadcastShape(e,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${l};\n        float scale = ${i};\n        float inv = scale * inversesqrt(variance + float(${n}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}exports.BatchNormProgram=e;
},{"@tensorflow/tfjs-core":"tKjQ"}],"KEqZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BatchNormPackedProgram=void 0;var e=require("@tensorflow/tfjs-core");class t{constructor(t,a,s,r,n,c){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],e.backend_util.assertAndGetBroadcastShape(t,a),e.backend_util.assertAndGetBroadcastShape(t,s);let o="vec4(0.0)";null!=r&&(e.backend_util.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let i="vec4(1.0)";null!=n&&(e.backend_util.assertAndGetBroadcastShape(t,n),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${i};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${c}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}exports.BatchNormPackedProgram=t;
},{"@tensorflow/tfjs-core":"tKjQ"}],"MYZS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNormConfig=exports.batchNorm=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../batchnorm_gpu"),t=require("../batchnorm_packed_gpu");const r=({inputs:r,backend:n,attrs:s})=>{const{x:o,mean:l,variance:h,offset:u,scale:c}=r;e.util.assert(l.shape.length===h.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),e.util.assert(null==u||l.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),e.util.assert(null==c||l.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:i}=s;null==i&&(i=.001);const p=[o,l,h];let m=null;null!=u&&(m=u.shape,p.push(u));let g=null;null!=c&&(g=c.shape,p.push(c));const d=(0,e.env)().getBool("WEBGL_PACK_NORMALIZATION")?new t.BatchNormPackedProgram(o.shape,l.shape,h.shape,m,g,i):new a.BatchNormProgram(o.shape,l.shape,h.shape,m,g,i);return n.runWebGLProgram(d,p,p[0].dtype)};exports.batchNorm=r;const n={kernelName:e.FusedBatchNorm,backendName:"webgl",kernelFunc:r};exports.batchNormConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../batchnorm_gpu":"a2ow","../batchnorm_packed_gpu":"KEqZ"}],"jUHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualConfig=exports.notEqual=void 0;var e=require("@tensorflow/tfjs-core"),o=require("../kernel_utils/kernel_funcs_utils");const t="return float(a != b);",r=(0,o.binaryKernelFunc)({opSnippet:t,dtype:"bool"});exports.notEqual=r;const n={kernelName:e.NotEqual,backendName:"webgl",kernelFunc:r};exports.notEqualConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3"}],"BZba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=r,exports.realConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function r(e){const{inputs:r,backend:n}=e,{input:o}=r,a=n.texData.get(o.dataId);return(0,t.identity)({inputs:{x:a.complexTensorInfos.real},backend:n})}const n={kernelName:e.Real,backendName:"webgl",kernelFunc:r};exports.realConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","./Identity":"L3yO"}],"Eski":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.int=t;var e=require("../unaryop_gpu");const r="return float(int(x));";function t(t,a){const n=new e.UnaryOpProgram(t.shape,r),o=a.runWebGLProgram(n,[t],"int32");return{dataId:o.dataId,shape:o.shape,dtype:o.dtype}}
},{"../unaryop_gpu":"f9fL"}],"Fsse":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=p,exports.castConfig=void 0;var e=a(require("@tensorflow/tfjs-core")),t=require("./Complex"),r=require("./Identity"),n=require("./NotEqual"),o=require("./Real"),i=require("../kernel_utils/int");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function p(s){const{inputs:a,backend:u,attrs:c}=s,{x:d}=a,{dtype:f}=c;if("complex64"===f){if("complex64"===d.dtype)return(0,r.identity)({inputs:{x:d},backend:u});const n=e.zeros(d.shape),o=p({inputs:{x:d},backend:u,attrs:{dtype:"float32"}}),i=(0,t.complex)({inputs:{real:o,imag:n},backend:u});return n.dispose(),u.disposeIntermediateTensorInfo(o),i}if("complex64"===d.dtype){const e=(0,o.real)({inputs:{input:d},backend:u}),t=p({inputs:{x:e},backend:u,attrs:{dtype:f}});return u.disposeIntermediateTensorInfo(e),t}if(!e.util.hasEncodingLoss(d.dtype,f)){const e=(0,r.identity)({inputs:{x:d},backend:u});return{dataId:e.dataId,shape:e.shape,dtype:f}}if("int32"===f)return(0,i.int)(d,u);if("bool"===f){const t=u.makeTensorInfo([],"bool",e.util.getTypedArrayFromDType("bool",1)),r={a:d,b:t},o=(0,n.notEqual)({inputs:r,backend:u});return u.disposeIntermediateTensorInfo(t),o}throw new Error(`Error in Cast: failed to cast ${d.dtype} to ${f}`)}const u={kernelName:e.Cast,backendName:"webgl",kernelFunc:p};exports.castConfig=u;
},{"@tensorflow/tfjs-core":"tKjQ","./Complex":"Qnak","./Identity":"L3yO","./NotEqual":"jUHD","./Real":"BZba","../kernel_utils/int":"Eski"}],"N1FD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConcatProgram=void 0;var t=require("@tensorflow/tfjs-core");class e{constructor(e){this.outputShape=[],this.outputShape=t.backend_util.computeOutShape(e,1),this.variableNames=e.map((t,e)=>`T${e}`);const o=new Array(e.length-1);o[0]=e[0][1];for(let t=1;t<o.length;t++)o[t]=o[t-1]+e[t][1];const s=[`if (yC < ${o[0]}) setOutput(getT0(yR, yC));`];for(let t=1;t<o.length;t++){const e=o[t-1];s.push(`else if (yC < ${o[t]}) `+`setOutput(getT${t}(yR, yC-${e}));`)}const n=o.length,r=o[o.length-1];s.push(`else setOutput(getT${n}(yR, yC-${r}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${s.join("\n        ")}\n      }\n    `}}exports.ConcatProgram=e;
},{"@tensorflow/tfjs-core":"tKjQ"}],"z3Ob":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConcatPackedProgram=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./packing_util"),n=require("./shader_compiler");class r{constructor(r,s){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=e.backend_util.computeOutShape(r,s);const u=this.outputShape,a=u.length,$=(0,n.getCoordsDataType)(a),l=(0,t.getChannels)("coords",a),i=["x","y","z","w","u","v"].slice(0,a);this.variableNames=r.map((e,t)=>`T${t}`);const c=new Array(r.length-1);c[0]=r[0][s];for(let e=1;e<c.length;e++)c[e]=c[e-1]+r[e][s];const g=i[s],p=i.slice(-2),h=i.join();let d=`if (${g} < ${c[0]}) {\n        return getChannel(\n            getT0(${h}), vec2(${p.join()}));\n        }`;for(let e=1;e<c.length;e++){const t=c[e-1];d+=`\n        if (${g} < ${c[e]}  && ${g} >= ${c[e-1]}) {\n          return getChannel(\n            getT${e}(${o(i,g,t)}),\n            vec2(${o(p,g,t)}));\n        }`}const f=c.length,v=c[c.length-1];d+=`\n        return getChannel(\n          getT${f}(${o(i,g,v)}),\n          vec2(${o(p,g,v)}));`,this.userCode=`\n      float getValue(${i.map(e=>"int "+e)}) {\n        ${d}\n      }\n\n      void main() {\n        ${$} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${l}), 0., 0., 0.);\n\n        ${l[a-1]} = ${l[a-1]} + 1;\n        if (${l[a-1]} < ${u[a-1]}) {\n          result.g = getValue(${l});\n        }\n\n        ${l[a-2]} = ${l[a-2]} + 1;\n        if (${l[a-2]} < ${u[a-2]}) {\n          result.a = getValue(${l});\n        }\n\n        ${l[a-1]} = ${l[a-1]} - 1;\n        if (${l[a-2]} < ${u[a-2]} &&\n            ${l[a-1]} < ${u[a-1]}) {\n          result.b = getValue(${l});\n        }\n        setOutput(result);\n      }\n    `}}function o(e,t,n){const r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}exports.ConcatPackedProgram=r;
},{"@tensorflow/tfjs-core":"tKjQ","./packing_util":"ioBk","./shader_compiler":"GECe"}],"zt6p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=n,exports.imagConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Identity");function n(e){const{inputs:n,backend:r}=e,{input:i}=n,o=r.texData.get(i.dataId);return(0,t.identity)({inputs:{x:o.complexTensorInfos.imag},backend:r})}const r={kernelName:e.Imag,backendName:"webgl",kernelFunc:n};exports.imagConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","./Identity":"L3yO"}],"Bncs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.packedReshape=a;var e=require("../reshape_packed_gpu"),t=require("../webgl_util");function a(a,d,p){const r=[(0,t.getBatchDim)(a.shape),...(0,t.getRowsCols)(a.shape)],s={dtype:a.dtype,shape:r,dataId:a.dataId},o=[(0,t.getBatchDim)(d),...(0,t.getRowsCols)(d)],u=new e.ReshapePackedProgram(o,r),c=p.runWebGLProgram(u,[s],a.dtype,null,!0);return{dataId:c.dataId,shape:d,dtype:c.dtype}}
},{"../reshape_packed_gpu":"ppfd","../webgl_util":"ElKU"}],"LDhO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=t,exports.reshapeConfig=void 0;var e=require("@tensorflow/tfjs-core"),a=require("../kernel_utils/reshape"),s=require("../webgl_util");function t(t){const{inputs:r,backend:p,attrs:h}=t,{x:n}=r,{shape:i}=h,l=p,o=e.util.sizeFromShape(n.shape),d=e.util.inferFromImplicitShape(i,o),u=e.util.sizeFromShape(d);e.util.assert(o===u,()=>`The new shape (${d}) has ${u} elements and the old `+`shape (${n.shape}) has ${o} elements. The new shape and old `+"shape must have the same number of elements.");const c=l.texData.get(n.dataId);return!c.isPacked||(0,s.isReshapeFree)(n.shape,d)||null!==c.texture&&(0,s.isReshapeFree)(c.shape,d)?(l.incRef(n.dataId),{dataId:n.dataId,shape:d,dtype:n.dtype}):(0,a.packedReshape)(n,d,l)}const r={kernelName:e.Reshape,backendName:"webgl",kernelFunc:t};exports.reshapeConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/reshape":"Bncs","../webgl_util":"ElKU"}],"PaPV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatImpl=p;var e=require("@tensorflow/tfjs-core"),r=require("../concat_gpu"),n=require("../concat_packed_gpu"),t=require("./Complex"),o=require("./Imag"),s=require("./Real"),a=require("./Reshape");function p(i,c,u){const m=i[0].dtype;if("complex64"===m){const e=i.map(e=>(0,s.real)({inputs:{input:e},backend:u})),r=i.map(e=>(0,o.imag)({inputs:{input:e},backend:u})),n=p(e,c,u),a=p(r,c,u),m=(0,t.complex)({inputs:{real:n,imag:a},backend:u});return e.forEach(e=>u.disposeIntermediateTensorInfo(e)),r.forEach(e=>u.disposeIntermediateTensorInfo(e)),u.disposeIntermediateTensorInfo(n),u.disposeIntermediateTensorInfo(a),m}if(i.length>(0,e.env)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(i.length/2),r=p(i.slice(0,e),c,u),n=p(i.slice(e),c,u),t=p([r,n],c,u);return u.disposeIntermediateTensorInfo(r),u.disposeIntermediateTensorInfo(n),t}if((0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1){const e=new n.ConcatPackedProgram(i.map(e=>e.shape),c);return u.runWebGLProgram(e,i,m)}const d=e.backend_util.computeOutShape(i.map(e=>e.shape),c),l=i.map(r=>(0,a.reshape)({inputs:{x:r},attrs:{shape:[-1,e.util.sizeFromShape(r.shape.slice(c))]},backend:u})),I=new r.ConcatProgram(l.map(e=>e.shape)),f=u.runWebGLProgram(I,l,m);l.forEach(e=>u.disposeIntermediateTensorInfo(e));const h=(0,a.reshape)({inputs:{x:f},attrs:{shape:d},backend:u});return u.disposeIntermediateTensorInfo(f),h}
},{"@tensorflow/tfjs-core":"tKjQ","../concat_gpu":"N1FD","../concat_packed_gpu":"z3Ob","./Complex":"Qnak","./Imag":"zt6p","./Real":"BZba","./Reshape":"LDhO"}],"w26z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=a,exports.concatConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Concat_impl");function a(a){const{inputs:n,backend:r,attrs:s}=a,{axis:o}=s,c=e.util.parseAxisParam(o,n[0].shape)[0],i=e.backend_util.computeOutShape(n.map(e=>e.shape),c);if(0===e.util.sizeFromShape(i))return r.makeTensorInfo(i,n[0].dtype,[]);const p=n.filter(t=>e.util.sizeFromShape(t.shape)>0);if(1===p.length)return p[0];const u=p.map(e=>e.shape);return e.backend_util.assertParamsConsistent(u,c),(0,t.concatImpl)(p,c,r)}const n={kernelName:e.Concat,backendName:"webgl",kernelFunc:a};exports.concatConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","./Concat_impl":"PaPV"}],"AOb9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosConfig=exports.cos=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const o=r.CHECK_NAN_SNIPPET_UNARY+"\n  return cos(x);\n",s=(0,r.unaryKernelFunc)(o);exports.cos=s;const n={kernelName:e.Cos,backendName:"webgl",kernelFunc:s};exports.cosConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3"}],"xtJM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divConfig=exports.div=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",u=(0,n.binaryKernelFunc)({opSnippet:r,packedOpSnippet:t,checkOutOfBounds:!0});exports.div=u;const i={kernelName:e.Div,backendName:"webgl",kernelFunc:u};exports.divConfig=i;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3"}],"G0ds":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FFTProgram=void 0;class e{constructor(e,t,n){this.variableNames=["real","imag"];const o=t[1];this.outputShape=t;const a=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=n?`${o}.0`:"1.0";let l;if("real"===e)l="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);l="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${a};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${l}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${o});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${o}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${i};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}exports.FFTProgram=e;
},{}],"IagG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fftImpl=t;var e=require("@tensorflow/tfjs-core"),a=require("../fft_gpu"),r=require("./Complex"),s=require("./Reshape");function t(t,o,n){const p=n.texData.get(t.dataId),d=e.util.sizeFromShape(t.shape),i=t.shape[t.shape.length-1],m=d/i,l=(0,s.reshape)({inputs:{x:t},backend:n,attrs:{shape:[m,i]}}).shape,f=new a.FFTProgram("real",l,o),u=new a.FFTProgram("imag",l,o),I=[{dataId:p.complexTensorInfos.real.dataId,dtype:p.complexTensorInfos.real.dtype,shape:l},{dataId:p.complexTensorInfos.imag.dataId,dtype:p.complexTensorInfos.imag.dtype,shape:l}],c=n.runWebGLProgram(f,I,"float32"),h=n.runWebGLProgram(u,I,"float32"),g=(0,r.complex)({inputs:{real:c,imag:h},backend:n});n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h);const x=(0,s.reshape)({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(x),x}
},{"@tensorflow/tfjs-core":"tKjQ","../fft_gpu":"G0ds","./Complex":"Qnak","./Reshape":"LDhO"}],"zOz0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=r,exports.fftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./FFT_impl");function r(e){const{inputs:r,backend:n}=e,{input:o}=r;return(0,t.fftImpl)(o,!1,n)}const n={kernelName:e.FFT,backendName:"webgl",kernelFunc:r};exports.fftConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","./FFT_impl":"IagG"}],"DWdx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlipLeftRightProgram=void 0;class o{constructor(o){this.variableNames=["Image"],this.outputShape=[];const t=o[2];this.outputShape=o,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}exports.FlipLeftRightProgram=o;
},{}],"fUoD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRightConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../flip_left_right_gpu");const r={kernelName:e.FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:e,backend:r})=>{const{image:i}=e,n=r,o=new t.FlipLeftRightProgram(i.shape);return n.runWebGLProgram(o,[i],i.dtype)}};exports.flipLeftRightConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../flip_left_right_gpu":"DWdx"}],"cbpE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FromPixelsProgram=void 0;var e=require("../../glsl_version");class t{constructor(t){this.variableNames=["A"];const s=(0,e.getGlslDifferences)(),[n,o]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${n}.0);\n\n        vec4 values = ${s.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}exports.FromPixelsProgram=t;
},{"../../glsl_version":"q4Yv"}],"sXW0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FromPixelsPackedProgram=void 0;var e=require("../../glsl_version");class t{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const o=(0,e.getGlslDifferences)(),[n,s]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${s}.0, ${n}.0);\n            vec4 values = ${o.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${o.output} = result;\n      }\n    `}}exports.FromPixelsPackedProgram=t;
},{"../../glsl_version":"q4Yv"}],"lXc4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromPixelsConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../tex_util"),n=require("./FromPixels_utils/from_pixels_gpu"),o=require("./FromPixels_utils/from_pixels_packed_gpu");const a={kernelName:e.FromPixels,backendName:"webgl",kernelFunc:i};let r;function i(a){const{inputs:i,backend:s,attrs:l}=a;let{pixels:d}=i;const{numChannels:u}=l,m="undefined"!=typeof HTMLVideoElement&&d instanceof HTMLVideoElement,c="undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement,[g,x]=m?[d.videoWidth,d.videoHeight]:[d.width,d.height],f=[x,g],p=[x,g,u];(c||m)&&(null==r&&(r=document.createElement("canvas").getContext("2d")),r.canvas.width=g,r.canvas.height=x,r.drawImage(d,0,0,g,x),d=r.canvas);const P=s.makeTensorInfo(f,"int32");s.texData.get(P.dataId).usage=t.TextureUsage.PIXELS,s.gpgpu.uploadPixelDataToTexture(s.getTexture(P.dataId),d);const _=(0,e.env)().getBool("WEBGL_PACK")?new o.FromPixelsPackedProgram(p):new n.FromPixelsProgram(p),v=s.runWebGLProgram(_,[P],"int32");return s.disposeData(P.dataId),v}exports.fromPixelsConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../tex_util":"K2eT","./FromPixels_utils/from_pixels_gpu":"cbpE","./FromPixels_utils/from_pixels_packed_gpu":"sXW0"}],"tJvL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=r,exports.ifftConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./FFT_impl");function r(e){const{inputs:r,backend:n}=e,{input:o}=r;return(0,t.fftImpl)(o,!0,n)}const n={kernelName:e.IFFT,backendName:"webgl",kernelFunc:r};exports.ifftConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","./FFT_impl":"IagG"}],"Kopb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeanProgram=void 0;var n=require("@tensorflow/tfjs-core");class e{constructor(e,t){this.variableNames=["x"];const{windowSize:i,batchSize:a,inSize:s,outSize:o}=e;this.outputShape=[a,o];const u=4*Math.floor(i/4),c=i%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${n.util.isInt(e)?e.toPrecision(2):e}, ones);`}let d="";s%i>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${s}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${i};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===c}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}exports.MeanProgram=e;
},{"@tensorflow/tfjs-core":"tKjQ"}],"jZyv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reduce=o;var e=require("@tensorflow/tfjs-core"),i=require("../mean_gpu"),t=require("../reduce_gpu");function n(i){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:i[1],o=e.backend_util.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:o,outSize:Math.ceil(n/o)})}return t}function o(e,o,r,u){const a=n(e.shape);let z=e;for(let n=0;n<a.length;n++){const{inSize:S,windowSize:s,outSize:c}=a[n];let d,w;d="mean"===r?0===n?new i.MeanProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c},S):new i.MeanProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c}):new t.ReduceProgram({windowSize:s,inSize:S,batchSize:e.shape[0],outSize:c},r),w=z,z=u.runWebGLProgram(d,[z],o),w.dataId!==e.dataId&&u.disposeIntermediateTensorInfo(w)}return z}
},{"@tensorflow/tfjs-core":"tKjQ","../mean_gpu":"Kopb","../reduce_gpu":"DWsN"}],"xBBy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxImpl=t;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/reduce"),s=require("../kernels/Reshape");function t(t,a,n,i){const o=e.util.sizeFromShape(a),p=e.util.sizeFromShape(t.shape)/o,u=(0,s.reshape)({inputs:{x:t},attrs:{shape:[p,o]},backend:i}),d=(0,r.reduce)(u,t.dtype,"max",i),c=(0,s.reshape)({inputs:{x:d},attrs:{shape:n},backend:i});return i.disposeIntermediateTensorInfo(u),i.disposeIntermediateTensorInfo(d),c}
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/reduce":"jZyv","../kernels/Reshape":"LDhO"}],"D9PT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransposeProgram=void 0;var r=require("./shader_compiler");class e{constructor(e,s){this.variableNames=["A"];const o=new Array(e.length);for(let r=0;r<o.length;r++)o[r]=e[s[r]];this.outputShape=o,this.rank=o.length;const n=(0,r.getCoordsDataType)(this.rank),a=t(s);this.userCode=`\n    void main() {\n      ${n} resRC = getOutputCoords();\n      setOutput(getA(${a}));\n    }\n    `}}function t(r){const e=r.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(e);for(let o=0;o<r.length;o++)s[r[o]]=t[o];return s.join()}exports.TransposeProgram=e;
},{"./shader_compiler":"GECe"}],"mQ5s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransposePackedProgram=void 0;var t=require("./packing_util"),e=require("./shader_compiler");class r{constructor(r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(r.length);for(let t=0;t<s.length;t++)s[t]=r[n[t]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=(0,e.getCoordsDataType)(this.rank),i=(0,t.getVecChannels)("rc",this.rank),o=new Array(this.rank);for(let t=0;t<n.length;t++)o[n[t]]=i[t];const h=`vec2(${o.slice(-2).join()})`,u=`++${i[this.rank-1]} < ${s[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${h})`;this.userCode=`\n    void main() {\n      ${a} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${c};\n      if(${u}) {\n        result[1] = ${c};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${s[this.rank-2]}) {\n        result[2] = ${c};\n        if(${u}) {\n          result[3] = ${c};\n        }\n      }\n      setOutput(result);\n    }\n    `}}exports.TransposePackedProgram=r;
},{"./packing_util":"ioBk","./shader_compiler":"GECe"}],"faw6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeImpl=o,Object.defineProperty(exports,"transposeImplCPU",{enumerable:!0,get:function(){return r.transposeImplCPU}});var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/shared"),s=require("../transpose_gpu"),t=require("../transpose_packed_gpu");function o(r,o,n){const p=(0,e.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new t.TransposePackedProgram(r.shape,o):new s.TransposeProgram(r.shape,o);return n.runWebGLProgram(p,[r],r.dtype)}
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/shared":"ND1T","../transpose_gpu":"D9PT","../transpose_packed_gpu":"mQ5s"}],"pDtF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../kernel_utils/shared"),a=require("./Max_impl"),s=require("./Transpose_impl");const n={kernelName:e.Max,backendName:"webgl",kernelFunc:({inputs:n,attrs:r,backend:l})=>{const{x:o}=n,{reductionIndices:i,keepDims:p}=r,d=l,u=o.shape.length,c=e.util.parseAxisParam(i,o.shape);let m=c;const x=e.backend_util.getAxesPermutation(m,u),I=null!=x,h=d.shouldExecuteOnCPU([o]);let k=o;if(I){if(h){const e=d.texData.get(k.dataId).values,t=new Array(u);for(let s=0;s<t.length;s++)t[s]=o.shape[x[s]];const a=(0,s.transposeImplCPU)(e,o.shape,o.dtype,x,t);k=d.makeTensorInfo(t,o.dtype),d.texData.get(k.dataId).values=a}else k=(0,s.transposeImpl)(o,x,d);m=e.backend_util.getInnerMostAxes(m.length,u)}e.backend_util.assertAxesAreInnerMostDims("max",m,u);const[f,g]=e.backend_util.computeOutAndReduceShapes(k.shape,m);let _,b=f;if(p&&(b=e.backend_util.expandShapeToKeepDim(f,c)),h){const a=d.texData.get(k.dataId).values,s=(0,t.maxImplCPU)(a,e.util.sizeFromShape(g),b,o.dtype);_=d.makeTensorInfo(b,o.dtype),d.texData.get(_.dataId).values=s}else _=(0,a.maxImpl)(k,g,b,d);return I&&d.disposeIntermediateTensorInfo(k),_}};exports.maxConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/shared":"ND1T","./Max_impl":"xBBy","./Transpose_impl":"faw6"}],"YLV8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=i,exports.maxPoolConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../pool_gpu"),o=require("../webgl_util"),r=require("./Identity");function i(i){const{inputs:n,backend:s,attrs:a}=i,{x:l}=n;(0,o.assertNotComplex)(l,"maxPool");const{filterSize:u,strides:d,pad:c,dimRoundingMode:p}=a;e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(d,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '1'`);const m=e.backend_util.computePool2DInfo(l.shape,u,d,1,c,p);if(1===m.filterWidth&&1===m.filterHeight&&e.util.arraysEqual(m.inShape,m.outShape))return(0,r.identity)({inputs:{x:l},backend:s});const x=new t.Pool2DProgram(m,"max",!1);return s.runWebGLProgram(x,[l],l.dtype)}const n={kernelName:e.MaxPool,backendName:"webgl",kernelFunc:i};exports.maxPoolConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../pool_gpu":"MH8O","../webgl_util":"ElKU","./Identity":"L3yO"}],"sZbe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolBackprop=t,exports.maxPoolBackpropConfig=void 0;var o=require("@tensorflow/tfjs-core"),e=require("../max_pool_backprop_gpu"),r=require("../pool_gpu"),p=require("../webgl_util");function t(t){const{inputs:a,backend:n,attrs:s}=t,{dy:u,input:i,output:l}=a,c=i;(0,p.assertNotComplex)([i,l],"maxPoolBackprop");const{filterSize:d,strides:m,pad:x,dimRoundingMode:P}=s,k=o.backend_util.computePool2DInfo(c.shape,d,m,1,x,P),g=new r.Pool2DProgram(k,"max",!0),b=n.runWebGLProgram(g,[c],c.dtype),f=new e.MaxPool2DBackpropProgram(k),_=n.runWebGLProgram(f,[u,b],c.dtype);return n.disposeIntermediateTensorInfo(b),_}const a={kernelName:o.MaxPoolBackprop,backendName:"webgl",kernelFunc:t};exports.maxPoolBackpropConfig=a;
},{"@tensorflow/tfjs-core":"tKjQ","../max_pool_backprop_gpu":"SRFh","../pool_gpu":"MH8O","../webgl_util":"ElKU"}],"SWQL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxImpl=o;var r=require("../pool_gpu");function o(o,e,t,a){let l=new r.Pool2DProgram(t,"max",!1);const m=a.runWebGLProgram(l,[o],"float32");return l=new r.Pool2DProgram(t,"max",!0,!0,e),[m,a.runWebGLProgram(l,[o],"float32")]}
},{"../pool_gpu":"MH8O"}],"c9vI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmaxConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./MaxPoolWithArgmax_impl");const r={kernelName:e.MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:r,attrs:o,backend:i})=>{const{x:a}=r,{filterSize:n,strides:s,pad:l,includeBatchInIndex:u}=o,d=i;e.util.assert(4===a.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${a.shape.length}.`);const m=[1,1];e.util.assert(e.backend_util.eitherStridesOrDilationsAreOne(s,m),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '${m}'`);const x=e.backend_util.computePool2DInfo(a.shape,n,s,m,l),[c,h]=(0,t.maxPoolWithArgmaxImpl)(a,u,x,d);return[c,h]}};exports.maxPoolWithArgmaxConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","./MaxPoolWithArgmax_impl":"SWQL"}],"T0qw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanImpl=t;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/reduce"),s=require("../kernels/Reshape");function t(t,n,a,o){const i=e.util.sizeFromShape(n),p=e.util.sizeFromShape(t.shape)/i,u=(0,s.reshape)({inputs:{x:t},attrs:{shape:[p,i]},backend:o}),d=(0,r.reduce)(u,"float32","mean",o),l=(0,s.reshape)({inputs:{x:d},attrs:{shape:a},backend:o});return o.disposeIntermediateTensorInfo(u),o.disposeIntermediateTensorInfo(d),l}
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/reduce":"jZyv","../kernels/Reshape":"LDhO"}],"JQwh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Mean_impl"),s=require("./Transpose_impl");const n={kernelName:e.Mean,backendName:"webgl",kernelFunc:({inputs:n,attrs:a,backend:r})=>{const{x:o}=n,{keepDims:l,axis:p}=a,i=r,u=o.shape.length,c=e.util.parseAxisParam(p,o.shape);let d=c;const m=e.backend_util.getAxesPermutation(d,u),x=null!=m,f=i.shouldExecuteOnCPU([o]),h=[];let k=o;if(x){if(f){const e=i.texData.get(k.dataId).values,t=new Array(u);for(let s=0;s<t.length;s++)t[s]=o.shape[m[s]];const n=(0,s.transposeImplCPU)(e,o.shape,o.dtype,m,t);k=i.makeTensorInfo(t,o.dtype),i.texData.get(k.dataId).values=n}else k=(0,s.transposeImpl)(o,m,i);h.push(k),d=e.backend_util.getInnerMostAxes(d.length,u)}e.backend_util.assertAxesAreInnerMostDims("sum",d,u);const[g,I]=e.backend_util.computeOutAndReduceShapes(k.shape,d);let b=g;l&&(b=e.backend_util.expandShapeToKeepDim(g,c));const _=(0,t.meanImpl)(k,I,b,i);for(const e of h)i.disposeIntermediateTensorInfo(e);return _}};exports.meanConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","./Mean_impl":"T0qw","./Transpose_impl":"faw6"}],"DUnJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirrorPadProgram=void 0;var t=require("./shader_compiler");class o{constructor(o,n,r){this.variableNames=["x"],this.outputShape=n.map((t,n)=>t[0]+o[n]+t[1]);const e=o.length,i=(0,t.getCoordsDataType)(e),s=n.map(t=>t[0]).join(","),u=n.map((t,n)=>t[0]+o[n]).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e),d="reflect"===r?0:1;this.userCode=1!==e?`\n      ${i} start = ${i}(${s});\n      ${i} end = ${i}(${u});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${e}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${d};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${d};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${a}));\n      }\n    `:`\n        int start = ${s};\n        int end = ${u};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${d};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${d};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}exports.MirrorPadProgram=o;
},{"./shader_compiler":"GECe"}],"ED5i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MirrorPadPackedProgram=void 0;var e=require("./packing_util"),n=require("./shader_compiler");class t{constructor(t,r,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r.map((e,n)=>e[0]+t[n]+e[1]);const o=t.length,u=(0,n.getCoordsDataType)(o),$=r.map(e=>e[0]).join(","),c=r.map((e,n)=>e[0]+t[n]).join(","),a=(0,e.getChannels)("rc",o),i=(0,e.getChannels)("source",o),l=`${a[o-1]} < ${this.outputShape[o-1]}`,g=1===o?"source":`vec2(${i.slice(-2).join()})`,p="reflect"===s?0:1;let h="";if(1===o){const e=`\n        ${u} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${p};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${p};\n        }\n        source -= start;\n      `;h=`\n        ${u} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${i.join()}), ${g});\n        ${a[o-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${i.join()}), ${g});\n        }\n      `}else{const e=`\n        ${u} source = rc;\n        ${u} lt = ${u}(lessThan(source, start));\n        ${u} gte = ${u}(greaterThanEqual(source, end));\n        ${u} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${p}) +\n                gte * ((end - 1) * 2 - source + ${p});\n        source -= start;\n      `;h=`\n        ${u} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${i.join()}), ${g});\n        ${a[o-1]} += 1;\n        if(${l}) {\n          ${e}\n          result[1] = getChannel(getX(${i.join()}), ${g});\n        }\n        rc = outputLoc;\n        ${a[o-2]} += 1;\n        if(${a[o-2]} < ${this.outputShape[o-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${i.join()}), ${g});\n          ${a[o-1]} += 1;\n          if(${l}) {\n            ${e}\n            result[3] = getChannel(getX(${i.join()}), ${g});\n          }\n        }\n      `}this.userCode=`\n      const ${u} start = ${u}(${$});\n      const ${u} end = ${u}(${c});\n\n      void main() {\n        ${u} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}exports.MirrorPadPackedProgram=t;
},{"./packing_util":"ioBk","./shader_compiler":"GECe"}],"q9gR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPadConfig=exports.mirrorPadKernelFunc=void 0;var r=require("@tensorflow/tfjs-core"),e=require("../mirror_pad_gpu"),o=require("../mirror_pad_packed_gpu");const a=({inputs:a,backend:n,attrs:d})=>{const{x:t}=a,{paddings:i,mode:s}=d,p=(0,r.env)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new o.MirrorPadPackedProgram(t.shape,i,s):new e.MirrorPadProgram(t.shape,i,s);return n.runWebGLProgram(p,[t],t.dtype)};exports.mirrorPadKernelFunc=a;const n={kernelName:r.MirrorPad,backendName:"webgl",kernelFunc:a};exports.mirrorPadConfig=n;
},{"@tensorflow/tfjs-core":"tKjQ","../mirror_pad_gpu":"DUnJ","../mirror_pad_packed_gpu":"ED5i"}],"pgT7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BinaryOpComplexProgram=exports.COMPLEX_MULTIPLY=void 0;var a=require("@tensorflow/tfjs-core");const e={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};exports.COMPLEX_MULTIPLY=e;class t{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=a.backend_util.assertAndGetBroadcastShape(t,r),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}exports.BinaryOpComplexProgram=t;
},{"@tensorflow/tfjs-core":"tKjQ"}],"WWjI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiply=d,exports.multiplyConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=s(require("../binaryop_complex_gpu")),a=require("../binaryop_gpu"),r=require("../binaryop_packed_gpu"),n=require("../kernel_utils/shared"),o=require("./Complex");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}const l="return a * b;";function d(p){const{inputs:s,backend:d}=p,{a:i,b:u}=s,c=e.backend_util.upcastType(i.dtype,u.dtype);if("complex64"===i.dtype){const e=d.texData.get(i.dataId),a=d.texData.get(u.dataId),r=new t.BinaryOpComplexProgram(t.COMPLEX_MULTIPLY.REAL,i.shape,u.shape),n=new t.BinaryOpComplexProgram(t.COMPLEX_MULTIPLY.IMAG,i.shape,u.shape),p=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:i.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:u.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:u.shape}],s=d.runWebGLProgram(r,p,"float32"),l=d.runWebGLProgram(n,p,"float32"),c=(0,o.complex)({inputs:{real:s,imag:l},backend:d});return d.disposeIntermediateTensorInfo(s),d.disposeIntermediateTensorInfo(l),c}if(d.shouldExecuteOnCPU([i,u])){const e=d.texData.get(i.dataId),t=d.texData.get(u.dataId),[a,r]=(0,n.multiplyImplCPU)(i.shape,u.shape,e.values,t.values,c),o=d.makeTensorInfo(r,c);return d.texData.get(o.dataId).values=a,o}let f;return f=(0,e.env)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new r.BinaryOpPackedProgram(l,i.shape,u.shape):new a.BinaryOpProgram(l,i.shape,u.shape),d.runWebGLProgram(f,[i,u],c)}const i={kernelName:e.Multiply,backendName:"webgl",kernelFunc:d};exports.multiplyConfig=i;
},{"@tensorflow/tfjs-core":"tKjQ","../binaryop_complex_gpu":"pgT7","../binaryop_gpu":"loxm","../binaryop_packed_gpu":"tIa8","../kernel_utils/shared":"ND1T","./Complex":"Qnak"}],"MISy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3Config=void 0;var e=require("@tensorflow/tfjs-core");const n={kernelName:e.NonMaxSuppressionV3,backendName:"webgl",kernelFunc:({inputs:n,backend:s,attrs:o})=>{e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:a}=n,{maxOutputSize:t,iouThreshold:p,scoreThreshold:i}=o,u=s,d=u.readSync(r.dataId),l=u.readSync(a.dataId),c=t,x=p,S=i;return e.kernel_impls.nonMaxSuppressionV3Impl(d,l,c,x,S)}};exports.nonMaxSuppressionV3Config=n;
},{"@tensorflow/tfjs-core":"tKjQ"}],"pVnK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV4Config=void 0;var e=require("@tensorflow/tfjs-core");const n=e.kernel_impls.nonMaxSuppressionV4Impl,s={kernelName:e.NonMaxSuppressionV4,backendName:"webgl",kernelFunc:({inputs:s,backend:o,attrs:r})=>{e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:t,scores:a}=s,{maxOutputSize:p,iouThreshold:i,scoreThreshold:u,padToMaxOutputSize:d}=r,l=o,c=l.readSync(t.dataId),x=l.readSync(a.dataId),{selectedIndices:S,validOutputs:M}=n(c,x,p,i,u,d);return[S,M]}};exports.nonMaxSuppressionV4Config=s;
},{"@tensorflow/tfjs-core":"tKjQ"}],"uAlH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV5Config=void 0;var e=require("@tensorflow/tfjs-core");const s=e.kernel_impls.nonMaxSuppressionV5Impl,n={kernelName:e.NonMaxSuppressionV5,backendName:"webgl",kernelFunc:({inputs:n,backend:o,attrs:r})=>{e.backend_util.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:t,scores:a}=n,{maxOutputSize:i,iouThreshold:p,scoreThreshold:c,softNmsSigma:d}=r,l=o,u=l.readSync(t.dataId),x=l.readSync(a.dataId),S=i,f=p,b=c,k=d,{selectedIndices:m,selectedScores:M}=s(u,x,S,f,b,k);return[m,M]}};exports.nonMaxSuppressionV5Config=n;
},{"@tensorflow/tfjs-core":"tKjQ"}],"LqP7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RotateProgram=void 0;var o=require("@tensorflow/tfjs-core");class t{constructor(t,e,r,n){this.variableNames=["Image"],this.outputShape=[];const a=t[1],d=t[2],c=Math.sin(e).toFixed(3),u=Math.cos(e).toFixed(3);this.outputShape=t;const[i,s]=o.backend_util.getImageCenter(n,a,d),l=i.toFixed(3),f=s.toFixed(3);let p="";p="number"==typeof r?`float outputValue = ${r.toFixed(2)};`:`\n        vec3 fill = vec3(${r.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - ${l}) * ${u} - (float(y) - ${f}) * ${c};\n          float coordYFloat = (float(x) - ${l}) * ${c} + (float(y) - ${f}) * ${u};\n          int coordX = int(round(coordXFloat + ${l}));\n          int coordY = int(round(coordYFloat + ${f}));\n          ${p}\n          if(coordX >= 0 && coordX < ${d} && coordY >= 0 && coordY < ${a}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}exports.RotateProgram=t;
},{"@tensorflow/tfjs-core":"tKjQ"}],"Uq05":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffsetConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("../rotate_gpu");const r={kernelName:e.RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:e,attrs:r,backend:o})=>{const{image:a}=e,{radians:n,fillValue:s,center:i}=r,f=o,u=new t.RotateProgram(a.shape,n,s,i);return f.runWebGLProgram(u,[a],a.dtype)}};exports.rotateWithOffsetConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../rotate_gpu":"LqP7"}],"O1vO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinConfig=exports.sin=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r=n.CHECK_NAN_SNIPPET_UNARY+"\n  return sin(x);\n",s=(0,n.unaryKernelFunc)(r);exports.sin=s;const t={kernelName:e.Sin,backendName:"webgl",kernelFunc:s};exports.sinConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3"}],"k7uk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squareConfig=exports.square=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const s="return x * x;",n=(0,r.unaryKernelFunc)(s);exports.square=n;const u={kernelName:e.Square,backendName:"webgl",kernelFunc:n};exports.squareConfig=u;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3"}],"vrVm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifferenceConfig=exports.squaredDifference=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils");const n="return (a - b) * (a - b);",s=(0,r.binaryKernelFunc)({opSnippet:n,packedOpSnippet:n});exports.squaredDifference=s;const t={kernelName:e.SquaredDifference,backendName:"webgl",kernelFunc:s};exports.squaredDifferenceConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3"}],"e74w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subConfig=exports.subKernelFunc=void 0;var e=require("@tensorflow/tfjs-core"),r=require("../kernel_utils/kernel_funcs_utils"),n=require("../kernel_utils/shared");const s="return a - b;",u=(0,r.binaryKernelFunc)({opSnippet:s,packedOpSnippet:s,supportsComplex:!0,cpuKernelImpl:n.subImplCPU});exports.subKernelFunc=u;const t={kernelName:e.Sub,backendName:"webgl",kernelFunc:u};exports.subConfig=t;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3","../kernel_utils/shared":"ND1T"}],"adk7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanConfig=exports.tan=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/kernel_funcs_utils");const r="return tan(x);",t=(0,n.unaryKernelFunc)(r);exports.tan=t;const o={kernelName:e.Tan,backendName:"webgl",kernelFunc:t};exports.tanConfig=o;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/kernel_funcs_utils":"xHF3"}],"L0iJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transposeConfig=void 0;var e=require("@tensorflow/tfjs-core"),t=require("./Transpose_impl");const s={kernelName:e.Transpose,backendName:"webgl",kernelFunc:({inputs:e,attrs:s,backend:r})=>{const{x:a}=e,{perm:n}=s,o=r,p=a.shape.length,l=new Array(p);for(let t=0;t<l.length;t++)l[t]=a.shape[n[t]];let d;if(o.shouldExecuteOnCPU([a])){const e=o.texData.get(a.dataId).values,s=(0,t.transposeImplCPU)(e,a.shape,a.dtype,n,l);d=o.makeTensorInfo(l,a.dtype),o.texData.get(d.dataId).values=s}else d=(0,t.transposeImpl)(a,n,o);return d}};exports.transposeConfig=s;
},{"@tensorflow/tfjs-core":"tKjQ","./Transpose_impl":"faw6"}],"PI4G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=o,exports.uniqueConfig=void 0;var e=require("@tensorflow/tfjs-core"),n=require("../kernel_utils/shared"),t=require("../webgl_util");function o(e){const{inputs:o,attrs:r,backend:u}=e,{axis:s}=r,{x:i}=o;(0,t.assertNotComplex)(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=u.readSync(i.dataId),{outputValues:l,outputShape:d,indices:p}=(0,n.uniqueImplCPU)(a,s,i.shape,i.dtype);return[u.makeTensorInfo(d,i.dtype,l),u.makeTensorInfo([p.length],"int32",p)]}const r={kernelName:e.Unique,backendName:"webgl",kernelFunc:o};exports.uniqueConfig=r;
},{"@tensorflow/tfjs-core":"tKjQ","../kernel_utils/shared":"ND1T","../webgl_util":"ElKU"}],"UPcZ":[function(require,module,exports) {
"use strict";var e=require("@tensorflow/tfjs-core"),r=require("./kernels/Add"),n=require("./kernels/Atan2"),i=require("./kernels/AvgPool"),o=require("./kernels/AvgPoolBackprop"),s=require("./kernels/BatchNorm"),l=require("./kernels/Cast"),u=require("./kernels/Complex"),f=require("./kernels/Concat"),a=require("./kernels/Cos"),g=require("./kernels/Div"),q=require("./kernels/FFT"),k=require("./kernels/FlipLeftRight"),t=require("./kernels/FromPixels"),C=require("./kernels/Identity"),p=require("./kernels/IFFT"),x=require("./kernels/Imag"),c=require("./kernels/Max"),m=require("./kernels/MaxPool"),P=require("./kernels/MaxPoolBackprop"),M=require("./kernels/MaxPoolWithArgmax"),d=require("./kernels/Mean"),h=require("./kernels/MirrorPad"),S=require("./kernels/Multiply"),v=require("./kernels/NonMaxSuppressionV3"),A=require("./kernels/NonMaxSuppressionV4"),F=require("./kernels/NonMaxSuppressionV5"),N=require("./kernels/NotEqual"),V=require("./kernels/Real"),B=require("./kernels/Reshape"),R=require("./kernels/RotateWithOffset"),y=require("./kernels/Sin"),T=require("./kernels/Square"),W=require("./kernels/SquaredDifference"),b=require("./kernels/Sub"),D=require("./kernels/Tan"),I=require("./kernels/Transpose"),E=require("./kernels/Unique");const L=[r.addConfig,n.atan2Config,i.avgPoolConfig,o.avgPoolBackpropConfig,s.batchNormConfig,l.castConfig,u.complexConfig,f.concatConfig,a.cosConfig,g.divConfig,q.fftConfig,k.flipLeftRightConfig,t.fromPixelsConfig,C.identityConfig,p.ifftConfig,x.imagConfig,c.maxConfig,m.maxPoolConfig,P.maxPoolBackpropConfig,M.maxPoolWithArgmaxConfig,d.meanConfig,h.mirrorPadConfig,S.multiplyConfig,v.nonMaxSuppressionV3Config,A.nonMaxSuppressionV4Config,F.nonMaxSuppressionV5Config,N.notEqualConfig,V.realConfig,B.reshapeConfig,R.rotateWithOffsetConfig,y.sinConfig,T.squareConfig,b.subConfig,W.squaredDifferenceConfig,D.tanConfig,I.transposeConfig,E.uniqueConfig];for(const O of L)(0,e.registerKernel)(O);
},{"@tensorflow/tfjs-core":"tKjQ","./kernels/Add":"DrXz","./kernels/Atan2":"RIca","./kernels/AvgPool":"W99P","./kernels/AvgPoolBackprop":"hVEz","./kernels/BatchNorm":"MYZS","./kernels/Cast":"Fsse","./kernels/Complex":"Qnak","./kernels/Concat":"w26z","./kernels/Cos":"AOb9","./kernels/Div":"xtJM","./kernels/FFT":"zOz0","./kernels/FlipLeftRight":"fUoD","./kernels/FromPixels":"lXc4","./kernels/Identity":"L3yO","./kernels/IFFT":"tJvL","./kernels/Imag":"zt6p","./kernels/Max":"pDtF","./kernels/MaxPool":"YLV8","./kernels/MaxPoolBackprop":"sZbe","./kernels/MaxPoolWithArgmax":"c9vI","./kernels/Mean":"JQwh","./kernels/MirrorPad":"q9gR","./kernels/Multiply":"WWjI","./kernels/NonMaxSuppressionV3":"MISy","./kernels/NonMaxSuppressionV4":"pVnK","./kernels/NonMaxSuppressionV5":"uAlH","./kernels/NotEqual":"jUHD","./kernels/Real":"BZba","./kernels/Reshape":"LDhO","./kernels/RotateWithOffset":"Uq05","./kernels/Sin":"O1vO","./kernels/Square":"k7uk","./kernels/SquaredDifference":"vrVm","./kernels/Sub":"e74w","./kernels/Tan":"adk7","./kernels/Transpose":"L0iJ","./kernels/Unique":"PI4G"}],"QWbV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})}),require("./register_all_kernels");
},{"./base":"nWkO","./register_all_kernels":"UPcZ"}],"R3p7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:!0,data:!0};exports.data=exports.version=void 0;var r=require("@tensorflow/tfjs-core");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var t=require("@tensorflow/tfjs-layers");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("@tensorflow/tfjs-converter");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=u(require("@tensorflow/tfjs-data"));exports.data=n;var s=require("@tensorflow/tfjs-backend-cpu"),a=require("@tensorflow/tfjs-backend-webgl"),f=require("./version");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=o?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(t,n,s):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}const i={"tfjs-core":r.version_core,"tfjs-backend-cpu":s.version_cpu,"tfjs-backend-webgl":a.version_webgl,"tfjs-data":n.version_data,"tfjs-layers":t.version_layers,"tfjs-converter":o.version_converter,tfjs:f.version};exports.version=i;
},{"@tensorflow/tfjs-core":"tKjQ","@tensorflow/tfjs-layers":"QdjH","@tensorflow/tfjs-converter":"Fdt9","@tensorflow/tfjs-data":"vb3M","@tensorflow/tfjs-backend-cpu":"txfD","@tensorflow/tfjs-backend-webgl":"QWbV","./version":"yMuw"}],"XNpt":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(null!=n)for(var c in n)"default"!==c&&Object.prototype.hasOwnProperty.call(n,c)&&e(i,n,c);return t(i,n),i};Object.defineProperty(exports,"__esModule",{value:!0});var i=n(require("@tensorflow/tfjs"));document.getElementById("q1-1b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q1-1c"),t=e.getContext("2d"),i=new Image;i.onload=function(){console.log(i.height,i.width),e.height=i.height,e.width=i.width,t.drawImage(i,0,0),document.getElementById("w").innerText="width: "+i.width,document.getElementById("h").innerText="height: "+i.height},i.src=n.result}),n.readAsDataURL(t[0])},e.click()},document.getElementById("q1-2b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q1-2c"),t=(e.getContext("2d"),new Image);t.onload=function(){return i.tidy(function(){e.height=t.height,e.width=t.width;var n=i.browser.fromPixels(t,3),c=n.unstack(-1),o=c[0],r=c[1],a=c[2],d=i.zerosLike(o);i.browser.toPixels(i.concat([n,i.stack([o,d,d],-1),i.stack([d,r,d],-1),i.stack([d,d,a],-1)],1),e)})},t.src=n.result}),n.readAsDataURL(t[0])},e.click()},document.getElementById("q1-3b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q1-3c"),t=(e.getContext("2d"),new Image);t.onload=function(){return i.tidy(function(){e.height=t.height,e.width=t.width;var n=i.browser.fromPixels(t,3);i.browser.toPixels(i.concat([n,n.reverse(1)],1),e)})},t.src=n.result}),n.readAsDataURL(t[0])},e.click()},document.getElementById("q1-4b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q1-4c"),t=(e.getContext("2d"),new Image);t.onload=function(){e.height=t.height,e.width=t.width;var n=function(){return i.tidy(function(){var n=Number(document.getElementById("combine").value),c=i.browser.fromPixels(t,3).div(255);i.browser.toPixels(i.add(i.mul(c,(100-n)/100),i.mul(c.reverse(1),n/100)),e)})};document.getElementById("combine").onchange=n,n()},t.src=n.result}),n.readAsDataURL(t[0])},e.click()};
},{"@tensorflow/tfjs":"R3p7"}],"iQYB":[function(require,module,exports) {
"use strict";var r=this&&this.__spreadArrays||function(){for(var r=0,n=0,t=arguments.length;n<t;n++)r+=arguments[n].length;var e=Array(r),a=0;for(n=0;n<t;n++)for(var o=arguments[n],i=0,l=o.length;i<l;i++,a++)e[a]=o[i];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.bilateralFilter=exports.median7x7=exports.conv3x3=exports.gaussianKernel3x3=exports.gray=void 0,exports.gray=function(r){for(var n=r.length,t=r[0].length,e=new Array(n).fill(0).map(function(){return new Array(t).fill(0)}),a=0;a<n;a++)for(var o=0;o<t;o++)e[a][o]=r[a][o].reduce(function(r,n){return r+n},0)/r[a][o].length;return e},exports.gaussianKernel3x3=function(r){return[[2,1,2],[1,0,1],[2,1,2]].map(function(n){return n.map(function(n){return Math.exp(-n/(2*Math.pow(r,2)))/(2*Math.PI*Math.pow(r,2))})})},exports.conv3x3=function(r,n){for(var t=r.length,e=r[0].length,a=new Array(t).fill(0).map(function(){return new Array(e).fill(0)}),o=0;o<t;o++)for(var i=0;i<e;i++)o-1>0&&(i-1>0&&(a[o][i]+=r[o-1][i-1]*n[0][0]),a[o][i]+=r[o-1][i]*n[0][1],i+1<e&&(a[o][i]+=r[o-1][i+1]*n[0][2])),i-1>0&&(a[o][i]+=r[o][i-1]*n[1][0]),a[o][i]+=r[o][i]*n[1][1],i+1<e&&(a[o][i]+=r[o][i+1]*n[1][2]),o+1<t&&(i-1>0&&(a[o][i]+=r[o+1][i-1]*n[2][0]),a[o][i]+=r[o+1][i]*n[2][1],i+1<e&&(a[o][i]+=r[o+1][i+1]*n[2][2]));return a},exports.median7x7=function(n){for(var t=n.length,e=n[0].length,a=new Array(t).fill(0).map(function(){return new Array(e).fill(0)}),o=0;o<t;o++)for(var i=function(t){var e=n.slice(o-3>0?o-3:0,o+3+1).reduce(function(n,e){return r(n,e.slice(t-3>0?t-3:0,t+3+1))},[]).sort(function(r,n){return r-n});a[o][t]=e[Math.floor(e.length/2)]},l=0;l<e;l++)i(l);return a};var n=function(r,n){return Math.exp(-n/(2*Math.pow(r,2)))/(2*Math.PI*Math.pow(r,2))},t=function(r,n){return Math.pow(Math.pow(r,2)+Math.pow(n,2),.5)};exports.bilateralFilter=function(r,e,a,o,i){for(var l=r.length,u=r[0].length,f=new Array(l).fill(0).map(function(){return new Array(u).fill(0)}),h=0;h<l;h++)for(var p=0;p<u;p++){for(var c=0,s=0,v=h-o>0?h-o:0;v<Math.min(h+o+1,l);v++)for(var x=p-i>0?p-i:0;x<Math.min(p+i+1,u);x++){var g=n(e,t(h-v,p-x)),M=n(a,Math.abs(r[h][p]-r[v][x]));c+=g*M,s+=g*M*r[v][x]}f[h][p]=s/c}return f};
},{}],"ocZg":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var r={};if(null!=n)for(var a in n)"default"!==a&&Object.prototype.hasOwnProperty.call(n,a)&&e(r,n,a);return t(r,n),r};Object.defineProperty(exports,"__esModule",{value:!0});var r=n(require("@tensorflow/tfjs")),a=require("./conv");document.getElementById("q2-1b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q2-1c"),t=(e.getContext("2d"),new Image);t.onload=function(){e.height=t.height,e.width=t.width;var n=r.browser.fromPixels(t,3).div(255).unstack(-1).map(function(e){return e.arraySync()});r.browser.toPixels(r.concat([r.tensor3d(n).transpose([1,2,0]),r.tensor3d(n.map(function(e){return a.median7x7(e)})).transpose([1,2,0])],1),e)},t.src=n.result}),n.readAsDataURL(t[0])},e.click()},document.getElementById("q2-2b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q2-2c"),t=(e.getContext("2d"),new Image);t.onload=function(){e.height=t.height,e.width=t.width;var n=r.browser.fromPixels(t,3).div(255),a=r.tensor2d([[1,2,1],[2,4,2],[1,2,1]]).div(16);r.browser.toPixels(r.concat([n,r.conv2d(n.transpose([2,0,1]).expandDims(-1),a.reshape([3,3,1,1]),1,"same").squeeze([-1]).transpose([1,2,0])],1),e)},t.src=n.result}),n.readAsDataURL(t[0])},e.click()},document.getElementById("q2-3b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q2-3c"),t=(e.getContext("2d"),new Image);t.onload=function(){e.height=t.height,e.width=t.width;var n=r.browser.fromPixels(t,3).unstack(-1).map(function(e){return e.arraySync()});r.browser.toPixels(r.concat([r.tensor3d(n).transpose([1,2,0]),r.tensor3d(n.map(function(e){return a.bilateralFilter(e,Number(document.getElementById("sigmaSpace").value),Number(document.getElementById("sigmaColor").value),Number(document.getElementById("halfHeight").value),Number(document.getElementById("halfWidth").value))})).transpose([1,2,0])],1).div(255),e)},t.src=n.result}),n.readAsDataURL(t[0])},e.click()};
},{"@tensorflow/tfjs":"R3p7","./conv":"iQYB"}],"qnQs":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var r={};if(null!=n)for(var o in n)"default"!==o&&Object.prototype.hasOwnProperty.call(n,o)&&e(r,n,o);return t(r,n),r},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],l=0,i=a.length;l<i;l++,o++)r[o]=a[l];return r};Object.defineProperty(exports,"__esModule",{value:!0});var o=n(require("@tensorflow/tfjs")),a=require("./conv"),l={_1:null,_2:null,_3:null};document.getElementById("q3-1b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q3-1c"),t=(e.getContext("2d"),new Image);t.onload=function(){e.height=t.height,e.width=t.width;var n=o.browser.fromPixels(t,3).div(255).arraySync(),r=a.gray(n);l._1=a.conv3x3(r,a.gaussianKernel3x3(1)),l._2=null,l._3=null,o.browser.toPixels(o.tensor(l._1),e)},t.src=n.result}),n.readAsDataURL(t[0])},e.click()},document.getElementById("q3-2b").onclick=function(){if(null!=l._1){var e=document.getElementById("q3-2c");e.getContext("2d");e.height=l._1.length,e.width=l._1[0].length,l._2=a.conv3x3(l._1,[[-1,0,1],[-2,0,2],[-1,0,1]]),l._2=l._2.map(function(e){return e.map(function(e){return Math.abs(e)})});var t=Math.max.apply(Math,l._2.reduce(function(e,t){return r(e,t)},[]));l._2=l._2.map(function(e){return e.map(function(e){return e/t})}),o.browser.toPixels(o.tensor(l._2),e)}else alert(" Q3-1")},document.getElementById("q3-3b").onclick=function(){if(null!=l._1){var e=document.getElementById("q3-3c");e.getContext("2d");e.height=l._1.length,e.width=l._1[0].length,l._3=a.conv3x3(l._1,[[1,2,1],[0,0,0],[-1,-2,-1]]),l._3=l._3.map(function(e){return e.map(function(e){return Math.abs(e)})});var t=Math.max.apply(Math,l._3.reduce(function(e,t){return r(e,t)},[]));l._3=l._3.map(function(e){return e.map(function(e){return e/t})}),o.browser.toPixels(o.tensor(l._3),e)}else alert(" Q3-1")},document.getElementById("q3-4b").onclick=function(){if(null!=l._2)if(null!=l._3){var e=document.getElementById("q3-4c");e.getContext("2d");e.height=l._1.length,e.width=l._1[0].length;for(var t=new Array(l._1.length).fill(0).map(function(){return new Array(l._1[0].length).fill(0)}),n=0;n<t.length;n++)for(var a=0;a<t[0].length;a++)t[n][a]=Math.sqrt(Math.pow(l._2[n][a],2)+Math.pow(l._3[n][a],2));var i=Math.max.apply(Math,t.reduce(function(e,t){return r(e,t)},[])),u=Math.min.apply(Math,t.reduce(function(e,t){return r(e,t)},[]));console.log(u),console.log(i),t=t.map(function(e){return e.map(function(e){return(e-u)/(i-u)})}),o.browser.toPixels(o.tensor(t),e)}else alert(" Q3-3");else alert(" Q3-2")};
},{"@tensorflow/tfjs":"R3p7","./conv":"iQYB"}],"QgSF":[function(require,module,exports) {
document.getElementById("q4-1b").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=document.getElementById("q4-1c"),t=e.getContext("2d"),m=new Image;m.onload=function(){e.width=m.width,e.height=m.height,document.getElementById("Cx").max=""+m.height,document.getElementById("Cy").max=""+m.width;var n=function(){return Number(document.getElementById("Cx").value)},d=function(){return Number(document.getElementById("Cy").value)},o=function(){return Number(document.getElementById("scaling").value)},c=function(){t.save(),t.translate(n()+Number(document.getElementById("Tx").value),d()+Number(document.getElementById("Ty").value)),t.scale(o(),o()),t.rotate(-Number(document.getElementById("rotation").value)/180*Math.PI),t.drawImage(m,-n(),-d()),t.restore()},u=function(){t.clearRect(0,0,e.width,e.height),t.rect(0,0,e.width,e.height),t.fillStyle="#000",t.fill(),c()};document.getElementById("Cx").onchange=u,document.getElementById("Cy").onchange=u,document.getElementById("rotation").onchange=u,document.getElementById("scaling").onchange=u,document.getElementById("Tx").onchange=u,document.getElementById("Ty").onchange=u,document.getElementById("Cx").oninput=u,document.getElementById("Cy").oninput=u,document.getElementById("rotation").oninput=u,document.getElementById("scaling").oninput=u,document.getElementById("Tx").oninput=u,document.getElementById("Ty").oninput=u,u()},m.src=n.result}),n.readAsDataURL(t[0])},e.click()};
},{}],"oMtQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=c,exports.__generator=u,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=_,exports.__await=b,exports.__asyncGenerator=h,exports.__asyncDelegator=d,exports.__asyncValues=v,exports.__makeTemplateObject=w,exports.__importStar=m,exports.__importDefault=O,exports.__classPrivateFieldGet=g,exports.__classPrivateFieldSet=j,exports.__createBinding=exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{u(n.next(t))}catch(e){a(e)}}function c(t){try{u(n.throw(t))}catch(e){a(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,c)}u((n=n.apply(t,e||[])).next())})}function u(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}exports.__assign=r;var f=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function l(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||f(e,t,r)}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)n[o]=a[i];return n}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function h(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||c(t,e)})})}function c(t,e){try{(r=o[t](e)).value instanceof b?Promise.resolve(r.value.v).then(u,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function u(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function d(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:b(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function v(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}exports.__createBinding=f;var x=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function m(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&f(e,t,r);return x(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function g(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function j(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}
},{}],"dDko":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},t=e;exports.default=t;
},{}],"QjS7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r,t){return!!(0,e.default)(r)&&r.indexOf(t)>-1},u=t;exports.default=u;
},{"./is-array-like":"dDko"}],"DRXI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r,t){if(!(0,e.default)(r))return r;for(var u=[],a=0;a<r.length;a++){var o=r[a];t(o,a)&&u.push(o)}return u},u=t;exports.default=u;
},{"./is-array-like":"dDko"}],"a5fq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./filter")),t=r(require("./contains"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(r,u){return void 0===u&&(u=[]),(0,e.default)(r,function(e){return!(0,t.default)(u,e)})},n=u;exports.default=n;
},{"./filter":"DRXI","./contains":"QjS7"}],"xriw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={}.toString,t=function(t,r){return e.call(t)==="[object "+r+"]"},r=t;exports.default=r;
},{}],"f69u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-type"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t,"Function")};exports.default=r;
},{"./is-type":"xriw"}],"CMm8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){return null==e},t=e;exports.default=t;
},{}],"Wxe8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e(require("./is-type"));function e(r){return r&&r.__esModule?r:{default:r}}var t=function(e){return Array.isArray?Array.isArray(e):(0,r.default)(e,"Array")};exports.default=t;
},{"./is-type":"xriw"}],"Dwjh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};exports.default=e;
},{}],"dFs3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-array")),r=t(require("./is-object"));function t(e){return e&&e.__esModule?e:{default:e}}function a(t,a){if(t)if((0,e.default)(t))for(var f=0,i=t.length;f<i&&!1!==a(t[f],f);f++);else if((0,r.default)(t))for(var u in t)if(t.hasOwnProperty(u)&&!1===a(t[u],u))break}var f=a;exports.default=f;
},{"./is-array":"Wxe8","./is-object":"Dwjh"}],"dBJG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./each")),t=r(require("./is-function"));function r(e){return e&&e.__esModule?e:{default:e}}var u=Object.keys?function(e){return Object.keys(e)}:function(r){var u=[];return(0,e.default)(r,function(e,n){(0,t.default)(r)&&"prototype"===n||u.push(n)}),u},n=u;exports.default=n;
},{"./each":"dFs3","./is-function":"f69u"}],"RoyM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-nil")),r=t(require("./keys"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){var i=(0,r.default)(u),n=i.length;if((0,e.default)(t))return!n;for(var a=0;a<n;a+=1){var f=i[a];if(u[f]!==t[f]||!(f in t))return!1}return!0}var i=u;exports.default=i;
},{"./is-nil":"CMm8","./keys":"dBJG"}],"Dq1j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){return"object"==typeof e&&null!==e},t=e;exports.default=t;
},{}],"dZoM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-object-like")),t=r(require("./is-type"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(r){if(!(0,e.default)(r)||!(0,t.default)(r,"Object"))return!1;if(null===Object.getPrototypeOf(r))return!0;for(var o=r;null!==Object.getPrototypeOf(o);)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(r)===o},u=o;exports.default=u;
},{"./is-object-like":"Dq1j","./is-type":"xriw"}],"YFiT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./is-function")),r=i(require("./is-match")),t=i(require("./is-array")),u=i(require("./is-plain-object"));function i(e){return e&&e.__esModule?e:{default:e}}function n(i,n){if(!(0,t.default)(i))return null;var a;if((0,e.default)(n)&&(a=n),(0,u.default)(n)&&(a=function(e){return(0,r.default)(e,n)}),a)for(var f=0;f<i.length;f+=1)if(a(i[f]))return i[f];return null}var a=n;exports.default=a;
},{"./is-function":"f69u","./is-match":"RoyM","./is-array":"Wxe8","./is-plain-object":"dZoM"}],"xaCA":[function(require,module,exports) {
"use strict";function e(e,r,t){void 0===t&&(t=0);for(var o=t;o<e.length;o++)if(r(e[o],o))return o;return-1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e;exports.default=r;
},{}],"dC86":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-nil")),r=t(require("./is-array"));function t(e){return e&&e.__esModule?e:{default:e}}var u=function(t,u){for(var a=null,l=0;l<t.length;l++){var i=t[l][u];if(!(0,e.default)(i)){a=(0,r.default)(i)?i[0]:i;break}}return a},a=u;exports.default=a;
},{"./is-nil":"CMm8","./is-array":"Wxe8"}],"KO3D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){if(!(0,e.default)(r))return[];for(var t=[],u=0;u<r.length;u++)t=t.concat(r[u]);return t},u=t;exports.default=u;
},{"./is-array":"Wxe8"}],"uD6C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r,u){if(void 0===u&&(u=[]),(0,e.default)(r))for(var o=0;o<r.length;o+=1)t(r[o],u);else u.push(r);return u},u=t;exports.default=u;
},{"./is-array":"Wxe8"}],"MCe5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){var t=r.filter(function(e){return!isNaN(e)});if(!t.length)return{min:0,max:0};if((0,e.default)(r[0])){for(var a=[],n=0;n<r.length;n++)a=a.concat(r[n]);t=a}var u=Math.max.apply(null,t);return{min:Math.min.apply(null,t),max:u}},a=t;exports.default=a;
},{"./is-array":"Wxe8"}],"aJ09":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=Array.prototype,r=e.splice,t=e.indexOf,o=function(e){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];for(var a=0;a<o.length;a++)for(var f=o[a],n=-1;(n=t.call(e,f))>-1;)r.call(e,n,1);return e},l=o;exports.default=l;
},{}],"voCS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}var t=Array.prototype.splice,u=function(r,u){if(!(0,e.default)(r))return[];for(var a=r?u.length:0,o=a-1;a--;){var l=void 0,i=u[a];a!==o&&i===l||(l=i,t.call(r,i,1))}return r},a=u;exports.default=a;
},{"./is-array-like":"dDko"}],"Odow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./each")),r=u(require("./is-array")),t=u(require("./is-plain-object"));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(u,a,i){if(!(0,r.default)(u)&&!(0,t.default)(u))return u;var f=i;return(0,e.default)(u,function(e,r){f=a(f,e,r)}),f},i=a;exports.default=i;
},{"./each":"dFs3","./is-array":"Wxe8","./is-plain-object":"dZoM"}],"lfZ1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-array-like")),r=t(require("./pull-at"));function t(e){return e&&e.__esModule?e:{default:e}}var u=function(t,u){var a=[];if(!(0,e.default)(t))return a;for(var l=-1,f=[],i=t.length;++l<i;){var o=t[l];u(o,l,t)&&(a.push(o),f.push(l))}return(0,r.default)(t,f),a},a=u;exports.default=a;
},{"./is-array-like":"dDko","./pull-at":"voCS"}],"eXwN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-type"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t,"String")};exports.default=r;
},{"./is-type":"xriw"}],"PFR4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=u(require("./is-array")),e=u(require("./is-string")),t=u(require("./is-function"));function u(r){return r&&r.__esModule?r:{default:r}}function n(u,n){var i;if((0,t.default)(n))i=function(r,e){return n(r)-n(e)};else{var f=[];(0,e.default)(n)?f.push(n):(0,r.default)(n)&&(f=n),i=function(r,e){for(var t=0;t<f.length;t+=1){var u=f[t];if(r[u]>e[u])return 1;if(r[u]<e[u])return-1}return 0}}return u.sort(i),u}var i=n;exports.default=i;
},{"./is-array":"Wxe8","./is-string":"eXwN","./is-function":"f69u"}],"vgWB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./contains")),t=r(require("./each"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(r){var u=[];return(0,t.default)(r,function(t){(0,e.default)(u,t)||u.push(t)}),u},a=u;exports.default=a;
},{"./contains":"QjS7","./each":"dFs3"}],"eUot":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./uniq"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(0,e.default)([].concat.apply([],t))},u=r;exports.default=u;
},{"./uniq":"vgWB"}],"ZKMR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-array")),r=t(require("./is-nil"));function t(e){return e&&e.__esModule?e:{default:e}}var u=function(t,u){for(var a=[],f={},i=0;i<t.length;i++){var l=t[i][u];if(!(0,r.default)(l)){(0,e.default)(l)||(l=[l]);for(var o=0;o<l.length;o++){var n=l[o];f[n]||(a.push(n),f[n]=!0)}}}return a};exports.default=u;
},{"./is-array":"Wxe8","./is-nil":"CMm8"}],"o5eg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if((0,e.default)(r))return r[0]}
},{"./is-array-like":"dDko"}],"uQNm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if((0,e.default)(r)){return r[r.length-1]}}
},{"./is-array-like":"dDko"}],"x1fF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-array")),r=t(require("./is-string"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){return!(!(0,e.default)(t)&&!(0,r.default)(t))&&t[0]===u}var a=u;exports.default=a;
},{"./is-array":"Wxe8","./is-string":"eXwN"}],"dEjH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-array")),r=t(require("./is-string"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t,u){return!(!(0,e.default)(t)&&!(0,r.default)(t))&&t[t.length-1]===u}var a=u;exports.default=a;
},{"./is-array":"Wxe8","./is-string":"eXwN"}],"ymEL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,r){for(var t=0;t<e.length;t++)if(!r(e[t],t))return!1;return!0},r=e;exports.default=r;
},{}],"HsDc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,r){for(var t=0;t<e.length;t++)if(r(e[t],t))return!0;return!1},r=e;exports.default=r;
},{}],"jgRc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-array")),r=t(require("./is-function"));function t(e){return e&&e.__esModule?e:{default:e}}var u=Object.prototype.hasOwnProperty;function a(t,a){if(!a||!(0,e.default)(t))return{};for(var n,o={},f=(0,r.default)(a)?a:function(e){return e[a]},i=0;i<t.length;i++){var l=t[i];n=f(l),u.call(o,n)?o[n].push(l):o[n]=[l]}return o}var n=a;exports.default=n;
},{"./is-array":"Wxe8","./is-function":"f69u"}],"k9fR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./is-array")),r=u(require("./is-function")),t=u(require("./group-by"));function u(e){return e&&e.__esModule?e:{default:e}}var i=function(u,i){if(!i)return{0:u};if(!(0,r.default)(i)){var n=(0,e.default)(i)?i:i.replace(/\s+/g,"").split("*");i=function(e){for(var r="_",t=0,u=n.length;t<u;t++)r+=e[n[t]]&&e[n[t]].toString();return r}}return(0,t.default)(u,i)},n=i;exports.default=n;
},{"./is-array":"Wxe8","./is-function":"f69u","./group-by":"jgRc"}],"GYao":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./group-to-map"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r,t){if(!t)return[r];var u=(0,e.default)(r,t),o=[];for(var a in u)o.push(u[a]);return o};exports.default=t;
},{"./group-to-map":"k9fR"}],"O2yQ":[function(require,module,exports) {
"use strict";function e(e,t){return e["_wrap_"+t]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e;exports.default=t;
},{}],"rsmU":[function(require,module,exports) {
"use strict";function e(e,r){if(e["_wrap_"+r])return e["_wrap_"+r];var t=function(t){e[r](t)};return e["_wrap_"+r]=t,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e;exports.default=r;
},{}],"xaHh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={};function r(r){var t=e[r];if(!t){for(var o=r.toString(16),a=o.length;a<6;a++)o="0"+o;t="#"+o,e[r]=t}return t}var t=r;exports.default=t;
},{}],"x9k2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){var t=0,u=0,a=0,l=0;return(0,e.default)(r)?1===r.length?t=u=a=l=r[0]:2===r.length?(t=a=r[0],u=l=r[1]):3===r.length?(t=r[0],u=l=r[1],a=r[2]):(t=r[0],u=r[1],a=r[2],l=r[3]):t=u=a=l=r,{r1:t,r2:u,r3:a,r4:l}}var u=t;exports.default=u;
},{"./is-array":"Wxe8"}],"MCA6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,t,r){return e<t?t:e>r?r:e},t=e;exports.default=t;
},{}],"ZJfs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,t){var r=t.toString(),o=r.indexOf(".");if(-1===o)return Math.round(e);var u=r.substr(o+1).length;return u>20&&(u=20),parseFloat(e.toFixed(u))},t=e;exports.default=t;
},{}],"siSC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-type"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t,"Number")},u=r;exports.default=u;
},{"./is-type":"xriw"}],"RC0h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-number"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){return(0,e.default)(r)&&r%1!=0},u=t;exports.default=u;
},{"./is-number":"siSC"}],"bSlZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-number"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){return(0,e.default)(r)&&r%2==0},u=t;exports.default=u;
},{"./is-number":"siSC"}],"FS9I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-number"));function r(e){return e&&e.__esModule?e:{default:e}}var t=Number.isInteger?Number.isInteger:function(r){return(0,e.default)(r)&&r%1==0},u=t;exports.default=u;
},{"./is-number":"siSC"}],"kG86":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-number"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){return(0,e.default)(r)&&r<0},u=t;exports.default=u;
},{"./is-number":"siSC"}],"LrqL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=1e-5;function t(t,r,o){return void 0===o&&(o=e),Math.abs(t-r)<o}
},{}],"VsyG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-number"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){return(0,e.default)(r)&&r%2!=0},u=t;exports.default=u;
},{"./is-number":"siSC"}],"cS6z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-number"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){return(0,e.default)(r)&&r>0},u=t;exports.default=u;
},{"./is-number":"siSC"}],"nR7W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./each")),r=u(require("./is-array")),t=u(require("./is-function"));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(u,a){if((0,r.default)(u)){var f,i,d=u[0];return f=(0,t.default)(a)?a(u[0]):u[0][a],(0,e.default)(u,function(e){(i=(0,t.default)(a)?a(e):e[a])>f&&(d=e,f=i)}),d}};exports.default=a;
},{"./each":"dFs3","./is-array":"Wxe8","./is-function":"f69u"}],"N39t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./each")),r=u(require("./is-array")),t=u(require("./is-function"));function u(e){return e&&e.__esModule?e:{default:e}}var a=function(u,a){if((0,r.default)(u)){var f,i,d=u[0];return f=(0,t.default)(a)?a(u[0]):u[0][a],(0,e.default)(u,function(e){(i=(0,t.default)(a)?a(e):e[a])<f&&(d=e,f=i)}),d}};exports.default=a;
},{"./each":"dFs3","./is-array":"Wxe8","./is-function":"f69u"}],"OtOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,t){return(e%t+t)%t},t=e;exports.default=t;
},{}],"JK9d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=180/Math.PI,t=function(t){return e*t},r=t;exports.default=r;
},{}],"wcSz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=parseInt;exports.default=e;
},{}],"cWFm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=Math.PI/180,t=function(t){return e*t},r=t;exports.default=r;
},{}],"WVyh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./each"));function t(e){return e&&e.__esModule?e:{default:e}}var r=e.default;exports.default=r;
},{"./each":"dFs3"}],"lTjr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,t){return e.hasOwnProperty(t)};exports.default=e;
},{}],"LDmf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./has"));function t(e){return e&&e.__esModule?e:{default:e}}var r=e.default;exports.default=r;
},{"./has":"lTjr"}],"bFXP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./each")),t=u(require("./is-function"));function u(e){return e&&e.__esModule?e:{default:e}}var r=Object.values?function(e){return Object.values(e)}:function(u){var r=[];return(0,e.default)(u,function(e,n){(0,t.default)(u)&&"prototype"===n||r.push(e)}),r},n=r;exports.default=n;
},{"./each":"dFs3","./is-function":"f69u"}],"S1uy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./contains")),t=r(require("./values"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(r,u){return(0,e.default)((0,t.default)(r),u)};exports.default=u;
},{"./contains":"QjS7","./values":"bFXP"}],"qYPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-nil"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t)?"":t.toString()};exports.default=r;
},{"./is-nil":"CMm8"}],"AGmJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./to-string"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t).toLowerCase()},u=r;exports.default=u;
},{"./to-string":"qYPh"}],"ILPz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./to-string"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){var r=(0,e.default)(t);return r.charAt(0).toLowerCase()+r.substring(1)},u=r;exports.default=u;
},{"./to-string":"qYPh"}],"aC4d":[function(require,module,exports) {
"use strict";function e(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,function(e,r){return"\\"===e.charAt(0)?e.slice(1):void 0===t[r]?"":t[r]}):e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e;exports.default=t;
},{}],"zyMx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./to-string"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t).toUpperCase()},u=r;exports.default=u;
},{"./to-string":"qYPh"}],"yjFw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./to-string"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){var r=(0,e.default)(t);return r.charAt(0).toUpperCase()+r.substring(1)},u=r;exports.default=u;
},{"./to-string":"qYPh"}],"kelG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={}.toString,t=function(t){return e.call(t).replace(/^\[object /,"").replace(/]$/,"")},r=t;exports.default=r;
},{}],"w5fw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-type"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t,"Arguments")},u=r;exports.default=u;
},{"./is-type":"xriw"}],"j2x1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-type"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t,"Boolean")},u=r;exports.default=u;
},{"./is-type":"xriw"}],"FuxN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-type"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t,"Date")},u=r;exports.default=u;
},{"./is-type":"xriw"}],"e0Rf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-type"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){return(0,e.default)(r,"Error")},u=t;exports.default=u;
},{"./is-type":"xriw"}],"BRXE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./is-number"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){return(0,e.default)(t)&&isFinite(t)}
},{"./is-number":"siSC"}],"bmvc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){return null===e},t=e;exports.default=t;
},{}],"aqkN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=Object.prototype,e=function(e){var o=e&&e.constructor;return e===("function"==typeof o&&o.prototype||t)},o=e;exports.default=o;
},{}],"mONI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-type"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t){return(0,e.default)(t,"RegExp")},u=r;exports.default=u;
},{"./is-type":"xriw"}],"LQ5c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){return void 0===e},t=e;exports.default=t;
},{}],"n3IN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){return e instanceof Element||e instanceof HTMLDocument},t=e;exports.default=t;
},{}],"kgiN":[function(require,module,exports) {
"use strict";function e(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"dd6o":[function(require,module,exports) {
"use strict";function e(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"RIj8":[function(require,module,exports) {
"use strict";function e(e,r){for(var t in r)r.hasOwnProperty(t)&&"constructor"!==t&&void 0!==r[t]&&(e[t]=r[t])}function r(r,t,o,n){return t&&e(r,t),o&&e(r,o),n&&e(r,n),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"ccCX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./mix")),t=r(require("./is-function"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];for(var u=r[0],a=1;a<r.length;a++){var f=r[a];(0,t.default)(f)&&(f=f.prototype),(0,e.default)(u.prototype,f)}},u=o;exports.default=u;
},{"./mix":"RIj8","./is-function":"f69u"}],"GXvD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){if("object"!=typeof r||null===r)return r;var o;if((0,e.default)(r)){o=[];for(var u=0,l=r.length;u<l;u++)"object"==typeof r[u]&&null!=r[u]?o[u]=t(r[u]):o[u]=r[u]}else for(var f in o={},r)"object"==typeof r[f]&&null!=r[f]?o[f]=t(r[f]):o[f]=r[f];return o},o=t;exports.default=o;
},{"./is-array":"Wxe8"}],"Rr4Q":[function(require,module,exports) {
"use strict";function e(e,t,r){var u;return function(){var o=this,a=arguments,i=r&&!u;clearTimeout(u),u=setTimeout(function(){u=null,r||e.apply(o,a)},t),i&&e.apply(o,a)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e;exports.default=t;
},{}],"Vngn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-function"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r,t){if(!(0,e.default)(r))throw new TypeError("Expected a function");var a=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var u=t?t.apply(this,e):e[0],o=a.cache;if(o.has(u))return o.get(u);var i=r.apply(this,e);return o.set(u,i),i};return a.cache=new Map,a};exports.default=t;
},{"./is-function":"f69u"}],"doZO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-array")),r=t(require("./is-plain-object"));function t(e){return e&&e.__esModule?e:{default:e}}var a=5;function u(t,o,n,f){for(var i in n=n||0,f=f||a,o)if(o.hasOwnProperty(i)){var l=o[i];null!==l&&(0,r.default)(l)?((0,r.default)(t[i])||(t[i]={}),n<f?u(t[i],l,n+1,f):t[i]=o[i]):(0,e.default)(l)?(t[i]=[],t[i]=t[i].concat(l)):void 0!==l&&(t[i]=l)}}var o=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var a=0;a<r.length;a+=1)u(e,r[a]);return e},n=o;exports.default=n;
},{"./is-array":"Wxe8","./is-plain-object":"dZoM"}],"M4BO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./mix")),e=r(require("./is-function"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(r,o,u,n){(0,e.default)(o)||(u=o,o=r,r=function(){});var c=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function r(){}r.prototype=t;var o=new r;return o.constructor=e,o},a=c(o.prototype,r);return r.prototype=(0,t.default)(a,r.prototype),r.superclass=c(o.prototype,o),(0,t.default)(a,u),(0,t.default)(r,n),r},u=o;exports.default=u;
},{"./mix":"RIj8","./is-function":"f69u"}],"gsSi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r,t){if(!(0,e.default)(r))return-1;var u=Array.prototype.indexOf;if(u)return u.call(r,t);for(var a=-1,f=0;f<r.length;f++)if(r[f]===t){a=f;break}return a},u=t;exports.default=u;
},{"./is-array-like":"dDko"}],"YyBX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./is-nil")),r=i(require("./is-array-like")),t=i(require("./get-type")),u=i(require("./is-prototype"));function i(e){return e&&e.__esModule?e:{default:e}}var a=Object.prototype.hasOwnProperty;function n(i){if((0,e.default)(i))return!0;if((0,r.default)(i))return!i.length;var n=(0,t.default)(i);if("Map"===n||"Set"===n)return!i.size;if((0,u.default)(i))return!Object.keys(i).length;for(var f in i)if(a.call(i,f))return!1;return!0}var f=n;exports.default=f;
},{"./is-nil":"CMm8","./is-array-like":"dDko","./get-type":"kelG","./is-prototype":"aqkN"}],"ErEc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./is-object-like")),r=u(require("./is-array-like")),t=u(require("./is-string"));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(u,i){if(u===i)return!0;if(!u||!i)return!1;if((0,t.default)(u)||(0,t.default)(i))return!1;if((0,r.default)(u)||(0,r.default)(i)){if(u.length!==i.length)return!1;for(var n=!0,l=0;l<u.length&&(n=f(u[l],i[l]));l++);return n}if((0,e.default)(u)||(0,e.default)(i)){var a=Object.keys(u),d=Object.keys(i);if(a.length!==d.length)return!1;for(n=!0,l=0;l<a.length&&(n=f(u[a[l]],i[a[l]]));l++);return n}return!1},i=f;exports.default=i;
},{"./is-object-like":"Dq1j","./is-array-like":"dDko","./is-string":"eXwN"}],"RABN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./is-function")),t=u(require("./is-equal"));function u(e){return e&&e.__esModule?e:{default:e}}var r=function(u,r,i){return(0,e.default)(i)?!!i(u,r):(0,t.default)(u,r)};exports.default=r;
},{"./is-function":"f69u","./is-equal":"ErEc"}],"wRwB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r,t){if(!(0,e.default)(r))return r;for(var u=[],a=0;a<r.length;a++){var o=r[a];u.push(t(o,a))}return u},u=t;exports.default=u;
},{"./is-array-like":"dDko"}],"mKR6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-nil")),t=r(require("./is-object"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return e},o=function(r,o){void 0===o&&(o=u);var i={};return(0,t.default)(r)&&!(0,e.default)(r)&&Object.keys(r).forEach(function(e){i[e]=o(r[e],e)}),i};exports.default=o;
},{"./is-nil":"CMm8","./is-object":"Dwjh"}],"Tvak":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./is-string"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(t,r,u){for(var o=0,i=(0,e.default)(r)?r.split("."):r;t&&o<i.length;)t=t[i[o++]];return void 0===t||o<i.length?u:t};exports.default=r;
},{"./is-string":"eXwN"}],"rZbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./is-object")),r=u(require("./is-string")),t=u(require("./is-number"));function u(e){return e&&e.__esModule?e:{default:e}}var i=function(u,i,n){var o=u,s=(0,r.default)(i)?i.split("."):i;return s.forEach(function(r,u){u<s.length-1?((0,e.default)(o[r])||(o[r]=(0,t.default)(s[u+1])?[]:{}),o=o[r]):o[r]=n}),u};exports.default=i;
},{"./is-object":"Dwjh","./is-string":"eXwN","./is-number":"siSC"}],"UK8s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./each")),t=r(require("./is-plain-object"));function r(e){return e&&e.__esModule?e:{default:e}}var u=Object.prototype.hasOwnProperty,o=function(r,o){if(null===r||!(0,t.default)(r))return{};var a={};return(0,e.default)(o,function(e){u.call(r,e)&&(a[e]=r[e])}),a};exports.default=o;
},{"./each":"dFs3","./is-plain-object":"dZoM"}],"R952":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e,t,l){var n,u,a,r,i=0;l||(l={});var o=function(){i=!1===l.leading?0:Date.now(),n=null,r=e.apply(u,a),n||(u=a=null)},c=function(){var c=Date.now();i||!1!==l.leading||(i=c);var p=t-(c-i);return u=this,a=arguments,p<=0||p>t?(n&&(clearTimeout(n),n=null),i=c,r=e.apply(u,a),n||(u=a=null)):n||!1===l.trailing||(n=setTimeout(o,p)),r};return c.cancel=function(){clearTimeout(n),i=0,n=u=a=null},c};exports.default=e;
},{}],"eSQg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}var t=function(r){return(0,e.default)(r)?Array.prototype.slice.call(r):[]};exports.default=t;
},{"./is-array-like":"dDko"}],"Rcdi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={},t=function(t){return e[t=t||"g"]?e[t]+=1:e[t]=1,t+e[t]};exports.default=t;
},{}],"gK3e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){};exports.default=e;
},{}],"b7ZY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(e){return e};exports.default=e;
},{}],"BQ1N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./is-nil")),t=r(require("./is-array-like"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){return(0,e.default)(r)?0:(0,t.default)(r)?r.length:Object.keys(r).length}
},{"./is-nil":"CMm8","./is-array-like":"dDko"}],"s6Ug":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var o=this.map[t];return void 0===o?e:o},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}(),e=t;exports.default=e;
},{}],"rU8N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"contains",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"includes",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"difference",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"find",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"findIndex",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"firstValue",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"flatten",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"flattenDeep",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"getRange",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"pull",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"pullAt",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"reduce",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"remove",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"sortBy",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"union",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"uniq",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"valuesOfKey",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"head",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"last",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"startsWith",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"endsWith",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"filter",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"every",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"some",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"group",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(exports,"groupBy",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(exports,"groupToMap",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(exports,"getWrapBehavior",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(exports,"wrapBehavior",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(exports,"number2color",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(exports,"parseRadius",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(exports,"clamp",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(exports,"fixedBase",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(exports,"isDecimal",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(exports,"isEven",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(exports,"isInteger",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(exports,"isNegative",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"isNumberEqual",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(exports,"isOdd",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(exports,"isPositive",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(exports,"maxBy",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(exports,"minBy",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"mod",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(exports,"toDegree",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(exports,"toInteger",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(exports,"toRadian",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"forIn",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(exports,"has",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(exports,"hasKey",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(exports,"hasValue",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(exports,"keys",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(exports,"isMatch",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(exports,"values",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(exports,"lowerCase",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(exports,"lowerFirst",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(exports,"substitute",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(exports,"upperCase",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(exports,"upperFirst",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(exports,"getType",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(exports,"isArguments",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(exports,"isArrayLike",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(exports,"isBoolean",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(exports,"isDate",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(exports,"isError",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(exports,"isFunction",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(exports,"isFinite",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(exports,"isNil",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(exports,"isNull",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(exports,"isNumber",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(exports,"isObject",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(exports,"isObjectLike",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(exports,"isPlainObject",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(exports,"isPrototype",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(exports,"isRegExp",{enumerable:!0,get:function(){return qe.default}}),Object.defineProperty(exports,"isString",{enumerable:!0,get:function(){return je.default}}),Object.defineProperty(exports,"isType",{enumerable:!0,get:function(){return Oe.default}}),Object.defineProperty(exports,"isUndefined",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(exports,"isElement",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(exports,"clearAnimationFrame",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(exports,"augment",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return Be.default}}),Object.defineProperty(exports,"debounce",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(exports,"memoize",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(exports,"deepMix",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(exports,"each",{enumerable:!0,get:function(){return Ie.default}}),Object.defineProperty(exports,"extend",{enumerable:!0,get:function(){return Me.default}}),Object.defineProperty(exports,"indexOf",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(exports,"isEmpty",{enumerable:!0,get:function(){return ze.default}}),Object.defineProperty(exports,"isEqual",{enumerable:!0,get:function(){return De.default}}),Object.defineProperty(exports,"isEqualWith",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(exports,"map",{enumerable:!0,get:function(){return We.default}}),Object.defineProperty(exports,"mapValues",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(exports,"mix",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(exports,"assign",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(exports,"get",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(exports,"set",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(exports,"pick",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(exports,"throttle",{enumerable:!0,get:function(){return Le.default}}),Object.defineProperty(exports,"toArray",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(exports,"toString",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(exports,"uniqueId",{enumerable:!0,get:function(){return Ge.default}}),Object.defineProperty(exports,"noop",{enumerable:!0,get:function(){return He.default}}),Object.defineProperty(exports,"identity",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(exports,"size",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(exports,"Cache",{enumerable:!0,get:function(){return Xe.default}});var e=Ye(require("./contains")),r=Ye(require("./difference")),t=Ye(require("./find")),n=Ye(require("./find-index")),u=Ye(require("./first-value")),i=Ye(require("./flatten")),o=Ye(require("./flatten-deep")),f=Ye(require("./get-range")),a=Ye(require("./pull")),l=Ye(require("./pull-at")),p=Ye(require("./reduce")),d=Ye(require("./remove")),c=Ye(require("./sort-by")),b=Ye(require("./union")),s=Ye(require("./uniq")),m=Ye(require("./values-of-key")),g=Ye(require("./head")),y=Ye(require("./last")),x=Ye(require("./starts-with")),q=Ye(require("./ends-with")),j=Ye(require("./filter")),O=Ye(require("./every")),P=Ye(require("./some")),h=Ye(require("./group")),v=Ye(require("./group-by")),k=Ye(require("./group-to-map")),w=Ye(require("./get-wrap-behavior")),B=Ye(require("./wrap-behavior")),E=Ye(require("./number2color")),A=Ye(require("./parse-radius")),F=Ye(require("./clamp")),I=Ye(require("./fixed-base")),M=Ye(require("./is-decimal")),N=Ye(require("./is-even")),z=Ye(require("./is-integer")),D=Ye(require("./is-negative")),R=Ye(require("./is-number-equal")),W=Ye(require("./is-odd")),_=Ye(require("./is-positive")),C=Ye(require("./max-by")),T=Ye(require("./min-by")),V=Ye(require("./mod")),K=Ye(require("./to-degree")),L=Ye(require("./to-integer")),S=Ye(require("./to-radian")),U=Ye(require("./for-in")),G=Ye(require("./has")),H=Ye(require("./has-key")),J=Ye(require("./has-value")),Q=Ye(require("./keys")),X=Ye(require("./is-match")),Y=Ye(require("./values")),Z=Ye(require("./lower-case")),$=Ye(require("./lower-first")),ee=Ye(require("./substitute")),re=Ye(require("./upper-case")),te=Ye(require("./upper-first")),ne=Ye(require("./get-type")),ue=Ye(require("./is-arguments")),ie=Ye(require("./is-array")),oe=Ye(require("./is-array-like")),fe=Ye(require("./is-boolean")),ae=Ye(require("./is-date")),le=Ye(require("./is-error")),pe=Ye(require("./is-function")),de=Ye(require("./is-finite")),ce=Ye(require("./is-nil")),be=Ye(require("./is-null")),se=Ye(require("./is-number")),me=Ye(require("./is-object")),ge=Ye(require("./is-object-like")),ye=Ye(require("./is-plain-object")),xe=Ye(require("./is-prototype")),qe=Ye(require("./is-reg-exp")),je=Ye(require("./is-string")),Oe=Ye(require("./is-type")),Pe=Ye(require("./is-undefined")),he=Ye(require("./is-element")),ve=Ye(require("./request-animation-frame")),ke=Ye(require("./clear-animation-frame")),we=Ye(require("./augment")),Be=Ye(require("./clone")),Ee=Ye(require("./debounce")),Ae=Ye(require("./memoize")),Fe=Ye(require("./deep-mix")),Ie=Ye(require("./each")),Me=Ye(require("./extend")),Ne=Ye(require("./index-of")),ze=Ye(require("./is-empty")),De=Ye(require("./is-equal")),Re=Ye(require("./is-equal-with")),We=Ye(require("./map")),_e=Ye(require("./map-values")),Ce=Ye(require("./mix")),Te=Ye(require("./get")),Ve=Ye(require("./set")),Ke=Ye(require("./pick")),Le=Ye(require("./throttle")),Se=Ye(require("./to-array")),Ue=Ye(require("./to-string")),Ge=Ye(require("./unique-id")),He=Ye(require("./noop")),Je=Ye(require("./identity")),Qe=Ye(require("./size")),Xe=Ye(require("./cache"));function Ye(e){return e&&e.__esModule?e:{default:e}}
},{"./contains":"QjS7","./difference":"a5fq","./find":"YFiT","./find-index":"xaCA","./first-value":"dC86","./flatten":"KO3D","./flatten-deep":"uD6C","./get-range":"MCe5","./pull":"aJ09","./pull-at":"voCS","./reduce":"Odow","./remove":"lfZ1","./sort-by":"PFR4","./union":"eUot","./uniq":"vgWB","./values-of-key":"ZKMR","./head":"o5eg","./last":"uQNm","./starts-with":"x1fF","./ends-with":"dEjH","./filter":"DRXI","./every":"ymEL","./some":"HsDc","./group":"GYao","./group-by":"jgRc","./group-to-map":"k9fR","./get-wrap-behavior":"O2yQ","./wrap-behavior":"rsmU","./number2color":"xaHh","./parse-radius":"x9k2","./clamp":"MCA6","./fixed-base":"ZJfs","./is-decimal":"RC0h","./is-even":"bSlZ","./is-integer":"FS9I","./is-negative":"kG86","./is-number-equal":"LrqL","./is-odd":"VsyG","./is-positive":"cS6z","./max-by":"nR7W","./min-by":"N39t","./mod":"OtOd","./to-degree":"JK9d","./to-integer":"wcSz","./to-radian":"cWFm","./for-in":"WVyh","./has":"lTjr","./has-key":"LDmf","./has-value":"S1uy","./keys":"dBJG","./is-match":"RoyM","./values":"bFXP","./lower-case":"AGmJ","./lower-first":"ILPz","./substitute":"aC4d","./upper-case":"zyMx","./upper-first":"yjFw","./get-type":"kelG","./is-arguments":"w5fw","./is-array":"Wxe8","./is-array-like":"dDko","./is-boolean":"j2x1","./is-date":"FuxN","./is-error":"e0Rf","./is-function":"f69u","./is-finite":"BRXE","./is-nil":"CMm8","./is-null":"bmvc","./is-number":"siSC","./is-object":"Dwjh","./is-object-like":"Dq1j","./is-plain-object":"dZoM","./is-prototype":"aqkN","./is-reg-exp":"mONI","./is-string":"eXwN","./is-type":"xriw","./is-undefined":"LQ5c","./is-element":"n3IN","./request-animation-frame":"kgiN","./clear-animation-frame":"dd6o","./augment":"ccCX","./clone":"GXvD","./debounce":"Rr4Q","./memoize":"Vngn","./deep-mix":"doZO","./each":"dFs3","./extend":"M4BO","./index-of":"gsSi","./is-empty":"YyBX","./is-equal":"ErEc","./is-equal-with":"RABN","./map":"wRwB","./map-values":"mKR6","./mix":"RIj8","./get":"Tvak","./set":"rZbp","./pick":"UK8s","./throttle":"R952","./to-array":"eSQg","./to-string":"qYPh","./unique-id":"Rcdi","./noop":"gK3e","./identity":"b7ZY","./size":"BQ1N","./cache":"s6Ug"}],"JW8G":[function(require,module,exports) {
"use strict";var E,t,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.COMPONENT_MAX_VIEW_PERCENTAGE=exports.MIN_CHART_HEIGHT=exports.MIN_CHART_WIDTH=exports.FIELD_ORIGIN=exports.GROUP_ATTRS=exports.ELEMENT_STATE=exports.PLOT_EVENTS=exports.VIEW_LIFE_CIRCLE=exports.GROUP_Z_INDEX=exports.COMPONENT_TYPE=exports.DIRECTION=exports.LAYER=void 0,exports.LAYER=E,function(E){E.FORE="fore",E.MID="mid",E.BG="bg"}(E||(exports.LAYER=E={})),exports.DIRECTION=t,function(E){E.TOP="top",E.TOP_LEFT="top-left",E.TOP_RIGHT="top-right",E.RIGHT="right",E.RIGHT_TOP="right-top",E.RIGHT_BOTTOM="right-bottom",E.LEFT="left",E.LEFT_TOP="left-top",E.LEFT_BOTTOM="left-bottom",E.BOTTOM="bottom",E.BOTTOM_LEFT="bottom-left",E.BOTTOM_RIGHT="bottom-right",E.RADIUS="radius",E.CIRCLE="circle",E.NONE="none"}(t||(exports.DIRECTION=t={})),exports.COMPONENT_TYPE=e,function(E){E.AXIS="axis",E.GRID="grid",E.LEGEND="legend",E.TOOLTIP="tooltip",E.ANNOTATION="annotation",E.OTHER="other"}(e||(exports.COMPONENT_TYPE=e={}));var o,T,r,_={FORE:3,MID:2,BG:1};exports.GROUP_Z_INDEX=_,exports.VIEW_LIFE_CIRCLE=o,function(E){E.BEFORE_RENDER="beforerender",E.AFTER_RENDER="afterrender",E.BEFORE_PAINT="beforepaint",E.AFTER_PAINT="afterpaint",E.BEFORE_CHANGE_DATA="beforechangedata",E.AFTER_CHANGE_DATA="afterchangedata",E.BEFORE_CLEAR="beforeclear",E.AFTER_CLEAR="afterclear",E.BEFORE_DESTROY="beforedestroy"}(o||(exports.VIEW_LIFE_CIRCLE=o={})),exports.PLOT_EVENTS=T,function(E){E.MOUSE_ENTER="plot:mouseenter",E.MOUSE_DOWN="plot:mousedown",E.MOUSE_MOVE="plot:mousemove",E.MOUSE_UP="plot:mouseup",E.MOUSE_LEAVE="plot:mouseleave",E.TOUCH_START="plot:touchstart",E.TOUCH_MOVE="plot:touchmove",E.TOUCH_END="plot:touchend",E.TOUCH_CANCEL="plot:touchcancel",E.CLICK="plot:click",E.DBLCLICK="plot:dblclick",E.CONTEXTMENU="plot:contextmenu",E.LEAVE="plot:leave",E.ENTER="plot:enter"}(T||(exports.PLOT_EVENTS=T={})),exports.ELEMENT_STATE=r,function(E){E.ACTIVE="active",E.INACTIVE="inactive",E.SELECTED="selected",E.DEFAULT="default"}(r||(exports.ELEMENT_STATE=r={}));var O=["color","shape","size"];exports.GROUP_ATTRS=O;var p="_origin";exports.FIELD_ORIGIN=p;var I=1;exports.MIN_CHART_WIDTH=I;var R=1;exports.MIN_CHART_HEIGHT=R;var N=.25;exports.COMPONENT_MAX_VIEW_PERCENTAGE=N;
},{}],"drrS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEngine=r,exports.registerEngine=t;var e={};function r(r){var t=e[r];if(!t)throw new Error("G engine '"+r+"' is not exist, please register it at first.");return t}function t(r,t){e[r]=t}
},{}],"MTlD":[function(require,module,exports) {
"use strict";function e(e,t,n){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Trr9":[function(require,module,exports) {
"use strict";var e,t,r,n;function o(){e=document.createElement("table"),t=document.createElement("tr"),r=/^\s*<(\w+|!)[^>]*>/,n={tr:document.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:t,th:t,"*":document.createElement("div")}}function d(t){e||o();var d=r.test(t)&&RegExp.$1;d&&d in n||(d="*");var c=n[d];t=t.replace(/(^\s*)|(\s*$)/g,""),c.innerHTML=""+t;var a=c.childNodes[0];return c.removeChild(a),a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;
},{}],"siWx":[function(require,module,exports) {
"use strict";function e(e,t,l){var o;try{o=window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.style[t]}catch(r){}finally{o=void 0===o?l:o}return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"pljj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./get-style"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){var u=(0,e.default)(t,"height",r);return"auto"===u&&(u=t.offsetHeight),parseFloat(u)}
},{"./get-style":"siWx"}],"TFTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=a(require("./get-style")),t=a(require("./get-height"));function a(e){return e&&e.__esModule?e:{default:e}}function r(a,r){var o=(0,t.default)(a,r),d=parseFloat((0,e.default)(a,"borderTopWidth"))||0,l=parseFloat((0,e.default)(a,"paddingTop"))||0,u=parseFloat((0,e.default)(a,"paddingBottom"))||0;return o+d+(parseFloat((0,e.default)(a,"borderBottomWidth"))||0)+l+u+(parseFloat((0,e.default)(a,"marginTop"))||0)+(parseFloat((0,e.default)(a,"marginBottom"))||0)}
},{"./get-style":"siWx","./get-height":"pljj"}],"zz5k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./get-style"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){var u=(0,e.default)(t,"width",r);return"auto"===u&&(u=t.offsetWidth),parseFloat(u)}
},{"./get-style":"siWx"}],"PFlm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=a(require("./get-style")),t=a(require("./get-width"));function a(e){return e&&e.__esModule?e:{default:e}}function r(a,r){var d=(0,t.default)(a,r),l=parseFloat((0,e.default)(a,"borderLeftWidth"))||0,u=parseFloat((0,e.default)(a,"paddingLeft"))||0,i=parseFloat((0,e.default)(a,"paddingRight"))||0,f=parseFloat((0,e.default)(a,"borderRightWidth"))||0,o=parseFloat((0,e.default)(a,"marginRight"))||0;return d+l+f+u+i+(parseFloat((0,e.default)(a,"marginLeft"))||0)+o}
},{"./get-style":"siWx","./get-width":"zz5k"}],"T1BY":[function(require,module,exports) {
"use strict";function e(){return window.devicePixelRatio?window.devicePixelRatio:2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"qqPS":[function(require,module,exports) {
"use strict";function e(e,r){if(e)for(var t in r)r.hasOwnProperty(t)&&(e.style[t]=r[t]);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"HfmF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"addEventListener",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"createDom",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"getHeight",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"getOuterHeight",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"getOuterWidth",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"getRatio",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"getStyle",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"getWidth",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"modifyCSS",{enumerable:!0,get:function(){return f.default}});var e=a(require("./add-event-listener")),t=a(require("./create-dom")),r=a(require("./get-height")),u=a(require("./get-outer-height")),n=a(require("./get-outer-width")),i=a(require("./get-ratio")),o=a(require("./get-style")),d=a(require("./get-width")),f=a(require("./modify-css"));function a(e){return e&&e.__esModule?e:{default:e}}
},{"./add-event-listener":"MTlD","./create-dom":"Trr9","./get-height":"pljj","./get-outer-height":"TFTB","./get-outer-width":"PFlm","./get-ratio":"T1BY","./get-style":"siWx","./get-width":"zz5k","./modify-css":"qqPS"}],"l52X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChartSize=i,exports.removeDom=o,Object.defineProperty(exports,"createDom",{enumerable:!0,get:function(){return t.createDom}}),Object.defineProperty(exports,"modifyCSS",{enumerable:!0,get:function(){return t.modifyCSS}});var e=require("../constant"),t=require("@antv/dom-util");function r(e){var t=getComputedStyle(e);return{width:(e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10),height:(e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)}}function n(e){return"number"==typeof e&&!isNaN(e)}function i(t,i,o,a){var d=o,h=a;if(i){var p=r(t);d=p.width?p.width:d,h=p.height?p.height:h}return{width:Math.max(n(d)?d:e.MIN_CHART_WIDTH,e.MIN_CHART_WIDTH),height:Math.max(n(h)?h:e.MIN_CHART_HEIGHT,e.MIN_CHART_HEIGHT)}}function o(e){var t=e.parentNode;t&&t.removeChild(e)}
},{"../constant":"JW8G","@antv/dom-util":"HfmF"}],"w2ae":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e="*",t=function(){function t(){this._events={}}return t.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},t.prototype.once=function(e,t){return this.on(e,t,!0),this},t.prototype.emit=function(t){for(var n=this,s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];var o=this._events[t]||[],r=this._events[e]||[],l=function(e){for(var i=e.length,o=0;o<i;o++)if(e[o]){var r=e[o],l=r.callback;r.once&&(e.splice(o,1),0===e.length&&delete n._events[t],i--,o--),l.apply(n,s)}};l(o),l(r)},t.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],s=n.length,i=0;i<s;i++)n[i].callback===t&&(n.splice(i,1),s--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}(),n=t;exports.default=n;
},{}],"pYAC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=i(require("@antv/event-emitter"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(t){function i(e){var i=t.call(this)||this;i.destroyed=!1;var s=e.visible,o=void 0===s||s;return i.visible=o,i}return(0,e.__extends)(i,t),i.prototype.show=function(){this.visible||this.changeVisible(!0)},i.prototype.hide=function(){this.visible&&this.changeVisible(!1)},i.prototype.destroy=function(){this.off(),this.destroyed=!0},i.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},i}(t.default),o=s;exports.default=o;
},{"tslib":"oMtQ","@antv/event-emitter":"w2ae"}],"QSCx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rectPath=exports.pathToCurve=exports.pathToAbsolute=exports.parsePathString=exports.parsePathArray=exports.intersection=exports.formatPath=exports.fillPathByDiff=exports.fillPath=exports.catmullRomToBezier=void 0;var t=require("@antv/util"),a="\t\n\v\f\r \u2028\u2029",e=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),r=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig"),n=function(a){if(!a)return null;if((0,t.isArray)(a))return a;var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},c=[];return String(a).replace(e,function(t,e,o){var h=[],i=e.toLowerCase();if(o.replace(r,function(t,a){a&&h.push(+a)}),"m"===i&&h.length>2&&(c.push([e].concat(h.splice(0,2))),i="l",e="m"===e?"l":"L"),"o"===i&&1===h.length&&c.push([e,h[0]]),"r"===i)c.push([e].concat(h));else for(;h.length>=n[i]&&(c.push([e].concat(h.splice(0,n[i]))),n[i]););return a}),c};exports.parsePathString=n;var c=function(t,a){for(var e=[],r=0,n=t.length;n-2*!a>r;r+=2){var c=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];a?r?n-4===r?c[3]={x:+t[0],y:+t[1]}:n-2===r&&(c[2]={x:+t[0],y:+t[1]},c[3]={x:+t[2],y:+t[3]}):c[0]={x:+t[n-2],y:+t[n-1]}:n-4===r?c[3]=c[2]:r||(c[0]={x:+t[r],y:+t[r+1]}),e.push(["C",(-c[0].x+6*c[1].x+c[2].x)/6,(-c[0].y+6*c[1].y+c[2].y)/6,(c[1].x+6*c[2].x-c[3].x)/6,(c[1].y+6*c[2].y-c[3].y)/6,c[2].x,c[2].y])}return e};exports.catmullRomToBezier=c;var o=function(t,a,e,r,n){var c=[];if(null===n&&null===r&&(r=e),t=+t,a=+a,e=+e,r=+r,null!==n){var o=Math.PI/180,h=t+e*Math.cos(-r*o),i=t+e*Math.cos(-n*o);c=[["M",h,a+e*Math.sin(-r*o)],["A",e,e,0,+(n-r>180),0,i,a+e*Math.sin(-n*o)]]}else c=[["M",t,a],["m",0,-r],["a",e,r,0,1,1,0,2*r],["a",e,r,0,1,1,0,-2*r],["z"]];return c},h=function(t){if(!(t=n(t))||!t.length)return[["M",0,0]];var a,e,r=[],h=0,i=0,s=0,u=0,l=0;"M"===t[0][0]&&(s=h=+t[0][1],u=i=+t[0][2],l++,r[0]=["M",h,i]);for(var x=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),p=void 0,f=void 0,y=l,v=t.length;y<v;y++){if(r.push(p=[]),(a=(f=t[y])[0])!==a.toUpperCase())switch(p[0]=a.toUpperCase(),p[0]){case"A":p[1]=f[1],p[2]=f[2],p[3]=f[3],p[4]=f[4],p[5]=f[5],p[6]=+f[6]+h,p[7]=+f[7]+i;break;case"V":p[1]=+f[1]+i;break;case"H":p[1]=+f[1]+h;break;case"R":for(var M=2,g=(e=[h,i].concat(f.slice(1))).length;M<g;M++)e[M]=+e[M]+h,e[++M]=+e[M]+i;r.pop(),r=r.concat(c(e,x));break;case"O":r.pop(),(e=o(h,i,f[1],f[2])).push(e[0]),r=r.concat(e);break;case"U":r.pop(),r=r.concat(o(h,i,f[1],f[2],f[3])),p=["U"].concat(r[r.length-1].slice(-2));break;case"M":s=+f[1]+h,u=+f[2]+i;break;default:for(M=1,g=f.length;M<g;M++)p[M]=+f[M]+(M%2?h:i)}else if("R"===a)e=[h,i].concat(f.slice(1)),r.pop(),r=r.concat(c(e,x)),p=["R"].concat(f.slice(-2));else if("O"===a)r.pop(),(e=o(h,i,f[1],f[2])).push(e[0]),r=r.concat(e);else if("U"===a)r.pop(),r=r.concat(o(h,i,f[1],f[2],f[3])),p=["U"].concat(r[r.length-1].slice(-2));else for(var b=0,m=f.length;b<m;b++)p[b]=f[b];if("O"!==(a=a.toUpperCase()))switch(p[0]){case"Z":h=+s,i=+u;break;case"H":h=p[1];break;case"V":i=p[1];break;case"M":s=p[p.length-2],u=p[p.length-1];break;default:h=p[p.length-2],i=p[p.length-1]}}return r};exports.pathToAbsolute=h;var i=function(t,a,e,r){return[t,a,e,r,e,r]},s=function(t,a,e,r,n,c){return[1/3*t+2/3*e,1/3*a+2/3*r,1/3*n+2/3*e,1/3*c+2/3*r,n,c]},u=function(t,a,e,r,n,c,o,h,i,s){e===r&&(e+=1);var l,x,p,f,y,v=120*Math.PI/180,M=Math.PI/180*(+n||0),g=[],b=function(t,a,e){return{x:t*Math.cos(e)-a*Math.sin(e),y:t*Math.sin(e)+a*Math.cos(e)}};if(s)x=s[0],p=s[1],f=s[2],y=s[3];else{t=(l=b(t,a,-M)).x,a=l.y,h=(l=b(h,i,-M)).x,i=l.y,t===h&&a===i&&(h+=1,i+=1);var m=(t-h)/2,d=(a-i)/2,k=m*m/(e*e)+d*d/(r*r);k>1&&(e*=k=Math.sqrt(k),r*=k);var C=e*e,P=r*r,q=(c===o?-1:1)*Math.sqrt(Math.abs((C*P-C*d*d-P*m*m)/(C*d*d+P*m*m)));f=q*e*d/r+(t+h)/2,y=q*-r*m/e+(a+i)/2,x=Math.asin(((a-y)/r).toFixed(9)),p=Math.asin(((i-y)/r).toFixed(9)),x=t<f?Math.PI-x:x,p=h<f?Math.PI-p:p,x<0&&(x=2*Math.PI+x),p<0&&(p=2*Math.PI+p),o&&x>p&&(x-=2*Math.PI),!o&&p>x&&(p-=2*Math.PI)}var F=p-x;if(Math.abs(F)>v){var A=p,w=h,z=i;p=x+v*(o&&p>x?1:-1),h=f+e*Math.cos(p),i=y+r*Math.sin(p),g=u(h,i,e,r,n,0,o,w,z,[p,A,f,y])}F=p-x;var T=Math.cos(x),I=Math.sin(x),L=Math.cos(p),Q=Math.sin(p),S=Math.tan(F/4),U=4/3*e*S,R=4/3*r*S,Z=[t,a],j=[t+U*I,a-R*T],B=[h+U*Q,i-R*L],H=[h,i];if(j[0]=2*Z[0]-j[0],j[1]=2*Z[1]-j[1],s)return[j,B,H].concat(g);for(var O=[],V=0,X=(g=[j,B,H].concat(g).join().split(",")).length;V<X;V++)O[V]=V%2?b(g[V-1],g[V],M).y:b(g[V],g[V+1],M).x;return O},l=function(t,a){var e,r=h(t),n=a&&h(a),c={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],x=[],p="",f="",y=function(t,a,e){var r,n;if(!t)return["C",a.x,a.y,a.x,a.y,a.x,a.y];switch(!(t[0]in{T:1,Q:1})&&(a.qx=a.qy=null),t[0]){case"M":a.X=t[1],a.Y=t[2];break;case"A":t=["C"].concat(u.apply(0,[a.x,a.y].concat(t.slice(1))));break;case"S":"C"===e||"S"===e?(r=2*a.x-a.bx,n=2*a.y-a.by):(r=a.x,n=a.y),t=["C",r,n].concat(t.slice(1));break;case"T":"Q"===e||"T"===e?(a.qx=2*a.x-a.qx,a.qy=2*a.y-a.qy):(a.qx=a.x,a.qy=a.y),t=["C"].concat(s(a.x,a.y,a.qx,a.qy,t[1],t[2]));break;case"Q":a.qx=t[1],a.qy=t[2],t=["C"].concat(s(a.x,a.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(i(a.x,a.y,t[1],t[2]));break;case"H":t=["C"].concat(i(a.x,a.y,t[1],a.y));break;case"V":t=["C"].concat(i(a.x,a.y,a.x,t[1]));break;case"Z":t=["C"].concat(i(a.x,a.y,a.X,a.Y))}return t},v=function(t,a){if(t[a].length>7){t[a].shift();for(var c=t[a];c.length;)l[a]="A",n&&(x[a]="A"),t.splice(a++,0,["C"].concat(c.splice(0,6)));t.splice(a,1),e=Math.max(r.length,n&&n.length||0)}},M=function(t,a,c,o,h){t&&a&&"M"===t[h][0]&&"M"!==a[h][0]&&(a.splice(h,0,["M",o.x,o.y]),c.bx=0,c.by=0,c.x=t[h][1],c.y=t[h][2],e=Math.max(r.length,n&&n.length||0))};e=Math.max(r.length,n&&n.length||0);for(var g=0;g<e;g++){r[g]&&(p=r[g][0]),"C"!==p&&(l[g]=p,g&&(f=l[g-1])),r[g]=y(r[g],c,f),"A"!==l[g]&&"C"===p&&(l[g]="C"),v(r,g),n&&(n[g]&&(p=n[g][0]),"C"!==p&&(x[g]=p,g&&(f=x[g-1])),n[g]=y(n[g],o,f),"A"!==x[g]&&"C"===p&&(x[g]="C"),v(n,g)),M(r,n,c,o,g),M(n,r,o,c,g);var b=r[g],m=n&&n[g],d=b.length,k=n&&m.length;c.x=b[d-2],c.y=b[d-1],c.bx=parseFloat(b[d-4])||c.x,c.by=parseFloat(b[d-3])||c.y,o.bx=n&&(parseFloat(m[k-4])||o.x),o.by=n&&(parseFloat(m[k-3])||o.y),o.x=n&&m[k-2],o.y=n&&m[k-1]}return n?[r,n]:r};exports.pathToCurve=l;var x=/,?([a-z]),?/gi,p=function(t){return t.join(",").replace(x,"$1")};exports.parsePathArray=p;var f=function(t,a,e,r,n){return t*(t*(-3*a+9*e-9*r+3*n)+6*a-12*e+6*r)-3*a+3*e},y=function(t,a,e,r,n,c,o,h,i){null===i&&(i=1);for(var s=(i=i>1?1:i<0?0:i)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],x=0,p=0;p<12;p++){var y=s*u[p]+s,v=f(y,t,e,n,o),M=f(y,a,r,c,h),g=v*v+M*M;x+=l[p]*Math.sqrt(g)}return s*x},v=function(t,a,e,r,n,c,o,h){for(var i,s,u,l,x=[],p=[[],[]],f=0;f<2;++f)if(0===f?(s=6*t-12*e+6*n,i=-3*t+9*e-9*n+3*o,u=3*e-3*t):(s=6*a-12*r+6*c,i=-3*a+9*r-9*c+3*h,u=3*r-3*a),Math.abs(i)<1e-12){if(Math.abs(s)<1e-12)continue;(l=-u/s)>0&&l<1&&x.push(l)}else{var y=s*s-4*u*i,v=Math.sqrt(y);if(!(y<0)){var M=(-s+v)/(2*i);M>0&&M<1&&x.push(M);var g=(-s-v)/(2*i);g>0&&g<1&&x.push(g)}}for(var b,m=x.length,d=m;m--;)b=1-(l=x[m]),p[0][m]=b*b*b*t+3*b*b*l*e+3*b*l*l*n+l*l*l*o,p[1][m]=b*b*b*a+3*b*b*l*r+3*b*l*l*c+l*l*l*h;return p[0][d]=t,p[1][d]=a,p[0][d+1]=o,p[1][d+1]=h,p[0].length=p[1].length=d+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}},M=function(t,a,e,r,n,c,o,h){if(!(Math.max(t,e)<Math.min(n,o)||Math.min(t,e)>Math.max(n,o)||Math.max(a,r)<Math.min(c,h)||Math.min(a,r)>Math.max(c,h))){var i=(t-e)*(c-h)-(a-r)*(n-o);if(i){var s=((t*r-a*e)*(n-o)-(t-e)*(n*h-c*o))/i,u=((t*r-a*e)*(c-h)-(a-r)*(n*h-c*o))/i,l=+s.toFixed(2),x=+u.toFixed(2);if(!(l<+Math.min(t,e).toFixed(2)||l>+Math.max(t,e).toFixed(2)||l<+Math.min(n,o).toFixed(2)||l>+Math.max(n,o).toFixed(2)||x<+Math.min(a,r).toFixed(2)||x>+Math.max(a,r).toFixed(2)||x<+Math.min(c,h).toFixed(2)||x>+Math.max(c,h).toFixed(2)))return{x:s,y:u}}}},g=function(t,a,e){return a>=t.x&&a<=t.x+t.width&&e>=t.y&&e<=t.y+t.height},b=function(t,a,e,r,n){if(n)return[["M",+t+ +n,a],["l",e-2*n,0],["a",n,n,0,0,1,n,n],["l",0,r-2*n],["a",n,n,0,0,1,-n,n],["l",2*n-e,0],["a",n,n,0,0,1,-n,-n],["l",0,2*n-r],["a",n,n,0,0,1,n,-n],["z"]];var c=[["M",t,a],["l",e,0],["l",0,r],["l",-e,0],["z"]];return c.parsePathArray=p,c};exports.rectPath=b;var m=function(t,a,e,r){return null===t&&(t=a=e=r=0),null===a&&(a=t.y,e=t.width,r=t.height,t=t.x),{x:t,y:a,width:e,w:e,height:r,h:r,x2:t+e,y2:a+r,cx:t+e/2,cy:a+r/2,r1:Math.min(e,r)/2,r2:Math.max(e,r)/2,r0:Math.sqrt(e*e+r*r)/2,path:b(t,a,e,r),vb:[t,a,e,r].join(" ")}},d=function(t,a){return t=m(t),a=m(a),g(a,t.x,t.y)||g(a,t.x2,t.y)||g(a,t.x,t.y2)||g(a,t.x2,t.y2)||g(t,a.x,a.y)||g(t,a.x2,a.y)||g(t,a.x,a.y2)||g(t,a.x2,a.y2)||(t.x<a.x2&&t.x>a.x||a.x<t.x2&&a.x>t.x)&&(t.y<a.y2&&t.y>a.y||a.y<t.y2&&a.y>t.y)},k=function(a,e,r,n,c,o,h,i){(0,t.isArray)(a)||(a=[a,e,r,n,c,o,h,i]);var s=v.apply(null,a);return m(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)},C=function(t,a,e,r,n,c,o,h,i){var s=1-i,u=Math.pow(s,3),l=Math.pow(s,2),x=i*i,p=x*i,f=t+2*i*(e-t)+x*(n-2*e+t),y=a+2*i*(r-a)+x*(c-2*r+a),v=e+2*i*(n-e)+x*(o-2*n+e),M=r+2*i*(c-r)+x*(h-2*c+r);return{x:u*t+3*l*i*e+3*s*i*i*n+p*o,y:u*a+3*l*i*r+3*s*i*i*c+p*h,m:{x:f,y:y},n:{x:v,y:M},start:{x:s*t+i*e,y:s*a+i*r},end:{x:s*n+i*o,y:s*c+i*h},alpha:90-180*Math.atan2(f-v,y-M)/Math.PI}},P=function(t,a,e){var r=k(t),n=k(a);if(!d(r,n))return e?0:[];for(var c=~~(y.apply(0,t)/8),o=~~(y.apply(0,a)/8),h=[],i=[],s={},u=e?0:[],l=0;l<c+1;l++){var x=C.apply(0,t.concat(l/c));h.push({x:x.x,y:x.y,t:l/c})}for(l=0;l<o+1;l++){x=C.apply(0,a.concat(l/o));i.push({x:x.x,y:x.y,t:l/o})}for(l=0;l<c;l++)for(var p=0;p<o;p++){var f=h[l],v=h[l+1],g=i[p],b=i[p+1],m=Math.abs(v.x-f.x)<.001?"y":"x",P=Math.abs(b.x-g.x)<.001?"y":"x",q=M(f.x,f.y,v.x,v.y,g.x,g.y,b.x,b.y);if(q){if(s[q.x.toFixed(4)]===q.y.toFixed(4))continue;s[q.x.toFixed(4)]=q.y.toFixed(4);var F=f.t+Math.abs((q[m]-f[m])/(v[m]-f[m]))*(v.t-f.t),A=g.t+Math.abs((q[P]-g[P])/(b[P]-g[P]))*(b.t-g.t);F>=0&&F<=1&&A>=0&&A<=1&&(e?u+=1:u.push({x:q.x,y:q.y,t1:F,t2:A}))}}return u},q=function(t,a,e){var r,n,c,o,h,i,s,u,x,p;t=l(t),a=l(a);for(var f=e?0:[],y=0,v=t.length;y<v;y++){var M=t[y];if("M"===M[0])r=h=M[1],n=i=M[2];else{"C"===M[0]?(x=[r,n].concat(M.slice(1)),r=x[6],n=x[7]):(x=[r,n,r,n,h,i,h,i],r=h,n=i);for(var g=0,b=a.length;g<b;g++){var m=a[g];if("M"===m[0])c=s=m[1],o=u=m[2];else{"C"===m[0]?(p=[c,o].concat(m.slice(1)),c=p[6],o=p[7]):(p=[c,o,c,o,s,u,s,u],c=s,o=u);var d=P(x,p,e);if(e)f+=d;else{for(var k=0,C=d.length;k<C;k++)d[k].segment1=y,d[k].segment2=g,d[k].bez1=x,d[k].bez2=p;f=f.concat(d)}}}}}return f},F=function(t,a){return q(t,a)};function A(t,a){var e=[],r=[];return t.length&&function t(a,n){if(1===a.length)e.push(a[0]),r.push(a[0]);else{for(var c=[],o=0;o<a.length-1;o++)0===o&&e.push(a[0]),o===a.length-2&&r.push(a[o+1]),c[o]=[(1-n)*a[o][0]+n*a[o+1][0],(1-n)*a[o][1]+n*a[o+1][1]];t(c,n)}}(t,a),{left:e,right:r.reverse()}}function w(t,a,e){var r=[[t[1],t[2]]];e=e||2;var n=[];"A"===a[0]?(r.push(a[6]),r.push(a[7])):"C"===a[0]?(r.push([a[1],a[2]]),r.push([a[3],a[4]]),r.push([a[5],a[6]])):"S"===a[0]||"Q"===a[0]?(r.push([a[1],a[2]]),r.push([a[3],a[4]])):r.push([a[1],a[2]]);for(var c=r,o=1/e,h=0;h<e-1;h++){var i=A(c,o/(1-o*h));n.push(i.left),c=i.right}return n.push(c),n.map(function(t){var a=[];return 4===t.length&&(a.push("C"),a=a.concat(t[2])),t.length>=3&&(3===t.length&&a.push("Q"),a=a.concat(t[1])),2===t.length&&a.push("L"),a=a.concat(t[t.length-1])})}exports.intersection=F;var z=function(t,a,e){if(1===e)return[[].concat(t)];var r=[];if("L"===a[0]||"C"===a[0]||"Q"===a[0])r=r.concat(w(t,a,e));else{var n=[].concat(t);"M"===n[0]&&(n[0]="L");for(var c=0;c<=e-1;c++)r.push(n)}return r},T=function(t,a){if(1===t.length)return t;var e=t.length-1,r=a.length-1,n=e/r,c=[];if(1===t.length&&"M"===t[0][0]){for(var o=0;o<r-e;o++)t.push(t[0]);return t}for(o=0;o<r;o++){var h=Math.floor(n*o);c[h]=(c[h]||0)+1}var i=c.reduce(function(a,r,n){return n===e?a.concat(t[e]):a.concat(z(t[n],t[n+1],r))},[]);return i.unshift(t[0]),"Z"!==a[r]&&"z"!==a[r]||i.push("Z"),i};exports.fillPath=T;var I=function(a,e){if(a.length!==e.length)return!1;var r=!0;return(0,t.each)(a,function(t,a){if(t!==e[a])return r=!1,!1}),r};function L(t,a,e){var r=null,n=e;return a<n&&(n=a,r="add"),t<n&&(n=t,r="del"),{type:r,min:n}}var Q=function(t,a){var e,r,n=t.length,c=a.length,o=0;if(0===n||0===c)return null;for(var h=[],i=0;i<=n;i++)h[i]=[],h[i][0]={min:i};for(var s=0;s<=c;s++)h[0][s]={min:s};for(i=1;i<=n;i++){e=t[i-1];for(s=1;s<=c;s++){r=a[s-1],o=I(e,r)?0:1;var u=h[i-1][s].min+1,l=h[i][s-1].min+1,x=h[i-1][s-1].min+o;h[i][s]=L(u,l,x)}}return h},S=function(t,a){var e=Q(t,a),r=t.length,n=a.length,c=[],o=1,h=1;if(e[r][n].min!==r){for(var i=1;i<=r;i++){var s=e[i][i].min;h=i;for(var u=o;u<=n;u++)e[i][u].min<s&&(s=e[i][u].min,h=u);o=h,e[i][o].type&&c.push({index:i-1,type:e[i][o].type})}for(i=c.length-1;i>=0;i--)o=c[i].index,"add"===c[i].type?t.splice(o,0,[].concat(t[o])):t.splice(o,1)}var l=n-(r=t.length);if(r<n)for(i=0;i<l;i++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t};function U(t,a,e){for(var r,n=[].concat(t),c=1/(e+1),o=R(a)[0],h=1;h<=e;h++)c*=h,0===(r=Math.floor(t.length*c))?n.unshift([o[0]*c+t[r][0]*(1-c),o[1]*c+t[r][1]*(1-c)]):n.splice(r,0,[o[0]*c+t[r][0]*(1-c),o[1]*c+t[r][1]*(1-c)]);return n}function R(t){var a=[];switch(t[0]){case"M":case"L":a.push([t[1],t[2]]);break;case"A":a.push([t[6],t[7]]);break;case"Q":a.push([t[3],t[4]]),a.push([t[1],t[2]]);break;case"T":a.push([t[1],t[2]]);break;case"C":a.push([t[5],t[6]]),a.push([t[1],t[2]]),a.push([t[3],t[4]]);break;case"S":a.push([t[3],t[4]]),a.push([t[1],t[2]]);break;case"H":case"V":a.push([t[1],t[1]])}return a}exports.fillPathByDiff=S;var Z=function(t,a){if(t.length<=1)return t;for(var e,r=0;r<a.length;r++)if(t[r][0]!==a[r][0])switch(e=R(t[r]),a[r][0]){case"M":t[r]=["M"].concat(e[0]);break;case"L":t[r]=["L"].concat(e[0]);break;case"A":t[r]=[].concat(a[r]),t[r][6]=e[0][0],t[r][7]=e[0][1];break;case"Q":if(e.length<2){if(!(r>0)){t[r]=a[r];break}e=U(e,t[r-1],1)}t[r]=["Q"].concat(e.reduce(function(t,a){return t.concat(a)},[]));break;case"T":t[r]=["T"].concat(e[0]);break;case"C":if(e.length<3){if(!(r>0)){t[r]=a[r];break}e=U(e,t[r-1],2)}t[r]=["C"].concat(e.reduce(function(t,a){return t.concat(a)},[]));break;case"S":if(e.length<2){if(!(r>0)){t[r]=a[r];break}e=U(e,t[r-1],1)}t[r]=["S"].concat(e.reduce(function(t,a){return t.concat(a)},[]));break;default:t[r]=a[r]}return t};exports.formatPath=Z;
},{"@antv/util":"rU8N"}],"tiGA":[function(require,module,exports) {
module.exports={__npminstall_done:!1,_args:[["@antv/g-base@0.4.7","C:\\Users\\Lenovo\\Desktop\\programs\\side project\\ncku"]],_from:"@antv/g-base@0.4.7",_id:"@antv/g-base@0.4.7",_inBundle:!1,_integrity:"sha512-wKSpS3/M1slU92iOgi2QV4MCd82J1d2PyPcQArqSFRUZU0KnVMIl95v79dG0Be4YvFaZ3bVrT6Ns1Czr8oplhA==",_location:"/@antv/g-base",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"@antv/g-base@0.4.7",name:"@antv/g-base",escapedName:"@antv%2fg-base",scope:"@antv",rawSpec:"0.4.7",saveSpec:null,fetchSpec:"0.4.7"},_requiredBy:["/@antv/component","/@antv/g-canvas","/@antv/g-svg","/@antv/g2"],_resolved:"https://registry.npmjs.org/@antv/g-base/-/g-base-0.4.7.tgz",_spec:"0.4.7",_where:"C:\\Users\\Lenovo\\Desktop\\programs\\side project\\ncku",author:{name:"https://github.com/orgs/antvis/people"},bugs:{url:"https://github.com/antvis/util/issues"},dependencies:{"@antv/event-emitter":"^0.1.1","@antv/g-math":"^0.1.3","@antv/matrix-util":"^3.1.0-beta.1","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","@types/d3-timer":"^1.0.9","d3-ease":"^1.0.5","d3-interpolate":"^1.3.2","d3-timer":"^1.0.9","detect-browser":"^5.1.0"},description:"A common util collection for antv projects",devDependencies:{"@antv/torch":"^1.0.0","gl-matrix":"^3.0.0",less:"^3.9.0","npm-run-all":"^4.1.5","tsc-watch":"^4.0.0"},files:["package.json","esm","lib","LICENSE","README.md"],gitHead:"eb6a2503cb7bb8154697592b10680939d954a31a",homepage:"https://github.com/antvis/util#readme",keywords:["util","antv","g"],license:"ISC",main:"lib/index.js",module:"esm/index.js",name:"@antv/g-base",publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/antvis/util.git"},scripts:{build:"npm run clean && run-p build:*","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm",clean:"rm -rf esm lib",coverage:"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage",test:"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts",tsc:"tsc --noEmit",typecheck:"tsc --noEmit","watch:cjs":"tsc-watch -p tsconfig.json --target ES5 --module commonjs --outDir lib --compiler typescript/bin/tsc"},types:"lib/index.d.ts",version:"0.4.7"};
},{}],"xZlh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}(),e=t;exports.default=e;
},{}],"c4AP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=u,exports.__generator=c,exports.__createBinding=f,exports.__exportStar=l,exports.__values=s,exports.__read=p,exports.__spread=y,exports.__spreadArrays=_,exports.__await=h,exports.__asyncGenerator=v,exports.__asyncDelegator=d,exports.__asyncValues=b,exports.__makeTemplateObject=w,exports.__importStar=x,exports.__importDefault=m,exports.__classPrivateFieldGet=O,exports.__classPrivateFieldSet=g,exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{c(n.next(t))}catch(e){a(e)}}function u(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}c((n=n.apply(t,e||[])).next())})}function c(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(u){a=[6,u],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function f(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function l(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||(e[r]=t[r])}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function _(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}function h(t){return this instanceof h?(this.v=t,this):new h(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||u(t,e)})})}function u(t,e){try{(r=o[t](e)).value instanceof h?Promise.resolve(r.value.v).then(c,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function c(t){u("next",t)}function f(t){u("throw",t)}function l(t,e){t(e),a.shift(),a.length&&u(a[0][0],a[0][1])}}function d(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:h(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof s?s(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}function O(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function g(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}exports.__assign=r;
},{}],"F0V7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return null==e};exports.default=e;
},{}],"NmLk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={}.toString,t=function(t,r){return e.call(t)==="[object "+r+"]"};exports.default=t;
},{}],"t2Eu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./is-type");exports.default=function(t){return e.default(t,"Function")};
},{"./is-type":"NmLk"}],"c0E0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./is-type");exports.default=function(t){return e.default(t,"String")};
},{"./is-type":"NmLk"}],"LTPy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};
},{}],"vEj5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./is-type");exports.default=function(e){return Array.isArray?Array.isArray(e):r.default(e,"Array")};
},{"./is-type":"NmLk"}],"s4BX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./is-array"),r=require("./is-object");function t(t,i){if(t)if(e.default(t))for(var a=0,f=t.length;a<f&&!1!==i(t[a],a);a++);else if(r.default(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===i(t[o],o))break}exports.default=t;
},{"./is-array":"vEj5","./is-object":"LTPy"}],"ljGs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./is-nil");exports.default=function(t){return e.default(t)?"":t.toString()};
},{"./is-nil":"F0V7"}],"QFbu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./to-string"),r=function(r){var t=e.default(r);return t.charAt(0).toUpperCase()+t.substring(1)};exports.default=r;
},{"./to-string":"ljGs"}],"QXjy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeFromArray=s,exports.isParent=c,exports.isAllowCapture=p,Object.defineProperty(exports,"isNil",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"isFunction",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"isString",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"isObject",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"mix",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"each",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"upperFirst",{enumerable:!0,get:function(){return a.default}}),exports.isBrowser=void 0;var e=l(require("@antv/util/lib/is-nil")),r=l(require("@antv/util/lib/is-function")),t=l(require("@antv/util/lib/is-string")),i=l(require("@antv/util/lib/is-object")),n=l(require("@antv/util/lib/is-array")),u=l(require("@antv/util/lib/mix")),o=l(require("@antv/util/lib/each")),a=l(require("@antv/util/lib/upper-first"));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,r){var t=e.indexOf(r);-1!==t&&e.splice(t,1)}var f="undefined"!=typeof window&&void 0!==window.document;function c(e,r){if(e.isCanvas())return!0;for(var t=r.getParent(),i=!1;t;){if(t===e){i=!0;break}t=t.getParent()}return i}function p(e){return e.cfg.visible&&e.cfg.capture}exports.isBrowser=f;
},{"@antv/util/lib/is-nil":"F0V7","@antv/util/lib/is-function":"t2Eu","@antv/util/lib/is-string":"c0E0","@antv/util/lib/is-object":"LTPy","@antv/util/lib/is-array":"vEj5","@antv/util/lib/mix":"RIj8","@antv/util/lib/each":"s4BX","@antv/util/lib/upper-first":"QFbu"}],"V8o4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=o(require("@antv/event-emitter")),r=require("../util/util");function o(t){return t&&t.__esModule?t:{default:t}}var u=function(e){function o(t){var o=e.call(this)||this;o.destroyed=!1;var u=o.getDefaultCfg();return o.cfg=(0,r.mix)(u,t),o}return(0,t.__extends)(o,e),o.prototype.getDefaultCfg=function(){return{}},o.prototype.get=function(t){return this.cfg[t]},o.prototype.set=function(t,e){this.cfg[t]=e},o.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},o}(e.default),i=u;exports.default=i;
},{"tslib":"c4AP","@antv/event-emitter":"w2ae","../util/util":"QXjy"}],"t7Wl":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.detect=w,exports.browserName=v,exports.parseUserAgent=p,exports.detectOS=l,exports.getNodeVersion=S,exports.ReactNativeInfo=exports.BotInfo=exports.SearchBotDeviceInfo=exports.NodeInfo=exports.BrowserInfo=void 0;var o=function(){for(var e=0,o=0,n=arguments.length;o<n;o++)e+=arguments[o].length;var r=Array(e),i=0;for(o=0;o<n;o++)for(var t=arguments[o],s=0,a=t.length;s<a;s++,i++)r[i]=t[s];return r},n=function(){return function(e,o,n){this.name=e,this.version=o,this.os=n,this.type="browser"}}();exports.BrowserInfo=n;var r=function(){return function(o){this.version=o,this.type="node",this.name="node",this.os=e.platform}}();exports.NodeInfo=r;var i=function(){return function(e,o,n,r){this.name=e,this.version=o,this.os=n,this.bot=r,this.type="bot-device"}}();exports.SearchBotDeviceInfo=i;var t=function(){return function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}}();exports.BotInfo=t;var s=function(){return function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}}();exports.ReactNativeInfo=s;var a=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,d=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,u=3,c=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",a]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function w(e){return e?p(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new s:"undefined"!=typeof navigator?p(navigator.userAgent):S()}function h(e){return""!==e&&c.reduce(function(o,n){var r=n[0],i=n[1];if(o)return o;var t=i.exec(e);return!!t&&[r,t]},!1)}function v(e){var o=h(e);return o?o[0]:null}function p(e){var r=h(e);if(!r)return null;var s=r[0],a=r[1];if("searchbot"===s)return new t;var c=a[1]&&a[1].split(/[._]/).slice(0,3);c?c.length<u&&(c=o(c,b(u-c.length))):c=[];var f=c.join("."),w=l(e),v=d.exec(e);return v&&v[1]?new i(s,f,w,v[1]):new n(s,f,w)}function l(e){for(var o=0,n=f.length;o<n;o++){var r=f[o],i=r[0];if(r[1].exec(e))return i}return null}function S(){return void 0!==e&&e.version?new r(e.version.slice(1)):null}function b(e){for(var o=[],n=0;n<e;n++)o.push("0");return o}
},{"process":"FT5O"}],"AvvQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=e,exports.toRadian=s,exports.equals=n,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var t=1e-6;exports.EPSILON=t;var r="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=r;var a=Math.random;function e(t){exports.ARRAY_TYPE=r=t}exports.RANDOM=a;var o=Math.PI/180;function s(t){return t*o}function n(r,a){return Math.abs(r-a)<=t*Math.max(1,Math.abs(r),Math.abs(a))}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});
},{}],"skiN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.copy=a,exports.identity=u,exports.fromValues=s,exports.set=i,exports.transpose=c,exports.invert=p,exports.adjoint=f,exports.determinant=x,exports.multiply=l,exports.rotate=M,exports.scale=h,exports.fromRotation=b,exports.fromScaling=v,exports.str=y,exports.frob=d,exports.LDU=m,exports.add=P,exports.subtract=O,exports.exactEquals=A,exports.equals=j,exports.multiplyScalar=E,exports.multiplyScalarAndAdd=R,exports.sub=exports.mul=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function i(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function c(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function p(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*a-o*n;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-o*u,t[3]=e*u,t):null}function f(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t}function x(t){return t[0]*t[3]-t[2]*t[1]}function l(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return t[0]=n*s+a*i,t[1]=o*s+u*i,t[2]=n*c+a*p,t[3]=o*c+u*p,t}function M(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=Math.sin(e),i=Math.cos(e);return t[0]=n*i+a*s,t[1]=o*i+u*s,t[2]=n*-s+a*i,t[3]=o*-s+u*i,t}function h(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1];return t[0]=n*s,t[1]=o*s,t[2]=a*i,t[3]=u*i,t}function b(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t}function v(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function y(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function d(t){return Math.hypot(t[0],t[1],t[2],t[3])}function m(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function O(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function A(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function j(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}function E(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function R(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}var Y=l;exports.mul=Y;var _=O;exports.sub=_;
},{"./common.js":"AvvQ"}],"oRDk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=a,exports.copy=o,exports.identity=u,exports.fromValues=s,exports.set=i,exports.invert=c,exports.determinant=p,exports.multiply=f,exports.rotate=x,exports.scale=l,exports.translate=M,exports.fromRotation=h,exports.fromScaling=b,exports.fromTranslation=v,exports.str=m,exports.frob=y,exports.add=d,exports.subtract=P,exports.multiplyScalar=O,exports.multiplyScalarAndAdd=A,exports.exactEquals=E,exports.equals=R,exports.sub=exports.mul=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(6);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function a(r){var e=new t.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(r,e,n,a,o,u){var s=new t.ARRAY_TYPE(6);return s[0]=r,s[1]=e,s[2]=n,s[3]=a,s[4]=o,s[5]=u,s}function i(t,r,e,n,a,o,u){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=u,t}function c(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],u=r[4],s=r[5],i=e*o-n*a;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=e*i,t[4]=(a*s-o*u)*i,t[5]=(n*u-e*s)*i,t):null}function p(t){return t[0]*t[3]-t[1]*t[2]}function f(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1],f=e[2],x=e[3],l=e[4],M=e[5];return t[0]=n*c+o*p,t[1]=a*c+u*p,t[2]=n*f+o*x,t[3]=a*f+u*x,t[4]=n*l+o*M+s,t[5]=a*l+u*M+i,t}function x(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=Math.sin(e),p=Math.cos(e);return t[0]=n*p+o*c,t[1]=a*p+u*c,t[2]=n*-c+o*p,t[3]=a*-c+u*p,t[4]=s,t[5]=i,t}function l(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1];return t[0]=n*c,t[1]=a*c,t[2]=o*p,t[3]=u*p,t[4]=s,t[5]=i,t}function M(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=u,t[4]=n*c+o*p+s,t[5]=a*c+u*p+i,t}function h(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t[4]=0,t[5]=0,t}function b(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function m(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function d(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t}function P(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}function O(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t}function A(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t}function E(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function R(r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1],f=e[2],x=e[3],l=e[4],M=e[5];return Math.abs(n-c)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-f)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-x)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-M)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))}var S=f;exports.mul=S;var j=P;exports.sub=j;
},{"./common.js":"AvvQ"}],"viCO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=e,exports.clone=o,exports.copy=u,exports.fromValues=s,exports.set=i,exports.identity=c,exports.transpose=f,exports.invert=p,exports.adjoint=M,exports.determinant=x,exports.multiply=h,exports.translate=b,exports.rotate=l,exports.scale=m,exports.fromTranslation=v,exports.fromRotation=P,exports.fromScaling=O,exports.fromMat2d=d,exports.fromQuat=y,exports.normalFromMat4=E,exports.projection=S,exports.str=A,exports.frob=j,exports.add=I,exports.subtract=L,exports.multiplyScalar=N,exports.multiplyScalarAndAdd=R,exports.exactEquals=Y,exports.equals=_,exports.sub=exports.mul=void 0;var t=n(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=e?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=t[o]}return a.default=t,n&&n.set(t,a),a}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function e(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function o(r){var n=new t.ARRAY_TYPE(9);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,n,a,e,o,u,s,i,c){var f=new t.ARRAY_TYPE(9);return f[0]=r,f[1]=n,f[2]=a,f[3]=e,f[4]=o,f[5]=u,f[6]=s,f[7]=i,f[8]=c,f}function i(t,r,n,a,e,o,u,s,i,c){return t[0]=r,t[1]=n,t[2]=a,t[3]=e,t[4]=o,t[5]=u,t[6]=s,t[7]=i,t[8]=c,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,r){if(t===r){var n=r[1],a=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=a,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function p(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=f*u-s*c,M=-f*o+s*i,x=c*o-u*i,h=n*p+a*M+e*x;return h?(h=1/h,t[0]=p*h,t[1]=(-f*a+e*c)*h,t[2]=(s*a-e*u)*h,t[3]=M*h,t[4]=(f*n-e*i)*h,t[5]=(-s*n+e*o)*h,t[6]=x*h,t[7]=(-c*n+a*i)*h,t[8]=(u*n-a*o)*h,t):null}function M(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8];return t[0]=u*f-s*c,t[1]=e*c-a*f,t[2]=a*s-e*u,t[3]=s*i-o*f,t[4]=n*f-e*i,t[5]=e*o-n*s,t[6]=o*c-u*i,t[7]=a*i-n*c,t[8]=n*u-a*o,t}function x(t){var r=t[0],n=t[1],a=t[2],e=t[3],o=t[4],u=t[5],s=t[6],i=t[7],c=t[8];return r*(c*o-u*i)+n*(-c*e+u*s)+a*(i*e-o*s)}function h(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return t[0]=M*a+x*u+h*c,t[1]=M*e+x*s+h*f,t[2]=M*o+x*i+h*p,t[3]=b*a+l*u+m*c,t[4]=b*e+l*s+m*f,t[5]=b*o+l*i+m*p,t[6]=v*a+P*u+O*c,t[7]=v*e+P*s+O*f,t[8]=v*o+P*i+O*p,t}function b(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1];return t[0]=a,t[1]=e,t[2]=o,t[3]=u,t[4]=s,t[5]=i,t[6]=M*a+x*u+c,t[7]=M*e+x*s+f,t[8]=M*o+x*i+p,t}function l(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=Math.sin(n),x=Math.cos(n);return t[0]=x*a+M*u,t[1]=x*e+M*s,t[2]=x*o+M*i,t[3]=x*u-M*a,t[4]=x*s-M*e,t[5]=x*i-M*o,t[6]=c,t[7]=f,t[8]=p,t}function m(t,r,n){var a=n[0],e=n[1];return t[0]=a*r[0],t[1]=a*r[1],t[2]=a*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function P(t,r){var n=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=n,t[2]=0,t[3]=-n,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function y(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=n+n,s=a+a,i=e+e,c=n*u,f=a*u,p=a*s,M=e*u,x=e*s,h=e*i,b=o*u,l=o*s,m=o*i;return t[0]=1-p-h,t[3]=f-m,t[6]=M+l,t[1]=f+m,t[4]=1-c-h,t[7]=x-b,t[2]=M-l,t[5]=x+b,t[8]=1-c-p,t}function E(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=r[9],M=r[10],x=r[11],h=r[12],b=r[13],l=r[14],m=r[15],v=n*s-a*u,P=n*i-e*u,O=n*c-o*u,d=a*i-e*s,y=a*c-o*s,E=e*c-o*i,S=f*b-p*h,A=f*l-M*h,j=f*m-x*h,I=p*l-M*b,L=p*m-x*b,N=M*m-x*l,R=v*N-P*L+O*I+d*j-y*A+E*S;return R?(R=1/R,t[0]=(s*N-i*L+c*I)*R,t[1]=(i*j-u*N-c*A)*R,t[2]=(u*L-s*j+c*S)*R,t[3]=(e*L-a*N-o*I)*R,t[4]=(n*N-e*j+o*A)*R,t[5]=(a*j-n*L-o*S)*R,t[6]=(b*E-l*y+m*d)*R,t[7]=(l*O-h*E-m*P)*R,t[8]=(h*y-b*O+m*v)*R,t):null}function S(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function j(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function I(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t}function L(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}function N(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t}function R(t,r,n,a){return t[0]=r[0]+n[0]*a,t[1]=r[1]+n[1]*a,t[2]=r[2]+n[2]*a,t[3]=r[3]+n[3]*a,t[4]=r[4]+n[4]*a,t[5]=r[5]+n[5]*a,t[6]=r[6]+n[6]*a,t[7]=r[7]+n[7]*a,t[8]=r[8]+n[8]*a,t}function Y(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function _(r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return Math.abs(a-M)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(e-x)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-b)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-m)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-v)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-P)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-O)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))}var w=h;exports.mul=w;var g=L;exports.sub=g;
},{"./common.js":"AvvQ"}],"ORDv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=h,exports.transpose=M,exports.invert=i,exports.adjoint=c,exports.determinant=p,exports.multiply=f,exports.translate=x,exports.scale=b,exports.rotate=l,exports.rotateX=v,exports.rotateY=m,exports.rotateZ=P,exports.fromTranslation=O,exports.fromScaling=E,exports.fromRotation=S,exports.fromXRotation=y,exports.fromYRotation=I,exports.fromZRotation=L,exports.fromRotationTranslation=N,exports.fromQuat2=R,exports.getTranslation=d,exports.getScaling=g,exports.getRotation=A,exports.fromRotationTranslationScale=Y,exports.fromRotationTranslationScaleOrigin=T,exports.fromQuat=w,exports.frustum=_,exports.perspective=j,exports.perspectiveFromFieldOfView=q,exports.ortho=D,exports.lookAt=k,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=W,exports.subtract=X,exports.multiplyScalar=Z,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=e?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function n(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function e(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s(a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=e,v[4]=o,v[5]=s,v[6]=u,v[7]=h,v[8]=M,v[9]=i,v[10]=c,v[11]=p,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function u(t,a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=h,t[8]=M,t[9]=i,t[10]=c,t[11]=p,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],s=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=s,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function i(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*u-n*s,P=r*h-e*s,O=r*M-o*s,E=n*h-e*u,S=n*M-o*u,y=e*M-o*h,I=i*b-c*x,L=i*l-p*x,N=i*v-f*x,R=c*l-p*b,d=c*v-f*b,g=p*v-f*l,A=m*g-P*d+O*R+E*N-S*L+y*I;return A?(A=1/A,t[0]=(u*g-h*d+M*R)*A,t[1]=(e*d-n*g-o*R)*A,t[2]=(b*y-l*S+v*E)*A,t[3]=(p*S-c*y-f*E)*A,t[4]=(h*N-s*g-M*L)*A,t[5]=(r*g-e*N+o*L)*A,t[6]=(l*O-x*y-v*P)*A,t[7]=(i*y-p*O+f*P)*A,t[8]=(s*d-u*N+M*I)*A,t[9]=(n*N-r*d-o*I)*A,t[10]=(x*S-b*O+v*m)*A,t[11]=(c*O-i*S-f*m)*A,t[12]=(u*L-s*R-h*I)*A,t[13]=(r*R-n*L+e*I)*A,t[14]=(b*P-x*E-l*m)*A,t[15]=(i*E-c*P+p*m)*A,t):null}function c(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=u*(p*v-f*l)-c*(h*v-M*l)+b*(h*f-M*p),t[1]=-(n*(p*v-f*l)-c*(e*v-o*l)+b*(e*f-o*p)),t[2]=n*(h*v-M*l)-u*(e*v-o*l)+b*(e*M-o*h),t[3]=-(n*(h*f-M*p)-u*(e*f-o*p)+c*(e*M-o*h)),t[4]=-(s*(p*v-f*l)-i*(h*v-M*l)+x*(h*f-M*p)),t[5]=r*(p*v-f*l)-i*(e*v-o*l)+x*(e*f-o*p),t[6]=-(r*(h*v-M*l)-s*(e*v-o*l)+x*(e*M-o*h)),t[7]=r*(h*f-M*p)-s*(e*f-o*p)+i*(e*M-o*h),t[8]=s*(c*v-f*b)-i*(u*v-M*b)+x*(u*f-M*c),t[9]=-(r*(c*v-f*b)-i*(n*v-o*b)+x*(n*f-o*c)),t[10]=r*(u*v-M*b)-s*(n*v-o*b)+x*(n*M-o*u),t[11]=-(r*(u*f-M*c)-s*(n*f-o*c)+i*(n*M-o*u)),t[12]=-(s*(c*l-p*b)-i*(u*l-h*b)+x*(u*p-h*c)),t[13]=r*(c*l-p*b)-i*(n*l-e*b)+x*(n*p-e*c),t[14]=-(r*(u*l-h*b)-s*(n*l-e*b)+x*(n*h-e*u)),t[15]=r*(u*p-h*c)-s*(n*p-e*c)+i*(n*h-e*u),t}function p(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],h=t[7],M=t[8],i=t[9],c=t[10],p=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*o)*(c*l-p*b)-(a*u-n*o)*(i*l-p*x)+(a*h-e*o)*(i*b-c*x)+(r*u-n*s)*(M*l-p*f)-(r*h-e*s)*(M*b-c*f)+(n*h-e*u)*(M*x-i*f)}function f(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*u+E*c+S*b,t[1]=P*e+O*h+E*p+S*l,t[2]=P*o+O*M+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*u+E*c+S*b,t[5]=P*e+O*h+E*p+S*l,t[6]=P*o+O*M+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*u+E*c+S*b,t[9]=P*e+O*h+E*p+S*l,t[10]=P*o+O*M+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*u+E*c+S*b,t[13]=P*e+O*h+E*p+S*l,t[14]=P*o+O*M+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function x(t,a,r){var n,e,o,s,u,h,M,i,c,p,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=h,t[6]=M,t[7]=i,t[8]=c,t[9]=p,t[10]=f,t[11]=x,t[12]=n*b+u*l+c*v+a[12],t[13]=e*b+h*l+p*v+a[13],t[14]=o*b+M*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function b(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function l(a,r,n,e){var o,s,u,h,M,i,c,p,f,x,b,l,v,m,P,O,E,S,y,I,L,N,R,d,g=e[0],A=e[1],Y=e[2],T=Math.hypot(g,A,Y);return T<t.EPSILON?null:(g*=T=1/T,A*=T,Y*=T,o=Math.sin(n),u=1-(s=Math.cos(n)),h=r[0],M=r[1],i=r[2],c=r[3],p=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=g*g*u+s,E=A*g*u+Y*o,S=Y*g*u-A*o,y=g*A*u-Y*o,I=A*A*u+s,L=Y*A*u+g*o,N=g*Y*u+A*o,R=A*Y*u-g*o,d=Y*Y*u+s,a[0]=h*O+p*E+l*S,a[1]=M*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=c*O+b*E+P*S,a[4]=h*y+p*I+l*L,a[5]=M*y+f*I+v*L,a[6]=i*y+x*I+m*L,a[7]=c*y+b*I+P*L,a[8]=h*N+p*R+l*d,a[9]=M*N+f*R+v*d,a[10]=i*N+x*R+m*d,a[11]=c*N+b*R+P*d,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function v(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],s=a[5],u=a[6],h=a[7],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+M*n,t[5]=s*e+i*n,t[6]=u*e+c*n,t[7]=h*e+p*n,t[8]=M*e-o*n,t[9]=i*e-s*n,t[10]=c*e-u*n,t[11]=p*e-h*n,t}function m(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-M*n,t[1]=s*e-i*n,t[2]=u*e-c*n,t[3]=h*e-p*n,t[8]=o*n+M*e,t[9]=s*n+i*e,t[10]=u*n+c*e,t[11]=h*n+p*e,t}function P(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[4],i=a[5],c=a[6],p=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+M*n,t[1]=s*e+i*n,t[2]=u*e+c*n,t[3]=h*e+p*n,t[4]=M*e-o*n,t[5]=i*e-s*n,t[6]=c*e-u*n,t[7]=p*e-h*n,t}function O(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function E(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(a,r,n){var e,o,s,u=n[0],h=n[1],M=n[2],i=Math.hypot(u,h,M);return i<t.EPSILON?null:(u*=i=1/i,h*=i,M*=i,e=Math.sin(r),s=1-(o=Math.cos(r)),a[0]=u*u*s+o,a[1]=h*u*s+M*e,a[2]=M*u*s-h*e,a[3]=0,a[4]=u*h*s-M*e,a[5]=h*h*s+o,a[6]=M*h*s+u*e,a[7]=0,a[8]=u*M*s+h*e,a[9]=h*M*s-u*e,a[10]=M*M*s+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function y(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=n+n,h=e+e,M=o+o,i=n*u,c=n*h,p=n*M,f=e*h,x=e*M,b=o*M,l=s*u,v=s*h,m=s*M;return t[0]=1-(f+b),t[1]=c+m,t[2]=p-v,t[3]=0,t[4]=c-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=p+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function R(a,r){var n=new t.ARRAY_TYPE(3),e=-r[0],o=-r[1],s=-r[2],u=r[3],h=r[4],M=r[5],i=r[6],c=r[7],p=e*e+o*o+s*s+u*u;return p>0?(n[0]=2*(h*u+c*e+M*s-i*o)/p,n[1]=2*(M*u+c*o+i*e-h*s)/p,n[2]=2*(i*u+c*s+h*o-M*e)/p):(n[0]=2*(h*u+c*e+M*s-i*o),n[1]=2*(M*u+c*o+i*e-h*s),n[2]=2*(i*u+c*s+h*o-M*e)),N(a,r,n),a}function d(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function g(t,a){var r=a[0],n=a[1],e=a[2],o=a[4],s=a[5],u=a[6],h=a[8],M=a[9],i=a[10];return t[0]=Math.hypot(r,n,e),t[1]=Math.hypot(o,s,u),t[2]=Math.hypot(h,M,i),t}function A(a,r){var n=new t.ARRAY_TYPE(3);g(n,r);var e=1/n[0],o=1/n[1],s=1/n[2],u=r[0]*e,h=r[1]*o,M=r[2]*s,i=r[4]*e,c=r[5]*o,p=r[6]*s,f=r[8]*e,x=r[9]*o,b=r[10]*s,l=u+c+b,v=0;return l>0?(v=2*Math.sqrt(l+1),a[3]=.25*v,a[0]=(p-x)/v,a[1]=(f-M)/v,a[2]=(h-i)/v):u>c&&u>b?(v=2*Math.sqrt(1+u-c-b),a[3]=(p-x)/v,a[0]=.25*v,a[1]=(h+i)/v,a[2]=(f+M)/v):c>b?(v=2*Math.sqrt(1+c-u-b),a[3]=(f-M)/v,a[0]=(h+i)/v,a[1]=.25*v,a[2]=(p+x)/v):(v=2*Math.sqrt(1+b-u-c),a[3]=(h-i)/v,a[0]=(f+M)/v,a[1]=(p+x)/v,a[2]=.25*v),a}function Y(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=a[3],h=e+e,M=o+o,i=s+s,c=e*h,p=e*M,f=e*i,x=o*M,b=o*i,l=s*i,v=u*h,m=u*M,P=u*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(p+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(p-P)*E,t[5]=(1-(c+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(c+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,a,r,n,e){var o=a[0],s=a[1],u=a[2],h=a[3],M=o+o,i=s+s,c=u+u,p=o*M,f=o*i,x=o*c,b=s*i,l=s*c,v=u*c,m=h*M,P=h*i,O=h*c,E=n[0],S=n[1],y=n[2],I=e[0],L=e[1],N=e[2],R=(1-(b+v))*E,d=(f+O)*E,g=(x-P)*E,A=(f-O)*S,Y=(1-(p+v))*S,T=(l+m)*S,w=(x+P)*y,_=(l-m)*y,j=(1-(p+b))*y;return t[0]=R,t[1]=d,t[2]=g,t[3]=0,t[4]=A,t[5]=Y,t[6]=T,t[7]=0,t[8]=w,t[9]=_,t[10]=j,t[11]=0,t[12]=r[0]+I-(R*I+A*L+w*N),t[13]=r[1]+L-(d*I+Y*L+_*N),t[14]=r[2]+N-(g*I+T*L+j*N),t[15]=1,t}function w(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=r+r,u=n+n,h=e+e,M=r*s,i=n*s,c=n*u,p=e*s,f=e*u,x=e*h,b=o*s,l=o*u,v=o*h;return t[0]=1-c-x,t[1]=i+v,t[2]=p-l,t[3]=0,t[4]=i-v,t[5]=1-M-x,t[6]=f+b,t[7]=0,t[8]=p+l,t[9]=f-b,t[10]=1-M-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,a,r,n,e,o,s){var u=1/(r-a),h=1/(e-n),M=1/(o-s);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*h,t[10]=(s+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*M,t[15]=0,t}function j(t,a,r,n,e){var o,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(o=1/(n-e),t[10]=(e+n)*o,t[14]=2*e*n*o):(t[10]=-1,t[14]=-2*n),t}function q(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),h=2/(s+u),M=2/(e+o);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(s-u)*h*.5,t[9]=(e-o)*M*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function D(t,a,r,n,e,o,s){var u=1/(a-r),h=1/(n-e),M=1/(o-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*h,t[14]=(s+o)*M,t[15]=1,t}function k(a,r,n,e){var o,s,u,M,i,c,p,f,x,b,l=r[0],v=r[1],m=r[2],P=e[0],O=e[1],E=e[2],S=n[0],y=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-y)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(p=l-S,f=v-y,x=m-I,o=O*(x*=b=1/Math.hypot(p,f,x))-E*(f*=b),s=E*(p*=b)-P*x,u=P*f-O*p,(b=Math.hypot(o,s,u))?(o*=b=1/b,s*=b,u*=b):(o=0,s=0,u=0),M=f*u-x*s,i=x*o-p*u,c=p*s-f*o,(b=Math.hypot(M,i,c))?(M*=b=1/b,i*=b,c*=b):(M=0,i=0,c=0),a[0]=o,a[1]=M,a[2]=p,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=u,a[9]=c,a[10]=x,a[11]=0,a[12]=-(o*l+s*v+u*m),a[13]=-(M*l+i*v+c*m),a[14]=-(p*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=n[0],h=n[1],M=n[2],i=e-r[0],c=o-r[1],p=s-r[2],f=i*i+c*c+p*p;f>0&&(i*=f=1/Math.sqrt(f),c*=f,p*=f);var x=h*p-M*c,b=M*i-u*p,l=u*c-h*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=c*l-p*b,t[5]=p*x-i*l,t[6]=i*b-c*x,t[7]=0,t[8]=i,t[9]=c,t[10]=p,t[11]=0,t[12]=e,t[13]=o,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function W(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function X(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function Z(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],y=r[4],I=r[5],L=r[6],N=r[7],R=r[8],d=r[9],g=r[10],A=r[11],Y=r[12],T=r[13],w=r[14],_=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(e-O)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(O))&&Math.abs(o-E)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-y)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(h-I)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(M-L)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(p-d)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(d))&&Math.abs(f-g)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(x-A)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(b-Y)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(l-T)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(v-w)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-_)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))}var G=f;exports.mul=G;var H=X;exports.sub=H;
},{"./common.js":"AvvQ"}],"QPaN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.length=a,exports.fromValues=s,exports.copy=u,exports.set=i,exports.add=c,exports.subtract=p,exports.multiply=f,exports.divide=x,exports.ceil=h,exports.floor=M,exports.min=v,exports.max=l,exports.round=d,exports.scale=m,exports.scaleAndAdd=b,exports.distance=y,exports.squaredDistance=O,exports.squaredLength=P,exports.negate=q,exports.inverse=A,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=Y,exports.hermite=j,exports.bezier=_,exports.random=w,exports.transformMat4=D,exports.transformMat3=L,exports.transformQuat=N,exports.rotateX=I,exports.rotateY=T,exports.rotateZ=z,exports.angle=S,exports.zero=k,exports.str=W,exports.exactEquals=F,exports.equals=Q,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function o(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function a(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function s(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function i(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function c(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function p(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function f(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function h(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function M(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function d(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function m(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function b(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.hypot(e,n,o)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function P(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function q(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function A(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function g(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function Y(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function j(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,f=3*i*s,x=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*f+o[0]*x,t[1]=r[1]*c+e[1]*p+n[1]*f+o[1]*x,t[2]=r[2]*c+e[2]*p+n[2]*f+o[2]*x,t}function w(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function L(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function N(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,f=a*u-n*c,x=n*i-o*u,h=o*x-a*f,M=a*p-n*x,v=n*f-o*p,l=2*s;return p*=l,f*=l,x*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+f+M,t[2]=c+x+v,t}function I(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function S(t,r){var e=t[0],n=t[1],o=t[2],a=r[0],s=r[1],u=r[2],i=Math.sqrt(e*e+n*n+o*o)*Math.sqrt(a*a+s*s+u*u),c=i&&E(t,r)/i;return Math.acos(Math.min(Math.max(c,-1),1))}function k(t){return t[0]=0,t[1]=0,t[2]=0,t}function W(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Q(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var V=p;exports.sub=V;var X=f;exports.mul=X;var Z=x;exports.div=Z;var B=y;exports.dist=B;var C=O;exports.sqrDist=C;var G=a;exports.len=G;var H=P;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"AvvQ"}],"JZVy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=M,exports.max=l,exports.round=v,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=O,exports.length=y,exports.squaredLength=A,exports.negate=P,exports.inverse=R,exports.normalize=q,exports.dot=E,exports.cross=g,exports.lerp=w,exports.random=D,exports.transformMat4=j,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=L,exports.equals=I,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function v(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.hypot(e,n,o,a)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function y(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.hypot(r,e,n,o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function R(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function q(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*e+n*n+o*o+a*a;return u>0&&(u=1/Math.sqrt(u)),t[0]=e*u,t[1]=n*u,t[2]=o*u,t[3]=a*u,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function g(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],u=e[0]*n[3]-e[3]*n[0],s=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],f=r[1],x=r[2],h=r[3];return t[0]=f*c-x*i+h*s,t[1]=-p*c+x*u-h*a,t[2]=p*i-f*u+h*o,t[3]=-p*s+f*a-x*o,t}function w(t,r,e,n){var o=r[0],a=r[1],u=r[2],s=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=u+n*(e[2]-u),t[3]=s+n*(e[3]-s),t}function D(r,e){var n,o,a,u,s,i;e=e||1;do{s=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(s>=1);do{i=(a=2*t.RANDOM()-1)*a+(u=2*t.RANDOM()-1)*u}while(i>=1);var c=Math.sqrt((1-s)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*u*c,r}function j(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*u,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*u,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*u,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*u,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],u=e[0],s=e[1],i=e[2],c=e[3],p=c*n+s*a-i*o,f=c*o+i*n-u*a,x=c*a+u*o-s*n,h=-u*n-s*o-i*a;return t[0]=p*c+h*-u+f*-i-x*-s,t[1]=f*c+h*-s+x*-u-p*-i,t[2]=x*c+h*-i+p*-s-f*-u,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function I(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}var S=c;exports.sub=S;var T=p;exports.mul=T;var k=f;exports.div=k;var z=b;exports.dist=z;var W=O;exports.sqrDist=W;var F=y;exports.len=F;var Q=A;exports.sqrLen=Q;var V=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],a(t,t,u),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();exports.forEach=V;
},{"./common.js":"AvvQ"}],"Q0pO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=s,exports.identity=u,exports.setAxisAngle=p,exports.getAxisAngle=c,exports.getAngle=i,exports.multiply=x,exports.rotateX=l,exports.rotateY=f,exports.rotateZ=v,exports.calculateW=h,exports.exp=M,exports.ln=q,exports.pow=d,exports.slerp=m,exports.random=g,exports.invert=y,exports.conjugate=P,exports.fromMat3=A,exports.fromEuler=O,exports.str=j,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var t=n(require("./common.js")),r=n(require("./mat3.js")),e=n(require("./vec3.js")),o=n(require("./vec4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=o?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(e,n,s):e[n]=t[n]}return e.default=t,r&&r.set(t,e),e}function s(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function p(t,r,e){e*=.5;var o=Math.sin(e);return t[0]=o*r[0],t[1]=o*r[1],t[2]=o*r[2],t[3]=Math.cos(e),t}function c(r,e){var o=2*Math.acos(e[3]),a=Math.sin(o/2);return a>t.EPSILON?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=1,r[1]=0,r[2]=0),o}function i(t,r){var e=D(t,r);return Math.acos(2*e*e-1)}function x(t,r,e){var o=r[0],a=r[1],n=r[2],s=r[3],u=e[0],p=e[1],c=e[2],i=e[3];return t[0]=o*i+s*u+a*c-n*p,t[1]=a*i+s*p+n*u-o*c,t[2]=n*i+s*c+o*p-a*u,t[3]=s*i-o*u-a*p-n*c,t}function l(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+s*u,t[1]=a*p+n*u,t[2]=n*p-a*u,t[3]=s*p-o*u,t}function f(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p-n*u,t[1]=a*p+s*u,t[2]=n*p+o*u,t[3]=s*p-a*u,t}function v(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+a*u,t[1]=a*p-o*u,t[2]=n*p+s*u,t[3]=s*p-n*u,t}function h(t,r){var e=r[0],o=r[1],a=r[2];return t[0]=e,t[1]=o,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-o*o-a*a)),t}function M(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=Math.exp(n),p=s>0?u*Math.sin(s)/s:0;return t[0]=e*p,t[1]=o*p,t[2]=a*p,t[3]=u*Math.cos(s),t}function q(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=s>0?Math.atan2(s,n)/s:0;return t[0]=e*u,t[1]=o*u,t[2]=a*u,t[3]=.5*Math.log(e*e+o*o+a*a+n*n),t}function d(t,r,e){return q(t,r),_(t,t,e),M(t,t),t}function m(r,e,o,a){var n,s,u,p,c,i=e[0],x=e[1],l=e[2],f=e[3],v=o[0],h=o[1],M=o[2],q=o[3];return(s=i*v+x*h+l*M+f*q)<0&&(s=-s,v=-v,h=-h,M=-M,q=-q),1-s>t.EPSILON?(n=Math.acos(s),u=Math.sin(n),p=Math.sin((1-a)*n)/u,c=Math.sin(a*n)/u):(p=1-a,c=a),r[0]=p*i+c*v,r[1]=p*x+c*h,r[2]=p*l+c*M,r[3]=p*f+c*q,r}function g(r){var e=t.RANDOM(),o=t.RANDOM(),a=t.RANDOM(),n=Math.sqrt(1-e),s=Math.sqrt(e);return r[0]=n*Math.sin(2*Math.PI*o),r[1]=n*Math.cos(2*Math.PI*o),r[2]=s*Math.sin(2*Math.PI*a),r[3]=s*Math.cos(2*Math.PI*a),r}function y(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=e*e+o*o+a*a+n*n,u=s?1/s:0;return t[0]=-e*u,t[1]=-o*u,t[2]=-a*u,t[3]=n*u,t}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function A(t,r){var e,o=r[0]+r[4]+r[8];if(o>0)e=Math.sqrt(o+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var n=(a+1)%3,s=(a+2)%3;e=Math.sqrt(r[3*a+a]-r[3*n+n]-r[3*s+s]+1),t[a]=.5*e,e=.5/e,t[3]=(r[3*n+s]-r[3*s+n])*e,t[n]=(r[3*n+a]+r[3*a+n])*e,t[s]=(r[3*s+a]+r[3*a+s])*e}return t}function O(t,r,e,o){var a=.5*Math.PI/180;r*=a,e*=a,o*=a;var n=Math.sin(r),s=Math.cos(r),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return t[0]=n*p*i-s*u*c,t[1]=s*u*i+n*p*c,t[2]=s*p*c-n*u*i,t[3]=s*p*i+n*u*c,t}function j(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var b=o.clone;exports.clone=b;var E=o.fromValues;exports.fromValues=E;var I=o.copy;exports.copy=I;var L=o.set;exports.set=L;var R=o.add;exports.add=R;var w=x;exports.mul=w;var _=o.scale;exports.scale=_;var D=o.dot;exports.dot=D;var N=o.lerp;exports.lerp=N;var V=o.length;exports.length=V;var Y=V;exports.len=Y;var z=o.squaredLength;exports.squaredLength=z;var T=z;exports.sqrLen=T;var W=o.normalize;exports.normalize=W;var k=o.exactEquals;exports.exactEquals=k;var S=o.equals;exports.equals=S;var F=function(){var t=e.create(),r=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(a,n,s){var u=e.dot(n,s);return u<-.999999?(e.cross(t,r,n),e.len(t)<1e-6&&e.cross(t,o,n),e.normalize(t,t),p(a,t,Math.PI),a):u>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(e.cross(t,n,s),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+u,W(a,a))}}();exports.rotationTo=F;var X=function(){var t=s(),r=s();return function(e,o,a,n,s,u){return m(t,o,s,u),m(r,a,n,u),m(e,t,r,2*u*(1-u)),e}}();exports.sqlerp=X;var Z=function(){var t=r.create();return function(r,e,o,a){return t[0]=o[0],t[3]=o[1],t[6]=o[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],W(r,A(r,t))}}();exports.setAxes=Z;
},{"./common.js":"AvvQ","./mat3.js":"viCO","./vec3.js":"QPaN","./vec4.js":"JZVy"}],"yoBk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=o,exports.clone=s,exports.fromValues=u,exports.fromRotationTranslationValues=p,exports.fromRotationTranslation=i,exports.fromTranslation=c,exports.fromRotation=f,exports.fromMat4=x,exports.copy=h,exports.identity=l,exports.set=M,exports.getDual=b,exports.setDual=m,exports.getTranslation=d,exports.translate=R,exports.rotateX=y,exports.rotateY=O,exports.rotateZ=g,exports.rotateByQuatAppend=A,exports.rotateByQuatPrepend=E,exports.rotateAroundAxis=L,exports.add=Y,exports.multiply=q,exports.scale=T,exports.lerp=w,exports.invert=I,exports.conjugate=N,exports.normalize=Q,exports.str=V,exports.exactEquals=W,exports.equals=X,exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.dot=exports.mul=exports.setReal=exports.getReal=void 0;var t=n(require("./common.js")),r=n(require("./quat.js")),e=n(require("./mat4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=n?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(e,o,s):e[o]=t[o]}return e.default=t,r&&r.set(t,e),e}function o(){var r=new t.ARRAY_TYPE(8);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function s(r){var e=new t.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function u(r,e,a,n,o,s,u,p){var i=new t.ARRAY_TYPE(8);return i[0]=r,i[1]=e,i[2]=a,i[3]=n,i[4]=o,i[5]=s,i[6]=u,i[7]=p,i}function p(r,e,a,n,o,s,u){var p=new t.ARRAY_TYPE(8);p[0]=r,p[1]=e,p[2]=a,p[3]=n;var i=.5*o,c=.5*s,f=.5*u;return p[4]=i*n+c*a-f*e,p[5]=c*n+f*r-i*a,p[6]=f*n+i*e-c*r,p[7]=-i*r-c*e-f*a,p}function i(t,r,e){var a=.5*e[0],n=.5*e[1],o=.5*e[2],s=r[0],u=r[1],p=r[2],i=r[3];return t[0]=s,t[1]=u,t[2]=p,t[3]=i,t[4]=a*i+n*p-o*u,t[5]=n*i+o*s-a*p,t[6]=o*i+a*u-n*s,t[7]=-a*s-n*u-o*p,t}function c(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function f(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function x(a,n){var o=r.create();e.getRotation(o,n);var s=new t.ARRAY_TYPE(3);return e.getTranslation(s,n),i(a,o,s),a}function h(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function l(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function M(t,r,e,a,n,o,s,u,p){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t}var v=r.copy;function b(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}exports.getReal=v;var P=r.copy;function m(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function d(t,r){var e=r[4],a=r[5],n=r[6],o=r[7],s=-r[0],u=-r[1],p=-r[2],i=r[3];return t[0]=2*(e*i+o*s+a*p-n*u),t[1]=2*(a*i+o*u+n*s-e*p),t[2]=2*(n*i+o*p+e*u-a*s),t}function R(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=.5*e[0],p=.5*e[1],i=.5*e[2],c=r[4],f=r[5],x=r[6],h=r[7];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=s*u+n*i-o*p+c,t[5]=s*p+o*u-a*i+f,t[6]=s*i+a*p-n*u+x,t[7]=-a*u-n*p-o*i+h,t}function y(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateX(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function O(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateY(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function g(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateZ(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function A(t,r,e){var a=e[0],n=e[1],o=e[2],s=e[3],u=r[0],p=r[1],i=r[2],c=r[3];return t[0]=u*s+c*a+p*o-i*n,t[1]=p*s+c*n+i*a-u*o,t[2]=i*s+c*o+u*n-p*a,t[3]=c*s-u*a-p*n-i*o,u=r[4],p=r[5],i=r[6],c=r[7],t[4]=u*s+c*a+p*o-i*n,t[5]=p*s+c*n+i*a-u*o,t[6]=i*s+c*o+u*n-p*a,t[7]=c*s-u*a-p*n-i*o,t}function E(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[0],p=e[1],i=e[2],c=e[3];return t[0]=a*c+s*u+n*i-o*p,t[1]=n*c+s*p+o*u-a*i,t[2]=o*c+s*i+a*p-n*u,t[3]=s*c-a*u-n*p-o*i,u=e[4],p=e[5],i=e[6],c=e[7],t[4]=a*c+s*u+n*i-o*p,t[5]=n*c+s*p+o*u-a*i,t[6]=o*c+s*i+a*p-n*u,t[7]=s*c-a*u-n*p-o*i,t}function L(r,e,a,n){if(Math.abs(n)<t.EPSILON)return h(r,e);var o=Math.hypot(a[0],a[1],a[2]);n*=.5;var s=Math.sin(n),u=s*a[0]/o,p=s*a[1]/o,i=s*a[2]/o,c=Math.cos(n),f=e[0],x=e[1],l=e[2],M=e[3];r[0]=f*c+M*u+x*i-l*p,r[1]=x*c+M*p+l*u-f*i,r[2]=l*c+M*i+f*p-x*u,r[3]=M*c-f*u-x*p-l*i;var v=e[4],b=e[5],P=e[6],m=e[7];return r[4]=v*c+m*u+b*i-P*p,r[5]=b*c+m*p+P*u-v*i,r[6]=P*c+m*i+v*p-b*u,r[7]=m*c-v*u-b*p-P*i,r}function Y(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t}function q(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[4],p=e[5],i=e[6],c=e[7],f=r[4],x=r[5],h=r[6],l=r[7],M=e[0],v=e[1],b=e[2],P=e[3];return t[0]=a*P+s*M+n*b-o*v,t[1]=n*P+s*v+o*M-a*b,t[2]=o*P+s*b+a*v-n*M,t[3]=s*P-a*M-n*v-o*b,t[4]=a*c+s*u+n*i-o*p+f*P+l*M+x*b-h*v,t[5]=n*c+s*p+o*u-a*i+x*P+l*v+h*M-f*b,t[6]=o*c+s*i+a*p-n*u+h*P+l*b+f*v-x*M,t[7]=s*c-a*u-n*p-o*i+l*P-f*M-x*v-h*b,t}exports.setReal=P;var j=q;function T(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t}exports.mul=j;var _=r.dot;function w(t,r,e,a){var n=1-a;return _(r,e)<0&&(a=-a),t[0]=r[0]*n+e[0]*a,t[1]=r[1]*n+e[1]*a,t[2]=r[2]*n+e[2]*a,t[3]=r[3]*n+e[3]*a,t[4]=r[4]*n+e[4]*a,t[5]=r[5]*n+e[5]*a,t[6]=r[6]*n+e[6]*a,t[7]=r[7]*n+e[7]*a,t}function I(t,r){var e=k(r);return t[0]=-r[0]/e,t[1]=-r[1]/e,t[2]=-r[2]/e,t[3]=r[3]/e,t[4]=-r[4]/e,t[5]=-r[5]/e,t[6]=-r[6]/e,t[7]=r[7]/e,t}function N(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}exports.dot=_;var S=r.length;exports.length=S;var D=S;exports.len=D;var k=r.squaredLength;exports.squaredLength=k;var B=k;function Q(t,r){var e=k(r);if(e>0){e=Math.sqrt(e);var a=r[0]/e,n=r[1]/e,o=r[2]/e,s=r[3]/e,u=r[4],p=r[5],i=r[6],c=r[7],f=a*u+n*p+o*i+s*c;t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=(u-a*f)/e,t[5]=(p-n*f)/e,t[6]=(i-o*f)/e,t[7]=(c-s*f)/e}return t}function V(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function W(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function X(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],c=r[7],f=e[0],x=e[1],h=e[2],l=e[3],M=e[4],v=e[5],b=e[6],P=e[7];return Math.abs(a-f)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(n-x)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(u-M)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(p-v)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(i-b)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(c-P)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))}exports.sqrLen=B;
},{"./common.js":"AvvQ","./quat.js":"Q0pO","./mat4.js":"ORDv"}],"CHQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=v,exports.max=M,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=y,exports.length=P,exports.squaredLength=q,exports.negate=A,exports.inverse=O,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=j,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=w,exports.transformMat3=D,exports.transformMat4=L,exports.rotate=T,exports.angle=I,exports.zero=N,exports.str=k,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(2);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0),r}function o(r){var e=new t.ARRAY_TYPE(2);return e[0]=r[0],e[1]=r[1],e}function a(r,e){var n=new t.ARRAY_TYPE(2);return n[0]=r,n[1]=e,n}function u(t,r){return t[0]=r[0],t[1]=r[1],t}function s(t,r,e){return t[0]=r,t[1]=e,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t}function M(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1];return Math.hypot(e,n)}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function P(t){var r=t[0],e=t[1];return Math.hypot(r,e)}function q(t){var r=t[0],e=t[1];return r*r+e*e}function A(t,r){return t[0]=-r[0],t[1]=-r[1],t}function O(t,r){return t[0]=1/r[0],t[1]=1/r[1],t}function g(t,r){var e=r[0],n=r[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=r[0]*o,t[1]=r[1]*o,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]}function R(t,r,e){var n=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=n,t}function j(t,r,e,n){var o=r[0],a=r[1];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t}function Y(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI;return r[0]=Math.cos(n)*e,r[1]=Math.sin(n)*e,r}function _(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o,t[1]=e[1]*n+e[3]*o,t}function w(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o+e[4],t[1]=e[1]*n+e[3]*o+e[5],t}function D(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[3]*o+e[6],t[1]=e[1]*n+e[4]*o+e[7],t}function L(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[4]*o+e[12],t[1]=e[1]*n+e[5]*o+e[13],t}function T(t,r,e,n){var o=r[0]-e[0],a=r[1]-e[1],u=Math.sin(n),s=Math.cos(n);return t[0]=o*s-a*u+e[0],t[1]=o*u+a*s+e[1],t}function I(t,r){var e=t[0],n=t[1],o=r[0],a=r[1],u=Math.sqrt(e*e+n*n)*Math.sqrt(o*o+a*a),s=u&&(e*o+n*a)/u;return Math.acos(Math.min(Math.max(s,-1),1))}function N(t){return t[0]=0,t[1]=0,t}function k(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,r){return t[0]===r[0]&&t[1]===r[1]}function S(r,e){var n=r[0],o=r[1],a=e[0],u=e[1];return Math.abs(n-a)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var W=P;exports.len=W;var F=c;exports.sub=F;var V=p;exports.mul=V;var B=f;exports.div=B;var C=b;exports.dist=C;var G=y;exports.sqrDist=G;var H=q;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],a(t,t,u),r[s]=t[0],r[s+1]=t[1];return r}}();exports.forEach=J;
},{"./common.js":"AvvQ"}],"DSeC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec4=exports.vec3=exports.vec2=exports.quat2=exports.quat=exports.mat4=exports.mat3=exports.mat2d=exports.mat2=exports.glMatrix=void 0;var e=v(require("./common.js"));exports.glMatrix=e;var r=v(require("./mat2.js"));exports.mat2=r;var t=v(require("./mat2d.js"));exports.mat2d=t;var o=v(require("./mat3.js"));exports.mat3=o;var a=v(require("./mat4.js"));exports.mat4=a;var s=v(require("./quat.js"));exports.quat=s;var u=v(require("./quat2.js"));exports.quat2=u;var p=v(require("./vec2.js"));exports.vec2=p;var i=v(require("./vec3.js"));exports.vec3=i;var n=v(require("./vec4.js"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}exports.vec4=n;
},{"./common.js":"AvvQ","./mat2.js":"skiN","./mat2d.js":"oRDk","./mat3.js":"viCO","./mat4.js":"ORDv","./quat.js":"Q0pO","./quat2.js":"yoBk","./vec2.js":"CHQP","./vec3.js":"QPaN","./vec4.js":"JZVy"}],"xBA9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leftTranslate=r,exports.leftRotate=e,exports.leftScale=a,exports.transform=o,exports.direction=u,exports.angleTo=i,exports.vertical=c;var t=require("gl-matrix");function r(r,e,a){var n=[0,0,0,0,0,0,0,0,0];return t.mat3.fromTranslation(n,a),t.mat3.multiply(r,n,e)}function e(r,e,a){var n=[0,0,0,0,0,0,0,0,0];return t.mat3.fromRotation(n,a),t.mat3.multiply(r,n,e)}function a(r,e,a){var n=[0,0,0,0,0,0,0,0,0];return t.mat3.fromScaling(n,a),t.mat3.multiply(r,n,e)}function n(r,e,a){return t.mat3.multiply(r,a,e)}function o(t,o){for(var u=t?[].concat(t):[1,0,0,0,1,0,0,0,1],i=0,c=o.length;i<c;i++){var l=o[i];switch(l[0]){case"t":r(u,u,[l[1],l[2]]);break;case"s":a(u,u,[l[1],l[2]]);break;case"r":e(u,u,l[1]);break;case"m":n(u,u,l[1])}}return u}function u(t,r){return t[0]*r[1]-r[0]*t[1]}function i(r,e,a){var n=t.vec2.angle(r,e),o=u(r,e)>=0;return a?o?2*Math.PI-n:n:o?n:2*Math.PI-n}function c(t,r,e){return e?(t[0]=r[1],t[1]=-1*r[0]):(t[0]=-1*r[1],t[1]=r[0]),t}
},{"gl-matrix":"DSeC"}],"n7Fk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"mat3",{enumerable:!0,get:function(){return e.mat3}}),Object.defineProperty(exports,"vec2",{enumerable:!0,get:function(){return e.vec2}}),Object.defineProperty(exports,"vec3",{enumerable:!0,get:function(){return e.vec3}}),exports.ext=void 0;var e=require("gl-matrix"),t=n(require("./ext"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=o?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}exports.ext=t;
},{"gl-matrix":"DSeC","./ext":"xBA9"}],"FZZg":[function(require,module,exports) {
"use strict";function r(r,t){var e=[],n=r[0],u=r[1],i=r[2],o=r[3],l=r[4],p=r[5],s=r[6],c=r[7],a=r[8],v=t[0],x=t[1],f=t[2],y=t[3],d=t[4],m=t[5],M=t[6],_=t[7],b=t[8];return e[0]=v*n+x*o+f*s,e[1]=v*u+x*l+f*c,e[2]=v*i+x*p+f*a,e[3]=y*n+d*o+m*s,e[4]=y*u+d*l+m*c,e[5]=y*i+d*p+m*a,e[6]=M*n+_*o+b*s,e[7]=M*u+_*l+b*c,e[8]=M*i+_*p+b*a,e}function t(r,t){var e=[],n=t[0],u=t[1];return e[0]=r[0]*n+r[3]*u+r[6],e[1]=r[1]*n+r[4]*u+r[7],e}function e(r){var t=[],e=r[0],n=r[1],u=r[2],i=r[3],o=r[4],l=r[5],p=r[6],s=r[7],c=r[8],a=c*o-l*s,v=-c*i+l*p,x=s*i-o*p,f=e*a+n*v+u*x;return f?(f=1/f,t[0]=a*f,t[1]=(-c*n+u*s)*f,t[2]=(l*n-u*o)*f,t[3]=v*f,t[4]=(c*e-u*p)*f,t[5]=(-l*e+u*i)*f,t[6]=x*f,t[7]=(-s*e+n*p)*f,t[8]=(o*e-n*i)*f,t):null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiplyMatrix=r,exports.multiplyVec2=t,exports.invert=e;
},{}],"tEzW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("@antv/matrix-util"),r=require("../util/util"),a=require("../util/matrix"),n=s(require("./base"));function s(t){return t&&t.__esModule?t:{default:t}}var o="matrix",u=["zIndex","capture","visible","type"],h=["repeat"],p=":",l="*";function c(t){for(var i=[],r=0;r<t.length;r++)(0,e.isArray)(t[r])?i.push([].concat(t[r])):i.push(t[r]);return i}function f(t,e){var i={},r=e.attrs;for(var a in t)i[a]=r[a];return i}function v(t,i){var r={},a=i.attr();return(0,e.each)(t,function(t,i){-1!==h.indexOf(i)||(0,e.isEqual)(a[i],t)||(r[i]=t)}),r}function m(t,i){if(i.onFrame)return t;var r=i.startTime,a=i.delay,n=i.duration,s=Object.prototype.hasOwnProperty;return(0,e.each)(t,function(t){r+a<t.startTime+t.delay+t.duration&&n>t.delay&&(0,e.each)(i.toAttrs,function(e,i){s.call(t.toAttrs,i)&&(delete t.toAttrs[i],delete t.fromAttrs[i])})}),t}var g=function(n){function s(t){var i=n.call(this,t)||this;i.attrs={};var r=i.getDefaultAttrs();return(0,e.mix)(r,t.attrs),i.attrs=r,i.initAttrs(r),i.initAnimate(),i}return(0,t.__extends)(s,n),s.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},s.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},s.prototype.onCanvasChange=function(t){},s.prototype.initAttrs=function(t){},s.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},s.prototype.isGroup=function(){return!1},s.prototype.getParent=function(){return this.get("parent")},s.prototype.getCanvas=function(){return this.get("canvas")},s.prototype.attr=function(){for(var t,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var a=i[0],n=i[1];if(!a)return this.attrs;if((0,e.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return 2===i.length?(this.setAttr(a,n),this.afterAttrsChange(((t={})[a]=n,t)),this):this.attrs[a]},s.prototype.isClipped=function(t,e){var i=this.getClip();return i&&!i.isHit(t,e)},s.prototype.setAttr=function(t,e){var i=this.attrs[t];i!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,i))},s.prototype.onAttrChange=function(t,e,i){"matrix"===t&&this.set("totalMatrix",null)},s.prototype.afterAttrsChange=function(t){this.onCanvasChange("attr")},s.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},s.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},s.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},s.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),i=(this.get("el"),e.indexOf(this));e.splice(i,1),e.push(this),this.onCanvasChange("zIndex")}},s.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),i=(this.get("el"),e.indexOf(this));e.splice(i,1),e.unshift(this),this.onCanvasChange("zIndex")}},s.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?((0,r.removeFromArray)(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},s.prototype.resetMatrix=function(){this.attr(o,this.getDefaultMatrix()),this.onCanvasChange("matrix")},s.prototype.getMatrix=function(){return this.attr(o)},s.prototype.setMatrix=function(t){this.attr(o,t),this.onCanvasChange("matrix")},s.prototype.getTotalMatrix=function(){var t=this.get("totalMatrix");if(!t){var e=this.attr("matrix"),i=this.get("parentMatrix");t=i&&e?(0,a.multiplyMatrix)(i,e):e||i,this.set("totalMatrix",t)}return t},s.prototype.applyMatrix=function(t){var e=this.attr("matrix"),i=null;i=t&&e?(0,a.multiplyMatrix)(t,e):e||t,this.set("totalMatrix",i),this.set("parentMatrix",t)},s.prototype.getDefaultMatrix=function(){return null},s.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?(0,a.multiplyVec2)(e,t):t},s.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var i=(0,a.invert)(e);if(i)return(0,a.multiplyVec2)(i,t)}return t},s.prototype.setClip=function(t){var i=this.getCanvas(),r=null;if(t){var a=this.getShapeBase()[(0,e.upperFirst)(t.type)];a&&(r=new a({type:t.type,isClipShape:!0,attrs:t.attrs,canvas:i}))}return this.set("clipShape",r),this.onCanvasChange("clip"),r},s.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},s.prototype.clone=function(){var t=this,i=this.attrs,r={};(0,e.each)(i,function(t,a){(0,e.isArray)(i[a])?r[a]=c(i[a]):r[a]=i[a]});var a=new(0,this.constructor)({attrs:r});return(0,e.each)(u,function(e){a.set(e,t.get(e))}),a},s.prototype.destroy=function(){this.destroyed||(this.attrs={},n.prototype.destroy.call(this))},s.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},s.prototype.animate=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.set("animating",!0);var r=this.get("timeline");r||(r=this.get("canvas").get("timeline"),this.set("timeline",r));var a=this.get("animations")||[];r.timer||r.initTimer();var n,s,o,u,h,p=t[0],l=t[1],c=t[2],g=void 0===c?"easeLinear":c,y=t[3],d=void 0===y?e.noop:y,x=t[4],C=void 0===x?0:x;(0,e.isFunction)(p)?(n=p,p={}):(0,e.isObject)(p)&&p.onFrame&&(n=p.onFrame,s=p.repeat),(0,e.isObject)(l)?(l=(h=l).duration,g=h.easing||"easeLinear",C=h.delay||0,s=h.repeat||s||!1,d=h.callback||e.noop,o=h.pauseCallback||e.noop,u=h.resumeCallback||e.noop):((0,e.isNumber)(d)&&(C=d,d=null),(0,e.isFunction)(g)?(d=g,g="easeLinear"):g=g||"easeLinear");var A=v(p,this),b={fromAttrs:f(A,this),toAttrs:A,duration:l,easing:g,repeat:s,callback:d,pauseCallback:o,resumeCallback:u,delay:C,startTime:r.getTime(),id:(0,e.uniqueId)(),onFrame:n,pathFormatted:!1};a.length>0?a=m(a,b):r.addAnimator(this),a.push(b),this.set("animations",a),this.set("_pause",{isPaused:!1})},s.prototype.stopAnimate=function(t){var i=this;void 0===t&&(t=!0);var r=this.get("animations");(0,e.each)(r,function(e){t&&(e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs)),e.callback&&e.callback()}),this.set("animating",!1),this.set("animations",[])},s.prototype.pauseAnimate=function(){var t=this.get("timeline"),i=this.get("animations"),r=t.getTime();return(0,e.each)(i,function(t){t._paused=!0,t._pauseTime=r,t.pauseCallback&&t.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:r}),this},s.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),i=this.get("animations"),r=this.get("_pause").pauseTime;return(0,e.each)(i,function(e){e.startTime=e.startTime+(t-r),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},s.prototype.emitDelegation=function(t,i){var a,n=this,s=i.propagationPath;this.getEvents();"mouseenter"===t?a=i.fromShape:"mouseleave"===t&&(a=i.toShape);for(var o=function(t){var o=s[t],h=o.get("name");if(h){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&a&&(0,r.isParent)(o,a))return"break";(0,e.isArray)(h)?(0,e.each)(h,function(t){n.emitDelegateEvent(o,t,i)}):u.emitDelegateEvent(o,h,i)}},u=this,h=0;h<s.length;h++){if("break"===o(h))break}},s.prototype.emitDelegateEvent=function(t,e,i){var r=this.getEvents(),a=e+p+i.type;(r[a]||r[l])&&(i.name=a,i.currentTarget=t,i.delegateTarget=this,i.delegateObject=t.get("delegateObject"),this.emit(a,i))},s.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.getMatrix(),a=i.ext.transform(r,[["t",t,e]]);return this.setMatrix(a),this},s.prototype.move=function(t,e){var i=this.attr("x")||0,r=this.attr("y")||0;return this.translate(t-i,e-r),this},s.prototype.moveTo=function(t,e){return this.move(t,e)},s.prototype.scale=function(t,e){var r=this.getMatrix(),a=i.ext.transform(r,[["s",t,e||t]]);return this.setMatrix(a),this},s.prototype.rotate=function(t){var e=this.getMatrix(),r=i.ext.transform(e,[["r",t]]);return this.setMatrix(r),this},s.prototype.rotateAtStart=function(t){var e=this.attr(),r=e.x,a=e.y,n=this.getMatrix(),s=i.ext.transform(n,[["t",-r,-a],["r",t],["t",r,a]]);return this.setMatrix(s),this},s.prototype.rotateAtPoint=function(t,e,r){var a=this.getMatrix(),n=i.ext.transform(a,[["t",-t,-e],["r",r],["t",t,e]]);return this.setMatrix(n),this},s}(n.default),y=g;exports.default=y;
},{"tslib":"c4AP","@antv/util":"rU8N","@antv/matrix-util":"n7Fk","../util/util":"QXjy","../util/matrix":"FZZg","./base":"V8o4"}],"Hkqv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=i(require("./element")),n=require("../util/util");function i(t){return t&&t.__esModule?t:{default:t}}var r={},a="_INDEX";function o(t){t.isGroup()?(t.isEntityGroup()||t.get("children").length)&&t.onCanvasChange("add"):t.onCanvasChange("add")}function l(t,e){if(t.set("canvas",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach(function(t){l(t,e)})}}function p(t,e){if(t.set("timeline",e),t.isGroup()){var n=t.get("children");n.length&&n.forEach(function(t){p(t,e)})}}function h(t,e){return t.getChildren().indexOf(e)>=0}function u(t,e,i){void 0===i&&(i=!0),i?e.destroy():(e.set("parent",null),e.set("canvas",null)),(0,n.removeFromArray)(t.getChildren(),e)}function s(t){return function(e,n){var i=t(e,n);return 0===i?e[a]-n[a]:i}}var f=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(i,e),i.prototype.isCanvas=function(){return!1},i.prototype.getBBox=function(){var t=1/0,e=-1/0,i=1/0,r=-1/0,a=[],o=[],l=this.getChildren().filter(function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)});return l.length>0?((0,n.each)(l,function(t){var e=t.getBBox();a.push(e.minX,e.maxX),o.push(e.minY,e.maxY)}),t=Math.min.apply(null,a),e=Math.max.apply(null,a),i=Math.min.apply(null,o),r=Math.max.apply(null,o)):(t=0,e=0,i=0,r=0),{x:t,y:i,minX:t,minY:i,maxX:e,maxY:r,width:e-t,height:r-i}},i.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,i=1/0,r=-1/0,a=[],o=[],l=this.getChildren().filter(function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)});return l.length>0?((0,n.each)(l,function(t){var e=t.getCanvasBBox();a.push(e.minX,e.maxX),o.push(e.minY,e.maxY)}),t=Math.min.apply(null,a),e=Math.max.apply(null,a),i=Math.min.apply(null,o),r=Math.max.apply(null,o)):(t=0,e=0,i=0,r=0),{x:t,y:i,minX:t,minY:i,maxX:e,maxY:r,width:e-t,height:r-i}},i.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},i.prototype.onAttrChange=function(t,n,i){if(e.prototype.onAttrChange.call(this,t,n,i),"matrix"===t){var r=this.getTotalMatrix();this._applyChildrenMarix(r)}},i.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},i.prototype._applyChildrenMarix=function(t){var e=this.getChildren();(0,n.each)(e,function(e){e.applyMatrix(t)})},i.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],a=t[1];(0,n.isObject)(i)?a=i:a.type=i;var o=r[a.type];o||(o=(0,n.upperFirst)(a.type),r[a.type]=o);var l=new(this.getShapeBase()[o])(a);return this.add(l),l},i.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i,r=t[0],a=t[1];if((0,n.isFunction)(r))i=new r(a||{parent:this});else{var o=r||{};i=new(this.getGroupBase())(o)}return this.add(i),i},i.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},i.prototype.getShape=function(t,e,i){if(!(0,n.isAllowCapture)(this))return null;var r,a=this.getChildren();if(this.isCanvas())r=this._findShape(a,t,e,i);else{var o=[t,e,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(a,o[0],o[1],i))}return r},i.prototype._findShape=function(t,e,i,r){for(var a=null,o=t.length-1;o>=0;o--){var l=t[o];if((0,n.isAllowCapture)(l)&&(l.isGroup()?a=l.getShape(e,i,r):l.isHit(e,i)&&(a=l)),a)break}return a},i.prototype.add=function(t){var e=this.getCanvas(),n=this.getChildren(),i=this.get("timeline"),r=t.getParent();r&&u(r,t,!1),t.set("parent",this),e&&l(t,e),i&&p(t,i),n.push(t),o(t),this._applyElementMatrix(t)},i.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},i.prototype.getChildren=function(){return this.get("children")},i.prototype.sort=function(){var t=this.getChildren();(0,n.each)(t,function(t,e){return t[a]=e,t}),t.sort(s(function(t,e){return t.get("zIndex")-e.get("zIndex")})),this.onCanvasChange("sort")},i.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},i.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},i.prototype.getFirst=function(){return this.getChildByIndex(0)},i.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},i.prototype.getChildByIndex=function(t){return this.getChildren()[t]},i.prototype.getCount=function(){return this.getChildren().length},i.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},i.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},i.prototype.findAll=function(t){var e=[],i=this.getChildren();return(0,n.each)(i,function(n){t(n)&&e.push(n),n.isGroup()&&(e=e.concat(n.findAll(t)))}),e},i.prototype.find=function(t){var e=null,i=this.getChildren();return(0,n.each)(i,function(n){if(t(n)?e=n:n.isGroup()&&(e=n.find(t)),e)return!1}),e},i.prototype.findById=function(t){return this.find(function(e){return e.get("id")===t})},i.prototype.findByClassName=function(t){return this.find(function(e){return e.get("className")===t})},i.prototype.findAllByName=function(t){return this.findAll(function(e){return e.get("name")===t})},i}(e.default),d=f;exports.default=d;
},{"tslib":"c4AP","./element":"tEzW","../util/util":"QXjy"}],"fIMb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.now=f,exports.Timer=m,exports.timer=p,exports.timerFlush=w;var t,n,e=0,o=0,i=0,r=1e3,l=0,c=0,s=0,u="object"==typeof performance&&performance.now?performance:Date,a="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function f(){return c||(a(_),c=u.now()+s)}function _(){c=0}function m(){this._call=this._time=this._next=null}function p(t,n,e){var o=new m;return o.restart(t,n,e),o}function w(){f(),++e;for(var n,o=t;o;)(n=c-o._time)>=0&&o._call.call(null,n),o=o._next;--e}function h(){c=(l=u.now())+s,e=o=0;try{w()}finally{e=0,y(),c=0}}function x(){var t=u.now(),n=t-l;n>r&&(s-=n,l=t)}function y(){for(var e,o,i=t,r=1/0;i;)i._call?(r>i._time&&(r=i._time),e=i,i=i._next):(o=i._next,i._next=null,i=e?e._next=o:t=o);n=e,v(r)}function v(t){e||(o&&(o=clearTimeout(o)),t-c>24?(t<1/0&&(o=setTimeout(h,t-u.now()-s)),i&&(i=clearInterval(i))):(i||(l=u.now(),i=setInterval(x,r)),e=1,a(h)))}m.prototype=p.prototype={constructor:m,restart:function(e,o,i){if("function"!=typeof e)throw new TypeError("callback is not a function");i=(null==i?f():+i)+(null==o?0:+o),this._next||n===this||(n?n._next=this:t=this,n=this),this._call=e,this._time=i,v()},stop:function(){this._call&&(this._call=null,this._time=1/0,v())}};
},{}],"devj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./timer.js");function r(r,t,u){var n=new e.Timer;return t=null==t?0:+t,n.restart(function(e){n.stop(),r(e+t)},t,u),n}
},{"./timer.js":"fIMb"}],"Js8L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./timer.js");function r(r,t,n){var u=new e.Timer,s=t;return null==t?(u.restart(r,t,n),u):(t=+t,n=null==n?(0,e.now)():+n,u.restart(function e(a){a+=s,u.restart(e,s+=t,n),r(a)},t,n),u)}
},{"./timer.js":"fIMb"}],"LWGV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"now",{enumerable:!0,get:function(){return e.now}}),Object.defineProperty(exports,"timer",{enumerable:!0,get:function(){return e.timer}}),Object.defineProperty(exports,"timerFlush",{enumerable:!0,get:function(){return e.timerFlush}}),Object.defineProperty(exports,"timeout",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"interval",{enumerable:!0,get:function(){return r.default}});var e=require("./timer.js"),t=n(require("./timeout.js")),r=n(require("./interval.js"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./timer.js":"fIMb","./timeout.js":"devj","./interval.js":"Js8L"}],"Kl6O":[function(require,module,exports) {
"use strict";function e(e){return+e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linear=e;
},{}],"mMhb":[function(require,module,exports) {
"use strict";function t(t){return t*t}function e(t){return t*(2-t)}function u(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.quadIn=t,exports.quadOut=e,exports.quadInOut=u;
},{}],"HjOK":[function(require,module,exports) {
"use strict";function t(t){return t*t*t}function e(t){return--t*t*t+1}function u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubicIn=t,exports.cubicOut=e,exports.cubicInOut=u;
},{}],"PZSV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polyInOut=exports.polyOut=exports.polyIn=void 0;var t=3,n=function t(n){function o(t){return Math.pow(t,n)}return n=+n,o.exponent=t,o}(t);exports.polyIn=n;var o=function t(n){function o(t){return 1-Math.pow(1-t,n)}return n=+n,o.exponent=t,o}(t);exports.polyOut=o;var e=function t(n){function o(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,o.exponent=t,o}(t);exports.polyInOut=e;
},{}],"QOYj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinIn=e,exports.sinOut=r,exports.sinInOut=s;var t=Math.PI,n=t/2;function e(t){return 1==+t?1:1-Math.cos(t*n)}function r(t){return Math.sin(t*n)}function s(n){return(1-Math.cos(t*n))/2}
},{}],"bjBs":[function(require,module,exports) {
"use strict";function e(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.tpmt=e;
},{}],"LpP7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expIn=e,exports.expOut=r,exports.expInOut=n;var t=require("./math.js");function e(e){return(0,t.tpmt)(1-+e)}function r(e){return 1-(0,t.tpmt)(e)}function n(e){return((e*=2)<=1?(0,t.tpmt)(1-e):2-(0,t.tpmt)(e-1))/2}
},{"./math.js":"bjBs"}],"Mb16":[function(require,module,exports) {
"use strict";function t(t){return 1-Math.sqrt(1-t*t)}function r(t){return Math.sqrt(1- --t*t)}function e(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.circleIn=t,exports.circleOut=r,exports.circleInOut=e;
},{}],"T8qT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bounceIn=b,exports.bounceOut=f,exports.bounceInOut=x;var e=4/11,t=6/11,n=8/11,r=.75,u=9/11,o=10/11,c=.9375,s=21/22,i=63/64,p=1/e/e;function b(e){return 1-f(1-e)}function f(b){return(b=+b)<e?p*b*b:b<n?p*(b-=t)*b+r:b<o?p*(b-=u)*b+c:p*(b-=s)*b+i}function x(e){return((e*=2)<=1?1-f(1-e):f(e-1)+1)/2}
},{}],"E1W6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.backInOut=exports.backOut=exports.backIn=void 0;var t=1.70158,r=function t(r){function o(t){return(t=+t)*t*(r*(t-1)+t)}return r=+r,o.overshoot=t,o}(t);exports.backIn=r;var o=function t(r){function o(t){return--t*t*((t+1)*r+t)+1}return r=+r,o.overshoot=t,o}(t);exports.backOut=o;var e=function t(r){function o(t){return((t*=2)<1?t*t*((r+1)*t-r):(t-=2)*t*((r+1)*t+r)+2)/2}return r=+r,o.overshoot=t,o}(t);exports.backInOut=e;
},{}],"IQEK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elasticInOut=exports.elasticOut=exports.elasticIn=void 0;var t=require("./math.js"),n=2*Math.PI,r=1,e=.3,i=function r(e,i){var u=Math.asin(1/(e=Math.max(1,e)))*(i/=n);function a(n){return e*(0,t.tpmt)(- --n)*Math.sin((u-n)/i)}return a.amplitude=function(t){return r(t,i*n)},a.period=function(t){return r(e,t)},a}(r,e);exports.elasticIn=i;var u=function r(e,i){var u=Math.asin(1/(e=Math.max(1,e)))*(i/=n);function a(n){return 1-e*(0,t.tpmt)(n=+n)*Math.sin((n+u)/i)}return a.amplitude=function(t){return r(t,i*n)},a.period=function(t){return r(e,t)},a}(r,e);exports.elasticOut=u;var a=function r(e,i){var u=Math.asin(1/(e=Math.max(1,e)))*(i/=n);function a(n){return((n=2*n-1)<0?e*(0,t.tpmt)(-n)*Math.sin((u-n)/i):2-e*(0,t.tpmt)(n)*Math.sin((u+n)/i))/2}return a.amplitude=function(t){return r(t,i*n)},a.period=function(t){return r(e,t)},a}(r,e);exports.elasticInOut=a;
},{"./math.js":"bjBs"}],"OAY5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"easeLinear",{enumerable:!0,get:function(){return e.linear}}),Object.defineProperty(exports,"easeQuad",{enumerable:!0,get:function(){return t.quadInOut}}),Object.defineProperty(exports,"easeQuadIn",{enumerable:!0,get:function(){return t.quadIn}}),Object.defineProperty(exports,"easeQuadOut",{enumerable:!0,get:function(){return t.quadOut}}),Object.defineProperty(exports,"easeQuadInOut",{enumerable:!0,get:function(){return t.quadInOut}}),Object.defineProperty(exports,"easeCubic",{enumerable:!0,get:function(){return r.cubicInOut}}),Object.defineProperty(exports,"easeCubicIn",{enumerable:!0,get:function(){return r.cubicIn}}),Object.defineProperty(exports,"easeCubicOut",{enumerable:!0,get:function(){return r.cubicOut}}),Object.defineProperty(exports,"easeCubicInOut",{enumerable:!0,get:function(){return r.cubicInOut}}),Object.defineProperty(exports,"easePoly",{enumerable:!0,get:function(){return n.polyInOut}}),Object.defineProperty(exports,"easePolyIn",{enumerable:!0,get:function(){return n.polyIn}}),Object.defineProperty(exports,"easePolyOut",{enumerable:!0,get:function(){return n.polyOut}}),Object.defineProperty(exports,"easePolyInOut",{enumerable:!0,get:function(){return n.polyInOut}}),Object.defineProperty(exports,"easeSin",{enumerable:!0,get:function(){return u.sinInOut}}),Object.defineProperty(exports,"easeSinIn",{enumerable:!0,get:function(){return u.sinIn}}),Object.defineProperty(exports,"easeSinOut",{enumerable:!0,get:function(){return u.sinOut}}),Object.defineProperty(exports,"easeSinInOut",{enumerable:!0,get:function(){return u.sinInOut}}),Object.defineProperty(exports,"easeExp",{enumerable:!0,get:function(){return o.expInOut}}),Object.defineProperty(exports,"easeExpIn",{enumerable:!0,get:function(){return o.expIn}}),Object.defineProperty(exports,"easeExpOut",{enumerable:!0,get:function(){return o.expOut}}),Object.defineProperty(exports,"easeExpInOut",{enumerable:!0,get:function(){return o.expInOut}}),Object.defineProperty(exports,"easeCircle",{enumerable:!0,get:function(){return c.circleInOut}}),Object.defineProperty(exports,"easeCircleIn",{enumerable:!0,get:function(){return c.circleIn}}),Object.defineProperty(exports,"easeCircleOut",{enumerable:!0,get:function(){return c.circleOut}}),Object.defineProperty(exports,"easeCircleInOut",{enumerable:!0,get:function(){return c.circleInOut}}),Object.defineProperty(exports,"easeBounce",{enumerable:!0,get:function(){return i.bounceOut}}),Object.defineProperty(exports,"easeBounceIn",{enumerable:!0,get:function(){return i.bounceIn}}),Object.defineProperty(exports,"easeBounceOut",{enumerable:!0,get:function(){return i.bounceOut}}),Object.defineProperty(exports,"easeBounceInOut",{enumerable:!0,get:function(){return i.bounceInOut}}),Object.defineProperty(exports,"easeBack",{enumerable:!0,get:function(){return a.backInOut}}),Object.defineProperty(exports,"easeBackIn",{enumerable:!0,get:function(){return a.backIn}}),Object.defineProperty(exports,"easeBackOut",{enumerable:!0,get:function(){return a.backOut}}),Object.defineProperty(exports,"easeBackInOut",{enumerable:!0,get:function(){return a.backInOut}}),Object.defineProperty(exports,"easeElastic",{enumerable:!0,get:function(){return s.elasticOut}}),Object.defineProperty(exports,"easeElasticIn",{enumerable:!0,get:function(){return s.elasticIn}}),Object.defineProperty(exports,"easeElasticOut",{enumerable:!0,get:function(){return s.elasticOut}}),Object.defineProperty(exports,"easeElasticInOut",{enumerable:!0,get:function(){return s.elasticInOut}});var e=require("./linear.js"),t=require("./quad.js"),r=require("./cubic.js"),n=require("./poly.js"),u=require("./sin.js"),o=require("./exp.js"),c=require("./circle.js"),i=require("./bounce.js"),a=require("./back.js"),s=require("./elastic.js");
},{"./linear.js":"Kl6O","./quad.js":"mMhb","./cubic.js":"HjOK","./poly.js":"PZSV","./sin.js":"QOYj","./exp.js":"LpP7","./circle.js":"Mb16","./bounce.js":"T8qT","./back.js":"E1W6","./elastic.js":"IQEK"}],"nQS5":[function(require,module,exports) {
"use strict";function t(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function e(t,e){var r=Object.create(t.prototype);for(var o in e)r[o]=e[o];return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.extend=e;
},{}],"kFqT":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Color=n,exports.default=k,exports.rgbConvert=M,exports.rgb=N,exports.Rgb=O,exports.hslConvert=P,exports.hsl=$,exports.brighter=exports.darker=void 0;var e=r(require("./define.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function n(){}var i=.7;exports.darker=i;var a=1/i;exports.brighter=a;var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,u=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),g=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),c=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),d=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,l,l]+"\\)$"),f=new RegExp("^hsla\\("+[s,l,l,s]+"\\)$"),b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function m(){return P(this).formatHsl()}function w(){return this.rgb().formatRgb()}function k(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=h.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?x(t):3===r?new O(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?v(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?v(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=u.exec(e))?new O(t[1],t[2],t[3],1):(t=g.exec(e))?new O(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=c.exec(e))?v(t[1],t[2],t[3],t[4]):(t=d.exec(e))?v(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?E(t[1],t[2]/100,t[3]/100,1):(t=f.exec(e))?E(t[1],t[2]/100,t[3]/100,t[4]):b.hasOwnProperty(e)?x(b[e]):"transparent"===e?new O(NaN,NaN,NaN,0):null}function x(e){return new O(e>>16&255,e>>8&255,255&e,1)}function v(e,t,r,n){return n<=0&&(e=t=r=NaN),new O(e,t,r,n)}function M(e){return e instanceof n||(e=k(e)),e?new O((e=e.rgb()).r,e.g,e.b,e.opacity):new O}function N(e,t,r,n){return 1===arguments.length?M(e):new O(e,t,r,null==n?1:n)}function O(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function j(){return"#"+R(this.r)+R(this.g)+R(this.b)}function q(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function R(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function E(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new H(e,t,r,n)}function P(e){if(e instanceof H)return new H(e.h,e.s,e.l,e.opacity);if(e instanceof n||(e=k(e)),!e)return new H;if(e instanceof H)return e;var t=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),o=Math.max(t,r,i),s=NaN,l=o-a,h=(o+a)/2;return l?(s=t===o?(r-i)/l+6*(r<i):r===o?(i-t)/l+2:(t-r)/l+4,l/=h<.5?o+a:2-o-a,s*=60):l=h>0&&h<1?0:s,new H(s,l,h,e.opacity)}function $(e,t,r,n){return 1===arguments.length?P(e):new H(e,t,r,null==n?1:n)}function H(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function C(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}(0,e.default)(n,k,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:m,formatRgb:w,toString:w}),(0,e.default)(O,N,(0,e.extend)(n,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:j,formatHex:j,formatRgb:q,toString:q})),(0,e.default)(H,$,(0,e.extend)(n,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new H(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new H(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new O(C(e>=240?e-240:e+120,i,n),C(e,i,n),C(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));
},{"./define.js":"nQS5"}],"iwQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rad2deg=exports.deg2rad=void 0;var e=Math.PI/180;exports.deg2rad=e;var r=180/Math.PI;exports.rad2deg=r;
},{}],"wNNv":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gray=b,exports.default=y,exports.Lab=w,exports.lch=N,exports.hcl=x,exports.Hcl=O;var t=i(require("./define.js")),n=require("./color.js"),e=require("./math.js");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var e={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=i?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(e,o,u):e[o]=t[o]}return e.default=t,n&&n.set(t,e),e}var o=18,u=.96422,a=1,c=.82521,s=4/29,l=6/29,h=3*l*l,f=l*l*l;function p(t){if(t instanceof w)return new w(t.l,t.a,t.b,t.opacity);if(t instanceof O)return P(t);t instanceof n.Rgb||(t=(0,n.rgbConvert)(t));var e,r,i=M(t.r),o=M(t.g),s=M(t.b),l=d((.2225045*i+.7168786*o+.0606169*s)/a);return i===o&&o===s?e=r=l:(e=d((.4360747*i+.3850649*o+.1430804*s)/u),r=d((.0139322*i+.0971045*o+.7141733*s)/c)),new w(116*l-16,500*(e-l),200*(l-r),t.opacity)}function b(t,n){return new w(t,0,0,null==n?1:n)}function y(t,n,e,r){return 1===arguments.length?p(t):new w(t,n,e,null==r?1:r)}function w(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function d(t){return t>f?Math.pow(t,1/3):t/h+s}function g(t){return t>l?t*t*t:h*(t-s)}function v(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function M(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function j(t){if(t instanceof O)return new O(t.h,t.c,t.l,t.opacity);if(t instanceof w||(t=p(t)),0===t.a&&0===t.b)return new O(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*e.rad2deg;return new O(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function N(t,n,e,r){return 1===arguments.length?j(t):new O(e,n,t,null==r?1:r)}function x(t,n,e,r){return 1===arguments.length?j(t):new O(t,n,e,null==r?1:r)}function O(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function P(t){if(isNaN(t.h))return new w(t.l,0,0,t.opacity);var n=t.h*e.deg2rad;return new w(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}(0,t.default)(w,y,(0,t.extend)(n.Color,{brighter:function(t){return new w(this.l+o*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new w(this.l-o*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return e=u*g(e),t=a*g(t),r=c*g(r),new n.Rgb(v(3.1338561*e-1.6168667*t-.4906146*r),v(-.9787684*e+1.9161415*t+.033454*r),v(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),(0,t.default)(O,x,(0,t.extend)(n.Color,{brighter:function(t){return new O(this.h,this.c,this.l+o*(null==t?1:t),this.opacity)},darker:function(t){return new O(this.h,this.c,this.l-o*(null==t?1:t),this.opacity)},rgb:function(){return P(this).rgb()}}));
},{"./define.js":"nQS5","./color.js":"kFqT","./math.js":"iwQY"}],"Io0r":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d,exports.Cubehelix=b;var t=i(require("./define.js")),e=require("./color.js"),r=require("./math.js");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}var o=-.14861,s=1.78277,a=-.29227,u=-.90649,h=1.97294,c=h*u,f=h*s,l=s*a-u*o;function p(t){if(t instanceof b)return new b(t.h,t.s,t.l,t.opacity);t instanceof e.Rgb||(t=(0,e.rgbConvert)(t));var n=t.r/255,i=t.g/255,o=t.b/255,s=(l*o+c*n-f*i)/(l+c-f),p=o-s,d=(h*(i-s)-a*p)/u,y=Math.sqrt(d*d+p*p)/(h*s*(1-s)),g=y?Math.atan2(d,p)*r.rad2deg-120:NaN;return new b(g<0?g+360:g,y,s,t.opacity)}function d(t,e,r,n){return 1===arguments.length?p(t):new b(t,e,r,null==n?1:n)}function b(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}(0,t.default)(b,d,(0,t.extend)(e.Color,{brighter:function(t){return t=null==t?e.brighter:Math.pow(e.brighter,t),new b(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?e.darker:Math.pow(e.darker,t),new b(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*r.deg2rad,n=+this.l,i=isNaN(this.s)?0:this.s*n*(1-n),c=Math.cos(t),f=Math.sin(t);return new e.Rgb(255*(n+i*(o*c+s*f)),255*(n+i*(a*c+u*f)),255*(n+i*(h*c)),this.opacity)}}));
},{"./define.js":"nQS5","./color.js":"kFqT","./math.js":"iwQY"}],"DAa3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"color",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"rgb",{enumerable:!0,get:function(){return e.rgb}}),Object.defineProperty(exports,"hsl",{enumerable:!0,get:function(){return e.hsl}}),Object.defineProperty(exports,"lab",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"hcl",{enumerable:!0,get:function(){return r.hcl}}),Object.defineProperty(exports,"lch",{enumerable:!0,get:function(){return r.lch}}),Object.defineProperty(exports,"gray",{enumerable:!0,get:function(){return r.gray}}),Object.defineProperty(exports,"cubehelix",{enumerable:!0,get:function(){return t.default}});var e=o(require("./color.js")),r=o(require("./lab.js")),t=n(require("./cubehelix.js"));function n(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=n?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(t,o,c):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}
},{"./color.js":"kFqT","./lab.js":"wNNv","./cubehelix.js":"Io0r"}],"MMNn":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){var u=e*e,s=u*e;return((1-3*e+3*u-s)*r+(4-6*u+3*s)*t+(1+3*e+3*u-3*s)*n+s*o)/6}function r(r){var t=r.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),u=r[o],s=r[o+1],a=o>0?r[o-1]:2*u-s,f=o<t-1?r[o+2]:2*s-u;return e((n-o/t)*t,a,u,s,f)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.basis=e,exports.default=r;
},{}],"upwx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./basis.js");function r(r){var t=r.length;return function(s){var u=Math.floor(((s%=1)<0?++s:s)*t),a=r[(u+t-1)%t],n=r[u%t],o=r[(u+1)%t],i=r[(u+2)%t];return(0,e.basis)((s-u/t)*t,a,n,o,i)}}
},{"./basis.js":"MMNn"}],"s8fH":[function(require,module,exports) {
"use strict";function e(e){return function(){return e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"fh1R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hue=u,exports.gamma=o,exports.default=a;var t=e(require("./constant.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){return function(n){return t+n*e}}function r(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function u(e,r){var u=r-e;return u?n(e,u>180||u<-180?u-360*Math.round(u/360):u):(0,t.default)(isNaN(e)?r:e)}function o(e){return 1==(e=+e)?a:function(n,u){return u-n?r(n,u,e):(0,t.default)(isNaN(n)?u:n)}}function a(e,r){var u=r-e;return u?n(e,u):(0,t.default)(isNaN(e)?r:e)}
},{"./constant.js":"s8fH"}],"dP1s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgbBasisClosed=exports.rgbBasis=exports.default=void 0;var r=require("d3-color"),e=a(require("./basis.js")),t=a(require("./basisClosed.js")),n=u(require("./color.js"));function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function u(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=o();if(e&&e.has(r))return e.get(r);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){var a=n?Object.getOwnPropertyDescriptor(r,u):null;a&&(a.get||a.set)?Object.defineProperty(t,u,a):t[u]=r[u]}return t.default=r,e&&e.set(r,t),t}function a(r){return r&&r.__esModule?r:{default:r}}var i=function e(t){var o=(0,n.gamma)(t);function u(e,t){var u=o((e=(0,r.rgb)(e)).r,(t=(0,r.rgb)(t)).r),a=o(e.g,t.g),i=o(e.b,t.b),s=(0,n.default)(e.opacity,t.opacity);return function(r){return e.r=u(r),e.g=a(r),e.b=i(r),e.opacity=s(r),e+""}}return u.gamma=e,u}(1);function s(e){return function(t){var n,o,u=t.length,a=new Array(u),i=new Array(u),s=new Array(u);for(n=0;n<u;++n)o=(0,r.rgb)(t[n]),a[n]=o.r||0,i[n]=o.g||0,s[n]=o.b||0;return a=e(a),i=e(i),s=e(s),o.opacity=1,function(r){return o.r=a(r),o.g=i(r),o.b=s(r),o+""}}}exports.default=i;var f=s(e.default);exports.rgbBasis=f;var c=s(t.default);exports.rgbBasisClosed=c;
},{"d3-color":"DAa3","./basis.js":"MMNn","./basisClosed.js":"upwx","./color.js":"fh1R"}],"YGFn":[function(require,module,exports) {
"use strict";function e(e,r){r||(r=[]);var t,n=e?Math.min(r.length,e.length):0,i=r.slice();return function(u){for(t=0;t<n;++t)i[t]=e[t]*(1-u)+r[t]*u;return i}}function r(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e,exports.isNumberArray=r;
},{}],"pAty":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o,exports.genericArray=f;var e=u(require("./value.js")),r=n(require("./numberArray.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var f=u?Object.getOwnPropertyDescriptor(e,o):null;f&&(f.get||f.set)?Object.defineProperty(n,o,f):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return((0,r.isNumberArray)(t)?r.default:f)(e,t)}function f(r,t){var n,u=t?t.length:0,o=r?Math.min(u,r.length):0,f=new Array(o),a=new Array(u);for(n=0;n<o;++n)f[n]=(0,e.default)(r[n],t[n]);for(;n<u;++n)a[n]=t[n];return function(e){for(n=0;n<o;++n)a[n]=f[n](e);return a}}
},{"./value.js":"kjQA","./numberArray.js":"YGFn"}],"g2d6":[function(require,module,exports) {
"use strict";function e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"DnDN":[function(require,module,exports) {
"use strict";function e(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"SVIl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./value.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){var u,n={},o={};for(u in null!==t&&"object"==typeof t||(t={}),null!==r&&"object"==typeof r||(r={}),r)u in t?n[u]=(0,e.default)(t[u],r[u]):o[u]=r[u];return function(e){for(u in n)o[u]=n[u](e);return o}}
},{"./value.js":"kjQA"}],"qEv5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=n(require("./number.js"));function n(e){return e&&e.__esModule?e:{default:e}}var r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,t=new RegExp(r.source,"g");function u(e){return function(){return e}}function i(e){return function(n){return e(n)+""}}function l(n,l){var o,c,d,s=r.lastIndex=t.lastIndex=0,f=-1,x=[],a=[];for(n+="",l+="";(o=r.exec(n))&&(c=t.exec(l));)(d=c.index)>s&&(d=l.slice(s,d),x[f]?x[f]+=d:x[++f]=d),(o=o[0])===(c=c[0])?x[f]?x[f]+=c:x[++f]=c:(x[++f]=null,a.push({i:f,x:(0,e.default)(o,c)})),s=t.lastIndex;return s<l.length&&(d=l.slice(s),x[f]?x[f]+=d:x[++f]=d),x.length<2?a[0]?i(a[0].x):u(l):(l=a.length,function(e){for(var n,r=0;r<l;++r)x[(n=a[r]).i]=n.x(e);return x.join("")})}
},{"./number.js":"DnDN"}],"kjQA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=require("d3-color"),r=c(require("./rgb.js")),t=require("./array.js"),u=c(require("./date.js")),n=c(require("./number.js")),o=c(require("./object.js")),a=c(require("./string.js")),f=c(require("./constant.js")),i=s(require("./numberArray.js"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=u?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function c(e){return e&&e.__esModule?e:{default:e}}function d(l,s){var c,d=typeof s;return null==s||"boolean"===d?(0,f.default)(s):("number"===d?n.default:"string"===d?(c=(0,e.color)(s))?(s=c,r.default):a.default:s instanceof e.color?r.default:s instanceof Date?u.default:(0,i.isNumberArray)(s)?i.default:Array.isArray(s)?t.genericArray:"function"!=typeof s.valueOf&&"function"!=typeof s.toString||isNaN(s)?o.default:n.default)(l,s)}
},{"d3-color":"DAa3","./rgb.js":"dP1s","./array.js":"pAty","./date.js":"g2d6","./number.js":"DnDN","./object.js":"SVIl","./string.js":"qEv5","./constant.js":"s8fH","./numberArray.js":"YGFn"}],"y7jd":[function(require,module,exports) {
"use strict";function t(t){var e=t.length;return function(r){return t[Math.max(0,Math.min(e-1,Math.floor(r*e)))]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"hv03":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("./color.js");function r(r,t){var o=(0,e.hue)(+r,+t);return function(e){var r=o(e);return r-360*Math.floor(r/360)}}
},{"./color.js":"fh1R"}],"Sj5k":[function(require,module,exports) {
"use strict";function e(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kI68":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a,exports.identity=void 0;var t=180/Math.PI,e={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function a(e,a,r,s,n,l){var o,i,c;return(o=Math.sqrt(e*e+a*a))&&(e/=o,a/=o),(c=e*r+a*s)&&(r-=e*c,s-=a*c),(i=Math.sqrt(r*r+s*s))&&(r/=i,s/=i,c/=i),e*s<a*r&&(e=-e,a=-a,c=-c,o=-o),{translateX:n,translateY:l,rotate:Math.atan2(a,e)*t,skewX:Math.atan(c)*t,scaleX:o,scaleY:i}}exports.identity=e;
},{}],"a2Qm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseCss=i,exports.parseSvg=l;var e,t,r,n,o=a(require("./decompose.js"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function i(n){return"none"===n?o.identity:(e||(e=document.createElement("DIV"),t=document.documentElement,r=document.defaultView),e.style.transform=n,n=r.getComputedStyle(t.appendChild(e),null).getPropertyValue("transform"),t.removeChild(e),n=n.slice(7,-1).split(","),(0,o.default)(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5]))}function l(e){return null==e?o.identity:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),(e=n.transform.baseVal.consolidate())?(e=e.matrix,(0,o.default)(e.a,e.b,e.c,e.d,e.e,e.f)):o.identity)}
},{"./decompose.js":"kI68"}],"l4aF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolateTransformSvg=exports.interpolateTransformCss=void 0;var e=r(require("../number.js")),t=require("./parse.js");function r(e){return e&&e.__esModule?e:{default:e}}function s(t,r,s,n){function a(e){return e.length?e.pop()+" ":""}return function(u,l){var o=[],p=[];return u=t(u),l=t(l),function(t,n,a,u,l,o){if(t!==a||n!==u){var p=l.push("translate(",null,r,null,s);o.push({i:p-4,x:(0,e.default)(t,a)},{i:p-2,x:(0,e.default)(n,u)})}else(a||u)&&l.push("translate("+a+r+u+s)}(u.translateX,u.translateY,l.translateX,l.translateY,o,p),function(t,r,s,u){t!==r?(t-r>180?r+=360:r-t>180&&(t+=360),u.push({i:s.push(a(s)+"rotate(",null,n)-2,x:(0,e.default)(t,r)})):r&&s.push(a(s)+"rotate("+r+n)}(u.rotate,l.rotate,o,p),function(t,r,s,u){t!==r?u.push({i:s.push(a(s)+"skewX(",null,n)-2,x:(0,e.default)(t,r)}):r&&s.push(a(s)+"skewX("+r+n)}(u.skewX,l.skewX,o,p),function(t,r,s,n,u,l){if(t!==s||r!==n){var o=u.push(a(u)+"scale(",null,",",null,")");l.push({i:o-4,x:(0,e.default)(t,s)},{i:o-2,x:(0,e.default)(r,n)})}else 1===s&&1===n||u.push(a(u)+"scale("+s+","+n+")")}(u.scaleX,u.scaleY,l.scaleX,l.scaleY,o,p),u=l=null,function(e){for(var t,r=-1,s=p.length;++r<s;)o[(t=p[r]).i]=t.x(e);return o.join("")}}}var n=s(t.parseCss,"px, ","px)","deg)");exports.interpolateTransformCss=n;var a=s(t.parseSvg,", ",")",")");exports.interpolateTransformSvg=a;
},{"../number.js":"DnDN","./parse.js":"a2Qm"}],"wggq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=M;var t=Math.SQRT2,e=2,r=4,n=1e-12;function a(t){return((t=Math.exp(t))+1/t)/2}function u(t){return((t=Math.exp(t))-1/t)/2}function o(t){return((t=Math.exp(2*t))-1)/(t+1)}function M(M,h){var i,f,s=M[0],c=M[1],l=M[2],p=h[0],x=h[1],v=h[2],d=p-s,g=x-c,q=d*d+g*g;if(q<n)f=Math.log(v/l)/t,i=function(e){return[s+e*d,c+e*g,l*Math.exp(t*e*f)]};else{var _=Math.sqrt(q),b=(v*v-l*l+r*q)/(2*l*e*_),j=(v*v-l*l-r*q)/(2*v*e*_),y=Math.log(Math.sqrt(b*b+1)-b),O=Math.log(Math.sqrt(j*j+1)-j);f=(O-y)/t,i=function(r){var n=r*f,M=a(y),h=l/(e*_)*(M*o(t*n+y)-u(y));return[s+h*d,c+h*g,l*M/a(t*n+y)]}}return i.duration=1e3*f,i}
},{}],"IQuS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hslLong=exports.default=void 0;var e=require("d3-color"),t=o(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function n(r){return function(o,n){var u=r((o=(0,e.hsl)(o)).h,(n=(0,e.hsl)(n)).h),a=(0,t.default)(o.s,n.s),f=(0,t.default)(o.l,n.l),l=(0,t.default)(o.opacity,n.opacity);return function(e){return o.h=u(e),o.s=a(e),o.l=f(e),o.opacity=l(e),o+""}}}var u=n(t.hue);exports.default=u;var a=n(t.default);exports.hslLong=a;
},{"d3-color":"DAa3","./color.js":"fh1R"}],"hyIW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("d3-color"),t=r(require("./color.js"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u){var a=(0,t.default)((r=(0,e.lab)(r)).l,(u=(0,e.lab)(u)).l),l=(0,t.default)(r.a,u.a),o=(0,t.default)(r.b,u.b),c=(0,t.default)(r.opacity,u.opacity);return function(e){return r.l=a(e),r.a=l(e),r.b=o(e),r.opacity=c(e),r+""}}
},{"d3-color":"DAa3","./color.js":"fh1R"}],"MadP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hclLong=exports.default=void 0;var e=require("d3-color"),t=o(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c=n?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=e[u]}return o.default=e,t&&t.set(e,o),o}function n(r){return function(o,n){var u=r((o=(0,e.hcl)(o)).h,(n=(0,e.hcl)(n)).h),c=(0,t.default)(o.c,n.c),a=(0,t.default)(o.l,n.l),f=(0,t.default)(o.opacity,n.opacity);return function(e){return o.h=u(e),o.c=c(e),o.l=a(e),o.opacity=f(e),o+""}}}var u=n(t.hue);exports.default=u;var c=n(t.default);exports.hclLong=c;
},{"d3-color":"DAa3","./color.js":"fh1R"}],"q2vi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubehelixLong=exports.default=void 0;var e=require("d3-color"),t=n(require("./color.js"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=o?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(n,u,a):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}function o(r){return function n(o){function u(n,u){var a=r((n=(0,e.cubehelix)(n)).h,(u=(0,e.cubehelix)(u)).h),i=(0,t.default)(n.s,u.s),c=(0,t.default)(n.l,u.l),f=(0,t.default)(n.opacity,u.opacity);return function(e){return n.h=a(e),n.s=i(e),n.l=c(Math.pow(e,o)),n.opacity=f(e),n+""}}return o=+o,u.gamma=n,u}(1)}var u=o(t.hue);exports.default=u;var a=o(t.default);exports.cubehelixLong=a;
},{"d3-color":"DAa3","./color.js":"fh1R"}],"fSQh":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0,n=r.length-1,a=r[0],o=new Array(n<0?0:n);t<n;)o[t]=e(a,a=r[++t]);return function(e){var r=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return o[r](e-r)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"xlar":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=new Array(r),o=0;o<r;++o)t[o]=e(o/(r-1));return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"UJWn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"interpolate",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"interpolateArray",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"interpolateBasis",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"interpolateBasisClosed",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"interpolateDate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"interpolateDiscrete",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"interpolateHue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"interpolateNumber",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"interpolateNumberArray",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"interpolateObject",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"interpolateRound",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"interpolateString",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"interpolateTransformCss",{enumerable:!0,get:function(){return c.interpolateTransformCss}}),Object.defineProperty(exports,"interpolateTransformSvg",{enumerable:!0,get:function(){return c.interpolateTransformSvg}}),Object.defineProperty(exports,"interpolateZoom",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"interpolateRgb",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"interpolateRgbBasis",{enumerable:!0,get:function(){return d.rgbBasis}}),Object.defineProperty(exports,"interpolateRgbBasisClosed",{enumerable:!0,get:function(){return d.rgbBasisClosed}}),Object.defineProperty(exports,"interpolateHsl",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"interpolateHslLong",{enumerable:!0,get:function(){return j.hslLong}}),Object.defineProperty(exports,"interpolateLab",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"interpolateHcl",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"interpolateHclLong",{enumerable:!0,get:function(){return y.hclLong}}),Object.defineProperty(exports,"interpolateCubehelix",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"interpolateCubehelixLong",{enumerable:!0,get:function(){return m.cubehelixLong}}),Object.defineProperty(exports,"piecewise",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"quantize",{enumerable:!0,get:function(){return x.default}});var e=h(require("./value.js")),r=h(require("./array.js")),t=h(require("./basis.js")),n=h(require("./basisClosed.js")),u=h(require("./date.js")),o=h(require("./discrete.js")),i=h(require("./hue.js")),a=h(require("./number.js")),l=h(require("./numberArray.js")),f=h(require("./object.js")),p=h(require("./round.js")),s=h(require("./string.js")),c=require("./transform/index.js"),b=h(require("./zoom.js")),d=q(require("./rgb.js")),j=q(require("./hsl.js")),g=h(require("./lab.js")),y=q(require("./hcl.js")),m=q(require("./cubehelix.js")),O=h(require("./piecewise.js")),x=h(require("./quantize.js"));function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function q(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=P();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(t,u,o):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function h(e){return e&&e.__esModule?e:{default:e}}
},{"./value.js":"kjQA","./array.js":"pAty","./basis.js":"MMNn","./basisClosed.js":"upwx","./date.js":"g2d6","./discrete.js":"y7jd","./hue.js":"hv03","./number.js":"DnDN","./numberArray.js":"YGFn","./object.js":"SVIl","./round.js":"Sj5k","./string.js":"qEv5","./transform/index.js":"l4aF","./zoom.js":"wggq","./rgb.js":"dP1s","./hsl.js":"IQuS","./lab.js":"hyIW","./hcl.js":"MadP","./cubehelix.js":"q2vi","./piecewise.js":"fSQh","./quantize.js":"xlar"}],"YbGp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isGradientColor=exports.isColorProp=void 0;var r=function(r){return["fill","stroke","fillStyle","strokeStyle"].includes(r)};exports.isColorProp=r;var e=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)};exports.isGradientColor=e;
},{}],"utul":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),r=s(require("d3-timer")),e=s(require("d3-ease")),a=require("d3-interpolate"),i=s(require("../util/path")),n=require("../util/color");function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=o();if(r&&r.has(t))return r.get(t);var e={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=a?Object.getOwnPropertyDescriptor(t,i):null;n&&(n.get||n.set)?Object.defineProperty(e,i,n):e[i]=t[i]}return e.default=t,r&&r.set(t,e),e}var u=[1,0,0,0,1,0,0,0,1];function p(r,e,o){var s={},p=e.fromAttrs,f=e.toAttrs;if(!r.destroyed){var l;for(var h in f)if(!(0,t.isEqual)(p[h],f[h]))if("path"===h){var c=f[h],m=p[h];c.length>m.length?(c=i.parsePathString(f[h]),m=i.parsePathString(p[h]),m=i.fillPathByDiff(m,c),m=i.formatPath(m,c),e.fromAttrs.path=m,e.toAttrs.path=c):e.pathFormatted||(c=i.parsePathString(f[h]),m=i.parsePathString(p[h]),m=i.formatPath(m,c),e.fromAttrs.path=m,e.toAttrs.path=c,e.pathFormatted=!0),s[h]=[];for(var v=0;v<c.length;v++){for(var d=c[v],y=m[v],g=[],A=0;A<d.length;A++)(0,t.isNumber)(d[A])&&y&&(0,t.isNumber)(y[A])?(l=(0,a.interpolate)(y[A],d[A]),g.push(l(o))):g.push(d[A]);s[h].push(g)}}else if("matrix"===h){var P=(0,a.interpolateArray)(p[h]||u,f[h]||u)(o);s[h]=P}else(0,n.isColorProp)(h)&&(0,n.isGradientColor)(f[h])?s[h]=f[h]:(0,t.isFunction)(f[h])||(l=(0,a.interpolate)(p[h],f[h]),s[h]=l(o));r.attr(s)}}function f(t,r,a){var i,n=r.startTime;if(a<n+r.delay||r._paused)return!1;var o=r.duration,s=r.easing;if(a=a-n-r.delay,r.repeat)i=a%o/o,i=e[s](i);else{if(!((i=a/o)<1))return r.onFrame?t.attr(r.onFrame(1)):t.attr(r.toAttrs),!0;i=e[s](i)}if(r.onFrame){var u=r.onFrame(i);t.attr(u)}else p(t,r,i);return!1}var l=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,a,i=this;this.timer=r.timer(function(r){if(i.current=r,i.animators.length>0){for(var n=i.animators.length-1;n>=0;n--)if((t=i.animators[n]).destroyed)i.removeAnimator(n);else{if(!t.isAnimatePaused())for(var o=(e=t.get("animations")).length-1;o>=0;o--)a=e[o],f(t,a,r)&&(e.splice(o,1),!1,a.callback&&a.callback());0===e.length&&i.removeAnimator(n)}i.canvas.get("autoDraw")||i.canvas.draw()}})},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach(function(r){r.stopAnimate(t)}),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),h=l;exports.default=h;
},{"@antv/util":"rU8N","d3-timer":"LWGV","d3-ease":"OAY5","d3-interpolate":"UJWn","../util/path":"QSCx","../util/color":"YbGp"}],"hW43":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./graph-event")),t=require("../util/util");function n(e){return e&&e.__esModule?e:{default:e}}var i=40,o=0,s=":",r=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function a(e,t){for(var n in e)if(e.hasOwnProperty(n)&&n.indexOf(s+t)>=0)return!0;return!1}function u(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function h(e,n,i){if(i.bubbles){var o=void 0,s=!1;if("mouseenter"===n?(o=i.fromShape,s=!0):"mouseleave"===n&&(s=!0,o=i.toShape),e.isCanvas()&&s)return;if(o&&(0,t.isParent)(e,o))return void(i.bubbles=!1);i.name=n,i.currentTarget=e,i.delegateTarget=e,e.emit(n,i)}}var v=function(){function n(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return n.prototype.init=function(){this._bindEvents()},n.prototype._bindEvents=function(){var e=this,n=this.canvas.get("el");(0,t.each)(r,function(t){n.addEventListener(t,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},n.prototype._clearEvents=function(){var e=this,n=this.canvas.get("el");(0,t.each)(r,function(t){n.removeEventListener(t,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},n.prototype._getEventObj=function(t,n,i,o,s,r){var a=new e.default(t,n);return a.fromShape=s,a.toShape=r,a.x=i.x,a.y=i.y,a.clientX=i.clientX,a.clientY=i.clientY,a.propagationPath.push(o),a},n.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},n.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),i=t.getPointByEvent(e);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},n.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),i=this._getShape(n,t),o=this["_on"+e],s=!1;if(o)o.call(this,n,i,t);else{var r=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,i),i&&this._emitEvent(e,t,n,i,null,i),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(s=!0,r&&this._emitEvent(e,t,n,r,r,null),this._emitEvent(e,t,n,null,r,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,i,null,null)}if(s||(this.currentShape=i),i&&!i.get("destroyed")){var a=this.canvas;a.get("el").style.cursor=i.attr("cursor")||a.get("cursor")}},n.prototype._onmousedown=function(e,t,n){n.button===o&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},n.prototype._emitMouseoverEvents=function(e,t,n,i){var o=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",e,t,n,n,i),this._emitEvent("mouseleave",e,t,n,n,i),i&&!i.get("destroyed")||(o.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",e,t,i,n,i),this._emitEvent("mouseenter",e,t,i,n,i)))},n.prototype._emitDragoverEvents=function(e,t,n,i,o){i?(i!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,i),this._emitEvent("dragenter",e,t,i,n,i)),o||this._emitEvent("dragover",e,t,i)):n&&this._emitEvent("dragleave",e,t,n,n,i),o&&this._emitEvent("dragover",e,t,i)},n.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(t,n);i!==e&&this._emitMouseoverEvents(n,t,e,i),this.currentShape=i},n.prototype._onmouseup=function(e,t,n){if(n.button===o){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,i),this._afterDrag(i,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},n.prototype._ondragover=function(e,t,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,e,i,t,!0)},n.prototype._onmousemove=function(e,t,n){var o=this.canvas,s=this.currentShape,r=this.draggingShape;if(this.dragging)r&&this._emitDragoverEvents(n,e,s,t,!1),this._emitEvent("drag",n,e,r);else{var a=this.mousedownPoint;if(a){var u=this.mousedownShape,h=n.timeStamp-this.mousedownTimeStamp,v=a.clientX-e.clientX,g=a.clientY-e.clientY;h>120||v*v+g*g>i?u&&u.get("draggable")?((r=this.mousedownShape).set("capture",!1),this.draggingShape=r,this.dragging=!0,this._emitEvent("dragstart",n,e,r),this.mousedownShape=null,this.mousedownPoint=null):!u&&o.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,s,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,s,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,s,t),this._emitEvent("mousemove",n,e,t)}},n.prototype._emitEvent=function(e,t,n,i,o,s){var r=this._getEventObj(e,t,n,i,o,s);if(i){r.shape=i,u(i,e,r);for(var a=i.getParent();a;)a.emitDelegation(e,r),r.propagationStopped||h(a,e,r),r.propagationPath.push(a),a=a.getParent()}else{u(this.canvas,e,r)}},n.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},n}(),g=v;exports.default=g;
},{"./graph-event":"xZlh","../util/util":"QXjy"}],"HPdv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("detect-browser"),i=s(require("./container")),r=require("../util/util"),n=s(require("../animate/timeline")),o=s(require("../event/event-contoller"));function s(t){return t&&t.__esModule?t:{default:t}}var u="px",l=(0,e.detect)(),a=l&&"firefox"===l.name,p=function(e){function i(t){var i=e.call(this,t)||this;return i.initContainer(),i.initDom(),i.initEvents(),i.initTimeline(),i}return(0,t.__extends)(i,e),i.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},i.prototype.initContainer=function(){var t=this.get("container");(0,r.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},i.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},i.prototype.initEvents=function(){var t=new o.default({canvas:this});t.init(),this.set("eventController",t)},i.prototype.initTimeline=function(){var t=new n.default(this);this.set("timeline",t)},i.prototype.setDOMSize=function(t,e){var i=this.get("el");r.isBrowser&&(i.style.width=t+u,i.style.height=e+u)},i.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},i.prototype.getRenderer=function(){return this.get("renderer")},i.prototype.getCursor=function(){return this.get("cursor")},i.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");r.isBrowser&&e&&(e.style.cursor=t)},i.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(a&&!(0,r.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,r.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),i=e.x,n=e.y;return this.getPointByClient(i,n)},i.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},i.prototype.getPointByClient=function(t,e){var i=this.get("el").getBoundingClientRect();return{x:t-i.left,y:e-i.top}},i.prototype.getClientByPoint=function(t,e){var i=this.get("el").getBoundingClientRect();return{x:t+i.left,y:e+i.top}},i.prototype.draw=function(){},i.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},i.prototype.clearEvents=function(){this.get("eventController").destroy()},i.prototype.isCanvas=function(){return!0},i.prototype.getParent=function(){return null},i.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},i}(i.default),c=p;exports.default=c;
},{"tslib":"c4AP","detect-browser":"t7Wl","./container":"Hkqv","../util/util":"QXjy","../animate/timeline":"utul","../event/event-contoller":"hW43"}],"LHPT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=r(require("./container"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.isGroup=function(){return!0},r.prototype.isEntityGroup=function(){return!1},r.prototype.clone=function(){for(var t=e.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var o=r[n];t.add(o.clone())}return t},r}(e.default),o=n;exports.default=o;
},{"tslib":"c4AP","./container":"Hkqv"}],"TyLD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),i=a(require("./element")),e=require("../util/matrix");function a(t){return t&&t.__esModule?t:{default:t}}var r=function(i){function a(t){return i.call(this,t)||this}return(0,t.__extends)(a,i),a.prototype._isInBBox=function(t,i){var e=this.getBBox();return e.minX<=t&&e.maxX>=t&&e.minY<=i&&e.maxY>=i},a.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},a.prototype.getBBox=function(){var t=this.get("bbox");return t||(t=this.calculateBBox(),this.set("bbox",t)),t},a.prototype.getCanvasBBox=function(){var t=this.get("canvasBox");return t||(t=this.calculateCanvasBBox(),this.set("canvasBox",t)),t},a.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBox",null)},a.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),i=this.getTotalMatrix(),a=t.minX,r=t.minY,n=t.maxX,o=t.maxY;if(i){var s=(0,e.multiplyVec2)(i,[t.minX,t.minY]),u=(0,e.multiplyVec2)(i,[t.maxX,t.minY]),h=(0,e.multiplyVec2)(i,[t.minX,t.maxY]),l=(0,e.multiplyVec2)(i,[t.maxX,t.maxY]);a=Math.min(s[0],u[0],h[0],l[0]),n=Math.max(s[0],u[0],h[0],l[0]),r=Math.min(s[1],u[1],h[1],l[1]),o=Math.max(s[1],u[1],h[1],l[1])}var p=this.attrs;if(p.shadowColor){var x=p.shadowBlur,c=void 0===x?0:x,m=p.shadowOffsetX,f=void 0===m?0:m,B=p.shadowOffsetY,v=void 0===B?0:B,y=a-c+f,d=n+c+f,M=r-c+v,g=o+c+v;a=Math.min(a,y),n=Math.max(n,d),r=Math.min(r,M),o=Math.max(o,g)}return{x:a,y:r,minX:a,minY:r,maxX:n,maxY:o,width:n-a,height:o-r}},a.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBox",null)},a.prototype.isClipShape=function(){return this.get("isClipShape")},a.prototype.isInShape=function(t,i){return!1},a.prototype.isOnlyHitBox=function(){return!1},a.prototype.isHit=function(t,i){var e=this.get("startArrowShape"),a=this.get("endArrowShape"),r=[t,i,1],n=(r=this.invertFromMatrix(r))[0],o=r[1],s=this._isInBBox(n,o);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(n,o)){if(this.isInShape(n,o))return!0;if(e&&e.isHit(n,o))return!0;if(a&&a.isHit(n,o))return!0}return!1},a}(i.default),n=r;exports.default=n;
},{"tslib":"c4AP","./element":"tEzW","../util/matrix":"FZZg"}],"pj64":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Event",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Base",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"AbstractCanvas",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"AbstractGroup",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"AbstractShape",{enumerable:!0,get:function(){return a.default}}),exports.PathUtil=exports.version=void 0;var e=p(require("./util/path"));exports.PathUtil=e;var t=o(require("./event/graph-event")),r=o(require("./abstract/base")),n=o(require("./abstract/canvas")),u=o(require("./abstract/group")),a=o(require("./abstract/shape"));function o(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=n?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(r,u,a):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}var s=require("../package.json"),c=s.version;exports.version=c;
},{"./util/path":"QSCx","../package.json":"tiGA","./event/graph-event":"xZlh","./abstract/base":"V8o4","./abstract/canvas":"HPdv","./abstract/group":"LHPT","./abstract/shape":"TyLD"}],"FHnw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_Y=0,exports.MARGIN_RATIO=.5,exports.DODGE_RATIO=.5,exports.GAP=.05;
},{}],"SVzv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@antv/util"),e=require("../constant"),i=function(){function i(t){var e=t.xField,i=t.yField,s=t.adjustNames,u=void 0===s?["x","y"]:s;this.adjustNames=u,this.xField=e,this.yField=i}return i.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},i.prototype.getAdjustRange=function(t,e,i){var s,u,n=this.yField,r=i.indexOf(e),o=i.length;return!n&&this.isAdjust("y")?(s=0,u=1):o>1?(s=i[0===r?0:r-1],u=i[r===o-1?o-1:r+1],0!==r?s+=(e-s)/2:s-=(u-e)/2,r!==o-1?u-=(u-e)/2:u+=(e-i[o-2])/2):(s=0===e?0:e-.5,u=0===e?1:e+.5),{pre:s,next:u}},i.prototype.adjustData=function(e,i){var s=this,u=this.getDimValues(i);t.each(e,function(e,i){t.each(u,function(t,u){s.adjustDim(u,t,e,i)})})},i.prototype.groupData=function(i,s){return t.each(i,function(t){void 0===t[s]&&(t[s]=e.DEFAULT_Y)}),t.groupBy(i,s)},i.prototype.adjustDim=function(t,e,i,s){},i.prototype.getDimValues=function(i){var s=this.xField,u=this.yField,n={},r=[];if(s&&this.isAdjust("x")&&r.push(s),u&&this.isAdjust("y")&&r.push(u),r.forEach(function(e){n[e]=t.valuesOfKey(i,e).sort(function(t,e){return t-e})}),!u&&this.isAdjust("y")){n.y=[e.DEFAULT_Y,1]}return n},i}();exports.default=i;
},{"@antv/util":"rU8N","../constant":"FHnw"}],"y3U1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./adjusts/adjust");exports.Adjust=e.default;var t={},r=function(e){return t[e.toLowerCase()]};exports.getAdjust=r;var s=function(e,s){if(r(e))throw new Error("Adjust type '"+e+"' existed.");t[e.toLowerCase()]=s};exports.registerAdjust=s;
},{"./adjusts/adjust":"SVzv"}],"xmh9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@antv/util"),e=function(e,r){return t.isString(r)?r:e.invert(e.scale(r))},r=function(){function r(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return r.prototype.mapping=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var a=e.map(function(e,r){return t._toOriginParam(e,t.scales[r])});return this.callback.apply(this,a)},r.prototype.getLinearValue=function(t){var e=this.values.length-1,r=Math.floor(e*t),a=e*t-r,i=this.values[r];return i+((r===e?i:this.values[r+1])-i)*a},r.prototype.getNames=function(){for(var t=this.scales,e=this.names,r=Math.min(t.length,e.length),a=[],i=0;i<r;i+=1)a.push(e[i]);return a},r.prototype.getFields=function(){return this.scales.map(function(t){return t.field})},r.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},r.prototype.defaultCallback=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 0===e.length?this.values:e.map(function(e,r){var a=t.scales[r];return"identity"===a.type?a.values[0]:t._getAttributeValue(a,e)})},r.prototype._parseCfg=function(e){var r=this,a=e.type,i=void 0===a?"base":a,n=e.names,s=void 0===n?[]:n,l=e.scales,u=void 0===l?[]:l,o=e.values,c=void 0===o?[]:o,h=e.callback;this.type=i,this.scales=u,this.values=c,this.names=s,this.callback=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];if(h){var i=h.apply(void 0,e);if(!t.isNil(i))return[i]}return r.defaultCallback.apply(r,e)}},r.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var r=t.translate(e);return this.values[r%this.values.length]}var a=t.scale(e);return this.getLinearValue(a)},r.prototype._toOriginParam=function(r,a){return a.isLinear?r:t.isArray(r)?r.map(function(t){return e(a,t)}):e(a,r)},r}();exports.default=r;
},{"@antv/util":"rU8N"}],"mMk8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTickMethod=t,exports.registerTickMethod=r;var e={};function t(t){return e[t]}function r(t,r){e[t]=r}
},{}],"fB2r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),i=require("./tick-method/register"),e=function(){function e(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return e.prototype.translate=function(t){return t},e.prototype.change=function(i){(0,t.assign)(this.__cfg__,i),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var i=this;return(0,t.map)(this.ticks,function(e,n){return(0,t.isObject)(e)?e:{text:i.getText(e,n),tickValue:e,value:i.scale(e)}})},e.prototype.getText=function(i,e){var n=this.formatter,r=n?n(i,e):i;return(0,t.isNil)(r)||!(0,t.isFunction)(r.toString)?"":r.toString()},e.prototype.getConfig=function(t){return this.__cfg__[t]},e.prototype.init=function(){(0,t.assign)(this,this.__cfg__),this.setDomain(),(0,t.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,n=[];if((0,t.isString)(e)){var r=(0,i.getTickMethod)(e);if(!r)throw new Error("There is no method to to calculate ticks!");n=r(this)}else(0,t.isFunction)(e)&&(n=e(this));return n},e.prototype.rangeMin=function(){return(0,t.head)(this.range)},e.prototype.rangeMax=function(){return(0,t.last)(this.range)},e.prototype.calcPercent=function(i,e,n){return(0,t.isNumber)(i)?(i-e)/(n-e):NaN},e.prototype.calcValue=function(t,i,e){return i+t*(e-i)},e}(),n=e;exports.default=n;
},{"@antv/util":"rU8N","./tick-method/register":"mMk8"}],"aSfh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=r(require("../base"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return(0,t.__extends)(r,i),r.prototype.translate=function(t){var i=(0,e.indexOf)(this.values,t);return-1===i?(0,e.isNumber)(t)?t:NaN:i},r.prototype.scale=function(t){var e=this.translate(t),i=this.calcPercent(e,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},r.prototype.invert=function(t){var e=this.max-this.min,i=this.calcPercent(t,this.rangeMin(),this.rangeMax()),r=Math.round(e*i)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},r.prototype.getText=function(r){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var a=r;return(0,e.isNumber)(r)&&!this.values.includes(r)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,t.__spreadArrays)([a],n))},r.prototype.initCfg=function(){this.tickMethod="cat"},r.prototype.setDomain=function(){if((0,e.isNil)(this.getConfig("min"))&&(this.min=0),(0,e.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}},r}(i.default),s=n;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"fB2r"}],"lZ5j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assign=f,exports.parse=I,exports.setGlobalDateMasks=exports.setGlobalDateI18n=exports.defaultI18n=exports.format=exports.default=void 0;var t=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,e="[1-9]\\d?",n="\\d\\d",r="\\d{3}",o="\\d{4}",u="[^\\s]+",a=/\[([^]*?)\]/gm;function i(t,e){for(var n=[],r=0,o=t.length;r<o;r++)n.push(t[r].substr(0,e));return n}var s=function(t){return function(e,n){var r=n[t].map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase());return r>-1?r:null}};function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,o=e;r<o.length;r++){var u=o[r];for(var a in u)t[a]=u[a]}return t}var d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=["January","February","March","April","May","June","July","August","September","October","November","December"],l=i(m,3),c=i(d,3),h={dayNamesShort:c,dayNames:d,monthNamesShort:l,monthNames:m,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}};exports.defaultI18n=h;var M=f({},h),g=function(t){return M=f(M,t)};exports.setGlobalDateI18n=g;var D=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},p=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},Y={D:function(t){return String(t.getDate())},DD:function(t){return p(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return p(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return p(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return p(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return p(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return p(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return p(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return p(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return p(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return p(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return p(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+p(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+p(Math.floor(Math.abs(e)/60),2)+":"+p(Math.abs(e)%60,2)}},v=function(t){return+t-1},S=[null,e],y=[null,u],H=["isPm",u,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],b=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}],w={D:["day",e],DD:["day",n],Do:["day",e+u,function(t){return parseInt(t,10)}],M:["month",e,v],MM:["month",n,v],YY:["year",n,function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour",e,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",e],HH:["hour",n],m:["minute",e],mm:["minute",n],s:["second",e],ss:["second",n],YYYY:["year",o],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond",n,function(t){return 10*+t}],SSS:["millisecond",r],d:S,dd:S,ddd:y,dddd:y,MMM:["month",u,s("monthNamesShort")],MMMM:["month",u,s("monthNames")],a:H,A:H,ZZ:b,Z:b},x={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},P=function(t){return f(x,t)};exports.setGlobalDateMasks=P;var N=function(e,n,r){if(void 0===n&&(n=x.default),void 0===r&&(r={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");n=x[n]||n;var o=[];n=n.replace(a,function(t,e){return o.push(e),"@@@"});var u=f(f({},M),r);return(n=n.replace(t,function(t){return Y[t](e,u)})).replace(/@@@/g,function(){return o.shift()})};function I(e,n,r){if(void 0===r&&(r={}),"string"!=typeof n)throw new Error("Invalid format in fecha parse");if(n=x[n]||n,e.length>1e3)return null;var o={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},u=[],i=[],s=n.replace(a,function(t,e){return i.push(D(e)),"@@@"}),d={},m={};s=D(s).replace(t,function(t){var e=w[t],n=e[0],r=e[1],o=e[3];if(d[n])throw new Error("Invalid format. "+n+" specified twice in format");return d[n]=!0,o&&(m[o]=!0),u.push(e),"("+r+")"}),Object.keys(m).forEach(function(t){if(!d[t])throw new Error("Invalid format. "+t+" is required in specified format")}),s=s.replace(/@@@/g,function(){return i.shift()});var l=e.match(new RegExp(s,"i"));if(!l)return null;for(var c=f(f({},M),r),h=1;h<l.length;h++){var g=u[h-1],p=g[0],Y=g[2],v=Y?Y(l[h],c):+l[h];if(null==v)return null;o[p]=v}1===o.isPm&&null!=o.hour&&12!=+o.hour?o.hour=+o.hour+12:0===o.isPm&&12==+o.hour&&(o.hour=0);for(var S=new Date(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond),y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],H=(h=0,y.length);h<H;h++)if(d[y[h][0]]&&o[y[h][0]]!==S[y[h][1]]())return null;return null==o.timezoneOffset?S:new Date(Date.UTC(o.year,o.month,o.day,o.hour,o.minute-o.timezoneOffset,o.second,o.millisecond))}exports.format=N;var O={format:N,parse:I,defaultI18n:h,setGlobalDateI18n:g,setGlobalDateMasks:P},T=O;exports.default=T;
},{}],"T06H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("@antv/util");function r(r){return function(t,i,u,n){for(var l=(0,e.isNil)(u)?0:u,o=(0,e.isNil)(n)?t.length:n;l<o;){var s=l+o>>>1;r(t[s])>i?o=s:l=s+1}return l}}
},{"@antv/util":"rU8N"}],"ZWGK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.timeFormat=u,exports.toTimeStamp=s,exports.getTickInterval=v,exports.YEAR=exports.MONTH=exports.DAY=exports.HOUR=exports.MINUTE=exports.SECOND=void 0;var e=require("@antv/util"),t=a(require("fecha")),r=n(require("./bisector"));function n(e){return e&&e.__esModule?e:{default:e}}function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}var i="format";function u(e,r){return(t[i]||t.default[i])(e,r)}function s(t){return(0,e.isString)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),(0,e.isDate)(t)&&(t=t.getTime()),t}var p=1e3;exports.SECOND=p;var Y=60*p;exports.MINUTE=Y;var f=60*Y;exports.HOUR=f;var c=24*f;exports.DAY=c;var l=31*c;exports.MONTH=l;var H=365*c;exports.YEAR=H;var m=[["HH:mm:ss",p],["HH:mm:ss",10*p],["HH:mm:ss",30*p],["HH:mm",Y],["HH:mm",10*Y],["HH:mm",30*Y],["HH",f],["HH",6*f],["HH",12*f],["YYYY-MM-DD",c],["YYYY-MM-DD",4*c],["YYYY-WW",7*c],["YYYY-MM",l],["YYYY-MM",4*l],["YYYY-MM",6*l],["YYYY",380*c]];function v(t,n,o){var a=(n-t)/o,i=(0,r.default)(function(e){return e[1]})(m,a)-1,u=m[i];return i<0?u=m[0]:i>=m.length&&(u=(0,e.last)(m)),u}
},{"@antv/util":"rU8N","fecha":"lZ5j","./bisector":"T06H"}],"HZ2G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("../util/time"),r=n(require("./base"));function n(t){return t&&t.__esModule?t:{default:t}}var u=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="timeCat",t}return(0,t.__extends)(n,r),n.prototype.translate=function(t){t=(0,i.toTimeStamp)(t);var r=this.values.indexOf(t);return-1===r&&(r=(0,e.isNumber)(t)&&t<this.values.length?t:NaN),r},n.prototype.getText=function(t,e){var r=this.translate(t);if(r>-1){var n=this.values[r],u=this.formatter;return n=u?u(n,e):(0,i.timeFormat)(n,this.mask)}return t},n.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},n.prototype.setDomain=function(){var t=this.values;(0,e.each)(t,function(e,r){t[r]=(0,i.toTimeStamp)(e)}),t.sort(function(t,e){return t-e}),r.prototype.setDomain.call(this)},n}(r.default),a=u;exports.default=a;
},{"tslib":"oMtQ","@antv/util":"rU8N","../util/time":"ZWGK","./base":"aSfh"}],"jqlI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),i=require("@antv/util"),e=n(require("../base"));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return(0,t.__extends)(n,e),n.prototype.scale=function(t){if((0,i.isNil)(t))return NaN;var e=this.rangeMin(),n=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(n-e)},n.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=(0,i.head)(t),s=(0,i.last)(t);n<this.min&&(this.min=n),s>this.max&&(this.max=s),(0,i.isNil)(this.minLimit)||(this.min=n),(0,i.isNil)(this.maxLimit)||(this.max=s)},n.prototype.setDomain=function(){var t=(0,i.getRange)(this.values),e=t.min,n=t.max;(0,i.isNil)(this.min)&&(this.min=e),(0,i.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=e,this.max=n)},n.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=(0,i.filter)(n,function(i){return i>=t.min&&i<=t.max})),n},n.prototype.getScalePercent=function(t){var i=this.max,e=this.min;return(t-e)/(i-e)},n.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},n}(e.default),r=s;exports.default=r;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"fB2r"}],"F9GJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=i(require("./base"));function i(e){return e&&e.__esModule?e:{default:e}}var n=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return(0,e.__extends)(i,t),i.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},i.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},i}(t.default),r=n;exports.default=r;
},{"tslib":"oMtQ","./base":"jqlI"}],"LP8J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calBase=e,exports.log=o,exports.getLogPositiveMin=a;var t=require("@antv/util");function e(t,e){var o=Math.E;return e>=0?Math.pow(o,Math.log(e)/t):-1*Math.pow(o,Math.log(-e)/t)}function o(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function a(e,o,a){(0,t.isNil)(a)&&(a=Math.max.apply(null,e));var r=a;return(0,t.each)(e,function(t){t>0&&t<r&&(r=t)}),r===a&&(r=a/o),r>1&&(r=1),r}
},{"@antv/util":"rU8N"}],"DJnN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("../util/math"),i=r(require("./base"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.type="log",t}return(0,t.__extends)(r,i),r.prototype.invert=function(t){var i,r=this.base,o=(0,e.log)(r,this.max),n=this.rangeMin(),s=this.rangeMax()-n,a=this.positiveMin;if(a){if(0===t)return 0;var u=1/(o-(i=(0,e.log)(r,a/r)))*s;if(t<u)return t/u*a}else i=(0,e.log)(r,this.min);var l=(t-n)/s*(o-i)+i;return Math.pow(r,l)},r.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},r.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=(0,e.getLogPositiveMin)(this.values,this.base,this.max))},r.prototype.getScalePercent=function(t){var i=this.max,r=this.min;if(i===r)return 0;if(t<=0)return 0;var o=this.base,n=this.positiveMin;return n&&(r=1*n/o),t<n?t/n/((0,e.log)(o,i)-(0,e.log)(o,r)):((0,e.log)(o,t)-(0,e.log)(o,r))/((0,e.log)(o,i)-(0,e.log)(o,r))},r}(i.default),n=o;exports.default=n;
},{"tslib":"oMtQ","../util/math":"LP8J","./base":"jqlI"}],"nxxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("../util/math"),r=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="pow",t}return(0,t.__extends)(i,r),i.prototype.invert=function(t){var r=this.getInvertPercent(t),i=this.exponent,n=(0,e.calBase)(i,this.max),a=(0,e.calBase)(i,this.min),s=r*(n-a)+a,o=s>=0?1:-1;return Math.pow(s,i)*o},i.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},i.prototype.getScalePercent=function(t){var r=this.max,i=this.min;if(r===i)return 0;var n=this.exponent;return((0,e.calBase)(n,t)-(0,e.calBase)(n,i))/((0,e.calBase)(n,r)-(0,e.calBase)(n,i))},i}(r.default),a=n;exports.default=a;
},{"tslib":"oMtQ","../util/math":"LP8J","./base":"jqlI"}],"yJiv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),i=require("@antv/util"),e=require("../util/time"),r=s(require("./linear"));function s(t){return t&&t.__esModule?t:{default:t}}var n=function(r){function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="time",t}return(0,t.__extends)(s,r),s.prototype.getText=function(t,i){var r=this.translate(t),s=this.formatter;return s?s(r,i):(0,e.timeFormat)(r,this.mask)},s.prototype.scale=function(t){var e=t;return((0,i.isString)(e)||(0,i.isDate)(e))&&(e=this.translate(e)),r.prototype.scale.call(this,e)},s.prototype.translate=function(t){return(0,e.toTimeStamp)(t)},s.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},s.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),s=this.getConfig("max");if((0,i.isNil)(r)&&(0,i.isNumber)(r)||(this.min=this.translate(this.min)),(0,i.isNil)(s)&&(0,i.isNumber)(s)||(this.max=this.translate(this.max)),t&&t.length){var n=[],a=1/0,o=a,u=0;(0,i.each)(t,function(t){var i=(0,e.toTimeStamp)(t);if(isNaN(i))throw new TypeError("Invalid Time: "+t+" in time scale!");a>i?(o=a,a=i):o>i&&(o=i),u<i&&(u=i),n.push(i)}),t.length>1&&(this.minTickInterval=o-a),(0,i.isNil)(r)&&(this.min=a),(0,i.isNil)(s)&&(this.max=u)}},s}(r.default),a=n;exports.default=a;
},{"tslib":"oMtQ","@antv/util":"rU8N","../util/time":"ZWGK","./linear":"F9GJ"}],"TCef":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="quantize",t}return(0,t.__extends)(i,r),i.prototype.invert=function(t){var r=this.ticks,i=r.length,n=this.getInvertPercent(t),u=Math.floor(n*(i-1));if(u>=i-1)return(0,e.last)(r);if(u<0)return(0,e.head)(r);var a=r[u],s=u/(i-1);return a+(n-s)/((u+1)/(i-1)-s)*(r[u+1]-a)},i.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},i.prototype.calculateTicks=function(){var t=r.prototype.calculateTicks.call(this);return this.nice||((0,e.last)(t)!==this.max&&t.push(this.max),(0,e.head)(t)!==this.min&&t.unshift(this.min)),t},i.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,e.head)(r))return 0;if(t>(0,e.last)(r))return 1;var i=0;return(0,e.each)(r,function(e,r){if(!(t>=e))return!1;i=r}),i/(r.length-1)},i}(r.default),u=n;exports.default=u;
},{"tslib":"oMtQ","@antv/util":"rU8N","./base":"jqlI"}],"evxT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=i(require("./quantize"));function i(t){return t&&t.__esModule?t:{default:t}}var u=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return(0,t.__extends)(i,e),i.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},i}(e.default),n=u;exports.default=n;
},{"tslib":"oMtQ","./quantize":"TCef"}],"JOwN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScale=n,exports.registerScale=u,Object.defineProperty(exports,"Scale",{enumerable:!0,get:function(){return e.default}});var e=r(require("./base"));function r(e){return e&&e.__esModule?e:{default:e}}var t={};function n(e){return t[e]}function u(e,r){if(n(e))throw new Error("type '"+e+"' existed.");t[e]=r}
},{"./base":"fB2r"}],"k0Jr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),r=u(require("../base"));function u(e){return e&&e.__esModule?e:{default:e}}var i=function(r){function u(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return(0,e.__extends)(u,r),u.prototype.calculateTicks=function(){return this.values},u.prototype.scale=function(e){return this.values[0]!==e&&(0,t.isNumber)(e)?e:this.range[0]},u.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},u}(r.default),n=i;exports.default=n;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"fB2r"}],"xo8V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c,exports.ALL_Q=exports.DEFAULT_Q=void 0;var r=require("@antv/util"),t=[1,5,2,2.5,4,3];exports.DEFAULT_Q=t;var e=[1,5,2,2.5,4,3,1.5,7,6,8,9];exports.ALL_Q=e;var a=100*Number.EPSILON;function o(r,t){return(r%t+t)%t}function n(t,e,n,i,u,s){var f=(0,r.size)(e),v=(0,r.indexOf)(e,t),l=0,c=o(i,s);return(c<a||s-c<a)&&i<=0&&u>=0&&(l=1),1-v/(f-1)-n+l}function i(t,e,a){var o=(0,r.size)(e);return 1-(0,r.indexOf)(e,t)/(o-1)-a+1}function u(r,t,e,a,o,n){var i=(r-1)/(n-o),u=(t-1)/(Math.max(n,a)-Math.min(e,o));return 2-Math.max(i/u,u/i)}function s(r,t){return r>=t?2-(r-1)/(t-1):1}function f(r,t,e,a){var o=t-r;return 1-.5*(Math.pow(t-a,2)+Math.pow(r-e,2))/Math.pow(.1*o,2)}function v(r,t,e){var a=t-r;if(e>a){var o=(e-a)/2;return 1-Math.pow(o,2)/Math.pow(.1*a,2)}return 1}function l(){return 1}function c(e,a,o,c,h,p){if(void 0===o&&(o=5),void 0===c&&(c=!0),void 0===h&&(h=t),void 0===p&&(p=[.25,.2,.5,.05]),e===a||1===o)return{min:e,max:a,ticks:[e]};for(var m={score:-2,lmin:0,lmax:0,lstep:0},M=1;M<1/0;){for(var x=0,d=h;x<d.length;x++){var b=d[x],N=i(b,h,M);if(Number.isNaN(N))throw new Error("NaN");if(p[0]*N+p[1]+p[2]+p[3]<m.score){M=1/0;break}for(var w=2;w<1/0;){var L=s(w,o);if(p[0]*N+p[1]+p[2]*L+p[3]<m.score)break;for(var _=(a-e)/(w+1)/M/b,k=Math.ceil(Math.log10(_));k<1/0;){var g=M*b*Math.pow(10,k),A=v(e,a,g*(w-1));if(p[0]*N+p[1]*A+p[2]*L+p[3]<m.score)break;var E=Math.floor(a/g)*M-(w-1)*M,F=Math.ceil(e/g)*M;if(E>F)k+=1;else{for(var O=E;O<=F;O+=1){var Q=O*(g/M),z=Q+g*(w-1),D=g,I=n(b,h,M,Q,z,D),P=f(e,a,Q,z),T=u(w,o,e,a,Q,z),U=l(),j=p[0]*I+p[1]*P+p[2]*T+p[3]*U;j>m.score&&(!c||Q<=e&&z>=a)&&(m.lmin=Q,m.lmax=z,m.lstep=D,m.score=j)}k+=1}}w+=1}}M+=1}for(var q=Number.isInteger(m.lstep)?0:Math.ceil(Math.abs(Math.log10(m.lstep))),y=[],S=m.lmin;S<=m.lmax;S+=m.lstep)y.push(S);var B=q?(0,r.map)(y,function(r){return Number.parseFloat(r.toFixed(q))}):y;return{min:Math.min(e,(0,r.head)(B)),max:Math.max(a,(0,r.last)(B)),ticks:B}}
},{"@antv/util":"rU8N"}],"R8iM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("@antv/util"),t=r(require("../util/extended"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){var u=r.values,i=r.tickInterval,n=r.tickCount,l=u;if((0,e.isNumber)(i))return(0,e.filter)(l,function(e,t){return t%i==0});var a=r.min,f=r.max;if((0,e.isNil)(a)&&(a=0),(0,e.isNil)(f)&&(f=u.length-1),(0,e.isNumber)(n)&&n<f-a){var s=(0,t.default)(a,f,n,!1,[1,2,5,3,4,7,6,8,9]).ticks;return(0,e.filter)(s,function(e){return e>=a&&e<=f}).map(function(e){return u[e]})}return u.slice(a,f+1)}
},{"@antv/util":"rU8N","../util/extended":"xo8V"}],"ILM7":[function(require,module,exports) {
"use strict";function t(t){var i=t.min,o=t.max,r=t.nice,a=t.tickCount,e=new n;return e.domain([i,o]),r&&e.nice(a),e.ticks(a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,exports.D3Linear=void 0;var i=5,o=Math.sqrt(50),r=Math.sqrt(10),a=Math.sqrt(2),n=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var o,r;void 0===t&&(t=i);var a,n=this._domain.slice(),e=0,s=this._domain.length-1,c=this._domain[e],M=this._domain[s];return M<c&&(c=(o=[M,c])[0],M=o[1],e=(r=[s,e])[0],s=r[1]),(a=h(c,M,t))>0?a=h(c=Math.floor(c/a)*a,M=Math.ceil(M/a)*a,t):a<0&&(a=h(c=Math.ceil(c*a)/a,M=Math.floor(M*a)/a,t)),a>0?(n[e]=Math.floor(c/a)*a,n[s]=Math.ceil(M/a)*a,this.domain(n)):a<0&&(n[e]=Math.ceil(c*a)/a,n[s]=Math.floor(M*a)/a,this.domain(n)),this},t.prototype.ticks=function(t){return void 0===t&&(t=i),e(this._domain[0],this._domain[this._domain.length-1],t||i)},t}();function e(t,i,o){var r,a,n,e,s=-1;if(o=+o,(t=+t)===(i=+i)&&o>0)return[t];if((r=i<t)&&(a=t,t=i,i=a),0===(e=h(t,i,o))||!isFinite(e))return[];if(e>0)for(t=Math.ceil(t/e),i=Math.floor(i/e),n=new Array(a=Math.ceil(i-t+1));++s<a;)n[s]=(t+s)*e;else for(t=Math.floor(t*e),i=Math.ceil(i*e),n=new Array(a=Math.ceil(t-i+1));++s<a;)n[s]=(t-s)/e;return r&&n.reverse(),n}function h(t,i,n){var e=(i-t)/Math.max(0,n),h=Math.floor(Math.log(e)/Math.LN10),s=e/Math.pow(10,h);return h>=0?(s>=o?10:s>=r?5:s>=a?2:1)*Math.pow(10,h):-Math.pow(10,-h)/(s>=o?10:s>=r?5:s>=a?2:1)}exports.D3Linear=n;
},{}],"ZORY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("@antv/util");function r(e,r,t){return("ceil"===t?Math.ceil(e/r):"floor"===t?Math.floor(e/r):Math.round(e/r))*r}function t(t,a,i){var o=r(t,i,"floor"),u=r(a,i,"ceil");o=(0,e.fixedBase)(o,i),u=(0,e.fixedBase)(u,i);for(var f=[],l=o;l<=u;l+=i){var n=(0,e.fixedBase)(l,i);f.push(n)}return{min:o,max:u,ticks:f}}
},{"@antv/util":"rU8N"}],"XJll":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var i=require("@antv/util");function t(t,e,r){var u,s=t.minLimit,n=t.maxLimit,a=t.min,l=t.max,o=t.tickCount,m=void 0===o?5:o,v=(0,i.isNil)(s)?(0,i.isNil)(e)?a:e:s,f=(0,i.isNil)(n)?(0,i.isNil)(r)?l:r:n;if(v>f&&(f=(u=[v,f])[0],v=u[1]),m<=2)return[v,f];for(var c=(f-v)/(m-1),d=[],p=0;p<m;p++)d.push(v+c*p);return d}
},{"@antv/util":"rU8N"}],"G06G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("@antv/util"),t=u(require("../util/d3-linear")),i=u(require("../util/interval")),r=u(require("../util/strict-limit"));function u(e){return e&&e.__esModule?e:{default:e}}function l(u){var l=u.min,a=u.max,n=u.tickInterval,s=u.minLimit,d=u.maxLimit,f=(0,t.default)(u);return(0,e.isNil)(s)&&(0,e.isNil)(d)?n?(0,i.default)(l,a,n).ticks:f:(0,r.default)(u,(0,e.head)(f),(0,e.last)(f))}
},{"@antv/util":"rU8N","../util/d3-linear":"ILM7","../util/interval":"ZORY","../util/strict-limit":"XJll"}],"tTDT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("@antv/util"),t=u(require("../util/extended")),i=u(require("../util/interval")),r=u(require("../util/strict-limit"));function u(e){return e&&e.__esModule?e:{default:e}}function l(u){var l=u.min,a=u.max,n=u.tickCount,s=u.nice,d=u.tickInterval,c=u.minLimit,f=u.maxLimit,o=(0,t.default)(l,a,n,s).ticks;return(0,e.isNil)(c)&&(0,e.isNil)(f)?d?(0,i.default)(l,a,d).ticks:o:(0,r.default)(u,(0,e.head)(o),(0,e.last)(o))}
},{"@antv/util":"rU8N","../util/extended":"xo8V","../util/interval":"ZORY","../util/strict-limit":"XJll"}],"YI9R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../util/math");function t(t){var o,r=t.base,a=t.tickCount,i=t.min,l=t.max,u=t.values,s=(0,e.log)(r,l);if(i>0)o=Math.floor((0,e.log)(r,i));else{var f=(0,e.getLogPositiveMin)(u,r,l);o=Math.floor((0,e.log)(r,f))}for(var n=s-o,h=Math.ceil(n/a),v=[],M=o;M<s+h;M+=h)v.push(Math.pow(r,M));return i<=0&&v.unshift(0),v}
},{"../util/math":"LP8J"}],"T226":[function(require,module,exports) {
"use strict";function t(t,a,e){void 0===e&&(e=5);var o={max:0,min:0,ticks:[]},r=(a-t)/e,i=Math.pow(10,Math.floor(Math.log10(r))),s=i<1?Math.ceil(Math.abs(Math.log10(i))):0,h=i;2*i-r<1.5*(r-h)&&5*i-r<2.75*(r-(h=2*i))&&10*i-r<1.5*(r-(h=5*i))&&(h=10*i);var l=Math.ceil(a/h),M=Math.floor(t/h);o.max=Math.max(l*h,a),o.min=Math.min(M*h,t);for(var u=Number.parseFloat((M*h).toFixed(s));u<a;)o.ticks.push(u),u+=h,s&&(u=Number.parseFloat(u.toFixed(s)));return o.ticks.push(u),o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"dYFh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../util/math"),t=r(require("../util/pretty"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r){var u=r.exponent,a=r.tickCount,n=Math.ceil((0,e.calBase)(u,r.max)),i=Math.floor((0,e.calBase)(u,r.min));return(0,t.default)(i,n,a).ticks.map(function(e){var t=e>=0?1:-1;return Math.pow(e,u)*t})}
},{"../util/math":"LP8J","../util/pretty":"T226"}],"Lpy1":[function(require,module,exports) {
"use strict";function e(e,t){var r=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:r%1!=0?e[Math.ceil(r)-1]:e.length%2==0?(e[r-1]+e[r])/2:e[r]}function t(t){var r=t.tickCount,n=t.values;if(!n||!n.length)return[];for(var u=n.slice().sort(function(e,t){return e-t}),l=[],o=0;o<r;o++){var i=o/(r-1);l.push(e(u,i))}return l}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"AECG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=require("@antv/util"),e=u(require("../util/interval")),i=u(require("../util/pretty")),r=u(require("../util/strict-limit"));function u(t){return t&&t.__esModule?t:{default:t}}function l(u){var l=u.min,a=u.max,n=u.tickCount,s=u.tickInterval,c=u.minLimit,d=u.maxLimit,f=(0,i.default)(l,a,n).ticks;return(0,t.isNil)(c)&&(0,t.isNil)(d)?s?(0,e.default)(l,a,s).ticks:f:(0,r.default)(u,(0,t.head)(f),(0,t.last)(f))}
},{"@antv/util":"rU8N","../util/interval":"ZORY","../util/pretty":"T226","../util/strict-limit":"XJll"}],"yOm5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../util/time");function t(t){var r=t.min,i=t.max,a=t.minTickInterval,l=t.tickInterval,n=t.tickCount;if(l)n=Math.ceil((i-r)/l);else{var u=(i-r)/(l=(0,e.getTickInterval)(r,i,n)[1])/n;u>1&&(l*=Math.ceil(u)),a&&l<a&&(l=a)}for(var c=[],v=r;v<i+l;v+=l)c.push(v);return c}
},{"../util/time":"ZWGK"}],"JuOh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("@antv/util"),t=u(require("./cat"));function u(e){return e&&e.__esModule?e:{default:e}}function r(u){var r=(0,t.default)(u),a=(0,e.last)(u.values);return a!==(0,e.last)(r)&&r.push(a),r}
},{"@antv/util":"rU8N","./cat":"R8iM"}],"OYCy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("../util/time");function t(e){return new Date(e).getFullYear()}function r(e){return new Date(e,0,1).getTime()}function n(e){return new Date(e).getMonth()}function a(e,r){var a=t(e),i=t(r),u=n(e);return 12*(i-a)+(n(r)-u)%12}function i(e,t){return new Date(e,t,1).getTime()}function u(t,r){return Math.ceil((r-t)/e.DAY)}function l(t,r){return Math.ceil((r-t)/e.HOUR)}function o(e,t){return Math.ceil((t-e)/6e4)}function c(c){var f=c.min,h=c.max,D=c.minTickInterval,M=c.tickInterval,s=c.tickCount,v=[];M||(M=(h-f)/s,D&&M<D&&(M=D));var g=t(f);if(M>e.YEAR)for(var O=t(h),E=Math.ceil(M/e.YEAR),N=g;N<=O+E;N+=E)v.push(r(N));else if(M>e.MONTH){var T=Math.ceil(M/e.MONTH),p=n(f),m=a(f,h);for(N=0;N<=m+T;N+=T)v.push(i(g,N+p))}else if(M>e.DAY){var w=(U=new Date(f)).getFullYear(),C=U.getMonth(),Y=U.getDate(),S=Math.ceil(M/e.DAY),H=u(f,h);for(N=0;N<H+S;N+=S)v.push(new Date(w,C,Y+N).getTime())}else if(M>e.HOUR){w=(U=new Date(f)).getFullYear(),C=U.getMonth(),S=U.getDate();var U,A=U.getHours(),I=Math.ceil(M/e.HOUR),R=l(f,h);for(N=0;N<=R+I;N+=I)v.push(new Date(w,C,S,A+N).getTime())}else if(M>e.MINUTE){var d=o(f,h),k=Math.ceil(M/e.MINUTE);for(N=0;N<=d+k;N+=k)v.push(f+N*e.MINUTE)}else{var x=M;x<e.SECOND&&(x=e.SECOND);var F=Math.floor(f/e.SECOND)*e.SECOND,_=Math.ceil((h-f)/e.SECOND),b=Math.ceil(x/e.SECOND);for(N=0;N<_+b;N+=b)v.push(F+N*e.SECOND)}return v}
},{"../util/time":"ZWGK"}],"KeLH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getTickMethod",{enumerable:!0,get:function(){return c.getTickMethod}}),Object.defineProperty(exports,"registerTickMethod",{enumerable:!0,get:function(){return c.registerTickMethod}});var e=s(require("./cat")),t=s(require("./d3-linear")),r=s(require("./linear")),i=s(require("./log")),u=s(require("./pow")),d=s(require("./quantile")),o=s(require("./r-prettry")),c=require("./register"),a=s(require("./time")),l=s(require("./time-cat")),n=s(require("./time-pretty"));function s(e){return e&&e.__esModule?e:{default:e}}(0,c.registerTickMethod)("cat",e.default),(0,c.registerTickMethod)("time-cat",l.default),(0,c.registerTickMethod)("wilkinson-extended",r.default),(0,c.registerTickMethod)("r-pretty",o.default),(0,c.registerTickMethod)("time",a.default),(0,c.registerTickMethod)("time-pretty",n.default),(0,c.registerTickMethod)("log",i.default),(0,c.registerTickMethod)("pow",u.default),(0,c.registerTickMethod)("quantile",d.default),(0,c.registerTickMethod)("d3-linear",t.default);
},{"./cat":"R8iM","./d3-linear":"G06G","./linear":"tTDT","./log":"YI9R","./pow":"dYFh","./quantile":"Lpy1","./r-prettry":"AECG","./register":"mMk8","./time":"yOm5","./time-cat":"JuOh","./time-pretty":"OYCy"}],"hc4Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Scale",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Category",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"TimeCat",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Linear",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Log",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Pow",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Time",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Quantize",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Quantile",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"getScale",{enumerable:!0,get:function(){return l.getScale}}),Object.defineProperty(exports,"registerScale",{enumerable:!0,get:function(){return l.registerScale}}),Object.defineProperty(exports,"Identity",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"getTickMethod",{enumerable:!0,get:function(){return d.getTickMethod}}),Object.defineProperty(exports,"registerTickMethod",{enumerable:!0,get:function(){return d.registerTickMethod}});var e=s(require("./base")),t=s(require("./category/base")),r=s(require("./category/time")),n=s(require("./continuous/linear")),u=s(require("./continuous/log")),i=s(require("./continuous/pow")),o=s(require("./continuous/time")),a=s(require("./continuous/quantize")),c=s(require("./continuous/quantile")),l=require("./factory"),f=s(require("./identity/index")),d=require("./tick-method/index");function s(e){return e&&e.__esModule?e:{default:e}}(0,l.registerScale)("cat",t.default),(0,l.registerScale)("category",t.default),(0,l.registerScale)("identity",f.default),(0,l.registerScale)("linear",n.default),(0,l.registerScale)("log",u.default),(0,l.registerScale)("pow",i.default),(0,l.registerScale)("time",o.default),(0,l.registerScale)("timeCat",r.default),(0,l.registerScale)("quantize",a.default),(0,l.registerScale)("quantile",c.default);
},{"./base":"fB2r","./category/base":"aSfh","./category/time":"HZ2G","./continuous/linear":"F9GJ","./continuous/log":"DJnN","./continuous/pow":"nxxW","./continuous/time":"yJiv","./continuous/quantize":"TCef","./continuous/quantile":"evxT","./factory":"JOwN","./identity/index":"k0Jr","./tick-method/index":"KeLH"}],"xUKq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@antv/scale");exports.Scale=e.Scale;
},{"@antv/scale":"hc4Z"}],"dUN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("./attributes/base");exports.Attribute=t.default;var r={},i=function(e){return r[e.toLowerCase()]};exports.getAttribute=i;var o=function(e,t){if(i(e))throw new Error("Attribute type '"+e+"' existed.");r[e.toLowerCase()]=t};exports.registerAttribute=o,e.__exportStar(require("./interface"),exports);
},{"tslib":"c4AP","./attributes/base":"xmh9","./interface":"xUKq"}],"LuPB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),e=function(e,r){return(0,t.isString)(r)?r:e.invert(e.scale(r))},r=function(){function r(t){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(t)}return r.prototype.mapping=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var a=e.map(function(e,r){return t._toOriginParam(e,t.scales[r])});return this.callback.apply(this,a)},r.prototype.getLinearValue=function(t){var e=this.values.length-1,r=Math.floor(e*t),a=e*t-r,i=this.values[r];return i+((r===e?i:this.values[r+1])-i)*a},r.prototype.getNames=function(){for(var t=this.scales,e=this.names,r=Math.min(t.length,e.length),a=[],i=0;i<r;i+=1)a.push(e[i]);return a},r.prototype.getFields=function(){return this.scales.map(function(t){return t.field})},r.prototype.getScale=function(t){return this.scales[this.names.indexOf(t)]},r.prototype.defaultCallback=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 0===e.length?this.values:e.map(function(e,r){var a=t.scales[r];return"identity"===a.type?a.values[0]:t._getAttributeValue(a,e)})},r.prototype._parseCfg=function(e){var r=this,a=e.type,i=void 0===a?"base":a,n=e.names,s=void 0===n?[]:n,l=e.scales,u=void 0===l?[]:l,o=e.values,c=void 0===o?[]:o,h=e.callback;this.type=i,this.scales=u,this.values=c,this.names=s,this.callback=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];if(h){var i=h.apply(void 0,e);if(!(0,t.isNil)(i))return[i]}return r.defaultCallback.apply(r,e)}},r.prototype._getAttributeValue=function(t,e){if(t.isCategory&&!this.linear){var r=t.translate(e);return this.values[r%this.values.length]}var a=t.scale(e);return this.getLinearValue(a)},r.prototype._toOriginParam=function(r,a){return a.isLinear?r:(0,t.isArray)(r)?r.map(function(t){return e(a,t)}):e(a,r)},r}(),a=r;exports.default=a;
},{"@antv/util":"rU8N"}],"MpF9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=require("@antv/util"),t=/rgba?\(([\s.,0-9]+)\)/,e=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,n=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,u=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,i=function(r){return/^[r,R,L,l]{1}[\s]*\(/.test(r)},s=function(){var r=document.createElement("i");return r.title="Web Colour Picker",r.style.display="none",document.body.appendChild(r),r},o=function(r,t,e,n){return r[n]+(t[n]-r[n])*e};function a(r){return"#"+d(r[0])+d(r[1])+d(r[2])}var l,c=function(r){return[parseInt(r.substr(1,2),16),parseInt(r.substr(3,2),16),parseInt(r.substr(5,2),16)]},d=function(r){var t=Math.round(r).toString(16);return 1===t.length?"0"+t:t},f=function(r,t){var e=isNaN(Number(t))||t<0?0:t>1?1:Number(t),n=r.length-1,u=Math.floor(n*e),i=n*e-u,s=r[u],l=u===n?s:r[u+1];return a([o(s,l,i,0),o(s,l,i,1),o(s,l,i,2)])},p=function(r){if("#"===r[0]&&7===r.length)return r;l||(l=s()),l.style.color=r;var e=document.defaultView.getComputedStyle(l,"").getPropertyValue("color");return e=a(t.exec(e)[1].split(/\s*,\s*/).map(function(r){return Number(r)}))},v=function(t){var e=(0,r.isString)(t)?t.split("-"):t,n=(0,r.map)(e,function(r){return c(-1===r.indexOf("#")?p(r):r)});return function(r){return f(n,r)}},g=function(t){if(i(t)){var s,o=void 0;if("l"===t[0]){var a=+(l=e.exec(t))[1]+90;o=l[2],s="linear-gradient("+a+"deg, "}else if("r"===t[0]){var l;s="radial-gradient(",o=(l=n.exec(t))[4]}var c=o.match(u);return(0,r.each)(c,function(r,t){var e=r.split(":");s+=e[1]+" "+100*e[0]+"%",t!==c.length-1&&(s+=", ")}),s+=")"}return t},m={rgb2arr:c,gradient:v,toRGB:(0,r.memoize)(p),toCSSGradient:g};exports.default=m;
},{"@antv/util":"rU8N"}],"qMzk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=i(require("@antv/color-util")),r=require("@antv/util"),u=i(require("./base"));function i(e){return e&&e.__esModule?e:{default:e}}var n=function(u){function i(e){var i=u.call(this,e)||this;return i.type="color",i.names=["color"],(0,r.isString)(i.values)&&(i.linear=!0),i.gradient=t.default.gradient(i.values),i}return(0,e.__extends)(i,u),i.prototype.getLinearValue=function(e){return this.gradient(e)},i}(u.default),a=n;exports.default=a;
},{"tslib":"c4AP","@antv/color-util":"MpF9","@antv/util":"rU8N","./base":"LuPB"}],"CjOa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./base"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(e){var r=t.call(this,e)||this;return r.type="opacity",r.names=["opacity"],r}return(0,e.__extends)(r,t),r}(t.default),a=u;exports.default=a;
},{"tslib":"c4AP","./base":"LuPB"}],"qweg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),r=i(require("./base"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(r){function i(e){var t=r.call(this,e)||this;return t.names=["x","y"],t.type="position",t}return(0,e.__extends)(i,r),i.prototype.mapping=function(e,r){var i=this.scales,s=i[0],n=i[1];return(0,t.isNil)(e)||(0,t.isNil)(r)?[]:[(0,t.isArray)(e)?e.map(function(e){return s.scale(e)}):s.scale(e),(0,t.isArray)(r)?r.map(function(e){return n.scale(e)}):n.scale(r)]},i}(r.default),n=s;exports.default=n;
},{"tslib":"c4AP","@antv/util":"rU8N","./base":"LuPB"}],"AiXJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./base"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(e){var r=t.call(this,e)||this;return r.type="shape",r.names=["shape"],r}return(0,e.__extends)(r,t),r.prototype.getLinearValue=function(e){var t=Math.round((this.values.length-1)*e);return this.values[t]},r}(t.default),a=u;exports.default=a;
},{"tslib":"c4AP","./base":"LuPB"}],"HwSJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./base"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(e){var r=t.call(this,e)||this;return r.type="size",r.names=["size"],r}return(0,e.__extends)(r,t),r}(t.default),s=u;exports.default=s;
},{"tslib":"c4AP","./base":"LuPB"}],"W7Rl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Scale",{enumerable:!0,get:function(){return e.Scale}});var e=require("@antv/scale");
},{"@antv/scale":"hc4Z"}],"Glmg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={getAttribute:!0,registerAttribute:!0,Attribute:!0};Object.defineProperty(exports,"Attribute",{enumerable:!0,get:function(){return t.default}}),exports.registerAttribute=exports.getAttribute=void 0;var t=u(require("./attributes/base")),r=require("./interface");function u(e){return e&&e.__esModule?e:{default:e}}Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var o={},i=function(e){return o[e.toLowerCase()]};exports.getAttribute=i;var n=function(e,t){if(i(e))throw new Error("Attribute type '"+e+"' existed.");o[e.toLowerCase()]=t};exports.registerAttribute=n;
},{"./attributes/base":"LuPB","./interface":"W7Rl"}],"HgDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={Attribute:!0,Color:!0,Opacity:!0,Position:!0,Shape:!0,Size:!0,getAttribute:!0,registerAttribute:!0};Object.defineProperty(exports,"Attribute",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Color",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Opacity",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Position",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Shape",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Size",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"getAttribute",{enumerable:!0,get:function(){return a.getAttribute}}),Object.defineProperty(exports,"registerAttribute",{enumerable:!0,get:function(){return a.registerAttribute}});var t=s(require("./attributes/base")),r=s(require("./attributes/color")),u=s(require("./attributes/opacity")),i=s(require("./attributes/position")),n=s(require("./attributes/shape")),o=s(require("./attributes/size")),a=require("./factory"),b=require("./interface");function s(e){return e&&e.__esModule?e:{default:e}}Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))}),(0,a.registerAttribute)("Color",r.default),(0,a.registerAttribute)("Opacity",u.default),(0,a.registerAttribute)("Position",i.default),(0,a.registerAttribute)("Shape",n.default),(0,a.registerAttribute)("Size",o.default);
},{"./attributes/base":"LuPB","./attributes/color":"qMzk","./attributes/opacity":"CjOa","./attributes/position":"qweg","./attributes/shape":"AiXJ","./attributes/size":"HwSJ","./factory":"Glmg","./interface":"W7Rl"}],"P4DE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),i=require("@antv/matrix-util"),e=require("@antv/util"),r=function(){function r(i){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=i.start,r=i.end,s=i.matrix,n=void 0===s?[1,0,0,0,1,0,0,0,1]:s,o=i.isTransposed,a=void 0!==o&&o;this.start=e,this.end=r,this.matrix=n,this.originalMatrix=(0,t.__spreadArrays)(n),this.isTransposed=a}return r.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},r.prototype.update=function(t){(0,e.assign)(this,t),this.initial()},r.prototype.convertDim=function(t,i){var e,r=this[i],s=r.start,n=r.end;return this.isReflect(i)&&(s=(e=[n,s])[0],n=e[1]),s+t*(n-s)},r.prototype.invertDim=function(t,i){var e,r=this[i],s=r.start,n=r.end;return this.isReflect(i)&&(s=(e=[n,s])[0],n=e[1]),(t-s)/(n-s)},r.prototype.applyMatrix=function(t,e,r){void 0===r&&(r=0);var s=this.matrix,n=[t,e,r];return i.vec3.transformMat3(n,n,s),n},r.prototype.invertMatrix=function(t,e,r){void 0===r&&(r=0);var s=this.matrix,n=i.mat3.invert([0,0,0,0,0,0,0,0,0],s),o=[t,e,r];return n&&i.vec3.transformMat3(o,o,n),o},r.prototype.convert=function(t){var i=this.convertPoint(t),e=i.x,r=i.y,s=this.applyMatrix(e,r,1);return{x:s[0],y:s[1]}},r.prototype.invert=function(t){var i=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:i[0],y:i[1]})},r.prototype.rotate=function(t){var e=this.matrix,r=this.center;return i.ext.leftTranslate(e,e,[-r.x,-r.y]),i.ext.leftRotate(e,e,t),i.ext.leftTranslate(e,e,[r.x,r.y]),this},r.prototype.reflect=function(t){return"x"===t?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},r.prototype.scale=function(t,e){var r=this.matrix,s=this.center;return i.ext.leftTranslate(r,r,[-s.x,-s.y]),i.ext.leftScale(r,r,[t,e]),i.ext.leftTranslate(r,r,[s.x,s.y]),this},r.prototype.translate=function(t,e){var r=this.matrix;return i.ext.leftTranslate(r,r,[t,e]),this},r.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},r.prototype.getCenter=function(){return this.center},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRadius=function(){return this.radius},r.prototype.isReflect=function(t){return"x"===t?this.isReflectX:this.isReflectY},r.prototype.resetMatrix=function(i){this.matrix=i||(0,t.__spreadArrays)(this.originalMatrix)},r}(),s=r;exports.default=s;
},{"tslib":"c4AP","@antv/matrix-util":"n7Fk","@antv/util":"rU8N"}],"vxmq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(e){function i(t){var i=e.call(this,t)||this;return i.isRect=!0,i.type="cartesian",i.initial(),i}return(0,t.__extends)(i,e),i.prototype.initial=function(){e.prototype.initial.call(this);var t=this.start,i=this.end;this.x={start:t.x,end:i.x},this.y={start:t.y,end:i.y}},i.prototype.convertPoint=function(t){var e,i=t.x,r=t.y;return this.isTransposed&&(i=(e=[r,i])[0],r=e[1]),{x:this.convertDim(i,"x"),y:this.convertDim(r,"y")}},i.prototype.invertPoint=function(t){var e,i=this.invertDim(t.x,"x"),r=this.invertDim(t.y,"y");return this.isTransposed&&(i=(e=[r,i])[0],r=e[1]),{x:i,y:r}},i}(e.default),n=r;exports.default=n;
},{"tslib":"c4AP","./base":"P4DE"}],"wI97":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),i=require("@antv/matrix-util"),e=require("@antv/util"),s=r(require("./base"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(s){function r(t){var i=s.call(this,t)||this;i.isHelix=!0,i.type="helix";var e=t.startAngle,r=void 0===e?1.25*Math.PI:e,n=t.endAngle,a=void 0===n?7.25*Math.PI:n,h=t.innerRadius,u=void 0===h?0:h,l=t.radius;return i.startAngle=r,i.endAngle=a,i.innerRadius=u,i.radius=l,i.initial(),i}return(0,t.__extends)(r,s),r.prototype.initial=function(){s.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,i=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(i*=this.radius),this.d=Math.floor(i*(1-this.innerRadius)/t),this.a=this.d/(2*Math.PI),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*i,end:this.innerRadius*i+.99*this.d}},r.prototype.convertPoint=function(t){var i,e=t.x,s=t.y;this.isTransposed&&(e=(i=[s,e])[0],s=i[1]);var r=this.convertDim(e,"x"),n=this.a*r,a=this.convertDim(s,"y");return{x:this.center.x+Math.cos(r)*(n+a),y:this.center.y+Math.sin(r)*(n+a)}},r.prototype.invertPoint=function(t){var s,r=this.d+this.y.start,n=i.vec2.subtract([0,0],[t.x,t.y],[this.center.x,this.center.y]),a=i.ext.angleTo(n,[1,0],!0),h=a*this.a;i.vec2.length(n)<h&&(h=i.vec2.length(n)),a=2*Math.floor((i.vec2.length(n)-h)/r)*Math.PI+a;var u=this.a*a,l=i.vec2.length(n)-u;l=(0,e.isNumberEqual)(l,0)?0:l;var o=this.invertDim(a,"x"),d=this.invertDim(l,"y");return o=(0,e.isNumberEqual)(o,0)?0:o,d=(0,e.isNumberEqual)(d,0)?0:d,this.isTransposed&&(o=(s=[d,o])[0],d=s[1]),{x:o,y:d}},r}(s.default),a=n;exports.default=a;
},{"tslib":"c4AP","@antv/matrix-util":"n7Fk","@antv/util":"rU8N","./base":"P4DE"}],"jlEs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),i=require("@antv/matrix-util"),e=require("@antv/util"),s=a(require("./base"));function a(t){return t&&t.__esModule?t:{default:t}}var r=function(s){function a(t){var i=s.call(this,t)||this;i.isPolar=!0,i.type="polar";var e=t.startAngle,a=void 0===e?-Math.PI/2:e,r=t.endAngle,n=void 0===r?3*Math.PI/2:r,h=t.innerRadius,o=void 0===h?0:h,u=t.radius;return i.startAngle=a,i.endAngle=n,i.innerRadius=o,i.radius=u,i.initial(),i}return(0,t.__extends)(a,s),a.prototype.initial=function(){for(s.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=2*Math.PI;var t,i=this.getOneBox(),e=i.maxX-i.minX,a=i.maxY-i.minY,r=Math.abs(i.minX)/e,n=Math.abs(i.minY)/a;this.height/a>this.width/e?(t=this.width/e,this.circleCenter={x:this.center.x-(.5-r)*this.width,y:this.center.y-(.5-n)*t*a}):(t=this.height/a,this.circleCenter={x:this.center.x-(.5-r)*t*e,y:this.center.y-(.5-n)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=t*this.radius:(this.radius<=0||this.radius>t)&&(this.polarRadius=t):this.polarRadius=t,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},a.prototype.getRadius=function(){return this.polarRadius},a.prototype.convertPoint=function(t){var i,e=this.getCenter(),s=t.x,a=t.y;return this.isTransposed&&(s=(i=[a,s])[0],a=i[1]),s=this.convertDim(s,"x"),a=this.convertDim(a,"y"),{x:e.x+Math.cos(s)*a,y:e.y+Math.sin(s)*a}},a.prototype.invertPoint=function(t){var s=this.getCenter(),a=[t.x-s.x,t.y-s.y],r=[1,0,0,0,1,0,0,0,1];i.ext.leftRotate(r,r,this.startAngle);var n=[1,0,0];i.vec3.transformMat3(n,n,r);var h=[n[0],n[1]],o=i.ext.angleTo(h,a,this.endAngle<this.startAngle);(0,e.isNumberEqual)(o,2*Math.PI)&&(o=0);var u=i.vec2.length(a),l=o/(this.endAngle-this.startAngle);l=this.endAngle-this.startAngle>0?l:-l;var d=this.invertDim(u,"y"),p={x:0,y:0};return p.x=this.isTransposed?d:l,p.y=this.isTransposed?l:d,p},a.prototype.getCenter=function(){return this.circleCenter},a.prototype.getOneBox=function(){var t=this.startAngle,i=this.endAngle;if(Math.abs(i-t)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var e=[0,Math.cos(t),Math.cos(i)],s=[0,Math.sin(t),Math.sin(i)],a=Math.min(t,i);a<Math.max(t,i);a+=Math.PI/18)e.push(Math.cos(a)),s.push(Math.sin(a));return{minX:Math.min.apply(Math,e),maxX:Math.max.apply(Math,e),minY:Math.min.apply(Math,s),maxY:Math.max.apply(Math,s)}},a}(s.default),n=r;exports.default=n;
},{"tslib":"c4AP","@antv/matrix-util":"n7Fk","@antv/util":"rU8N","./base":"P4DE"}],"EHKJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerCoordinate=exports.getCoordinate=void 0;var e={},o=function(o){return e[o.toLowerCase()]};exports.getCoordinate=o;var r=function(o,r){e[o.toLowerCase()]=r};exports.registerCoordinate=r;
},{}],"g8Yv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Coordinate",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"getCoordinate",{enumerable:!0,get:function(){return i.getCoordinate}}),Object.defineProperty(exports,"registerCoordinate",{enumerable:!0,get:function(){return i.registerCoordinate}});var e=n(require("./coord/base")),r=n(require("./coord/cartesian")),t=n(require("./coord/helix")),o=n(require("./coord/polar")),i=require("./factory");function n(e){return e&&e.__esModule?e:{default:e}}(0,i.registerCoordinate)("rect",r.default),(0,i.registerCoordinate)("cartesian",r.default),(0,i.registerCoordinate)("polar",o.default),(0,i.registerCoordinate)("helix",t.default);
},{"./coord/base":"P4DE","./coord/cartesian":"vxmq","./coord/helix":"wI97","./coord/polar":"jlEs","./factory":"EHKJ"}],"Eeum":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();exports.default=t;
},{}],"qpBD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.propagationDelegate=a;var e=t(require("@antv/g-base/lib/event/graph-event"));function t(e){return e&&e.__esModule?e:{default:e}}function a(t,a,r){var n=new e.default(a,r);n.target=t,n.propagationPath.push(t),t.emitDelegation(a,n);for(var o=t.getParent();o;)o.emitDelegation(a,n),n.propagationPath.push(o),o=o.getParent()}
},{"@antv/g-base/lib/event/graph-event":"Eeum"}],"Gn7N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMatrixByAngle=a,exports.getMatrixByTranslate=n,exports.getAngleByMatrix=e,exports.applyMatrix2BBox=i,exports.applyRotate=o,exports.applyTranslate=m;var t=require("@antv/matrix-util"),r=[1,0,0,0,1,0,0,0,1];function a(a,n,e){return void 0===e&&(e=r),n?t.ext.transform(e,[["t",-a.x,-a.y],["r",n],["t",a.x,a.y]]):null}function n(a,n){return a.x||a.y?t.ext.transform(n||r,[["t",a.x,a.y]]):null}function e(r){var a=[0,0,0];return t.vec3.transformMat3(a,[1,0,0],r),Math.atan2(a[1],a[0])}function x(r,a){var n=[0,0];return t.vec2.transformMat3(n,a,r),n}function i(t,r){var a=x(t,[r.minX,r.minY]),n=x(t,[r.maxX,r.minY]),e=x(t,[r.minX,r.maxY]),i=x(t,[r.maxX,r.maxY]),o=Math.min(a[0],n[0],e[0],i[0]),m=Math.max(a[0],n[0],e[0],i[0]),u=Math.min(a[1],n[1],e[1],i[1]),s=Math.max(a[1],n[1],e[1],i[1]);return{x:o,y:u,minX:o,minY:u,maxX:m,maxY:s,width:m-o,height:s-u}}function o(t,r,n,e){if(r){var x=a({x:n,y:e},r,t.getMatrix());t.setMatrix(x)}}function m(t,r,a){var e=n({x:r,y:a});t.attr("matrix",e)}
},{"@antv/matrix-util":"n7Fk"}],"SHBf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatPadding=a,exports.clearDom=e,exports.hasClass=n,exports.regionToBBox=i,exports.pointsToBBox=r,exports.createBBox=x,exports.getValueByPercent=o,exports.getCirclePoint=m,exports.distance=s,exports.intersectBBox=h,exports.mergeBBox=l,exports.getBBoxWithClip=c,exports.updateClip=M,exports.toPx=f,exports.getTextPoint=y,exports.near=exports.wait=void 0;var t=require("@antv/util");function a(a){var e=0,n=0,i=0,r=0;return(0,t.isNumber)(a)?e=n=i=r=a:(0,t.isArray)(a)&&(e=a[0],i=(0,t.isNil)(a[1])?a[0]:a[1],r=(0,t.isNil)(a[2])?a[0]:a[2],n=(0,t.isNil)(a[3])?i:a[3]),[e,i,r,n]}function e(t){for(var a=t.childNodes,e=a.length-1;e>=0;e--)t.removeChild(a[e])}function n(t,a){return!!t.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))}function i(t){var a=t.start,e=t.end,n=Math.min(a.x,e.x),i=Math.min(a.y,e.y),r=Math.max(a.x,e.x),x=Math.max(a.y,e.y);return{x:n,y:i,minX:n,minY:i,maxX:r,maxY:x,width:r-n,height:x-i}}function r(t){var a=t.map(function(t){return t.x}),e=t.map(function(t){return t.y}),n=Math.min.apply(Math,a),i=Math.min.apply(Math,e),r=Math.max.apply(Math,a),x=Math.max.apply(Math,e);return{x:n,y:i,minX:n,minY:i,maxX:r,maxY:x,width:r-n,height:x-i}}function x(t,a,e,n){return{x:t,y:a,width:e,height:n,minX:t,minY:a,maxX:t+e,maxY:a+n}}function o(t,a,e){return(1-e)*t+a*e}function m(t,a,e){return{x:t.x+Math.cos(e)*a,y:t.y+Math.sin(e)*a}}function s(t,a){var e=a.x-t.x,n=a.y-t.y;return Math.sqrt(e*e+n*n)}var p=function(t){return new Promise(function(a){setTimeout(a,t)})};exports.wait=p;var u=function(t,a){return[t,a].includes(1/0)?Math.abs(t)===Math.abs(a):Math.abs(t-a)<Math.pow(Number.EPSILON,.5)};function h(t,a){var e=Math.max(t.minX,a.minX),n=Math.max(t.minY,a.minY);return x(e,n,Math.min(t.maxX,a.maxX)-e,Math.min(t.maxY,a.maxY)-n)}function l(t,a){var e=Math.min(t.minX,a.minX),n=Math.min(t.minY,a.minY);return x(e,n,Math.max(t.maxX,a.maxX)-e,Math.max(t.maxY,a.maxY)-n)}function c(a){var e,n=a.getClip(),i=n&&n.getBBox();if(a.isGroup()){var r=1/0,o=-1/0,m=1/0,s=-1/0,p=a.getChildren();p.length>0?(0,t.each)(p,function(t){if(t.get("visible")){if(t.isGroup()&&0===t.get("children").length)return!0;var a=c(t),e=t.applyToMatrix([a.minX,a.minY,1]),n=t.applyToMatrix([a.minX,a.maxY,1]),i=t.applyToMatrix([a.maxX,a.minY,1]),x=t.applyToMatrix([a.maxX,a.maxY,1]),p=Math.min(e[0],n[0],i[0],x[0]),u=Math.max(e[0],n[0],i[0],x[0]),h=Math.min(e[1],n[1],i[1],x[1]),l=Math.max(e[1],n[1],i[1],x[1]);p<r&&(r=p),u>o&&(o=u),h<m&&(m=h),l>s&&(s=l)}}):(r=0,o=0,m=0,s=0),e=x(r,m,o-r,s-m)}else e=a.getBBox();return i?h(e,i):e}function M(t,a){if(t.getClip()||a.getClip()){var e=a.getClip();if(e){var n={type:e.get("type"),attrs:e.attr()};t.setClip(n)}else t.setClip(null)}}function f(t){return t+"px"}function y(t,a,e,n){var i=n/s(t,a),r=0;return"start"===e?r=0-i:"end"===e&&(r=1+i),{x:o(t.x,a.x,r),y:o(t.y,a.y,r)}}exports.near=u;
},{"@antv/util":"rU8N"}],"rbyY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/g-base"),n=require("@antv/util"),i={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},o=function(e){function o(t){var n=e.call(this,t)||this;return n.initCfg(),n}return(0,t.__extends)(o,e),o.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},o.prototype.clear=function(){},o.prototype.update=function(t){var e=this,i=this.get("defaultCfg");(0,n.each)(t,function(t,o){var r=t;e.get(o)!==t&&((0,n.isObject)(t)&&i[o]&&(r=(0,n.deepMix)({},i[o],t)),e.set(o,r))}),this.updateInner(t),this.afterUpdate(t)},o.prototype.updateInner=function(t){},o.prototype.afterUpdate=function(t){(0,n.hasKey)(t,"visible")&&(t.visible?this.show():this.hide()),(0,n.hasKey)(t,"capture")&&this.setCapture(t.capture)},o.prototype.getLayoutBBox=function(){return this.getBBox()},o.prototype.getLocationType=function(){return this.get("locationType")},o.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},o.prototype.setOffset=function(t,e){this.update({offsetX:t,offsetY:e})},o.prototype.setLocation=function(e){var n=(0,t.__assign)({},e);this.update(n)},o.prototype.getLocation=function(){var t=this,e={},o=this.get("locationType"),r=i[o];return(0,n.each)(r,function(n){e[n]=t.get(n)}),e},o.prototype.isList=function(){return!1},o.prototype.isSlider=function(){return!1},o.prototype.init=function(){},o.prototype.initCfg=function(){var t=this,e=this.get("defaultCfg");(0,n.each)(e,function(e,i){var o=t.get(i);if((0,n.isObject)(o)){var r=(0,n.deepMix)({},e,o);t.set(i,r)}})},o}(e.Base),r=o;exports.default=r;
},{"tslib":"c4AP","@antv/g-base":"pj64","@antv/util":"rU8N"}],"zvTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=require("../util/event"),i=require("../util/matrix"),o=require("../util/util"),r=p(require("./component"));function p(t){return t&&t.__esModule?t:{default:t}}var s="update_status",a=["visible","tip","delegateObject"],u=["container","group","shapesMap","isRegister","isUpdating","destroyed"],g=function(r){function p(){return null!==r&&r.apply(this,arguments)||this}return(0,t.__extends)(p,r),p.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},p.prototype.remove=function(){this.clear(),this.get("group").remove()},p.prototype.clear=function(){this.get("group").clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},p.prototype.getChildComponentById=function(t){var e=this.getElementById(t);return e&&e.get("component")},p.prototype.getElementById=function(t){return this.get("shapesMap")[t]},p.prototype.getElementByLocalId=function(t){var e=this.getElementId(t);return this.getElementById(e)},p.prototype.getElementsByName=function(t){var n=[];return(0,e.each)(this.get("shapesMap"),function(e){e.get("name")===t&&n.push(e)}),n},p.prototype.getContainer=function(){return this.get("container")},p.prototype.updateInner=function(t){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},p.prototype.render=function(){var t=this.get("offScreenGroup");t||(t=this.offScreenRender());var e=this.get("group");this.updateElements(t,e),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},p.prototype.show=function(){this.get("group").show(),this.set("visible",!0)},p.prototype.hide=function(){this.get("group").hide(),this.set("visible",!1)},p.prototype.setCapture=function(t){this.get("group").set("capture",t),this.set("capture",t)},p.prototype.destroy=function(){this.removeEvent(),this.remove(),r.prototype.destroy.call(this)},p.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},p.prototype.getLayoutBBox=function(){var t=this.get("group"),e=this.getInnerLayoutBBox(),n=t.getTotalMatrix();return n&&(e=(0,i.applyMatrix2BBox)(n,e)),e},p.prototype.on=function(t,e,n){return this.get("group").on(t,e,n),this},p.prototype.off=function(t,e){var n=this.get("group");return n&&n.off(t,e),this},p.prototype.emit=function(t,e){this.get("group").emit(t,e)},p.prototype.init=function(){r.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},p.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},p.prototype.delegateEmit=function(t,e){var i=this.get("group");e.target=i,i.emit(t,e),(0,n.propagationDelegate)(i,t,e)},p.prototype.createOffScreenGroup=function(){return new(this.get("group").getGroupBase())({delegateObject:this.getDelegateObject()})},p.prototype.applyOffset=function(){var t=this.get("offsetX"),e=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t,y:e})},p.prototype.initGroup=function(){var t=this.get("container");this.set("group",t.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},p.prototype.offScreenRender=function(){this.clearOffScreenCache();var t=this.createOffScreenGroup();return this.renderInner(t),this.set("offScreenGroup",t),this.set("offScreenBBox",(0,o.getBBoxWithClip)(t)),t},p.prototype.addGroup=function(t,e){this.appendDelegateObject(t,e);var n=t.addGroup(e);return this.get("isRegister")&&this.registerElement(n),n},p.prototype.addShape=function(t,e){this.appendDelegateObject(t,e);var n=t.addShape(e);return this.get("isRegister")&&this.registerElement(n),n},p.prototype.addComponent=function(e,n){var i=n.id,o=n.component,r=(0,t.__rest)(n,["id","component"]),p=new o((0,t.__assign)((0,t.__assign)({},r),{id:i,container:e,updateAutoRender:this.get("updateAutoRender")}));return p.init(),p.render(),this.get("isRegister")&&this.registerElement(p.get("group")),p},p.prototype.initEvent=function(){},p.prototype.removeEvent=function(){this.get("group").off()},p.prototype.getElementId=function(t){return this.get("id")+"-"+this.get("name")+"-"+t},p.prototype.registerElement=function(t){var e=t.get("id");this.get("shapesMap")[e]=t},p.prototype.unregisterElement=function(t){var e=t.get("id");delete this.get("shapesMap")[e]},p.prototype.moveElementTo=function(t,e){var n=(0,i.getMatrixByTranslate)(e);t.attr("matrix",n)},p.prototype.addAnimation=function(t,n,i){var o=n.attr("opacity");(0,e.isNil)(o)&&(o=1),n.attr("opacity",0),n.animate({opacity:o},i)},p.prototype.removeAnimation=function(t,e,n){e.animate({opacity:0},n)},p.prototype.updateAnimation=function(t,e,n,i){e.animate(n,i)},p.prototype.updateElements=function(t,n){var i,r=this,p=this.get("animate"),g=this.get("animateOption"),c=t.getChildren().slice(0);(0,e.each)(c,function(t){var c=t.get("id"),h=r.getElementById(c),f=t.get("name");if(h)if(t.get("isComponent")){var l=t.get("component"),d=h.get("component"),m=(0,e.pick)(l.cfg,(0,e.difference)((0,e.keys)(l.cfg),u));d.update(m),h.set(s,"update")}else{var y=r.getReplaceAttrs(h,t);p&&g.update?r.updateAnimation(f,h,y,g.update):h.attr(y),t.isGroup()&&r.updateElements(t,h),(0,e.each)(a,function(e){h.set(e,t.get(e))}),(0,o.updateClip)(h,t),i=h,h.set(s,"update")}else{n.add(t);var v=n.getChildren();if(v.splice(v.length-1,1),i){var B=v.indexOf(i);v.splice(B+1,0,t)}else v.unshift(t);if(r.registerElement(t),t.set(s,"add"),t.get("isComponent"))(l=t.get("component")).set("container",n);else t.isGroup()&&r.registerNewGroup(t);if(i=t,p){var E=r.get("isInit")?g.appear:g.enter;E&&r.addAnimation(f,t,E)}}})},p.prototype.clearUpdateStatus=function(t){var n=t.getChildren();(0,e.each)(n,function(t){t.set(s,null)})},p.prototype.clearOffScreenCache=function(){var t=this.get("offScreenGroup");t&&t.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},p.prototype.getDelegateObject=function(){var t;return(t={})[this.get("name")]=this,t.component=this,t},p.prototype.appendDelegateObject=function(t,n){var i=t.get("delegateObject");n.delegateObject||(n.delegateObject={}),(0,e.mix)(n.delegateObject,i)},p.prototype.getReplaceAttrs=function(t,n){var i=t.attr(),o=n.attr();return(0,e.each)(i,function(t,e){void 0===o[e]&&(o[e]=void 0)}),o},p.prototype.registerNewGroup=function(t){var n=this,i=t.getChildren();(0,e.each)(i,function(t){n.registerElement(t),t.set(s,"add"),t.isGroup()&&n.registerNewGroup(t)})},p.prototype.deleteElements=function(){var t=this,n=this.get("shapesMap"),i=[];(0,e.each)(n,function(t,e){!t.get(s)||t.destroyed?i.push([e,t]):t.set(s,null)});var o=this.get("animate"),r=this.get("animateOption");(0,e.each)(i,function(i){var p=i[0],s=i[1];if(!s.destroyed){var a=s.get("name");if(o&&r.leave){var u=(0,e.mix)({callback:function(){t.removeElement(s)}},r.leave);t.removeAnimation(a,s,u)}else t.removeElement(s)}delete n[p]})},p.prototype.removeElement=function(t){if(t.get("isGroup")){var e=t.get("component");e&&e.destroy()}t.remove()},p}(r.default),c=g;exports.default=c;
},{"tslib":"c4AP","@antv/util":"rU8N","../util/event":"qpBD","../util/matrix":"Gn7N","../util/util":"SHBf","./component":"rbyY"}],"azb1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.strLen=e,exports.charAtLength=t,exports.ellipsisString=a;var r="";function e(r){for(var e=0,a=0;a<r.length;a++)e+=t(r,a);return e}function t(r,e){return r.charCodeAt(e)>0&&r.charCodeAt(e)<128?1:2}function a(e,a,i){void 0===i&&(i="tail");var o=e.length,n="";if("tail"===i){for(var f=0,s=0;f<a;){if(!(f+t(e,s)<=a))break;n+=e[s],f+=t(e,s),s++}n+=r}else if("head"===i){for(f=0,s=o-1;f<a;){if(!(f+t(e,s)<=a))break;n+=e[s],f+=t(e,s),s--}n=r+n}else{for(var l="",u="",v=(f=0,0),c=o-1;f<a;){var h=t(e,v),d=!1;h+f<=a&&(l+=e[v],v++,f+=h,d=!0);var p=t(e,c);if(p+f<=a&&(u=e[c]+u,f+=p,c--,d=!0),!d)break}n=l+r+u}return n}
},{}],"J7A3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMaxLabelWidth=n,exports.getLabelLength=a,exports.testLabel=o,exports.ellipsisLabel=s;var t=require("@antv/util"),e=require("./text"),r="",i=2;function n(e){var r=0;return(0,t.each)(e,function(t){var e=t.getBBox().width;r<e&&(r=e)}),r}function a(t,e){var r=e.getCanvasBBox();return t?r.width:r.height}function o(t,e){return t.getBBox().width<e}function s(t,n,o,s){void 0===s&&(s="tail");var u=n.attr("text"),l=a(t,n),x=(0,e.strLen)(u),v=!1;if(o<l){var p=Math.floor(o/l*x)-i,h=void 0;(h=p>=0?(0,e.ellipsisString)(u,p,s):r)&&(n.attr("text",h),v=!0)}return v?n.set("tip",u):n.set("tip",null),v}
},{"@antv/util":"rU8N","./text":"azb1"}],"llPS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderTag=s;var e=require("tslib"),t=require("@antv/util"),a=require("./label"),i=require("./matrix"),r=require("./util");function s(s,n){var d=n.x,l=n.y,o=n.content,p=n.style,g=n.id,u=n.name,x=n.rotate,y=n.maxLength,h=n.autoEllipsis,m=n.isVertical,c=n.ellipsisPosition,b=n.background,v=s.addGroup({id:g+"-group",name:u+"-group",attrs:{x:d,y:l}}),_=v.addShape({type:"text",id:g,name:u,attrs:(0,e.__assign)({x:0,y:0,text:o},p)}),f=(0,r.formatPadding)((0,t.get)(b,"padding",0));if(y&&h){var q=y-(f[1]+f[3]);(0,a.ellipsisLabel)(!m,_,q,c)}if(b){var B=(0,t.get)(b,"style",{}),P=_.getCanvasBBox(),k=P.minX,w=P.minY,L=P.width,S=P.height;v.addShape("rect",{id:g+"-bg",name:g+"-bg",attrs:(0,e.__assign)({x:k-f[3],y:w-f[0],width:L+f[1]+f[3],height:S+f[0]+f[2]},B)}).toBack()}(0,i.applyTranslate)(v,d,l),(0,i.applyRotate)(v,x,d,l)}
},{"tslib":"c4AP","@antv/util":"rU8N","./label":"J7A3","./matrix":"Gn7N","./util":"SHBf"}],"MLQ3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={fontFamily:'\n  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"',textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4};exports.default=e;
},{}],"PV0j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=l(require("../abstract/group-component")),i=require("../util/graphic"),r=l(require("../util/theme")),o=require("../util/util");function l(t){return t&&t.__esModule?t:{default:t}}var a=function(n){function l(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(l,n),l.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:r.default.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:r.default.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:r.default.lineColor,lineWidth:1}}}})},l.prototype.renderInner=function(t){this.renderLine(t),this.get("text")&&this.renderLabel(t)},l.prototype.renderLine=function(e){var n=this.get("start"),i=this.get("end"),r=this.get("style");this.addShape(e,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:(0,t.__assign)({x1:n.x,y1:n.y,x2:i.x,y2:i.y},r)})},l.prototype.getLabelPoint=function(t,n,i){var r;return((r="start"===i?0:"center"===i?.5:(0,e.isString)(i)&&-1!==i.indexOf("%")?parseInt(i,10)/100:(0,e.isNumber)(i)?i:1)>1||r<0)&&(r=1),{x:(0,o.getValueByPercent)(t.x,n.x,r),y:(0,o.getValueByPercent)(t.y,n.y,r)}},l.prototype.renderLabel=function(t){var e=this.get("text"),n=this.get("start"),r=this.get("end"),o=e.position,l=e.content,a=e.style,s=e.offsetX,u=e.offsetY,f=e.autoRotate,d=e.maxLength,p=e.autoEllipsis,y=e.ellipsisPosition,g=e.background,c=e.isVertical,x=void 0!==c&&c,h=this.getLabelPoint(n,r,o),m=h.x+s,_=h.y+u,b={id:this.getElementId("line-text"),name:"annotation-line-text",x:m,y:_,content:l,style:a,maxLength:d,autoEllipsis:p,ellipsisPosition:y,background:g,isVertical:x};if(f){var v=[r.x-n.x,r.y-n.y];b.rotate=Math.atan2(v[1],v[0])}(0,i.renderTag)(t,b)},l}(n.default),s=a;exports.default=s;
},{"tslib":"c4AP","@antv/util":"rU8N","../abstract/group-component":"zvTB","../util/graphic":"llPS","../util/theme":"MLQ3","../util/util":"SHBf"}],"gM2D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=s(require("../abstract/group-component")),i=require("../util/graphic"),n=require("../util/matrix"),o=s(require("../util/theme"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(s,e),s.prototype.getDefaultCfg=function(){var i=e.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},i),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:o.default.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:o.default.fontFamily}}})},s.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},s.prototype.renderInner=function(t){var e=this.getLocation(),n=e.x,o=e.y,s=this.get("content"),a=this.get("style"),l={id:this.getElementId("text"),name:this.get("name")+"-text",x:n,y:o,content:s,style:a,maxLength:this.get("maxLength"),autoEllipsis:this.get("autoEllipsis"),isVertical:this.get("isVertical"),ellipsisPosition:this.get("ellipsisPosition"),background:this.get("background"),rotate:this.get("rotate")};(0,i.renderTag)(t,l)},s.prototype.resetLocation=function(){var t=this.getElementByLocalId("text-group");if(t){var e=this.getLocation(),i=e.x,o=e.y,s=this.get("rotate");(0,n.applyTranslate)(t,i,o),(0,n.applyRotate)(t,s,i,o)}},s}(e.default),l=a;exports.default=l;
},{"tslib":"c4AP","../abstract/group-component":"zvTB","../util/graphic":"llPS","../util/matrix":"Gn7N","../util/theme":"MLQ3"}],"eqlI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=n(require("../abstract/group-component")),r=require("../util/util");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(n,e),n.prototype.getDefaultCfg=function(){var r=e.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},r),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,style:{stroke:"#999",lineWidth:1}})},n.prototype.renderInner=function(t){this.renderArc(t)},n.prototype.getArcPath=function(){var t=this.getLocation(),e=t.center,n=t.radius,a=t.startAngle,i=t.endAngle,o=(0,r.getCirclePoint)(e,n,a),s=(0,r.getCirclePoint)(e,n,i),u=i-a>Math.PI?1:0,l=[["M",o.x,o.y]];if(i-a==2*Math.PI){var c=(0,r.getCirclePoint)(e,n,a+Math.PI);l.push(["A",n,n,0,u,1,c.x,c.y]),l.push(["A",n,n,0,u,1,s.x,s.y])}else l.push(["A",n,n,0,u,1,s.x,s.y]);return l},n.prototype.renderArc=function(e){var r=this.getArcPath(),n=this.get("style");this.addShape(e,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:(0,t.__assign)({path:r},n)})},n}(e.default),i=a;exports.default=i;
},{"tslib":"c4AP","../abstract/group-component":"zvTB","../util/util":"SHBf"}],"GwQg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=i(require("../abstract/group-component")),n=i(require("../util/theme")),r=require("../util/util");function i(t){return t&&t.__esModule?t:{default:t}}var o=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(i,e),i.prototype.getDefaultCfg=function(){var r=e.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},r),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:n.default.regionColor,opacity:.4}}})},i.prototype.renderInner=function(t){this.renderRegion(t)},i.prototype.renderRegion=function(e){var n=this.get("start"),i=this.get("end"),o=this.get("style"),a=(0,r.regionToBBox)({start:n,end:i});this.addShape(e,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:(0,t.__assign)({x:a.x,y:a.y,width:a.width,height:a.height},o)})},i}(e.default),a=o;exports.default=a;
},{"tslib":"c4AP","../abstract/group-component":"zvTB","../util/theme":"MLQ3","../util/util":"SHBf"}],"gL2K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=r(require("../abstract/group-component")),n=require("../util/util");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.getDefaultCfg=function(){var n=e.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},n),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},r.prototype.renderInner=function(t){this.renderImage(t)},r.prototype.getImageAttrs=function(){var e=this.get("start"),r=this.get("end"),i=this.get("style"),a=(0,n.regionToBBox)({start:e,end:r}),o=this.get("src");return(0,t.__assign)({x:a.x,y:a.y,img:o,width:a.width,height:a.height},i)},r.prototype.renderImage=function(t){this.addShape(t,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},r}(e.default),a=i;exports.default=a;
},{"tslib":"c4AP","../abstract/group-component":"zvTB","../util/util":"SHBf"}],"KDNw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=o(require("../abstract/group-component")),n=require("../util/graphic"),a=require("../util/matrix"),r=o(require("../util/theme"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(i){function o(){return null!==i&&i.apply(this,arguments)||this}return(0,t.__extends)(o,i),o.prototype.getDefaultCfg=function(){var e=i.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:r.default.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:r.default.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:r.default.fontFamily}}}})},o.prototype.renderInner=function(t){(0,e.get)(this.get("line"),"display")&&this.renderLine(t),(0,e.get)(this.get("text"),"display")&&this.renderText(t),(0,e.get)(this.get("point"),"display")&&this.renderPoint(t),this.get("autoAdjust")&&this.autoAdjust(t)},o.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},o.prototype.renderPoint=function(t){var e=this.getShapeAttrs().point;this.addShape(t,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:e})},o.prototype.renderLine=function(t){var e=this.getShapeAttrs().line;this.addShape(t,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:e})},o.prototype.renderText=function(e){var i=this.getShapeAttrs().text,a=i.x,r=i.y,o=i.text,s=(0,t.__rest)(i,["x","y","text"]),l=this.get("text"),p=l.background,d=l.maxLength,g=l.autoEllipsis,u=l.isVertival,h=l.ellipsisPosition,y={x:a,y:r,id:this.getElementId("text"),name:"annotation-text",content:o,style:s,background:p,maxLength:d,autoEllipsis:g,isVertival:u,ellipsisPosition:h};(0,n.renderTag)(e,y)},o.prototype.autoAdjust=function(t){var i=this.get("direction"),n=this.get("x"),r=this.get("y"),o=(0,e.get)(this.get("line"),"length",0),s=this.get("coordinateBBox"),l=t.getBBox(),p=l.minX,d=l.maxX,g=l.minY,u=l.maxY,h=t.findById(this.getElementId("text-group")),y=t.findById(this.getElementId("text")),x=t.findById(this.getElementId("line"));if(s){if(h){if(n+p<=s.minX){var f=s.minX-(n+p);(0,a.applyTranslate)(h,h.attr("x")+f,h.attr("y"))}if(n+d>=s.maxX){f=n+d-s.maxX;(0,a.applyTranslate)(h,h.attr("x")-f,h.attr("y"))}}if("upward"===i&&r+g<=s.minY||"upward"!==i&&r+u>=s.maxY){var m=void 0,c=void 0;"upward"===i&&r+g<=s.minY?(m="top",c=1):(m="bottom",c=-1),y.attr("textBaseline",m),x&&x.attr("path",[["M",0,0],["L",0,o*c]]),(0,a.applyTranslate)(h,h.attr("x"),(o+2)*c)}}},o.prototype.getShapeAttrs=function(){var i=(0,e.get)(this.get("line"),"display"),n=(0,e.get)(this.get("point"),"style",{}),a=(0,e.get)(this.get("line"),"style",{}),r=(0,e.get)(this.get("text"),"style",{}),o=this.get("direction"),s=i?(0,e.get)(this.get("line"),"length",0):0,l="upward"===o?-1:1;return{point:(0,t.__assign)({x:0,y:0},n),line:(0,t.__assign)({path:[["M",0,0],["L",0,s*l]]},a),text:(0,t.__assign)({x:0,y:(s+2)*l,text:(0,e.get)(this.get("text"),"content",""),textBaseline:"upward"===o?"bottom":"top"},r)}},o}(i.default),l=s;exports.default=l;
},{"tslib":"c4AP","@antv/util":"rU8N","../abstract/group-component":"zvTB","../util/graphic":"llPS","../util/matrix":"Gn7N","../util/theme":"MLQ3"}],"RyAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=a(require("../abstract/group-component")),i=a(require("../util/theme")),o=require("../util/util"),r=require("../util/graphic");function a(t){return t&&t.__esModule?t:{default:t}}var l=function(n){function a(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(a,n),a.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:i.default.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:i.default.textColor,fontFamily:i.default.fontFamily}}}})},a.prototype.renderInner=function(n){var i=(0,e.get)(this.get("region"),"style",{}),a=((0,e.get)(this.get("text"),"style",{}),this.get("lineLength")||0),l=this.get("points");if(l.length){var s=(0,o.pointsToBBox)(l),u=[];u.push(["M",l[0].x,s.minY-a]),l.forEach(function(t){u.push(["L",t.x,t.y])}),u.push(["L",l[l.length-1].x,l[l.length-1].y-a]),this.addShape(n,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:(0,t.__assign)({path:u},i)});var g=(0,t.__assign)({id:this.getElementId("text"),name:"annotation-text",x:(s.minX+s.maxX)/2,y:s.minY-a},this.get("text"));(0,r.renderTag)(n,g)}},a}(n.default),s=l;exports.default=s;
},{"tslib":"c4AP","@antv/util":"rU8N","../abstract/group-component":"zvTB","../util/theme":"MLQ3","../util/util":"SHBf","../util/graphic":"llPS"}],"xTb3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=n(require("../abstract/group-component")),i=require("../util/util");function n(t){return t&&t.__esModule?t:{default:t}}var a=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return(0,t.__extends)(n,r),n.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},n.prototype.renderInner=function(t){var r=this,n=this.get("start"),a=this.get("end"),o=this.addGroup(t,{id:this.getElementId("region-filter"),capture:!1});(0,e.each)(this.get("shapes"),function(t,i){var n=t.get("type"),a=(0,e.clone)(t.attr());r.adjustShapeAttrs(a),r.addShape(o,{id:r.getElementId("shape-"+n+"-"+i),capture:!1,type:n,attrs:a})});var l=(0,i.regionToBBox)({start:n,end:a});o.setClip({type:"rect",attrs:{x:l.minX,y:l.minY,width:l.width,height:l.height}})},n.prototype.adjustShapeAttrs=function(t){var e=this.get("color");t.fill&&(t.fill=t.fillStyle=e),t.stroke=t.strokeStyle=e},n}(r.default),o=a;exports.default=o;
},{"tslib":"c4AP","@antv/util":"rU8N","../abstract/group-component":"zvTB","../util/util":"SHBf"}],"hZ7D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Line",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Arc",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Region",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"DataMarker",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"DataRegion",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"RegionFilter",{enumerable:!0,get:function(){return a.default}});var e=f(require("./line")),r=f(require("./text")),t=f(require("./arc")),n=f(require("./region")),u=f(require("./image")),i=f(require("./data-marker")),o=f(require("./data-region")),a=f(require("./region-filter"));function f(e){return e&&e.__esModule?e:{default:e}}
},{"./line":"PV0j","./text":"gM2D","./arc":"eqlI","./region":"GwQg","./image":"gL2K","./data-marker":"KDNw","./data-region":"RyAY","./region-filter":"xTb3"}],"WAf0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStatesStyle=t;var e=require("@antv/util");function t(t,r,u){var n=r+"Style",i=null;return(0,e.each)(u,function(r,u){t[u]&&r[n]&&(i||(i={}),(0,e.mix)(i,r[n]))}),i}
},{"@antv/util":"rU8N"}],"oVxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/matrix-util"),i=require("@antv/util"),n=l(require("../abstract/group-component")),a=require("../util/matrix"),r=require("../util/state"),s=l(require("../util/theme"));function l(t){return t&&t.__esModule?t:{default:t}}var o=function(n){function l(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(l,n),l.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},defaultCfg:{line:{style:{lineWidth:1,stroke:s.default.lineColor}},tickLine:{style:{lineWidth:1,stroke:s.default.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:s.default.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:s.default.textColor,textBaseline:"middle",fontFamily:s.default.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:s.default.textColor,textBaseline:"middle",fontFamily:s.default.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:s.default.uncheckedColor}}}}})},l.prototype.renderInner=function(t){this.get("line")&&this.drawLine(t),this.drawTicks(t),this.get("title")&&this.drawTitle(t)},l.prototype.isList=function(){return!0},l.prototype.getItems=function(){return this.get("ticks")},l.prototype.setItems=function(t){this.update({ticks:t})},l.prototype.updateItem=function(t,e){(0,i.mix)(t,e),this.clear(),this.render()},l.prototype.clearItems=function(){var t=this.getElementByLocalId("label-group");t&&t.clear()},l.prototype.setItemState=function(t,e,i){t[e]=i,this.updateTickStates(t)},l.prototype.hasState=function(t,e){return!!t[e]},l.prototype.getItemStates=function(t){var e=this.get("tickStates"),n=[];return(0,i.each)(e,function(e,i){t[i]&&n.push(i)}),n},l.prototype.clearItemsState=function(t){var e=this,n=this.getItemsByState(t);(0,i.each)(n,function(i){e.setItemState(i,t,!1)})},l.prototype.getItemsByState=function(t){var e=this,n=this.getItems();return(0,i.filter)(n,function(i){return e.hasState(i,t)})},l.prototype.getSidePoint=function(t,e){var i=this.getSideVector(e,t);return{x:t.x+i[0],y:t.y+i[1]}},l.prototype.getTextAnchor=function(t){var e;return(0,i.isNumberEqual)(t[0],0)?e="center":t[0]>0?e="start":t[0]<0&&(e="end"),e},l.prototype.processOverlap=function(t){},l.prototype.drawLine=function(t){var e=this.getLinePath(),n=this.get("line");this.addShape(t,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:(0,i.mix)({path:e},n.style)})},l.prototype.getTickLineItems=function(t){var e=this,n=[],a=this.get("tickLine"),r=a.alignTick,s=a.length,l=1;return t.length>=2&&(l=t[1].value-t[0].value),(0,i.each)(t,function(t){var i=t.point;r||(i=e.getTickPoint(t.value-l/2));var a=e.getSidePoint(i,s);n.push({startPoint:i,tickValue:t.value,endPoint:a,tickId:t.id,id:"tickline-"+t.id})}),n},l.prototype.getSubTickLineItems=function(t){var e=[],i=this.get("subTickLine"),n=i.count,a=t.length;if(a>=2)for(var r=0;r<a-1;r++)for(var s=t[r],l=t[r+1],o=0;o<n;o++){var c=(o+1)/(n+1),u=(1-c)*s.tickValue+c*l.tickValue,d=this.getTickPoint(u),h=this.getSidePoint(d,i.length);e.push({startPoint:d,endPoint:h,tickValue:u,id:"sub-"+s.id+"-"+o})}return e},l.prototype.getTickLineAttrs=function(t,e){var n=this.get(e).style,a=t.startPoint,r=t.endPoint;return(0,i.mix)({x1:a.x,y1:a.y,x2:r.x,y2:r.y},n)},l.prototype.drawTick=function(t,e,i){this.addShape(e,{type:"line",id:this.getElementId(t.id),name:"axis-"+i,attrs:this.getTickLineAttrs(t,i)})},l.prototype.drawTickLines=function(t){var e=this,n=this.get("ticks"),a=this.get("subTickLine"),r=this.getTickLineItems(n),s=this.addGroup(t,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),l=this.get("tickLine");if((0,i.each)(r,function(i){if(l.displayWithLabel){var n=e.getElementId("label-"+i.tickId);t.findById(n)&&e.drawTick(i,s,"tickLine")}else e.drawTick(i,s,"tickLine")}),a){var o=this.getSubTickLineItems(r);(0,i.each)(o,function(t){e.drawTick(t,s,"subTickLine")})}},l.prototype.processTicks=function(){var t=this,e=this.get("ticks");(0,i.each)(e,function(e){e.point=t.getTickPoint(e.value),(0,i.isNil)(e.id)&&(e.id=e.name)})},l.prototype.drawTicks=function(t){var e=this;this.processTicks(),this.get("label")&&this.drawLabels(t),this.get("tickLine")&&this.drawTickLines(t);var n=this.get("ticks");(0,i.each)(n,function(i){e.applyTickStates(i,t)})},l.prototype.getLabelAttrs=function(t,e){var n=this.get("label"),r=n.offset,s=n.style,l=n.rotate,o=n.formatter,c=this.getSidePoint(t.point,r),u=this.getSideVector(r,c),d=o?o(t.name,t,e):t.name,h=(0,i.mix)({x:c.x,y:c.y,text:d,textAlign:this.getTextAnchor(u)},s);return l&&(h.matrix=(0,a.getMatrixByAngle)(c,l)),h},l.prototype.drawLabels=function(t){var e=this,n=this.get("ticks"),a=this.addGroup(t,{name:"axis-label-group",id:this.getElementId("label-group")});(0,i.each)(n,function(t,i){e.addShape(a,{type:"text",name:"axis-label",id:e.getElementId("label-"+t.id),attrs:e.getLabelAttrs(t,i),delegateObject:{tick:t,item:t,index:i}})}),this.processOverlap(a)},l.prototype.getTitleAttrs=function(){var t=this.get("title"),n=t.style,r=t.position,s=t.offset,l=t.spacing,o=void 0===l?0:l,c=t.autoRotate,u=n.fontSize,d=.5;"start"===r?d=0:"end"===r&&(d=1);var h=this.getTickPoint(d),p=this.getSidePoint(h,s||o+u/2),g=(0,i.mix)({x:p.x,y:p.y,text:t.text},n),f=t.rotate,y=f;if((0,i.isNil)(f)&&c){var k=this.getAxisVector(h);y=e.ext.angleTo(k,[1,0],!0)}if(y){var m=(0,a.getMatrixByAngle)(p,y);g.matrix=m}return g},l.prototype.drawTitle=function(t){this.addShape(t,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},l.prototype.applyTickStates=function(t,e){if(this.getItemStates(t).length){var i=this.get("tickStates"),n=this.getElementId("label-"+t.id),a=e.findById(n);if(a){var s=(0,r.getStatesStyle)(t,"label",i);s&&a.attr(s)}var l=this.getElementId("tickline-"+t.id),o=e.findById(l);if(o){var c=(0,r.getStatesStyle)(t,"tickLine",i);c&&o.attr(c)}}},l.prototype.updateTickStates=function(t){var e=this.getItemStates(t),i=this.get("tickStates"),n=this.get("label"),a=this.getElementByLocalId("label-"+t.id),s=this.get("tickLine"),l=this.getElementByLocalId("tickline-"+t.id);if(e.length){if(a){var o=(0,r.getStatesStyle)(t,"label",i);o&&a.attr(o)}if(l){var c=(0,r.getStatesStyle)(t,"tickLine",i);c&&l.attr(c)}}else a&&a.attr(n.style),l&&l.attr(s.style)},l}(n.default),c=o;exports.default=c;
},{"tslib":"c4AP","@antv/matrix-util":"n7Fk","@antv/util":"rU8N","../abstract/group-component":"zvTB","../util/matrix":"Gn7N","../util/state":"WAf0","../util/theme":"MLQ3"}],"BbCU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefault=i,exports.ellipsisHead=l,exports.ellipsisTail=n,exports.ellipsisMiddle=u;var e=require("@antv/util"),t=require("../../util/label");function r(r,i,l,n){var u=i.getChildren(),s=!1;return(0,e.each)(u,function(e){var i=(0,t.ellipsisLabel)(r,e,l,n);s=s||i}),s}function i(){return n}function l(e,t,i){return r(e,t,i,"head")}function n(e,t,i){return r(e,t,i,"tail")}function u(e,t,i){return r(e,t,i,"middle")}
},{"@antv/util":"rU8N","../../util/label":"J7A3"}],"iX9t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefault=i,exports.reserveFirst=n,exports.reserveLast=h,exports.reserveBoth=s,exports.equidistance=o;var e=require("../../util/label");function t(e){var t=e.attr("matrix");return t&&1!==t[0]}function r(e,t,r,a,i){void 0===i&&(i=!1);var n=!1;if(e)n=Math.abs(r.y-a.y)<r.height;else if(t){var h=i?a.height:r.height;n=Math.abs(r.x-a.x)<h}else{var s=i?a.width:r.width;n=Math.abs(r.x-a.x)<s}return n}function a(e,a,i){var n=a.getChildren().slice();if(!n.length)return!1;var h=!1;i&&n.reverse();for(var s=n.length,o=n[0],u=t(o),l=o.getBBox(),v=1;v<s;v++){var x=n[v],f=x.getBBox();r(e,u,l,f,i)?(x.hide(),h=!0):l=f}return h}function i(){return o}function n(e,t){return a(e,t,!1)}function h(e,t){return a(e,t,!0)}function s(e,a){var i=a.getChildren().slice();if(i.length<=2)return!1;for(var n=!1,h=i.length,s=i[0],o=i[h-1],u=t(s),l=s.getBBox(),v=s,x=1;x<h-1;x++){var f=i[x],g=f.getBBox();r(e,u,l,g)?(f.hide(),n=!0):(l=g,v=f)}return r(e,u,l,o.getBBox())&&(v.hide(),n=!0),n}function o(r,a){var i=a.getChildren().slice();if(i.length<2)return!1;var n=!1,h=i[0],s=h.getBBox(),o=i[1],u=t(h),l=i.length,v=0;if(r){var x=Math.abs(o.attr("y")-h.attr("y"));v=s.height/x}else if(u){x=Math.abs(o.attr("x")-h.attr("x"));v=s.width/x}else{v=(0,e.getMaxLabelWidth)(i)/(x=Math.abs(o.attr("x")-h.attr("x")))}if(v>1){v=Math.ceil(v);for(var f=0;f<l;f++)f%v!=0&&(i[f].hide(),n=!0)}return n}
},{"../../util/label":"J7A3"}],"Qlt4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefault=l,exports.fixedAngle=o,exports.unfixedAngle=f;var t=require("@antv/util"),e=require("../../util/label"),r=require("../../util/matrix"),a=n(require("../../util/theme"));function n(t){return t&&t.__esModule?t:{default:t}}function i(e,a){(0,t.each)(e,function(t){var e=t.attr("x"),n=t.attr("y"),i=(0,r.getMatrixByAngle)({x:e,y:n},a);t.attr("matrix",i)})}function u(t,r,a,n){var u=r.getChildren();if(!u.length)return!1;if(!t&&u.length<2)return!1;var l=(0,e.getMaxLabelWidth)(u),o=!1;t?o=!!a&&l>a:o=l>Math.abs(u[1].attr("x")-u[0].attr("x"));o&&i(u,n(a,l));return o}function l(){return o}function o(t,e,r){return u(t,e,r,function(){return t?a.default.verticalAxisRotate:a.default.horizontalAxisRotate})}function f(t,e,r){return u(t,e,r,function(e,r){if(!e)return t?a.default.verticalAxisRotate:a.default.horizontalAxisRotate;if(t)return-Math.acos(e/r);var n=0;return e>r?n=Math.PI/4:(n=Math.asin(e/r))>Math.PI/4&&(n=Math.PI/4),n})}
},{"@antv/util":"rU8N","../../util/label":"J7A3","../../util/matrix":"Gn7N","../../util/theme":"MLQ3"}],"Ejhz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.autoRotate=exports.autoHide=exports.autoEllipsis=void 0;var e=u(require("./auto-ellipsis"));exports.autoEllipsis=e;var t=u(require("./auto-hide"));exports.autoHide=t;var r=u(require("./auto-rotate"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=u?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}exports.autoRotate=r;
},{"./auto-ellipsis":"BbCU","./auto-hide":"iX9t","./auto-rotate":"Qlt4"}],"gQhQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/matrix-util"),r=require("@antv/util"),i=s(require("./base")),n=o(require("./overlap"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=i?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}function s(t){return t&&t.__esModule?t:{default:t}}var u=function(i){function a(){return null!==i&&i.apply(this,arguments)||this}return(0,t.__extends)(a,i),a.prototype.getDefaultCfg=function(){var e=i.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{type:"line",locationType:"region",start:null,end:null})},a.prototype.getLinePath=function(){var t=this.get("start"),e=this.get("end"),r=[];return r.push(["M",t.x,t.y]),r.push(["L",e.x,e.y]),r},a.prototype.getInnerLayoutBBox=function(){var t=this.get("start"),e=this.get("end"),r=i.prototype.getInnerLayoutBBox.call(this),n=Math.min(t.x,e.x,r.x),a=Math.min(t.y,e.y,r.y),o=Math.max(t.x,e.x,r.maxX),s=Math.max(t.y,e.y,r.maxY);return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},a.prototype.isVertical=function(){var t=this.get("start"),e=this.get("end");return(0,r.isNumberEqual)(t.x,e.x)},a.prototype.isHorizontal=function(){var t=this.get("start"),e=this.get("end");return(0,r.isNumberEqual)(t.y,e.y)},a.prototype.getTickPoint=function(t){var e=this.get("start"),r=this.get("end"),i=r.x-e.x,n=r.y-e.y;return{x:e.x+i*t,y:e.y+n*t}},a.prototype.getSideVector=function(t){var r=this.getAxisVector(),i=e.vec2.normalize([0,0],r),n=this.get("verticalFactor"),a=[i[1],-1*i[0]];return e.vec2.scale([0,0],a,t*n)},a.prototype.getAxisVector=function(){var t=this.get("start"),e=this.get("end");return[e.x-t.x,e.y-t.y]},a.prototype.processOverlap=function(t){var e=this,i=this.isVertical(),n=this.isHorizontal();if(i||n){var a=this.get("label"),o=this.get("title"),s=this.get("verticalLimitLength"),u=a.offset,l=s,c=0,f=0;o&&(c=o.style.fontSize,f=o.spacing),l&&(l=l-u-f-c);var p=this.get("overlapOrder");if((0,r.each)(p,function(r){a[r]&&e.autoProcessOverlap(r,a[r],t,l)}),o){var g=t.getBBox(),h=i?g.width:g.height;(0,r.isNil)(o.offset)&&(o.offset=u+h+f+c/2)}}},a.prototype.autoProcessOverlap=function(t,e,i,a){var o=this,s=this.isVertical(),u=!1,l=n[t];if(!0===e?u=l.getDefault()(s,i,a):(0,r.isFunction)(e)?u=e(s,i,a):l[e]&&(u=l[e](s,i,a)),"autoRotate"===t){if(u){var c=i.getChildren(),f=this.get("verticalFactor");(0,r.each)(c,function(t){if("center"===t.attr("textAlign")){var e=f>0?"end":"start";t.attr("textAlign",e)}})}}else if("autoHide"===t){var p=i.getChildren().slice(0);(0,r.each)(p,function(t){t.get("visible")||(o.get("isRegister")&&o.unregisterElement(t),t.remove())})}},a}(i.default),l=u;exports.default=l;
},{"tslib":"c4AP","@antv/matrix-util":"n7Fk","@antv/util":"rU8N","./base":"oVxL","./overlap":"Ejhz"}],"xvOJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/matrix-util"),r=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return(0,t.__extends)(i,r),i.prototype.getDefaultCfg=function(){var e=r.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},i.prototype.getLinePath=function(){var t=this.get("center"),e=t.x,r=t.y,i=this.get("radius"),n=i,a=this.get("startAngle"),s=this.get("endAngle"),o=[];if(Math.abs(s-a)===2*Math.PI)o=[["M",e,r-n],["A",i,n,0,1,1,e,r+n],["A",i,n,0,1,1,e,r-n],["Z"]];else{var u=this.getCirclePoint(a),l=this.getCirclePoint(s),c=Math.abs(s-a)>Math.PI?1:0,g=a>s?0:1;o=[["M",e,r],["L",u.x,u.y],["A",i,n,0,c,g,l.x,l.y],["L",e,r]]}return o},i.prototype.getTickPoint=function(t){var e=this.get("startAngle"),r=e+(this.get("endAngle")-e)*t;return this.getCirclePoint(r)},i.prototype.getSideVector=function(t,r){var i=this.get("center"),n=[r.x-i.x,r.y-i.y],a=this.get("verticalFactor"),s=e.vec2.length(n);return e.vec2.scale(n,n,a*t/s),n},i.prototype.getAxisVector=function(t){var e=this.get("center"),r=[t.x-e.x,t.y-e.y];return[r[1],-1*r[0]]},i.prototype.getCirclePoint=function(t,e){var r=this.get("center");return e=e||this.get("radius"),{x:r.x+Math.cos(t)*e,y:r.y+Math.sin(t)*e}},i}(r.default),a=n;exports.default=a;
},{"tslib":"c4AP","@antv/matrix-util":"n7Fk","./base":"oVxL"}],"EPti":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Line",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Base",{enumerable:!0,get:function(){return t.default}});var e=u(require("./line")),r=u(require("./circle")),t=u(require("./base"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./line":"gQhQ","./circle":"xvOJ","./base":"oVxL"}],"lErG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=s(require("../abstract/group-component")),r=require("../util/matrix"),n=s(require("../util/theme")),a=require("../util/util");function s(t){return t&&t.__esModule?t:{default:t}}var o=function(i){function s(){return null!==i&&i.apply(this,arguments)||this}return(0,t.__extends)(s,i),s.prototype.getDefaultCfg=function(){var e=i.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:n.default.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:n.default.textColor,textAlign:"center",textBaseline:"middle",fontFamily:n.default.fontFamily}},textBackground:{padding:5,style:{stroke:n.default.lineColor}}}})},s.prototype.renderInner=function(t){this.get("line")&&this.renderLine(t),this.get("text")&&(this.renderText(t),this.renderBackground(t))},s.prototype.renderText=function(i){var n=this.get("text"),a=n.style,s=n.autoRotate,o=n.content;if(!(0,e.isNil)(o)){var l=this.getTextPoint(),d=null;if(s){var u=this.getRotateAngle();d=(0,r.getMatrixByAngle)(l,u)}this.addShape(i,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:(0,t.__assign)((0,t.__assign)((0,t.__assign)({},l),{text:o,matrix:d}),a)})}},s.prototype.renderLine=function(e){var i=this.getLinePath(),r=this.get("line").style;this.addShape(e,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:(0,t.__assign)({path:i},r)})},s.prototype.renderBackground=function(e){var i=this.getElementId("text"),r=e.findById(i),n=this.get("textBackground");if(n&&r){var s=r.getBBox(),o=(0,a.formatPadding)(n.padding),l=n.style;this.addShape(e,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:(0,t.__assign)({x:s.x-o[3],y:s.y-o[0],width:s.width+o[1]+o[3],height:s.height+o[0]+o[2],matrix:r.attr("matrix")},l)}).toBack()}},s}(i.default),l=o;exports.default=l;
},{"tslib":"c4AP","@antv/util":"rU8N","../abstract/group-component":"zvTB","../util/matrix":"Gn7N","../util/theme":"MLQ3","../util/util":"SHBf"}],"ACr7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("../util/util"),n=r(require("./base"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(r,n),r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{type:"line",locationType:"region",start:null,end:null})},r.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.start,n=t.end,r=this.get("text").position,o=Math.atan2(n.y-e.y,n.x-e.x);return"start"===r?o-Math.PI/2:o+Math.PI/2},r.prototype.getTextPoint=function(){var t=this.getLocation(),n=t.start,r=t.end,o=this.get("text"),i=o.position,a=o.offset;return(0,e.getTextPoint)(n,r,i,a)},r.prototype.getLinePath=function(){var t=this.getLocation(),e=t.start,n=t.end;return[["M",e.x,e.y],["L",n.x,n.y]]},r}(n.default),i=o;exports.default=i;
},{"tslib":"c4AP","../util/util":"SHBf","./base":"lErG"}],"pFvj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("../util/util"),n=r(require("./base"));function r(t){return t&&t.__esModule?t:{default:t}}var i=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(r,n),r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:3*Math.PI/2})},r.prototype.getRotateAngle=function(){var t=this.getLocation(),e=t.startAngle,n=t.endAngle;return"start"===this.get("text").position?e+Math.PI/2:n-Math.PI/2},r.prototype.getTextPoint=function(){var t=this.get("text"),n=t.position,r=t.offset,i=this.getLocation(),a=i.center,o=i.radius,s=i.startAngle,l=i.endAngle,u="start"===n?s:l,g=this.getRotateAngle()-Math.PI,c=(0,e.getCirclePoint)(a,o,u),h=Math.cos(g)*r,p=Math.sin(g)*r;return{x:c.x+h,y:c.y+p}},r.prototype.getLinePath=function(){var t=this.getLocation(),n=t.center,r=t.radius,i=t.startAngle,a=t.endAngle,o=null;if(a-i==2*Math.PI){var s=n.x,l=n.y;o=[["M",s,l-r],["A",r,r,0,1,1,s,l+r],["A",r,r,0,1,1,s,l-r],["Z"]]}else{var u=(0,e.getCirclePoint)(n,r,i),g=(0,e.getCirclePoint)(n,r,a),c=Math.abs(a-i)>Math.PI?1:0,h=i>a?0:1;o=[["M",u.x,u.y],["A",r,r,0,c,h,g.x,g.y]]}return o},r}(n.default),a=i;exports.default=a;
},{"tslib":"c4AP","../util/util":"SHBf","./base":"lErG"}],"oANJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/dom-util"),i=require("@antv/util"),n=require("../util/util"),o=r(require("./component"));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,t.__extends)(r,o),r.prototype.getDefaultCfg=function(){var e=o.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},r.prototype.getContainer=function(){return this.get("container")},r.prototype.show=function(){this.get("container").style.display="",this.set("visible",!0)},r.prototype.hide=function(){this.get("container").style.display="none",this.set("visible",!1)},r.prototype.setCapture=function(t){var e=t?"auto":"none";this.getContainer().style.pointerEvents=e,this.set("capture",t)},r.prototype.getBBox=function(){var t=this.getContainer(),e=parseFloat(t.style.left)||0,i=parseFloat(t.style.top)||0;return(0,n.createBBox)(e,i,t.clientWidth,t.clientHeight)},r.prototype.clear=function(){var t=this.get("container");(0,n.clearDom)(t)},r.prototype.destroy=function(){this.removeEvent(),this.removeDom(),o.prototype.destroy.call(this)},r.prototype.init=function(){o.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},r.prototype.initCapture=function(){this.setCapture(this.get("capture"))},r.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},r.prototype.initDom=function(){},r.prototype.initContainer=function(){var t=this.get("container");if((0,i.isNil)(t)){t=this.createDom();var e=this.get("parent");(0,i.isString)(e)&&(e=document.getElementById(e),this.set("parent",e)),e.appendChild(t),this.set("container",t)}else(0,i.isString)(t)&&(t=document.getElementById(t),this.set("container",t));this.get("parent")||this.set("parent",t.parentNode)},r.prototype.resetStyles=function(){var t=this.get("domStyles"),e=this.get("defaultStyles");t=t?(0,i.deepMix)({},e,t):e,this.set("domStyles",t)},r.prototype.applyStyles=function(){var t=this.get("domStyles");if(t){var i=this.getContainer();this.applyChildrenStyles(i,t);var o=this.get("containerClassName");if(o&&(0,n.hasClass)(i,o)){var r=t[o];(0,e.modifyCSS)(i,r)}}},r.prototype.applyChildrenStyles=function(t,n){(0,i.each)(n,function(n,o){var r=t.getElementsByClassName(o);(0,i.each)(r,function(t){(0,e.modifyCSS)(t,n)})})},r.prototype.applyStyle=function(t,i){var n=this.get("domStyles");(0,e.modifyCSS)(i,n[t])},r.prototype.createDom=function(){var t=this.get("containerTpl");return(0,e.createDom)(t)},r.prototype.initEvent=function(){},r.prototype.removeDom=function(){var t=this.get("container");t&&t.parentNode.removeChild(t)},r.prototype.removeEvent=function(){},r.prototype.updateInner=function(t){(0,i.hasKey)(t,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},r.prototype.resetPosition=function(){},r}(o.default),a=s;exports.default=a;
},{"tslib":"c4AP","@antv/dom-util":"HfmF","@antv/util":"rU8N","../util/util":"SHBf","./component":"rbyY"}],"P1jY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CROSSHAIR_TEXT=exports.CROSSHAIR_LINE=exports.CONTAINER_CLASS=void 0;var e="g2-crosshair";exports.CONTAINER_CLASS=e;var r=e+"-line";exports.CROSSHAIR_LINE=r;var t=e+"-text";exports.CROSSHAIR_TEXT=t;
},{}],"K4ms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=u(require("../util/theme")),r=n(require("./css-const"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(r,u,i):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function u(e){return e&&e.__esModule?e:{default:e}}var i=((e={})[""+r.CONTAINER_CLASS]={position:"relative"},e[""+r.CROSSHAIR_LINE]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},e[""+r.CROSSHAIR_TEXT]={position:"absolute",color:t.default.textColor,fontFamily:t.default.fontFamily},e);exports.default=i;
},{"../util/theme":"MLQ3","./css-const":"P1jY"}],"f1lP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/dom-util"),i=require("@antv/util"),r=require("../util/util"),n=p(require("../abstract/html-component")),o=l(require("./css-const")),s=p(require("./html-theme"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=r?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}function p(t){return t&&t.__esModule?t:{default:t}}var u=function(n){function a(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(a,n),a.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+o.CONTAINER_CLASS+'"></div>',crosshairTpl:'<div class="'+o.CROSSHAIR_LINE+'"></div>',textTpl:'<span class="'+o.CROSSHAIR_TEXT+'">{content}</span>',domStyles:null,containerClassName:o.CONTAINER_CLASS,defaultStyles:s.default,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},a.prototype.render=function(){this.resetText(),this.resetPosition()},a.prototype.initCrossHair=function(){var t=this.getContainer(),i=this.get("crosshairTpl"),r=(0,e.createDom)(i);t.appendChild(r),this.applyStyle(o.CROSSHAIR_LINE,r),this.set("crosshairEl",r)},a.prototype.getTextPoint=function(){var t=this.getLocation(),e=t.start,i=t.end,n=this.get("text"),o=n.position,s=n.offset;return(0,r.getTextPoint)(e,i,o,s)},a.prototype.resetText=function(){var t=this.get("text"),r=this.get("textEl");if(t){var n=t.content;if(!r){var s=this.getContainer(),a=(0,i.substitute)(this.get("textTpl"),t);r=(0,e.createDom)(a),s.appendChild(r),this.applyStyle(o.CROSSHAIR_TEXT,r),this.set("textEl",r)}r.innerHTML=n}else r&&r.remove()},a.prototype.isVertical=function(t,e){return t.x===e.x},a.prototype.resetPosition=function(){var t=this.get("crosshairEl");t||(this.initCrossHair(),t=this.get("crosshairEl"));var i=this.get("start"),n=this.get("end"),o=Math.min(i.x,n.x),s=Math.min(i.y,n.y);this.isVertical(i,n)?(0,e.modifyCSS)(t,{width:"1px",height:(0,r.toPx)(Math.abs(n.y-i.y))}):(0,e.modifyCSS)(t,{height:"1px",width:(0,r.toPx)(Math.abs(n.x-i.x))}),(0,e.modifyCSS)(t,{top:(0,r.toPx)(s),left:(0,r.toPx)(o)}),this.alignText()},a.prototype.alignText=function(){var t=this.get("textEl");if(t){var i=this.get("text").align,n=t.clientWidth,o=this.getTextPoint();switch(i){case"center":o.x=o.x-n/2;break;case"right":o.x=o.x-n}(0,e.modifyCSS)(t,{top:(0,r.toPx)(o.y),left:(0,r.toPx)(o.x)})}},a.prototype.updateInner=function(t){(0,i.hasKey)(t,"text")&&this.resetText(),n.prototype.updateInner.call(this,t)},a}(n.default),c=u;exports.default=c;
},{"tslib":"c4AP","@antv/dom-util":"HfmF","@antv/util":"rU8N","../util/util":"SHBf","../abstract/html-component":"oANJ","./css-const":"P1jY","./html-theme":"K4ms"}],"hTRD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Line",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Base",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Html",{enumerable:!0,get:function(){return u.default}});var e=n(require("./line")),r=n(require("./circle")),t=n(require("./base")),u=n(require("./html"));function n(e){return e&&e.__esModule?e:{default:e}}
},{"./line":"ACr7","./circle":"pFvj","./base":"lErG","./html":"f1lP"}],"ZbqT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=n(require("../abstract/group-component")),r=n(require("../util/theme"));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return(0,t.__extends)(n,i),n.prototype.getDefaultCfg=function(){var e=i.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:r.default.lineColor}}}})},n.prototype.getLineType=function(){return(this.get("line")||this.get("defaultCfg").line).type},n.prototype.renderInner=function(t){this.drawGrid(t)},n.prototype.getAlternatePath=function(t,e){var i=this.getGridPath(t),r=e.slice(0).reverse(),n=this.getGridPath(r,!0);return this.get("closed")?i=i.concat(n):(n[0][0]="L",(i=i.concat(n)).push(["Z"])),i},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(t){var i=this,r=this.get("line"),n=this.get("items"),a=this.get("alternateColor"),o=null;(0,e.each)(n,function(n,l){var s=n.id||l;if(r){var u=i.getPathStyle(),p=i.getElementId("line-"+s),d=i.getGridPath(n.points);i.addShape(t,{type:"path",name:"grid-line",id:p,attrs:(0,e.mix)({path:d},u)})}if(a&&l>0){var g=i.getElementId("region-"+s),h=l%2==0;if((0,e.isString)(a))h&&i.drawAlternateRegion(g,t,o.points,n.points,a);else{var f=h?a[1]:a[0];i.drawAlternateRegion(g,t,o.points,n.points,f)}}o=n})},n.prototype.drawAlternateRegion=function(t,e,i,r,n){var a=this.getAlternatePath(i,r);this.addShape(e,{type:"path",id:t,name:"grid-region",attrs:{path:a,fill:n}})},n}(i.default),o=a;exports.default=o;
},{"tslib":"c4AP","@antv/util":"rU8N","../abstract/group-component":"zvTB","../util/theme":"MLQ3"}],"zMyG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),r=u(require("./base"));function u(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,u){var n=r-e,s=u-t;return Math.sqrt(n*n+s*s)}var s=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return(0,e.__extends)(u,r),u.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return(0,e.__assign)((0,e.__assign)({},t),{type:"circle",center:null,closed:!0})},u.prototype.getGridPath=function(e,r){var u=this.getLineType(),s=this.get("closed"),i=[];if(e.length)if("circle"===u){var l=this.get("center"),a=e[0],o=n(l.x,l.y,a.x,a.y),p=r?0:1;s?(i.push(["M",l.x,l.y-o]),i.push(["A",o,o,0,0,p,l.x,l.y+o]),i.push(["A",o,o,0,0,p,l.x,l.y-o]),i.push(["Z"])):(0,t.each)(e,function(e,t){0===t?i.push(["M",e.x,e.y]):i.push(["A",o,o,0,0,p,e.x,e.y])})}else(0,t.each)(e,function(e,t){0===t?i.push(["M",e.x,e.y]):i.push(["L",e.x,e.y])}),s&&i.push(["Z"]);return i},u}(r.default),i=s;exports.default=i;
},{"tslib":"c4AP","@antv/util":"rU8N","./base":"ZbqT"}],"iqP6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),r=u(require("./base"));function u(e){return e&&e.__esModule?e:{default:e}}var n=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return(0,e.__extends)(u,r),u.prototype.getDefaultCfg=function(){var t=r.prototype.getDefaultCfg.call(this);return(0,e.__assign)((0,e.__assign)({},t),{type:"line"})},u.prototype.getGridPath=function(e){var r=[];return(0,t.each)(e,function(e,t){0===t?r.push(["M",e.x,e.y]):r.push(["L",e.x,e.y])}),r},u}(r.default),i=n;exports.default=i;
},{"tslib":"c4AP","@antv/util":"rU8N","./base":"ZbqT"}],"dhkX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Base",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Line",{enumerable:!0,get:function(){return t.default}});var e=u(require("./base")),r=u(require("./circle")),t=u(require("./line"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./base":"ZbqT","./circle":"zMyG","./line":"iqP6"}],"Tl2J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=o(require("../abstract/group-component")),i=require("../util/util");function o(t){return t&&t.__esModule?t:{default:t}}var n=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(o,e),o.prototype.getDefaultCfg=function(){var i=e.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},i),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},o.prototype.getLayoutBBox=function(){var t=e.prototype.getLayoutBBox.call(this),o=this.get("x"),n=this.get("y"),r=this.get("offsetX"),s=this.get("offsetY"),a=this.get("maxWidth"),u=this.get("maxHeight"),g=o+r,h=n+s,d=t.maxX-g,p=t.maxY-h;return a&&(d=Math.min(d,a)),u&&(p=Math.min(p,u)),(0,i.createBBox)(g,h,d,p)},o.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetLocation()},o.prototype.resetLocation=function(){var t=this.get("x"),e=this.get("y"),i=this.get("offsetX"),o=this.get("offsetY");this.moveElementTo(this.get("group"),{x:t+i,y:e+o})},o.prototype.applyOffset=function(){this.resetLocation()},o.prototype.getDrawPoint=function(){return this.get("currentPoint")},o.prototype.setDrawPoint=function(t){return this.set("currentPoint",t)},o.prototype.renderInner=function(t){this.resetDraw(),this.get("title")&&this.drawTitle(t),this.drawLegendContent(t),this.get("background")&&this.drawBackground(t)},o.prototype.drawBackground=function(e){var o=this.get("background"),n=e.getBBox(),r=(0,i.formatPadding)(o.padding),s=(0,t.__assign)({x:0,y:0,width:n.width+r[1]+r[3],height:n.height+r[0]+r[2]},o.style);this.addShape(e,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:s}).toBack()},o.prototype.drawTitle=function(e){var i=this.get("currentPoint"),o=this.get("title"),n=o.spacing,r=o.style,s=o.text,a=this.addShape(e,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:(0,t.__assign)({text:s,x:i.x,y:i.y},r)}).getBBox();this.set("currentPoint",{x:i.x,y:a.maxY+n})},o.prototype.resetDraw=function(){var t=this.get("background"),e={x:0,y:0};if(t){var o=(0,i.formatPadding)(t.padding);e.x=o[3],e.y=o[0]}this.set("currentPoint",e)},o}(e.default),r=n;exports.default=r;
},{"tslib":"c4AP","../abstract/group-component":"zvTB","../util/util":"SHBf"}],"KCqH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("../util/label"),a=require("../util/matrix"),r=require("../util/state"),n=s(require("../util/theme")),o=s(require("./base"));function s(t){return t&&t.__esModule?t:{default:t}}var g=function(o){function s(){var t=null!==o&&o.apply(this,arguments)||this;return t.currentPageIndex=1,t.totalPagesCnt=1,t.pageWidth=0,t.pageHeight=0,t.startX=0,t.startY=0,t.onNavigationBack=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex>1){t.currentPageIndex-=1,t.updateNavigation();var i=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:i},100):e.attr({matrix:i})}},t.onNavigationAfter=function(){var e=t.getElementByLocalId("item-group");if(t.currentPageIndex<t.totalPagesCnt){t.currentPageIndex+=1,t.updateNavigation();var i=t.getCurrentNavigationMatrix();t.get("animate")?e.animate({matrix:i},100):e.attr({matrix:i})}},t}return(0,t.__extends)(s,o),s.prototype.getDefaultCfg=function(){var e=o.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"legend",type:"category",itemSpacing:24,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:n.default.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:n.default.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:n.default.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:n.default.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:n.default.uncheckedColor},markerStyle:{fill:n.default.uncheckedColor,stroke:n.default.uncheckedColor}},inactive:{nameStyle:{fill:n.default.uncheckedColor},markerStyle:{opacity:.2}}}}})},s.prototype.isList=function(){return!0},s.prototype.getItems=function(){return this.get("items")},s.prototype.setItems=function(t){this.update({items:t})},s.prototype.updateItem=function(t,i){(0,e.mix)(t,i),this.clear(),this.render()},s.prototype.clearItems=function(){var t=this.getElementByLocalId("item-group");t&&t.clear()},s.prototype.setItemState=function(t,e,i){t[e]=i;var a=this.getElementByLocalId("item-"+t.id);if(a){var r=this.getItems().indexOf(t),n=this.createOffScreenGroup(),o=this.drawItem(t,r,this.getItemHeight(),n);this.updateElements(o,a),this.clearUpdateStatus(a)}},s.prototype.hasState=function(t,e){return!!t[e]},s.prototype.getItemStates=function(t){var i=this.get("itemStates"),a=[];return(0,e.each)(i,function(e,i){t[i]&&a.push(i)}),a},s.prototype.clearItemsState=function(t){var i=this,a=this.getItemsByState(t);(0,e.each)(a,function(e){i.setItemState(e,t,!1)})},s.prototype.getItemsByState=function(t){var i=this,a=this.getItems();return(0,e.filter)(a,function(e){return i.hasState(e,t)})},s.prototype.drawLegendContent=function(t){this.processItems(),this.drawItems(t)},s.prototype.processItems=function(){var t=this.get("items");(0,e.each)(t,function(t){t.id||(t.id=t.name)})},s.prototype.drawItems=function(t){var i=this,a=this.addGroup(t,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),r=this.addGroup(a,{id:this.getElementId("item-group"),name:"legend-item-group"}),n=this.getItemHeight(),o=this.get("itemWidth"),s=this.get("itemSpacing"),g=this.get("currentPoint"),h=g.x,l=g.y,d=this.get("layout"),m=this.get("items"),u=!1,p=0,c=this.get("maxWidth"),x=this.get("maxHeight");(0,e.each)(m,function(t,e){var a=i.drawItem(t,e,n,r),m=a.getBBox(),y=o||m.width;y>p&&(p=y),"horizontal"===d?(c&&c<g.x+y-h&&(u=!0,g.x=h,g.y+=n),i.moveElementTo(a,g),g.x+=y+s):(x&&x<g.y+n-l&&(u=!0,g.x+=p+s,g.y=l,p=0),i.moveElementTo(a,g),g.y+=n)}),u&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=h,this.startY=l,this.adjustNavigation(t,r))},s.prototype.getItemHeight=function(){var t=this.get("itemHeight");if(!t){var e=this.get("itemName");e&&(t=e.style.fontSize+8)}return t},s.prototype.drawMarker=function(i,a,r,n){var o=(0,t.__assign)((0,t.__assign)((0,t.__assign)({x:0,y:n/2},a.style),{symbol:(0,e.get)(r.marker,"symbol","circle")}),(0,e.get)(r.marker,"style",{})),s=this.addShape(i,{type:"marker",id:this.getElementId("item-"+r.id+"-marker"),name:"legend-item-marker",attrs:o}),g=s.getBBox();s.attr("x",g.width/2);var h=s.attr(),l=h.stroke,d=h.fill;return l&&s.set("isStroke",!0),d&&s.set("isFill",!0),s},s.prototype.drawItemText=function(e,i,a,r,n,o,s){var g=a.formatter,h=(0,t.__assign)({x:o,y:n/2,text:g?g(r[i],r,s):r[i]},a.style);return this.addShape(e,{type:"text",id:this.getElementId("item-"+r.id+"-"+i),name:"legend-item-"+i,attrs:h})},s.prototype.drawItem=function(a,r,n,o){var s="item-"+a.id,g=this.addGroup(o,{name:"legend-item-container",id:this.getElementId("item-container-"+s),delegateObject:{item:a,index:r}}),h=this.addGroup(g,{name:"legend-item",id:this.getElementId(s),delegateObject:{item:a,index:r}}),l=this.get("marker"),d=this.get("itemName"),m=this.get("itemValue"),u=this.get("itemBackground"),p=this.getLimitItemWidth(),c=0;l&&(c=this.drawMarker(h,l,a,n).getBBox().maxX+l.spacing);if(d){var x=this.drawItemText(h,"name",d,a,n,c,r);p&&(0,i.ellipsisLabel)(!0,x,(0,e.clamp)(p-c,0,p)),c=x.getBBox().maxX+d.spacing}if(m){var y=this.drawItemText(h,"value",m,a,n,c,r);p&&(m.alignRight?(y.attr({textAlign:"right",x:p}),(0,i.ellipsisLabel)(!0,y,(0,e.clamp)(p-c,0,p),"head")):(0,i.ellipsisLabel)(!0,y,(0,e.clamp)(p-c,0,p)))}if(u){var f=h.getBBox();this.addShape(h,{type:"rect",name:"legend-item-background",id:this.getElementId(s+"-background"),attrs:(0,t.__assign)({x:0,y:0,width:f.width,height:n},u.style)}).toBack()}return this.applyItemStates(a,h),h},s.prototype.adjustNavigation=function(t,i){var a=this,r=this.startX,n=this.startY,o=this.get("layout"),s=i.findAll(function(t){return"legend-item"===t.get("name")}),g=this.get("maxWidth"),h=this.get("maxHeight"),l=this.get("itemWidth"),d=this.get("itemSpacing"),m=this.getItemHeight(),u=this.drawNavigation(t,o,"00/00",12),p=u.getBBox(),c={x:r,y:n},x=1,y=0,f=0,v=0;if("horizontal"===o)this.pageHeight=m,(0,e.each)(s,function(t){var e=t.getBBox(),i=l||e.width;(y&&y<c.x+i+d||g<c.x+i+d+p.width)&&(1===x&&(y=c.x+d,a.pageWidth=y,a.moveElementTo(u,{x:g-d-p.width-p.minX,y:c.y+m/2-p.height/2-p.minY})),x+=1,c.x=r,c.y+=m),a.moveElementTo(t,c),t.getParent().setClip({type:"rect",attrs:{x:c.x,y:c.y,width:i+d,height:m}}),c.x+=i+d});else{(0,e.each)(s,function(t){var e=t.getBBox();e.width>f&&(f=e.width)}),v=f,f+=d,g&&(f=Math.min(g,f),v=Math.min(g,v)),this.pageWidth=f,this.pageHeight=h-Math.max(p.height,m);var I=Math.floor(this.pageHeight/m);(0,e.each)(s,function(t,e){0!==e&&e%I==0&&(x+=1,c.x+=f,c.y=n),a.moveElementTo(t,c),t.getParent().setClip({type:"rect",attrs:{x:c.x,y:c.y,width:f,height:m}}),c.y+=m}),this.totalPagesCnt=x,this.moveElementTo(u,{x:r+v/2-p.width/2-p.minX,y:h-p.height-p.minY})}this.pageHeight&&this.pageWidth&&i.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=x,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(u),i.attr("matrix",this.getCurrentNavigationMatrix())},s.prototype.drawNavigation=function(t,e,i,a){var r={x:0,y:0},n=this.addGroup(t,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),o=this.drawArrow(n,r,"navigation-arrow-left","horizontal"===e?"up":"left",a);o.on("click",this.onNavigationBack);var s=o.getBBox();r.x+=s.width+2;var g=this.addShape(n,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:r.x,y:r.y+a/2,text:i,fontSize:12,fill:"#ccc",textBaseline:"middle"}}).getBBox();return r.x+=g.width+2,this.drawArrow(n,r,"navigation-arrow-right","horizontal"===e?"down":"right",a).on("click",this.onNavigationAfter),n},s.prototype.updateNavigation=function(t){var e=this.currentPageIndex+"/"+this.totalPagesCnt,i=t?t.getChildren()[1]:this.getElementByLocalId("navigation-text"),a=t?t.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),r=t?t.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),n=i.getBBox();i.attr("text",e);var o=i.getBBox();i.attr("x",i.attr("x")-(o.width-n.width)/2),a.attr("opacity",1===this.currentPageIndex?.45:1),a.attr("cursor",1===this.currentPageIndex?"not-allowed":"pointer"),r.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),r.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},s.prototype.drawArrow=function(t,e,i,r,n){var o=e.x,s=e.y,g={right:90*Math.PI/180,left:270*Math.PI/180,up:0,down:180*Math.PI/180},h=this.addShape(t,{type:"path",id:this.getElementId(i),name:i,attrs:{path:[["M",o+n/2,s],["L",o,s+n],["L",o+n,s+n],["Z"]],fill:"#000",cursor:"pointer"}});return h.attr("matrix",(0,a.getMatrixByAngle)({x:o+n/2,y:s+n/2},g[r])),h},s.prototype.getCurrentNavigationMatrix=function(){var t=this.currentPageIndex,e=this.pageWidth,i=this.pageHeight,r="horizontal"===this.get("layout")?{x:0,y:i*(1-t)}:{x:e*(1-t),y:0};return(0,a.getMatrixByTranslate)(r)},s.prototype.applyItemStates=function(t,i){if(this.getItemStates(t).length>0){var a=i.getChildren(),n=this.get("itemStates");(0,e.each)(a,function(e){var i=e.get("name").split("-")[2],a=(0,r.getStatesStyle)(t,i,n);a&&(e.attr(a),"marker"!==i||e.get("isStroke")&&e.get("isFill")||(e.get("isStroke")&&e.attr("fill",null),e.get("isFill")&&e.attr("stroke",null)))})}},s.prototype.getLimitItemWidth=function(){var t=this.get("itemWidth"),e=this.get("maxItemWidth");return e?t&&(e=t<=e?t:e):t&&(e=t),e},s}(o.default),h=g;exports.default=h;
},{"tslib":"c4AP","@antv/util":"rU8N","../util/label":"J7A3","../util/matrix":"Gn7N","../util/state":"WAf0","../util/theme":"MLQ3","./base":"Tl2J"}],"r7bo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=r(require("../util/theme")),a=require("../util/util"),n=r(require("./base"));function r(t){return t&&t.__esModule?t:{default:t}}var l=1.4,s=.4,h=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(r,n),r.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:i.default.textColor,textBaseline:"middle",fontFamily:i.default.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:i.default.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},r.prototype.isSlider=function(){return!0},r.prototype.getValue=function(){return this.getCurrentValue()},r.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},r.prototype.setRange=function(t,e){this.update({min:t,max:e})},r.prototype.setValue=function(t){var e=this.getValue();this.set("value",t);var i=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(i),this.delegateEmit("valuechanged",{originValue:e,value:t})},r.prototype.initEvent=function(){var t=this.get("group");this.bindSliderEvent(t),this.bindRailEvent(t),this.bindTrackEvent(t)},r.prototype.drawLegendContent=function(t){this.drawRail(t),this.drawLabels(t),this.fixedElements(t),this.resetTrack(t),this.resetTrackClip(t),this.get("slidable")&&this.resetHandlers(t)},r.prototype.bindSliderEvent=function(t){this.bindHandlersEvent(t)},r.prototype.bindHandlersEvent=function(t){var e=this;t.on("legend-handler-min:drag",function(t){var i=e.getValueByCanvasPoint(t.x,t.y),a=e.getCurrentValue()[1];a<i&&(a=i),e.setValue([i,a])}),t.on("legend-handler-max:drag",function(t){var i=e.getValueByCanvasPoint(t.x,t.y),a=e.getCurrentValue()[0];a>i&&(a=i),e.setValue([a,i])})},r.prototype.bindRailEvent=function(t){},r.prototype.bindTrackEvent=function(t){var e=this,i=null;t.on("legend-track:dragstart",function(t){i={x:t.x,y:t.y}}),t.on("legend-track:drag",function(t){if(i){var a=e.getValueByCanvasPoint(i.x,i.y),n=e.getValueByCanvasPoint(t.x,t.y),r=e.getCurrentValue(),l=r[1]-r[0],s=e.getRange(),h=n-a;h<0?r[0]+h>s.min?e.setValue([r[0]+h,r[1]+h]):e.setValue([s.min,s.min+l]):h>0&&(h>0&&r[1]+h<s.max?e.setValue([r[0]+h,r[1]+h]):e.setValue([s.max-l,s.max])),i={x:t.x,y:t.y}}}),t.on("legend-track:dragend",function(t){i=null})},r.prototype.drawLabels=function(t){this.drawLabel("min",t),this.drawLabel("max",t)},r.prototype.drawLabel=function(e,i){var a=this.get("label"),n=a.style,r=a.align,l=this.get(e),s=this.getLabelAlignAttrs(e,r),h="label-"+e;this.addShape(i,{type:"text",id:this.getElementId(h),name:"legend-label-"+e,attrs:(0,t.__assign)((0,t.__assign)({x:0,y:0,text:l},n),s)})},r.prototype.getLabelAlignAttrs=function(t,e){var i="center",a="middle";return this.isVertical()?(i="start",a="rail"!==e?"min"===t?"top":"bottom":"top"):"rail"!==e?(a="top",i="min"===t?"start":"end"):(i="start",a="middle"),{textAlign:i,textBaseline:a}},r.prototype.getRailPath=function(t,e,i,a){var n=this.get("rail"),r=n.size,l=n.defaultLength,s=n.type,h=this.isVertical(),o=i,g=a;o||(o=h?r:l),g||(g=h?l:r);var u=[];return"color"===s?(u.push(["M",t,e]),u.push(["L",t+o,e]),u.push(["L",t+o,e+g]),u.push(["L",t,e+g]),u.push(["Z"])):(u.push(["M",t+o,e]),u.push(["L",t+o,e+g]),u.push(["L",t,e+g]),u.push(["Z"])),u},r.prototype.drawRail=function(e){var i=this.get("rail").style;this.addShape(e,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:(0,t.__assign)({path:this.getRailPath(0,0)},i)})},r.prototype.getTrackColor=function(t){var e,i=t.length;if(!i)return null;if(1===i)return t[0];e=this.isVertical()?"l(90)":"l(0)";for(var a=0;a<i;a++){e+=" "+a/(i-1)+":"+t[a]}return e},r.prototype.getTrackPath=function(t){var i=this.getRailShape(t).attr("path");return(0,e.clone)(i)},r.prototype.getClipTrackAttrs=function(t){var e,i,a,n,r=this.getCurrentValue(),l=r[0],s=r[1],h=this.getRailBBox(t),o=this.getPointByValue(l,t),g=this.getPointByValue(s,t);return this.isVertical()?(e=h.minX,i=o.y,a=h.width,n=g.y-o.y):(e=o.x,i=h.minY,a=g.x-o.x,n=h.height),{x:e,y:i,width:a,height:n}},r.prototype.getTrackAttrs=function(t){var i=this.get("track"),a=this.get("colors"),n=this.getTrackPath(t);return(0,e.mix)({path:n,fill:this.getTrackColor(a)},i.style)},r.prototype.resetTrackClip=function(t){var e=t||this.get("group"),i=this.getElementId("track"),a=e.findById(i),n=a.getClip(),r=this.getClipTrackAttrs(t);n?n.attr(r):a.setClip({type:"rect",attrs:r})},r.prototype.resetTrack=function(t){var e=this.getElementId("track"),i=t.findById(e),a=this.getTrackAttrs(t);i?i.attr(a):this.addShape(t,{type:"path",id:e,draggable:this.get("slidable"),name:"legend-track",attrs:a})},r.prototype.getPointByValue=function(t,e){var i=this.getRange(),n=i.min,r=(t-n)/(i.max-n),l=this.getRailBBox(e),s={x:0,y:0};return this.isVertical()?(s.x=l.minX+l.width/2,s.y=(0,a.getValueByPercent)(l.minY,l.maxY,r)):(s.x=(0,a.getValueByPercent)(l.minX,l.maxX,r),s.y=l.minY+l.height/2),s},r.prototype.getRailShape=function(t){return(t||this.get("group")).findById(this.getElementId("rail"))},r.prototype.getRailBBox=function(t){return this.getRailShape(t).getBBox()},r.prototype.getRailCanvasBBox=function(){return this.get("group").findById(this.getElementId("rail")).getCanvasBBox()},r.prototype.isVertical=function(){return"vertical"===this.get("layout")},r.prototype.getValueByCanvasPoint=function(t,e){var i,n=this.getRange(),r=n.min,l=n.max,s=this.getRailCanvasBBox(),h=this.isVertical(),o=this.get("step");i=h?(e-s.minY)/s.height:(t-s.minX)/s.width;var g=(0,a.getValueByPercent)(r,l,i);o&&(g=r+Math.round((g-r)/o)*o);return g>l&&(g=l),g<r&&(g=r),g},r.prototype.getCurrentValue=function(){var t=this.get("value");return t||(t=[this.get("min"),this.get("max")]),t},r.prototype.resetHandlers=function(t){var e=this.getCurrentValue(),i=e[0],a=e[1];this.resetHandler(t,"min",i),this.resetHandler(t,"max",a)},r.prototype.getHandlerPath=function(t,e){var i=this.isVertical(),a=[],n=t.size,r=e.x,h=e.y,o=n*l,g=n/2,u=n/6;if(i){var p=r+o*s;a.push(["M",r,h]),a.push(["L",p,h+g]),a.push(["L",r+o,h+g]),a.push(["L",r+o,h-g]),a.push(["L",p,h-g]),a.push(["Z"]),a.push(["M",p,h+u]),a.push(["L",r+o-2,h+u]),a.push(["M",p,h-u]),a.push(["L",r+o-2,h-u])}else{var d=h+o*s;a.push(["M",r,h]),a.push(["L",r-g,d]),a.push(["L",r-g,h+o]),a.push(["L",r+g,h+o]),a.push(["L",r+g,d]),a.push(["Z"]),a.push(["M",r-u,d]),a.push(["L",r-u,h+o-2]),a.push(["M",r+u,d]),a.push(["L",r+u,h+o-2])}return a},r.prototype.resetHandler=function(e,i,a){var n=this.getPointByValue(a,e),r=this.get("handler"),l=this.getHandlerPath(r,n),s=this.getElementId("handler-"+i),h=e.findById(s),o=this.isVertical();h?h.attr("path",l):this.addShape(e,{type:"path",name:"legend-handler-"+i,draggable:!0,id:s,attrs:(0,t.__assign)((0,t.__assign)({path:l},r.style),{cursor:o?"ns-resize":"ew-resize"})})},r.prototype.fixedElements=function(t){var e=t.findById(this.getElementId("rail")),i=t.findById(this.getElementId("label-min")),a=t.findById(this.getElementId("label-max")),n=this.getDrawPoint();this.isVertical()?this.fixedVertail(i,a,e,n):this.fixedHorizontal(i,a,e,n)},r.prototype.fitRailLength=function(t,i,a,n){var r=this.isVertical()?"height":"width",l=this.get("label"),s=l.align,h=l.spacing,o=this.get("max"+(0,e.upperFirst)(r));if(o){var g=("rail"===s?a[r]+t[r]+i[r]+2*h:a[r])-o;g>0&&this.changeRailLength(n,r,a[r]-g)}},r.prototype.changeRailLength=function(t,e,i){var a,n=t.getBBox();a="height"===e?this.getRailPath(n.x,n.y,n.width,i):this.getRailPath(n.x,n.y,i,n.height),t.attr("path",a)},r.prototype.changeRailPosition=function(t,e,i){var a=t.getBBox(),n=this.getRailPath(e,i,a.width,a.height);t.attr("path",n)},r.prototype.fixedHorizontal=function(t,e,i,a){var n=this.get("label"),r=n.align,l=n.spacing,s=i.getBBox(),h=t.getBBox(),o=e.getBBox(),g=s.height;this.fitRailLength(h,o,s,i),s=i.getBBox(),"rail"===r?(t.attr({x:a.x,y:a.y+g/2}),this.changeRailPosition(i,a.x+h.width+l,a.y),e.attr({x:a.x+h.width+s.width+2*l,y:a.y+g/2})):"top"===r?(t.attr({x:a.x,y:a.y}),e.attr({x:a.x+s.width,y:a.y}),this.changeRailPosition(i,a.x,a.y+h.height+l)):(this.changeRailPosition(i,a.x,a.y),t.attr({x:a.x,y:a.y+s.height+l}),e.attr({x:a.x+s.width,y:a.y+s.height+l}))},r.prototype.fixedVertail=function(t,e,i,a){var n=this.get("label"),r=n.align,l=n.spacing,s=i.getBBox(),h=t.getBBox(),o=e.getBBox();if(this.fitRailLength(h,o,s,i),s=i.getBBox(),"rail"===r)t.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x,a.y+h.height+l),e.attr({x:a.x,y:a.y+h.height+s.height+2*l});else if("right"===r)t.attr({x:a.x+s.width+l,y:a.y}),this.changeRailPosition(i,a.x,a.y),e.attr({x:a.x+s.width+l,y:a.y+s.height});else{var g=Math.max(h.width,o.width);t.attr({x:a.x,y:a.y}),this.changeRailPosition(i,a.x+g+l,a.y),e.attr({x:a.x,y:a.y+s.height})}},r}(n.default),o=h;exports.default=o;
},{"tslib":"c4AP","@antv/util":"rU8N","../util/theme":"MLQ3","../util/util":"SHBf","./base":"Tl2J"}],"BzfW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Category",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Continuous",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Base",{enumerable:!0,get:function(){return t.default}});var e=u(require("./category")),r=u(require("./continuous")),t=u(require("./base"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./category":"KCqH","./continuous":"r7bo","./base":"Tl2J"}],"DG0z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CROSSHAIR_Y=exports.CROSSHAIR_X=exports.NAME_CLASS=exports.VALUE_CLASS=exports.MARKER_CLASS=exports.LIST_ITEM_CLASS=exports.LIST_CLASS=exports.TITLE_CLASS=exports.CONTAINER_CLASS=void 0;var t="g2-tooltip";exports.CONTAINER_CLASS=t;var o="g2-tooltip-title";exports.TITLE_CLASS=o;var S="g2-tooltip-list";exports.LIST_CLASS=S;var r="g2-tooltip-list-item";exports.LIST_ITEM_CLASS=r;var e="g2-tooltip-marker";exports.MARKER_CLASS=e;var p="g2-tooltip-value";exports.VALUE_CLASS=p;var s="g2-tooltip-name";exports.NAME_CLASS=s;var A="g2-tooltip-crosshair-x";exports.CROSSHAIR_X=A;var L="g2-tooltip-crosshair-y";exports.CROSSHAIR_Y=L;
},{}],"zBCi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t=n(require("../util/theme")),i=o(require("./css-const"));function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=e[n]}return i.default=e,t&&t.set(e,i),i}function n(e){return e&&e.__esModule?e:{default:e}}var a=((e={})[""+i.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:t.default.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},e[""+i.TITLE_CLASS]={marginBottom:"4px"},e[""+i.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},e[""+i.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},e[""+i.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},e[""+i.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},e[""+i.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},e[""+i.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},e);exports.default=a;
},{"../util/theme":"MLQ3","./css-const":"DG0z"}],"DNyO":[function(require,module,exports) {
"use strict";function t(t,e,o,r,i){return{left:t<i.x,right:t+o>i.x+i.width,top:e<i.y,bottom:e+r>i.y+i.height}}function e(t,e,o,r,i,a){var x=t,h=e;switch(a){case"left":x=t-r-o,h=e-i/2;break;case"right":x=t+o,h=e-i/2;break;case"top":x=t-r/2,h=e-i-o;break;case"bottom":x=t-r/2,h=e+o;break;default:x=t+o,h=e-i-o}return{x:x,y:h}}function o(o,r,i,a,x,h,n){var s=e(o,r,i,a,x,h);if(n){var y=t(s.x,s.y,a,x,n);"auto"===h?(y.right&&(s.x=Math.max(0,o-a-i)),y.top&&(s.y=Math.max(0,r-x-i))):"top"===h||"bottom"===h?(y.left&&(s.x=n.x),y.right&&(s.x=n.x+n.width-a),"top"===h&&y.top&&(s.y=r+i),"bottom"===h&&y.bottom&&(s.y=r-x-i)):(y.top&&(s.y=n.y),y.bottom&&(s.y=n.y+n.height-x),"left"===h&&y.left&&(s.x=o+i),"right"===h&&y.right&&(s.x=o-a-i))}return s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOutSides=t,exports.getPointByPosition=e,exports.getAlignPoint=o;
},{}],"dDuo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=u(require("@antv/color-util")),s=require("@antv/dom-util"),i=require("@antv/util"),o=u(require("../abstract/html-component")),r=require("../util/util"),n=p(require("./css-const")),a=u(require("./html-theme")),h=require("../util/align");function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function p(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var s={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=i?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(s,o,r):s[o]=t[o]}return s.default=t,e&&e.set(t,s),s}function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var s=!1;return(0,i.each)(e,function(e){if((0,i.hasKey)(t,e))return s=!0,!1}),s}var y=function(o){function l(){return null!==o&&o.apply(this,arguments)||this}return(0,t.__extends)(l,o),l.prototype.getDefaultCfg=function(){var e=o.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+n.CONTAINER_CLASS+'"><div class="'+n.TITLE_CLASS+'"></div><ul class="'+n.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+n.LIST_ITEM_CLASS+'" data-index={index}>\n          <span class="'+n.MARKER_CLASS+'" style="background:{color}"></span>\n          <span class="'+n.NAME_CLASS+'">{name}</span>:\n          <span class="'+n.VALUE_CLASS+'">{value}</span>\n        </li>',xCrosshairTpl:'<div class="'+n.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+n.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:n.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:a.default})},l.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},l.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},l.prototype.show=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!0),(0,s.modifyCSS)(t,{visibility:"visible"}),this.setCrossHairsVisible(!0))},l.prototype.hide=function(){var t=this.getContainer();t&&!this.destroyed&&(this.set("visible",!1),(0,s.modifyCSS)(t,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},l.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},l.prototype.setLocation=function(t){this.set("x",t.x),this.set("y",t.y),this.resetPosition()},l.prototype.setCrossHairsVisible=function(t){var e=t?"":"none",i=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");i&&(0,s.modifyCSS)(i,{display:e}),o&&(0,s.modifyCSS)(o,{display:e})},l.prototype.initContainer=function(){if(o.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var t=this.getHtmlContentNode();this.get("parent").appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()}},l.prototype.updateInner=function(t){this.get("customContent")?this.renderCustomContent():(c(t,["title","showTitle"])&&this.resetTitle(),(0,i.hasKey)(t,"items")&&this.renderItems()),o.prototype.updateInner.call(this,t)},l.prototype.initDom=function(){this.cacheDoms()},l.prototype.removeDom=function(){o.prototype.removeDom.call(this),this.clearCrosshairs()},l.prototype.resetPosition=function(){var t,e=this.get("x"),i=this.get("y"),o=this.get("offset"),n=this.getOffset(),a=n.offsetX,l=n.offsetY,p=this.get("position"),u=this.get("region"),c=this.getContainer(),y=this.getBBox(),C=y.width,f=y.height;u&&(t=(0,r.regionToBBox)(u));var m=(0,h.getAlignPoint)(e,i,o,C,f,p,t);(0,s.modifyCSS)(c,{left:(0,r.toPx)(m.x+a),top:(0,r.toPx)(m.y+l)}),this.resetCrosshairs()},l.prototype.renderCustomContent=function(){var t=this.getHtmlContentNode(),e=this.get("parent"),s=this.get("container");s&&s.parentNode===e?e.replaceChild(t,s):e.appendChild(t),this.set("container",t),this.resetStyles(),this.applyStyles()},l.prototype.getHtmlContentNode=function(){var t,e=this.get("customContent");if(e){var o=e(this.get("title"),this.get("items"));t=(0,i.isElement)(o)?o:(0,s.createDom)(o)}return t},l.prototype.cacheDoms=function(){var t=this.getContainer(),e=t.getElementsByClassName(n.TITLE_CLASS)[0],s=t.getElementsByClassName(n.LIST_CLASS)[0];this.set("titleDom",e),this.set("listDom",s)},l.prototype.resetTitle=function(){var t=this.get("title");this.get("showTitle")&&t?this.setTitle(t):this.setTitle("")},l.prototype.setTitle=function(t){var e=this.get("titleDom");e&&(e.innerText=t)},l.prototype.resetCrosshairs=function(){var t=this.get("crosshairsRegion"),e=this.get("crosshairs");if(t&&e){var s=(0,r.regionToBBox)(t),i=this.get("xCrosshairDom"),o=this.get("yCrosshairDom");"x"===e?(this.resetCrosshair("x",s),o&&(o.remove(),this.set("yCrosshairDom",null))):"y"===e?(this.resetCrosshair("y",s),i&&(i.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",s),this.resetCrosshair("y",s)),this.setCrossHairsVisible(this.get("visible"))}else this.clearCrosshairs()},l.prototype.resetCrosshair=function(t,e){var i=this.checkCrosshair(t),o=this.get(t);"x"===t?(0,s.modifyCSS)(i,{left:(0,r.toPx)(o),top:(0,r.toPx)(e.y),height:(0,r.toPx)(e.height)}):(0,s.modifyCSS)(i,{top:(0,r.toPx)(o),left:(0,r.toPx)(e.x),width:(0,r.toPx)(e.width)})},l.prototype.checkCrosshair=function(t){var e=t+"CrosshairDom",i=t+"CrosshairTpl",o="CROSSHAIR_"+t.toUpperCase(),r=n[o],a=this.get(e),h=this.get("parent");return a||(a=(0,s.createDom)(this.get(i)),this.applyStyle(r,a),h.appendChild(a),this.set(e,a)),a},l.prototype.renderItems=function(){this.clearItemDoms();var o=this.get("items"),r=this.get("itemTpl"),n=this.get("listDom");n&&((0,i.each)(o,function(o){var a=e.default.toCSSGradient(o.color),h=(0,t.__assign)((0,t.__assign)({},o),{color:a}),l=(0,i.substitute)(r,h),p=(0,s.createDom)(l);n.appendChild(p)}),this.applyChildrenStyles(n,this.get("domStyles")))},l.prototype.clearItemDoms=function(){this.get("listDom")&&(0,r.clearDom)(this.get("listDom"))},l.prototype.clearCrosshairs=function(){var t=this.get("xCrosshairDom"),e=this.get("yCrosshairDom");t&&t.remove(),e&&e.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},l}(o.default),C=y;exports.default=C;
},{"tslib":"c4AP","@antv/color-util":"MpF9","@antv/dom-util":"HfmF","@antv/util":"rU8N","../abstract/html-component":"oANJ","../util/util":"SHBf","./css-const":"DG0z","./html-theme":"zBCi","../util/align":"DNyO"}],"v6uW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Html",{enumerable:!0,get:function(){return e.default}});var e=t(require("./html"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./html":"dDuo"}],"L8jp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AREA_STYLE=exports.LINE_STYLE=exports.BACKGROUND_STYLE=void 0;var e={opacity:0};exports.BACKGROUND_STYLE=e;var t={stroke:"#C5C5C5",strokeOpacity:.85};exports.LINE_STYLE=t;var r={fill:"#CACED4",opacity:.85};exports.AREA_STYLE=r;
},{}],"z0BB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@antv/util/lib/each")),e=i(require("@antv/util/lib/is-array")),r=i(require("@antv/util/lib/is-string"));function i(t){return t&&t.__esModule?t:{default:t}}var u=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi;function l(i){var l=i||[];return(0,e.default)(l)?l:(0,r.default)(l)?(l=l.match(u),(0,t.default)(l,function(e,r){if((e=e.match(a))[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}(0,t.default)(e,function(t,r){isNaN(t)||(e[r]=+t)}),l[r]=e}),l):void 0}var n=l;exports.default=n;
},{"@antv/util/lib/each":"s4BX","@antv/util/lib/is-array":"vEj5","@antv/util/lib/is-string":"c0E0"}],"kqp4":[function(require,module,exports) {
"use strict";function x(x,y){for(var e=[],r=0,t=x.length;t-2*!y>r;r+=2){var u=[{x:+x[r-2],y:+x[r-1]},{x:+x[r],y:+x[r+1]},{x:+x[r+2],y:+x[r+3]},{x:+x[r+4],y:+x[r+5]}];y?r?t-4===r?u[3]={x:+x[0],y:+x[1]}:t-2===r&&(u[2]={x:+x[0],y:+x[1]},u[3]={x:+x[2],y:+x[3]}):u[0]={x:+x[t-2],y:+x[t-1]}:t-4===r?u[3]=u[2]:r||(u[0]={x:+x[r],y:+x[r+1]}),e.push(["C",(-u[0].x+6*u[1].x+u[2].x)/6,(-u[0].y+6*u[1].y+u[2].y)/6,(u[1].x+6*u[2].x-u[3].x)/6,(u[1].y+6*u[2].y-u[3].y)/6,u[2].x,u[2].y])}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=x;
},{}],"sO9h":[function(require,module,exports) {
"use strict";function t(t,r){var n=[],e=[];return t.length&&function t(r,u){if(1===r.length)n.push(r[0]),e.push(r[0]);else{for(var h=[],s=0;s<r.length-1;s++)0===s&&n.push(r[0]),s===r.length-2&&e.push(r[s+1]),h[s]=[(1-u)*r[s][0]+u*r[s+1][0],(1-u)*r[s][1]+u*r[s+1][1]];t(h,u)}}(t,r),{left:n,right:e.reverse()}}function r(r,n,e){var u=[[r[1],r[2]]];e=e||2;var h=[];"A"===n[0]?(u.push(n[6]),u.push(n[7])):"C"===n[0]?(u.push([n[1],n[2]]),u.push([n[3],n[4]]),u.push([n[5],n[6]])):"S"===n[0]||"Q"===n[0]?(u.push([n[1],n[2]]),u.push([n[3],n[4]])):u.push([n[1],n[2]]);for(var s=u,a=1/e,c=0;c<e-1;c++){var o=t(s,a/(1-a*c));h.push(o.left),s=o.right}return h.push(s),h.map(function(t){var r=[];return 4===t.length&&(r.push("C"),r=r.concat(t[2])),t.length>=3&&(3===t.length&&r.push("Q"),r=r.concat(t[1])),2===t.length&&r.push("L"),r=r.concat(t[t.length-1])})}function n(t,n,e){if(1===e)return[[].concat(t)];var u=[];if("L"===n[0]||"C"===n[0]||"Q"===n[0])u=u.concat(r(t,n,e));else{var h=[].concat(t);"M"===h[0]&&(h[0]="L");for(var s=0;s<=e-1;s++)u.push(h)}return u}function e(t,r){if(1===t.length)return t;var e=t.length-1,u=r.length-1,h=e/u,s=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<u-e;a++)t.push(t[0]);return t}for(a=0;a<u;a++){var c=Math.floor(h*a);s[c]=(s[c]||0)+1}var o=s.reduce(function(r,u,h){return h===e?r.concat(t[e]):r.concat(n(t[h],t[h+1],u))},[]);return o.unshift(t[0]),"Z"!==r[u]&&"z"!==r[u]||o.push("Z"),o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Xcbr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return"object"==typeof e&&null!==e};exports.default=e;
},{}],"Q6kI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)};exports.default=e;
},{}],"qcEF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./is-object-like"),r=require("./is-array-like"),t=require("./is-string"),u=function(i,f){if(i===f)return!0;if(!i||!f)return!1;if(t.default(i)||t.default(f))return!1;if(r.default(i)||r.default(f)){if(i.length!==f.length)return!1;for(var n=!0,l=0;l<i.length&&(n=u(i[l],f[l]));l++);return n}if(e.default(i)||e.default(f)){var a=Object.keys(i),s=Object.keys(f);if(a.length!==s.length)return!1;for(n=!0,l=0;l<a.length&&(n=u(i[a[l]],f[a[l]]));l++);return n}return!1};exports.default=u;
},{"./is-object-like":"Xcbr","./is-array-like":"Q6kI","./is-string":"c0E0"}],"fx6E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=r(require("@antv/util/lib/is-equal"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e,r,n){var t=null,i=n;return r<i&&(i=r,t="add"),e<i&&(i=e,t="del"),{type:t,min:i}}var t=function(r,t){var i,l,u=r.length,a=t.length,f=0;if(0===u||0===a)return null;for(var o=[],d=0;d<=u;d++)o[d]=[],o[d][0]={min:d};for(var p=0;p<=a;p++)o[0][p]={min:p};for(d=1;d<=u;d++){i=r[d-1];for(p=1;p<=a;p++){l=t[p-1],f=(0,e.default)(i,l)?0:1;var v=o[d-1][p].min+1,s=o[d][p-1].min+1,c=o[d-1][p-1].min+f;o[d][p]=n(v,s,c)}}return o};function i(e,r){var n=t(e,r),i=e.length,l=r.length,u=[],a=1,f=1;if(n[i][l]!==i){for(var o=1;o<=i;o++){var d=n[o][o].min;f=o;for(var p=a;p<=l;p++)n[o][p].min<d&&(d=n[o][p].min,f=p);a=f,n[o][a].type&&u.push({index:o-1,type:n[o][a].type})}for(o=u.length-1;o>=0;o--)a=u[o].index,"add"===u[o].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}if((i=e.length)<l)for(o=0;o<l-i;o++)"z"===e[i-1][0]||"Z"===e[i-1][0]?e.splice(i-2,0,e[i-2]):e.push(e[i-1]);return e}
},{"@antv/util/lib/is-equal":"qcEF"}],"p2lb":[function(require,module,exports) {
"use strict";function e(e){var c=[];switch(e[0]){case"M":case"L":c.push([e[1],e[2]]);break;case"A":c.push([e[6],e[7]]);break;case"Q":c.push([e[3],e[4]]),c.push([e[1],e[2]]);break;case"T":c.push([e[1],e[2]]);break;case"C":c.push([e[5],e[6]]),c.push([e[1],e[2]]),c.push([e[3],e[4]]);break;case"S":c.push([e[3],e[4]]),c.push([e[1],e[2]]);break;case"H":case"V":c.push([e[1],e[1]])}return c}function c(c,a,r){for(var t,n=[].concat(c),s=1/(r+1),u=e(a)[0],o=1;o<=r;o++)s*=o,0===(t=Math.floor(c.length*s))?n.unshift([u[0]*s+c[t][0]*(1-s),u[1]*s+c[t][1]*(1-s)]):n.splice(t,0,[u[0]*s+c[t][0]*(1-s),u[1]*s+c[t][1]*(1-s)]);return n}function a(a,r){if(a.length<=1)return a;for(var t,n=0;n<r.length;n++)if(a[n][0]!==r[n][0])switch(t=e(a[n]),r[n][0]){case"M":a[n]=["M"].concat(t[0]);break;case"L":a[n]=["L"].concat(t[0]);break;case"A":a[n]=[].concat(r[n]),a[n][6]=t[0][0],a[n][7]=t[0][1];break;case"Q":if(t.length<2){if(!(n>0)){a[n]=r[n];break}t=c(t,a[n-1],1)}a[n]=["Q"].concat(t.reduce(function(e,c){return e.concat(c)},[]));break;case"T":a[n]=["T"].concat(t[0]);break;case"C":if(t.length<3){if(!(n>0)){a[n]=r[n];break}t=c(t,a[n-1],2)}a[n]=["C"].concat(t.reduce(function(e,c){return e.concat(c)},[]));break;case"S":if(t.length<2){if(!(n>0)){a[n]=r[n];break}t=c(t,a[n-1],1)}a[n]=["S"].concat(t.reduce(function(e,c){return e.concat(c)},[]));break;default:a[n]=r[n]}return a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;
},{}],"cQqY":[function(require,module,exports) {
"use strict";function e(e,l,t,r,a){return a?[["M",+e+ +a,l],["l",t-2*a,0],["a",a,a,0,0,1,a,a],["l",0,r-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-t,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-r],["a",a,a,0,0,1,a,-a],["z"]]:[["M",e,l],["l",t,0],["l",0,r],["l",-t,0],["z"]]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"pNfg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=r(require("@antv/util/lib/is-array"));function r(e){return e&&e.__esModule?e:{default:e}}var t="\t\n\v\f\r \u2028\u2029",u=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig");function l(r){if(!r)return null;if((0,e.default)(r))return r;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},l=[];return String(r).replace(u,function(e,r,u){var a=[],i=r.toLowerCase();if(u.replace(n,function(e,r){r&&a.push(+r)}),"m"===i&&a.length>2&&(l.push([r].concat(a.splice(0,2))),i="l",r="m"===r?"l":"L"),"o"===i&&1===a.length&&l.push([r,a[0]]),"r"===i)l.push([r].concat(a));else for(;a.length>=t[i]&&(l.push([r].concat(a.splice(0,t[i]))),t[i]););return""}),l}
},{"@antv/util/lib/is-array":"vEj5"}],"bNe6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=r(require("./parse-path-string"));function r(e){return e&&e.__esModule?e:{default:e}}var a=/[a-z]/;function t(e,r){return[r[0]+(r[0]-e[0]),r[1]+(r[1]-e[1])]}function n(r){var n=(0,e.default)(r);if(!n||!n.length)return[["M",0,0]];for(var s=!1,l=0;l<n.length;l++){var u=n[l][0];if(a.test(u)||["V","H","T","S"].indexOf(u)>=0){s=!0;break}}if(!s)return n;var c=[],f=0,h=0,i=0,b=0,g=0,o=n[0];"M"!==o[0]&&"m"!==o[0]||(i=f=+o[1],b=h=+o[2],g++,c[0]=["M",f,h]);l=g;for(var v=n.length;l<v;l++){var k=n[l],d=c[l-1],p=[],M=(u=k[0]).toUpperCase();if(u!==M)switch(p[0]=M,M){case"A":p[1]=k[1],p[2]=k[2],p[3]=k[3],p[4]=k[4],p[5]=k[5],p[6]=+k[6]+f,p[7]=+k[7]+h;break;case"V":p[1]=+k[1]+h;break;case"H":p[1]=+k[1]+f;break;case"M":i=+k[1]+f,b=+k[2]+h;break;default:for(var _=1,x=k.length;_<x;_++)p[_]=+k[_]+(_%2?f:h)}else p=n[l];switch(M){case"Z":f=+i,h=+b;break;case"H":p=["L",f=p[1],h];break;case"V":p=["L",f,h=p[1]];break;case"T":f=p[1],h=p[2];var H=t([d[1],d[2]],[d[3],d[4]]);p=["Q",H[0],H[1],f,h];break;case"S":f=p[p.length-2],h=p[p.length-1];var V=d.length,w=t([d[V-4],d[V-3]],[d[V-2],d[V-1]]);p=["C",w[0],w[1],p[1],p[2],f,h];break;case"M":i=p[p.length-2],b=p[p.length-1];break;default:f=p[p.length-2],h=p[p.length-1]}c.push(p)}return c}
},{"./parse-path-string":"pNfg"}],"tXiu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var a=t(require("./path-2-absolute"));function t(a){return a&&a.__esModule?a:{default:a}}var e=function(a,t,n,r,c,x,s,y,h,l){n===r&&(n+=1);var o,i,u,M,b,f=120*Math.PI/180,q=Math.PI/180*(+c||0),C=[],p=function(a,t,e){return{x:a*Math.cos(e)-t*Math.sin(e),y:a*Math.sin(e)+t*Math.cos(e)}};if(l)i=l[0],u=l[1],M=l[2],b=l[3];else{a=(o=p(a,t,-q)).x,t=o.y,y=(o=p(y,h,-q)).x,h=o.y,a===y&&t===h&&(y+=1,h+=1);var v=(a-y)/2,g=(t-h)/2,d=v*v/(n*n)+g*g/(r*r);d>1&&(n*=d=Math.sqrt(d),r*=d);var P=n*n,k=r*r,I=(x===s?-1:1)*Math.sqrt(Math.abs((P*k-P*g*g-k*v*v)/(P*g*g+k*v*v)));M=I*n*g/r+(a+y)/2,b=I*-r*v/n+(t+h)/2,i=Math.asin(Number(((t-b)/r).toFixed(9))),u=Math.asin(Number(((h-b)/r).toFixed(9))),i=a<M?Math.PI-i:i,u=y<M?Math.PI-u:u,i<0&&(i=2*Math.PI+i),u<0&&(u=2*Math.PI+u),s&&i>u&&(i-=2*Math.PI),!s&&u>i&&(u-=2*Math.PI)}var F=u-i;if(Math.abs(F)>f){var m=u,A=y,X=h;u=i+f*(s&&u>i?1:-1),y=M+n*Math.cos(u),h=b+r*Math.sin(u),C=e(y,h,n,r,c,0,s,A,X,[u,m,M,b])}F=u-i;var Y=Math.cos(i),_=Math.sin(i),Q=Math.cos(u),T=Math.sin(u),j=Math.tan(F/4),N=4/3*n*j,S=4/3*r*j,w=[a,t],H=[a+N*_,t-S*Y],L=[y+N*T,h-S*Q],O=[y,h];if(H[0]=2*w[0]-H[0],H[1]=2*w[1]-H[1],l)return[H,L,O].concat(C);for(var V=[],Z=0,z=(C=[H,L,O].concat(C).join().split(",")).length;Z<z;Z++)V[Z]=Z%2?p(C[Z-1],C[Z],q).y:p(C[Z],C[Z+1],q).x;return V},n=function(a,t,e,n){return[a,t,e,n,e,n]},r=function(a,t,e,n,r,c){return[1/3*a+2/3*e,1/3*t+2/3*n,1/3*r+2/3*e,1/3*c+2/3*n,r,c]};function c(t,c){var x,s=(0,a.default)(t),y=c&&(0,a.default)(c),h={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],i=[],u="",M="",b=function(a,t,c){var x,s;if(!a)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(a[0]in{T:1,Q:1})&&(t.qx=t.qy=null),a[0]){case"M":t.X=a[1],t.Y=a[2];break;case"A":a=["C"].concat(e.apply(0,[t.x,t.y].concat(a.slice(1))));break;case"S":"C"===c||"S"===c?(x=2*t.x-t.bx,s=2*t.y-t.by):(x=t.x,s=t.y),a=["C",x,s].concat(a.slice(1));break;case"T":"Q"===c||"T"===c?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),a=["C"].concat(r(t.x,t.y,t.qx,t.qy,a[1],a[2]));break;case"Q":t.qx=a[1],t.qy=a[2],a=["C"].concat(r(t.x,t.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"].concat(n(t.x,t.y,a[1],a[2]));break;case"H":a=["C"].concat(n(t.x,t.y,a[1],t.y));break;case"V":a=["C"].concat(n(t.x,t.y,t.x,a[1]));break;case"Z":a=["C"].concat(n(t.x,t.y,t.X,t.Y))}return a},f=function(a,t){if(a[t].length>7){a[t].shift();for(var e=a[t];e.length;)o[t]="A",y&&(i[t]="A"),a.splice(t++,0,["C"].concat(e.splice(0,6)));a.splice(t,1),x=Math.max(s.length,y&&y.length||0)}},q=function(a,t,e,n,r){a&&t&&"M"===a[r][0]&&"M"!==t[r][0]&&(t.splice(r,0,["M",n.x,n.y]),e.bx=0,e.by=0,e.x=a[r][1],e.y=a[r][2],x=Math.max(s.length,y&&y.length||0))};x=Math.max(s.length,y&&y.length||0);for(var C=0;C<x;C++){s[C]&&(u=s[C][0]),"C"!==u&&(o[C]=u,C&&(M=o[C-1])),s[C]=b(s[C],h,M),"A"!==o[C]&&"C"===u&&(o[C]="C"),f(s,C),y&&(y[C]&&(u=y[C][0]),"C"!==u&&(i[C]=u,C&&(M=i[C-1])),y[C]=b(y[C],l,M),"A"!==i[C]&&"C"===u&&(i[C]="C"),f(y,C)),q(s,y,h,l,C),q(y,s,l,h,C);var p=s[C],v=y&&y[C],g=p.length,d=y&&v.length;h.x=p[g-2],h.y=p[g-1],h.bx=parseFloat(p[g-4])||h.x,h.by=parseFloat(p[g-3])||h.y,l.bx=y&&(parseFloat(v[d-4])||l.x),l.by=y&&(parseFloat(v[d-3])||l.y),l.x=y&&v[d-2],l.y=y&&v[d-1]}return y?[s,y]:s}
},{"./path-2-absolute":"bNe6"}],"PDEb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=m;var t=require("@antv/util"),a=e(require("./rect-path")),r=e(require("./path-2-curve"));function e(t){return t&&t.__esModule?t:{default:t}}var n=function(t,a,r,e,n){return t*(t*(-3*a+9*r-9*e+3*n)+6*a-12*r+6*e)-3*a+3*r},x=function(t,a,r,e,x,i,h,y,u){null===u&&(u=1);for(var o=(u=u>1?1:u<0?0:u)/2,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],M=0,c=0;c<12;c++){var m=o*f[c]+o,p=n(m,t,r,x,h),s=n(m,a,e,i,y),v=p*p+s*s;M+=l[c]*Math.sqrt(v)}return o*M},i=function(t,a,r,e,n,x,i,h){for(var y,u,o,f,l=[],M=[[],[]],c=0;c<2;++c)if(0===c?(u=6*t-12*r+6*n,y=-3*t+9*r-9*n+3*i,o=3*r-3*t):(u=6*a-12*e+6*x,y=-3*a+9*e-9*x+3*h,o=3*e-3*a),Math.abs(y)<1e-12){if(Math.abs(u)<1e-12)continue;(f=-o/u)>0&&f<1&&l.push(f)}else{var m=u*u-4*o*y,p=Math.sqrt(m);if(!(m<0)){var s=(-u+p)/(2*y);s>0&&s<1&&l.push(s);var v=(-u-p)/(2*y);v>0&&v<1&&l.push(v)}}for(var d,F=l.length,g=F;F--;)d=1-(f=l[F]),M[0][F]=d*d*d*t+3*d*d*f*r+3*d*f*f*n+f*f*f*i,M[1][F]=d*d*d*a+3*d*d*f*e+3*d*f*f*x+f*f*f*h;return M[0][g]=t,M[1][g]=a,M[0][g+1]=i,M[1][g+1]=h,M[0].length=M[1].length=g+2,{min:{x:Math.min.apply(0,M[0]),y:Math.min.apply(0,M[1])},max:{x:Math.max.apply(0,M[0]),y:Math.max.apply(0,M[1])}}},h=function(t,a,r,e,n,x,i,h){if(!(Math.max(t,r)<Math.min(n,i)||Math.min(t,r)>Math.max(n,i)||Math.max(a,e)<Math.min(x,h)||Math.min(a,e)>Math.max(x,h))){var y=(t-r)*(x-h)-(a-e)*(n-i);if(y){var u=((t*e-a*r)*(n-i)-(t-r)*(n*h-x*i))/y,o=((t*e-a*r)*(x-h)-(a-e)*(n*h-x*i))/y,f=+u.toFixed(2),l=+o.toFixed(2);if(!(f<+Math.min(t,r).toFixed(2)||f>+Math.max(t,r).toFixed(2)||f<+Math.min(n,i).toFixed(2)||f>+Math.max(n,i).toFixed(2)||l<+Math.min(a,e).toFixed(2)||l>+Math.max(a,e).toFixed(2)||l<+Math.min(x,h).toFixed(2)||l>+Math.max(x,h).toFixed(2)))return{x:u,y:o}}}},y=function(t,a,r){return a>=t.x&&a<=t.x+t.width&&r>=t.y&&r<=t.y+t.height},u=function(t,r,e,n){return null===t&&(t=r=e=n=0),null===r&&(r=t.y,e=t.width,n=t.height,t=t.x),{x:t,y:r,width:e,w:e,height:n,h:n,x2:t+e,y2:r+n,cx:t+e/2,cy:r+n/2,r1:Math.min(e,n)/2,r2:Math.max(e,n)/2,r0:Math.sqrt(e*e+n*n)/2,path:(0,a.default)(t,r,e,n),vb:[t,r,e,n].join(" ")}},o=function(t,a){return t=u(t),a=u(a),y(a,t.x,t.y)||y(a,t.x2,t.y)||y(a,t.x,t.y2)||y(a,t.x2,t.y2)||y(t,a.x,a.y)||y(t,a.x2,a.y)||y(t,a.x,a.y2)||y(t,a.x2,a.y2)||(t.x<a.x2&&t.x>a.x||a.x<t.x2&&a.x>t.x)&&(t.y<a.y2&&t.y>a.y||a.y<t.y2&&a.y>t.y)},f=function(a,r,e,n,x,h,y,o){(0,t.isArray)(a)||(a=[a,r,e,n,x,h,y,o]);var f=i.apply(null,a);return u(f.min.x,f.min.y,f.max.x-f.min.x,f.max.y-f.min.y)},l=function(t,a,r,e,n,x,i,h,y){var u=1-y,o=Math.pow(u,3),f=Math.pow(u,2),l=y*y,M=l*y,c=t+2*y*(r-t)+l*(n-2*r+t),m=a+2*y*(e-a)+l*(x-2*e+a),p=r+2*y*(n-r)+l*(i-2*n+r),s=e+2*y*(x-e)+l*(h-2*x+e);return{x:o*t+3*f*y*r+3*u*y*y*n+M*i,y:o*a+3*f*y*e+3*u*y*y*x+M*h,m:{x:c,y:m},n:{x:p,y:s},start:{x:u*t+y*r,y:u*a+y*e},end:{x:u*n+y*i,y:u*x+y*h},alpha:90-180*Math.atan2(c-p,m-s)/Math.PI}},M=function(t,a,r){var e=f(t),n=f(a);if(!o(e,n))return r?0:[];for(var i=~~(x.apply(0,t)/8),y=~~(x.apply(0,a)/8),u=[],M=[],c={},m=r?0:[],p=0;p<i+1;p++){var s=l.apply(0,t.concat(p/i));u.push({x:s.x,y:s.y,t:p/i})}for(p=0;p<y+1;p++){s=l.apply(0,a.concat(p/y));M.push({x:s.x,y:s.y,t:p/y})}for(p=0;p<i;p++)for(var v=0;v<y;v++){var d=u[p],F=u[p+1],g=M[v],b=M[v+1],q=Math.abs(F.x-d.x)<.001?"y":"x",w=Math.abs(b.x-g.x)<.001?"y":"x",_=h(d.x,d.y,F.x,F.y,g.x,g.y,b.x,b.y);if(_){if(c[_.x.toFixed(4)]===_.y.toFixed(4))continue;c[_.x.toFixed(4)]=_.y.toFixed(4);var j=d.t+Math.abs((_[q]-d[q])/(F[q]-d[q]))*(F.t-d.t),z=g.t+Math.abs((_[w]-g[w])/(b[w]-g[w]))*(b.t-g.t);j>=0&&j<=1&&z>=0&&z<=1&&(r?m++:m.push({x:_.x,y:_.y,t1:j,t2:z}))}}return m},c=function(t,a,e){var n,x,i,h,y,u,o,f,l,c;t=(0,r.default)(t),a=(0,r.default)(a);for(var m=e?0:[],p=0,s=t.length;p<s;p++){var v=t[p];if("M"===v[0])n=y=v[1],x=u=v[2];else{"C"===v[0]?(l=[n,x].concat(v.slice(1)),n=l[6],x=l[7]):(l=[n,x,n,x,y,u,y,u],n=y,x=u);for(var d=0,F=a.length;d<F;d++){var g=a[d];if("M"===g[0])i=o=g[1],h=f=g[2];else{"C"===g[0]?(c=[i,h].concat(g.slice(1)),i=c[6],h=c[7]):(c=[i,h,i,h,o,f,o,f],i=o,h=f);var b=M(l,c,e);if(e)m+=b;else{for(var q=0,w=b.length;q<w;q++)b[q].segment1=p,b[q].segment2=d,b[q].bez1=l,b[q].bez2=c;m=m.concat(b)}}}}}return m};function m(t,a){return c(t,a)}
},{"@antv/util":"rU8N","./rect-path":"cQqY","./path-2-curve":"tXiu"}],"yDUb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=/,?([a-z]),?/gi;function r(r){return r.join(",").replace(e,"$1")}
},{}],"Mpln":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t){return(e%t+t)%t};exports.default=e;
},{}],"IgNa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Math.PI/180,t=function(t){return e*t};exports.default=t;
},{}],"WSHq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSamePoint=u,exports.default=i;var t=r(require("@antv/util/lib/mod")),a=r(require("@antv/util/lib/to-radian"));function r(t){return t&&t.__esModule?t:{default:t}}function e(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function n(t,a){return e(t)*e(a)?(t[0]*a[0]+t[1]*a[1])/(e(t)*e(a)):1}function s(t,a){return(t[0]*a[1]<t[1]*a[0]?-1:1)*Math.acos(n(t,a))}function u(t,a){return t[0]===a[0]&&t[1]===a[1]}function i(r,e){var i=e[1],o=e[2],M=(0,t.default)((0,a.default)(e[3]),2*Math.PI),h=e[4],c=e[5],l=r[0],f=r[1],d=e[6],v=e[7],q=Math.cos(M)*(l-d)/2+Math.sin(M)*(f-v)/2,x=-1*Math.sin(M)*(l-d)/2+Math.cos(M)*(f-v)/2,P=q*q/(i*i)+x*x/(o*o);P>1&&(i*=Math.sqrt(P),o*=Math.sqrt(P));var p=i*i*(x*x)+o*o*(q*q),g=p?Math.sqrt((i*i*(o*o)-p)/p):1;h===c&&(g*=-1),isNaN(g)&&(g=0);var I=o?g*i*x/o:0,_=i?g*-o*q/i:0,b=(l+d)/2+Math.cos(M)*I-Math.sin(M)*_,y=(f+v)/2+Math.sin(M)*I+Math.cos(M)*_,m=[(q-I)/i,(x-_)/o],A=[(-1*q-I)/i,(-1*x-_)/o],F=s([1,0],m),N=s(m,A);return n(m,A)<=-1&&(N=Math.PI),n(m,A)>=1&&(N=0),0===c&&N>0&&(N-=2*Math.PI),1===c&&N<0&&(N+=2*Math.PI),{cx:b,cy:y,rx:u(r,[d,v])?0:i,ry:u(r,[d,v])?0:o,startAngle:F,endAngle:F+N,xRotation:M,arcFlag:h,sweepFlag:c}}
},{"@antv/util/lib/mod":"Mpln","@antv/util/lib/to-radian":"IgNa"}],"fzUv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=a(require("./get-arc-params")),n=t(require("./parse-path"));function t(e){return e&&e.__esModule?e:{default:e}}function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r();if(n&&n.has(e))return n.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}function o(e,n){return[n[0]+(n[0]-e[0]),n[1]+(n[1]-e[1])]}function i(t){for(var r=[],a=null,i=null,u=null,s=0,l=(t=(0,n.default)(t)).length,c=0;c<l;c++){var d=t[c];i=t[c+1];var f=d[0],g={command:f,prePoint:a,params:d,startTangent:null,endTangent:null};switch(f){case"M":u=[d[1],d[2]],s=c;break;case"A":var p=(0,e.default)(a,d);g.arcParams=p}if("Z"===f)a=u,i=t[s+1];else{var v=d.length;a=[d[v-2],d[v-1]]}i&&"Z"===i[0]&&(i=t[s],r[s]&&(r[s].prePoint=a)),g.currentPoint=a,r[s]&&(0,e.isSamePoint)(a,r[s].currentPoint)&&(r[s].prePoint=g.prePoint);var T=i?[i[i.length-2],i[i.length-1]]:null;g.nextPoint=T;var m=g.prePoint;if(["L","H","V"].includes(f))g.startTangent=[m[0]-a[0],m[1]-a[1]],g.endTangent=[a[0]-m[0],a[1]-m[1]];else if("Q"===f){var P=[d[1],d[2]];g.startTangent=[m[0]-P[0],m[1]-P[1]],g.endTangent=[a[0]-P[0],a[1]-P[1]]}else if("T"===f){P=o((M=r[c-1]).currentPoint,m);"Q"===M.command?(g.command="Q",g.startTangent=[m[0]-P[0],m[1]-P[1]],g.endTangent=[a[0]-P[0],a[1]-P[1]]):(g.command="TL",g.startTangent=[m[0]-a[0],m[1]-a[1]],g.endTangent=[a[0]-m[0],a[1]-m[1]])}else if("C"===f){var h=[d[1],d[2]],y=[d[3],d[4]];g.startTangent=[m[0]-h[0],m[1]-h[1]],g.endTangent=[a[0]-y[0],a[1]-y[1]]}else if("S"===f){var M;h=o((M=r[c-1]).currentPoint,m),y=[d[1],d[2]];"C"===M.command?(g.command="C",g.startTangent=[m[0]-h[0],m[1]-h[1]],g.endTangent=[a[0]-y[0],a[1]-y[1]]):(g.command="SQ",g.startTangent=[m[0]-y[0],m[1]-y[1]],g.endTangent=[a[0]-y[0],a[1]-y[1]])}else if("A"===f){var O=.001,b=g.arcParams||{},j=b.cx,w=void 0===j?0:j,_=b.cy,x=void 0===_?0:_,A=b.rx,Q=void 0===A?0:A,k=b.ry,C=void 0===k?0:k,S=b.sweepFlag,q=void 0===S?0:S,D=b.startAngle,L=void 0===D?0:D,W=b.endAngle,Z=void 0===W?0:W;0===q&&(O*=-1);var F=Q*Math.cos(L-O)+w,H=C*Math.sin(L-O)+x;g.startTangent=[F-u[0],H-u[1]];var V=Q*Math.cos(L+Z+O)+w,z=C*Math.sin(L+Z-O)+x;g.endTangent=[m[0]-V,m[1]-z]}r.push(g)}return r}
},{"./get-arc-params":"WSHq","./parse-path":"z0BB"}],"od4f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=function(e,r,t){return e>=r&&e<=t};function r(r,t,x,u){var y=x.x-r.x,n=x.y-r.y,o=t.x-r.x,a=t.y-r.y,f=u.x-x.x,i=u.y-x.y,l=o*i-a*f,s=null;if(l*l>.001*(o*o+a*a)*(f*f+i*i)){var c=(y*i-n*f)/l,v=(y*a-n*o)/l;e(c,0,1)&&e(v,0,1)&&(s={x:r.x+c*o,y:r.y+c*a})}return s}
},{}],"y7II":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=1e-6;function r(r){return Math.abs(r)<t?0:r<0?-1:1}function e(t,r,e){return(e[0]-t[0])*(r[1]-t[1])==(r[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],r[0])<=e[0]&&e[0]<=Math.max(t[0],r[0])&&Math.min(t[1],r[1])<=e[1]&&e[1]<=Math.max(t[1],r[1])}function n(t,n,a){var u=!1,i=t.length;if(i<=2)return!1;for(var f=0;f<i;f++){var o=t[f],h=t[(f+1)%i];if(e(o,h,[n,a]))return!0;r(o[1]-a)>0!=r(h[1]-a)>0&&r(n-(a-o[1])*(o[0]-h[0])/(o[1]-h[1])-o[0])<0&&(u=!u)}return u}
},{}],"QNVj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var n=e(require("./point-in-polygon")),r=e(require("./get-line-intersect")),t=require("@antv/util");function e(n){return n&&n.__esModule?n:{default:n}}function u(n){for(var r=[],t=n.length,e=0;e<t-1;e++){var u=n[e],i=n[e+1];r.push({from:{x:u[0],y:u[1]},to:{x:i[0],y:i[1]}})}if(r.length>1){var a=n[0],f=n[t-1];r.push({from:{x:f[0],y:f[1]},to:{x:a[0],y:a[1]}})}return r}function i(n,e){var u=!1;return(0,t.each)(n,function(n){if((0,r.default)(n.from,n.to,e.from,e.to))return u=!0,!1}),u}function a(n){var r=n.map(function(n){return n[0]}),t=n.map(function(n){return n[1]});return{minX:Math.min.apply(null,r),maxX:Math.max.apply(null,r),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function f(n,r){return!(r.minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)}function o(r,e){if(r.length<2||e.length<2)return!1;if(!f(a(r),a(e)))return!1;var o=!1;if((0,t.each)(e,function(t){if((0,n.default)(r,t[0],t[1]))return o=!0,!1}),o)return!0;if((0,t.each)(r,function(r){if((0,n.default)(e,r[0],r[1]))return o=!0,!1}),o)return!0;var l=u(r),m=u(e),c=!1;return(0,t.each)(m,function(n){if(i(l,n))return c=!0,!1}),c}
},{"./point-in-polygon":"y7II","./get-line-intersect":"od4f","@antv/util":"rU8N"}],"l3SB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"parsePath",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"catmullRom2Bezier",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"fillPath",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"fillPathByDiff",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"formatPath",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"pathIntersection",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"parsePathArray",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"parsePathString",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"path2Curve",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"path2Absolute",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"reactPath",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"getArcParams",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"path2Segments",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"getLineIntersect",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"isPolygonsIntersect",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"isPointInPolygon",{enumerable:!0,get:function(){return g.default}});var e=P(require("./parse-path")),t=P(require("./catmull-rom-2-bezier")),r=P(require("./fill-path")),n=P(require("./fill-path-by-diff")),u=P(require("./format-path")),a=P(require("./path-intersection")),i=P(require("./parse-path-array")),o=P(require("./parse-path-string")),f=P(require("./path-2-curve")),p=P(require("./path-2-absolute")),l=P(require("./rect-path")),c=P(require("./get-arc-params")),s=P(require("./path-2-segments")),b=P(require("./get-line-intersect")),d=P(require("./is-polygons-intersect")),g=P(require("./point-in-polygon"));function P(e){return e&&e.__esModule?e:{default:e}}
},{"./parse-path":"z0BB","./catmull-rom-2-bezier":"kqp4","./fill-path":"sO9h","./fill-path-by-diff":"fx6E","./format-path":"p2lb","./path-intersection":"PDEb","./parse-path-array":"yDUb","./parse-path-string":"pNfg","./path-2-curve":"tXiu","./path-2-absolute":"bNe6","./rect-path":"cQqY","./get-arc-params":"WSHq","./path-2-segments":"fzUv","./get-line-intersect":"od4f","./is-polygons-intersect":"QNVj","./point-in-polygon":"y7II"}],"XJWO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLinePath=a,exports.getSmoothLinePath=i,exports.dataToPath=o,exports.linePathToAreaPath=s;var e=require("tslib"),t=require("@antv/path-util"),r=require("@antv/scale"),n=require("@antv/util");function u(e){return(0,n.map)(e,function(e,t){return[0===t?"M":"L",e[0],e[1]]})}function a(e){return u(e)}function i(e){if(e.length<=2)return a(e);var r=[];(0,n.each)(e,function(e){(0,n.isEqual)(e,r.slice(r.length-2))||r.push(e[0],e[1])});var u=(0,t.catmullRom2Bezier)(r,!1),i=(0,n.head)(e),o=i[0],s=i[1];return u.unshift(["M",o,s]),u}function o(e,t,u,o){void 0===o&&(o=!0);var s=new r.Linear({values:e}),c=new r.Category({values:(0,n.map)(e,function(e,t){return t})}),l=(0,n.map)(e,function(e,r){return[c.scale(r)*t,u-s.scale(e)*u]});return o?i(l):a(l)}function s(t,r,n){var u=(0,e.__spreadArrays)(t);return u.push(["L",r,0]),u.push(["L",0,n]),u.push(["Z"]),u}
},{"tslib":"c4AP","@antv/path-util":"l3SB","@antv/scale":"hc4Z","@antv/util":"rU8N"}],"dpxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Trend=void 0;var t=require("tslib"),e=i(require("../abstract/group-component")),a=require("./constant"),r=require("./path");function i(t){return t&&t.__esModule?t:{default:t}}var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(i,e),i.prototype.getDefaultCfg=function(){var r=e.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},r),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:a.BACKGROUND_STYLE,lineStyle:a.LINE_STYLE,areaStyle:a.AREA_STYLE})},i.prototype.renderInner=function(e){var a=this.cfg,i=a.width,n=a.height,s=a.data,o=a.smooth,h=a.isArea,d=a.backgroundStyle,p=a.lineStyle,l=a.areaStyle;this.addShape(e,{id:this.getElementId("background"),type:"rect",attrs:(0,t.__assign)({x:0,y:0,width:i,height:n},d)});var u=(0,r.dataToPath)(s,i,n,o);if(this.addShape(e,{id:this.getElementId("line"),type:"path",attrs:(0,t.__assign)({path:u},p)}),h){var g=(0,r.linePathToAreaPath)(u,i,n);this.addShape(e,{id:this.getElementId("area"),type:"path",attrs:(0,t.__assign)({path:g},l)})}},i.prototype.applyOffset=function(){var t=this.cfg,e=t.x,a=t.y;this.moveElementTo(this.get("group"),{x:e,y:a})},i}(e.default);exports.Trend=n;var s=n;exports.default=s;
},{"tslib":"c4AP","../abstract/group-component":"zvTB","./constant":"L8jp","./path":"XJWO"}],"qbMR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SLIDER_CHANGE=exports.TEXT_STYLE=exports.HANDLER_STYLE=exports.DEFAULT_HANDLER_WIDTH=exports.FOREGROUND_STYLE=exports.BACKGROUND_STYLE=void 0;var e={fill:"#416180",opacity:.05};exports.BACKGROUND_STYLE=e;var r={fill:"#5B8FF9",opacity:.15,cursor:"move"};exports.FOREGROUND_STYLE=r;var t=10;exports.DEFAULT_HANDLER_WIDTH=t;var E={width:t,height:24};exports.HANDLER_STYLE=E;var o={textBaseline:"middle",fill:"#000",opacity:.45};exports.TEXT_STYLE=o;var s="sliderchange";exports.SLIDER_CHANGE=s;
},{}],"iThn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Handler=void 0;var t=require("tslib"),e=r(require("../abstract/group-component"));function r(t){return t&&t.__esModule?t:{default:t}}var i={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},n=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.getDefaultCfg=function(){var r=e.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},r),{name:"handler",x:0,y:0,width:10,height:24,style:i})},r.prototype.renderInner=function(t){var e=this.cfg,r=e.width,i=e.height,n=e.style,o=n.fill,s=n.stroke,a=n.radius,l=n.opacity,u=n.cursor;this.addShape(t,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:r,height:i,fill:o,stroke:s,radius:a,opacity:l,cursor:u}});var d=1/3*r,h=2/3*r,p=.25*i,g=.75*i;this.addShape(t,{id:this.getElementId("line-left"),type:"line",attrs:{x1:d,y1:p,x2:d,y2:g,stroke:s,cursor:u}}),this.addShape(t,{id:this.getElementId("line-right"),type:"line",attrs:{x1:h,y1:p,x2:h,y2:g,stroke:s,cursor:u}})},r.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},r.prototype.initEvent=function(){this.bindEvents()},r.prototype.bindEvents=function(){var t=this;this.get("group").on("mouseenter",function(){var e=t.get("style").highLightFill;t.getElementByLocalId("background").attr("fill",e),t.draw()}),this.get("group").on("mouseleave",function(){var e=t.get("style").fill;t.getElementByLocalId("background").attr("fill",e),t.draw()})},r.prototype.draw=function(){var t=this.get("container").get("canvas");t&&t.draw()},r}(e.default);exports.Handler=n;var o=n;exports.default=o;
},{"tslib":"c4AP","../abstract/group-component":"zvTB"}],"TsEE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Slider=void 0;var t=require("tslib"),e=require("@antv/util"),n=o(require("../abstract/group-component")),r=require("../trend/trend"),a=require("./constant"),i=require("./handler");function o(t){return t&&t.__esModule?t:{default:t}}var s=function(n){function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.onMouseDown=function(n){return function(r){t.currentTarget=n;var a=r.originalEvent;a.stopPropagation(),a.preventDefault(),t.prevX=(0,e.get)(a,"touches.0.pageX",a.pageX),t.prevY=(0,e.get)(a,"touches.0.pageY",a.pageY);var i=t.getContainerDOM();i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},t.onMouseMove=function(n){var r=t.cfg.width,i=[t.get("start"),t.get("end")];n.stopPropagation(),n.preventDefault();var o=(0,e.get)(n,"touches.0.pageX",n.pageX),s=(0,e.get)(n,"touches.0.pageY",n.pageY),d=o-t.prevX,h=t.adjustOffsetRange(d/r);t.updateStartEnd(h),t.updateUI(t.getElementByLocalId("foreground"),t.getElementByLocalId("minText"),t.getElementByLocalId("maxText")),t.prevX=o,t.prevY=s,t.draw(),t.emit(a.SLIDER_CHANGE,[t.get("start"),t.get("end")].sort()),t.delegateEmit("valuechanged",{originValue:i,value:[t.get("start"),t.get("end")]})},t.onMouseUp=function(){t.currentTarget&&(t.currentTarget=void 0);var e=t.getContainerDOM();e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))},t}return(0,t.__extends)(o,n),o.prototype.setRange=function(t,n){this.set("minLimit",t),this.set("maxLimit",n);var r=this.get("start"),a=this.get("end"),i=(0,e.clamp)(r,t,n),o=(0,e.clamp)(a,t,n);this.get("isInit")||r===i&&a===o||this.setValue([i,o])},o.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},o.prototype.setValue=function(t){var n=this.getRange();if((0,e.isArray)(t)&&2===t.length){var r=[this.get("start"),this.get("end")];this.update({start:(0,e.clamp)(t[0],n.min,n.max),end:(0,e.clamp)(t[1],n.min,n.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:r,value:t})}},o.prototype.getValue=function(){return[this.get("start"),this.get("end")]},o.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:a.BACKGROUND_STYLE,foregroundStyle:a.FOREGROUND_STYLE,handlerStyle:a.HANDLER_STYLE,textStyle:a.TEXT_STYLE}})},o.prototype.update=function(r){var a=r.start,i=r.end,o=(0,t.__assign)({},r);(0,e.isNil)(a)||(o.start=(0,e.clamp)(a,0,1)),(0,e.isNil)(i)||(o.end=(0,e.clamp)(i,0,1)),n.prototype.update.call(this,o),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler"))},o.prototype.init=function(){this.set("start",(0,e.clamp)(this.get("start"),0,1)),this.set("end",(0,e.clamp)(this.get("end"),0,1)),n.prototype.init.call(this)},o.prototype.renderInner=function(n){var a=this.cfg,o=(a.start,a.end,a.width),s=a.height,d=a.trendCfg,h=void 0===d?{}:d,u=a.minText,g=a.maxText,l=a.backgroundStyle,p=void 0===l?{}:l,m=a.foregroundStyle,c=void 0===m?{}:m,v=a.textStyle,x=void 0===v?{}:v,f=a.handlerStyle,y=void 0===f?{}:f;(0,e.size)((0,e.get)(h,"data"))&&this.addComponent(n,(0,t.__assign)({component:r.Trend,id:this.getElementId("trend"),x:0,y:0,width:o,height:s},h)),this.addShape(n,{id:this.getElementId("background"),type:"rect",attrs:(0,t.__assign)({x:0,y:0,width:o,height:s},p)});var E=this.addShape(n,{id:this.getElementId("minText"),type:"text",attrs:(0,t.__assign)({y:s/2,textAlign:"right",text:u,silent:!1},x)}),M=this.addShape(n,{id:this.getElementId("maxText"),type:"text",attrs:(0,t.__assign)({y:s/2,textAlign:"left",text:g,silent:!1},x)}),_=this.addShape(n,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:(0,t.__assign)({y:0,height:s},c)}),w=(0,e.get)(y,"height",24);this.minHandler=this.addComponent(n,(0,t.__assign)({component:i.Handler,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(s-w)/2,width:o,height:w,cursor:"ew-resize"},y)),this.maxHandler=this.addComponent(n,(0,t.__assign)({component:i.Handler,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(s-w)/2,width:o,height:w,cursor:"ew-resize"},y)),this.updateUI(_,E,M)},o.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},o.prototype.initEvent=function(){this.bindEvents()},o.prototype.updateUI=function(t,n,r){var i=this.cfg,o=i.start,s=i.end,d=i.width,h=i.minText,u=i.maxText,g=i.handlerStyle,l=o*d,p=s*d;t.attr("x",l),t.attr("width",p-l);var m=(0,e.get)(g,"width",a.DEFAULT_HANDLER_WIDTH);n.attr("text",h),r.attr("text",u);var c=this._dodgeText([l,p],n,r),v=c[0],x=c[1];this.minHandler&&(this.minHandler.update({x:l-m/2}),this.get("updateAutoRender")||this.minHandler.render()),(0,e.each)(v,function(t,e){return n.attr(e,t)}),this.maxHandler&&(this.maxHandler.update({x:p-m/2}),this.get("updateAutoRender")||this.maxHandler.render()),(0,e.each)(x,function(t,e){return r.attr(e,t)})},o.prototype.bindEvents=function(){var t=this.get("group");t.on("handler-min:mousedown",this.onMouseDown("minHandler")),t.on("handler-min:touchstart",this.onMouseDown("minHandler")),t.on("handler-max:mousedown",this.onMouseDown("maxHandler")),t.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var e=t.findById(this.getElementId("foreground"));e.on("mousedown",this.onMouseDown("foreground")),e.on("touchstart",this.onMouseDown("foreground"))},o.prototype.adjustOffsetRange=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":var a=0-n,i=1-n;return Math.min(i,Math.max(a,t));case"maxHandler":a=0-r,i=1-r;return Math.min(i,Math.max(a,t));case"foreground":a=0-n,i=1-r;return Math.min(i,Math.max(a,t))}},o.prototype.updateStartEnd=function(t){var e=this.cfg,n=e.start,r=e.end;switch(this.currentTarget){case"minHandler":n+=t;break;case"maxHandler":r+=t;break;case"foreground":n+=t,r+=t}this.set("start",n),this.set("end",r)},o.prototype._dodgeText=function(t,n,r){var i,o,s=this.cfg,d=s.handlerStyle,h=s.width,u=(0,e.get)(d,"width",a.DEFAULT_HANDLER_WIDTH),g=t[0],l=t[1],p=!1;g>l&&(g=(i=[l,g])[0],l=i[1],n=(o=[r,n])[0],r=o[1],p=!0);var m=n.getBBox(),c=r.getBBox(),v=m.width>g-2?{x:g+u/2+2,textAlign:"left"}:{x:g-u/2-2,textAlign:"right"},x=c.width>h-l-2?{x:l-u/2-2,textAlign:"right"}:{x:l+u/2+2,textAlign:"left"};return p?[x,v]:[v,x]},o.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},o.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},o}(n.default);exports.Slider=s;var d=s;exports.default=d;
},{"tslib":"c4AP","@antv/util":"rU8N","../abstract/group-component":"zvTB","../trend/trend":"dpxL","./constant":"qbMR","./handler":"iThn"}],"UBS8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Slider",{enumerable:!0,get:function(){return e.Slider}});var e=require("./slider");
},{"./slider":"TsEE"}],"csIr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scrollbar=exports.DEFAULT_THEME=void 0;var t=require("tslib"),e=require("@antv/dom-util"),n=require("@antv/util"),o=i(require("../abstract/group-component"));function i(t){return t&&t.__esModule?t:{default:t}}var r={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},a={default:r,hover:{thumbColor:"rgba(0,0,0,0.2)"}};exports.DEFAULT_THEME=a;var s=function(o){function i(){var t=null!==o&&o.apply(this,arguments)||this;return t.clearEvents=n.noop,t.onStartEvent=function(e){return function(o){t.isMobile=e,o.originalEvent.preventDefault();var i=e?(0,n.get)(o.originalEvent,"touches.0.clientX"):o.clientX,r=e?(0,n.get)(o.originalEvent,"touches.0.clientY"):o.clientY;t.startPos=t.cfg.isHorizontal?i:r,t.bindLaterEvent()}},t.bindLaterEvent=function(){var n=t.getContainerDOM(),o=[];o=t.isMobile?[(0,e.addEventListener)(n,"touchmove",t.onMouseMove),(0,e.addEventListener)(n,"touchend",t.onMouseUp),(0,e.addEventListener)(n,"touchcancel",t.onMouseUp)]:[(0,e.addEventListener)(n,"mousemove",t.onMouseMove),(0,e.addEventListener)(n,"mouseup",t.onMouseUp),(0,e.addEventListener)(n,"mouseleave",t.onMouseUp)],t.clearEvents=function(){o.forEach(function(t){t.remove()})}},t.onMouseMove=function(e){var o=t.cfg,i=o.isHorizontal,r=o.thumbOffset;e.preventDefault();var a=t.isMobile?(0,n.get)(e,"touches.0.clientX"):e.clientX,s=t.isMobile?(0,n.get)(e,"touches.0.clientY"):e.clientY,u=i?a:s,h=u-t.startPos;t.startPos=u,t.updateThumbOffset(r+h)},t.onMouseUp=function(e){e.preventDefault(),t.clearEvents()},t.onTrackClick=function(e){var n=t.cfg,o=n.isHorizontal,i=n.x,r=n.y,a=n.thumbLen,s=t.getContainerDOM().getBoundingClientRect(),u=e.clientX,h=e.clientY,l=o?u-s.left-i-a/2:h-s.top-r-a/2,c=t.validateRange(l);t.updateThumbOffset(c)},t.onThumbMouseOver=function(){var e=t.cfg.theme.hover.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t.onThumbMouseOut=function(){var e=t.cfg.theme.default.thumbColor;t.getElementByLocalId("thumb").attr("stroke",e),t.draw()},t}return(0,t.__extends)(i,o),i.prototype.setRange=function(t,e){this.set("minLimit",t),this.set("maxLimit",e);var o=this.getValue(),i=(0,n.clamp)(o,t,e);o===i||this.get("isInit")||this.setValue(i)},i.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},i.prototype.setValue=function(t){var e=this.getRange(),o=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*(0,n.clamp)(t,e.min,e.max)}),this.delegateEmit("valuechange",{originalValue:o,value:this.getValue()})},i.prototype.getValue=function(){return(0,n.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},i.prototype.getDefaultCfg=function(){var e=o.prototype.getDefaultCfg.call(this);return(0,t.__assign)((0,t.__assign)({},e),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:a})},i.prototype.renderInner=function(t){this.renderTrackShape(t),this.renderThumbShape(t)},i.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},i.prototype.initEvent=function(){this.bindEvents()},i.prototype.renderTrackShape=function(t){var e=this.cfg,n=e.trackLen,o=e.theme,i=(void 0===o?{default:{}}:o).default,r=i.lineCap,a=i.trackColor,s=i.size,u=this.get("isHorizontal")?{x1:0+s/2,y1:s/2,x2:n-s/2,y2:s/2,lineWidth:s,stroke:a,lineCap:r}:{x1:s/2,y1:0+s/2,x2:s/2,y2:n-s/2,lineWidth:s,stroke:a,lineCap:r};return this.addShape(t,{id:this.getElementId("track"),name:"track",type:"line",attrs:u})},i.prototype.renderThumbShape=function(t){var e=this.cfg,n=e.thumbOffset,o=e.thumbLen,i=e.theme,r=(void 0===i?{default:{}}:i).default,a=r.size,s=r.lineCap,u=r.thumbColor,h=this.get("isHorizontal")?{x1:n+a/2,y1:a/2,x2:n+o-a/2,y2:a/2,lineWidth:a,stroke:u,lineCap:s,cursor:"default"}:{x1:a/2,y1:n+a/2,x2:a/2,y2:n+o-a/2,lineWidth:a,stroke:u,lineCap:s,cursor:"default"};return this.addShape(t,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:h})},i.prototype.bindEvents=function(){var t=this.get("group");t.on("mousedown",this.onStartEvent(!1)),t.on("mouseup",this.onMouseUp),t.on("touchstart",this.onStartEvent(!0)),t.on("touchend",this.onMouseUp),t.findById(this.getElementId("track")).on("click",this.onTrackClick);var e=t.findById(this.getElementId("thumb"));e.on("mouseover",this.onThumbMouseOver),e.on("mouseout",this.onThumbMouseOut)},i.prototype.getContainerDOM=function(){var t=this.get("container"),e=t&&t.get("canvas");return e&&e.get("container")},i.prototype.validateRange=function(t){var e=this.cfg,n=e.thumbLen,o=e.trackLen,i=t;return t+n>o?i=o-n:t+n<n&&(i=0),i},i.prototype.draw=function(){var t=this.get("container"),e=t&&t.get("canvas");e&&e.draw()},i.prototype.updateThumbOffset=function(t){var e=this.cfg,n=e.thumbOffset,o=e.isHorizontal,i=e.thumbLen,r=e.size,a=this.validateRange(t);if(a!==n){var s=this.getElementByLocalId("thumb");o?s.attr({x1:a+r/2,x2:a+i-r/2}):s.attr({y1:a+r/2,y2:a+i-r/2}),this.emitOffsetChange(a)}},i.prototype.emitOffsetChange=function(t){var e=this.cfg,o=e.thumbOffset,i=e.trackLen,r=e.thumbLen;this.cfg.thumbOffset=t,this.emit("scrollchange",{thumbOffset:t,ratio:(0,n.clamp)(t/(i-r),0,1)}),this.delegateEmit("valuechange",{originalValue:o,value:t})},i}(o.default);exports.Scrollbar=s;
},{"tslib":"c4AP","@antv/dom-util":"HfmF","@antv/util":"rU8N","../abstract/group-component":"zvTB"}],"mIEy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./scrollbar");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});
},{"./scrollbar":"csIr"}],"DHND":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Component",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"GroupComponent",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"HtmlComponent",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Slider",{enumerable:!0,get:function(){return s.Slider}}),Object.defineProperty(exports,"Scrollbar",{enumerable:!0,get:function(){return l.Scrollbar}}),exports.Tooltip=exports.Legend=exports.Grid=exports.Crosshair=exports.Axis=exports.Annotation=void 0;var e=d(require("./annotation"));exports.Annotation=e;var r=d(require("./axis"));exports.Axis=r;var t=d(require("./crosshair"));exports.Crosshair=t;var o=d(require("./grid"));exports.Grid=o;var n=d(require("./legend"));exports.Legend=n;var i=d(require("./tooltip"));exports.Tooltip=i;var u=c(require("./abstract/component")),p=c(require("./abstract/group-component")),a=c(require("./abstract/html-component")),s=require("./slider"),l=require("./scrollbar");function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}
},{"./annotation":"hZ7D","./axis":"EPti","./crosshair":"hTRD","./grid":"dhkX","./legend":"BzfW","./tooltip":"v6uW","./abstract/component":"rbyY","./abstract/group-component":"zvTB","./abstract/html-component":"oANJ","./slider":"UBS8","./scrollbar":"mIEy"}],"iPWy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Event",{enumerable:!0,get:function(){return e.Event}}),Object.defineProperty(exports,"AbstractGroup",{enumerable:!0,get:function(){return e.AbstractGroup}}),Object.defineProperty(exports,"AbstractShape",{enumerable:!0,get:function(){return e.AbstractShape}}),Object.defineProperty(exports,"registerAdjust",{enumerable:!0,get:function(){return t.registerAdjust}}),Object.defineProperty(exports,"getAdjust",{enumerable:!0,get:function(){return t.getAdjust}}),Object.defineProperty(exports,"Adjust",{enumerable:!0,get:function(){return t.Adjust}}),Object.defineProperty(exports,"getAttribute",{enumerable:!0,get:function(){return r.getAttribute}}),Object.defineProperty(exports,"Attribute",{enumerable:!0,get:function(){return r.Attribute}}),Object.defineProperty(exports,"Color",{enumerable:!0,get:function(){return n.Color}}),Object.defineProperty(exports,"getCoordinate",{enumerable:!0,get:function(){return o.getCoordinate}}),Object.defineProperty(exports,"registerCoordinate",{enumerable:!0,get:function(){return o.registerCoordinate}}),Object.defineProperty(exports,"Coordinate",{enumerable:!0,get:function(){return o.Coordinate}}),Object.defineProperty(exports,"getScale",{enumerable:!0,get:function(){return i.getScale}}),Object.defineProperty(exports,"registerScale",{enumerable:!0,get:function(){return i.registerScale}}),Object.defineProperty(exports,"Scale",{enumerable:!0,get:function(){return i.Scale}}),Object.defineProperty(exports,"Annotation",{enumerable:!0,get:function(){return u.Annotation}}),Object.defineProperty(exports,"Component",{enumerable:!0,get:function(){return u.Component}}),Object.defineProperty(exports,"Crosshair",{enumerable:!0,get:function(){return u.Crosshair}}),Object.defineProperty(exports,"GroupComponent",{enumerable:!0,get:function(){return u.GroupComponent}}),Object.defineProperty(exports,"HtmlComponent",{enumerable:!0,get:function(){return u.HtmlComponent}}),Object.defineProperty(exports,"Slider",{enumerable:!0,get:function(){return u.Slider}}),exports.HtmlTooltip=exports.ContinuousLegend=exports.CategoryLegend=exports.CircleGrid=exports.LineGrid=exports.CircleAxis=exports.LineAxis=void 0;var e=require("@antv/g-base"),t=require("@antv/adjust/lib/factory"),r=require("@antv/attr/lib/factory"),n=require("@antv/attr"),o=require("@antv/coord"),i=require("@antv/scale"),u=require("@antv/component"),p=u.Axis.Line,s=u.Axis.Circle;exports.CircleAxis=s,exports.LineAxis=p;var a=u.Grid.Line,c=u.Grid.Circle;exports.CircleGrid=c,exports.LineGrid=a;var b=u.Legend.Category,d=u.Legend.Continuous;exports.ContinuousLegend=d,exports.CategoryLegend=b;var l=u.Tooltip.Html;exports.HtmlTooltip=l;
},{"@antv/g-base":"pj64","@antv/adjust/lib/factory":"y3U1","@antv/attr/lib/factory":"dUN9","@antv/attr":"HgDz","@antv/coord":"g8Yv","@antv/scale":"hc4Z","@antv/component":"DHND"}],"YUW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createScaleByField=a,exports.syncScale=s,exports.getName=l;var e=require("tslib"),t=require("@antv/util"),r=require("../dependents"),i=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function n(e){var r="linear";return i.test(e)?r="time":(0,t.isString)(e)&&(r="cat"),r}function a(i,a,s){var l=a||[];if((0,t.isNumber)(i)||(0,t.isNil)((0,t.firstValue)(l,i))&&(0,t.isEmpty)(s))return new((0,r.getScale)("identity"))({field:i.toString(),values:[i]});var u=(0,t.valuesOfKey)(l,i),c=(0,t.get)(s,"type",n(u[0]));return new((0,r.getScale)(c))((0,e.__assign)({field:i,values:u},s))}function s(e,t){if("identity"!==e.type&&"identity"!==t.type){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);e.change(r)}}function l(e){return e.alias||e.field}
},{"tslib":"oMtQ","@antv/util":"rU8N","../dependents":"iPWy"}],"zdfe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLineAxisRelativeRegion=s,exports.getCircleAxisRelativeRegion=i,exports.getAxisRegion=x,exports.getAxisFactor=a,exports.isVertical=o,exports.getAxisFactorByRegion=c,exports.getAxisThemeCfg=u,exports.getCircleAxisCenterRadius=y,exports.getAxisOption=T,exports.getAxisDirection=g,exports.getAxisTitleText=l;var e=require("@antv/util"),t=require("../constant"),r=require("./scale"),n=require("@antv/matrix-util");function s(e){var r,n;switch(e){case t.DIRECTION.TOP:r={x:0,y:1},n={x:1,y:1};break;case t.DIRECTION.RIGHT:r={x:1,y:0},n={x:1,y:1};break;case t.DIRECTION.BOTTOM:r={x:0,y:0},n={x:1,y:0};break;case t.DIRECTION.LEFT:r={x:0,y:0},n={x:0,y:1};break;default:r=n={x:0,y:0}}return{start:r,end:n}}function i(e){var t,r;return e.isTransposed?(t={x:0,y:0},r={x:1,y:0}):(t={x:0,y:0},r={x:0,y:1}),{start:t,end:r}}function x(e,t){var r={start:{x:0,y:0},end:{x:0,y:0}};e.isRect?r=s(t):e.isPolar&&(r=i(e));var n=r.start,x=r.end;return{start:e.convert(n),end:e.convert(x)}}function a(e,r){return e.isRect?e.isTransposed?[t.DIRECTION.RIGHT,t.DIRECTION.BOTTOM].includes(r)?1:-1:[t.DIRECTION.BOTTOM,t.DIRECTION.RIGHT].includes(r)?-1:1:e.isPolar&&e.x.start<0?-1:1}function o(e){var t=e.start,r=e.end;return t.x===r.x}function c(e,t){var r=e.start,n=e.end;return o(e)?(r.y-n.y)*(t.x-r.x)>0?1:-1:(n.x-r.x)*(r.y-t.y)>0?-1:1}function u(t,r){return(0,e.get)(t,["components","axis",r],{})}function y(e){var t=e.x,r=e.y,s=e.circleCenter,i=r.start>r.end,x=e.isTransposed?e.convert({x:i?0:1,y:0}):e.convert({x:0,y:i?0:1}),a=[x.x-s.x,x.y-s.y],o=[1,0],c=x.y>s.y?n.vec2.angle(a,o):-1*n.vec2.angle(a,o),u=c+(t.end-t.start);return{center:s,radius:Math.sqrt(Math.pow(x.x-s.x,2)+Math.pow(x.y-s.y,2)),startAngle:c,endAngle:u}}function T(t,r){return(0,e.isBoolean)(t)?!1!==t&&{}:(0,e.get)(t,[r])}function g(t,r){return(0,e.get)(t,"position",r)}function l(t,n){return(0,e.get)(n,["title","text"],(0,r.getName)(t))}
},{"@antv/util":"rU8N","../constant":"JW8G","./scale":"YUW9","@antv/matrix-util":"n7Fk"}],"rL5d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Facet=void 0;var t=require("@antv/util"),e=require("../constant"),i=require("../util/axis"),r=function(){function r(e,i){this.destroyed=!1,this.facets=[],this.view=e,this.cfg=(0,t.deepMix)({},this.getDefaultCfg(),i)}return r.prototype.init=function(){this.container||(this.container=this.createContainer());var t=this.view.getData();this.facets=this.generateFacets(t)},r.prototype.render=function(){this.renderViews()},r.prototype.update=function(){},r.prototype.clear=function(){this.clearFacetViews()},r.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},r.prototype.facetToView=function(t){var e=t.region,i=t.data,r=t.padding,n=void 0===r?this.cfg.padding:r,o=this.view.createView({region:e,padding:n});o.data(i||[]),t.view=o,this.beforeEachView(o,t);var a=this.cfg.eachView;return a&&a(o,t),this.afterEachView(o,t),o},r.prototype.createContainer=function(){return this.view.getLayer(e.LAYER.FORE).addGroup()},r.prototype.renderViews=function(){this.createFacetViews()},r.prototype.createFacetViews=function(){var t=this;return this.facets.map(function(e){return t.facetToView(e)})},r.prototype.clearFacetViews=function(){var e=this;(0,t.each)(this.facets,function(t){t.view&&(e.view.removeView(t.view),t.view=void 0)})},r.prototype.getFieldValues=function(e,i){var r=[],n={};return(0,t.each)(e,function(e){var o=e[i];(0,t.isNil)(o)||n[o]||(r.push(o),n[o]=!0)}),r},r.prototype.getRegion=function(t,e,i,r){var n=1/(0===e?1:e),o=1/(0===t?1:t);return{start:{x:n*i,y:o*r},end:{x:n*(i+1),y:o*(r+1)}}},r.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},r.prototype.getDefaultTitleCfg=function(){return{style:{fontSize:14,fill:"#666",fontFamily:this.view.getTheme().fontFamily}}},r.prototype.processAxis=function(e,r){var n=e.getOptions(),o=n.coordinate,a=e.geometries;if("rect"===(0,t.get)(o,"type","rect")&&a.length){(0,t.isNil)(n.axes)&&(n.axes={});var s=n.axes,c=a[0].getXYFields(),p=c[0],u=c[1],f=(0,i.getAxisOption)(s,p),h=(0,i.getAxisOption)(s,u);!1!==f&&(n.axes[p]=this.getXAxisOption(p,s,f,r)),!1!==h&&(n.axes[u]=this.getYAxisOption(u,s,h,r))}},r.prototype.getFacetDataFilter=function(e){return function(i){return(0,t.every)(e,function(e){var r=e.field,n=e.value;return!(!(0,t.isNil)(n)&&r)||i[r]===n})}},r}();exports.Facet=r;
},{"@antv/util":"rU8N","../constant":"JW8G","../util/axis":"zdfe"}],"GBvu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Facet",{enumerable:!0,get:function(){return t.Facet}}),exports.registerFacet=exports.getFacet=void 0;var e=require("@antv/util"),t=require("./facet"),r={},o=function(t){return r[(0,e.lowerCase)(t)]};exports.getFacet=o;var a=function(t,o){r[(0,e.lowerCase)(t)]=o};exports.registerFacet=a;
},{"@antv/util":"rU8N","./facet":"rL5d"}],"RCAx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),e=function(){function e(t,e){this.context=t,this.cfg=e,t.addAction(this)}return e.prototype.applyCfg=function(e){(0,t.assign)(this,e)},e.prototype.init=function(){this.applyCfg(this.cfg)},e.prototype.destroy=function(){this.context.removeAction(this),this.context=null},e}(),i=e;exports.default=i;
},{"@antv/util":"rU8N"}],"VDfK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=r(require("./base"));function r(t){return t&&t.__esModule?t:{default:t}}var l=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.execute=function(){this.callback&&this.callback(this.context)},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.callback=null},r}(e.default),o=l;exports.default=o;
},{"tslib":"oMtQ","./base":"RCAx"}],"s1qi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAction=c,exports.getActionClass=a,exports.registerAction=i,exports.unregisterAction=o,exports.createCallbackAction=l;var e=n(require("./callback")),t=require("@antv/util");function n(e){return e&&e.__esModule?e:{default:e}}var r={};function c(e,t){var n=r[e],c=null;n&&((c=new(0,n.ActionClass)(t,n.cfg)).name=e,c.init());return c}function a(e){var n=r[e];return(0,t.get)(n,"ActionClass")}function i(e,t,n){r[e]={ActionClass:t,cfg:n}}function o(e){delete r[e]}function l(t,n){var r=new e.default(n);return r.callback=t,r.name="callback",r}
},{"./callback":"VDfK","@antv/util":"rU8N"}],"L6ru":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polarToCartesian=e,exports.getSectorPath=n,exports.getArcPath=a,exports.getAngle=u,exports.getPolygonCentroid=x,exports.getReplaceAttrs=i;var t=require("@antv/util");function r(r){if((0,t.isEmpty)(r))return null;var e=r[0].x,n=r[0].x,a=r[0].y,u=r[0].y;return(0,t.each)(r,function(t){e=e>t.x?t.x:e,n=n<t.x?t.x:n,a=a>t.y?t.y:a,u=u<t.y?t.y:u}),{minX:e,maxX:n,minY:a,maxY:u,centerX:(e+n)/2,centerY:(a+u)/2}}function e(t,r,e,n){return{x:t+e*Math.cos(n),y:r+e*Math.sin(n)}}function n(t,r,n,a,u,x){void 0===x&&(x=0);var i=e(t,r,n,a),o=e(t,r,n,u),s=e(t,r,x,a),y=e(t,r,x,u);if(u-a==2*Math.PI){var h=e(t,r,n,a+Math.PI),p=e(t,r,x,a+Math.PI),c=[["M",i.x,i.y],["A",n,n,0,1,1,h.x,h.y],["A",n,n,0,1,1,o.x,o.y],["M",s.x,s.y]];return x&&(c.push(["A",x,x,0,1,0,p.x,p.y]),c.push(["A",x,x,0,1,0,y.x,y.y])),c.push(["M",i.x,i.y]),c.push(["Z"]),c}var A=u-a<=Math.PI?0:1,l=[["M",i.x,i.y],["A",n,n,0,A,1,o.x,o.y],["L",y.x,y.y]];return x&&l.push(["A",x,x,0,A,0,s.x,s.y]),l.push(["L",i.x,i.y]),l.push(["Z"]),l}function a(r,n,a,u,x){var i=e(r,n,a,u),o=e(r,n,a,x);if((0,t.isNumberEqual)(x-u,2*Math.PI)){var s=e(r,n,a,u+Math.PI);return[["M",i.x,i.y],["A",a,a,0,1,1,s.x,s.y],["A",a,a,0,1,1,i.x,i.y],["A",a,a,0,1,0,s.x,s.y],["A",a,a,0,1,0,i.x,i.y],["Z"]]}var y=x-u<=Math.PI?0:1;return[["M",i.x,i.y],["A",a,a,0,y,1,o.x,o.y]]}function u(t,e){var n,a,u=r(t.points),x=e.startAngle,i=e.endAngle-x;return e.isTransposed?(n=u.maxY*i,a=u.minY*i):(n=u.maxX*i,a=u.minX*i),{startAngle:a+=x,endAngle:n+=x}}function x(r,e){if((0,t.isNumber)(r)&&(0,t.isNumber)(e))return[r,e];for(var n,a,u=-1,x=0,i=0,o=r.length-1,s=0;++u<r.length;)n=o,o=u,s+=a=r[n]*e[o]-r[o]*e[n],x+=(r[n]+r[o])*a,i+=(e[n]+e[o])*a;return[x/(s*=3),i/s]}function i(r,e){var n=r.attr(),a=e.attr();return(0,t.each)(n,function(t,r){void 0===a[r]&&(a[r]=void 0)}),a}
},{"@antv/util":"rU8N"}],"RDFe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isBetween=t,exports.padEnd=e,exports.omit=n,exports.uniq=i;var r=require("@antv/util");function t(r,t,e){var n=Math.min(t,e),i=Math.max(t,e);return r>=n&&r<=i}function e(t,e,n){if((0,r.isString)(t))return t.padEnd(e,n);if((0,r.isArray)(t)){var i=t.length;if(i<e)for(var o=e-i,u=0;u<o;u++)t.push(n)}return t}function n(r,t){return t.forEach(function(t){delete r[t]}),r}function i(r,t,e){void 0===t&&(t=[]),void 0===e&&(e={});for(var n=0,i=r;n<i.length;n++){var o=i[n];e[o]||(t.push(o),e[o]=!0)}return t}
},{"@antv/util":"rU8N"}],"sx3d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getXDimensionLength=r,exports.isFullCircle=n,exports.getDistanceToCenter=a,exports.isPointInCoordinate=i,exports.getAngleByPoint=s,exports.getCoordinateClipCfg=o;var t=require("./graphics"),e=require("./helper");function r(t){if(t.isPolar&&!t.isTransposed)return(t.endAngle-t.startAngle)*t.getRadius();var e=t.convert({x:0,y:0}),r=t.convert({x:1,y:0});return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function n(t){if(t.isPolar){var e=t.startAngle;return t.endAngle-e==2*Math.PI}return!1}function a(t,e){var r=t.getCenter();return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function i(t,r){var n=!1;if(t)if("theta"===t.type){var a=t.start,i=t.end;n=(0,e.isBetween)(r.x,a.x,i.x)&&(0,e.isBetween)(r.y,a.y,i.y)}else{var s=t.invert(r);n=(0,e.isBetween)(s.x,0,1)&&(0,e.isBetween)(s.y,0,1)}return n}function s(t,e){var r=t.getCenter();return Math.atan2(e.y-r.y,e.x-r.x)}function o(e,r){void 0===r&&(r=0);var n,a=e.start,i=e.end,s=e.getWidth(),o=e.getHeight();if(e.isPolar){var h=e.startAngle,g=e.endAngle,p=e.getCenter(),x=e.getRadius();return{type:"path",startState:{path:(0,t.getSectorPath)(p.x,p.y,x+r,h,h)},endState:function(e){var n=(g-h)*e+h;return{path:(0,t.getSectorPath)(p.x,p.y,x+r,h,n)}},attrs:{path:(0,t.getSectorPath)(p.x,p.y,x+r,h,g)}}}return n=e.isTransposed?{height:o+2*r}:{width:s+2*r},{type:"rect",startState:{x:a.x-r,y:i.y-r,width:e.isTransposed?s+2*r:0,height:e.isTransposed?0:o+2*r},endState:n,attrs:{x:a.x-r,y:i.y-r,width:s+2*r,height:o+2*r}}}
},{"./graphics":"L6ru","./helper":"RDFe"}],"mQeB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.catmullRom2bezier=u,exports.getLinePath=i,exports.getSplinePath=v,exports.convertNormalPath=h,exports.convertPolarPath=l,exports.smoothBezier=void 0;var e=require("@antv/matrix-util"),r=require("@antv/util"),t=require("../../../util/coordinate");function a(e,r){var t=[];if(e.length){t.push(["M",e[0].x,e[0].y]);for(var a=1,n=e.length;a<n;a+=1){var s=e[a];t.push(["L",s.x,s.y])}r&&t.push(["Z"])}return t}function n(e,r){for(var t=[e[0]],a=1,n=e.length;a<n;a+=2){var s=r.convert({x:e[a],y:e[a+1]});t.push(s.x,s.y)}return t}function s(e,r,a){var n=a.isTransposed,s=a.startAngle,o=a.endAngle,c={x:e[1],y:e[2]},u={x:r[1],y:r[2]},i=[],v=n?"y":"x",h=Math.abs(u[v]-c[v])*(o-s),l=u[v]>=c[v]?1:0,f=h>Math.PI?1:0,p=a.convert(u),x=(0,t.getDistanceToCenter)(a,p);if(x>=.5)if(h===2*Math.PI){var y={x:(u.x+c.x)/2,y:(u.y+c.y)/2},g=a.convert(y);i.push(["A",x,x,0,f,l,g.x,g.y]),i.push(["A",x,x,0,f,l,p.x,p.y])}else i.push(["A",x,x,0,f,l,p.x,p.y]);return i}function o(e){(0,r.each)(e,function(r,t){if("a"===r[0].toLowerCase()){var a=e[t-1],n=e[t+1];n&&"a"===n[0].toLowerCase()?a&&"l"===a[0].toLowerCase()&&(a[0]="M"):a&&"a"===a[0].toLowerCase()&&n&&"l"===n[0].toLowerCase()&&(n[0]="M")}})}var c=function(r,t,a,n){var s,o,c,u,i=[],v=!!n;if(v){c=[1/0,1/0],u=[-1/0,-1/0];for(var h=0,l=r.length;h<l;h++){var f=r[h];c=e.vec2.min([0,0],c,f),u=e.vec2.max([0,0],u,f)}c=e.vec2.min([0,0],c,n[0]),u=e.vec2.max([0,0],u,n[1])}h=0;for(var p=r.length;h<p;h++){f=r[h];if(a)s=r[h?h-1:p-1],o=r[(h+1)%p];else{if(0===h||h===p-1){i.push(f);continue}s=r[h-1],o=r[h+1]}var x=[0,0];x=e.vec2.sub(x,o,s),x=e.vec2.scale(x,x,t);var y=e.vec2.distance(f,s),g=e.vec2.distance(f,o),m=y+g;0!==m&&(y/=m,g/=m);var d=e.vec2.scale([0,0],x,-y),C=e.vec2.scale([0,0],x,g),w=e.vec2.add([0,0],f,d),L=e.vec2.add([0,0],f,C);v&&(w=e.vec2.max([0,0],w,c),w=e.vec2.min([0,0],w,u),L=e.vec2.max([0,0],L,c),L=e.vec2.min([0,0],L,u)),i.push(w),i.push(L)}return a&&i.push(i.shift()),i};function u(e,r,t){for(var a=!!r,n=[],s=0,o=e.length;s<o;s+=2)n.push([e[s],e[s+1]]);var u,i,v,h=c(n,.4,a,t),l=n.length,f=[];for(s=0;s<l-1;s++)u=h[2*s],i=h[2*s+1],v=n[s+1],f.push(["C",u[0],u[1],i[0],i[1],v[0],v[1]]);return a&&(u=h[l],i=h[l+1],v=n[0],f.push(["C",u[0],u[1],i[0],i[1],v[0],v[1]])),f}function i(e,r){return a(e,r)}function v(e,r,t){var a=[],n=e[0],s=null;if(e.length<=2)return i(e,r);for(var o=0,c=e.length;o<c;o++){var v=e[o];s&&s.x===v.x&&s.y===v.y||(a.push(v.x),a.push(v.y),s=v)}var h=u(a,r,t||[[0,0],[1,1]]);return h.unshift(["M",n.x,n.y]),h}function h(e,t){var a=[];return(0,r.each)(t,function(r){switch(r[0].toLowerCase()){case"m":case"l":case"c":a.push(n(r,e));break;case"z":default:a.push(r)}}),a}function l(e,t){var a,c,u,i=[];return(0,r.each)(t,function(r,o){switch(r[0].toLowerCase()){case"m":case"c":case"q":i.push(n(r,e));break;case"l":a=t[o-1],c=r,u=e.isTransposed,(u?a[a.length-2]===c[1]:a[a.length-1]===c[2])?i=i.concat(s(a,c,e)):i.push(n(r,e));break;case"z":default:i.push(r)}}),o(i),i}exports.smoothBezier=c;
},{"@antv/matrix-util":"n7Fk","@antv/util":"rU8N","../../../util/coordinate":"sx3d"}],"yW7I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toPoints=r,exports.getRegionBBox=exports.BBox=void 0;var t=require("@antv/util"),e=require("../constant"),i=function(){function i(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.height=n,this.width=i}return i.fromRange=function(t,e,n,r){return new i(t,e,n-t,r-e)},Object.defineProperty(i.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.add=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this.clone();return(0,t.each)(e,function(t){n.x=Math.min(t.x,n.x),n.y=Math.min(t.y,n.y),n.width=Math.max(t.maxX,n.maxX)-n.x,n.height=Math.max(t.maxY,n.maxY)-n.y}),n},i.prototype.merge=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this.clone();return(0,t.each)(e,function(t){n.x=Math.max(t.x,n.x),n.y=Math.max(t.y,n.y),n.width=Math.min(t.maxX,n.maxX)-n.x,n.height=Math.min(t.maxY,n.maxY)-n.y}),n},i.prototype.cut=function(t,n){var r=t.width,h=t.height;switch(n){case e.DIRECTION.TOP:case e.DIRECTION.TOP_LEFT:case e.DIRECTION.TOP_RIGHT:return i.fromRange(this.minX,this.minY+h,this.maxX,this.maxY);case e.DIRECTION.RIGHT:case e.DIRECTION.RIGHT_TOP:case e.DIRECTION.RIGHT_BOTTOM:return i.fromRange(this.minX,this.minY,this.maxX-r,this.maxY);case e.DIRECTION.BOTTOM:case e.DIRECTION.BOTTOM_LEFT:case e.DIRECTION.BOTTOM_RIGHT:return i.fromRange(this.minX,this.minY,this.maxX,this.maxY-h);case e.DIRECTION.LEFT:case e.DIRECTION.LEFT_TOP:case e.DIRECTION.LEFT_BOTTOM:return i.fromRange(this.minX+r,this.minY,this.maxX,this.maxY);default:return this}},i.prototype.shrink=function(t){var e=t[0],n=t[1],r=t[2],h=t[3];return new i(this.x+h,this.y+e,this.width-h-n,this.height-e-r)},i.prototype.exceed=function(t){return[Math.max(-this.minY+t.minY,0),Math.max(this.maxX-t.maxX,0),Math.max(this.maxY-t.maxY,0),Math.max(-this.minX+t.minX,0)]},i.prototype.size=function(){return this.width*this.height},i}();exports.BBox=i;var n=function(t,e){var n=e.start,r=e.end;return new i(t.x+t.width*n.x,t.y+t.height*n.y,t.width*Math.abs(r.x-n.x),t.height*Math.abs(r.y-n.y))};function r(t){return[[t.minX,t.minY],[t.maxX,t.minY],[t.maxX,t.maxY],[t.minX,t.maxY]]}exports.getRegionBBox=n;
},{"@antv/util":"rU8N","../constant":"JW8G"}],"GRix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=1e-6;function r(r){return Math.abs(r)<t?0:r<0?-1:1}function e(t,r,e){return(e[0]-t[0])*(r[1]-t[1])==(r[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],r[0])<=e[0]&&e[0]<=Math.max(t[0],r[0])&&Math.min(t[1],r[1])<=e[1]&&e[1]<=Math.max(t[1],r[1])}function n(t,n,a){var u=!1,i=t.length;if(i<=2)return!1;for(var f=0;f<i;f++){var o=t[f],h=t[(f+1)%i];if(e(o,h,[n,a]))return!0;r(o[1]-a)>0!=r(h[1]-a)>0&&r(n-(a-o[1])*(o[0]-h[0])/(o[1]-h[1])-o[0])<0&&(u=!u)}return u}exports.default=n;
},{}],"B6VP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,r,t){return e>=r&&e<=t};function r(r,t,x,u){var y=x.x-r.x,n=x.y-r.y,o=t.x-r.x,a=t.y-r.y,f=u.x-x.x,i=u.y-x.y,l=o*i-a*f,s=null;if(l*l>.001*(o*o+a*a)*(f*f+i*i)){var c=(y*i-n*f)/l,v=(y*a-n*o)/l;e(c,0,1)&&e(v,0,1)&&(s={x:r.x+c*o,y:r.y+c*a})}return s}exports.default=r;
},{}],"XzaO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./point-in-polygon"),r=require("./get-line-intersect"),t=require("@antv/util");function e(n){for(var r=[],t=n.length,e=0;e<t-1;e++){var u=n[e],i=n[e+1];r.push({from:{x:u[0],y:u[1]},to:{x:i[0],y:i[1]}})}if(r.length>1){var a=n[0],f=n[t-1];r.push({from:{x:f[0],y:f[1]},to:{x:a[0],y:a[1]}})}return r}function u(n,e){var u=!1;return t.each(n,function(n){if(r.default(n.from,n.to,e.from,e.to))return u=!0,!1}),u}function i(n){var r=n.map(function(n){return n[0]}),t=n.map(function(n){return n[1]});return{minX:Math.min.apply(null,r),maxX:Math.max.apply(null,r),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function a(n,r){return!(r.minX>n.maxX||r.maxX<n.minX||r.minY>n.maxY||r.maxY<n.minY)}function f(r,f){if(r.length<2||f.length<2)return!1;if(!a(i(r),i(f)))return!1;var o=!1;if(t.each(f,function(t){if(n.default(r,t[0],t[1]))return o=!0,!1}),o)return!0;if(t.each(r,function(r){if(n.default(f,r[0],r[1]))return o=!0,!1}),o)return!0;var l=e(r),m=e(f),c=!1;return t.each(m,function(n){if(u(l,n))return c=!0,!1}),c}exports.default=f;
},{"./point-in-polygon":"GRix","./get-line-intersect":"B6VP","@antv/util":"rU8N"}],"WaBf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCurrentElement=u,exports.getDelegationObject=s,exports.isElementChange=c,exports.isList=l,exports.isSlider=f,exports.isMask=v,exports.getMaskedElements=g,exports.getSiblingMaskElements=p,exports.getElements=x,exports.getElementsByField=m,exports.getElementsByState=h,exports.getElementValue=y,exports.intersectRect=d,exports.getIntersectElements=B,exports.getElementsByPath=E,exports.getComponents=w,exports.distance=b,exports.getSpline=C,exports.isInBox=M,exports.getSilbings=X,exports.getSiblingPoint=q,exports.isInRecords=P,exports.getScaleByField=k;var e=require("@antv/util"),t=require("../../geometry/shape/util/path"),n=require("../../util/bbox"),r=i(require("@antv/path-util/lib/is-polygons-intersect"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.event.target.getCanvasBBox();return n.width>=t||n.height>=t?n:null}function a(e,t){var n=e.event.target,r=n.getCanvasBBox();return r.width>=t||r.height>=t?n.attr("path"):null}function u(e){var t,n=e.event.target;return n&&(t=n.get("element")),t}function s(e){var t,n=e.event.target;return n&&(t=n.get("delegateObject")),t}function c(e){var t=e.event.gEvent;return!(t&&t.fromShape&&t.toShape&&t.fromShape.get("element")===t.toShape.get("element"))}function l(e){return e&&e.component&&e.component.isList()}function f(e){return e&&e.component&&e.component.isSlider()}function v(e){var t=e.event.target;return t&&"mask"===t.get("name")}function g(e,t){if("path"===e.event.target.get("type")){var n=a(e,t);if(!n)return;return E(e.view,n)}var r=o(e,t);return r?B(e.view,r):null}function p(e,t,n){var r=o(e,n);if(!r)return null;var i=e.view,a=q(i,t,{x:r.x,y:r.y}),u=q(i,t,{x:r.maxX,y:r.maxY});return B(t,{minX:a.x,minY:a.y,maxX:u.x,maxY:u.y})}function x(t){var n=t.geometries,r=[];return(0,e.each)(n,function(e){var t=e.elements;r=r.concat(t)}),t.views&&t.views.length&&(0,e.each)(t.views,function(e){r=r.concat(x(e))}),r}function m(e,t,n){return x(e).filter(function(e){return y(e,t)===n})}function h(t,n){var r=t.geometries,i=[];return(0,e.each)(r,function(e){var t=e.getElementsBy(function(e){return e.hasState(n)});i=i.concat(t)}),i}function y(t,n){var r=t.getModel().data;return(0,e.isArray)(r)?r[0][n]:r[n]}function d(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function B(t,n){var r=x(t),i=[];return(0,e.each)(r,function(e){var t=e.shape.getCanvasBBox();d(n,t)&&i.push(e)}),i}function S(t){var n=[];return(0,e.each)(t,function(e){if("A"!==e[0])for(var t=1;t<e.length;t+=2)n.push([e[t],e[t+1]]);else{var r=e.length;n.push([e[r-2],e[r-1]])}}),n}function E(e,t){var i=x(e),o=S(t);return i.filter(function(e){var t,i=e.shape;if("path"===i.get("type"))t=S(i.attr("path"));else{var a=i.getCanvasBBox();t=(0,n.toPoints)(a)}return(0,r.default)(o,t)})}function w(e){return e.getComponents().map(function(e){return e.component})}function b(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function C(n,r){if(n.length<=2)return(0,t.getLinePath)(n,!1);var i=n[0],o=[];(0,e.each)(n,function(e){o.push(e.x),o.push(e.y)});var a=(0,t.catmullRom2bezier)(o,r,null);return a.unshift(["M",i.x,i.y]),a}function M(e,t){return e.x<=t.x&&e.maxX>=t.x&&e.y<=t.y&&e.maxY>t.y}function X(e){var t=e.parent,n=null;return t&&(n=t.views.filter(function(t){return t!==e})),n}function Y(e,t){return e.getCoordinate().invert(t)}function q(e,t,n){var r=Y(e,n);return t.getCoordinate().convert(r)}function P(t,n,r,i){var o=!1;return(0,e.each)(t,function(e){if(e[r]===n[r]&&e[i]===n[i])return o=!0,!1}),o}function k(t,n){var r=t.getScaleByField(n);return!r&&t.views&&(0,e.each)(t.views,function(e){if(r=k(e,n))return!1}),r}
},{"@antv/util":"rU8N","../../geometry/shape/util/path":"mQeB","../../util/bbox":"yW7I","@antv/path-util/lib/is-polygons-intersect":"XzaO"}],"UmnF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),e=require("./action/util"),n=function(){function n(t){this.actions=[],this.event=null,this.cacheMap={},this.view=t}return n.prototype.cache=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length)return this.cacheMap[t[0]];2===t.length&&(this.cacheMap[t[0]]=t[1])},n.prototype.getAction=function(t){return this.actions.find(function(e){return e.name===t})},n.prototype.addAction=function(t){this.actions.push(t)},n.prototype.removeAction=function(t){var e=this.actions,n=this.actions.indexOf(t);n>=0&&e.splice(n,1)},n.prototype.getCurrentPoint=function(){var t=this.event;return t?t.target instanceof HTMLElement?this.view.getCanvas().getPointByClient(t.clientX,t.clientY):{x:t.x,y:t.y}:null},n.prototype.getCurrentShape=function(){return(0,t.get)(this.event,["gEvent","shape"])},n.prototype.isInPlot=function(){var t=this.getCurrentPoint();return!!t&&this.view.isPointInPlot(t)},n.prototype.isInShape=function(t){var e=this.getCurrentShape();return!!e&&e.get("name")===t},n.prototype.isInComponent=function(t){var n=(0,e.getComponents)(this.view),i=this.getCurrentPoint();return!!i&&!!n.find(function(n){var o=n.getBBox();return t?n.get("name")===t&&(0,e.isInBox)(o,i):(0,e.isInBox)(o,i)})},n.prototype.destroy=function(){this.view=null,this.event=null,(0,t.each)(this.actions.slice(),function(t){t.destroy()}),this.actions=null,this.cacheMap=null},n}(),i=n;exports.default=i;
},{"@antv/util":"rU8N","./action/util":"WaBf"}],"J8tg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function t(t,e){this.view=t,this.cfg=e}return t.prototype.init=function(){this.initEvents()},t.prototype.initEvents=function(){},t.prototype.clearEvents=function(){},t.prototype.destroy=function(){this.clearEvents()},t}(),e=t;exports.default=e;
},{}],"s0A1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=require("./action/register"),i=r(require("./context")),o=r(require("./interaction"));function r(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var i=t.split(":"),o=i[0],r=e.getAction(o)||(0,n.createAction)(o,e);if(!r)throw new Error("There is no action named "+o);return{action:r,methodName:i[1]}}function a(t){var e=t.action,n=t.methodName;if(!e[n])throw new Error("Action("+e.name+") doesn't have a method called "+n);e[n]()}var s={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},u=function(o){function r(t,e){var n=o.call(this,t,e)||this;return n.callbackCaches={},n.emitCaches={},n.steps=e,n}return(0,t.__extends)(r,o),r.prototype.init=function(){this.initContext(),o.prototype.init.call(this)},r.prototype.destroy=function(){o.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},r.prototype.initEvents=function(){var t=this;(0,e.each)(this.steps,function(n,i){(0,e.each)(n,function(e){var n=t.getActionCallback(i,e);n&&t.bindEvent(e.trigger,n)})})},r.prototype.clearEvents=function(){var t=this;(0,e.each)(this.steps,function(n,i){(0,e.each)(n,function(e){var n=t.getActionCallback(i,e);n&&t.offEvent(e.trigger,n)})})},r.prototype.initContext=function(){var t=this.view,o=new i.default(t);this.context=o;var r=this.steps;(0,e.each)(r,function(t){(0,e.each)(t,function(t){if((0,e.isFunction)(t.action))t.actionObject={action:(0,n.createCallbackAction)(t.action,o),methodName:"execute"};else if((0,e.isString)(t.action))t.actionObject=c(t.action,o);else if((0,e.isArray)(t.action)){var i=t.action;t.actionObject=[],(0,e.each)(i,function(e){t.actionObject.push(c(e,o))})}})})},r.prototype.isAllowStep=function(t){var e=this.currentStepName,n=this.steps;if(e===t)return!0;if(t===s.SHOW_ENABLE)return!0;if(t===s.PROCESSING)return e===s.START;if(t===s.START)return e!==s.PROCESSING;if(t===s.END)return e===s.PROCESSING||e===s.START;if(t===s.ROLLBACK){if(n[s.END])return e===s.END;if(e===s.START)return!0}return!1},r.prototype.isAllowExcute=function(t,e){if(this.isAllowStep(t)){var n=this.getKey(t,e);return(!e.once||!this.emitCaches[n])&&(!e.isEnable||e.isEnable(this.context))}return!1},r.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},r.prototype.afterExecute=function(t,e){t!==s.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var n=this.getKey(t,e);this.emitCaches[n]=!0},r.prototype.getKey=function(t,e){return t+e.trigger+e.action},r.prototype.getActionCallback=function(t,n){var i=this,o=this.context,r=this.callbackCaches,c=n.actionObject;if(n.action&&c){var s=this.getKey(t,n);if(!r[s]){var u=function(r){o.event=r,i.isAllowExcute(t,n)?((0,e.isArray)(c)?(0,e.each)(c,function(t){o.event=r,a(t)}):(o.event=r,a(c)),i.afterExecute(t,n),n.callback&&(o.event=r,n.callback(o))):o.event=null};n.debounce?r[s]=(0,e.debounce)(u,n.debounce.wait,n.debounce.immediate):n.throttle?r[s]=(0,e.throttle)(u,n.throttle.wait,{leading:n.throttle.leading,trailing:n.throttle.trailing}):r[s]=u}return r[s]}return null},r.prototype.bindEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.addEventListener(n[1],e):"document"===n[0]?document.addEventListener(n[1],e):this.view.on(t,e)},r.prototype.offEvent=function(t,e){var n=t.split(":");"window"===n[0]?window.removeEventListener(n[1],e):"document"===n[0]?document.removeEventListener(n[1],e):this.view.off(t,e)},r}(o.default),l=u;exports.default=l;
},{"tslib":"oMtQ","@antv/util":"rU8N","./action/register":"s1qi","./context":"UmnF","./interaction":"J8tg"}],"Nywp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Action",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"createAction",{enumerable:!0,get:function(){return t.createAction}}),Object.defineProperty(exports,"registerAction",{enumerable:!0,get:function(){return t.registerAction}}),Object.defineProperty(exports,"getActionClass",{enumerable:!0,get:function(){return t.getActionClass}});var e=r(require("./base")),t=require("./register");function r(e){return e&&e.__esModule?e:{default:e}}
},{"./base":"RCAx","./register":"s1qi"}],"qrhx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteraction=u,exports.registerInteraction=c,exports.createInteraction=a,Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Action",{enumerable:!0,get:function(){return n.Action}}),Object.defineProperty(exports,"registerAction",{enumerable:!0,get:function(){return n.registerAction}}),Object.defineProperty(exports,"getActionClass",{enumerable:!0,get:function(){return n.getActionClass}});var e=require("@antv/util"),t=i(require("./grammar-interaction")),r=i(require("./interaction")),n=require("./action");function i(e){return e&&e.__esModule?e:{default:e}}var o={};function u(t){return o[(0,e.lowerCase)(t)]}function c(t,r){o[(0,e.lowerCase)(t)]=r}function a(r,n,i){var o=u(r);if(!o)return null;if((0,e.isPlainObject)(o)){var c=(0,e.mix)((0,e.clone)(o),i);return new t.default(n,c)}return new o(n,i)}
},{"@antv/util":"rU8N","./grammar-interaction":"s0A1","./interaction":"J8tg","./action":"Nywp"}],"fDie":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CROSSHAIR_Y=exports.CROSSHAIR_X=exports.NAME_CLASS=exports.VALUE_CLASS=exports.MARKER_CLASS=exports.LIST_ITEM_CLASS=exports.LIST_CLASS=exports.TITLE_CLASS=exports.CONTAINER_CLASS=void 0,exports.CONTAINER_CLASS="g2-tooltip",exports.TITLE_CLASS="g2-tooltip-title",exports.LIST_CLASS="g2-tooltip-list",exports.LIST_ITEM_CLASS="g2-tooltip-list-item",exports.MARKER_CLASS="g2-tooltip-marker",exports.VALUE_CLASS="g2-tooltip-value",exports.NAME_CLASS="g2-tooltip-name",exports.CROSSHAIR_X="g2-tooltip-crosshair-x",exports.CROSSHAIR_Y="g2-tooltip-crosshair-y";
},{}],"UI8l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createThemeByStylesheet=r;var e=require("tslib"),t=n(require("@antv/component/lib/tooltip/css-const")),l=require("@antv/matrix-util"),i=require("@antv/util"),o=require("../util/graphics");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var l={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=i?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(l,o,n):l[o]=e[o]}return l.default=e,t&&t.set(e,l),l}function r(a){var n,r={point:{default:{fill:a.pointFillColor,r:a.pointSize,stroke:a.pointBorderColor,lineWidth:a.pointBorder,fillOpacity:a.pointFillOpacity},active:{stroke:a.pointActiveBorderColor,lineWidth:a.pointActiveBorder},selected:{stroke:a.pointSelectedBorderColor,lineWidth:a.pointSelectedBorder},inactive:{fillOpacity:a.pointInactiveFillOpacity,strokeOpacity:a.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:a.hollowPointFillColor,lineWidth:a.hollowPointBorder,stroke:a.hollowPointBorderColor,strokeOpacity:a.hollowPointBorderOpacity,r:a.hollowPointSize},active:{stroke:a.hollowPointActiveBorderColor,strokeOpacity:a.hollowPointActiveBorderOpacity},selected:{lineWidth:a.hollowPointSelectedBorder,stroke:a.hollowPointSelectedBorderColor,strokeOpacity:a.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:a.hollowPointInactiveBorderOpacity}},area:{default:{fill:a.areaFillColor,fillOpacity:a.areaFillOpacity,stroke:null},active:{fillOpacity:a.areaActiveFillOpacity},selected:{fillOpacity:a.areaSelectedFillOpacity},inactive:{fillOpacity:a.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:a.hollowAreaBorderColor,lineWidth:a.hollowAreaBorder,strokeOpacity:a.hollowAreaBorderOpacity},active:{fill:null,lineWidth:a.hollowAreaActiveBorder},selected:{fill:null,lineWidth:a.hollowAreaSelectedBorder},inactive:{strokeOpacity:a.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:a.intervalFillColor,fillOpacity:a.intervalFillOpacity},active:{stroke:a.intervalActiveBorderColor,lineWidth:a.intervalActiveBorder},selected:{stroke:a.intervalSelectedBorderColor,lineWidth:a.intervalSelectedBorder},inactive:{fillOpacity:a.intervalInactiveFillOpacity,strokeOpacity:a.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:a.hollowIntervalFillColor,stroke:a.hollowIntervalBorderColor,lineWidth:a.hollowIntervalBorder,strokeOpacity:a.hollowIntervalBorderOpacity},active:{stroke:a.hollowIntervalActiveBorderColor,lineWidth:a.hollowIntervalActiveBorder,strokeOpacity:a.hollowIntervalActiveBorderOpacity},selected:{stroke:a.hollowIntervalSelectedBorderColor,lineWidth:a.hollowIntervalSelectedBorder,strokeOpacity:a.hollowIntervalSelectedBorderOpacity},inactive:{stroke:a.hollowIntervalInactiveBorderColor,lineWidth:a.hollowIntervalInactiveBorder,strokeOpacity:a.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:a.lineBorderColor,lineWidth:a.lineBorder,strokeOpacity:a.lineBorderOpacity,fill:null,lineAppendWidth:10},active:{lineWidth:a.lineActiveBorder},selected:{lineWidth:a.lineSelectedBorder},inactive:{strokeOpacity:a.lineInactiveBorderOpacity}}},s={title:{autoRotate:!0,position:"center",style:{fill:a.axisTitleTextFillColor,fontSize:a.axisTitleTextFontSize,lineHeight:a.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:a.fontFamily}},label:{autoRotate:!0,autoEllipsis:!0,autoHide:!0,offset:16,style:{fill:a.axisLabelFillColor,fontSize:a.axisLabelFontSize,lineHeight:a.axisLabelLineHeight,textBaseline:"middle",fontFamily:a.fontFamily}},line:{style:{lineWidth:a.axisLineBorder,stroke:a.axisLineBorderColor}},tickLine:{style:{lineWidth:a.axisTickLineBorder,stroke:a.axisTickLineBorderColor},alignTick:!0,length:a.axisTickLineLength},subTickLine:null,animate:!0},c={line:{type:"line",style:{stroke:a.axisGridBorderColor,lineWidth:a.axisGridBorder,lineDash:a.axisGridLineDash}},alignTick:!0,animate:!0},d={title:null,marker:{symbol:"circle",style:{r:a.legendCircleMarkerSize,fill:a.legendMarkerColor}},itemName:{spacing:5,style:{fill:a.legendItemNameFillColor,fontFamily:a.fontFamily,fontSize:a.legendItemNameFontSize,lineHeight:a.legendItemNameLineHeight,fontWeight:a.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:.2};return{background:a.backgroundColor,defaultColor:a.brandColor,padding:"auto",fontFamily:a.fontFamily,columnWidthRatio:.5,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:a.paletteQualitative10,colors20:a.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:r.interval.default},active:{style:r.interval.active},inactive:{style:r.interval.inactive},selected:{style:function(e){var t=e.geometry.coordinate;if(t.isPolar&&t.isTransposed){var i=(0,o.getAngle)(e.getModel(),t),a=(i.startAngle+i.endAngle)/2,n=7.5*Math.cos(a),s=7.5*Math.sin(a);return{matrix:l.ext.transform(null,[["t",n,s]])}}return r.interval.selected}}},"hollow-rect":{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}},line:{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}},tick:{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}},funnel:{default:{style:r.interval.default},active:{style:r.interval.active},inactive:{style:r.interval.inactive},selected:{style:r.interval.selected}},pyramid:{default:{style:r.interval.default},active:{style:r.interval.active},inactive:{style:r.interval.inactive},selected:{style:r.interval.selected}}},line:{line:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},dot:{default:{style:(0,e.__assign)((0,e.__assign)({},r.line.default),{lineDash:[1,1]})},active:{style:(0,e.__assign)((0,e.__assign)({},r.line.active),{lineDash:[1,1]})},inactive:{style:(0,e.__assign)((0,e.__assign)({},r.line.inactive),{lineDash:[1,1]})},selected:{style:(0,e.__assign)((0,e.__assign)({},r.line.selected),{lineDash:[1,1]})}},dash:{default:{style:(0,e.__assign)((0,e.__assign)({},r.line.default),{lineDash:[5.5,1]})},active:{style:(0,e.__assign)((0,e.__assign)({},r.line.active),{lineDash:[5.5,1]})},inactive:{style:(0,e.__assign)((0,e.__assign)({},r.line.inactive),{lineDash:[5.5,1]})},selected:{style:(0,e.__assign)((0,e.__assign)({},r.line.selected),{lineDash:[5.5,1]})}},smooth:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},hv:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},vh:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},hvh:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},vhv:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}}},polygon:{polygon:{default:{style:r.interval.default},active:{style:r.interval.active},inactive:{style:r.interval.inactive},selected:{style:r.interval.selected}}},point:{circle:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},square:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},bowtie:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},diamond:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},hexagon:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},triangle:{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},"triangle-down":{default:{style:r.point.default},active:{style:r.point.active},inactive:{style:r.point.inactive},selected:{style:r.point.selected}},"hollow-circle":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-square":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-bowtie":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-diamond":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-hexagon":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-triangle":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},"hollow-triangle-down":{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},cross:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},tick:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},plus:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},hyphen:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}},line:{default:{style:r.hollowPoint.default},active:{style:r.hollowPoint.active},inactive:{style:r.hollowPoint.inactive},selected:{style:r.hollowPoint.selected}}},area:{area:{default:{style:r.area.default},active:{style:r.area.active},inactive:{style:r.area.inactive},selected:{style:r.area.selected}},smooth:{default:{style:r.area.default},active:{style:r.area.active},inactive:{style:r.area.inactive},selected:{style:r.area.selected}},line:{default:{style:r.hollowArea.default},active:{style:r.hollowArea.active},inactive:{style:r.hollowArea.inactive},selected:{style:r.hollowArea.selected}},"smooth-line":{default:{style:r.hollowArea.default},active:{style:r.hollowArea.active},inactive:{style:r.hollowArea.inactive},selected:{style:r.hollowArea.selected}}},schema:{candle:{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}},box:{default:{style:r.hollowInterval.default},active:{style:r.hollowInterval.active},inactive:{style:r.hollowInterval.inactive},selected:{style:r.hollowInterval.selected}}},edge:{line:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},vhv:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},smooth:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}},arc:{default:{style:r.line.default},active:{style:r.line.active},inactive:{style:r.line.inactive},selected:{style:r.line.selected}}}},components:{axis:{top:(0,i.deepMix)({},s,{position:"top",grid:null,title:null,verticalLimitLength:.5}),bottom:(0,i.deepMix)({},s,{position:"bottom",grid:null,title:null,verticalLimitLength:.5}),left:(0,i.deepMix)({},s,{position:"left",label:{offset:8},title:null,line:null,tickLine:null,grid:c,verticalLimitLength:1/3}),right:(0,i.deepMix)({},s,{position:"right",label:{offset:8},title:null,line:null,tickLine:null,grid:c,verticalLimitLength:1/3}),circle:(0,i.deepMix)({},s,{title:null,label:{offset:8},grid:(0,i.deepMix)({},c,{line:{type:"line"}})}),radius:(0,i.deepMix)({},s,{title:null,label:{offset:8},grid:(0,i.deepMix)({},c,{line:{type:"circle"}})})},legend:{right:(0,i.deepMix)({},d,{layout:"vertical"}),left:(0,i.deepMix)({},d,{layout:"vertical"}),top:(0,i.deepMix)({},d,{layout:"horizontal"}),bottom:(0,i.deepMix)({},d,{layout:"horizontal"}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:a.sliderRailHeight,defaultLength:a.sliderRailWidth,style:{fill:a.sliderRailFillColor,stroke:a.sliderRailBorderColor,lineWidth:a.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:a.sliderLabelTextFillColor,fontSize:a.sliderLabelTextFontSize,lineHeight:a.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:a.fontFamily}},handler:{size:a.sliderHandlerWidth,style:{fill:a.sliderHandlerFillColor,stroke:a.sliderHandlerBorderColor}},slidable:!0},margin:[0,0,0,0]},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:a.tooltipCrosshairsBorderColor,lineWidth:a.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(n={},n[""+t.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:a.tooltipContainerFillColor,opacity:a.tooltipContainerFillOpacity,boxShadow:a.tooltipContainerShadow,borderRadius:a.tooltipContainerBorderRadius+"px",color:a.tooltipTextFillColor,fontSize:a.tooltipTextFontSize+"px",fontFamily:a.fontFamily,lineHeight:a.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},n[""+t.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},n[""+t.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},n[""+t.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},n[""+t.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},n[""+t.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},n)},annotation:{arc:{style:{stroke:a.annotationArcBorderColor,lineWidth:a.annotationArcBorder},animate:!0},line:{style:{stroke:a.annotationLineBorderColor,lineDash:a.annotationLineDash,lineWidth:a.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,textAlign:"start",fontFamily:a.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:a.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:a.annotationRegionBorder,stroke:a.annotationRegionBorderColor,fill:a.annotationRegionFillColor,fillOpacity:a.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:a.brandColor,lineWidth:2}},line:{style:{stroke:a.annotationLineBorderColor,lineWidth:a.annotationLineBorder},length:a.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,fontFamily:a.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:a.annotationRegionFillColor,fillOpacity:a.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:a.annotationTextFillColor,stroke:a.annotationTextBorderColor,lineWidth:a.annotationTextBorder,fontSize:a.annotationTextFontSize,fontFamily:a.fontFamily}},animate:!0}}},labels:{offset:12,style:{fill:a.labelFillColor,fontSize:a.labelFontSize,fontFamily:a.fontFamily,stroke:a.labelBorderColor,lineWidth:a.labelBorder},autoRotate:!0},innerLabels:{style:{fill:a.innerLabelFillColor,fontSize:a.innerLabelFontSize,fontFamily:a.fontFamily,stroke:a.innerLabelBorderColor,lineWidth:a.innerLabelBorder},autoRotate:!0},pieLabels:{labelHeight:14,offset:30,labelLine:{style:{lineWidth:a.labelLineBorder}},autoRotate:!0}}}
},{"tslib":"oMtQ","@antv/component/lib/tooltip/css-const":"fDie","@antv/matrix-util":"n7Fk","@antv/util":"rU8N","../util/graphics":"L6ru"}],"PS6b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.antvLight=void 0;var e={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},o={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},l=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],r=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],i={backgroundColor:"transparent",brandColor:l[0],paletteQualitative10:l,paletteQualitative20:r,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:'"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,\n  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n  "Noto Color Emoji"',axisLineBorderColor:e[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:e[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:e[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:e[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:e[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:e[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:e[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:l[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:e[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:e[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:e[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:e[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:e[25],annotationArcBorderColor:e[15],annotationArcBorder:.5,annotationLineBorderColor:e[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:e[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:o[95],annotationTextBorder:1.5,annotationRegionFillColor:e[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:e[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:e[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:e[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:o[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:e[25],pointFillColor:l[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:o[100],pointBorderOpacity:1,pointActiveBorderColor:e[100],pointSelectedBorder:2,pointSelectedBorderColor:e[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:l[0],hollowPointBorderOpacity:.95,hollowPointFillColor:o[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:e[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:e[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:l[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:l[0],areaFillOpacity:.25,areaActiveFillColor:l[0],areaActiveFillOpacity:.5,areaSelectedFillColor:l[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:l[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:e[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:e[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:l[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:e[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:e[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:l[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:o[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:e[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:e[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};exports.antvLight=i;
},{}],"C6xV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTheme=l,exports.registerTheme=s;var e=require("@antv/util"),t=require("../util/theme"),r=require("./style-sheet/light"),u=(0,t.createThemeByStylesheet)(r.antvLight),i={default:u};function l(t){return(0,e.get)(i,(0,e.lowerCase)(t),i.default)}function s(t,r){i[(0,e.lowerCase)(t)]=(0,e.deepMix)({},i.default,r)}
},{"@antv/util":"rU8N","../util/theme":"UI8l","./style-sheet/light":"PS6b"}],"yb3W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.findDataByPoint=c,exports.getTooltipItems=g;var e=require("tslib"),t=require("@antv/util"),r=require("../constant"),a=require("./scale");function n(e,r,a){var n=a.translate(e),i=a.translate(r);return(0,t.isNumberEqual)(n,i)}function i(e,t){var r=t.coordinate,a=t.getXScale(),n=a.range,i=n[n.length-1],l=n[0],s=r.invert(e).x;return r.isPolar&&s>(1+i)/2&&(s=l),a.translate(a.invert(s))}function l(e,a,n){var i=n.coordinate,l=n.getYScale(),s=l.field,o=i.invert(a),u=l.invert(o.y);return(0,t.find)(e,function(e){var t=e[r.FIELD_ORIGIN];return t[s][0]<=u&&t[s][1]>=u})||e[e.length-1]}var s=(0,t.memoize)(function(e){if(e.isCategory)return 1;for(var t=e.values,r=t.length,a=e.translate(t[0]),n=a,i=0;i<r;i++){var l=t[i],s=e.translate(l);s<a&&(a=s),s>n&&(n=s)}return(n-a)/(r-1)});function o(e,r,a){var n=a;a||(n=r.getAttribute("position").getFields()[0]);var i=r.scales;return i[n]?i[n].getText(e[n]):(0,t.hasKey)(e,n)?e[n]:n}function u(e){var a=(0,t.values)(e.attributes);return(0,t.filter)(a,function(e){return(0,t.contains)(r.GROUP_ATTRS,e.type)})}function f(e){for(var t,r=0,a=u(e);r<a.length;r++){var n=a[r],i=n.getScale(n.type);if(i&&i.isLinear){t=i;break}}var l=e.getXScale(),s=e.getYScale();return t||s||l}function v(e,r){var a=e[r.field];return(0,t.isArray)(a)?a.map(function(e){return r.getText(e)}).join("-"):r.getText(a)}function I(e,t){var r,n=t.getGroupScales();if(n.length&&(r=n[0]),r){var i=r.field;return r.getText(e[i])}var l=f(t);return(0,a.getName)(l)}function c(e,a,o){if(0===a.length)return null;var u=o.type,f=o.getXScale(),v=o.getYScale(),I=f.field,c=v.field,g=null;if("heatmap"===u||"point"===u){for(var p=o.coordinate.invert(e),h=f.invert(p.x),d=v.invert(p.y),N=1/0,_=0;_<a.length;_++){var m=a[_],y=m[r.FIELD_ORIGIN],O=Math.pow(y[I]-h,2)+Math.pow(y[c]-d,2);O<N&&(N=O,g=m)}return g}var D=a[0],L=a[a.length-1],G=i(e,o),R=D[r.FIELD_ORIGIN][I],E=D[r.FIELD_ORIGIN][c],F=L[r.FIELD_ORIGIN][I],b=v.isLinear&&(0,t.isArray)(E);if((0,t.isArray)(R)){for(_=0;_<a.length;_++){y=(k=a[_])[r.FIELD_ORIGIN];if(f.translate(y[I][0])<=G&&f.translate(y[I][1])>=G){if(!b){g=k;break}(0,t.isArray)(g)||(g=[]),g.push(k)}}(0,t.isArray)(g)&&(g=l(g,e,o))}else{var x=void 0;if(f.isLinear||"timeCat"===f.type){if((G>f.translate(F)||G<f.translate(R))&&(G>f.max||G<f.min))return null;for(var S=0,A=a.length-1,T=void 0;S<=A;){var M=a[T=Math.floor((S+A)/2)][r.FIELD_ORIGIN][I];if(n(M,G,f))return a[T];f.translate(M)<=f.translate(G)?(S=T+1,L=a[T],x=a[T+1]):(0===A&&(L=a[0]),A=T-1)}}else{for(_=0;_<a.length;_++){var k;if(n((y=(k=a[_])[r.FIELD_ORIGIN])[I],G,f)){if(!b){g=k;break}(0,t.isArray)(g)||(g=[]),g.push(k)}else f.translate(y[I])<=G&&(L=k,x=a[_+1])}(0,t.isArray)(g)&&(g=l(g,e,o))}L&&x&&Math.abs(f.translate(L[r.FIELD_ORIGIN][I])-G)>Math.abs(f.translate(x[r.FIELD_ORIGIN][I])-G)&&(L=x)}var q=s(o.getXScale());return!g&&Math.abs(f.translate(L[r.FIELD_ORIGIN][I])-G)<=q/2&&(g=L),g}function g(n,i,l){void 0===l&&(l="");var s,u=n[r.FIELD_ORIGIN],c=o(u,i,l),g=i.tooltipOption,p=i.theme.defaultColor,h=[];function d(e,r){if(!(0,t.isNil)(r)&&""!==r){var a={title:c,data:u,mappingData:n,name:e,value:r,color:n.color||p,marker:!0};h.push(a)}}if((0,t.isObject)(g)){var N=g.fields,_=g.callback;if(_){var m=N.map(function(e){return n[r.FIELD_ORIGIN][e]}),y=_.apply(void 0,m),O=(0,e.__assign)({data:n[r.FIELD_ORIGIN],mappingData:n,title:c,color:n.color||p,marker:!0},y);h.push(O)}else for(var D=i.scales,L=0,G=N;L<G.length;L++){var R=G[L];if(!(0,t.isNil)(u[R])){var E=D[R];d((0,a.getName)(E),s=E.getText(u[R]))}}}else{var F=f(i);(0,t.isNil)(u[F.field])||(s=v(u,F),d(I(u,i),s))}return h}
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","./scale":"YUW9"}],"QSbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerComponentController=t,exports.unregisterComponentController=o,exports.getComponentControllerNames=r,exports.getComponentController=n;var e={};function t(t,o){e[t]=o}function o(t){delete e[t]}function r(){return Object.keys(e)}function n(t){return e[t]}
},{}],"GSbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),o=require("@antv/util"),e=require("../../dependents"),i=function(){function i(t){this.option=this.wrapperOption(t)}return i.prototype.update=function(t){return this.option=this.wrapperOption(t),this},i.prototype.hasAction=function(t){var e=this.option.actions;return(0,o.some)(e,function(o){return o[0]===t})},i.prototype.create=function(o,i){var n=this.option,r=n.type,s=n.cfg,p="theta"===r,a=(0,t.__assign)({start:o,end:i},s),c=(0,e.getCoordinate)(p?"polar":r);return this.coordinate=new c(a),this.coordinate.type=r,p&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},i.prototype.adjust=function(t,o){return this.coordinate.update({start:t,end:o}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},i.prototype.rotate=function(t){return this.option.actions.push(["rotate",t]),this},i.prototype.reflect=function(t){return this.option.actions.push(["reflect",t]),this},i.prototype.scale=function(t,o){return this.option.actions.push(["scale",t,o]),this},i.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},i.prototype.getOption=function(){return this.option},i.prototype.getCoordinate=function(){return this.coordinate},i.prototype.wrapperOption=function(o){return(0,t.__assign)({type:"rect",actions:[],cfg:{}},o)},i.prototype.execActions=function(t){var e=this,i=this.option.actions;(0,o.each)(i,function(i){var n,r=i[0],s=i.slice(1);(!!(0,o.isNil)(t)||t.includes(r))&&(n=e.coordinate)[r].apply(n,s)})},i}(),n=i;exports.default=n;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../dependents":"iPWy"}],"sgTc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){function e(e,t,n){this.view=e,this.gEvent=t,this.data=n,this.type=t.type}return Object.defineProperty(e.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.clone=function(){return new e(this.view,this.gEvent,this.data)},e}(),t=e;exports.default=t;
},{}],"eanz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAutoPadding=a,exports.parsePadding=s;var r=require("tslib"),e=require("@antv/util");function a(r){return!(0,e.isNumber)(r)&&!(0,e.isArray)(r)}function s(a){void 0===a&&(a=0);var s=(0,e.isArray)(a)?a:[a];switch(s.length){case 0:s=[0,0,0,0];break;case 1:s=new Array(4).fill(s[0]);break;case 2:s=(0,r.__spreadArrays)(s,s);break;case 3:s=(0,r.__spreadArrays)(s,[s[1]]);break;default:s=s.slice(0,4)}return s}
},{"tslib":"oMtQ","@antv/util":"rU8N"}],"s3ar":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PaddingCal=void 0;var t=require("../../constant"),i=function(){function i(t,i,e,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=0),this.top=t,this.right=i,this.bottom=e,this.left=s}return i.prototype.shrink=function(t){var i=t[0],e=t[1],s=t[2],T=t[3];return this.top+=i,this.right+=e,this.bottom+=s,this.left+=T,this},i.prototype.inc=function(i,e){var s=i.width,T=i.height;switch(e){case t.DIRECTION.TOP:case t.DIRECTION.TOP_LEFT:case t.DIRECTION.TOP_RIGHT:this.top+=T;break;case t.DIRECTION.RIGHT:case t.DIRECTION.RIGHT_TOP:case t.DIRECTION.RIGHT_BOTTOM:this.right+=s;break;case t.DIRECTION.BOTTOM:case t.DIRECTION.BOTTOM_LEFT:case t.DIRECTION.BOTTOM_RIGHT:this.bottom+=T;break;case t.DIRECTION.LEFT:case t.DIRECTION.LEFT_TOP:case t.DIRECTION.LEFT_BOTTOM:this.left+=s}return this},i.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},i}();exports.PaddingCal=i;
},{"../../constant":"JW8G"}],"He2O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculatePadding=n;var e=require("@antv/util"),a=require("../../constant"),i=require("../../util/bbox"),r=require("../../util/padding"),t=require("./padding-cal");function n(n){var d=n.padding;if(!(0,r.isAutoPadding)(d))return(0,r.parsePadding)(d);var u=n.viewBBox,o=n.autoPadding,P=new t.PaddingCal;(0,e.each)(n.getComponents(),function(e){var r=e.component,t=e.type;if(t!==a.COMPONENT_TYPE.GRID&&t!==a.COMPONENT_TYPE.TOOLTIP){var n=r.getLayoutBBox(),d=new i.BBox(n.x,n.y,n.width,n.height);if(t===a.COMPONENT_TYPE.AXIS){var o=d.exceed(u);P.shrink(o)}else{var g=e.direction;P.inc(d,g)}}});var g=P.getPadding();if(o){var c=(0,r.parsePadding)(n.appendPadding);return[Math.max(o[0]-c[0],g[0]),Math.max(o[1]-c[1],g[1]),Math.max(o[2]-c[2],g[2]),Math.max(o[3]-c[3],g[3])]}return g}
},{"@antv/util":"rU8N","../../constant":"JW8G","../../util/bbox":"yW7I","../../util/padding":"eanz","./padding-cal":"s3ar"}],"EswG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../util/padding"),r=require("./auto");function t(t){var o=t.getController("axis"),n=t.getController("legend"),a=t.getController("annotation"),i=t.getController("slider"),d=(0,r.calculatePadding)(t);t.coordinateBBox=t.viewBBox.shrink(d).shrink((0,e.parsePadding)(t.appendPadding)),t.adjustCoordinate(),[o,i,n,a].forEach(function(e){e&&e.layout()})}
},{"../../util/padding":"eanz","./auto":"He2O"}],"vEqs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScalePool=void 0;var e=require("@antv/util"),t=require("../../util/scale"),a=function(){function a(){this.scales=new Map,this.syncScales=new Map}return a.prototype.createScale=function(a,c,s,n){var i=s,l=this.getScaleMeta(n);if(0===c.length&&l){var r=l.scale,o={type:r.type};r.isCategory&&(o.values=r.values),i=(0,e.deepMix)(o,l.scaleDef,s)}var u=(0,t.createScaleByField)(a,c,i);return this.cacheScale(u,s,n),u},a.prototype.sync=function(){var t=this;this.syncScales.forEach(function(a,c){var s=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,i=[];(0,e.each)(a,function(a){var c=t.getScale(a);n=(0,e.isNumber)(c.max)?Math.max(n,c.max):n,s=(0,e.isNumber)(c.min)?Math.min(s,c.min):s,(0,e.each)(c.values,function(e){i.includes(e)||i.push(e)})}),(0,e.each)(a,function(e){var a=t.getScale(e);a.isContinuous?a.change({min:s,max:n,values:i}):a.isCategory&&a.change({values:i})})})},a.prototype.cacheScale=function(e,a,c){var s=this.getScaleMeta(c);s&&s.scale.type===e.type?((0,t.syncScale)(s.scale,e),s.scaleDef=a):(s={key:c,scale:e,scaleDef:a},this.scales.set(c,s));var n=this.getSyncKey(s);if(s.syncKey=n,this.removeFromSyncScales(c),n){var i=this.syncScales.get(n);i||(i=[],this.syncScales.set(n,i)),i.push(c)}},a.prototype.getScale=function(t){var a=this.getScaleMeta(t);if(!a){var c=(0,e.last)(t.split("-")),s=this.syncScales.get(c);s&&s.length&&(a=this.getScaleMeta(s[0]))}return a&&a.scale},a.prototype.deleteScale=function(e){var t=this.getScaleMeta(e);if(t){var a=t.syncKey,c=this.syncScales.get(a);if(c&&c.length){var s=c.indexOf(e);-1!==s&&c.splice(s,1)}}this.scales.delete(e)},a.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},a.prototype.removeFromSyncScales=function(e){var t=this;this.syncScales.forEach(function(a,c){var s=a.indexOf(e);if(-1!==s)return a.splice(s,1),0===a.length&&t.syncScales.delete(c),!1})},a.prototype.getSyncKey=function(t){var a=t.scale,c=t.scaleDef,s=a.field,n=(0,e.get)(c,["sync"]);return!0===n?s:!1===n?void 0:n},a.prototype.getScaleMeta=function(e){return this.scales.get(e)},a}();exports.ScalePool=a;
},{"@antv/util":"rU8N","../../util/scale":"YUW9"}],"IZMl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerGeometry=E,exports.default=exports.View=void 0;var t=require("tslib"),e=require("@antv/util"),o=require("../constant"),i=y(require("../base")),n=require("../facet"),r=require("../interaction"),s=require("../theme"),a=require("../util/bbox"),h=require("../util/coordinate"),c=require("../util/helper"),l=require("../util/tooltip"),p=require("./controller"),u=y(require("./controller/coordinate")),d=y(require("./event")),g=y(require("./layout")),v=require("./util/scale-pool"),f=require("../util/padding");function y(t){return t&&t.__esModule?t:{default:t}}var m=function(i){function y(o){var n=i.call(this,{visible:o.visible})||this;n.id=(0,e.uniqueId)("view"),n.views=[],n.geometries=[],n.controllers=[],n.interactions={},n.limitInPlot=!1,n.options={data:[],animate:!0},n.usedControllers=(0,p.getComponentControllerNames)(),n.scalePool=new v.ScalePool,n.layoutFunc=g.default,n.isPreMouseInPlot=!1,n.isDataChanged=!1,n.isCoordinateChanged=!1,n.createdScaleKeys=new Map,n.onCanvasEvent=function(t){var e=t.name;if(!e.includes(":")){var o=n.createViewEvent(t);n.doPlotEvent(o),n.emit(e,o)}},n.onDelegateEvents=function(t){var e=t.name;if(e.includes(":")){var o=n.createViewEvent(t);n.emit(e,o)}};var r=o.parent,a=o.canvas,h=o.backgroundGroup,c=o.middleGroup,l=o.foregroundGroup,u=o.region,d=void 0===u?{start:{x:0,y:0},end:{x:1,y:1}}:u,f=o.padding,y=o.appendPadding,m=o.theme,E=o.options,C=o.limitInPlot;return n.parent=r,n.canvas=a,n.backgroundGroup=h,n.middleGroup=c,n.foregroundGroup=l,n.region=d,n.padding=f,n.appendPadding=y,n.options=(0,t.__assign)((0,t.__assign)({},n.options),E),n.limitInPlot=C,n.themeObject=(0,e.isObject)(m)?(0,e.deepMix)({},(0,s.getTheme)("default"),m):(0,s.getTheme)(m),n.init(),n}return(0,t.__extends)(y,i),y.prototype.setLayout=function(t){this.layoutFunc=t},y.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.coordinateController=new u.default(this.options.coordinate),this.initOptions();for(var t=this.views,e=0;e<t.length;e++)t[e].init()},y.prototype.render=function(t){void 0===t&&(t=!1),this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_RENDER),this.paint(t),this.emit(o.VIEW_LIFE_CIRCLE.AFTER_RENDER),!1===this.visible&&this.changeVisible(!1)},y.prototype.clear=function(){var t=this;this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var e=this.geometries,i=0;i<e.length;i++)e[i].clear();this.geometries=[];var n=this.controllers;for(i=0;i<n.length;i++)n[i].clear();this.createdScaleKeys.forEach(function(e,o){t.getRootView().scalePool.deleteScale(o)}),this.createdScaleKeys.clear();var r=this.views;for(i=0;i<r.length;i++)r[i].clear();this.emit(o.VIEW_LIFE_CIRCLE.AFTER_CLEAR)},y.prototype.destroy=function(){this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_DESTROY);var t=this.interactions;(0,e.each)(t,function(t){t&&t.destroy()}),this.clear();for(var n=this.controllers,r=0,s=n.length;r<s;r++){n[r].destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),i.prototype.destroy.call(this)},y.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t);for(var e=this.geometries,o=0,n=e.length;o<n;o++){e[o].changeVisible(t)}var r=this.controllers;for(o=0,n=r.length;o<n;o++){r[o].changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},y.prototype.data=function(t){return(0,e.set)(this.options,"data",t),this.isDataChanged=!0,this},y.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},y.prototype.filter=function(t,o){return(0,e.isFunction)(o)?((0,e.set)(this.options,["filters",t],o),this):(!o&&(0,e.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},y.prototype.axis=function(t,o){return(0,e.isBoolean)(t)?(0,e.set)(this.options,["axes"],t):(0,e.set)(this.options,["axes",t],o),this},y.prototype.legend=function(t,o){return(0,e.isBoolean)(t)?(0,e.set)(this.options,["legends"],t):(0,e.isString)(t)?(0,e.set)(this.options,["legends",t],o):(0,e.set)(this.options,["legends"],t),this},y.prototype.scale=function(t,o){var i=this;return(0,e.isString)(t)?(0,e.set)(this.options,["scales",t],o):(0,e.isObject)(t)&&(0,e.each)(t,function(t,o){(0,e.set)(i.options,["scales",o],t)}),this},y.prototype.tooltip=function(t){return(0,e.set)(this.options,"tooltip",t),this},y.prototype.annotation=function(){return this.getController("annotation")},y.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},y.prototype.coordinate=function(t,o){return(0,e.isString)(t)?(0,e.set)(this.options,"coordinate",{type:t,cfg:o}):(0,e.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},y.prototype.coord=function(t,e){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,e)},y.prototype.facet=function(e,o){this.facetInstance&&this.facetInstance.destroy();var i=(0,n.getFacet)(e);if(!i)throw new Error("facet '"+e+"' is not exist!");return this.facetInstance=new i(this,(0,t.__assign)((0,t.__assign)({},o),{type:e})),this},y.prototype.animate=function(t){return(0,e.set)(this.options,"animate",t),this},y.prototype.updateOptions=function(t){return this.clear(),(0,e.mix)(this.options,t),this.initOptions(),this},y.prototype.option=function(t,o){if(y.prototype[t])throw new Error("Can't use built in variable name \""+t+'", please change another one.');return(0,e.set)(this.options,t,o),this},y.prototype.theme=function(t){return this.themeObject=(0,e.isObject)(t)?(0,e.deepMix)({},this.themeObject,t):(0,s.getTheme)(t),this},y.prototype.interaction=function(t,e){var o=this.interactions[t];o&&o.destroy();var i=(0,r.createInteraction)(t,this,e);return i&&(i.init(),this.interactions[t]=i),this},y.prototype.removeInteraction=function(t){var e=this.interactions[t];e&&(e.destroy(),this.interactions[t]=void 0)},y.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var e=this.views,i=0,n=e.length;i<n;i++){e[i].changeData(t)}this.emit(o.VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA)},y.prototype.createView=function(i){var n={data:this.options.data,scales:(0,e.clone)(this.options.scales),axes:(0,e.clone)(this.options.axes),coordinate:(0,e.clone)(this.coordinateController.getOption()),tooltip:(0,e.clone)(this.options.tooltip),legends:(0,e.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},r=new y((0,t.__assign)((0,t.__assign)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:o.GROUP_Z_INDEX.BG}),middleGroup:this.middleGroup.addGroup({zIndex:o.GROUP_Z_INDEX.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:o.GROUP_Z_INDEX.FORE}),theme:this.themeObject,padding:this.padding},i),{options:(0,t.__assign)((0,t.__assign)({},n),(0,e.get)(i,"options",{}))}));return this.views.push(r),r},y.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},y.prototype.removeView=function(t){var o=(0,e.remove)(this.views,function(e){return e===t})[0];return o&&o.destroy(),o},y.prototype.getCoordinate=function(){return this.coordinateInstance},y.prototype.getTheme=function(){return this.themeObject},y.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},y.prototype.getYScales=function(){var t={};return this.geometries.map(function(e){var o=e.getYScale(),i=o.field;if(!t[i])return t[i]=!0,o})},y.prototype.getScalesByDim=function(t){for(var e=this.geometries,o={},i=0,n=e.length;i<n;i++){var r=e[i],s="x"===t?r.getXScale():r.getYScale();s&&!o[s.field]&&(o[s.field]=s)}return o},y.prototype.getScaleByField=function(t,e){var o=e||this.getScaleKey(t);return this.getRootView().scalePool.getScale(o)},y.prototype.getOptions=function(){return this.options},y.prototype.getData=function(){return this.filteredData},y.prototype.getLayer=function(t){return t===o.LAYER.BG?this.backgroundGroup:t===o.LAYER.MID?this.middleGroup:(o.LAYER.FORE,this.foregroundGroup)},y.prototype.isPointInPlot=function(t){return(0,h.isPointInCoordinate)(this.getCoordinate(),t)},y.prototype.getLegendAttributes=function(){return(0,e.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},y.prototype.getGroupScales=function(){var t=this.geometries.map(function(t){return t.getGroupScales()});return(0,c.uniq)((0,e.flatten)(t))},y.prototype.getCanvas=function(){return this.getRootView().canvas},y.prototype.getRootView=function(){for(var t=this;t.parent;)t=t.parent;return t},y.prototype.getXY=function(t){var o,i,n=this.getCoordinate(),r=this.getScalesByDim("x"),s=this.getScalesByDim("y");if((0,e.each)(t,function(t,e){r[e]&&(o=r[e].scale(t)),s[e]&&(i=s[e].scale(t))}),!(0,e.isNil)(o)&&!(0,e.isNil)(i))return n.convert({x:o,y:i})},y.prototype.getController=function(t){return(0,e.find)(this.controllers,function(e){return e.name===t})},y.prototype.showTooltip=function(t){var e=this.getController("tooltip");return e&&e.showTooltip(t),this},y.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},y.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},y.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},y.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},y.prototype.getTooltipItems=function(t){var e=this.getController("tooltip");return e?e.getTooltipItems(t):[]},y.prototype.getSnapRecords=function(t){for(var e=this.geometries,o=[],i=0,n=e.length;i<n;i++){var r=e[i],s=r.dataArray;r.sort(s);for(var a=void 0,h=0,c=s.length;h<c;h++){var p=s[h];(a=(0,l.findDataByPoint)(t,p,r))&&o.push(a)}}var u=this.views;for(i=0,n=u.length;i<n;i++){var d=u[i].getSnapRecords(t);o=o.concat(d)}return o},y.prototype.getComponents=function(){for(var t=[],e=this.controllers,o=0,i=e.length;o<i;o++){var n=e[o];t=t.concat(n.getComponents())}return t},y.prototype.filterData=function(t){var o=this.options.filters;return 0===(0,e.size)(o)?t:(0,e.filter)(t,function(t,e){return Object.keys(o).every(function(i){return(0,o[i])(t[i],t,e)})})},y.prototype.filterFieldData=function(t,o){var i=this.options.filters,n=(0,e.get)(i,t);return(0,e.isUndefined)(n)?o:o.filter(function(e,o){return n(e[t],e,o)})},y.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),o=t.start,i=t.end,n=this.coordinateBBox.bl,r=this.coordinateBBox.tr;(0,e.isEqual)(o,n)&&(0,e.isEqual)(i,r)?this.isCoordinateChanged=!1:(this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(n,r))},y.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_PAINT),this.renderBackgroundStyleShape(),this.renderLayoutRecursive(t),this.renderPaintRecursive(t),this.emit(o.VIEW_LIFE_CIRCLE.AFTER_PAINT),this.isDataChanged=!1},y.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=(0,e.get)(this.themeObject,"background");if(t){this.backgruondStyleRectShape||(this.backgruondStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{zIndex:-1}}));var o=this.viewBBox,i=o.x,n=o.y,r=o.width,s=o.height;this.backgruondStyleRectShape.attr({fill:t,x:i,y:n,width:r,height:s})}else this.backgruondStyleRectShape&&(this.backgruondStyleRectShape.remove(!0),this.backgruondStyleRectShape=void 0)}},y.prototype.renderLayoutRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.doLayout();var e=this.viewBBox,o=this.coordinateBBox;(0,f.isAutoPadding)(this.padding)&&(this.autoPadding=[o.tl.y-e.tl.y,e.tr.x-o.tr.x,e.bl.y-o.bl.y,o.tl.x-e.tl.x]);for(var i=this.views,n=0,r=i.length;n<r;n++){i[n].renderLayoutRecursive(t)}},y.prototype.renderPaintRecursive=function(t){if(this.limitInPlot){var e=this.middleGroup,o=(0,h.getCoordinateClipCfg)(this.coordinateInstance),i=o.type,n=o.attrs;e.setClip({type:i,attrs:n})}this.paintGeometries(t),this.renderComponents(t);for(var r=this.views,s=0,a=r.length;s<a;s++){r[s].renderPaintRecursive(t)}},y.prototype.createScale=function(o,i,n,r){var s=(0,e.get)(this.options.scales,[o]),a=(0,t.__assign)((0,t.__assign)({},s),n);return this.parent?this.parent.createScale(o,i,a,r):this.scalePool.createScale(o,i,a,r)},y.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var e=this.views,o=0,i=e.length;o<i;o++){e[o].renderDataRecursive(t)}},y.prototype.calculateViewBBox=function(){var t,e,o,i;if(this.parent){var n=this.parent.coordinateBBox;t=n.x,e=n.y,o=n.width,i=n.height}else t=0,e=0,o=this.canvas.get("width"),i=this.canvas.get("height");var r=this.region,s=r.start,h=r.end,c=new a.BBox(t+o*s.x,e+i*s.y,o*(h.x-s.x),i*(h.y-s.y));this.viewBBox&&this.viewBBox.isEqual(c)||(this.viewBBox=new a.BBox(t+o*s.x,e+i*s.y,o*(h.x-s.x),i*(h.y-s.y)),this.coordinateBBox=this.viewBBox)},y.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},y.prototype.initComponentController=function(){for(var t=this.usedControllers,e=0,o=t.length;e<o;e++){var i=t[e],n=(0,p.getComponentController)(i);n&&this.controllers.push(new n(this))}},y.prototype.createViewEvent=function(t){var e=t.shape,o=t.name,i=e?e.get("origin"):null,n=new d.default(this,t,i);return n.type=o,n},y.prototype.doPlotEvent=function(t){var e=t.type,i={x:t.x,y:t.y};if(["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"].includes(e)){var n=this.isPointInPlot(i);if(n){var r="plot:"+e;t.type=r,this.emit(r,t),"mouseleave"!==e&&"touchend"!==e||(this.isPreMouseInPlot=!1)}"mousemove"===e||"touchmove"===e?(this.isPreMouseInPlot&&!n?("mousemove"===e&&(t.type=o.PLOT_EVENTS.MOUSE_LEAVE,this.emit(o.PLOT_EVENTS.MOUSE_LEAVE,t)),t.type=o.PLOT_EVENTS.LEAVE,this.emit(o.PLOT_EVENTS.LEAVE,t)):!this.isPreMouseInPlot&&n&&("mousemove"===e&&(t.type=o.PLOT_EVENTS.MOUSE_ENTER,this.emit(o.PLOT_EVENTS.MOUSE_ENTER,t)),t.type=o.PLOT_EVENTS.ENTER,this.emit(o.PLOT_EVENTS.ENTER,t)),this.isPreMouseInPlot=n):"mouseleave"!==e&&"touchend"!==e||this.isPreMouseInPlot&&("mouseleave"===e&&(t.type=o.PLOT_EVENTS.MOUSE_LEAVE,this.emit(o.PLOT_EVENTS.MOUSE_LEAVE,t)),t.type=o.PLOT_EVENTS.LEAVE,this.emit(o.PLOT_EVENTS.LEAVE,t),this.isPreMouseInPlot=!1)}},y.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},y.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var o=this.getCoordinate(),i=(0,e.get)(this.options,"scales",{}),n=this.geometries,r=0,s=n.length;r<s;r++){var a=n[r];a.scales=this.getGeometryScales();var h={coordinate:o,scaleDefs:i,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?a.update(h):a.init(h)}this.adjustScales()},y.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),e=this.getGroupedFields(),o=this.getOptions(),i=o.data,n=o.scales,r=void 0===n?{}:n,s=this.filteredData,a=0,h=t.length;a<h;a++){var c=t[a],l=r[c],p=this.getScaleKey(c);this.createScale(c,e.includes(c)?i:s,l,p),this.createdScaleKeys.set(p,!0)}},y.prototype.syncScale=function(){this.getRootView().scalePool.sync()},y.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),e={},o=0;o<t.length;o++){var i=t[o];e[i]=this.getScaleByField(i)}return e},y.prototype.getScaleFields=function(){for(var t=[],e={},o=this.geometries,i=0;i<o.length;i++){var n=o[i].getScaleFields();(0,c.uniq)(n,t,e)}return t},y.prototype.getGroupedFields=function(){for(var t=[],e={},o=this.geometries,i=0;i<o.length;i++){var n=o[i].getGroupFields();(0,c.uniq)(n,t,e)}return t},y.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},y.prototype.adjustCategoryScaleRange=function(){var o=this,i=(0,t.__spreadArrays)([this.getXScale()],this.getYScales()).filter(function(t){return!!t}),n=this.getCoordinate(),r=this.options.scales;(0,e.each)(i,function(t){var i=t.field,s=t.values,a=t.isCategory,c=t.isIdentity;if((a||c)&&s&&!(0,e.get)(r,[i,"range"])){var l=s.length,p=void 0;if(1===l)p=[.5,1];else{var u=0;p=(0,h.isFullCircle)(n)?n.isTransposed?[(u=1/l*(0,e.get)(o.theme,"widthRatio.multiplePie",1/1.3))/2,1-u/2]:[0,1-1/l]:[u=1/l/2,1-u]}t.range=p}})},y.prototype.initComponents=function(t){for(var e=this.controllers,o=0;o<e.length;o++){var i=e[o];t?i.update():(i.clear(),i.render())}},y.prototype.doLayout=function(){this.layoutFunc(this)},y.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,e=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,e)},y.prototype.paintGeometries=function(t){for(var e=this.options.animate,o=this.getCoordinate(),i={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},n=this.geometries,r=0;r<n.length;r++){var s=n[r];s.coordinate=o,s.canvasRegion=i,e||s.animate(!1),s.paint(t)}},y.prototype.renderComponents=function(t){for(var e=0;e<this.getComponents().length;e++){this.getComponents()[e].component.render()}},y.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},y.prototype.initOptions=function(){for(var t=this.options,e=t.geometries,o=void 0===e?[]:e,i=t.interactions,n=void 0===i?[]:i,r=t.views,s=void 0===r?[]:r,a=t.annotations,h=void 0===a?[]:a,c=0;c<o.length;c++){var l=o[c];this.createGeometry(l)}for(var p=0;p<n.length;p++){var u=n[p],d=u.type,g=u.cfg;this.interaction(d,g)}for(var v=0;v<s.length;v++){var f=s[v];this.createView(f)}for(var y=this.getController("annotation"),m=0;m<h.length;m++){var E=h[m];y.annotation(E)}},y.prototype.createGeometry=function(t){var o=t.type,i=t.cfg,n=void 0===i?{}:i;if(this[o]){var r=this[o](n);(0,e.each)(t,function(t,o){(0,e.isFunction)(r[o])&&r[o](t)})}},y.prototype.getScaleKey=function(t){return this.id+"-"+t},y}(i.default);function E(e,o){m.prototype[e.toLowerCase()]=function(e){void 0===e&&(e={});var i=(0,t.__assign)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),n=new o(i);return this.geometries.push(n),n}}exports.View=m;var C=m;exports.default=C;
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","../base":"pYAC","../facet":"GBvu","../interaction":"qrhx","../theme":"C6xV","../util/bbox":"yW7I","../util/coordinate":"sx3d","../util/helper":"RDFe","../util/tooltip":"yb3W","./controller":"QSbp","./controller/coordinate":"GSbp","./event":"sgTc","./layout":"EswG","./util/scale-pool":"vEqs","../util/padding":"eanz"}],"l11t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=require("../constant"),n=require("../engine"),o=require("../util/dom"),r=a(require("./view"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(r){function a(a){var s=this,d=a.container,l=a.width,h=a.height,u=a.autoFit,p=void 0!==u&&u,c=a.padding,v=a.appendPadding,f=a.renderer,g=void 0===f?"canvas":f,y=a.pixelRatio,m=a.localRefresh,w=void 0===m||m,_=a.visible,b=void 0===_||_,z=a.defaultInteractions,I=void 0===z?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:z,E=a.options,R=a.limitInPlot,F=a.theme,x=(0,t.isString)(d)?document.getElementById(d):d,G=(0,o.createDom)('<div style="position:relative;"></div>');x.appendChild(G);var S=(0,o.getChartSize)(x,p,l,h),D=new((0,n.getEngine)(g).Canvas)((0,e.__assign)({container:G,pixelRatio:y,localRefresh:w},S));return(s=r.call(this,{parent:null,canvas:D,backgroundGroup:D.addGroup({zIndex:i.GROUP_Z_INDEX.BG}),middleGroup:D.addGroup({zIndex:i.GROUP_Z_INDEX.MID}),foregroundGroup:D.addGroup({zIndex:i.GROUP_Z_INDEX.FORE}),padding:c,appendPadding:v,visible:b,options:E,limitInPlot:R,theme:F})||this).onResize=(0,t.debounce)(function(){s.forceFit()},300),s.ele=x,s.canvas=D,s.width=S.width,s.height=S.height,s.autoFit=p,s.localRefresh=w,s.renderer=g,s.wrapperElement=G,s.updateCanvasStyle(),s.bindAutoFit(),s.initDefaultInteractions(I),s}return(0,e.__extends)(a,r),a.prototype.initDefaultInteractions=function(e){var i=this;(0,t.each)(e,function(e){i.interaction(e)})},a.prototype.changeSize=function(e,t){return this.width===e&&this.height===t?this:(this.width=e,this.height=t,this.canvas.changeSize(e,t),this.render(!0),this)},a.prototype.destroy=function(){r.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),(0,o.removeDom)(this.wrapperElement),this.wrapperElement=null},a.prototype.changeVisible=function(e){return r.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},a.prototype.forceFit=function(){if(!this.destroyed){var e=(0,o.getChartSize)(this.ele,!0,this.width,this.height),t=e.width,i=e.height;this.changeSize(t,i)}},a.prototype.updateCanvasStyle=function(){(0,o.modifyCSS)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},a.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},a.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},a}(r.default),d=s;exports.default=d;
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","../engine":"drrS","../util/dom":"l52X","./view":"IZMl"}],"EFTp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Chart",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"registerGeometry",{enumerable:!0,get:function(){return r.registerGeometry}}),Object.defineProperty(exports,"Event",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"registerComponentController",{enumerable:!0,get:function(){return n.registerComponentController}});var e=i(require("./chart")),r=u(require("./view")),t=i(require("./event")),n=require("./controller");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(e){return e&&e.__esModule?e:{default:e}}
},{"./chart":"l11t","./view":"IZMl","./event":"sgTc","./controller":"QSbp"}],"g26H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Controller=void 0;var t=require("@antv/util"),o=function(){function o(t){this.visible=!0,this.components=[],this.view=t}return o.prototype.clear=function(){(0,t.each)(this.components,function(t){t.component.destroy()}),this.components=[]},o.prototype.destroy=function(){this.clear()},o.prototype.getComponents=function(){return this.components},o.prototype.changeVisible=function(t){this.visible!==t&&(this.components.forEach(function(o){t?o.component.show():o.component.hide()}),this.visible=t)},o}();exports.Controller=o;
},{"@antv/util":"rU8N"}],"w7yU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GAP=exports.DODGE_RATIO=exports.MARGIN_RATIO=exports.DEFAULT_Y=void 0;var e=0;exports.DEFAULT_Y=e;var r=.5;exports.MARGIN_RATIO=r;var t=.5;exports.DODGE_RATIO=t;var o=.05;exports.GAP=o;
},{}],"Ozqs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@antv/util")),e=require("../constant");function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var o=n?Object.getOwnPropertyDescriptor(t,u):null;o&&(o.get||o.set)?Object.defineProperty(i,u,o):i[u]=t[u]}return i.default=t,e&&e.set(t,i),i}var n=function(){function r(t){var e=t.xField,r=t.yField,i=t.adjustNames,n=void 0===i?["x","y"]:i;this.adjustNames=n,this.xField=e,this.yField=r}return r.prototype.isAdjust=function(t){return this.adjustNames.indexOf(t)>=0},r.prototype.getAdjustRange=function(t,e,r){var i,n,u=this.yField,o=r.indexOf(e),s=r.length;return!u&&this.isAdjust("y")?(i=0,n=1):s>1?(i=r[0===o?0:o-1],n=r[o===s-1?s-1:o+1],0!==o?i+=(e-i)/2:i-=(n-e)/2,o!==s-1?n-=(n-e)/2:n+=(e-r[s-2])/2):(i=0===e?0:e-.5,n=0===e?1:e+.5),{pre:i,next:n}},r.prototype.adjustData=function(e,r){var i=this,n=this.getDimValues(r);t.each(e,function(e,r){t.each(n,function(t,n){i.adjustDim(n,t,e,r)})})},r.prototype.groupData=function(r,i){return t.each(r,function(t){void 0===t[i]&&(t[i]=e.DEFAULT_Y)}),t.groupBy(r,i)},r.prototype.adjustDim=function(t,e,r,i){},r.prototype.getDimValues=function(r){var i=this.xField,n=this.yField,u={},o=[];if(i&&this.isAdjust("x")&&o.push(i),n&&this.isAdjust("y")&&o.push(n),o.forEach(function(e){u[e]=t.valuesOfKey(r,e).sort(function(t,e){return t-e})}),!n&&this.isAdjust("y")){u.y=[e.DEFAULT_Y,1]}return u},r}(),u=n;exports.default=u;
},{"@antv/util":"rU8N","../constant":"w7yU"}],"u3sc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Adjust",{enumerable:!0,get:function(){return e.default}}),exports.registerAdjust=exports.getAdjust=void 0;var e=t(require("./adjusts/adjust"));function t(e){return e&&e.__esModule?e:{default:e}}var r={},s=function(e){return r[e.toLowerCase()]};exports.getAdjust=s;var u=function(e,t){if(s(e))throw new Error("Adjust type '"+e+"' existed.");r[e.toLowerCase()]=t};exports.registerAdjust=u;
},{"./adjusts/adjust":"Ozqs"}],"LsFk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=o(require("@antv/util")),r=require("../constant"),a=n(require("./adjust"));function n(t){return t&&t.__esModule?t:{default:t}}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=a?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}var u=function(a){function n(t){var e=a.call(this,t)||this;e.cacheMap={},e.adjustDataArray=[],e.mergeData=[];var n=t.marginRatio,i=void 0===n?r.MARGIN_RATIO:n,o=t.dodgeRatio,u=void 0===o?r.DODGE_RATIO:o,s=t.dodgeBy;return e.marginRatio=i,e.dodgeRatio=u,e.dodgeBy=s,e}return(0,t.__extends)(n,a),n.prototype.process=function(t){var r=e.clone(t),a=e.flatten(r),n=this.dodgeBy,i=n?e.group(a,n):r;return this.cacheMap={},this.adjustDataArray=i,this.mergeData=a,this.adjustData(i,a),this.adjustDataArray=[],this.mergeData=[],r},n.prototype.adjustDim=function(t,r,a,n){var i=this,o=this.getDistribution(t),u=this.groupData(a,t);return e.each(u,function(a,u){var s;s=1===r.length?{pre:r[0]-1,next:r[0]+1}:i.getAdjustRange(t,parseFloat(u),r),e.each(a,function(e){var r=e[t],a=o[r],u=a.indexOf(n);e[t]=i.getDodgeOffset(s,u,a.length)})}),[]},n.prototype.getDodgeOffset=function(t,e,r){var a=this.dodgeRatio,n=this.marginRatio,i=t.pre,o=t.next,u=o-i,s=u*a/r,c=n*s;return(i+o)/2+(.5*(u-r*s-(r-1)*c)+((e+1)*s+e*c)-.5*s-.5*u)},n.prototype.getDistribution=function(t){var r=this.adjustDataArray,a=this.cacheMap,n=a[t];return n||(n={},e.each(r,function(r,a){var i=e.valuesOfKey(r,t);i.length||i.push(0),e.each(i,function(t){n[t]||(n[t]=[]),n[t].push(a)})}),a[t]=n),n},n}(a.default),s=u;exports.default=s;
},{"tslib":"c4AP","@antv/util":"rU8N","../constant":"w7yU","./adjust":"Ozqs"}],"bMCK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=a(require("@antv/util")),r=require("../constant"),n=u(require("./adjust"));function u(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var a=n?Object.getOwnPropertyDescriptor(t,u):null;a&&(a.get||a.set)?Object.defineProperty(r,u,a):r[u]=t[u]}return r.default=t,e&&e.set(t,r),r}function i(t,e){return(e-t)*Math.random()+t}var f=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(u,n),u.prototype.process=function(t){var r=e.clone(t),n=e.flatten(r);return this.adjustData(r,n),r},u.prototype.adjustDim=function(t,r,n){var u=this,o=this.groupData(n,t);return e.each(o,function(e,n){return u.adjustGroup(e,t,parseFloat(n),r)})},u.prototype.getAdjustOffset=function(t){var e=t.pre,n=t.next,u=(n-e)*r.GAP;return i(e+u,n-u)},u.prototype.adjustGroup=function(t,r,n,u){var o=this,a=this.getAdjustRange(r,n,u);return e.each(t,function(t){t[r]=o.getAdjustOffset(a)}),t},u}(n.default),s=f;exports.default=s;
},{"tslib":"c4AP","@antv/util":"rU8N","../constant":"w7yU","./adjust":"Ozqs"}],"Kc6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),r=n(require("@antv/util")),t=s(require("./adjust"));function s(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}var o=r.Cache,u=function(t){function s(e){var r=t.call(this,e)||this,s=e.adjustNames,i=void 0===s?["y"]:s,n=e.height,o=void 0===n?NaN:n,u=e.size,a=void 0===u?10:u,c=e.reverseOrder,f=void 0!==c&&c;return r.adjustNames=i,r.height=o,r.size=a,r.reverseOrder=f,r}return(0,e.__extends)(s,t),s.prototype.process=function(e){var r=this.yField,t=this.reverseOrder,s=r?this.processStack(e):this.processOneDimStack(e);return t?this.reverse(s):s},s.prototype.reverse=function(e){return e.slice(0).reverse()},s.prototype.processStack=function(t){var s=this.xField,i=this.yField,n=this.reverseOrder?this.reverse(t):t,u=new o,a=new o;return n.map(function(t){return t.map(function(t){var n,o=r.get(t,s,0),c=r.get(t,i),f=o.toString();if(c=r.isArray(c)?c[1]:c,!r.isNil(c)){var p=c>=0?u:a;p.has(f)||p.set(f,0);var v=p.get(f),d=c+v;return p.set(f,d),(0,e.__assign)((0,e.__assign)({},t),((n={})[i]=[v,d],n))}return t})})},s.prototype.processOneDimStack=function(r){var t=this,s=this.xField,i=this.height,n=this.reverseOrder,u=n?this.reverse(r):r,a=new o;return u.map(function(r){return r.map(function(r){var n,o=t.size,u=r[s],c=2*o/i;a.has(u)||a.set(u,c/2);var f=a.get(u);return a.set(u,f+c),(0,e.__assign)((0,e.__assign)({},r),((n={}).y=f,n))})})},s}(t.default),a=u;exports.default=a;
},{"tslib":"c4AP","@antv/util":"rU8N","./adjust":"Ozqs"}],"j6Gi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=a(require("@antv/util")),r=n(require("./adjust"));function n(t){return t&&t.__esModule?t:{default:t}}function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=n?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=t[a]}return r.default=t,e&&e.set(t,r),r}var i=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return(0,t.__extends)(n,r),n.prototype.process=function(r){var n=e.flatten(r),u=this.xField,a=this.yField,i=this.getXValuesMaxMap(n),o=Math.max.apply(Math,Object.keys(i).map(function(t){return i[t]}));return e.map(r,function(r){return e.map(r,function(r){var n,p,s=r[a],f=r[u];if(e.isArray(s)){var l=(o-i[f])/2;return(0,t.__assign)((0,t.__assign)({},r),((n={})[a]=e.map(s,function(t){return l+t}),n))}var c=(o-s)/2;return(0,t.__assign)((0,t.__assign)({},r),((p={})[a]=[c,s+c],p))})})},n.prototype.getXValuesMaxMap=function(t){var r=this,n=this.xField,u=this.yField,a=e.groupBy(t,function(t){return t[n]});return e.mapValues(a,function(t){return r.getDimMaxValue(t,u)})},n.prototype.getDimMaxValue=function(t,r){var n=e.map(t,function(t){return e.get(t,r,[])}),u=e.flatten(n);return Math.max.apply(Math,u)},n}(r.default),o=i;exports.default=o;
},{"tslib":"c4AP","@antv/util":"rU8N","./adjust":"Ozqs"}],"Fh1T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getAdjust",{enumerable:!0,get:function(){return e.getAdjust}}),Object.defineProperty(exports,"registerAdjust",{enumerable:!0,get:function(){return e.registerAdjust}}),Object.defineProperty(exports,"Adjust",{enumerable:!0,get:function(){return t.default}});var e=require("./factory"),t=i(require("./adjusts/adjust")),r=i(require("./adjusts/dodge")),u=i(require("./adjusts/jitter")),s=i(require("./adjusts/stack")),d=i(require("./adjusts/symmetric"));function i(e){return e&&e.__esModule?e:{default:e}}(0,e.registerAdjust)("Dodge",r.default),(0,e.registerAdjust)("Jitter",u.default),(0,e.registerAdjust)("Stack",s.default),(0,e.registerAdjust)("Symmetric",d.default);
},{"./factory":"u3sc","./adjusts/adjust":"Ozqs","./adjusts/dodge":"LsFk","./adjusts/jitter":"bMCK","./adjusts/stack":"Kc6k","./adjusts/symmetric":"j6Gi"}],"ZdEN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAnimation=t,exports.registerAnimation=o;var e={};function t(t){return e[t.toLowerCase()]}function o(t,o){e[t.toLowerCase()]=o}
},{}],"UIgk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefaultAnimateCfg=s,exports.doAnimate=d,exports.doGroupAppearAnimate=m,exports.DEFAULT_ANIMATE_CFG=void 0;var n=require("tslib"),a=require("@antv/util"),i=require("../constant"),e=require("./animation"),t={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}};exports.DEFAULT_ANIMATE_CFG=t;var o={interval:function(n){return{enter:{animation:n.isRect?n.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:n.isPolar&&n.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},r={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(n){var a;return n.isRect?a=n.isTransposed?"grow-in-x":"grow-in-y":(a="grow-in-xy",n.isPolar&&n.isTransposed&&(a="wave-in")),{animation:a}},schema:function(n){return{animation:n.isRect?n.isTransposed?"grow-in-x":"grow-in-y":"grow-in-xy"}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function u(n,i){return{delay:(0,a.isFunction)(n.delay)?n.delay(i):n.delay,easing:(0,a.isFunction)(n.easing)?n.easing(i):n.easing,duration:(0,a.isFunction)(n.duration)?n.duration(i):n.duration,callback:n.callback}}function s(n,i,e){var r=o[n];return r&&((0,a.isFunction)(r)&&(r=r(i)),r=(0,a.deepMix)({},t,r),e)?r[e]:r}function d(n,t,o){var r=(0,a.get)(n.get("origin"),"data",i.FIELD_ORIGIN),s=t.animation,d=u(t,r);if(s){var m=(0,e.getAnimation)(s);m&&m(n,d,o)}else n.animate(o.toAttrs,d)}function m(i,o,u,s,d){if(r[u]){var m=r[u](s),l=(0,e.getAnimation)((0,a.get)(m,"animation",""));if(l){var f=(0,n.__assign)((0,n.__assign)((0,n.__assign)({},t.appear),m),o);i.stopAnimate(),l(i,f,{coordinate:s,minYPoint:d,toAttrs:null})}}}
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","./animation":"ZdEN"}],"PEum":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.propagationDelegate=void 0;var e=require("@antv/g-base/lib/event/graph-event");function t(t,a,r){var o=new e.default(a,r);o.target=t,o.propagationPath.push(t),t.emitDelegation(a,o);for(var n=t.getParent();n;)n.emitDelegation(a,o),o.propagationPath.push(n),n=n.getParent()}exports.propagationDelegate=t;
},{"@antv/g-base/lib/event/graph-event":"Eeum"}],"R7dj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),a=require("../../animate"),i=o(require("../../base")),s=require("../../util/graphics"),h=require("@antv/component/lib/util/event");function o(t){return t&&t.__esModule?t:{default:t}}var r=function(i){function o(t){var e=i.call(this,t)||this;e.states=[];var a=t.shapeFactory,s=t.container,h=t.offscreenGroup,o=t.visible,r=void 0===o||o;return e.shapeFactory=a,e.container=s,e.offscreenGroup=h,e.visible=r,e}return(0,t.__extends)(o,i),o.prototype.draw=function(t,e){void 0===e&&(e=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,e),!1===this.visible&&this.changeVisible(!1)},o.prototype.update=function(t){var e=this.shapeFactory,a=this.shape;if(a){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(a,t);var i=this.getOffscreenGroup(),s=e.drawShape(this.shapeType,t,i);s.cfg.data=this.data,s.cfg.origin=t,this.syncShapeStyle(a,s,"",this.getAnimateCfg("update"))}},o.prototype.destroy=function(){var e=this.shapeFactory,s=this.shape;if(s){var h=this.getAnimateCfg("leave");h?(0,a.doAnimate)(s,h,{coordinate:e.coordinate,toAttrs:(0,t.__assign)({},s.attr())}):s.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,i.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){i.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(t){t.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(t){t.hide()}))},o.prototype.setState=function(t,e){var a=this,i=this,s=i.states,o=i.shapeFactory,r=i.model,n=i.shape,p=i.shapeType,c=s.indexOf(t);if(e){if(c>-1)return;s.push(t),"active"!==t&&"selected"!==t||n.toFront()}else{if(-1===c)return;s.splice(c,1),"active"!==t&&"selected"!==t||n.toBack()}var f=o.drawShape(p,r,this.getOffscreenGroup());s.length?s.forEach(function(t){a.syncShapeStyle(n,f,t,null)}):this.syncShapeStyle(n,f,"reset",null),f.remove(!0);var l={state:t,stateStatus:e,element:this,target:this.container};this.container.emit("statechange",l),(0,h.propagationDelegate)(this.shape,"statechange",l)},o.prototype.clearStates=function(){var t=this,a=this.states;(0,e.each)(a,function(e){t.setState(e,!1)}),this.states=[]},o.prototype.hasState=function(t){return this.states.includes(t)},o.prototype.getStates=function(){return this.states},o.prototype.getData=function(){return this.data},o.prototype.getModel=function(){return this.model},o.prototype.getBBox=function(){var t=this.shape,e=this.labelShape,a={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return t&&(a=t.getCanvasBBox()),e&&e.forEach(function(t){var e=t.getCanvasBBox();a.x=Math.min(e.x,a.x),a.y=Math.min(e.y,a.y),a.minX=Math.min(e.minX,a.minX),a.minY=Math.min(e.minY,a.minY),a.maxX=Math.max(e.maxX,a.maxX),a.maxY=Math.max(e.maxY,a.maxY)}),a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a},o.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this.shapeType,a=this.geometry,i=this.shapeFactory,s=a.stateOption,h=i.defaultShapeType,o=i.theme[t]||i.theme[h];this.statesStyle=(0,e.deepMix)({},o,s)}return this.statesStyle},o.prototype.getStateStyle=function(t,a){var i=this.getStatesStyle(),s=(0,e.get)(i,[t,"style"],{}),h=s[a]||s;return(0,e.isFunction)(h)?h(this):h},o.prototype.getAnimateCfg=function(t){var e=this.animate;return e?e[t]:null},o.prototype.drawShape=function(i,s){void 0===s&&(s=!1);var h=this.shapeFactory,o=this.container,r=this.shapeType;if(this.shape=h.drawShape(r,i,o),this.shape){this.setShapeInfo(this.shape,i);var n=this.shape.cfg.name;n?(0,e.isString)(n)&&(this.shape.cfg.name=["element",n]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var p=s?"enter":"appear",c=this.getAnimateCfg(p);c&&(0,a.doAnimate)(this.shape,c,{coordinate:h.coordinate,toAttrs:(0,t.__assign)({},this.shape.attr())})}},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.setShapeInfo=function(t,e){var a=this;(t.cfg.origin=e,t.cfg.element=this,t.isGroup())&&t.get("children").forEach(function(t){a.setShapeInfo(t,e)})},o.prototype.syncShapeStyle=function(t,i,h,o,r){if(void 0===h&&(h=""),void 0===r&&(r=0),t.isGroup())for(var n=t.get("children"),p=i.get("children"),c=0;c<n.length;c++)this.syncShapeStyle(n[c],p[c],h,o,r+c);else{if(h&&"reset"!==h){var f=t.get("name");(0,e.isArray)(f)&&(f=f[1]);var l=this.getStateStyle(h,f||r);i.attr(l)}var u=(0,s.getReplaceAttrs)(t,i);this.animate?o?(0,a.doAnimate)(t,o,{coordinate:this.shapeFactory.coordinate,toAttrs:u,shapeModel:this.model}):h?(t.stopAnimate(),t.animate(u,{duration:300})):t.attr(u):t.attr(u)}},o.prototype.getShapeType=function(t){var a=(0,e.get)(t,"shape");return(0,e.isArray)(a)?a[0]:a},o}(i.default),n=r;exports.default=n;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../animate":"UIgk","../../base":"pYAC","../../util/graphics":"L6ru","@antv/component/lib/util/event":"PEum"}],"EuaU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGeometryLabel=o,exports.registerGeometryLabel=r,exports.getGeometryLabelLayout=s,exports.registerGeometryLabelLayout=a;var e={},t={};function o(t){return e[t.toLowerCase()]}function r(t,o){e[t.toLowerCase()]=o}function s(e){return t[e.toLowerCase()]}function a(e,o){t[e.toLowerCase()]=o}
},{}],"Ehbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerShapeFactory=s,exports.registerShape=u,exports.getShapeFactory=p;var t=require("tslib"),e=require("@antv/path-util"),r=require("@antv/util"),n=require("./util/path"),a={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(t,e){var r=this.getShape(t);return r.getPoints?r.getPoints(e):this.getDefaultPoints(e)},getShape:function(t){var e=this[t]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getMarker:function(t,e){var n=this.getShape(t);if(!n.getMarker){var a=this.defaultShapeType;n=this.getShape(a)}var i=this.theme,o=(0,r.get)(i,[t,"default"],{}),s=n.getMarker(e);return(0,r.deepMix)({},o,s)},drawShape:function(t,e,r){return this.getShape(t).draw(e,r)}},i={coordinate:null,parsePath:function(t){var r=this.coordinate,a=(0,e.parsePathString)(t);return a=r.isPolar?(0,n.convertPolarPath)(r,a):(0,n.convertNormalPath)(r,a)},parsePoint:function(t){return this.coordinate.convert(t)},parsePoints:function(t){var e=this.coordinate;return t.map(function(t){return e.convert(t)})},draw:function(t,e){}},o={};function s(e,n){var i=(0,r.upperFirst)(e),s=(0,t.__assign)((0,t.__assign)((0,t.__assign)({},a),n),{geometryType:e});return o[i]=s,s}function u(e,n,a){var s=(0,r.upperFirst)(e),u=o[s],p=(0,t.__assign)((0,t.__assign)({},i),a);return u[n]=p,p}function p(t){var e=(0,r.upperFirst)(t);return o[e]}
},{"tslib":"oMtQ","@antv/path-util":"l3SB","@antv/util":"rU8N","./util/path":"mQeB"}],"OrBV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.group=e;var r=require("@antv/util");function e(e,t,o){if(void 0===o&&(o={}),!t)return[e];var u=(0,r.groupToMap)(e,t),a=[];if(1===t.length&&o[t[0]])for(var i=0,n=o[t[0]];i<n.length;i++){var p=u["_"+n[i]];p&&a.push(p)}else for(var s in u)if(u.hasOwnProperty(s)){var v=u[s];a.push(v)}return a}
},{"@antv/util":"rU8N"}],"xONh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isModelChange=t;var e=require("@antv/util");function t(t,r){return(0,e.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(i){return!(0,e.isEqual)(t[i],r[i])})}
},{"@antv/util":"rU8N"}],"gvH8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseFields=r;var e=require("@antv/util");function r(r){return(0,e.isArray)(r)?r:r.split("*")}
},{"@antv/util":"rU8N"}],"Saah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/adjust"),i=require("@antv/attr"),s=require("@antv/util"),a=require("../animate"),r=g(require("../base")),n=require("../constant"),o=require("../util/helper"),l=g(require("./element")),h=require("./label"),p=require("./shape/base"),u=require("./util/group-data"),c=require("./util/is-model-change"),f=require("./util/parse-fields");function g(t){return t&&t.__esModule?t:{default:t}}function d(t,e){var i=[];return(0,s.each)(e,function(e,s){s.split(" ")[0]===t&&i.push(e)}),i}var v=function(r){function g(t){var e=r.call(this,t)||this;e.type="base",e.attributes={},e.elements=[],e.elementsMap={},e.animateOption=!0,e.attributeOption={},e.lastElementsMap={},e.generatePoints=!1,e.beforeMappingData=null,e.adjusts={},e.idFields=[],e.hasSorted=!1,e.isCoordinateChanged=!1;var i=t.container,s=t.labelsContainer,a=t.coordinate,n=t.data,o=t.sortable,l=void 0!==o&&o,h=t.visible,p=void 0===h||h,u=t.theme,c=t.scales,f=void 0===c?{}:c,g=t.scaleDefs,d=void 0===g?{}:g;return e.container=i,e.labelsContainer=s,e.coordinate=a,e.data=n,e.sortable=l,e.visible=p,e.userTheme=u,e.scales=f,e.scaleDefs=d,e}return(0,t.__extends)(g,r),g.prototype.position=function(t){var e=t;(0,s.isPlainObject)(t)||(e={fields:(0,f.parseFields)(t)});var i=(0,s.get)(e,"fields");return 1===i.length&&(i.unshift("1"),(0,s.set)(e,"fields",i)),(0,s.set)(this.attributeOption,"position",e),this},g.prototype.color=function(t,e){return this.createAttrOption("color",t,e),this},g.prototype.shape=function(t,e){return this.createAttrOption("shape",t,e),this},g.prototype.size=function(t,e){return this.createAttrOption("size",t,e),this},g.prototype.adjust=function(t){var e=t;return((0,s.isString)(t)||(0,s.isPlainObject)(t))&&(e=[t]),(0,s.each)(e,function(t,i){(0,s.isObject)(t)||(e[i]={type:t})}),this.adjustOption=e,this},g.prototype.style=function(t,e){if((0,s.isString)(t)){var i=(0,f.parseFields)(t);this.styleOption={fields:i,callback:e}}else{var a=t,r=(i=a.fields,a.callback),n=a.cfg;this.styleOption=i||r||n?t:{cfg:t}}return this},g.prototype.tooltip=function(t,e){if((0,s.isString)(t)){var i=(0,f.parseFields)(t);this.tooltipOption={fields:i,callback:e}}else this.tooltipOption=t;return this},g.prototype.animate=function(t){return this.animateOption=t,this},g.prototype.label=function(t,e,i){if((0,s.isString)(t)){var a={},r=(0,f.parseFields)(t);a.fields=r,(0,s.isFunction)(e)?a.callback=e:(0,s.isPlainObject)(e)&&(a.cfg=e),i&&(a.cfg=i),this.labelOption=a}else this.labelOption=t;return this},g.prototype.state=function(t){return this.stateOption=t,this},g.prototype.init=function(t){void 0===t&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},g.prototype.update=function(t){void 0===t&&(t={});var e=t.data,i=t.isDataChanged,a=t.isCoordinateChanged,r=this.attributeOption,n=this.lastAttributeOption;(0,s.isEqual)(r,n)?!e||!i&&(0,s.isEqual)(e,this.data)?this.setCfg(t):(this.setCfg(t),this.processData(e)):this.init(t),this.adjustScale(),this.isCoordinateChanged=a},g.prototype.paint=function(e){var i=this;void 0===e&&(e=!1),this.animateOption&&(this.animateOption=(0,s.deepMix)({},(0,a.getDefaultAnimateCfg)(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={},this.getOffscreenGroup().clear();for(var r=this.beforeMappingData,n=this.beforeMapping(r),o=[],l=0,h=n.length;l<h;l++){var p=n[l],u=this.mapping(p);o.push(u),this.createElements(u,l,e)}if(this.canDoGroupAnimation(e)){var c=this.container,f=this.type,g=this.coordinate,d=(0,s.get)(this.animateOption,"appear"),v=this.getYScale(),y=g.convert({x:0,y:v.scale(this.getYMinValue())});(0,a.doGroupAppearAnimate)(c,d,f,g,y)}this.labelOption&&this.renderLabels((0,s.flatten)(o),e),this.dataArray=o,(0,s.each)(this.lastElementsMap,function(t){t.animate=i.animateOption,t.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=(0,t.__assign)({},this.attributeOption),!1===this.visible&&this.changeVisible(!1)},g.prototype.clear=function(){var t=this.container,e=this.geometryLabel,i=this.offscreenGroup;t&&t.clear(),e&&e.clear(),i&&i.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},g.prototype.destroy=function(){this.clear(),this.container.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,r.prototype.destroy.call(this)},g.prototype.getGroupScales=function(){return this.groupScales},g.prototype.getAttribute=function(t){return this.attributes[t]},g.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},g.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},g.prototype.getGroupAttributes=function(){var t=[];return(0,s.each)(this.attributes,function(e){n.GROUP_ATTRS.includes(e.type)&&t.push(e)}),t},g.prototype.getDefaultValue=function(t){var e,i=this.getAttribute(t);return i&&(0,s.isEmpty)(i.scales)&&(e=i.values[0]),e},g.prototype.getAttributeValues=function(t,e){for(var i=[],s=t.scales,a=0,r=s.length;a<r;a++){var n=s[a],o=n.field;n.isIdentity?i.push(n.values):i.push(e[o])}return t.mapping.apply(t,i)},g.prototype.getAdjust=function(t){return this.adjusts[t]},g.prototype.getShapeMarker=function(t,e){return this.getShapeFactory().getMarker(t,e)},g.prototype.getElementsBy=function(t){return this.elements.filter(function(e){return t(e)})},g.prototype.getElementId=function(t){var e=(t=(0,s.isArray)(t)?t[0]:t)[n.FIELD_ORIGIN];if(this.idFields.length){for(var i=e[this.idFields[0]],a=1;a<this.idFields.length;a++)i+="-"+e[this.idFields[a]];return i}var r,o,l=this.type,h=this.getXScale(),p=this.getYScale(),u=h.field||"x",c=e[p.field||"y"];r="identity"===h.type?h.values[0]:e[u],o="interval"===l||"schema"===l?r:"line"===l||"area"===l||"path"===l?l:r+"-"+c;for(var f=this.groupScales,g=(a=0,f.length);a<g;a++){o=o+"-"+e[f[a].field]}var d=this.getAdjust("dodge");if(d){var v=d.dodgeBy;v&&(o=o+"-"+e[v])}return this.getAdjust("jitter")&&(o=o+"-"+t.x+"-"+t.y),o},g.prototype.getScaleFields=function(){var t=[],e={},i=this.attributeOption,a=this.labelOption,r=this.tooltipOption;for(var n in i)if(i.hasOwnProperty(n)){var l=i[n];l.fields?(0,o.uniq)(l.fields,t,e):l.values&&(0,o.uniq)(l.values,t,e)}return a&&a.fields&&(0,o.uniq)(a.fields,t,e),(0,s.isObject)(r)&&r.fields&&(0,o.uniq)(r.fields,t,e),t},g.prototype.changeVisible=function(t){r.prototype.changeVisible.call(this,t);for(var e=this.elements,i=0,s=e.length;i<s;i++){e[i].changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},g.prototype.getGroupFields=function(){for(var t=[],e={},i=0,s=n.GROUP_ATTRS.length;i<s;i++){var a=n.GROUP_ATTRS[i],r=this.attributeOption[a];r&&r.fields&&(0,o.uniq)(r.fields,t,e)}return t},g.prototype.getXYFields=function(){var t=this.attributeOption.position.fields;return[t[0],t[1]]},g.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},g.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},g.prototype.sort=function(t){if(!this.hasSorted)for(var e=this.getXScale(),i=e.field,s=0;s<t.length;s++){t[s].sort(function(t,s){return e.translate(t[n.FIELD_ORIGIN][i])-e.translate(s[n.FIELD_ORIGIN][i])})}this.hasSorted=!0},g.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},g.prototype.getShapeFactory=function(){var t=this.shapeType;if((0,p.getShapeFactory)(t))return this.shapeFactory||(this.shapeFactory=(0,s.clone)((0,p.getShapeFactory)(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},g.prototype.createShapePointsCfg=function(t){var e=this.getXScale(),i=this.getYScale();return{x:this.normalizeValues(t[e.field],e),y:i?this.normalizeValues(t[i.field],i):t.y?t.y:.1,y0:i?i.scale(this.getYMinValue()):void 0}},g.prototype.createElement=function(t,e){void 0===e&&(e=!1);var i=this.container,s=this.getDrawCfg(t),a=this.getShapeFactory(),r=new l.default({shapeFactory:a,container:i,offscreenGroup:this.getOffscreenGroup()});return r.animate=this.animateOption,r.geometry=this,r.draw(s,e),r},g.prototype.getDrawCfg=function(t){var e=t[n.FIELD_ORIGIN],i={mappingData:t,data:e,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar},a=t.shape;!a&&this.getShapeFactory()&&(a=this.getShapeFactory().defaultShapeType),i.shape=a;var r=this.theme.geometries[this.shapeType];i.defaultStyle=(0,s.get)(r,[a,"default"],{}).style;var o=this.styleOption;return o&&(i.style=this.getStyleCfg(o,e)),this.generatePoints&&(i.points=t.points,i.nextPoints=t.nextPoints),i},g.prototype.createElements=function(t,e,i){void 0===i&&(i=!1);for(var s=this.lastElementsMap,a=this.elementsMap,r=this.elements,n=0,o=t.length;n<o;n++){var l=t[n],h=this.getElementId(l);a[h]&&(h=h+"-"+e+"-"+n);var p=s[h];if(p){var u=this.getDrawCfg(l),f=p.getModel();(this.isCoordinateChanged||(0,c.isModelChange)(u,f))&&(p.animate=this.animateOption,p.update(u)),delete s[h]}else p=this.createElement(l,i);r.push(p),a[h]=p}return r},g.prototype.getLabelType=function(){var t=this.labelOption,e=this.coordinate,i=this.type,a=e.type,r=(0,s.get)(t,["cfg","type"]);return r||(r="polar"===a?"polar":"theta"===a?"pie":"interval"===i||"polygon"===i?"interval":"base"),r},g.prototype.getYMinValue=function(){var t=this.getYScale(),e=t.min,i=t.max;return e>=0?e:i<=0?i:0},g.prototype.createAttrOption=function(t,e,i){if((0,s.isNil)(e)||(0,s.isObject)(e))(0,s.isObject)(e)&&(0,s.isEqual)(Object.keys(e),["values"])?(0,s.set)(this.attributeOption,t,{fields:e.values}):(0,s.set)(this.attributeOption,t,e);else{var a={};(0,s.isNumber)(e)?a.values=[e]:a.fields=(0,f.parseFields)(e),i&&((0,s.isFunction)(i)?a.callback=i:a.values=i),(0,s.set)(this.attributeOption,t,a)}},g.prototype.initAttributes=function(){var e=this,s=this.attributes,a=this.attributeOption,r=this.theme,o=this.shapeType;this.groupScales=[];var l={},h=function(h){if(a.hasOwnProperty(h)){var p=a[h];if(!p)return{value:void 0};var u=(0,t.__assign)({},p),c=u.callback,f=u.values,g=u.fields,d=(void 0===g?[]:g).map(function(t){var i=e.scales[t];return i.isCategory&&!l[t]&&n.GROUP_ATTRS.includes(h)&&(e.groupScales.push(i),l[t]=!0),i});u.scales=d,"position"!==h&&1===d.length&&"identity"===d[0].type?u.values=d[0].values:c||f||("size"===h?u.values=r.sizes:"shape"===h?u.values=r.shapes[o]||[]:"color"===h&&(d.length?u.values=d[0].values.length<=10?r.colors10:r.colors20:u.values=r.colors10));var v=(0,i.getAttribute)(h);s[h]=new v(u)}};for(var p in a){var u=h(p);if("object"==typeof u)return u.value}},g.prototype.processData=function(t){this.hasSorted=!1;for(var e=this.getAttribute("position").scales.filter(function(t){return t.isCategory}),i=this.groupData(t),s=[],a=0,r=i.length;a<r;a++){for(var o=i[a],l=[],h=0,p=o.length;h<p;h++){var u=o[h],c={};for(var f in u)c[f]=u[f];c[n.FIELD_ORIGIN]=u;for(var g=0,d=e;g<d.length;g++){var v=d[g],y=v.field;c[y]=v.translate(c[y])}l.push(c)}s.push(l)}var m=this.adjustData(s);return this.beforeMappingData=m,m},g.prototype.adjustData=function(i){var a=this.adjustOption,r=i;if(a)for(var n=this.getXScale(),o=this.getYScale(),l=n.field,h=o?o.field:null,p=0,u=a.length;p<u;p++){var c=a[p],f=(0,t.__assign)({xField:l,yField:h},c),g=c.type;if("dodge"===g){var d=[];if(n.isCategory||"identity"===n.type)d.push("x");else{if(o)throw new Error("dodge is not support linear attribute, please use category attribute!");d.push("y")}f.adjustNames=d,f.dodgeRatio=this.theme.columnWidthRatio}else if("stack"===g){var v=this.coordinate;if(!o){f.height=v.getHeight();var y=this.getDefaultValue("size")||3;f.size=y}!v.isTransposed&&(0,s.isNil)(f.reverseOrder)&&(f.reverseOrder=!0)}var m=new((0,e.getAdjust)(g))(f);r=m.process(r),this.adjusts[g]=m}return r},g.prototype.groupData=function(t){for(var e=this.getGroupScales(),i=this.scaleDefs,a={},r=[],n=0;n<e.length;n++){var o=e[n].field;r.push(o),(0,s.get)(i,[o,"values"])&&(a[o]=i[o].values)}return(0,u.group)(t,r,a)},g.prototype.updateStackRange=function(t,e){for(var i=(0,s.flatten)(e),a=t.field,r=t.min,n=t.max,o=0;o<i.length;o++){var l=i[o],h=Math.min.apply(null,l[a]),p=Math.max.apply(null,l[a]);h<r&&(r=h),p>n&&(n=p)}var u=this.scaleDefs,c={};r<t.min&&!(0,s.get)(u,[a,"min"])&&(c.min=r),n>t.max&&!(0,s.get)(u,[a,"max"])&&(c.max=n),t.change(c)},g.prototype.beforeMapping=function(t){var e=t;if(this.sortable&&this.sort(e),this.generatePoints)for(var i=0,s=e.length;i<s;i++){var a=e[i];this.generateShapePoints(a);var r=e[i+1];r&&(this.generateShapePoints(r),a[0].nextPoints=r[0].points)}return e},g.prototype.generateShapePoints=function(t){for(var e=this.getShapeFactory(),i=this.getAttribute("shape"),s=0;s<t.length;s++){var a=t[s],r=this.createShapePointsCfg(a),n=i?this.getAttributeValues(i,a):null,o=e.getShapePoints(n,r);a.points=o}},g.prototype.normalizeValues=function(t,e){var i=[];if((0,s.isArray)(t))for(var a=0;a<t.length;a++){var r=t[a];i.push(e.scale(r))}else i=e.scale(t);return i},g.prototype.mapping=function(t){for(var e=this.attributes,i=[],a=0;a<t.length;a++){var r=t[a],o={_origin:r[n.FIELD_ORIGIN],points:r.points,nextPoints:r.nextPoints};for(var l in e)if(e.hasOwnProperty(l)){var h=e[l],p=h.names,u=this.getAttributeValues(h,r);if(p.length>1)for(var c=0;c<u.length;c+=1){var f=u[c];o[p[c]]=(0,s.isArray)(f)&&1===f.length?f[0]:f}else o[p[0]]=1===u.length?u[0]:u}this.convertPoint(o),i.push(o)}return i},g.prototype.convertPoint=function(t){var e,i,a,r=t.x,n=t.y,o=this.coordinate;if((0,s.isArray)(r)&&(0,s.isArray)(n)){e=[],i=[];for(var l=0,h=0,p=r.length,u=n.length;l<p&&h<u;l+=1,h+=1)a=o.convert({x:r[l],y:n[h]}),e.push(a.x),i.push(a.y)}else if((0,s.isArray)(n)){i=[];for(var c=0;c<n.length;c++){var f=n[c];a=o.convert({x:r,y:f}),e&&e!==a.x?((0,s.isArray)(e)||(e=[e]),e.push(a.x)):e=a.x,i.push(a.y)}}else if((0,s.isArray)(r)){e=[];for(c=0;c<r.length;c++){var g=r[c];a=o.convert({x:g,y:n}),i&&i!==a.y?((0,s.isArray)(i)||(i=[i]),i.push(a.y)):i=a.y,e.push(a.x)}}else{var d=o.convert({x:r,y:n});e=d.x,i=d.y}t.x=e,t.y=i},g.prototype.getStyleCfg=function(t,e){var i=t.fields,s=void 0===i?[]:i,a=t.callback,r=t.cfg;if(r)return r;var n=s.map(function(t){return e[t]});return a.apply(void 0,n)},g.prototype.setCfg=function(t){var e=this,i=t.coordinate,a=t.data,r=t.theme,n=t.scaleDefs;i&&(this.coordinate=i),a&&(this.data=a),n&&(this.scaleDefs=n,this.idFields=[],(0,s.each)(n,function(t,i){t&&t.key&&e.idFields.push(i)})),r&&(this.theme=this.userTheme?(0,s.deepMix)({},r,this.userTheme):r)},g.prototype.renderLabels=function(t,e){void 0===e&&(e=!1);var i=this.geometryLabel;if(!i){var a=this.getLabelType();i=new((0,h.getGeometryLabel)(a))(this),this.geometryLabel=i}i.render(t,e);var r=i.labelsRenderer.shapesMap;(0,s.each)(this.elementsMap,function(t,e){var i=d(e,r);if(i.length){t.labelShape=i;for(var s=0;s<i.length;s++)for(var a=i[s].getChildren(),n=0;n<a.length;n++){var o=a[n];o.cfg.name=["element","label"],o.cfg.element=t}}})},g.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(void 0===(0,s.get)(this.animateOption,"appear")||(0,s.get)(this.animateOption,"appear")&&void 0===(0,s.get)(this.animateOption,["appear","animation"]))},g}(r.default),y=v;exports.default=y;
},{"tslib":"oMtQ","@antv/adjust":"Fh1T","@antv/attr":"HgDz","@antv/util":"rU8N","../animate":"UIgk","../base":"pYAC","../constant":"JW8G","../util/helper":"RDFe","./element":"R7dj","./label":"EuaU","./shape/base":"Ehbp","./util/group-data":"OrBV","./util/is-model-change":"xONh","./util/parse-fields":"gvH8"}],"X5lU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.translate=e,exports.rotate=a,exports.getIdentityMatrix=o,exports.zoom=i,exports.transform=void 0;var t=require("@antv/matrix-util"),r=t.ext.transform;function e(t,e,a){var o=r(t.getMatrix(),[["t",e,a]]);t.setMatrix(o)}function a(t,e){var a=t.attr(),o=a.x,i=a.y,x=r(t.getMatrix(),[["t",-o,-i],["r",e],["t",o,i]]);t.setMatrix(x)}function o(){return[1,0,0,0,1,0,0,0,1]}function i(t,e){var a=t.getBBox(),o=(a.minX+a.maxX)/2,i=(a.minY+a.maxY)/2;t.applyToMatrix([o,i,1]);var x=r(t.getMatrix(),[["t",-o,-i],["s",e,e],["t",o,i]]);t.setMatrix(x)}exports.transform=r;
},{"@antv/matrix-util":"n7Fk"}],"iupe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),a=require("../animate"),i=require("../geometry/label"),r=require("../util/graphics"),n=require("../util/transform"),o=function(){function o(t){this.shapesMap={},this.lastShapesMap={};var e=t.layout,a=t.container;this.layout=e,this.container=a}return o.prototype.render=function(i,n,o){var s=this;void 0===o&&(o=!1),this.shapesMap={};var p=this.container,l=this.createOffscreenGroup();if(i.length){for(var d=0,h=i;d<h.length;d++){var u=h[d];u&&this.renderLabel(u,l)}this.doLayout(i,n),this.renderLabelLine(i),this.adjustLabel(i)}var c=this.lastShapesMap,f=this.shapesMap;(0,e.each)(f,function(i,n){if(i.destroyed)delete f[n];else{if(c[n]){var l=i.get("data"),d=i.get("origin"),h=i.get("coordinate"),u=c[n],g=i.get("animateCfg");u.set("data",l),u.set("origin",d),u.set("animateCfg",g),u.set("coordinate",h);var y=(0,e.get)(g,"update"),v=u.getChildren();i.getChildren().map(function(t,e){var i=v[e];i.set("data",l),i.set("origin",d),i.set("animateCfg",g),i.set("coordinate",h);var n=(0,r.getReplaceAttrs)(i,t);y?(0,a.doAnimate)(i,y,{toAttrs:n,coordinate:h}):i.attr(n)}),s.shapesMap[n]=u}else{p.add(i);var m=(0,e.get)(i.get("animateCfg"),o?"enter":"appear");m&&(0,a.doAnimate)(i,m,{toAttrs:(0,t.__assign)({},i.attr()),coordinate:i.get("coordinate")})}delete c[n]}}),(0,e.each)(c,function(t){var i=(0,e.get)(t.get("animateCfg"),"leave");i?(0,a.doAnimate)(t,i,{toAttrs:null,coordinate:t.get("coordinate")}):t.remove(!0)}),this.lastShapesMap=f,l.destroy()},o.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},o.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},o.prototype.renderLabel=function(a,i){var r,o=a.id,s=a.data,p=a.mappingData,l=a.coordinate,d=a.animate,h=a.content,u={id:o,data:s,origin:p,coordinate:l},c=i.addGroup((0,t.__assign)({name:"label",animateCfg:!1!==this.animate&&null!==d&&!1!==d&&(0,e.deepMix)({},this.animate,d)},u));if(h.isGroup&&h.isGroup()||h.isShape&&h.isShape()){var f=h.getCanvasBBox(),g=f.width,y=f.height,v=(0,e.get)(a,"textAlign","left"),m=a.x,x=a.y-y/2;"center"===v?m-=g/2:"right"!==v&&"end"!==v||(m-=g),(0,n.translate)(h,m,x),r=h,c.add(h)}else r=c.addShape("text",(0,t.__assign)({attrs:(0,t.__assign)({x:a.x,y:a.y,textAlign:a.textAlign,textBaseline:(0,e.get)(a,"textBaseline","middle"),text:a.content},a.style)},u));a.rotate&&(0,n.rotate)(r,a.rotate),this.shapesMap[o]=c},o.prototype.doLayout=function(t,a){var r=this;if(this.layout){var n=(0,e.isArray)(this.layout)?this.layout:[this.layout];(0,e.each)(n,function(n){var o=(0,i.getGeometryLabelLayout)((0,e.get)(n,"type",""));if(o){var s=[],p=[];(0,e.each)(r.shapesMap,function(t,e){s.push(t),p.push(a[e])}),o(t,s,p,r.region,n.cfg)}})}},o.prototype.renderLabelLine=function(a){var i=this;(0,e.each)(a,function(a){var n=(0,e.get)(a,"coordinate");if(a&&n){var o=n.getCenter(),s=n.getRadius();if(a.labelLine){var p=(0,e.get)(a,"labelLine",{}),l=a.id,d=p.path;if(!d){var h=(0,r.polarToCartesian)(o.x,o.y,s,a.angle);d=[["M",h.x,h.y],["L",a.x,a.y]]}var u=i.shapesMap[l];u.destroyed||u.addShape("path",{capture:!1,attrs:(0,t.__assign)({path:d,stroke:a.color?a.color:(0,e.get)(a,["style","fill"],"#000"),fill:null},p.style),id:l,origin:a.mappingData,data:a.data,coordinate:a.coordinate})}}})},o.prototype.createOffscreenGroup=function(){return new(this.container.getGroupBase())({})},o.prototype.adjustLabel=function(t){var a=this;(0,e.each)(t,function(t){if(t){var e=t.id,i=a.shapesMap[e];if(!i.destroyed){var r=i.find(function(t){return"text"===t.get("type")});r&&(t.offsetX&&r.attr("x",r.attr("x")+t.offsetX),t.offsetY&&r.attr("y",r.attr("y")+t.offsetY))}}})},o}(),s=o;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","../animate":"UIgk","../geometry/label":"EuaU","../util/graphics":"L6ru","../util/transform":"X5lU"}],"thYg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),n=require("../../constant"),r=require("../../animate"),i=require("../../util/graphics"),o=a(require("../../component/labels"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var n=0;return(0,t.each)(e,function(e){n+=e}),n/e.length}var l=function(){function a(e){this.geometry=e}return a.prototype.getLabelItems=function(n){var r=this,i=[],o=this.getLabelCfgs(n);return(0,t.each)(n,function(n,a){var s=o[a];if(!s||(0,t.isNil)(n.x)||(0,t.isNil)(n.y))i.push(null);else{var l=(0,t.isArray)(s.content)?s.content:[s.content];s.content=l;var f=l.length;(0,t.each)(l,function(o,a){if((0,t.isNil)(o)||""===o)i.push(null);else{var l=(0,e.__assign)((0,e.__assign)({},s),r.getLabelPoint(s,n,a));l.textAlign||(l.textAlign=r.getLabelAlign(l,a,f)),l.offset<=0&&(l.labelLine=null),i.push(l)}})}}),i},a.prototype.render=function(e,t){void 0===t&&(t=!1);var n=this.getLabelItems(e),r=this.getLabelsRenderer(),i=this.getGeometryShapes();r.render(n,i,t)},a.prototype.clear=function(){var e=this.labelsRenderer;e&&e.clear()},a.prototype.destroy=function(){var e=this.labelsRenderer;e&&e.destroy(),this.labelsRenderer=null},a.prototype.getCoordinate=function(){return this.geometry.coordinate},a.prototype.getDefaultLabelCfg=function(){return(0,t.get)(this.geometry.theme,"labels",{})},a.prototype.setLabelPosition=function(e,t,n,r){},a.prototype.getDefaultOffset=function(e){var t=this.getCoordinate(),n=this.getOffsetVector(e);return t.isTransposed?n[0]:n[1]},a.prototype.getLabelOffset=function(e,t,n){var r=this.getDefaultOffset(e.offset),i=this.getCoordinate().isTransposed,o=i?"x":"y",a=i?1:-1,s={x:0,y:0};return s[o]=t>0||1===n?r*a:r*a*-1,s},a.prototype.getLabelPoint=function(e,n,r){var o=this.getCoordinate(),a=e.content.length;function l(n,r){var i=n;return(0,t.isArray)(i)&&(i=1===e.content.length?i.length<=2?i[n.length-1]:s(i):i[r]),i}var f={content:e.content[r],x:0,y:0,start:{x:0,y:0},color:"#fff"};if(n&&"polygon"===this.geometry.type){var u=(0,i.getPolygonCentroid)(n.x,n.y);f.x=u[0],f.y=u[1]}else f.x=l(n.x,r),f.y=l(n.y,r);var p=(0,t.isArray)(n.shape)?n.shape[0]:n.shape;if("funnel"===p||"pyramid"===p){var g=(0,t.get)(n,"nextPoints"),c=(0,t.get)(n,"points");if(g){var y=o.convert(c[1]),h=o.convert(g[1]);f.x=(y.x+h.x)/2,f.y=(y.y+h.y)/2}else if("pyramid"===p){y=o.convert(c[1]),h=o.convert(c[2]);f.x=(y.x+h.x)/2,f.y=(y.y+h.y)/2}}e.position&&this.setLabelPosition(f,n,r,e.position);var d=this.getLabelOffset(e,r,a);return f.start={x:f.x,y:f.y},f.x+=d.x,f.y+=d.y,f.color=n.color,f},a.prototype.getLabelAlign=function(e,t,n){var r="center";if(this.getCoordinate().isTransposed){var i=this.getDefaultOffset(e.offset);r=i<0?"right":0===i?"center":"left",n>1&&0===t&&("right"===r?r="left":"left"===r&&(r="right"))}return r},a.prototype.getLabelId=function(e){var t=this.geometry,r=t.type,i=t.getXScale(),o=t.getYScale(),a=e[n.FIELD_ORIGIN],s=t.getElementId(e);return"line"===r||"area"===r?s+=" "+a[i.field]:"path"===r&&(s+=" "+a[i.field]+"-"+a[o.field]),s},a.prototype.getLabelsRenderer=function(){var e=this.geometry,n=e.labelsContainer,i=e.labelOption,a=e.canvasRegion,s=e.animateOption,l=this.geometry.coordinate,f=this.labelsRenderer;return f||(f=new o.default({container:n,layout:(0,t.get)(i,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=f),f.region=a,f.animate=!!s&&(0,r.getDefaultAnimateCfg)("label",l),f},a.prototype.getLabelCfgs=function(r){var i=this,o=this.geometry,a=this.getDefaultLabelCfg(),s=o.type,l=o.theme,f=o.labelOption,u=o.scales,p=o.coordinate,g=f,c=g.fields,y=g.callback,h=g.cfg,d=c.map(function(e){return u[e]}),v=[];return(0,t.each)(r,function(r,o){var f,u=r[n.FIELD_ORIGIN],g=i.getLabelText(u,d);if(y){var b=c.map(function(e){return u[e]});if(f=y.apply(void 0,b),(0,t.isNil)(f))return void v.push(null)}var x=(0,e.__assign)((0,e.__assign)({id:i.getLabelId(r),data:u,mappingData:r,coordinate:p},h),f),m=x.content;(0,t.isFunction)(m)?x.content=m(u,r,o):(0,t.isUndefined)(m)&&(x.content=g[0]),(0,t.isFunction)(x.position)&&(x.position=x.position(u,r,o)),x="polygon"===s||x.offset<0&&!["line","point","path"].includes(s)?(0,t.deepMix)({},a,l.innerLabels,x):(0,t.deepMix)({},a,l.labels,x),v.push(x)}),v},a.prototype.getLabelText=function(e,n){var r=[];return(0,t.each)(n,function(n){var i=e[n.field];i=(0,t.isArray)(i)?i.map(function(e){return n.getText(e)}):n.getText(i),(0,t.isNil)(i)||""===i?r.push(null):r.push(i)}),r},a.prototype.getOffsetVector=function(e){void 0===e&&(e=0);var t=this.getCoordinate();return t.isTransposed?t.applyMatrix(e,0):t.applyMatrix(0,e)},a.prototype.getGeometryShapes=function(){var e=this.geometry,n={};return(0,t.each)(e.elementsMap,function(e,t){n[t]=e.shape}),(0,t.each)(e.getOffscreenGroup().getChildren(),function(t){var r=e.getElementId(t.get("origin").mappingData);n[r]=t}),n},a}(),f=l;exports.default=f;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../constant":"JW8G","../../animate":"UIgk","../../util/graphics":"L6ru","../../component/labels":"iupe"}],"nKE7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Chart",{enumerable:!0,get:function(){return e.Chart}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return e.View}}),Object.defineProperty(exports,"Event",{enumerable:!0,get:function(){return e.Event}}),Object.defineProperty(exports,"registerComponentController",{enumerable:!0,get:function(){return e.registerComponentController}}),Object.defineProperty(exports,"registerGeometry",{enumerable:!0,get:function(){return e.registerGeometry}}),Object.defineProperty(exports,"ComponentController",{enumerable:!0,get:function(){return t.Controller}}),Object.defineProperty(exports,"Geometry",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GeometryLabel",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return o.Interaction}}),Object.defineProperty(exports,"getInteraction",{enumerable:!0,get:function(){return o.getInteraction}}),Object.defineProperty(exports,"registerInteraction",{enumerable:!0,get:function(){return o.registerInteraction}}),Object.defineProperty(exports,"registerAction",{enumerable:!0,get:function(){return o.registerAction}}),Object.defineProperty(exports,"getActionClass",{enumerable:!0,get:function(){return o.getActionClass}}),Object.defineProperty(exports,"Facet",{enumerable:!0,get:function(){return i.Facet}}),Object.defineProperty(exports,"getFacet",{enumerable:!0,get:function(){return i.getFacet}}),Object.defineProperty(exports,"registerFacet",{enumerable:!0,get:function(){return i.registerFacet}}),Object.defineProperty(exports,"InteractionAction",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"registerShape",{enumerable:!0,get:function(){return a.registerShape}}),Object.defineProperty(exports,"registerShapeFactory",{enumerable:!0,get:function(){return a.registerShapeFactory}}),Object.defineProperty(exports,"getShapeFactory",{enumerable:!0,get:function(){return a.getShapeFactory}}),Object.defineProperty(exports,"registerGeometryLabel",{enumerable:!0,get:function(){return c.registerGeometryLabel}}),Object.defineProperty(exports,"registerGeometryLabelLayout",{enumerable:!0,get:function(){return c.registerGeometryLabelLayout}}),Object.defineProperty(exports,"getGeometryLabel",{enumerable:!0,get:function(){return c.getGeometryLabel}}),Object.defineProperty(exports,"getGeometryLabelLayout",{enumerable:!0,get:function(){return c.getGeometryLabelLayout}}),Object.defineProperty(exports,"getTheme",{enumerable:!0,get:function(){return p.getTheme}}),Object.defineProperty(exports,"registerTheme",{enumerable:!0,get:function(){return p.registerTheme}}),Object.defineProperty(exports,"registerEngine",{enumerable:!0,get:function(){return f.registerEngine}}),Object.defineProperty(exports,"getEngine",{enumerable:!0,get:function(){return f.getEngine}}),Object.defineProperty(exports,"registerAnimation",{enumerable:!0,get:function(){return b.registerAnimation}}),Object.defineProperty(exports,"getAnimation",{enumerable:!0,get:function(){return b.getAnimation}}),Object.defineProperty(exports,"LAYER",{enumerable:!0,get:function(){return g.LAYER}}),Object.defineProperty(exports,"DIRECTION",{enumerable:!0,get:function(){return g.DIRECTION}}),exports.Types=exports.VERSION=void 0;var e=require("./chart"),t=require("./chart/controller/base"),r=m(require("./geometry/base")),n=m(require("./geometry/label/base")),o=require("./interaction"),i=require("./facet"),u=m(require("./interaction/action/base")),a=require("./geometry/shape/base"),c=require("./geometry/label"),p=require("./theme"),f=require("./engine"),b=require("./animate/animation"),g=require("./constant"),s=y(require("./interface"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function m(e){return e&&e.__esModule?e:{default:e}}exports.Types=s;var d="4.0.15";exports.VERSION=d;
},{"./chart":"EFTp","./chart/controller/base":"g26H","./geometry/base":"Saah","./geometry/label/base":"thYg","./interaction":"qrhx","./facet":"GBvu","./interaction/action/base":"RCAx","./geometry/shape/base":"Ehbp","./geometry/label":"EuaU","./theme":"C6xV","./engine":"drrS","./animate/animation":"ZdEN","./constant":"JW8G","./interface":"bWtT"}],"iyQ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.antvDark=void 0;var e={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},o={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},l=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],r=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],i={backgroundColor:"#141414",brandColor:l[0],paletteQualitative10:l,paletteQualitative20:r,paletteSemanticRed:"#F4664A",paletteSemanticGreen:"#30BF78",paletteSemanticYellow:"#FAAD14",fontFamily:'"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,\n  "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n  "Noto Color Emoji"',axisLineBorderColor:o[25],axisLineBorder:.5,axisLineDash:null,axisTitleTextFillColor:o[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTickLineBorderColor:o[25],axisTickLineLength:4,axisTickLineBorder:.5,axisSubTickLineBorderColor:o[15],axisSubTickLineLength:2,axisSubTickLineBorder:.5,axisLabelFillColor:o[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisGridBorderColor:o[15],axisGridBorder:.5,axisGridLineDash:null,legendTitleTextFillColor:o[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:l[0],legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:o[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",sliderRailFillColor:o[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:o[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:e[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:e[25],annotationArcBorderColor:o[15],annotationArcBorder:.5,annotationLineBorderColor:o[25],annotationLineBorder:.5,annotationLineDash:null,annotationTextFillColor:o[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:e[95],annotationTextBorder:1.5,annotationRegionFillColor:o[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:o[25],tooltipCrosshairsBorder:.5,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:o[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:o[65],labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:e[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,labelLineBorder:.5,labelLineBorderColor:o[25],pointFillColor:l[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:e[100],pointBorderOpacity:1,pointActiveBorderColor:o[100],pointSelectedBorder:2,pointSelectedBorderColor:o[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:l[0],hollowPointBorderOpacity:.95,hollowPointFillColor:e[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:o[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:o[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:l[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:l[0],areaFillOpacity:.25,areaActiveFillColor:l[0],areaActiveFillOpacity:.5,areaSelectedFillColor:l[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:l[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:o[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:o[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:l[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:o[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:o[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:l[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:e[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:o[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:o[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3};exports.antvDark=i;
},{}],"wb7x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=1e-5;function t(t,r,o){return void 0===o&&(o=e),Math.abs(t-r)<o}exports.default=t;
},{}],"alZ1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPixelRatio=c,exports.distance=s,exports.inBox=b,exports.intersectRect=d,exports.mergeRegion=x,exports.isSamePoint=p,Object.defineProperty(exports,"isNil",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"isString",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"isFunction",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"each",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"toRadian",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"mod",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"isNumberEqual",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"clearAnimationFrame",{enumerable:!0,get:function(){return m.default}});var e=f(require("@antv/util/lib/is-nil")),t=f(require("@antv/util/lib/is-string")),r=f(require("@antv/util/lib/is-function")),n=f(require("@antv/util/lib/is-array")),i=f(require("@antv/util/lib/each")),u=f(require("@antv/util/lib/to-radian")),a=f(require("@antv/util/lib/mod")),o=f(require("@antv/util/lib/is-number-equal")),l=f(require("@antv/util/lib/request-animation-frame")),m=f(require("@antv/util/lib/clear-animation-frame"));function f(e){return e&&e.__esModule?e:{default:e}}function c(){return window?window.devicePixelRatio:1}function s(e,t,r,n){var i=e-r,u=t-n;return Math.sqrt(i*i+u*u)}function b(e,t,r,n,i,u){return i>=e&&i<=e+r&&u>=t&&u<=t+n}function d(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function x(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function p(e,t){return e[0]===t[0]&&e[1]===t[1]}
},{"@antv/util/lib/is-nil":"F0V7","@antv/util/lib/is-string":"c0E0","@antv/util/lib/is-function":"t2Eu","@antv/util/lib/is-array":"vEj5","@antv/util/lib/each":"s4BX","@antv/util/lib/to-radian":"IgNa","@antv/util/lib/mod":"Mpln","@antv/util/lib/is-number-equal":"wb7x","@antv/util/lib/request-animation-frame":"kgiN","@antv/util/lib/clear-animation-frame":"dd6o"}],"CAKn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseLineGradient=o,exports.parseRadialGradient=c,exports.parsePattern=p,exports.parseStyle=m,exports.parseRadius=u;var e=require("./util"),t=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi,r=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,n=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,i=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function x(t,a){var r=t.match(s);(0,e.each)(r,function(e){var t=e.split(":");a.addColorStop(t[0],t[1])})}function o(e,t,a){var n,i,s=r.exec(a),o=parseFloat(s[1])%360*(Math.PI/180),c=s[2],p=t.getBBox();o>=0&&o<.5*Math.PI?(n={x:p.minX,y:p.minY},i={x:p.maxX,y:p.maxY}):.5*Math.PI<=o&&o<Math.PI?(n={x:p.maxX,y:p.minY},i={x:p.minX,y:p.maxY}):Math.PI<=o&&o<1.5*Math.PI?(n={x:p.maxX,y:p.maxY},i={x:p.minX,y:p.minY}):(n={x:p.minX,y:p.maxY},i={x:p.maxX,y:p.minY});var m=Math.tan(o),u=m*m,l=(i.x-n.x+m*(i.y-n.y))/(u+1)+n.x,y=m*(i.x-n.x+m*(i.y-n.y))/(u+1)+n.y,d=e.createLinearGradient(n.x,n.y,l,y);return x(c,d),d}function c(e,t,a){var r=n.exec(a),i=parseFloat(r[1]),o=parseFloat(r[2]),c=parseFloat(r[3]),p=r[4];if(0===c){var m=p.match(s);return m[m.length-1].split(":")[1]}var u=t.getBBox(),l=u.maxX-u.minX,y=u.maxY-u.minY,d=Math.sqrt(l*l+y*y)/2,f=e.createRadialGradient(u.minX+l*i,u.minY+y*o,0,u.minX+l/2,u.minY+y/2,c*d);return x(p,f),f}function p(e,t,a){if(t.get("patternSource")&&t.get("patternSource")===a)return t.get("pattern");var r,n,s=i.exec(a),x=s[1],o=s[2];function c(){r=e.createPattern(n,x),t.set("pattern",r),t.set("patternSource",a)}switch(x){case"a":x="repeat";break;case"x":x="repeat-x";break;case"y":x="repeat-y";break;case"n":x="no-repeat";break;default:x="no-repeat"}return n=new Image,o.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=o,n.complete?c():(n.onload=c,n.src=n.src),r}function m(t,a,r){if((0,e.isString)(r)){if("("===r[1]||"("===r[2]){if("l"===r[0])return o(t,a,r);if("r"===r[0])return c(t,a,r);if("p"===r[0])return p(t,a,r)}return r}}function u(t){var a=0,r=0,n=0,i=0;return(0,e.isArray)(t)?1===t.length?a=r=n=i=t[0]:2===t.length?(a=n=t[0],r=i=t[1]):3===t.length?(a=t[0],r=i=t[1],n=t[2]):(a=t[0],r=t[1],n=t[2],i=t[3]):a=r=n=i=t,[a,r,n,i]}
},{"./util":"alZ1"}],"fsJq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("./util");function a(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function r(t,r){return a(t)*a(r)?(t[0]*r[0]+t[1]*r[1])/(a(t)*a(r)):1}function e(t,a){return(t[0]*a[1]<t[1]*a[0]?-1:1)*Math.acos(r(t,a))}function n(a,n){var s=n[1],i=n[2],o=(0,t.mod)((0,t.toRadian)(n[3]),2*Math.PI),M=n[4],h=n[5],c=a[0],u=a[1],l=n[6],P=n[7],d=Math.cos(o)*(c-l)/2+Math.sin(o)*(u-P)/2,f=-1*Math.sin(o)*(c-l)/2+Math.cos(o)*(u-P)/2,q=d*d/(s*s)+f*f/(i*i);q>1&&(s*=Math.sqrt(q),i*=Math.sqrt(q));var v=s*s*(f*f)+i*i*(d*d),x=v?Math.sqrt((s*s*(i*i)-v)/v):1;M===h&&(x*=-1),isNaN(x)&&(x=0);var g=i?x*s*f/i:0,p=s?x*-i*d/s:0,I=(c+l)/2+Math.cos(o)*g-Math.sin(o)*p,m=(u+P)/2+Math.sin(o)*g+Math.cos(o)*p,y=[(d-g)/s,(f-p)/i],A=[(-1*d-g)/s,(-1*f-p)/i],F=e([1,0],y),N=e(y,A);return r(y,A)<=-1&&(N=Math.PI),r(y,A)>=1&&(N=0),0===h&&N>0&&(N-=2*Math.PI),1===h&&N<0&&(N+=2*Math.PI),{cx:I,cy:m,rx:(0,t.isSamePoint)(a,[l,P])?0:s,ry:(0,t.isSamePoint)(a,[l,P])?0:i,startAngle:F,endAngle:F+N,xRotation:o,arcFlag:M,sweepFlag:h}}
},{"./util":"alZ1"}],"KtEh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShortenOffset=h,exports.addStartArrow=d,exports.addEndArrow=l;var t=require("tslib"),r=require("../shape"),e=Math.sin,a=Math.cos,s=Math.atan2,o=Math.PI;function n(t,n,i,h,d,l,p){var w=n.stroke,A=n.lineWidth,c=s(h-l,i-d),f=new r.Path({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*a(o/6)+","+10*e(o/6)+" L0,0 L"+10*a(o/6)+",-"+10*e(o/6),stroke:w,lineWidth:A}});f.translate(d,l),f.rotateAtPoint(d,l,c),t.set(p?"startArrowShape":"endArrowShape",f)}function i(o,n,i,h,d,l,p){var w=n.startArrow,A=n.endArrow,c=n.stroke,f=n.lineWidth,u=p?w:A,v=u.d,S=u.fill,_=u.stroke,k=u.lineWidth,y=(0,t.__rest)(u,["d","fill","stroke","lineWidth"]),M=s(h-l,i-d);v&&(d-=a(M)*v,l-=e(M)*v);var P=new r.Path({type:"path",canvas:o.get("canvas"),isArrowShape:!0,attrs:(0,t.__assign)((0,t.__assign)({},y),{stroke:_||c,lineWidth:k||f,fill:S})});P.translate(d,l),P.rotateAtPoint(d,l,M),o.set(p?"startArrowShape":"endArrowShape",P)}function h(t,r,o,n,i){var h=s(n-r,o-t);return{dx:a(h)*i,dy:e(h)*i}}function d(t,r,e,a,s,o){"object"==typeof r.startArrow?i(t,r,e,a,s,o,!0):r.startArrow?n(t,r,e,a,s,o,!0):t.set("startArrowShape",null)}function l(t,r,e,a,s,o){"object"==typeof r.endArrow?i(t,r,e,a,s,o,!1):r.endArrow?n(t,r,e,a,s,o,!1):t.set("startArrowShape",null)}
},{"tslib":"c4AP","../shape":"sG9b"}],"wobm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyAttrsToContext=u,exports.drawChildren=f,exports.drawPath=c,exports.refreshElement=h,exports.getRefreshRegion=p,exports.getMergedRegion=g,exports.mergeView=v;var e=require("@antv/util"),t=require("./parse"),r=o(require("./arc-params")),a=require("./util"),n=l(require("../util/arrow"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var l=a?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function o(e){return e&&e.__esModule?e:{default:e}}var s={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function u(r,a){var n=a.attr();for(var i in n){var l=n[i],o=s[i]?s[i]:i;"matrix"===o&&l?r.transform(l[0],l[1],l[3],l[4],l[6],l[7]):"lineDash"===o&&r.setLineDash?(0,e.isArray)(l)&&r.setLineDash(l):("strokeStyle"===o||"fillStyle"===o?l=(0,t.parseStyle)(r,a,l):"globalAlpha"===o&&(l*=r.globalAlpha),r[o]=l)}}function f(e,t,r){for(var a=0;a<t.length;a++){var n=t[a];n.get("visible")?n.draw(e,r):n.skipDraw()}}function c(e,t,a,i){var l=a.path,o=a.startArrow,s=a.endArrow,u=[0,0],f=[0,0],c={dx:0,dy:0};t.beginPath();for(var h=0;h<l.length;h++){var p=l[h],g=p[0];if(0===h&&o&&o.d){var v=e.getStartTangent();c=n.getShortenOffset(v[0][0],v[0][1],v[1][0],v[1][1],o.d)}else if(h===l.length-2&&"Z"===l[h+1][0]&&s&&s.d){if("Z"===l[h+1][0]){v=e.getEndTangent();c=n.getShortenOffset(v[0][0],v[0][1],v[1][0],v[1][1],s.d)}}else if(h===l.length-1&&s&&s.d&&"Z"!==l[0]){v=e.getEndTangent();c=n.getShortenOffset(v[0][0],v[0][1],v[1][0],v[1][1],s.d)}var d=c.dx,m=c.dy;switch(g){case"M":t.moveTo(p[1]-d,p[2]-m),f=[p[1],p[2]];break;case"L":t.lineTo(p[1]-d,p[2]-m);break;case"Q":t.quadraticCurveTo(p[1],p[2],p[3]-d,p[4]-m);break;case"C":t.bezierCurveTo(p[1],p[2],p[3],p[4],p[5]-d,p[6]-m);break;case"A":var x=void 0;i?(x=i[h])||(x=(0,r.default)(u,p),i[h]=x):x=(0,r.default)(u,p);var y=x.cx,b=x.cy,w=x.rx,M=x.ry,C=x.startAngle,O=x.endAngle,k=x.xRotation,A=x.sweepFlag;if(t.ellipse)t.ellipse(y,b,w,M,k,C,O,1-A);else{var B=w>M?w:M,X=w>M?1:w/M,Y=w>M?M/w:1;t.translate(y,b),t.rotate(k),t.scale(X,Y),t.arc(0,0,B,C,O,1-A),t.scale(1/X,1/Y),t.rotate(-k),t.translate(-y,-b)}break;case"Z":t.closePath()}if("Z"===g)u=f;else{var P=p.length;u=[p[P-2],p[P-1]]}}}function h(e,t){var r=e.get("canvas");r&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(r.refreshElement(e,t,r),r.get("autoDraw")&&r.draw(),e.set("hasChanged",!0)))}function p(e){var t;if(e.destroyed)t=e._cacheCanvasBBox;else{var r=e.get("cacheCanvasBBox"),n=r&&!(!r.width||!r.height),i=e.getCanvasBBox(),l=i&&!(!i.width||!i.height);n&&l?t=(0,a.mergeRegion)(r,i):n?t=r:l&&(t=i)}return t}function g(t){if(!t.length)return null;var r=[],a=[],n=[],i=[];return(0,e.each)(t,function(e){var t=p(e);t&&(r.push(t.minX),a.push(t.minY),n.push(t.maxX),i.push(t.maxY))}),{minX:Math.min.apply(null,r),minY:Math.min.apply(null,a),maxX:Math.max.apply(null,n),maxY:Math.max.apply(null,i)}}function v(e,t){return e&&t&&(0,a.intersectRect)(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}
},{"@antv/util":"rU8N","./parse":"CAKn","./arc-params":"fsJq","./util":"alZ1","../util/arrow":"KtEh"}],"GYp2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=new Map;function t(t,r){e.set(t,r)}function r(t){return e.get(t)}exports.register=t,exports.getMethod=r;
},{}],"rU5H":[function(require,module,exports) {
"use strict";function t(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"sefx":[function(require,module,exports) {
"use strict";function e(e){var t=e.attr(),r=t.x,u=t.y,i=t.r;return{x:r-i,y:u-i,width:2*i,height:2*i}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"sVev":[function(require,module,exports) {
"use strict";function t(t){return Math.min.apply(null,t)}function e(t){return Math.max.apply(null,t)}function r(t,e,r,n){var o=t-r,a=e-n;return Math.sqrt(o*o+a*a)}function n(t,e){return Math.abs(t-e)<.001}function o(r,n){var o=t(r),a=t(n);return{x:o,y:a,width:e(r)-o,height:e(n)-a}}function a(r,n,o,a){return{minX:t([r,o]),maxX:e([r,o]),minY:t([n,a]),maxY:e([n,a])}}function u(t){return(t+2*Math.PI)%(2*Math.PI)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.piMod=exports.getBBoxRange=exports.getBBoxByArray=exports.isNumberEqual=exports.distance=void 0,exports.distance=r,exports.isNumberEqual=n,exports.getBBoxByArray=o,exports.getBBoxRange=a,exports.piMod=u;
},{}],"tlHR":[function(require,module,exports) {
"use strict";function e(e,a){return e&&a?{minX:Math.min(e.minX,a.minX),minY:Math.min(e.minY,a.minY),maxX:Math.max(e.maxX,a.maxX),maxY:Math.max(e.maxY,a.maxY)}:e||a}function a(a,t){var r=a.get("startArrowShape"),m=a.get("endArrowShape");return r&&(t=e(t,r.getCanvasBBox())),m&&(t=e(t,m.getCanvasBBox())),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeBBox=e,exports.mergeArrowBBox=a;
},{}],"z2Rh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@antv/g-math/lib/util"),r=require("./util");function t(t){for(var i=t.attr().points,a=[],n=[],m=0;m<i.length;m++){var u=i[m];a.push(u[0]),n.push(u[1])}var h=e.getBBoxByArray(a,n),o=h.x,x=h.y,s={minX:o,minY:x,maxX:o+h.width,maxY:x+h.height};return{x:(s=r.mergeArrowBBox(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}}exports.default=t;
},{"@antv/g-math/lib/util":"sVev","./util":"tlHR"}],"Jo9n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@antv/g-math/lib/util");function e(e){for(var r=e.attr().points,u=[],a=[],o=0;o<r.length;o++){var s=r[o];u.push(s[0]),a.push(s[1])}return t.getBBoxByArray(u,a)}exports.default=e;
},{"@antv/g-math/lib/util":"sVev"}],"DuGs":[function(require,module,exports) {
"use strict";function e(e,r){var t=e.indexOf(r);-1!==t&&e.splice(t,1)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeFromArray=e,exports.isBrowser="undefined"!=typeof window&&void 0!==window.document;var r=require("@antv/util/lib/is-nil");exports.isNil=r.default;var t=require("@antv/util/lib/is-function");exports.isFunction=t.default;var i=require("@antv/util/lib/is-string");exports.isString=i.default;var a=require("@antv/util/lib/is-object");exports.isObject=a.default;var u=require("@antv/util/lib/is-array");exports.isArray=u.default;var s=require("@antv/util/lib/mix");exports.mix=s.default;var n=require("@antv/util/lib/each");exports.each=n.default;var l=require("@antv/util/lib/upper-first");function o(e,r){if(e.isCanvas())return!0;for(var t=r.getParent(),i=!1;t;){if(t===e){i=!0;break}t=t.getParent()}return i}function v(e){return e.cfg.visible&&e.cfg.capture}exports.upperFirst=l.default,exports.isParent=o,exports.isAllowCapture=v;
},{"@antv/util/lib/is-nil":"F0V7","@antv/util/lib/is-function":"t2Eu","@antv/util/lib/is-string":"c0E0","@antv/util/lib/is-object":"LTPy","@antv/util/lib/is-array":"vEj5","@antv/util/lib/mix":"RIj8","@antv/util/lib/each":"s4BX","@antv/util/lib/upper-first":"QFbu"}],"GLaR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=null;function t(){if(!e){var t=document.createElement("canvas");t.width=1,t.height=1,e=t.getContext("2d")}return e}exports.getOffScreenContext=t;
},{}],"MOrF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util"),t=require("./offscreen");function r(t,r,i){var o=1;return e.isString(t)&&(o=t.split("\n").length),o>1?r*o+n(r,i)*(o-1):r}function n(e,t){return t?t-e:.14*e}function i(r,n){var i=t.getOffScreenContext(),o=0;if(e.isNil(r)||""===r)return o;if(i.save(),i.font=n,e.isString(r)&&r.includes("\n")){var s=r.split("\n");e.each(s,function(e){var t=i.measureText(e).width;o<t&&(o=t)})}else o=i.measureText(r).width;return i.restore(),o}function o(e){var t=e.fontSize,r=e.fontFamily,n=e.fontWeight;return[e.fontStyle,e.fontVariant,n,t+"px",r].join(" ").trim()}exports.getTextHeight=r,exports.getLineSpaceing=n,exports.getTextWidth=i,exports.assembleFont=o;
},{"./util":"DuGs","./offscreen":"GLaR"}],"hJ2g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util/text");function t(t){var i=t.attr(),r=i.x,x=i.y,n=i.text,h=i.fontSize,l=i.lineHeight,a=i.font;a||(a=e.assembleFont(i));var d,o=e.getTextWidth(n,a);if(o){var s=i.textAlign,g=i.textBaseline,u=e.getTextHeight(n,h,l),y={x:r,y:x-u};s&&("end"===s||"right"===s?y.x-=o:"center"===s&&(y.x-=o/2)),g&&("top"===g?y.y+=u:"middle"===g&&(y.y+=u/2)),d={x:y.x,y:y.y,width:o,height:u}}else d={x:r,y:x,width:0,height:0};return d}exports.default=t;
},{"../util/text":"MOrF"}],"qVKT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util"),n=require("gl-matrix/vec2");exports.default={box:function(n,e,r,i){return t.getBBoxByArray([n,r],[e,i])},length:function(n,e,r,i){return t.distance(n,e,r,i)},pointAt:function(t,n,e,r,i){return{x:(1-i)*t+i*e,y:(1-i)*n+i*r}},pointDistance:function(n,e,r,i,a,u){var o=(r-n)*(a-n)+(i-e)*(u-e);return o<0?t.distance(n,e,a,u):o>(r-n)*(r-n)+(i-e)*(i-e)?t.distance(r,i,a,u):this.pointToLine(n,e,r,i,a,u)},pointToLine:function(t,e,r,i,a,u){var o=[r-t,i-e];if(n.exactEquals(o,[0,0]))return Math.sqrt((a-t)*(a-t)+(u-e)*(u-e));var c=[-o[1],o[0]];n.normalize(c,c);var s=[a-t,u-e];return Math.abs(n.dot(s,c))},tangentAngle:function(t,n,e,r){return Math.atan2(r-n,e-t)}};
},{"./util":"sVev","gl-matrix/vec2":"CHQP"}],"O14D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.snapLength=exports.nearestPoint=void 0;var n=require("./util"),t=1e-4;function a(a,e,r,l,c,p){var o,u=1/0,s=[r,l],i=20;p&&p>200&&(i=p/10);for(var y=1/i,v=y/10,f=0;f<=i;f++){var x=f*y,d=[c.apply(null,a.concat([x])),c.apply(null,e.concat([x]))];(L=n.distance(s[0],s[1],d[0],d[1]))<u&&(o=x,u=L)}if(0===o)return{x:a[0],y:e[0]};if(1===o){var g=a.length;return{x:a[g-1],y:e[g-1]}}u=1/0;for(f=0;f<32&&!(v<t);f++){var h=o-v,P=o+v,L=(d=[c.apply(null,a.concat([h])),c.apply(null,e.concat([h]))],n.distance(s[0],s[1],d[0],d[1]));if(h>=0&&L<u)o=h,u=L;else{var _=[c.apply(null,a.concat([P])),c.apply(null,e.concat([P]))],b=n.distance(s[0],s[1],_[0],_[1]);P<=1&&b<u?(o=P,u=b):v*=.5}}return{x:c.apply(null,a.concat([o])),y:c.apply(null,e.concat([o]))}}function e(t,a){for(var e=0,r=t.length,l=0;l<r;l++){var c=t[l],p=a[l],o=t[(l+1)%r],u=a[(l+1)%r];e+=n.distance(c,p,o,u)}return e/2}exports.nearestPoint=a,exports.snapLength=e;
},{"./util":"sVev"}],"s328":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./line"),t=require("./util"),r=require("./bezier");function e(n,t,r,e){var u=1-e;return u*u*n+2*e*u*t+e*e*r}function u(n,r,e){var u=n+e-2*r;if(t.isNumberEqual(u,0))return[.5];var i=(n-r)/u;return i<=1&&i>=0?[i]:[]}function i(n,t,r,e){return 2*(1-e)*(t-n)+2*e*(r-t)}function a(t,r,u,i,a,o,c){var s=e(t,u,a,c),f=e(r,i,o,c),l=n.default.pointAt(t,r,u,i,c),p=n.default.pointAt(u,i,a,o,c);return[[t,r,l.x,l.y,s,f],[s,f,p.x,p.y,a,o]]}function o(n,r,e,u,i,c,s){if(0===s)return(t.distance(n,r,e,u)+t.distance(e,u,i,c)+t.distance(n,r,i,c))/2;var f=a(n,r,e,u,i,c,.5),l=f[0],p=f[1];return l.push(s-1),p.push(s-1),o.apply(null,l)+o.apply(null,p)}exports.default={box:function(n,r,i,a,o,c){var s=u(n,i,o)[0],f=u(r,a,c)[0],l=[n,o],p=[r,c];return void 0!==s&&l.push(e(n,i,o,s)),void 0!==f&&p.push(e(r,a,c,f)),t.getBBoxByArray(l,p)},length:function(n,t,r,e,u,i){return o(n,t,r,e,u,i,3)},nearestPoint:function(n,t,u,i,a,o,c,s){return r.nearestPoint([n,u,a],[t,i,o],c,s,e)},pointDistance:function(n,r,e,u,i,a,o,c){var s=this.nearestPoint(n,r,e,u,i,a,o,c);return t.distance(s.x,s.y,o,c)},interpolationAt:e,pointAt:function(n,t,r,u,i,a,o){return{x:e(n,r,i,o),y:e(t,u,a,o)}},divide:function(n,t,r,e,u,i,o){return a(n,t,r,e,u,i,o)},tangentAngle:function(n,r,e,u,a,o,c){var s=i(n,e,a,c),f=i(r,u,o,c),l=Math.atan2(f,s);return t.piMod(l)}};
},{"./line":"qVKT","./util":"sVev","./bezier":"O14D"}],"j6Vo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util"),n=require("./line"),e=require("./bezier");function r(t,n,e,r,u){var i=1-u;return i*i*i*t+3*n*u*i*i+3*e*u*u*i+r*u*u*u}function u(t,n,e,r,u){var i=1-u;return 3*(i*i*(n-t)+2*i*u*(e-n)+u*u*(r-e))}function i(n,e,r,u){var i,a,o,l=-3*n+9*e-9*r+3*u,p=6*n-12*e+6*r,s=3*e-3*n,f=[];if(t.isNumberEqual(l,0))t.isNumberEqual(p,0)||(i=-s/p)>=0&&i<=1&&f.push(i);else{var c=p*p-4*l*s;t.isNumberEqual(c,0)?f.push(-p/(2*l)):c>0&&(a=(-p-(o=Math.sqrt(c)))/(2*l),(i=(-p+o)/(2*l))>=0&&i<=1&&f.push(i),a>=0&&a<=1&&f.push(a))}return f}function a(t,e,u,i,a,o,l,p,s){var f=r(t,u,a,l,s),c=r(e,i,o,p,s),h=n.default.pointAt(t,e,u,i,s),x=n.default.pointAt(u,i,a,o,s),y=n.default.pointAt(a,o,l,p,s),d=n.default.pointAt(h.x,h.y,x.x,x.y,s),v=n.default.pointAt(x.x,x.y,y.x,y.y,s);return[[t,e,h.x,h.y,d.x,d.y,f,c],[f,c,v.x,v.y,y.x,y.y,l,p]]}function o(t,n,r,u,i,l,p,s,f){if(0===f)return e.snapLength([t,r,i,p],[n,u,l,s]);var c=a(t,n,r,u,i,l,p,s,.5),h=c[0],x=c[1];return h.push(f-1),x.push(f-1),o.apply(null,h)+o.apply(null,x)}exports.default={extrema:i,box:function(n,e,u,a,o,l,p,s){for(var f=[n,p],c=[e,s],h=i(n,u,o,p),x=i(e,a,l,s),y=0;y<h.length;y++)f.push(r(n,u,o,p,h[y]));for(y=0;y<x.length;y++)c.push(r(e,a,l,s,x[y]));return t.getBBoxByArray(f,c)},length:function(t,n,e,r,u,i,a,l){return o(t,n,e,r,u,i,a,l,3)},nearestPoint:function(t,n,u,i,a,o,l,p,s,f,c){return e.nearestPoint([t,u,a,l],[n,i,o,p],s,f,r,c)},pointDistance:function(n,e,r,u,i,a,o,l,p,s,f){var c=this.nearestPoint(n,e,r,u,i,a,o,l,p,s,f);return t.distance(c.x,c.y,p,s)},interpolationAt:r,pointAt:function(t,n,e,u,i,a,o,l,p){return{x:r(t,e,i,o,p),y:r(n,u,a,l,p)}},divide:function(t,n,e,r,u,i,o,l,p){return a(t,n,e,r,u,i,o,l,p)},tangentAngle:function(n,e,r,i,a,o,l,p,s){var f=u(n,r,a,l,s),c=u(e,i,o,p,s);return t.piMod(Math.atan2(c,f))}};
},{"./util":"sVev","./line":"qVKT","./bezier":"O14D"}],"Fv4T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util");function a(t,a){var n=Math.abs(t);return a>0?n:-1*n}exports.default={box:function(t,a,n,r){return{x:t-n,y:a-r,width:2*n,height:2*r}},length:function(t,a,n,r){return Math.PI*(3*(n+r)-Math.sqrt((3*n+r)*(n+3*r)))},nearestPoint:function(t,n,r,h,e,i){var M=r,o=h;if(0===M||0===o)return{x:t,y:n};for(var s,u,c=e-t,f=i-n,p=Math.abs(c),v=Math.abs(f),x=M*M,y=o*o,P=Math.PI/4,d=0;d<4;d++){s=M*Math.cos(P),u=o*Math.sin(P);var l=(x-y)*Math.pow(Math.cos(P),3)/M,b=(y-x)*Math.pow(Math.sin(P),3)/o,I=s-l,g=u-b,q=p-l,w=v-b,m=Math.hypot(g,I),A=Math.hypot(w,q);P+=m*Math.asin((I*w-g*q)/(m*A))/Math.sqrt(x+y-s*s-u*u),P=Math.min(Math.PI/2,Math.max(0,P))}return{x:t+a(s,c),y:n+a(u,f)}},pointDistance:function(a,n,r,h,e,i){var M=this.nearestPoint(a,n,r,h,e,i);return t.distance(M.x,M.y,e,i)},pointAt:function(t,a,n,r,h){var e=2*Math.PI*h;return{x:t+n*Math.cos(e),y:a+r*Math.sin(e)}},tangentAngle:function(a,n,r,h,e){var i=2*Math.PI*e,M=Math.atan2(h*Math.cos(i),-r*Math.sin(i));return t.piMod(M)}};
},{"./util":"sVev"}],"D2fb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util"),n=require("./ellipse");function a(t,n,a,r,e,h,i,u){return-1*a*Math.cos(e)*Math.sin(u)-r*Math.sin(e)*Math.cos(u)}function r(t,n,a,r,e,h,i,u){return-1*a*Math.sin(e)*Math.sin(u)+r*Math.cos(e)*Math.cos(u)}function e(t,n,a){return Math.atan(-n/t*Math.tan(a))}function h(t,n,a){return Math.atan(n/(t*Math.tan(a)))}function i(t,n,a,r,e,h){return a*Math.cos(e)*Math.cos(h)-r*Math.sin(e)*Math.sin(h)+t}function u(t,n,a,r,e,h){return a*Math.sin(e)*Math.cos(h)+r*Math.cos(e)*Math.sin(h)+n}function o(t,n,a,r){return(Math.atan2(r*t,a*n)+2*Math.PI)%(2*Math.PI)}function s(t,n,a){return{x:t*Math.cos(a),y:n*Math.sin(a)}}function M(t,n,a){var r=Math.cos(a),e=Math.sin(a);return[t*r-n*e,t*e+n*r]}exports.default={box:function(t,n,a,r,o,s,M){for(var c=e(a,r,o),f=1/0,v=-1/0,P=[s,M],l=2*-Math.PI;l<=2*Math.PI;l+=Math.PI){var p=c+l;s<M?s<p&&p<M&&P.push(p):M<p&&p<s&&P.push(p)}for(l=0;l<P.length;l++){var x=i(t,n,a,r,o,P[l]);x<f&&(f=x),x>v&&(v=x)}var y=h(a,r,o),I=1/0,d=-1/0,g=[s,M];for(l=2*-Math.PI;l<=2*Math.PI;l+=Math.PI){var b=y+l;s<M?s<b&&b<M&&g.push(b):M<b&&b<s&&g.push(b)}for(l=0;l<g.length;l++){var q=u(t,n,a,r,o,g[l]);q<I&&(I=q),q>d&&(d=q)}return{x:f,y:I,width:v-f,height:d-I}},length:function(t,n,a,r,e,h,i){},nearestPoint:function(t,a,r,e,h,i,u,c,f){var v=M(c-t,f-a,-h),P=v[0],l=v[1],p=n.default.nearestPoint(0,0,r,e,P,l),x=o(r,e,p.x,p.y);x<i?p=s(r,e,i):x>u&&(p=s(r,e,u));var y=M(p.x,p.y,h);return{x:y[0]+t,y:y[1]+a}},pointDistance:function(n,a,r,e,h,i,u,o,s){var M=this.nearestPoint(n,a,r,e,o,s);return t.distance(M.x,M.y,o,s)},pointAt:function(t,n,a,r,e,h,o,s){var M=(o-h)*s+h;return{x:i(t,n,a,r,e,M),y:u(t,n,a,r,e,M)}},tangentAngle:function(n,e,h,i,u,o,s,M){var c=(s-o)*M+o,f=a(n,e,h,i,u,o,s,c),v=r(n,e,h,i,u,o,s,c);return t.piMod(Math.atan2(v,f))}};
},{"./util":"sVev","./ellipse":"Fv4T"}],"ydah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@antv/util/lib/mod"),a=require("@antv/util/lib/to-radian");function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function e(t,a){return r(t)*r(a)?(t[0]*a[0]+t[1]*a[1])/(r(t)*r(a)):1}function n(t,a){return(t[0]*a[1]<t[1]*a[0]?-1:1)*Math.acos(e(t,a))}function s(t,a){return t[0]===a[0]&&t[1]===a[1]}function i(r,i){var o=i[1],u=i[2],M=t.default(a.default(i[3]),2*Math.PI),h=i[4],c=i[5],l=r[0],f=r[1],d=i[6],v=i[7],q=Math.cos(M)*(l-d)/2+Math.sin(M)*(f-v)/2,x=-1*Math.sin(M)*(l-d)/2+Math.cos(M)*(f-v)/2,P=q*q/(o*o)+x*x/(u*u);P>1&&(o*=Math.sqrt(P),u*=Math.sqrt(P));var p=o*o*(x*x)+u*u*(q*q),g=p?Math.sqrt((o*o*(u*u)-p)/p):1;h===c&&(g*=-1),isNaN(g)&&(g=0);var I=u?g*o*x/u:0,b=o?g*-u*q/o:0,y=(l+d)/2+Math.cos(M)*I-Math.sin(M)*b,m=(f+v)/2+Math.sin(M)*I+Math.cos(M)*b,A=[(q-I)/o,(x-b)/u],F=[(-1*q-I)/o,(-1*x-b)/u],N=n([1,0],A),_=n(A,F);return e(A,F)<=-1&&(_=Math.PI),e(A,F)>=1&&(_=0),0===c&&_>0&&(_-=2*Math.PI),1===c&&_<0&&(_+=2*Math.PI),{cx:y,cy:m,rx:s(r,[d,v])?0:o,ry:s(r,[d,v])?0:u,startAngle:N,endAngle:N+_,xRotation:M,arcFlag:h,sweepFlag:c}}exports.isSamePoint=s,exports.default=i;
},{"@antv/util/lib/mod":"Mpln","@antv/util/lib/to-radian":"IgNa"}],"sSeB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@antv/util/lib/each"),e=require("@antv/util/lib/is-array"),i=require("@antv/util/lib/is-string"),r=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi;function u(u){var l=u||[];return e.default(l)?l:i.default(l)?(l=l.match(r),t.default(l,function(e,i){if((e=e.match(a))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}t.default(e,function(t,i){isNaN(t)||(e[i]=+t)}),l[i]=e}),l):void 0}exports.default=u;
},{"@antv/util/lib/each":"s4BX","@antv/util/lib/is-array":"vEj5","@antv/util/lib/is-string":"c0E0"}],"WIpP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./get-arc-params"),e=require("./get-arc-params"),t=require("./parse-path");function a(n,e){return[e[0]+(e[0]-n[0]),e[1]+(e[1]-n[1])]}function r(r){for(var s=[],i=null,o=null,l=null,d=0,c=(r=t.default(r)).length,g=0;g<c;g++){var u=r[g];o=r[g+1];var v=u[0],m={command:v,prePoint:i,params:u,startTangent:null,endTangent:null};switch(v){case"M":l=[u[1],u[2]],d=g;break;case"A":var T=n.default(i,u);m.arcParams=T}if("Z"===v)i=l,o=r[d+1];else{var p=u.length;i=[u[p-2],u[p-1]]}o&&"Z"===o[0]&&(o=r[d],s[d]&&(s[d].prePoint=i)),m.currentPoint=i,s[d]&&e.isSamePoint(i,s[d].currentPoint)&&(s[d].prePoint=m.prePoint);var f=o?[o[o.length-2],o[o.length-1]]:null;m.nextPoint=f;var P=m.prePoint;if(["L","H","V"].includes(v))m.startTangent=[P[0]-i[0],P[1]-i[1]],m.endTangent=[i[0]-P[0],i[1]-P[1]];else if("Q"===v){var h=[u[1],u[2]];m.startTangent=[P[0]-h[0],P[1]-h[1]],m.endTangent=[i[0]-h[0],i[1]-h[1]]}else if("T"===v){h=a((A=s[g-1]).currentPoint,P);"Q"===A.command?(m.command="Q",m.startTangent=[P[0]-h[0],P[1]-h[1]],m.endTangent=[i[0]-h[0],i[1]-h[1]]):(m.command="TL",m.startTangent=[P[0]-i[0],P[1]-i[1]],m.endTangent=[i[0]-P[0],i[1]-P[1]])}else if("C"===v){var M=[u[1],u[2]],x=[u[3],u[4]];m.startTangent=[P[0]-M[0],P[1]-M[1]],m.endTangent=[i[0]-x[0],i[1]-x[1]]}else if("S"===v){var A;M=a((A=s[g-1]).currentPoint,P),x=[u[1],u[2]];"C"===A.command?(m.command="C",m.startTangent=[P[0]-M[0],P[1]-M[1]],m.endTangent=[i[0]-x[0],i[1]-x[1]]):(m.command="SQ",m.startTangent=[P[0]-x[0],P[1]-x[1]],m.endTangent=[i[0]-x[0],i[1]-x[1]])}else if("A"===v){var Q=.001,q=m.arcParams||{},y=q.cx,C=void 0===y?0:y,S=q.cy,b=void 0===S?0:S,w=q.rx,L=void 0===w?0:w,Z=q.ry,_=void 0===Z?0:Z,j=q.sweepFlag,k=void 0===j?0:j,F=q.startAngle,H=void 0===F?0:F,O=q.endAngle,V=void 0===O?0:O;0===k&&(Q*=-1);var z=L*Math.cos(H-Q)+C,B=_*Math.sin(H-Q)+b;m.startTangent=[z-l[0],B-l[1]];var D=L*Math.cos(H+V+Q)+C,E=_*Math.sin(H+V-Q)+b;m.endTangent=[P[0]-D,P[1]-E]}s.push(m)}return s}exports.default=r;
},{"./get-arc-params":"ydah","./parse-path":"sSeB"}],"eOoz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@antv/g-math/lib/quadratic"),a=require("@antv/g-math/lib/cubic"),r=require("@antv/g-math/lib/arc"),e=require("@antv/path-util/lib/path-2-segments"),n=require("@antv/util/lib/is-number-equal"),i=require("./util");function h(e,n){for(var i=[],h=[],o=[],l=0;l<e.length;l++){var x=(g=e[l]).currentPoint,s=g.params,m=g.prePoint,p=void 0;switch(g.command){case"Q":p=t.default.box(m[0],m[1],s[1],s[2],s[3],s[4]);break;case"C":p=a.default.box(m[0],m[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var M=g.arcParams;p=r.default.box(M.cx,M.cy,M.rx,M.ry,M.xRotation,M.startAngle,M.endAngle);break;default:i.push(x[0]),h.push(x[1])}p&&(g.box=p,i.push(p.x,p.x+p.width),h.push(p.y,p.y+p.height)),n&&("L"===g.command||"M"===g.command)&&g.prePoint&&g.nextPoint&&o.push(g)}i=i.filter(function(t){return!Number.isNaN(t)}),h=h.filter(function(t){return!Number.isNaN(t)});var c=Math.min.apply(null,i),d=Math.min.apply(null,h),b=Math.max.apply(null,i),f=Math.max.apply(null,h);if(0===o.length)return{x:c,y:d,width:b-c,height:f-d};for(l=0;l<o.length;l++){var g;(x=(g=o[l]).currentPoint)[0]===c?c-=u(g,n).xExtra:x[0]===b&&(b+=u(g,n).xExtra),x[1]===d?d-=u(g,n).yExtra:x[1]===f&&(f+=u(g,n).yExtra)}return{x:c,y:d,width:b-c,height:f-d}}function u(t,a){var r=t.prePoint,e=t.currentPoint,i=t.nextPoint,h=Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2),u=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),l=Math.acos((h+u-o)/(2*Math.sqrt(h)*Math.sqrt(u)));if(!l||0===Math.sin(l)||n.default(l,0))return{xExtra:0,yExtra:0};var x=Math.abs(Math.atan2(i[1]-e[1],i[0]-e[0])),s=Math.abs(Math.atan2(i[0]-e[0],i[1]-e[1]));return x=x>Math.PI/2?Math.PI-x:x,s=s>Math.PI/2?Math.PI-s:s,{xExtra:Math.cos(l/2-x)*(a/2*(1/Math.sin(l/2)))-a/2||0,yExtra:Math.cos(s-l/2)*(a/2*(1/Math.sin(l/2)))-a/2||0}}function o(t){var a=t.attr(),r=a.path,n=a.stroke?a.lineWidth:0,u=h(t.get("segments")||e.default(r),n),o=u.x,l=u.y,x={minX:o,minY:l,maxX:o+u.width,maxY:l+u.height};return{x:(x=i.mergeArrowBBox(t,x)).minX,y:x.minY,width:x.maxX-x.minX,height:x.maxY-x.minY}}exports.default=o;
},{"@antv/g-math/lib/quadratic":"s328","@antv/g-math/lib/cubic":"j6Vo","@antv/g-math/lib/arc":"D2fb","@antv/path-util/lib/path-2-segments":"WIpP","@antv/util/lib/is-number-equal":"wb7x","./util":"tlHR"}],"flBY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util");function e(e){var a=e.attr(),i=a.x1,m=a.y1,r=a.x2,n=a.y2,x={minX:Math.min(i,r),maxX:Math.max(i,r),minY:Math.min(m,n),maxY:Math.max(m,n)};return{x:(x=t.mergeArrowBBox(e,x)).minX,y:x.minY,width:x.maxX-x.minX,height:x.maxY-x.minY}}exports.default=e;
},{"./util":"tlHR"}],"kwNG":[function(require,module,exports) {
"use strict";function e(e){var t=e.attr(),r=t.x,u=t.y,i=t.rx,o=t.ry;return{x:r-i,y:u-o,width:2*i,height:2*o}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"MPoz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./register");exports.getBBoxMethod=e.getMethod;var r=require("./rect"),t=require("./circle"),i=require("./polyline"),l=require("./polygon"),u=require("./text"),s=require("./path"),a=require("./line"),g=require("./ellipse");e.register("rect",r.default),e.register("image",r.default),e.register("circle",t.default),e.register("marker",t.default),e.register("polyline",i.default),e.register("polygon",l.default),e.register("text",u.default),e.register("path",s.default),e.register("line",a.default),e.register("ellipse",g.default);
},{"./register":"GYp2","./rect":"rU5H","./circle":"sefx","./polyline":"z2Rh","./polygon":"Jo9n","./text":"hJ2g","./path":"eOoz","./line":"flBY","./ellipse":"kwNG"}],"RFlv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/g-base"),r=a(require("./shape")),n=require("./util/draw");function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=n?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=t[a]}return r.default=t,e&&e.set(t,r),r}var i=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(o,e),o.prototype.onCanvasChange=function(t){(0,n.refreshElement)(this,t)},o.prototype.getShapeBase=function(){return r},o.prototype.getGroupBase=function(){return o},o.prototype._applyClip=function(t,e){e&&(t.save(),(0,n.applyAttrsToContext)(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},o.prototype.draw=function(t,e){var r=this.getChildren();r.length&&(t.save(),(0,n.applyAttrsToContext)(t,this),this._applyClip(t,this.getClip()),(0,n.drawChildren)(t,r,e),t.restore()),this.set("cacheCanvasBBox",this.getCanvasBBox()),this.set("hasChanged",!1)},o.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},o}(e.AbstractGroup),s=i;exports.default=s;
},{"tslib":"c4AP","@antv/g-base":"pj64","./shape":"sG9b","./util/draw":"wobm"}],"bp6l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/g-base"),i=require("../util/util"),r=require("../util/draw"),n=require("@antv/g-base/lib/bbox/index"),o=h(require("./index")),a=s(require("../group"));function s(t){return t&&t.__esModule?t:{default:t}}function p(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return p=function(){return t},t}function h(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=p();if(e&&e.has(t))return e.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=r?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=t[n]}return i.default=t,e&&e.set(t,i),i}var l=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(s,e),s.prototype.getDefaultAttrs=function(){var i=e.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},i),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},s.prototype.getShapeBase=function(){return o},s.prototype.getGroupBase=function(){return a.default},s.prototype.onCanvasChange=function(t){(0,r.refreshElement)(this,t)},s.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),i=(0,n.getBBoxMethod)(t)(this),r=e/2,o=i.x-r,a=i.y-r,s=i.x+i.width+r,p=i.y+i.height+r;return{x:o,minX:o,y:a,minY:a,width:i.width+e,height:i.height+e,maxX:s,maxY:p}},s.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},s.prototype.isStroke=function(){return!!this.attrs.stroke},s.prototype._applyClip=function(t,e){e&&(t.save(),(0,r.applyAttrsToContext)(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},s.prototype.draw=function(t,e){var n=this.getClip();if(e){var o=n?(0,r.getMergedRegion)([this,n]):this.getCanvasBBox();if(!(0,i.intersectRect)(e,o))return void this.set("hasChanged",!1)}t.save(),(0,r.applyAttrsToContext)(t,this),this._applyClip(t,this.getClip()),this.drawPath(t),t.restore(),this._afterDraw()},s.prototype._afterDraw=function(){var t=this.getCanvasBBox(),e=this.getCanvas();if(this.set("cacheCanvasBBox",t),e){var r=e.getViewRange();this.set("isInView",(0,i.intersectRect)(t,r))}this.set("hasChanged",!1)},s.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},s.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},s.prototype.fill=function(t){t.fill()},s.prototype.stroke=function(t){t.stroke()},s.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,n=e.opacity,o=e.strokeOpacity,a=e.fillOpacity;this.isFill()&&((0,i.isNil)(a)||1===a?this.fill(t):(t.globalAlpha=a,this.fill(t),t.globalAlpha=n)),this.isStroke()&&r>0&&((0,i.isNil)(o)||1===o||(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},s.prototype.createPath=function(t){},s.prototype.afterDrawPath=function(t){},s.prototype.isInShape=function(t,e){var i=this.isStroke(),r=this.isFill(),n=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,i,r,n)},s.prototype.isInStrokeOrPath=function(t,e,i,r,n){return!1},s.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},s}(e.AbstractShape),u=l;exports.default=u;
},{"tslib":"c4AP","@antv/g-base":"pj64","../util/util":"alZ1","../util/draw":"wobm","@antv/g-base/lib/bbox/index":"MPoz","./index":"sG9b","../group":"RFlv"}],"ZIdp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=a(require("./base")),r=require("../util/util");function a(t){return t&&t.__esModule?t:{default:t}}var u=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(a,e),a.prototype.getDefaultAttrs=function(){var r=e.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},r),{x:0,y:0,r:0})},a.prototype.isInStrokeOrPath=function(t,e,a,u,i){var n=this.attr(),s=n.x,o=n.y,l=n.r,p=i/2,c=(0,r.distance)(s,o,t,e);return u&&a?c<=l+p:u?c<=l:!!a&&(c>=l-p&&c<=l+p)},a.prototype.createPath=function(t){var e=this.attr(),r=e.x,a=e.y,u=e.r;t.beginPath(),t.arc(r,a,u,0,2*Math.PI,!1),t.closePath()},a}(e.default),i=u;exports.default=i;
},{"tslib":"c4AP","./base":"bp6l","../util/util":"alZ1"}],"QQVF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=r(require("./base"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,r,a){return t/(r*r)+e/(a*a)}var s=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.getDefaultAttrs=function(){var r=e.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},r),{x:0,y:0,rx:0,ry:0})},r.prototype.isInStrokeOrPath=function(t,e,r,s,n){var u=this.attr(),i=n/2,o=u.x,l=u.y,p=u.rx,f=u.ry,c=(t-o)*(t-o),y=(e-l)*(e-l);return s&&r?a(c,y,p+i,f+i)<=1:s?a(c,y,p,f)<=1:!!r&&(a(c,y,p-i,f-i)>=1&&a(c,y,p+i,f+i)<=1)},r.prototype.createPath=function(t){var e=this.attr(),r=e.x,a=e.y,s=e.rx,n=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(r,a,s,n,0,0,2*Math.PI,!1);else{var u=s>n?s:n,i=s>n?1:s/n,o=s>n?n/s:1;t.save(),t.translate(r,a),t.scale(i,o),t.arc(0,0,u,0,2*Math.PI),t.restore(),t.closePath()}},r}(e.default),n=s;exports.default=n;
},{"tslib":"c4AP","./base":"bp6l"}],"Y283":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=r(require("./base")),i=require("../util/util");function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return t instanceof HTMLElement&&(0,i.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var o=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.getDefaultAttrs=function(){var i=e.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},i),{x:0,y:0,width:0,height:0})},r.prototype.initAttrs=function(t){this._setImage(t.img)},r.prototype.isStroke=function(){return!1},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},r.prototype._setImage=function(t){var e=this,r=this.attrs;if((0,i.isString)(t)){var o=new Image;o.onload=function(){if(e.destroyed)return!1;e.attr("img",o),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},o.src=t,o.crossOrigin="Anonymous",this.set("loading",!0)}else t instanceof Image?(r.width||(r.width=t.width),r.height||(r.height=t.height)):n(t)&&(r.width||(r.width=Number(t.getAttribute("width"))),r.height||(r.height,Number(t.getAttribute("height"))))},r.prototype.onAttrChange=function(t,i,r){e.prototype.onAttrChange.call(this,t,i,r),"img"===t&&this._setImage(i)},r.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),r=e.x,o=e.y,s=e.width,a=e.height,h=e.sx,u=e.sy,g=e.swidth,l=e.sheight,d=e.img;(d instanceof Image||n(d))&&((0,i.isNil)(h)||(0,i.isNil)(u)||(0,i.isNil)(g)||(0,i.isNil)(l)?t.drawImage(d,r,o,s,a):t.drawImage(d,h,u,g,l,r,o,s,a))},r}(e.default),s=o;exports.default=s;
},{"tslib":"c4AP","./base":"bp6l","../util/util":"alZ1"}],"zAiC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=t(require("@antv/g-math/lib/line"));function t(e){return e&&e.__esModule?e:{default:e}}function a(t,a,n,r,u,i,o){var l=Math.min(t,n),d=Math.max(t,n),f=Math.min(a,r),s=Math.max(a,r),M=u/2;return i>=l-M&&i<=d+M&&o>=f-M&&o<=s+M&&e.default.pointToLine(t,a,n,r,i,o)<=u/2}
},{"@antv/g-math/lib/line":"qVKT"}],"wQaH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),r=u(require("@antv/g-math/lib/line")),e=u(require("./base")),o=u(require("../util/in-stroke/line")),n=i(require("../util/arrow"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=o?Object.getOwnPropertyDescriptor(t,n):null;i&&(i.get||i.set)?Object.defineProperty(e,n,i):e[n]=t[n]}return e.default=t,r&&r.set(t,e),e}function u(t){return t&&t.__esModule?t:{default:t}}var s=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(a,e),a.prototype.getDefaultAttrs=function(){var r=e.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},r),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},a.prototype.initAttrs=function(t){this.setArrow()},a.prototype.onAttrChange=function(t,r,o){e.prototype.onAttrChange.call(this,t,r,o),this.setArrow()},a.prototype.setArrow=function(){var t=this.attr(),r=t.x1,e=t.y1,o=t.x2,a=t.y2,i=t.startArrow,u=t.endArrow;i&&n.addStartArrow(this,t,o,a,r,e),u&&n.addEndArrow(this,t,r,e,o,a)},a.prototype.isInStrokeOrPath=function(t,r,e,n,a){if(!e||!a)return!1;var i=this.attr(),u=i.x1,s=i.y1,f=i.x2,p=i.y2;return(0,o.default)(u,s,f,p,a,t,r)},a.prototype.createPath=function(t){var r=this.attr(),e=r.x1,o=r.y1,a=r.x2,i=r.y2,u=r.startArrow,s=r.endArrow,f={dx:0,dy:0},p={dx:0,dy:0};u&&u.d&&(f=n.getShortenOffset(e,o,a,i,r.startArrow.d)),s&&s.d&&(p=n.getShortenOffset(e,o,a,i,r.endArrow.d)),t.beginPath(),t.moveTo(e+f.dx,o+f.dy),t.lineTo(a-p.dx,i-p.dy)},a.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),e=this.get("endArrowShape");r&&r.draw(t),e&&e.draw(t)},a.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,o=t.y1,n=t.x2,a=t.y2;return r.default.length(e,o,n,a)},a.prototype.getPoint=function(t){var e=this.attr(),o=e.x1,n=e.y1,a=e.x2,i=e.y2;return r.default.pointAt(o,n,a,i,t)},a}(e.default),f=s;exports.default=f;
},{"tslib":"c4AP","@antv/g-math/lib/line":"qVKT","./base":"bp6l","../util/in-stroke/line":"zAiC","../util/arrow":"KtEh"}],"Wry1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@antv/util/lib/is-array"),r="\t\n\v\f\r \u2028\u2029",t=new RegExp("([a-z])["+r+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+r+"]*,?["+r+"]*)+)","ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+r+"]*,?["+r+"]*","ig");function u(r){if(!r)return null;if(e.default(r))return r;var u={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},l=[];return String(r).replace(t,function(e,r,t){var a=[],i=r.toLowerCase();if(t.replace(n,function(e,r){r&&a.push(+r)}),"m"===i&&a.length>2&&(l.push([r].concat(a.splice(0,2))),i="l",r="m"===r?"l":"L"),"o"===i&&1===a.length&&l.push([r,a[0]]),"r"===i)l.push([r].concat(a));else for(;a.length>=u[i]&&(l.push([r].concat(a.splice(0,u[i]))),u[i]););return""}),l}exports.default=u;
},{"@antv/util/lib/is-array":"vEj5"}],"Nt2M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./parse-path-string"),r=/[a-z]/;function a(e,r){return[r[0]+(r[0]-e[0]),r[1]+(r[1]-e[1])]}function t(t){var s=e.default(t);if(!s||!s.length)return[["M",0,0]];for(var n=!1,l=0;l<s.length;l++){var c=s[l][0];if(r.test(c)||["V","H","T","S"].indexOf(c)>=0){n=!0;break}}if(!n)return s;var f=[],h=0,u=0,i=0,b=0,g=0,k=s[0];"M"!==k[0]&&"m"!==k[0]||(i=h=+k[1],b=u=+k[2],g++,f[0]=["M",h,u]);l=g;for(var v=s.length;l<v;l++){var o=s[l],p=f[l-1],d=[],M=(c=o[0]).toUpperCase();if(c!==M)switch(d[0]=M,M){case"A":d[1]=o[1],d[2]=o[2],d[3]=o[3],d[4]=o[4],d[5]=o[5],d[6]=+o[6]+h,d[7]=+o[7]+u;break;case"V":d[1]=+o[1]+u;break;case"H":d[1]=+o[1]+h;break;case"M":i=+o[1]+h,b=+o[2]+u;break;default:for(var x=1,H=o.length;x<H;x++)d[x]=+o[x]+(x%2?h:u)}else d=s[l];switch(M){case"Z":h=+i,u=+b;break;case"H":d=["L",h=d[1],u];break;case"V":d=["L",h,u=d[1]];break;case"T":h=d[1],u=d[2];var V=a([p[1],p[2]],[p[3],p[4]]);d=["Q",V[0],V[1],h,u];break;case"S":h=d[d.length-2],u=d[d.length-1];var w=p.length,C=a([p[w-4],p[w-3]],[p[w-2],p[w-1]]);d=["C",C[0],C[1],d[1],d[2],h,u];break;case"M":i=d[d.length-2],b=d[d.length-1];break;default:h=d[d.length-2],u=d[d.length-1]}f.push(d)}return f}exports.default=t;
},{"./parse-path-string":"Wry1"}],"EOMU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=u(require("@antv/path-util/lib/path-2-absolute")),n=u(require("./base")),i=require("../util/util"),a=require("../util/draw");function u(t){return t&&t.__esModule?t:{default:t}}var o={circle:function(t,e,r){return[["M",t-r,e],["A",r,r,0,1,0,t+r,e],["A",r,r,0,1,0,t-r,e]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["Z"]]},"triangle-down":function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}},s=function(n){function u(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(u,n),u.prototype.initAttrs=function(t){this._resetParamsCache()},u.prototype._resetParamsCache=function(){this.set("paramsCache",{})},u.prototype.onAttrChange=function(t,e,r){n.prototype.onAttrChange.call(this,t,e,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},u.prototype.isOnlyHitBox=function(){return!0},u.prototype._getR=function(t){return(0,e.isNil)(t.r)?t.radius:t.r},u.prototype._getPath=function(){var t,e,n=this.attr(),a=n.x,o=n.y,s=n.symbol||"circle",l=this._getR(n);return(0,i.isFunction)(s)?(e=(t=s)(a,o,l),e=(0,r.default)(e)):e=(t=u.Symbols[s])(a,o,l),t?e:(console.warn(s+" marker is not supported."),null)},u.prototype.createPath=function(t){var e=this._getPath(),r=this.get("paramsCache");(0,a.drawPath)(this,t,{path:e},r)},u.Symbols=o,u}(n.default),l=s;exports.default=l;
},{"tslib":"c4AP","@antv/util":"rU8N","@antv/path-util/lib/path-2-absolute":"Nt2M","./base":"bp6l","../util/util":"alZ1","../util/draw":"wobm"}],"AZhK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("@antv/g-base/lib/util/offscreen");function t(t,r,n){var a=(0,e.getOffScreenContext)();return t.createPath(a),a.isPointInPath(r,n)}
},{"@antv/g-base/lib/util/offscreen":"GLaR"}],"z71m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../util");function e(e,r,a,u,i,n,s,o){var M=(Math.atan2(o-r,s-e)+2*Math.PI)%(2*Math.PI);if(M<u||M>i)return!1;var c={x:e+a*Math.cos(M),y:r+a*Math.sin(M)};return(0,t.distance)(c.x,c.y,s,o)<=n/2}
},{"../util":"alZ1"}],"cCu9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),r=require("@antv/g-base"),t=f(require("@antv/g-math/lib/quadratic")),a=f(require("@antv/g-math/lib/cubic")),n=require("./util"),i=f(require("./in-stroke/line")),u=f(require("./in-stroke/arc")),o=c(require("gl-matrix/mat3")),s=c(require("gl-matrix/vec3"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=a?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function f(e){return e&&e.__esModule?e:{default:e}}function p(e){for(var r=!1,t=e.length,a=0;a<t;a++){var n=e[a][0];if("C"===n||"A"===n||"Q"===n){r=!0;break}}return r}function g(e,r,l,c){for(var f=!1,p=r/2,g=0;g<e.length;g++){var h=e[g],d=h.currentPoint,v=h.params,b=h.prePoint,y=h.box;if(!y||(0,n.inBox)(y.x-p,y.y-p,y.width+r,y.height+r,l,c)){switch(h.command){case"L":case"Z":f=(0,i.default)(b[0],b[1],d[0],d[1],r,l,c);break;case"Q":f=t.default.pointDistance(b[0],b[1],v[1],v[2],v[3],v[4],l,c)<=r/2;break;case"C":f=a.default.pointDistance(b[0],b[1],v[1],v[2],v[3],v[4],v[5],v[6],l,c)<=r/2;break;case"A":var x=h.arcParams,P=x.cx,k=x.cy,m=x.rx,q=x.ry,O=x.startAngle,_=x.endAngle,j=x.xRotation,M=[l,c,1],w=[1,0,0,0,1,0,0,0,1],A=m>q?m:q,D=m>q?1:m/q,C=m>q?q/m:1;o.translate(w,w,[-P,-k]),o.rotate(w,w,-j),o.scale(w,w,[1/D,1/C]),s.transformMat3(M,M,w),f=(0,u.default)(0,0,A,O,_,r,M[0],M[1])}if(f)break}}return f}function h(e){for(var r=e.length,t=[],a=[],n=[],i=0;i<r;i++){var u=e[i],o=u[0];"M"===o?(n.length&&(a.push(n),n=[]),n.push([u[1],u[2]])):"Z"===o?n.length&&(t.push(n),n=[]):n.push([u[1],u[2]])}return n.length>0&&a.push(n),{polygons:t,polylines:a}}var d=(0,e.__assign)({hasArc:p,extractPolygons:h,isPointInStroke:g},r.PathUtil);exports.default=d;
},{"tslib":"c4AP","@antv/g-base":"pj64","@antv/g-math/lib/quadratic":"s328","@antv/g-math/lib/cubic":"j6Vo","./util":"alZ1","./in-stroke/line":"zAiC","./in-stroke/arc":"z71m","gl-matrix/mat3":"viCO","gl-matrix/vec3":"QPaN"}],"fL41":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=f(require("@antv/g-math/lib/cubic")),r=require("@antv/util"),n=f(require("./base")),a=f(require("@antv/path-util/lib/path-2-absolute")),i=f(require("@antv/path-util/lib/path-2-segments")),s=require("../util/draw"),u=f(require("../util/in-path/point-in-path")),o=f(require("../util/in-path/polygon")),h=f(require("../util/path")),l=c(require("../util/arrow"));function p(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return p=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=p();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=n?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=t[a]}return r.default=t,e&&e.set(t,r),r}function f(t){return t&&t.__esModule?t:{default:t}}function g(t,e,r){for(var n=!1,a=0;a<t.length;a++){var i=t[a];if(n=(0,o.default)(i,e,r))break}return n}var v=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(o,n),o.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{startArrow:!1,endArrow:!1})},o.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},o.prototype.onAttrChange=function(t,e,r){n.prototype.onAttrChange.call(this,t,e,r),"path"===t&&this._setPathArr(e),this.setArrow()},o.prototype._setPathArr=function(t){this.attrs.path=(0,a.default)(t);var e=h.default.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},o.prototype.getSegments=function(){var t=this.get("segements");return t||(t=(0,i.default)(this.attr("path")),this.set("segments",t)),t},o.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,r=t.endArrow;if(e){var n=this.getStartTangent();l.addStartArrow(this,t,n[0][0],n[0][1],n[1][0],n[1][1])}if(r){n=this.getEndTangent();l.addEndArrow(this,t,n[0][0],n[0][1],n[1][0],n[1][1])}},o.prototype.isInStrokeOrPath=function(t,e,r,n,a){var i=this.getSegments(),s=this.get("hasArc"),o=!1;if(r&&(o=h.default.isPointInStroke(i,a,t,e)),!o&&n)if(s)o=(0,u.default)(this,t,e);else{var l=this.attr("path"),p=h.default.extractPolygons(l);o=g(p.polygons,t,e)||g(p.polylines,t,e)}return o},o.prototype.createPath=function(t){var e=this.attr(),r=this.get("paramsCache");(0,s.drawPath)(this,t,e,r)},o.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},o.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,r.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},o.prototype.getPoint=function(t){var n,a,i=this.get("tCache");i||(this._calculateCurve(),this._setTcache(),i=this.get("tCache"));var s=this.get("curve");if(!i||0===i.length)return s?{x:s[0][1],y:s[0][2]}:null;(0,r.each)(i,function(e,r){t>=e[0]&&t<=e[1]&&(n=(t-e[0])/(e[1]-e[0]),a=r)});var u=s[a];if((0,r.isNil)(u)||(0,r.isNil)(a))return null;var o=u.length,h=s[a+1];return e.default.pointAt(u[o-2],u[o-1],h[1],h[2],h[3],h[4],h[5],h[6],n)},o.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",h.default.pathToCurve(t))},o.prototype._setTcache=function(){var t,n,a,i,s=0,u=0,o=[],h=this.get("curve");h&&((0,r.each)(h,function(t,r){a=h[r+1],i=t.length,a&&(s+=e.default.length(t[i-2],t[i-1],a[1],a[2],a[3],a[4],a[5],a[6])||0)}),this.set("totalLength",s),0!==s?((0,r.each)(h,function(r,l){a=h[l+1],i=r.length,a&&((t=[])[0]=u/s,n=e.default.length(r[i-2],r[i-1],a[1],a[2],a[3],a[4],a[5],a[6]),u+=n||0,t[1]=u/s,o.push(t))}),this.set("tCache",o)):this.set("tCache",[]))},o.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var r=e[0].currentPoint,n=e[1].currentPoint,a=e[1].startTangent;t=[],a?(t.push([r[0]-a[0],r[1]-a[1]]),t.push([r[0],r[1]])):(t.push([n[0],n[1]]),t.push([r[0],r[1]]))}return t},o.prototype.getEndTangent=function(){var t,e=this.getSegments(),r=e.length;if(r>1){var n=e[r-2].currentPoint,a=e[r-1].currentPoint,i=e[r-1].endTangent;t=[],i?(t.push([a[0]-i[0],a[1]-i[1]]),t.push([a[0],a[1]])):(t.push([n[0],n[1]]),t.push([a[0],a[1]]))}return t},o}(n.default),d=v;exports.default=d;
},{"tslib":"c4AP","@antv/g-math/lib/cubic":"j6Vo","@antv/util":"rU8N","./base":"bp6l","@antv/path-util/lib/path-2-absolute":"Nt2M","@antv/path-util/lib/path-2-segments":"WIpP","../util/draw":"wobm","../util/in-path/point-in-path":"AZhK","../util/in-path/polygon":"y7II","../util/path":"cCu9","../util/arrow":"KtEh"}],"H9mZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./line"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t,u,f,n){var a=r.length;if(a<2)return!1;for(var i=0;i<a-1;i++){var l=r[i][0],o=r[i][1],d=r[i+1][0],s=r[i+1][1];if((0,e.default)(l,o,d,s,t,u,f))return!0}if(n){var v=r[0],c=r[a-1];if((0,e.default)(v[0],v[1],c[0],c[1],t,u,f))return!0}return!1}
},{"./line":"zAiC"}],"zdrU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=n(require("./base")),r=n(require("../util/in-stroke/polyline")),i=n(require("../util/in-path/polygon"));function n(t){return t&&t.__esModule?t:{default:t}}var o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(n,e),n.prototype.isInStrokeOrPath=function(t,e,n,o,u){var a=this.attr().points,l=!1;return n&&(l=(0,r.default)(a,u,t,e,!0)),!l&&o&&(l=(0,i.default)(a,t,e)),l},n.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var r=0;r<e.length;r++){var i=e[r];0===r?t.moveTo(i[0],i[1]):t.lineTo(i[0],i[1])}t.closePath()}},n}(e.default),u=o;exports.default=u;
},{"tslib":"c4AP","./base":"bp6l","../util/in-stroke/polyline":"H9mZ","../util/in-path/polygon":"y7II"}],"FngR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.distanceAtSegment=exports.angleAtSegments=exports.pointAtSegments=exports.lengthOfSegment=void 0;var t=require("./line"),e=require("./util");function n(t){for(var n=0,r=[],o=0;o<t.length-1;o++){var a=t[o],g=t[o+1],l=e.distance(a[0],a[1],g[0],g[1]),s={from:a,to:g,length:l};r.push(s),n+=l}return{segments:r,totalLength:n}}function r(t){if(t.length<2)return 0;for(var n=0,r=0;r<t.length-1;r++){var o=t[r],a=t[r+1];n+=e.distance(o[0],o[1],a[0],a[1])}return n}function o(e,r){if(r>1||r<0||e.length<2)return null;var o=n(e),a=o.segments,g=o.totalLength;if(0===g)return{x:e[0][0],y:e[0][1]};for(var l=0,s=null,i=0;i<a.length;i++){var u=a[i],f=u.from,h=u.to,p=u.length/g;if(r>=l&&r<=l+p){var v=(r-l)/p;s=t.default.pointAt(f[0],f[1],h[0],h[1],v);break}l+=p}return s}function a(t,e){if(e>1||e<0||t.length<2)return 0;for(var r=n(t),o=r.segments,a=r.totalLength,g=0,l=0,s=0;s<o.length;s++){var i=o[s],u=i.from,f=i.to,h=i.length/a;if(e>=g&&e<=g+h){l=Math.atan2(f[1]-u[1],f[0]-u[0]);break}g+=h}return l}function g(e,n,r){for(var o=1/0,a=0;a<e.length-1;a++){var g=e[a],l=e[a+1],s=t.default.pointDistance(g[0],g[1],l[0],l[1],n,r);s<o&&(o=s)}return o}exports.lengthOfSegment=r,exports.pointAtSegments=o,exports.angleAtSegments=a,exports.distanceAtSegment=g;
},{"./line":"qVKT","./util":"sVev"}],"xW8U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./segments"),t=require("./util");exports.default={box:function(e){for(var n=[],r=[],u=0;u<e.length;u++){var i=e[u];n.push(i[0]),r.push(i[1])}return t.getBBoxByArray(n,r)},length:function(t){return e.lengthOfSegment(t)},pointAt:function(t,n){return e.pointAtSegments(t,n)},pointDistance:function(t,n,r){return e.distanceAtSegment(t,n,r)},tangentAngle:function(t,n){return e.angleAtSegments(t,n)}};
},{"./segments":"FngR","./util":"sVev"}],"ppmk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=p(require("@antv/g-math/lib/line")),r=p(require("@antv/g-math/lib/polyline")),n=require("@antv/util"),o=p(require("./base")),i=p(require("../util/in-stroke/polyline")),a=u(require("../util/arrow"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=n?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}function p(t){return t&&t.__esModule?t:{default:t}}var h=function(o){function s(){return null!==o&&o.apply(this,arguments)||this}return(0,t.__extends)(s,o),s.prototype.getDefaultAttrs=function(){var e=o.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{startArrow:!1,endArrow:!1})},s.prototype.initAttrs=function(t){this.setArrow()},s.prototype.onAttrChange=function(t,e,r){o.prototype.onAttrChange.call(this,t,e,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},s.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},s.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,r=e.points,n=e.startArrow,o=e.endArrow,i=r.length,s=r[0][0],u=r[0][1],p=r[i-1][0],h=r[i-1][1];n&&a.addStartArrow(this,t,r[1][0],r[1][1],s,u),o&&a.addEndArrow(this,t,r[i-2][0],r[i-2][1],p,h)},s.prototype.isFill=function(){return!1},s.prototype.isInStrokeOrPath=function(t,e,r,n,o){if(!r||!o)return!1;var a=this.attr().points;return(0,i.default)(a,o,t,e,!1)},s.prototype.isStroke=function(){return!0},s.prototype.createPath=function(t){var e=this.attr(),r=e.points,n=e.startArrow,o=e.endArrow,i=r.length;if(!(r.length<2)){var s,u=r[0][0],p=r[0][1],h=r[i-1][0],l=r[i-1][1];if(n&&n.d)u+=(s=a.getShortenOffset(u,p,r[1][0],r[1][1],n.d)).dx,p+=s.dy;if(o&&o.d)h-=(s=a.getShortenOffset(r[i-2][0],r[i-2][1],h,l,o.d)).dx,l-=s.dy;t.beginPath(),t.moveTo(u,p);for(var f=0;f<i-1;f++){var c=r[f];t.lineTo(c[0],c[1])}t.lineTo(h,l)}},s.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},s.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,n.isNil)(e)?(this.set("totalLength",r.default.length(t)),this.get("totalLength")):e},s.prototype.getPoint=function(t){var r,o,i=this.attr().points,a=this.get("tCache");return a||(this._setTcache(),a=this.get("tCache")),(0,n.each)(a,function(e,n){t>=e[0]&&t<=e[1]&&(r=(t-e[0])/(e[1]-e[0]),o=n)}),e.default.pointAt(i[o][0],i[o][1],i[o+1][0],i[o+1][1],r)},s.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var r=this.getTotalLength();if(!(r<=0)){var o,i,a=0,s=[];(0,n.each)(t,function(n,u){t[u+1]&&((o=[])[0]=a/r,i=e.default.length(n[0],n[1],t[u+1][0],t[u+1][1]),a+=i,o[1]=a/r,s.push(o))}),this.set("tCache",s)}}},s.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},s.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,r=[];return r.push([t[e-1][0],t[e-1][1]]),r.push([t[e][0],t[e][1]]),r},s}(o.default),l=h;exports.default=l;
},{"tslib":"c4AP","@antv/g-math/lib/line":"qVKT","@antv/g-math/lib/polyline":"xW8U","@antv/util":"rU8N","./base":"bp6l","../util/in-stroke/polyline":"H9mZ","../util/arrow":"KtEh"}],"f0M3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("../util");function r(r,t,i,o,n,u,x){var s=n/2;return(0,e.inBox)(r-s,t-s,i,n,u,x)||(0,e.inBox)(r+i-s,t-s,n,o,u,x)||(0,e.inBox)(r+s,t+o-s,i,n,u,x)||(0,e.inBox)(r-s,t+s,n,o,u,x)}
},{"../util":"alZ1"}],"c4Bd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=a(require("./line")),t=a(require("./arc"));function a(e){return e&&e.__esModule?e:{default:e}}function u(a,u,r,l,d,f,M,n){return(0,e.default)(a+d,u,a+r-d,u,f,M,n)||(0,e.default)(a+r,u+d,a+r,u+l-d,f,M,n)||(0,e.default)(a+r-d,u+l,a+d,u+l,f,M,n)||(0,e.default)(a,u+l-d,a,u+d,f,M,n)||(0,t.default)(a+r-d,u+d,d,1.5*Math.PI,2*Math.PI,f,M,n)||(0,t.default)(a+r-d,u+l-d,d,0,.5*Math.PI,f,M,n)||(0,t.default)(a+d,u+l-d,d,.5*Math.PI,Math.PI,f,M,n)||(0,t.default)(a+d,u+d,d,Math.PI,1.5*Math.PI,f,M,n)}
},{"./line":"zAiC","./arc":"z71m"}],"JCNW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=o(require("./base")),r=require("../util/parse"),i=require("../util/util"),a=o(require("../util/in-stroke/rect")),u=o(require("../util/in-stroke/rect-radius")),n=o(require("../util/in-path/point-in-path"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(o,e),o.prototype.getDefaultAttrs=function(){var r=e.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},r),{x:0,y:0,width:0,height:0,radius:0})},o.prototype.isInStrokeOrPath=function(t,e,r,o,s){var l=this.attr(),h=l.x,d=l.y,p=l.width,c=l.height,f=l.radius;if(f){var v=!1;return r&&(v=(0,u.default)(h,d,p,c,f,s,t,e)),!v&&o&&(v=(0,n.default)(this,t,e)),v}var P=s/2;return o&&r?(0,i.inBox)(h-P,d-P,p+P,c+P,t,e):o?(0,i.inBox)(h,d,p,c,t,e):r?(0,a.default)(h,d,p,c,s,t,e):void 0},o.prototype.createPath=function(t){var e=this.attr(),i=e.x,a=e.y,u=e.width,n=e.height,o=e.radius;if(t.beginPath(),0===o)t.rect(i,a,u,n);else{var s=(0,r.parseRadius)(o),l=s[0],h=s[1],d=s[2],p=s[3];t.moveTo(i+l,a),t.lineTo(i+u-h,a),0!==h&&t.arc(i+u-h,a+h,h,-Math.PI/2,0),t.lineTo(i+u,a+n-d),0!==d&&t.arc(i+u-d,a+n-d,d,0,Math.PI/2),t.lineTo(i+p,a+n),0!==p&&t.arc(i+p,a+n-p,p,Math.PI/2,Math.PI),t.lineTo(i,a+l),0!==l&&t.arc(i+l,a+l,l,Math.PI,1.5*Math.PI),t.closePath()}},o}(e.default),l=s;exports.default=l;
},{"tslib":"c4AP","./base":"bp6l","../util/parse":"CAKn","../util/util":"alZ1","../util/in-stroke/rect":"f0M3","../util/in-stroke/rect-radius":"c4Bd","../util/in-path/point-in-path":"AZhK"}],"H3Jc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=o(require("./base")),i=require("../util/util"),r=require("@antv/g-base/lib/util/text");function o(t){return t&&t.__esModule?t:{default:t}}var n=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(o,e),o.prototype.getDefaultAttrs=function(){var i=e.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},i),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},o.prototype.isOnlyHitBox=function(){return!0},o.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},o.prototype._assembleFont=function(){var t=this.attrs;t.font=(0,r.assembleFont)(t)},o.prototype._setText=function(t){var e=null;(0,i.isString)(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},o.prototype.onAttrChange=function(t,i,r){e.prototype.onAttrChange.call(this,t,i,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(i)},o.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,i=1*t.fontSize;return e?e-i:.14*i},o.prototype._drawTextArr=function(t,e,o){var n,s=this.attrs,l=s.textBaseline,a=s.x,p=s.y,f=1*s.fontSize,u=this._getSpaceingY(),h=(0,r.getTextHeight)(s.text,s.fontSize,s.lineHeight);(0,i.each)(e,function(e,i){n=p+i*(u+f)-h+f,"middle"===l&&(n+=h-f-(h-f)/2),"top"===l&&(n+=h-f),o?t.fillText(e,a,n):t.strokeText(e,a,n)})},o.prototype._drawText=function(t,e){var i=this.attr(),r=i.x,o=i.y,n=this.get("textArr");if(n)this._drawTextArr(t,n,e);else{var s=i.text;e?t.fillText(s,r,o):t.strokeText(s,r,o)}},o.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,o=e.opacity,n=e.strokeOpacity,s=e.fillOpacity;this.isStroke()&&r>0&&((0,i.isNil)(n)||1===n||(t.globalAlpha=o),this.stroke(t)),this.isFill()&&((0,i.isNil)(s)||1===s?this.fill(t):(t.globalAlpha=s,this.fill(t),t.globalAlpha=o)),this.afterDrawPath(t)},o.prototype.fill=function(t){this._drawText(t,!0)},o.prototype.stroke=function(t){this._drawText(t,!1)},o}(e.default),s=n;exports.default=s;
},{"tslib":"c4AP","./base":"bp6l","../util/util":"alZ1","@antv/g-base/lib/util/text":"MOrF"}],"sG9b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Base",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Ellipse",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Line",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Marker",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Path",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Polyline",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Rect",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return c.default}});var e=p(require("./base")),r=p(require("./circle")),t=p(require("./ellipse")),n=p(require("./image")),u=p(require("./line")),i=p(require("./marker")),o=p(require("./path")),l=p(require("./polygon")),f=p(require("./polyline")),a=p(require("./rect")),c=p(require("./text"));function p(e){return e&&e.__esModule?e:{default:e}}
},{"./base":"bp6l","./circle":"ZIdp","./ellipse":"QQVF","./image":"Y283","./line":"wQaH","./marker":"EOMU","./path":"fL41","./polygon":"zdrU","./polyline":"ppmk","./rect":"JCNW","./text":"H3Jc"}],"aKOM":[function(require,module,exports) {
module.exports={__npminstall_done:!1,_args:[["@antv/g-canvas@0.4.14","C:\\Users\\Lenovo\\Desktop\\programs\\side project\\ncku"]],_from:"@antv/g-canvas@0.4.14",_id:"@antv/g-canvas@0.4.14",_inBundle:!1,_integrity:"sha512-BPpEbHvszEPQHhssPQrIOF2zKztiogabhiBQ/MCX3qvLUXgBRRzN6ktwS816fQPa82RYiGUmzEUDhgCXUWXAcg==",_location:"/@antv/g-canvas",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"@antv/g-canvas@0.4.14",name:"@antv/g-canvas",escapedName:"@antv%2fg-canvas",scope:"@antv",rawSpec:"0.4.14",saveSpec:null,fetchSpec:"0.4.14"},_requiredBy:["/@antv/g2"],_resolved:"https://registry.npmjs.org/@antv/g-canvas/-/g-canvas-0.4.14.tgz",_spec:"0.4.14",_where:"C:\\Users\\Lenovo\\Desktop\\programs\\side project\\ncku",author:{name:"https://github.com/orgs/antvis/people"},bugs:{url:"https://github.com/antvis/g/issues"},dependencies:{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","gl-matrix":"^3.0.0"},description:"A canvas library which providing 2d",devDependencies:{"@antv/torch":"^1.0.0",less:"^3.9.0","npm-run-all":"^4.1.5",webpack:"^4.26.1","webpack-cli":"^3.1.2"},files:["package.json","esm","lib","dist","LICENSE","README.md"],gitHead:"6b4107c8cfae1b893c385758ad8e870236f73f6b",homepage:"https://github.com/antvis/g#readme",keywords:["util","antv","g"],license:"ISC",main:"lib/index.js",module:"esm/index.js",name:"@antv/g-canvas",publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/antvis/g.git"},scripts:{build:"npm run clean && run-p build:*","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:umd":"webpack --config webpack.config.js --mode production",clean:"rm -rf esm lib dist",coverage:"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage",dist:"webpack --config webpack.config.js --mode production",test:"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts",tsc:"tsc --noEmit",typecheck:"tsc --noEmit"},types:"lib/index.d.ts",unpkg:"dist/g.min.js",version:"0.4.14"};
},{}],"LSz4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"WDLr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@antv/g-base/lib/types");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})});
},{"@antv/g-base/lib/types":"LSz4"}],"YjSQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@antv/g-base/lib/interfaces");Object.keys(e).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(exports,t,{enumerable:!0,get:function(){return e[t]}})});
},{"@antv/g-base/lib/interfaces":"LSz4"}],"R7ZR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShape=a;var r=require("@antv/g-base/lib/util/util"),e=require("@antv/g-base/lib/util/matrix");function i(r,i){if(i){var t=(0,e.invert)(i);return(0,e.multiplyVec2)(t,r)}return r}function t(r,e,t){var n=r.getTotalMatrix();if(n){var a=i([e,t,1],n);return[a[0],a[1]]}return[e,t]}function n(e,i,n){if(e.isCanvas&&e.isCanvas())return!0;if(!(0,r.isAllowCapture)(e)&&!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var a=t(e,i,n),u=a[0],l=a[1];if(e.isClipped(u,l))return!1}var f=e.cfg.cacheCanvasBBox;return f||(f=e.getCanvasBBox()),i>=f.minX&&i<=f.maxX&&n>=f.minY&&n<=f.maxY}function a(r,e,i){if(!n(r,e,i))return null;for(var u=null,l=r.getChildren(),f=l.length-1;f>=0;f--){var s=l[f];if(s.isGroup())u=a(s,e,i);else if(n(s,e,i)){var v=s,o=t(s,e,i),c=o[0],p=o[1];v.isInShape(c,p)&&(u=s)}if(u)break}return u}
},{"@antv/g-base/lib/util/util":"DuGs","@antv/g-base/lib/util/matrix":"FZZg"}],"zQsR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/g-base"),r=require("./util/hit"),i=l(require("./shape")),n=s(require("./group")),a=require("./util/draw"),o=require("./util/util");function s(t){return t&&t.__esModule?t:{default:t}}function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=i?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}var u=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(s,e),s.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},s.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},s.prototype.getShapeBase=function(){return i},s.prototype.getGroupBase=function(){return n.default},s.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||(0,o.getPixelRatio)();return t>=1?Math.ceil(t):1},s.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.get("width"),maxY:this.get("height")}},s.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},s.prototype.setDOMSize=function(t,r){e.prototype.setDOMSize.call(this,t,r);var i=this.get("context"),n=this.get("el"),a=this.getPixelRatio();n.width=a*t,n.height=a*r,a>1&&i.scale(a,a)},s.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},s.prototype.getShape=function(t,i){return this.get("quickHit")?(0,r.getShape)(this,t,i):e.prototype.getShape.call(this,t,i,null)},s.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),r=this.getViewRange();e.length&&e[0]===this?t=r:(t=(0,a.getMergedRegion)(e))&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),this.get("clipView")&&(t=(0,a.mergeView)(t,r)));return t},s.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},s.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,o.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},s.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},s.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),r=this.getChildren();t.clearRect(0,0,e.width,e.height),(0,a.applyAttrsToContext)(t,this),(0,a.drawChildren)(t,r),this.set("refreshElements",[])},s.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),r=this.getChildren(),i=this._getRefreshRegion();i&&(t.clearRect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.save(),t.beginPath(),t.rect(i.minX,i.minY,i.maxX-i.minX,i.maxY-i.minY),t.clip(),(0,a.applyAttrsToContext)(t,this),(0,a.drawChildren)(t,r,i),t.restore()),(0,o.each)(e,function(t){t.get("hasChanged")&&t.set("hasChanged",!1)}),this.set("refreshElements",[])},s.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=(0,o.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",e))},s.prototype.skipDraw=function(){},s}(e.AbstractCanvas),p=u;exports.default=p;
},{"tslib":"c4AP","@antv/g-base":"pj64","./util/hit":"R7ZR","./shape":"sG9b","./group":"RFlv","./util/draw":"wobm","./util/util":"alZ1"}],"t7Hs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:!0,Shape:!0,Event:!0,Canvas:!0,Group:!0};Object.defineProperty(exports,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(exports,"Canvas",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Group",{enumerable:!0,get:function(){return a.default}}),exports.Shape=exports.version=void 0;var r=c(require("./shape"));exports.Shape=r;var t=require("./types");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var n=require("./interfaces");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});var o=require("@antv/g-base"),u=p(require("./canvas")),a=p(require("./group"));function p(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}var f=require("../package.json"),s=f.version;exports.version=s;
},{"./shape":"sG9b","../package.json":"aKOM","./types":"WDLr","./interfaces":"YjSQ","@antv/g-base":"pj64","./canvas":"zQsR","./group":"RFlv"}],"PzYn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EVENTS=exports.SVG_ATTR_MAP=exports.SHAPE_TO_TAGS=void 0;var e={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"};exports.SHAPE_TO_TAGS=e;var t={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};exports.SVG_ATTR_MAP=t;var o=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"];exports.EVENTS=o;
},{}],"UsBV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSVGElement=r,exports.createDom=n,exports.sortDom=o,exports.moveTo=i;var e=require("@antv/util"),t=require("../constant");function r(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function n(e){var n=t.SHAPE_TO_TAGS[e.type],o=e.getParent();if(!n)throw new Error("the type "+e.type+" is not supported by svg");var i=r(n);if(e.get("id")&&(i.id=e.get("id")),e.set("el",i),e.set("attrs",{}),o){var a=o.get("el");a?a.appendChild(i):(a=o.createDom(),o.set("el",a),a.appendChild(i))}return i}function o(t,r){var n=t.get("el"),o=(0,e.toArray)(n.children).sort(r),i=document.createDocumentFragment();o.forEach(function(e){i.appendChild(e)}),n.appendChild(i)}function i(e,t){var r=e.parentNode,n=Array.from(r.childNodes).filter(function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()}),o=n[t],i=n.indexOf(e);if(o){if(i>t)r.insertBefore(e,o);else if(i<t){var a=n[t+1];a?r.insertBefore(e,a):r.appendChild(e)}}else r.appendChild(e)}
},{"@antv/util":"rU8N","../constant":"PzYn"}],"h1YG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setShadow=e,exports.setTransform=r,exports.setClip=a;var t=require("./dom");function e(t,e){var r=t.cfg.el,a=t.attr(),i={dx:a.shadowOffsetX,dy:a.shadowOffsetY,blur:a.shadowBlur,color:a.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),r.setAttribute("filter","url(#"+o+")")}else r.removeAttribute("filter")}function r(t){var e=t.attr().matrix;if(e){for(var r=t.cfg.el,a=[],i=0;i<9;i+=3)a.push(e[i]+","+e[i+1]);-1===(a=a.join(",")).indexOf("NaN")?r.setAttribute("transform","matrix("+a+")"):console.warn("invalid matrix:",e)}}function a(e,r){var a=e.getClip(),i=e.get("el");if(a){if(a&&!i.hasAttribute("clip-path")){(0,t.createDom)(a),a.createPath(r);var o=r.addClip(a);i.setAttribute("clip-path","url(#"+o+")")}}else i.removeAttribute("clip-path")}
},{"./dom":"UsBV"}],"iUW2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawChildren=r,exports.refreshElement=i;var e=require("./svg"),t=require("./dom");function r(e,t){t.forEach(function(t){t.draw(e)})}function i(r,i){var n=r.get("canvas");if(n&&n.get("autoDraw")){var o=n.get("context"),s=r.getParent(),a=s?s.getChildren():[n],d=r.get("el");if("remove"===i)if(r.get("isClipShape")){var l=d&&d.parentNode,f=l&&l.parentNode;l&&f&&f.removeChild(l)}else d&&d.parentNode&&d.parentNode.removeChild(d);else if("show"===i)d.setAttribute("visibility","visible");else if("hide"===i)d.setAttribute("visibility","hidden");else if("zIndex"===i)(0,t.moveTo)(d,a.indexOf(r));else if("sort"===i){var v=r.get("children");v&&v.length&&(0,t.sortDom)(r,function(e,t){return v.indexOf(e)-v.indexOf(t)?1:0})}else"clear"===i?d&&(d.innerHTML=""):"matrix"===i?(0,e.setTransform)(r):"clip"===i?(0,e.setClip)(r,o):"attr"===i||"add"===i&&r.draw(o)}}
},{"./svg":"h1YG","./dom":"UsBV"}],"YmFC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/g-base"),r=require("@antv/util"),n=p(require("./shape")),i=require("./util/draw"),o=require("./util/svg"),a=require("./constant"),u=require("./util/dom");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function p(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}var c=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(s,e),s.prototype.isEntityGroup=function(){return!0},s.prototype.createDom=function(){var t=(0,u.createSVGElement)("g");this.set("el",t);var e=this.getParent();if(e){var r=e.get("el");r?r.appendChild(t):(r=e.createDom(),e.set("el",r),r.appendChild(t))}return t},s.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},s.prototype.onCanvasChange=function(t){(0,i.refreshElement)(this,t)},s.prototype.getShapeBase=function(){return n},s.prototype.getGroupBase=function(){return s},s.prototype.draw=function(t){var e=this.getChildren(),r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||this.createDom(),(0,o.setClip)(this,t),this.createPath(t),e.length&&(0,i.drawChildren)(t,e))},s.prototype.createPath=function(t,e){var n=this.attr(),i=this.get("el");(0,r.each)(e||n,function(t,e){a.SVG_ATTR_MAP[e]&&i.setAttribute(a.SVG_ATTR_MAP[e],t)}),(0,o.setTransform)(this)},s}(e.AbstractGroup),l=c;exports.default=l;
},{"tslib":"c4AP","@antv/g-base":"pj64","@antv/util":"rU8N","./shape":"YU0s","./util/draw":"iUW2","./util/svg":"h1YG","./constant":"PzYn","./util/dom":"UsBV"}],"kwWD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/g-base"),r=require("../util/svg"),i=require("../util/dom"),o=require("../util/draw"),n=require("../constant"),s=p(require("./index")),a=u(require("../group")),l=require("@antv/g-base/lib/bbox/index");function u(t){return t&&t.__esModule?t:{default:t}}function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function p(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=i?Object.getOwnPropertyDescriptor(t,o):null;n&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}var f=function(e){function u(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return(0,t.__extends)(u,e),u.prototype.getDefaultAttrs=function(){var r=e.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},r),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},u.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var i=r.get("context");this.draw(i,t)}},u.prototype.getShapeBase=function(){return s},u.prototype.getGroupBase=function(){return a.default},u.prototype.onCanvasChange=function(t){(0,o.refreshElement)(this,t)},u.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var r=(0,l.getBBoxMethod)(this.get("type"));r&&(e=r(this))}if(e){var i=e.x,o=e.y,n=e.width,s=e.height,a=this.getHitLineWidth(),u=a/2,h=i-u,p=o-u;return{x:h,y:p,minX:h,minY:p,maxX:i+n+u,maxY:o+s+u,width:n+a,height:s+a}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},u.prototype.isFill=function(){var t=this.attr(),e=t.fill,r=t.fillStyle;return(e||r||this.isClipShape())&&this.canFill},u.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,r=t.strokeStyle;return(e||r)&&this.canStroke},u.prototype.draw=function(t,e){var o=this.get("el");this.get("destroyed")?o&&o.parentNode.removeChild(o):(o||(0,i.createDom)(this),(0,r.setClip)(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},u.prototype.createPath=function(t,e){},u.prototype.strokeAndFill=function(t,e){var r=e||this.attr(),i=r.fill,o=r.fillStyle,s=r.stroke,a=r.strokeStyle,l=r.fillOpacity,u=r.strokeOpacity,h=r.lineWidth,p=this.get("el");this.canFill&&(e?"fill"in r?this._setColor(t,"fill",i):"fillStyle"in r&&this._setColor(t,"fill",o):this._setColor(t,"fill",i||o),l&&p.setAttribute(n.SVG_ATTR_MAP.fillOpacity,l)),this.canStroke&&h>0&&(e?"stroke"in r?this._setColor(t,"stroke",s):"strokeStyle"in r&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",s||a),u&&p.setAttribute(n.SVG_ATTR_MAP.strokeOpacity,u),h&&p.setAttribute(n.SVG_ATTR_MAP.lineWidth,h))},u.prototype._setColor=function(t,e,r){var i=this.get("el");if(r)if(r=r.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(r))(o=t.find("gradient",r))||(o=t.addGradient(r)),i.setAttribute(n.SVG_ATTR_MAP[e],"url(#"+o+")");else if(/^[p,P]{1}[\s]*\(/.test(r)){var o;(o=t.find("pattern",r))||(o=t.addPattern(r)),i.setAttribute(n.SVG_ATTR_MAP[e],"url(#"+o+")")}else i.setAttribute(n.SVG_ATTR_MAP[e],r);else i.setAttribute(n.SVG_ATTR_MAP[e],"none")},u.prototype.shadow=function(t,e){var i=this.attr(),o=e||i,n=o.shadowOffsetX,s=o.shadowOffsetY,a=o.shadowBlur,l=o.shadowColor;(n||s||a||l)&&(0,r.setShadow)(this,t)},u.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&(0,r.setTransform)(this)},u.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},u.prototype.isPointInPath=function(t,e){var r=this.get("el"),i=this.get("canvas").get("el").getBoundingClientRect(),o=t+i.left,n=e+i.top,s=document.elementFromPoint(o,n);return!(!s||!s.isEqualNode(r))},u.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,r=t.lineAppendWidth;return this.isStroke()?e+r:0},u}(e.AbstractShape),c=f;exports.default=c;
},{"tslib":"c4AP","@antv/g-base":"pj64","../util/svg":"h1YG","../util/dom":"UsBV","../util/draw":"iUW2","../constant":"PzYn","./index":"YU0s","../group":"YmFC","@antv/g-base/lib/bbox/index":"MPoz"}],"Vy40":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=require("../constant"),u=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(u){function i(){var t=null!==u&&u.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return(0,t.__extends)(i,u),i.prototype.getDefaultAttrs=function(){var e=u.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{x:0,y:0,r:0})},i.prototype.createPath=function(t,u){var i=this.attr(),n=this.get("el");(0,e.each)(u||i,function(t,e){"x"===e||"y"===e?n.setAttribute("c"+e,t):r.SVG_ATTR_MAP[e]&&n.setAttribute(r.SVG_ATTR_MAP[e],t)})},i}(u.default),a=n;exports.default=a;
},{"tslib":"c4AP","@antv/util":"rU8N","../constant":"PzYn","./base":"kwWD"}],"YwRL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=require("../constant"),n=u(require("./base"));function u(t){return t&&t.__esModule?t:{default:t}}var i=function(n){function u(){var t=null!==n&&n.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return(0,t.__extends)(u,n),u.prototype.createPath=function(t,n){var u=this.attr(),i=this.get("el");(0,e.each)(n||u,function(t,e){r.SVG_ATTR_MAP[e]&&i.setAttribute(r.SVG_ATTR_MAP[e],t)}),i.innerHTML=u.html},u}(n.default),a=i;exports.default=a;
},{"tslib":"c4AP","@antv/util":"rU8N","../constant":"PzYn","./base":"kwWD"}],"nvU9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=require("../constant"),u=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(u){function i(){var t=null!==u&&u.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return(0,t.__extends)(i,u),i.prototype.getDefaultAttrs=function(){var e=u.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{x:0,y:0,rx:0,ry:0})},i.prototype.createPath=function(t,u){var i=this.attr(),n=this.get("el");(0,e.each)(u||i,function(t,e){"x"===e||"y"===e?n.setAttribute("c"+e,t):r.SVG_ATTR_MAP[e]&&n.setAttribute(r.SVG_ATTR_MAP[e],t)})},i}(u.default),a=n;exports.default=a;
},{"tslib":"c4AP","@antv/util":"rU8N","../constant":"PzYn","./base":"kwWD"}],"oycu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("../constant"),r=h(require("./base"));function h(t){return t&&t.__esModule?t:{default:t}}var s=function(r){function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return(0,t.__extends)(h,r),h.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{x:0,y:0,width:0,height:0})},h.prototype.createPath=function(t,r){var h=this,s=this.attr(),a=this.get("el");(0,e.each)(r||s,function(t,e){"img"===e?h._setImage(s.img):i.SVG_ATTR_MAP[e]&&a.setAttribute(i.SVG_ATTR_MAP[e],t)})},h.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},h.prototype._setImage=function(t){var i=this.attr(),r=this.get("el");if((0,e.isString)(t))r.setAttribute("href",t);else if(t instanceof window.Image)i.width||(r.setAttribute("width",t.width),this.attr("width",t.width)),i.height||(r.setAttribute("height",t.height),this.attr("height",t.height)),r.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,e.isString)(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())r.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var h=document.createElement("canvas");h.setAttribute("width",""+t.width),h.setAttribute("height",""+t.height),h.getContext("2d").putImageData(t,0,0),i.width||(r.setAttribute("width",""+t.width),this.attr("width",t.width)),i.height||(r.setAttribute("height",""+t.height),this.attr("height",t.height)),r.setAttribute("href",h.toDataURL())}},h}(r.default),a=s;exports.default=a;
},{"tslib":"c4AP","@antv/util":"rU8N","../constant":"PzYn","./base":"kwWD"}],"XJ4o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=i(require("@antv/g-math/lib/line")),r=require("@antv/util"),n=require("../constant"),a=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var u=function(a){function i(){var t=null!==a&&a.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return(0,t.__extends)(i,a),i.prototype.getDefaultAttrs=function(){var e=a.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},i.prototype.createPath=function(t,e){var a=this.attr(),i=this.get("el");(0,r.each)(e||a,function(e,u){if("startArrow"===u||"endArrow"===u)if(e){var o=(0,r.isObject)(e)?t.addArrow(a,n.SVG_ATTR_MAP[u]):t.getDefaultArrow(a,n.SVG_ATTR_MAP[u]);i.setAttribute(n.SVG_ATTR_MAP[u],"url(#"+o+")")}else i.removeAttribute(n.SVG_ATTR_MAP[u]);else n.SVG_ATTR_MAP[u]&&i.setAttribute(n.SVG_ATTR_MAP[u],e)})},i.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,i=t.y2;return e.default.length(r,n,a,i)},i.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,i=r.x2,u=r.y2;return e.default.pointAt(n,a,i,u,t)},i}(a.default),o=u;exports.default=o;
},{"tslib":"c4AP","@antv/g-math/lib/line":"qVKT","@antv/util":"rU8N","../constant":"PzYn","./base":"kwWD"}],"Esp7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},triangleDown:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},e={get:function(e){return t[e]},register:function(e,n){t[e]=n},remove:function(e){delete t[e]},getAll:function(){return t}};exports.default=e;
},{}],"KchT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=i(require("../base")),n=i(require("./symbols"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(r){function i(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return(0,t.__extends)(i,r),i.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},i.prototype._assembleMarker=function(){var t=this._getPath();return(0,e.isArray)(t)?t.map(function(t){return t.join(" ")}).join(""):t},i.prototype._getPath=function(){var t,r=this.attr(),i=r.x,s=r.y,u=r.r||r.radius,a=r.symbol||"circle";return(t=(0,e.isFunction)(a)?a:n.default.get(a))?t(i,s,u):(console.warn(t+" symbol is not exist."),null)},i.symbolsFactory=n.default,i}(r.default),u=s;exports.default=u;
},{"tslib":"c4AP","@antv/util":"rU8N","../base":"kwWD","./symbols":"Esp7"}],"phTP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=require("../constant"),n=o(require("./base"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(n){function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return(0,t.__extends)(o,n),o.prototype.getDefaultAttrs=function(){var e=n.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{startArrow:!1,endArrow:!1})},o.prototype.createPath=function(t,n){var o=this,a=this.attr(),i=this.get("el");(0,e.each)(n||a,function(n,u){if("path"===u&&(0,e.isArray)(n))i.setAttribute("d",o._formatPath(n));else if("startArrow"===u||"endArrow"===u)if(n){var s=(0,e.isObject)(n)?t.addArrow(a,r.SVG_ATTR_MAP[u]):t.getDefaultArrow(a,r.SVG_ATTR_MAP[u]);i.setAttribute(r.SVG_ATTR_MAP[u],"url(#"+s+")")}else i.removeAttribute(r.SVG_ATTR_MAP[u]);else r.SVG_ATTR_MAP[u]&&i.setAttribute(r.SVG_ATTR_MAP[u],n)})},o.prototype._formatPath=function(t){var e=t.map(function(t){return t.join(" ")}).join("");return~e.indexOf("NaN")?"":e},o.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},o.prototype.getPoint=function(t){var e=this.get("el"),r=this.getTotalLength(),n=e?e.getPointAtLength(t*r):null;return n?{x:n.x,y:n.y}:null},o}(n.default),i=a;exports.default=i;
},{"tslib":"c4AP","@antv/util":"rU8N","../constant":"PzYn","./base":"kwWD"}],"t9eD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=require("../constant"),n=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var u=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return(0,t.__extends)(i,n),i.prototype.createPath=function(t,n){var i=this.attr(),u=this.get("el");(0,e.each)(n||i,function(t,n){"points"===n&&(0,e.isArray)(t)&&t.length>=2?u.setAttribute("points",t.map(function(t){return t[0]+","+t[1]}).join(" ")):r.SVG_ATTR_MAP[n]&&u.setAttribute(r.SVG_ATTR_MAP[n],t)})},i}(n.default),o=u;exports.default=o;
},{"tslib":"c4AP","@antv/util":"rU8N","../constant":"PzYn","./base":"kwWD"}],"R5YK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=a(require("@antv/g-math/lib/line")),n=a(require("@antv/g-math/lib/polyline")),r=require("@antv/util"),i=require("../constant"),o=a(require("./base"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(o){function a(){var t=null!==o&&o.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return(0,t.__extends)(a,o),a.prototype.getDefaultAttrs=function(){var e=o.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{startArrow:!1,endArrow:!1})},a.prototype.onAttrChange=function(t,e,n){o.prototype.onAttrChange.call(this,t,e,n),-1!==["points"].indexOf(t)&&this._resetCache()},a.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},a.prototype.createPath=function(t,e){var n=this.attr(),o=this.get("el");(0,r.each)(e||n,function(t,e){"points"===e&&(0,r.isArray)(t)&&t.length>=2?o.setAttribute("points",t.map(function(t){return t[0]+","+t[1]}).join(" ")):i.SVG_ATTR_MAP[e]&&o.setAttribute(i.SVG_ATTR_MAP[e],t)})},a.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return(0,r.isNil)(e)?(this.set("totalLength",n.default.length(t)),this.get("totalLength")):e},a.prototype.getPoint=function(t){var n,i,o=this.attr().points,a=this.get("tCache");return a||(this._setTcache(),a=this.get("tCache")),(0,r.each)(a,function(e,r){t>=e[0]&&t<=e[1]&&(n=(t-e[0])/(e[1]-e[0]),i=r)}),e.default.pointAt(o[i][0],o[i][1],o[i+1][0],o[i+1][1],n)},a.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var n=this.getTotalLength();if(!(n<=0)){var i,o,a=0,s=[];(0,r.each)(t,function(r,u){t[u+1]&&((i=[])[0]=a/n,o=e.default.length(r[0],r[1],t[u+1][0],t[u+1][1]),a+=o,i[1]=a/n,s.push(i))}),this.set("tCache",s)}}},a.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},a.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},a}(o.default),u=s;exports.default=u;
},{"tslib":"c4AP","@antv/g-math/lib/line":"qVKT","@antv/g-math/lib/polyline":"xW8U","@antv/util":"rU8N","../constant":"PzYn","./base":"kwWD"}],"WmxX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseRadius=i,exports.parsePath=a;var r=require("@antv/util"),t=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,e=/[^\s\,]+/gi;function i(t){var e=0,i=0,a=0,n=0;return(0,r.isArray)(t)?1===t.length?e=i=a=n=t[0]:2===t.length?(e=a=t[0],i=n=t[1]):3===t.length?(e=t[0],i=n=t[1],a=t[2]):(e=t[0],i=t[1],a=t[2],n=t[3]):e=i=a=n=t,{r1:e,r2:i,r3:a,r4:n}}function a(i){return i=i||[],(0,r.isArray)(i)?i:(0,r.isString)(i)?(i=i.match(t),(0,r.each)(i,function(t,a){if((t=t.match(e))[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,r.each)(t,function(r,e){isNaN(r)||(t[e]=+r)}),i[a]=t}),i):void 0}
},{"@antv/util":"rU8N"}],"W2SM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=require("tslib"),t=require("@antv/util"),e=u(require("./base")),i=require("../constant"),a=require("../util/format");function u(r){return r&&r.__esModule?r:{default:r}}var n=function(e){function u(){var r=null!==e&&e.apply(this,arguments)||this;return r.type="rect",r.canFill=!0,r.canStroke=!0,r}return(0,r.__extends)(u,e),u.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return(0,r.__assign)((0,r.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},u.prototype.createPath=function(r,e){var a=this,u=this.attr(),n=this.get("el"),s=!1,l=["x","y","width","height","radius"];(0,t.each)(e||u,function(r,t){-1===l.indexOf(t)||s?-1===l.indexOf(t)&&i.SVG_ATTR_MAP[t]&&n.setAttribute(i.SVG_ATTR_MAP[t],r):(n.setAttribute("d",a._assembleRect(u)),s=!0)})},u.prototype._assembleRect=function(r){var e=r.x,i=r.y,u=r.width,n=r.height,s=r.radius;if(!s)return"M "+e+","+i+" l "+u+",0 l 0,"+n+" l"+-u+" 0 z";var l=(0,a.parseRadius)(s);return(0,t.isArray)(s)?1===s.length?l.r1=l.r2=l.r3=l.r4=s[0]:2===s.length?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):3===s.length?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s,[["M "+(e+l.r1)+","+i],["l "+(u-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(n-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-u)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-n)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]].join(" ")},u}(e.default),s=n;exports.default=s;
},{"tslib":"c4AP","@antv/util":"rU8N","./base":"kwWD","../constant":"PzYn","../util/format":"WmxX"}],"Ybjh":[function(require,module,exports) {
var process = require("process");
var e=require("process"),o=this&&this.__spreadArrays||function(){for(var e=0,o=0,r=arguments.length;o<r;o++)e+=arguments[o].length;var i=Array(e),n=0;for(o=0;o<r;o++)for(var s=arguments[o],t=0,a=s.length;t<a;t++,n++)i[n]=s[t];return i};Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){return function(e,o,r){this.name=e,this.version=o,this.os=r}}();exports.BrowserInfo=r;var i=function(){return function(o){this.version=o,this.name="node",this.os=e.platform}}();exports.NodeInfo=i;var n=function(){return function(){this.bot=!0,this.name="bot",this.version=null,this.os=null}}();exports.BotInfo=n;var s=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,t=/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/,a=3,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",s]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",t]];function w(e){return e?l(e):"undefined"!=typeof navigator?l(navigator.userAgent):h()}function l(e){var i=""!==e&&d.reduce(function(o,r){var i=r[0],n=r[1];if(o)return o;var s=n.exec(e);return!!s&&[i,s]},!1);if(!i)return null;var s=i[0],t=i[1];if("searchbot"===s)return new n;var u=t[1]&&t[1].split(/[._]/).slice(0,3);return u?u.length<a&&(u=o(u,f(a-u.length))):u=[],new r(s,u.join("."),c(e))}function c(e){for(var o=0,r=u.length;o<r;o++){var i=u[o],n=i[0];if(i[1].test(e))return n}return null}function h(){return void 0!==e&&e.version?new i(e.version.slice(1)):null}function f(e){for(var o=[],r=0;r<e;r++)o.push("0");return o}exports.detect=w,exports.parseUserAgent=l,exports.detectOS=c,exports.getNodeVersion=h;
},{"process":"FT5O"}],"lMvT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=require("detect-browser"),i=require("../util/svg"),a=require("../constant"),r=s(require("./base"));function s(t){return t&&t.__esModule?t:{default:t}}var o=.3,l={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},p={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},u={left:"left",start:"left",center:"middle",right:"end",end:"end"},d=function(r){function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return(0,t.__extends)(s,r),s.prototype.getDefaultAttrs=function(){var e=r.prototype.getDefaultAttrs.call(this);return(0,t.__assign)((0,t.__assign)({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},s.prototype.createPath=function(t,n){var r=this,s=this.attr(),o=this.get("el");this._setFont(),(0,e.each)(n||s,function(t,e){"text"===e?r._setText(""+t):"matrix"===e&&t?(0,i.setTransform)(r):a.SVG_ATTR_MAP[e]&&o.setAttribute(a.SVG_ATTR_MAP[e],t)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},s.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),i=e.textBaseline,a=e.textAlign,r=(0,n.detect)();r&&"firefox"===r.name?t.setAttribute("dominant-baseline",p[i]||"alphabetic"):t.setAttribute("alignment-baseline",l[i]||"baseline"),t.setAttribute("text-anchor",u[a]||"left")},s.prototype._setText=function(t){var n=this.get("el"),i=this.attr(),a=i.x,r=i.textBaseline,s=void 0===r?"bottom":r;if(t)if(~t.indexOf("\n")){var l=t.split("\n"),p=l.length-1,u="";(0,e.each)(l,function(t,e){0===e?"alphabetic"===s?u+='<tspan x="'+a+'" dy="'+-p+'em">'+t+"</tspan>":"top"===s?u+='<tspan x="'+a+'" dy="0.9em">'+t+"</tspan>":"middle"===s?u+='<tspan x="'+a+'" dy="'+-(p-1)/2+'em">'+t+"</tspan>":"bottom"===s?u+='<tspan x="'+a+'" dy="-'+(p+o)+'em">'+t+"</tspan>":"hanging"===s&&(u+='<tspan x="'+a+'" dy="'+(-(p-1)-o)+'em">'+t+"</tspan>"):u+='<tspan x="'+a+'" dy="1em">'+t+"</tspan>"}),n.innerHTML=u}else n.innerHTML=t;else n.innerHTML=""},s}(r.default),f=d;exports.default=f;
},{"tslib":"c4AP","@antv/util":"rU8N","detect-browser":"Ybjh","../util/svg":"h1YG","../constant":"PzYn","./base":"kwWD"}],"YU0s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Base",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Dom",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Ellipse",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Line",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Marker",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Path",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Polyline",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Rect",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return p.default}});var e=d(require("./base")),r=d(require("./circle")),t=d(require("./dom")),n=d(require("./ellipse")),u=d(require("./image")),o=d(require("./line")),i=d(require("./marker")),l=d(require("./path")),f=d(require("./polygon")),a=d(require("./polyline")),c=d(require("./rect")),p=d(require("./text"));function d(e){return e&&e.__esModule?e:{default:e}}
},{"./base":"kwWD","./circle":"Vy40","./dom":"YwRL","./ellipse":"nvU9","./image":"oycu","./line":"XJ4o","./marker":"KchT","./path":"phTP","./polygon":"t9eD","./polyline":"R5YK","./rect":"W2SM","./text":"lMvT"}],"HmiE":[function(require,module,exports) {
module.exports={__npminstall_done:!1,_args:[["@antv/g-svg@0.4.7","C:\\Users\\Lenovo\\Desktop\\programs\\side project\\ncku"]],_from:"@antv/g-svg@0.4.7",_id:"@antv/g-svg@0.4.7",_inBundle:!1,_integrity:"sha512-+lqlBK+qylP4t/vyUgEaPthp1XmTiImfkPl/ZmRp3L1knH64OI9XTfOGGuBUFAt3JBt7VHKf6t0L/MCf0BR88Q==",_location:"/@antv/g-svg",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"@antv/g-svg@0.4.7",name:"@antv/g-svg",escapedName:"@antv%2fg-svg",scope:"@antv",rawSpec:"0.4.7",saveSpec:null,fetchSpec:"0.4.7"},_requiredBy:["/@antv/g2"],_resolved:"https://registry.npmjs.org/@antv/g-svg/-/g-svg-0.4.7.tgz",_spec:"0.4.7",_where:"C:\\Users\\Lenovo\\Desktop\\programs\\side project\\ncku",author:{name:"https://github.com/orgs/antvis/people"},bugs:{url:"https://github.com/antvis/g/issues"},dependencies:{"@antv/g-base":"^0.4.7","@antv/g-math":"^0.1.3","@antv/util":"~2.0.0","detect-browser":"^4.6.0"},description:"A canvas library which providing 2d",devDependencies:{"@antv/torch":"^1.0.0",less:"^3.9.0","npm-run-all":"^4.1.5",webpack:"^4.39.3","webpack-cli":"^3.3.7"},files:["package.json","esm","lib","dist","LICENSE","README.md"],gitHead:"eb6a2503cb7bb8154697592b10680939d954a31a",homepage:"https://github.com/antvis/g#readme",keywords:["util","antv","g"],license:"ISC",main:"lib/index.js",module:"esm/index.js",name:"@antv/g-svg",publishConfig:{access:"public"},repository:{type:"git",url:"git+https://github.com/antvis/g.git"},scripts:{build:"npm run clean && run-p build:*","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:umd":"webpack --config webpack.config.js --mode production",clean:"rm -rf esm lib dist",coverage:"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage",test:"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive --opts tests/mocha.opts",tsc:"tsc --noEmit",typecheck:"tsc --noEmit"},types:"lib/index.d.ts",unpkg:"dist/g.min.js",version:"0.4.7"};
},{}],"dz3G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),e=require("../util/dom"),r=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,i=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function a(e){var r=e.match(s);if(!r)return"";var i="";return r.sort(function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])}),(0,t.each)(r,function(t){t=t.split(":"),i+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'}),i}function n(e,i){var s,n,u=r.exec(e),o=(0,t.mod)((0,t.toRadian)(parseFloat(u[1])),2*Math.PI),c=u[2];o>=0&&o<.5*Math.PI?(s={x:0,y:0},n={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(s={x:1,y:0},n={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(s={x:1,y:1},n={x:0,y:0}):(s={x:0,y:1},n={x:1,y:0});var l=Math.tan(o),x=l*l,d=(n.x-s.x+l*(n.y-s.y))/(x+1)+s.x,y=l*(n.x-s.x+l*(n.y-s.y))/(x+1)+s.y;i.setAttribute("x1",s.x),i.setAttribute("y1",s.y),i.setAttribute("x2",d),i.setAttribute("y2",y),i.innerHTML=a(c)}function u(t,e){var r=i.exec(t),s=parseFloat(r[1]),n=parseFloat(r[2]),u=parseFloat(r[3]),o=r[4];e.setAttribute("cx",s),e.setAttribute("cy",n),e.setAttribute("r",u),e.innerHTML=a(o)}var o=function(){function r(r){this.cfg={};var i=null,s=(0,t.uniqueId)("gradient_");return"l"===r.toLowerCase()[0]?n(r,i=(0,e.createSVGElement)("linearGradient")):u(r,i=(0,e.createSVGElement)("radialGradient")),i.setAttribute("id",s),this.el=i,this.id=s,this.cfg=r,this}return r.prototype.match=function(t,e){return this.cfg===e},r}(),c=o;exports.default=c;
},{"@antv/util":"rU8N","../util/dom":"UsBV"}],"I7mh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),e=require("../util/dom"),i={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},r={x:"-40%",y:"-40%",width:"200%",height:"200%"},o=function(){function o(i){this.type="filter",this.cfg={},this.type="filter";var o=(0,e.createSVGElement)("filter");return(0,t.each)(r,function(t,e){o.setAttribute(e,t)}),this.el=o,this.id=(0,t.uniqueId)("filter_"),this.el.id=this.id,this.cfg=i,this._parseShadow(i,o),this}return o.prototype.match=function(e,i){if(this.type!==e)return!1;var r=!0,o=this.cfg;return(0,t.each)(Object.keys(o),function(t){if(o[t]!==i[t])return r=!1,!1}),r},o.prototype.update=function(t,e){var r=this.cfg;return r[i[t]]=e,this._parseShadow(r,this.el),this},o.prototype._parseShadow=function(t,e){var i='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=i},o}(),s=o;exports.default=s;
},{"@antv/util":"rU8N","../util/dom":"UsBV"}],"PBI6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),e=require("../util/dom"),r=function(){function r(r,i){this.cfg={};var s=(0,e.createSVGElement)("marker"),a=(0,t.uniqueId)("marker_");s.setAttribute("id",a);var o=(0,e.createSVGElement)("path");o.setAttribute("stroke",r.stroke||"none"),o.setAttribute("fill",r.fill||"none"),s.appendChild(o),s.setAttribute("overflow","visible"),s.setAttribute("orient","auto-start-reverse"),this.el=s,this.child=o,this.id=a;var u=r["marker-start"===i?"startArrow":"endArrow"];return this.stroke=r.stroke||"#000",!0===u?this._setDefaultPath(i,o):(this.cfg=u,this._setMarker(r.lineWidth,o)),this}return r.prototype.match=function(){return!1},r.prototype._setDefaultPath=function(t,e){var r=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},r.prototype._setMarker=function(e,r){var i=this.el,s=this.cfg.path,a=this.cfg.d;(0,t.isArray)(s)&&(s=s.map(function(t){return t.join(" ")}).join("")),r.setAttribute("d",s),i.appendChild(r),a&&i.setAttribute("refX",""+a/e)},r.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},r}(),i=r;exports.default=i;
},{"@antv/util":"rU8N","../util/dom":"UsBV"}],"eD7u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@antv/util"),t=require("../util/dom"),i=function(){function i(i){this.type="clip",this.cfg={};var r=(0,t.createSVGElement)("clipPath");this.el=r,this.id=(0,e.uniqueId)("clip_"),r.id=this.id;var o=i.cfg.el;return r.appendChild(o),this.cfg=i,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),r=i;exports.default=r;
},{"@antv/util":"rU8N","../util/dom":"UsBV"}],"UJ2b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@antv/util"),e=require("../util/dom"),r=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,i=function(){function i(i){this.cfg={};var s=(0,e.createSVGElement)("pattern");s.setAttribute("patternUnits","userSpaceOnUse");var n=(0,e.createSVGElement)("image");s.appendChild(n);var a=(0,t.uniqueId)("pattern_");s.id=a,this.el=s,this.id=a,this.cfg=i;var u=r.exec(i)[2];n.setAttribute("href",u);var c=new Image;function o(){s.setAttribute("width",""+c.width),s.setAttribute("height",""+c.height)}return u.match(/^data:/i)||(c.crossOrigin="Anonymous"),c.src=u,c.complete?o():(c.onload=o,c.src=c.src),this}return i.prototype.match=function(t,e){return this.cfg===e},i}(),s=i;exports.default=s;
},{"@antv/util":"rU8N","../util/dom":"UsBV"}],"LXJe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@antv/util"),t=u(require("./gradient")),r=u(require("./shadow")),d=u(require("./arrow")),i=u(require("./clip")),n=u(require("./pattern")),a=require("../util/dom");function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function u(t){var r=(0,a.createSVGElement)("defs"),d=(0,e.uniqueId)("defs_");r.id=d,t.appendChild(r),this.children=[],this.defaultArrow={},this.el=r,this.canvas=t}return u.prototype.find=function(e,t){for(var r=this.children,d=null,i=0;i<r.length;i++)if(r[i].match(e,t)){d=r[i].id;break}return d},u.prototype.findById=function(e){for(var t=this.children,r=null,d=0;d<t.length;d++)if(t[d].id===e){r=t[d];break}return r},u.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},u.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var i=new d.default(e,t);return this.defaultArrow[r]=i,this.el.appendChild(i.el),this.add(i),i.id},u.prototype.addGradient=function(e){var r=new t.default(e);return this.el.appendChild(r.el),this.add(r),r.id},u.prototype.addArrow=function(e,t){var r=new d.default(e,t);return this.el.appendChild(r.el),this.add(r),r.id},u.prototype.addShadow=function(e){var t=new r.default(e);return this.el.appendChild(t.el),this.add(t),t.id},u.prototype.addPattern=function(e){var t=new n.default(e);return this.el.appendChild(t.el),this.add(t),t.id},u.prototype.addClip=function(e){var t=new i.default(e);return this.el.appendChild(t.el),this.add(t),t.id},u}(),o=l;exports.default=o;
},{"@antv/util":"rU8N","./gradient":"dz3G","./shadow":"I7mh","./arrow":"PBI6","./clip":"eD7u","./pattern":"UJ2b","../util/dom":"UsBV"}],"lJIo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/g-base"),r=require("./constant"),n=require("./util/draw"),i=require("./util/svg"),o=require("./util/dom"),u=l(require("./shape")),a=f(require("./group")),s=f(require("./defs"));function f(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}var p=function(t){function f(r){return t.call(this,(0,e.__assign)((0,e.__assign)({},r),{autoDraw:!0,renderer:"svg"}))||this}return(0,e.__extends)(f,t),f.prototype.getShapeBase=function(){return u},f.prototype.getGroupBase=function(){return a.default},f.prototype.getShape=function(e,t,n){var i=n.target||n.srcElement;if(!r.SHAPE_TO_TAGS[i.tagName]){for(var o=i.parentNode;o&&!r.SHAPE_TO_TAGS[o.tagName];)o=o.parentNode;i=o}return this.find(function(e){return e.get("el")===i})},f.prototype.createDom=function(){var e=(0,o.createSVGElement)("svg"),t=new s.default(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},f.prototype.onCanvasChange=function(e){var t=this.get("context"),r=this.get("el");if("sort"===e){var n=this.get("children");n&&n.length&&(0,o.sortDom)(this,function(e,t){return n.indexOf(e)-n.indexOf(t)?1:0})}else if("clear"===e){if(r){r.innerHTML="";var u=t.el;u.innerHTML="",r.appendChild(u)}}else"matrix"===e?(0,i.setTransform)(this):"clip"===e?(0,i.setClip)(this,t):"changeSize"===e&&(r.setAttribute("width",""+this.get("width")),r.setAttribute("height",""+this.get("height")))},f.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();(0,i.setClip)(this,e),t.length&&(0,n.drawChildren)(e,t)},f}(t.AbstractCanvas),c=p;exports.default=c;
},{"tslib":"c4AP","@antv/g-base":"pj64","./constant":"PzYn","./util/draw":"iUW2","./util/svg":"h1YG","./util/dom":"UsBV","./shape":"YU0s","./group":"YmFC","./defs":"LXJe"}],"UJQO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Event",{enumerable:!0,get:function(){return r.Event}}),Object.defineProperty(exports,"Canvas",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Group",{enumerable:!0,get:function(){return n.default}}),exports.Shape=exports.version=void 0;var e=a(require("./shape"));exports.Shape=e;var r=require("@antv/g-base"),t=o(require("./canvas")),n=o(require("./group"));function o(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}var i=require("../package.json"),p=i.version;exports.version=p;
},{"./shape":"YU0s","../package.json":"HmiE","@antv/g-base":"pj64","./canvas":"lJIo","./group":"YmFC"}],"pGmw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getPathPoints=n;var r=require("@antv/util");function t(r){return!r&&(null==r||isNaN(r))}function e(e){if((0,r.isArray)(e))return t(e[1].y);var n=e.y;return(0,r.isArray)(n)?t(n[0]):t(n)}function n(r,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!0),!r.length||1===r.length&&!n)return[];if(t){for(var u=[],i=0,s=r.length;i<s;i++){e(o=r[i])||u.push(o)}return[u]}var h=[],l=[];for(i=0,s=r.length;i<s;i++){var o;e(o=r[i])?l.length&&((1!==l.length||n)&&h.push(l),l=[]):l.push(o)}return l.length&&h.push(l),h}
},{"@antv/util":"rU8N"}],"rlL5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStyle=t;var e=require("tslib"),i=require("@antv/util");function t(t,r,s,l){void 0===l&&(l="");var o=t.style,u=void 0===o?{}:o,a=t.defaultStyle,n=t.color,v=t.size,_=(0,e.__assign)((0,e.__assign)({},a),u);return n&&(r&&(u.stroke||(_.stroke=n)),s&&(u.fill||(_.fill=n))),l&&(0,i.isNil)(u[l])&&!(0,i.isNil)(v)&&(_[l]=v),_}
},{"tslib":"oMtQ","@antv/util":"rU8N"}],"H5wk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitPoints=e;var r=require("@antv/util");function e(e){var t=e.x;return((0,r.isArray)(e.y)?e.y:[e.y]).map(function(e,i){return{x:(0,r.isArray)(t)?t[i]:t,y:e}})}
},{"@antv/util":"rU8N"}],"fZld":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLineMarker=r;var n={line:function(n,r,t){return[["M",n-t,r],["L",n+t,r]]},dot:function(n,r,t){return[["M",n-t,r],["L",n+t,r]]},dash:function(n,r,t){return[["M",n-t,r],["L",n+t,r]]},smooth:function(n,r,t){return[["M",n-t,r],["A",t/2,t/2,0,1,1,n,r],["A",t/2,t/2,0,1,0,n+t,r]]},hv:function(n,r,t){return[["M",n-t-1,r-2.5],["L",n,r-2.5],["L",n,r+2.5],["L",n+t+1,r+2.5]]},vh:function(n,r,t){return[["M",n-t-1,r+2.5],["L",n,r+2.5],["L",n,r-2.5],["L",n+t+1,r-2.5]]},hvh:function(n,r,t){return[["M",n-(t+1),r+2.5],["L",n-t/2,r+2.5],["L",n-t/2,r-2.5],["L",n+t/2,r-2.5],["L",n+t/2,r+2.5],["L",n+t+1,r+2.5]]},vhv:function(n,r){return[["M",n-5,r+2.5],["L",n-5,r],["L",n,r],["L",n,r-3],["L",n,r+3],["L",n+6.5,r+3]]}};function r(r,t){var e=r.color;return{symbol:n[t],style:{lineWidth:2,r:6,stroke:e}}}
},{}],"h7o7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@antv/util"),t=require("../base"),r=require("../util/get-path-points"),i=require("../util/get-style"),n=require("../util/path"),a=require("../util/split-points"),u=require("./util");function o(e,t,n){for(var a=e.isStack,u=e.connectNulls,o=e.isInCircle,l=e.showSinglePoint,s=(0,i.getStyle)(e,!0,!1,"lineWidth"),p=(0,r.getPathPoints)(e.points,u,l),c=[],d=0,v=p.length;d<v;d++){var f=p[d];c=c.concat(h(f,o,a,t,n,s))}return s.path=c,s}function l(e,t,r,i,a){return 1===e.length?[["M",e[0].x,e[0].y-a.lineWidth/2],["L",e[0].x,e[0].y],["L",e[0].x,e[0].y+a.lineWidth/2]]:(r?(t&&e.length&&e.push({x:e[0].x,y:e[0].y}),u=(0,n.getSplinePath)(e,!1,i)):(u=(0,n.getLinePath)(e,!1),t&&u.push(["Z"])),u);var u}function s(t,r,i,n,u,o){var s=[],h=[];(0,e.each)(t,function(e){var t=(0,a.splitPoints)(e);s.push(t[1]),h.push(t[0])});var p=l(s,r,n,u,o),c=l(h,r,n,u,o);return i?p:p.concat(c)}function h(t,r,i,n,a,u){if(t.length){var o=t[0];return(0,e.isArray)(o.y)?s(t,r,i,n,a,u):l(t,r,n,a,u)}return[]}var p=(0,t.registerShapeFactory)("line",{defaultShapeType:"line"});(0,e.each)(["line","dot","dash","smooth"],function(e){(0,t.registerShape)("line",e,{draw:function(t,r){var i,n="smooth"===e;if(n){var a=this.coordinate,u=a.start,l=a.end;i=[[u.x,l.y],[l.x,u.y]]}var s=o(t,n,i);return r.addShape({type:"path",attrs:s,name:"line"})},getMarker:function(t){return(0,u.getLineMarker)(t,e)}})});var c=p;exports.default=c;
},{"@antv/util":"rU8N","../base":"Ehbp","../util/get-path-points":"pGmw","../util/get-style":"rlL5","../util/path":"mQeB","../util/split-points":"H5wk","./util":"fZld"}],"ol19":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("../constant"),n=s(require("./base")),i=s(require("./element"));require("./shape/line");var a=require("./util/is-model-change");function s(e){return e&&e.__esModule?e:{default:e}}var o=function(n){function s(e){var t=n.call(this,e)||this;t.type="path",t.shapeType="line";var i=e.connectNulls,a=void 0!==i&&i,s=e.showSinglePoint,o=void 0===s||s;return t.connectNulls=a,t.showSinglePoint=o,t}return(0,e.__extends)(s,n),s.prototype.createElements=function(e,t,n){void 0===n&&(n=!1);var s=this.lastElementsMap,o=this.elementsMap,r=this.elements,l=this.container,u=this.getElementId(e),h=this.getShapeInfo(e),p=s[u];if(p){var c=p.getModel();(this.isCoordinateChanged||(0,a.isModelChange)(c,h))&&(p.animate=this.animateOption,p.update(h)),delete s[u]}else{var d=this.getShapeFactory();(p=new i.default({shapeFactory:d,container:l,offscreenGroup:this.getOffscreenGroup()})).geometry=this,p.animate=this.animateOption,p.draw(h,n)}return r.push(p),o[u]=p,r},s.prototype.getPointsAndData=function(e){for(var n=[],i=[],a=0,s=e.length;a<s;a++){var o=e[a];n.push({x:o.x,y:o.y}),i.push(o[t.FIELD_ORIGIN])}return{points:n,data:i}},s.prototype.getShapeInfo=function(e){var t=this.getDrawCfg(e[0]),n=this.getPointsAndData(e),i=n.points,a=n.data;return t.mappingData=e,t.data=a,t.isStack=!!this.getAdjust("stack"),t.points=i,t.connectNulls=this.connectNulls,t.showSinglePoint=this.showSinglePoint,t},s}(n.default),r=o;exports.default=r;
},{"tslib":"oMtQ","../constant":"JW8G","./base":"Saah","./element":"R7dj","./shape/line":"h7o7","./util/is-model-change":"xONh"}],"AAFg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShapeAttrs=a,exports.getConstraint=s;var t=require("@antv/util"),e=require("../util/get-path-points"),r=require("../util/get-style"),n=require("../util/path");function i(e,r,i,a,s){var u=[];if(e.length){for(var o=[],h=[],l=0,p=e.length;l<p;l++){var c=e[l];o.push(c[1]),h.push(c[0])}h=h.reverse(),(0,t.each)([o,h],function(t,e){var l=[],p=a.parsePoints(t),c=p[0];1===o.length&&1===h.length?l=0===e?[["M",c.x-.5,c.y],["L",c.x+.5,c.y]]:[["L",c.x+.5,c.y],["L",c.x-.5,c.y]]:(r&&p.push({x:c.x,y:c.y}),l=i?(0,n.getSplinePath)(p,!1,s):(0,n.getLinePath)(p,!1),e>0&&(l[0][0]="L")),u=u.concat(l)}),u.push(["Z"])}return u}function a(t,n,a,s,u){for(var o=(0,r.getStyle)(t,n,!n,"lineWidth"),h=t.connectNulls,l=t.isInCircle,p=t.points,c=t.showSinglePoint,g=(0,e.getPathPoints)(p,h,c),v=[],x=0,y=g.length;x<y;x++){var f=g[x];v=v.concat(i(f,l,a,s,u))}return o.path=v,o}function s(t){var e=t.start,r=t.end;return[[e.x,r.y],[r.x,e.y]]}
},{"@antv/util":"rU8N","../util/get-path-points":"pGmw","../util/get-style":"rlL5","../util/path":"mQeB"}],"PNwq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@antv/util"),r=require("../base"),t=require("./util"),a=(0,r.registerShapeFactory)("area",{defaultShapeType:"area",getDefaultPoints:function(r){var t=r.x,a=r.y0;return((0,e.isArray)(r.y)?r.y:[a,r.y]).map(function(e){return{x:t,y:e}})}});(0,r.registerShape)("area","area",{draw:function(e,r){var a=(0,t.getShapeAttrs)(e,!1,!1,this);return r.addShape({type:"path",attrs:a,name:"area"})},getMarker:function(e){return{symbol:function(e,r,t){return void 0===t&&(t=5.5),[["M",e-t,r-4],["L",e+t,r-4],["L",e+t,r+4],["L",e-t,r+4],["Z"]]},style:{r:5,fill:e.color}}}});var u=a;exports.default=u;
},{"@antv/util":"rU8N","../base":"Ehbp","./util":"AAFg"}],"ud6K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("../constant"),r=a(require("./path"));function a(t){return t&&t.__esModule?t:{default:t}}require("./shape/area");var n=function(r){function a(t){var e=r.call(this,t)||this;e.type="area",e.shapeType="area",e.generatePoints=!0,e.startOnZero=!0;var a=t.startOnZero,n=void 0===a||a,o=t.sortable,i=void 0===o||o,s=t.showSinglePoint,u=void 0!==s&&s;return e.startOnZero=n,e.sortable=i,e.showSinglePoint=u,e}return(0,t.__extends)(a,r),a.prototype.getPointsAndData=function(t){for(var r=[],a=[],n=0,o=t.length;n<o;n++){var i=t[n];r.push(i.points),a.push(i[e.FIELD_ORIGIN])}return{points:r,data:a}},a.prototype.getYMinValue=function(){return this.startOnZero?r.prototype.getYMinValue.call(this):this.getYScale().min},a}(r.default),o=n;exports.default=o;
},{"tslib":"oMtQ","../constant":"JW8G","./path":"ol19","./shape/area":"PNwq"}],"NdCt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("../base"),r=require("../util/get-style"),i=require("../util/path"),s=require("../util/split-points"),a=(0,t.registerShapeFactory)("edge",{defaultShapeType:"line",getDefaultPoints:function(e){return(0,s.splitPoints)(e)}});(0,t.registerShape)("edge","line",{draw:function(t,s){var a=(0,r.getStyle)(t,!0,!1,"lineWidth"),l=(0,i.getLinePath)(this.parsePoints(t.points),this.coordinate.isPolar);return s.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},a),{path:l})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});var l=a;exports.default=l;
},{"tslib":"oMtQ","../base":"Ehbp","../util/get-style":"rlL5","../util/path":"mQeB","../util/split-points":"H5wk"}],"OcJQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./base"));function r(e){return e&&e.__esModule?e:{default:e}}require("./shape/edge");var u=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return(0,e.__extends)(r,t),r}(t.default),s=u;exports.default=s;
},{"tslib":"oMtQ","./base":"Saah","./shape/edge":"NdCt"}],"l7Ps":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=n(require("@antv/color-util")),a=require("@antv/util"),r=require("../constant"),i=n(require("./base"));function n(t){return t&&t.__esModule?t:{default:t}}var o=function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return(0,t.__extends)(n,i),n.prototype.createElements=function(t,e,r){void 0===r&&(r=!1);var i=this.prepareRange(t),n=this.prepareSize(),o=(0,a.get)(this.styleOption,["style","shadowBlur"]);return(0,a.isNumber)(o)||(o=n/2),this.prepareGreyScaleBlurredCircle(n,o),this.drawWithRange(t,i,n,o),null},n.prototype.clear=function(){i.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},n.prototype.prepareRange=function(t){var e=this.getAttribute("color").getFields()[0],a=1/0,i=-1/0;return t.forEach(function(t){var n=t[r.FIELD_ORIGIN][e];n>i&&(i=n),n<a&&(a=n)}),a===i&&(a=i-1),[a,i]},n.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return(0,a.isNumber)(t)||(t=this.getDefaultSize()),t},n.prototype.prepareGreyScaleBlurredCircle=function(t,e){var a=this.getGrayScaleBlurredCanvas(),r=t+e,i=a.getContext("2d");a.width=a.height=2*r,i.clearRect(0,0,a.width,a.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=e,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,t,0,2*Math.PI,!0),i.closePath(),i.fill()},n.prototype.drawWithRange=function(t,e,a,i){var n=this.coordinate,o=n.start,s=n.end,h=this.coordinate.getWidth(),l=this.coordinate.getHeight(),c=this.getAttribute("color").getFields()[0];this.clearShadowCanvasCtx();var u=this.getShadowCanvasCtx();e&&(t=t.filter(function(t){return t[r.FIELD_ORIGIN][c]<=e[1]&&t[r.FIELD_ORIGIN][c]>=e[0]}));for(var g=this.scales[c],p=0,d=t;p<d.length;p++){var v=d[p],f=this.getDrawCfg(v),y=f.x,C=f.y,S=g.scale(v[r.FIELD_ORIGIN][c]);this.drawGrayScaleBlurredCircle(y-o.x,C-s.y,a+i,S,u)}var w=u.getImageData(0,0,h,l);this.clearShadowCanvasCtx(),this.colorize(w),u.putImageData(w,0,0);var I=this.getImageShape();I.attr("x",o.x),I.attr("y",s.y),I.attr("width",h),I.attr("height",l),I.attr("img",u.canvas),I.set("origin",this.getShapeInfo(t))},n.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),e=this.coordinate;return Math.min(e.getWidth()/(4*t.scales[0].ticks.length),e.getHeight()/(4*t.scales[1].ticks.length))},n.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},n.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},n.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},n.prototype.drawGrayScaleBlurredCircle=function(t,e,a,r,i){var n=this.getGrayScaleBlurredCanvas();i.globalAlpha=r,i.drawImage(n,t-a,e-a)},n.prototype.colorize=function(t){for(var r=this.getAttribute("color"),i=t.data,n=this.paletteCache,o=3;o<i.length;o+=4){var s=i[o];if((0,a.isNumber)(s)){var h=n[s]?n[s]:e.default.rgb2arr(r.gradient(s/256));i[o-3]=h[0],i[o-2]=h[1],i[o-1]=h[2],i[o]=s}}},n.prototype.getImageShape=function(){var t=this.imageShape;return t||(t=this.container.addShape({type:"image",attrs:{}}),this.imageShape=t,t)},n.prototype.getShapeInfo=function(e){var a=this.getDrawCfg(e[0]);return(0,t.__assign)((0,t.__assign)({},a),{mappingData:e,data:this.getData(e)})},n.prototype.getData=function(t){return t.map(function(t){return t[r.FIELD_ORIGIN]})},n}(i.default),s=o;exports.default=s;
},{"tslib":"oMtQ","@antv/color-util":"MpF9","@antv/util":"rU8N","../constant":"JW8G","./base":"Saah"}],"eNRM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getRectPoints=e,exports.getRectPath=t,exports.getFunnelPath=x;var r=require("@antv/util");function e(e,t){void 0===t&&(t=!1);var x,y,s,u,i=e.x,n=e.y,p=e.y0,o=e.size;(0,r.isArray)(n)?(x=n[0],y=n[1]):(x=p,y=n),(0,r.isArray)(i)?(s=i[0],u=i[1]):(s=i-o/2,u=i+o/2);var a=[{x:s,y:x},{x:s,y:y}];return t?a.push({x:u,y:(y+x)/2}):a.push({x:u,y:y},{x:u,y:x}),a}function t(r,e){void 0===e&&(e=!0);var t=[],x=r[0];t.push(["M",x.x,x.y]);for(var y=1,s=r.length;y<s;y++)t.push(["L",r[y].x,r[y].y]);return e&&(t.push(["L",x.x,x.y]),t.push(["z"])),t}function x(e,t,x){var y=[];return(0,r.isNil)(t)?x?y.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[2].x,e[2].y],["Z"]):y.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",e[2].x,e[2].y],["L",e[3].x,e[3].y],["Z"]):y.push(["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["L",t[1].x,t[1].y],["L",t[0].x,t[0].y],["Z"]),y}
},{"@antv/util":"rU8N"}],"Rx1g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("../base"),r=require("../util/get-style"),a=require("./util"),i=(0,t.registerShapeFactory)("interval",{defaultShapeType:"rect",getDefaultPoints:function(e){return(0,a.getRectPoints)(e)}});(0,t.registerShape)("interval","rect",{draw:function(t,i){var s=(0,r.getStyle)(t,!1,!0),l=this.parsePath((0,a.getRectPath)(t.points));return i.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},s),{path:l}),name:"interval"})},getMarker:function(e){var t=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var s=i;exports.default=s;
},{"tslib":"oMtQ","../base":"Ehbp","../util/get-style":"rlL5","./util":"eNRM"}],"Gcm1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefaultSize=n;var e=require("@antv/util"),t=require("../../util/coordinate");function r(t,r){var i=t.length,n=t;(0,e.isString)(n[0])&&(n=t.map(function(e){return r.translate(e)}));for(var a=n[1]-n[0],o=2;o<i;o++){var u=n[o]-n[o-1];a>u&&(a=u)}return a}function i(t,r){if(r){var i=(0,e.flatten)(t);return(0,e.valuesOfKey)(i,r).length}return t.length}function n(e){var n=e.theme,a=e.coordinate,o=e.getXScale(),u=o.values,l=e.beforeMappingData,s=u.length;if(o.isLinear&&u.length>1){u.sort();var d=r(u,o);s=(o.max-o.min)/d,u.length>s&&(s=u.length)}var g=o.range,v=1/s,f=1;(a.isPolar?f=a.isTransposed&&s>1?n.multiplePieWidthRatio:n.roseWidthRatio:(o.isLinear&&(v*=g[1]-g[0]),f=n.columnWidthRatio),v*=f,e.getAdjust("dodge"))&&(v/=i(l,e.getAdjust("dodge").dodgeBy));var h=n.maxColumnWidth,c=n.minColumnWidth,m=(0,t.getXDimensionLength)(e.coordinate);if(h){var p=h/m;v>p&&(v=p)}if(c){var W=c/m;v<W&&(v=W)}return v}
},{"@antv/util":"rU8N","../../util/coordinate":"sx3d"}],"pbuV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=require("../util/coordinate"),a=s(require("./base"));require("./shape/interval");var r=require("./util/shape-size");function s(e){return e&&e.__esModule?e:{default:e}}var n=function(a){function s(){var e=null!==a&&a.apply(this,arguments)||this;return e.type="interval",e.shapeType="interval",e.generatePoints=!0,e}return(0,e.__extends)(s,a),s.prototype.createShapePointsCfg=function(e){var t,s=a.prototype.createShapePointsCfg.call(this,e),n=this.getAttribute("size");if(n){t=this.getAttributeValues(n,e)[0];var u=this.coordinate;t/=(0,i.getXDimensionLength)(u)}else this.defaultSize||(this.defaultSize=(0,r.getDefaultSize)(this)),t=this.defaultSize;return s.size=t,s},s.prototype.adjustScale=function(){a.prototype.adjustScale.call(this);var e=this.getYScale();if("theta"===this.coordinate.type)e.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,e.values),e.max)});else{var i=this.scaleDefs,r=e.field,s=e.min,n=e.max;"time"!==e.type&&(s>0&&!(0,t.get)(i,[r,"min"])&&e.change({min:0}),n<=0&&!(0,t.get)(i,[r,"max"])&&e.change({max:0}))}},s}(a.default),u=n;exports.default=u;
},{"tslib":"oMtQ","@antv/util":"rU8N","../util/coordinate":"sx3d","./base":"Saah","./shape/interval":"Rx1g","./util/shape-size":"Gcm1"}],"dpLF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./path"));function r(e){return e&&e.__esModule?e:{default:e}}require("./shape/line");var u=function(t){function r(e){var r=t.call(this,e)||this;r.type="line";var u=e.sortable,i=void 0===u||u;return r.sortable=i,r}return(0,e.__extends)(r,t),r}(t.default),i=u;exports.default=i;
},{"tslib":"oMtQ","./path":"ol19","./shape/line":"h7o7"}],"wfMb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MarkerSymbols=void 0;var r={hexagon:function(r,n,t){var e=t/2*Math.sqrt(3);return[["M",r,n-t],["L",r+e,n-t/2],["L",r+e,n+t/2],["L",r,n+t],["L",r-e,n+t/2],["L",r-e,n-t/2],["Z"]]},bowtie:function(r,n,t){var e=t-1.5;return[["M",r-t,n-e],["L",r+t,n+e],["L",r+t,n-e],["L",r-t,n+e],["Z"]]},cross:function(r,n,t){return[["M",r-t,n-t],["L",r+t,n+t],["M",r+t,n-t],["L",r-t,n+t]]},tick:function(r,n,t){return[["M",r-t/2,n-t],["L",r+t/2,n-t],["M",r,n-t],["L",r,n+t],["M",r-t/2,n+t],["L",r+t/2,n+t]]},plus:function(r,n,t){return[["M",r-t,n],["L",r+t,n],["M",r,n-t],["L",r,n+t]]},hyphen:function(r,n,t){return[["M",r-t,n],["L",r+t,n]]},line:function(r,n,t){return[["M",r,n-t],["L",r,n+t]]}};exports.MarkerSymbols=r;
},{}],"xUw1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawPoints=i,exports.HOLLOW_SHAPES=exports.SHAPES=void 0;var e=require("tslib"),r=require("../../../util/marker"),s=require("../util/get-style"),t=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"];exports.SHAPES=t;var a=["cross","tick","plus","hyphen","line"];function i(t,a,i,o,n){var l=(0,s.getStyle)(a,n,!n,"r"),p=t.parsePoints(a.points),_=p[0];if(a.isStack)_=p[1];else if(p.length>1){for(var u=i.addGroup(),S=0,d=p;S<d.length;S++){var g=d[S];u.addShape({type:"marker",attrs:(0,e.__assign)((0,e.__assign)((0,e.__assign)({},l),{symbol:r.MarkerSymbols[o]||o}),g)})}return u}return i.addShape({type:"marker",attrs:(0,e.__assign)((0,e.__assign)((0,e.__assign)({},l),{symbol:r.MarkerSymbols[o]||o}),_)})}exports.HOLLOW_SHAPES=a;
},{"tslib":"oMtQ","../../../util/marker":"wfMb","../util/get-style":"rlL5"}],"nGOh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@antv/util"),r=require("../../../util/marker"),t=require("../base"),i=require("../util/split-points"),o=require("./util"),l=(0,t.registerShapeFactory)("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(e){return(0,i.splitPoints)(e)}});(0,e.each)(o.SHAPES,function(e){(0,t.registerShape)("point","hollow-"+e,{draw:function(r,t){return(0,o.drawPoints)(this,r,t,e,!0)},getMarker:function(t){var i=t.color;return{symbol:r.MarkerSymbols[e]||e,style:{r:4.5,stroke:i,fill:null}}}})});var u=l;exports.default=u;
},{"@antv/util":"rU8N","../../../util/marker":"wfMb","../base":"Ehbp","../util/split-points":"H5wk","./util":"xUw1"}],"cYeE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./base"));function r(e){return e&&e.__esModule?e:{default:e}}require("./shape/point");var s=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return(0,e.__extends)(r,t),r.prototype.getDrawCfg=function(r){var s=t.prototype.getDrawCfg.call(this,r);return(0,e.__assign)((0,e.__assign)({},s),{isStack:!!this.getAdjust("stack")})},r}(t.default),i=s;exports.default=i;
},{"tslib":"oMtQ","./base":"Saah","./shape/point":"nGOh"}],"HG3D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),r=require("../base"),a=require("../util/get-style");function s(e){for(var r=e[0],a=1,s=[["M",r.x,r.y]];a<e.length;){var u=e[a];u.x===e[a-1].x&&u.y===e[a-1].y||(s.push(["L",u.x,u.y]),u.x===r.x&&u.y===r.y&&a<e.length-1&&(r=e[a+1],s.push(["Z"]),s.push(["M",r.x,r.y]),a++)),a++}return(0,t.isEqual)((0,t.last)(s),r)||s.push(["L",r.x,r.y]),s.push(["Z"]),s}var u=(0,r.registerShapeFactory)("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(e){var r=[];return(0,t.each)(e.x,function(t,a){var s=e.y[a];r.push({x:t,y:s})}),r}});(0,r.registerShape)("polygon","polygon",{draw:function(r,u){if(!(0,t.isEmpty)(r.points)){var n=(0,a.getStyle)(r,!0,!0),o=this.parsePath(s(r.points));return u.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},n),{path:o}),name:"polygon"})}},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}});var n=u;exports.default=n;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"Ehbp","../util/get-style":"rlL5"}],"ntoJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),r=a(require("./base"));function a(e){return e&&e.__esModule?e:{default:e}}require("./shape/polygon");var i=function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return(0,e.__extends)(a,r),a.prototype.createShapePointsCfg=function(e){var a,i=r.prototype.createShapePointsCfg.call(this,e),s=i.x,o=i.y;if(!(0,t.isArray)(s)||!(0,t.isArray)(o)){var n=this.getXScale(),u=this.getYScale(),l=.5/n.values.length,p=.5/u.values.length;n.isCategory&&u.isCategory?(s=[s-l,s-l,s+l,s+l],o=[o-p,o+p,o+p,o-p]):(0,t.isArray)(s)?(s=[(a=s)[0],a[0],a[1],a[1]],o=[o-p/2,o+p/2,o+p/2,o-p/2]):(0,t.isArray)(o)&&(o=[(a=o)[0],a[1],a[1],a[0]],s=[s-l/2,s-l/2,s+l/2,s+l/2]),i.x=s,i.y=o}return i},a}(r.default),s=i;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","./base":"Saah","./shape/polygon":"HG3D"}],"SCGF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../base"),r=(0,e.registerShapeFactory)("schema",{defaultShapeType:""}),t=r;exports.default=t;
},{"../base":"Ehbp"}],"aApN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("../util/coordinate"),i=s(require("./base"));require("./shape/schema");var r=require("./util/shape-size");function s(e){return e&&e.__esModule?e:{default:e}}var a=function(i){function s(){var e=null!==i&&i.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return(0,e.__extends)(s,i),s.prototype.createShapePointsCfg=function(e){var s,a=i.prototype.createShapePointsCfg.call(this,e),u=this.getAttribute("size");if(u){s=this.getAttributeValues(u,e)[0];var n=this.coordinate;s/=(0,t.getXDimensionLength)(n)}else this.defaultSize||(this.defaultSize=(0,r.getDefaultSize)(this)),s=this.defaultSize;return a.size=s,a},s}(i.default),u=a;exports.default=u;
},{"tslib":"oMtQ","../util/coordinate":"sx3d","./base":"Saah","./shape/schema":"SCGF","./util/shape-size":"Gcm1"}],"HLyn":[function(require,module,exports) {
"use strict";var r=require("../base"),e=require("./util");(0,r.registerShape)("area","line",{draw:function(r,t){var a=(0,e.getShapeAttrs)(r,!0,!1,this);return t.addShape({type:"path",attrs:a,name:"area"})},getMarker:function(r){return{symbol:function(r,e,t){return void 0===t&&(t=5.5),[["M",r-t,e-4],["L",r+t,e-4],["L",r+t,e+4],["L",r-t,e+4],["Z"]]},style:{r:5,stroke:r.color,fill:null}}}});
},{"../base":"Ehbp","./util":"AAFg"}],"o14m":[function(require,module,exports) {
"use strict";var r=require("../base"),t=require("./util");(0,r.registerShape)("area","smooth",{draw:function(r,e){var a=this.coordinate,i=(0,t.getShapeAttrs)(r,!1,!0,this,(0,t.getConstraint)(a));return e.addShape({type:"path",attrs:i,name:"area"})},getMarker:function(r){return{symbol:function(r,t,e){return void 0===e&&(e=5.5),[["M",r-e,t-4],["L",r+e,t-4],["L",r+e,t+4],["L",r-e,t+4],["Z"]]},style:{r:5,fill:r.color}}}});
},{"../base":"Ehbp","./util":"AAFg"}],"OYpM":[function(require,module,exports) {
"use strict";var r=require("../base"),t=require("./util");(0,r.registerShape)("area","smooth-line",{draw:function(r,e){var a=this.coordinate,i=(0,t.getShapeAttrs)(r,!0,!0,this,(0,t.getConstraint)(a));return e.addShape({type:"path",attrs:i,name:"area"})},getMarker:function(r){return{symbol:function(r,t,e){return void 0===e&&(e=5.5),[["M",r-e,t-4],["L",r+e,t-4],["L",r+e,t+4],["L",r-e,t+4],["Z"]]},style:{r:5,stroke:r.color,fill:null}}}});
},{"../base":"Ehbp","./util":"AAFg"}],"BJW4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCPath=t,exports.getQPath=u;var e=require("@antv/util");function t(t,u){var r=[];r.push({x:t.x,y:1*t.y/2+1*u.y/2}),r.push({x:u.x,y:1*t.y/2+1*u.y/2}),r.push(u);var s=["C"];return(0,e.each)(r,function(e){s.push(e.x,e.y)}),s}function u(t,u){var r=[];r.push({x:u.x,y:u.y}),r.push(t);var s=["Q"];return(0,e.each)(r,function(e){s.push(e.x,e.y)}),s}
},{"@antv/util":"rU8N"}],"t74H":[function(require,module,exports) {
"use strict";var t=require("tslib"),r=require("../../../util/graphics"),a=require("../base"),e=require("../util/get-style"),s=require("./util");function i(t,r,a){var e=(0,s.getQPath)(r,a),i=[["M",t.x,t.y]];return i.push(e),i}function h(t,r){var a=(0,s.getQPath)(t[1],r),e=(0,s.getQPath)(t[3],r),i=[["M",t[0].x,t[0].y]];return i.push(e),i.push(["L",t[3].x,t[3].y]),i.push(["L",t[2].x,t[2].y]),i.push(a),i.push(["L",t[1].x,t[1].y]),i.push(["L",t[0].x,t[0].y]),i.push(["Z"]),i}(0,a.registerShape)("edge","arc",{draw:function(a,n){var u,p=(0,e.getStyle)(a,!0,!1,"lineWidth"),l=a.points,g=l.length>2?"weight":"normal";if(a.isInCircle){var y={x:0,y:1};return"normal"===g?u=i(l[0],l[1],y):(p.fill=p.stroke,u=h(l,y)),u=this.parsePath(u),n.addShape("path",{attrs:(0,t.__assign)((0,t.__assign)({},p),{path:u})})}if("normal"===g)return l=this.parsePoints(l),u=(0,r.getArcPath)((l[1].x+l[0].x)/2,l[0].y,Math.abs(l[1].x-l[0].x)/2,Math.PI,2*Math.PI),n.addShape("path",{attrs:(0,t.__assign)((0,t.__assign)({},p),{path:u})});var x=(0,s.getCPath)(l[1],l[3]),o=(0,s.getCPath)(l[2],l[0]);return u=[["M",l[0].x,l[0].y],["L",l[1].x,l[1].y],x,["L",l[3].x,l[3].y],["L",l[2].x,l[2].y],o,["Z"]],u=this.parsePath(u),p.fill=p.stroke,n.addShape("path",{attrs:(0,t.__assign)((0,t.__assign)({},p),{path:u})})},getMarker:function(t){return{symbol:"circle",style:{r:4.5,fill:t.color}}}});
},{"tslib":"oMtQ","../../../util/graphics":"L6ru","../base":"Ehbp","../util/get-style":"rlL5","./util":"BJW4"}],"igOR":[function(require,module,exports) {
"use strict";var e=require("tslib"),t=require("../base"),r=require("../util/get-style"),i=require("./util");function s(e,t){var r=(0,i.getCPath)(e,t),s=[["M",e.x,e.y]];return s.push(r),s}(0,t.registerShape)("edge","smooth",{draw:function(t,i){var a=(0,r.getStyle)(t,!0,!1,"lineWidth"),u=t.points,n=this.parsePath(s(u[0],u[1]));return i.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},a),{path:n})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});
},{"tslib":"oMtQ","../base":"Ehbp","../util/get-style":"rlL5","./util":"BJW4"}],"cRfn":[function(require,module,exports) {
"use strict";var e=require("tslib"),r=require("@antv/util"),t=require("../base"),i=require("../util/get-style"),s=1/3;function a(e,t){var i=[];i.push({x:e.x,y:e.y*(1-s)+t.y*s}),i.push({x:t.x,y:e.y*(1-s)+t.y*s}),i.push(t);var a=[["M",e.x,e.y]];return(0,r.each)(i,function(e){a.push(["L",e.x,e.y])}),a}(0,t.registerShape)("edge","vhv",{draw:function(r,t){var s=(0,i.getStyle)(r,!0,!1,"lineWidth"),u=r.points,n=this.parsePath(a(u[0],u[1]));return t.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},s),{path:n})})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"Ehbp","../util/get-style":"rlL5"}],"fC62":[function(require,module,exports) {
"use strict";var e=require("tslib"),t=require("../base"),r=require("../util/get-style"),i=require("./util");(0,t.registerShape)("interval","funnel",{getPoints:function(e){return e.size=2*e.size,(0,i.getRectPoints)(e)},draw:function(t,n){var s=(0,r.getStyle)(t,!1,!0),a=this.parsePath((0,i.getFunnelPath)(t.points,t.nextPoints,!1));return n.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},s),{path:a}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}});
},{"tslib":"oMtQ","../base":"Ehbp","../util/get-style":"rlL5","./util":"eNRM"}],"eAl6":[function(require,module,exports) {
"use strict";var e=require("tslib"),r=require("../base"),t=require("../util/get-style"),l=require("./util");(0,r.registerShape)("interval","hollow-rect",{draw:function(r,a){var s=(0,t.getStyle)(r,!0,!1),i=this.parsePath((0,l.getRectPath)(r.points));return a.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},s),{path:i}),name:"interval"})},getMarker:function(e){var r=e.color;return e.isInPolar?{symbol:"circle",style:{r:4.5,stroke:r,fill:null}}:{symbol:"square",style:{r:4,stroke:r,fill:null}}}});
},{"tslib":"oMtQ","../base":"Ehbp","../util/get-style":"rlL5","./util":"eNRM"}],"Lqyk":[function(require,module,exports) {
"use strict";var r=require("tslib"),t=require("@antv/util"),e=require("../base"),i=require("../util/get-style"),n=require("./util");function a(r){var e=r.x,i=r.y,n=r.y0;return(0,t.isArray)(i)?i.map(function(r,i){return{x:(0,t.isArray)(e)?e[i]:e,y:r}}):[{x:e,y:n},{x:e,y:i}]}(0,e.registerShape)("interval","line",{getPoints:function(r){return a(r)},draw:function(t,e){var a=(0,i.getStyle)(t,!0,!1,"lineWidth"),u=this.parsePath((0,n.getRectPath)(t.points,!1));return e.addShape("path",{attrs:(0,r.__assign)((0,r.__assign)({},a),{path:u}),name:"interval"})},getMarker:function(r){return{symbol:function(r,t,e){return[["M",r,t-e],["L",r,t+e]]},style:{r:5,stroke:r.color}}}});
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"Ehbp","../util/get-style":"rlL5","./util":"eNRM"}],"btY1":[function(require,module,exports) {
"use strict";var e=require("tslib"),t=require("../base"),r=require("../util/get-style"),i=require("./util");(0,t.registerShape)("interval","pyramid",{getPoints:function(e){return e.size=2*e.size,(0,i.getRectPoints)(e,!0)},draw:function(t,s){var a=(0,r.getStyle)(t,!1,!0),n=this.parsePath((0,i.getFunnelPath)(t.points,t.nextPoints,!0));return s.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},a),{path:n}),name:"interval"})},getMarker:function(e){return{symbol:"square",style:{r:4,fill:e.color}}}});
},{"tslib":"oMtQ","../base":"Ehbp","../util/get-style":"rlL5","./util":"eNRM"}],"r72P":[function(require,module,exports) {
"use strict";var r=require("tslib"),t=require("@antv/util"),e=require("../base"),n=require("../util/get-style");function i(r){var e,n,i=r.x,a=r.y,s=r.y0,u=r.size;(0,t.isArray)(a)?(e=a[0],n=a[1]):(e=s,n=a);var y=i+u/2,x=i-u/2;return[{x:i,y:e},{x:i,y:n},{x:x,y:e},{x:y,y:e},{x:x,y:n},{x:y,y:n}]}function a(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y]]}(0,e.registerShape)("interval","tick",{getPoints:function(r){return i(r)},draw:function(t,e){var i=(0,n.getStyle)(t,!0,!1),s=this.parsePath(a(t.points));return e.addShape("path",{attrs:(0,r.__assign)((0,r.__assign)({},i),{path:s}),name:"interval"})},getMarker:function(r){return{symbol:function(r,t,e){return[["M",r-e/2,t-e],["L",r+e/2,t-e],["M",r,t-e],["L",r,t+e],["M",r-e/2,t+e],["L",r+e/2,t+e]]},style:{r:5,stroke:r.color}}}});
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"Ehbp","../util/get-style":"rlL5"}],"EIaR":[function(require,module,exports) {
"use strict";var e=require("tslib"),t=require("@antv/util"),r=require("../base"),n=require("../util/get-path-points"),a=require("../util/get-style"),i=require("./util"),u=function(e,t,r){var n,a=e.x,i=e.y,u=t.x,c=t.y;switch(r){case"hv":n=[{x:u,y:i}];break;case"vh":n=[{x:a,y:c}];break;case"hvh":var h=(u+a)/2;n=[{x:h,y:i},{x:h,y:c}];break;case"vhv":var s=(i+c)/2;n=[{x:a,y:s},{x:u,y:s}]}return n};function c(e,r){var n=[];return(0,t.each)(e,function(t,a){var i=e[a+1];if(n.push(t),i){var c=u(t,i,r);n=n.concat(c)}}),n}function h(e){return e.map(function(e,t){return 0===t?["M",e.x,e.y]:["L",e.x,e.y]})}function s(r,i){var u=(0,n.getPathPoints)(r.points,r.connectNulls,r.showSinglePoint),s=[];return(0,t.each)(u,function(e){var t=c(e,i);s=s.concat(h(t))}),(0,e.__assign)((0,e.__assign)({},(0,a.getStyle)(r,!0,!1,"lineWidth")),{path:s})}(0,t.each)(["hv","vh","hvh","vhv"],function(e){(0,r.registerShape)("line",e,{draw:function(t,r){var n=s(t,e);return r.addShape({type:"path",attrs:n,name:"line"})},getMarker:function(t){return(0,i.getLineMarker)(t,e)}})});
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"Ehbp","../util/get-path-points":"pGmw","../util/get-style":"rlL5","./util":"fZld"}],"GDcg":[function(require,module,exports) {
"use strict";var r=require("@antv/util"),e=require("../../../util/marker"),t=require("../base"),i=require("./util");(0,r.each)(i.HOLLOW_SHAPES,function(r){(0,t.registerShape)("point",r,{draw:function(e,t){return(0,i.drawPoints)(this,e,t,r,!0)},getMarker:function(t){var i=t.color;return{symbol:e.MarkerSymbols[r],style:{r:4.5,stroke:i,fill:null}}}})});
},{"@antv/util":"rU8N","../../../util/marker":"wfMb","../base":"Ehbp","./util":"xUw1"}],"hDTS":[function(require,module,exports) {
"use strict";var e=require("../base"),r=require("../util/get-style");(0,e.registerShape)("point","image",{draw:function(e,t){var i=(0,r.getStyle)(e,!1,!1,"r").r,a=this.parsePoints(e.points),s=a[0];if(e.isStack)s=a[1];else if(a.length>1){for(var h=t.addGroup(),g=0,l=a;g<l.length;g++){var n=l[g];h.addShape("image",{attrs:{x:n.x-i/2,y:n.y-i,width:i,height:i,img:e.shape[1]}})}return h}return t.addShape("image",{attrs:{x:s.x-i/2,y:s.y-i,width:i,height:i,img:e.shape[1]}})},getMarker:function(e){return{symbol:"circle",style:{r:4.5,fill:e.color}}}});
},{"../base":"Ehbp","../util/get-style":"rlL5"}],"fYXk":[function(require,module,exports) {
"use strict";var r=require("@antv/util"),e=require("../../../util/marker"),t=require("../base"),i=require("./util");(0,r.each)(i.SHAPES,function(r){(0,t.registerShape)("point",r,{draw:function(e,t){return(0,i.drawPoints)(this,e,t,r,!1)},getMarker:function(t){var i=t.color;return{symbol:e.MarkerSymbols[r]||r,style:{r:4.5,fill:i}}}})});
},{"@antv/util":"rU8N","../../../util/marker":"wfMb","../base":"Ehbp","./util":"xUw1"}],"LSXY":[function(require,module,exports) {
"use strict";var e=require("tslib"),r=require("@antv/util"),n=require("../base"),t=require("../util/get-style");function i(e){var n=(0,r.isArray)(e)?e:[e],t=n[0],i=n[n.length-1],x=n.length>1?n[1]:t;return{min:t,max:i,min1:x,max1:n.length>3?n[3]:i,median:n.length>2?n[2]:x}}function x(e,n,t){var x,y=t/2;if((0,r.isArray)(n)){var a=i(n),s=a.min,u=a.max,m=a.median,L=a.min1,l=e-y,o=e+y;x=[[l,u],[o,u],[e,u],[e,h=a.max1],[l,L],[l,h],[o,h],[o,L],[e,L],[e,s],[l,s],[o,s],[l,m],[o,m]]}else{n=(0,r.isNil)(n)?.5:n;var h,M=i(e),c=(s=M.min,u=M.max,m=M.median,n-y),g=n+y;x=[[s,c],[s,g],[s,n],[L=M.min1,n],[L,c],[L,g],[h=M.max1,g],[h,c],[h,n],[u,n],[u,c],[u,g],[m,c],[m,g]]}return x.map(function(e){return{x:e[0],y:e[1]}})}function y(e){return[["M",e[0].x,e[0].y],["L",e[1].x,e[1].y],["M",e[2].x,e[2].y],["L",e[3].x,e[3].y],["M",e[4].x,e[4].y],["L",e[5].x,e[5].y],["L",e[6].x,e[6].y],["L",e[7].x,e[7].y],["L",e[4].x,e[4].y],["Z"],["M",e[8].x,e[8].y],["L",e[9].x,e[9].y],["M",e[10].x,e[10].y],["L",e[11].x,e[11].y],["M",e[12].x,e[12].y],["L",e[13].x,e[13].y]]}(0,n.registerShape)("schema","box",{getPoints:function(e){return x(e.x,e.y,e.size)},draw:function(r,n){var i=(0,t.getStyle)(r,!0,!1),x=this.parsePath(y(r.points));return n.addShape("path",{attrs:(0,e.__assign)((0,e.__assign)({},i),{path:x,name:"schema"})})},getMarker:function(e){return{symbol:function(e,r,n){var t=x(e,[r-6,r-3,r,r+3,r+6],n);return[["M",t[0].x+1,t[0].y],["L",t[1].x-1,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y],["L",t[6].x,t[6].y],["L",t[7].x,t[7].y],["L",t[4].x,t[4].y],["Z"],["M",t[8].x,t[8].y],["L",t[9].x,t[9].y],["M",t[10].x+1,t[10].y],["L",t[11].x-1,t[11].y],["M",t[12].x,t[12].y],["L",t[13].x,t[13].y]]},style:{r:6,lineWidth:1,stroke:e.color}}}});
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"Ehbp","../util/get-style":"rlL5"}],"d4Ci":[function(require,module,exports) {
"use strict";var r=require("tslib"),e=require("@antv/util"),t=require("../../../util/helper"),n=require("../base"),y=require("../util/get-style");function i(r){var n=((0,e.isArray)(r)?r:[r]).sort(function(r,e){return e-r});return(0,t.padEnd)(n,4,n[n.length-1])}function a(r,e,t){var n=i(e);return[{x:r,y:n[0]},{x:r,y:n[1]},{x:r-t/2,y:n[2]},{x:r-t/2,y:n[1]},{x:r+t/2,y:n[1]},{x:r+t/2,y:n[2]},{x:r,y:n[2]},{x:r,y:n[3]}]}function u(r){return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]}(0,n.registerShape)("schema","candle",{getPoints:function(r){return a(r.x,r.y,r.size)},draw:function(e,t){var n=(0,y.getStyle)(e,!0,!0),i=this.parsePath(u(e.points));return t.addShape("path",{attrs:(0,r.__assign)((0,r.__assign)({},n),{path:i,name:"schema"})})},getMarker:function(r){var e=r.color;return{symbol:function(r,e,t){var n=a(r,[e+7.5,e+3,e-3,e-7.5],t);return[["M",n[0].x,n[0].y],["L",n[1].x,n[1].y],["M",n[2].x,n[2].y],["L",n[3].x,n[3].y],["L",n[4].x,n[4].y],["L",n[5].x,n[5].y],["Z"],["M",n[6].x,n[6].y],["L",n[7].x,n[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}});
},{"tslib":"oMtQ","@antv/util":"rU8N","../../../util/helper":"RDFe","../base":"Ehbp","../util/get-style":"rlL5"}],"BF3S":[function(require,module,exports) {
"use strict";var t=require("tslib"),e=require("@antv/util"),r=require("../base"),i=require("../util/get-style");function a(t,r){var i=Math.abs(t[0].x-t[2].x),a=Math.abs(t[0].y-t[2].y),s=Math.min(i,a);return r&&(s=(0,e.clamp)(r,0,Math.min(i,a))),s/=2,{x:(t[0].x+t[2].x)/2-s,y:(t[0].y+t[2].y)/2-s,width:2*s,height:2*s}}(0,r.registerShape)("polygon","square",{draw:function(r,s){if(!(0,e.isEmpty)(r.points)){var n=(0,i.getStyle)(r,!0,!0),u=this.parsePoints(r.points);return s.addShape("rect",{attrs:(0,t.__assign)((0,t.__assign)({},n),a(u,r.size)),name:"polygon"})}},getMarker:function(t){return{symbol:"square",style:{r:4,fill:t.color}}}});
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"Ehbp","../util/get-style":"rlL5"}],"J6bY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=n(require("./base"));function n(e){return e&&e.__esModule?e:{default:e}}var r=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return(0,e.__extends)(n,i),n.prototype.setLabelPosition=function(e,i,n,r){var l=this.getCoordinate(),s=l.isTransposed,a=i.points,o=l.convert(a[0]),x=l.convert(a[2]),g=s?-1:1,u=(o.x-x.x)/2*g,c=(o.y-x.y)/2*g;switch(r){case"right":s||(e.x-=u,e.y+=c),e.textAlign=(0,t.get)(e,"textAlign","left");break;case"left":s?e.x-=2*u:(e.x+=u,e.y+=c),e.textAlign=(0,t.get)(e,"textAlign","right");break;case"bottom":s?(e.x-=u,e.y-=c):e.y+=2*c,e.textAlign=(0,t.get)(e,"textAlign","center"),e.textBaseline=(0,t.get)(e,"textBaseline","top");break;case"middle":s?e.x-=u:e.y+=c,e.textAlign=(0,t.get)(e,"textAlign","center");break;case"top":s&&(e.x-=u,e.y+=c),e.textAlign=(0,t.get)(e,"textAlign","center"),e.textBaseline=(0,t.get)(e,"textBaseline","bottom")}},n}(i.default),l=r;exports.default=l;
},{"tslib":"oMtQ","@antv/util":"rU8N","./base":"thYg"}],"glJG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=require("../../util/coordinate"),n=i(require("./base"));function i(t){return t&&t.__esModule?t:{default:t}}var o=Math.PI/2,a=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(i,n),i.prototype.getLabelAlign=function(t){var e,r=this.getCoordinate();if(t.labelEmit)e=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(r.isTransposed){var n=r.getCenter(),i=this.getDefaultOffset(t.offset);e=Math.abs(t.x-n.x)<1?"center":t.angle>Math.PI||t.angle<=0?i>0?"left":"right":i>0?"right":"left"}else e="center";return e},i.prototype.getLabelPoint=function(t,e,r){var n,i=1,o=t.content[r];this.isToMiddle(e)?n=this.getMiddlePoint(e.points):(1===t.content.length&&0===r?r=1:0===r&&(i=-1),n=this.getArcPoint(e,r));var a=this.getDefaultOffset(t.offset)*i,s=this.getPointAngle(n),l=t.labelEmit,u=this.getCirclePoint(s,a,n,l);return 0===u.r?u.content="":(u.content=o,u.angle=s,u.color=e.color),u.rotate=t.autoRotate?this.getLabelRotate(s,a,l):t.rotate,u.start={x:n.x,y:n.y},u},i.prototype.getArcPoint=function(t,r){return void 0===r&&(r=0),(0,e.isArray)(t.x)||(0,e.isArray)(t.y)?{x:(0,e.isArray)(t.x)?t.x[r]:t.x,y:(0,e.isArray)(t.y)?t.y[r]:t.y}:{x:t.x,y:t.y}},i.prototype.getPointAngle=function(t){return(0,r.getAngleByPoint)(this.getCoordinate(),t)},i.prototype.getCirclePoint=function(e,n,i,o){var a=this.getCoordinate(),s=a.getCenter(),l=(0,r.getDistanceToCenter)(a,i);if(0===l)return(0,t.__assign)((0,t.__assign)({},s),{r:l});var u=e;a.isTransposed&&l>n&&!o?u=e+2*Math.asin(n/(2*l)):l+=n;return{x:s.x+l*Math.cos(u),y:s.y+l*Math.sin(u),r:l}},i.prototype.getLabelRotate=function(t,e,r){var n=t+o;return r&&(n-=o),n&&(n>o?n-=Math.PI:n<-o&&(n+=Math.PI)),n},i.prototype.getMiddlePoint=function(t){var r=this.getCoordinate(),n=t.length,i={x:0,y:0};return(0,e.each)(t,function(t){i.x+=t.x,i.y+=t.y}),i.x/=n,i.y/=n,i=r.convert(i)},i.prototype.isToMiddle=function(t){return t.x.length>2},i}(n.default),s=a;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../util/coordinate":"sx3d","./base":"thYg"}],"s3CH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=require("../../util/coordinate"),i=require("../../util/graphics"),n=o(require("./polar"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(n){function o(t){var e=n.call(this,t)||this;return e.defaultLayout="distribute",e}return(0,t.__extends)(o,n),o.prototype.getDefaultLabelCfg=function(){return(0,e.get)(this.geometry.theme,"pieLabels",{})},o.prototype.getDefaultOffset=function(t){return t||0},o.prototype.getLabelRotate=function(t,e,r){var i;return e<0&&((i=t)>Math.PI/2&&(i-=Math.PI),i<-Math.PI/2&&(i+=Math.PI)),i},o.prototype.getLabelAlign=function(t){var e,r=this.getCoordinate().getCenter();return e=t.angle<=Math.PI/2&&t.x>=r.x?"left":"right",this.getDefaultOffset(t.offset)<=0&&(e="right"===e?"left":"right"),e},o.prototype.getArcPoint=function(t){return t},o.prototype.getPointAngle=function(t){var i,n=this.getCoordinate(),o={x:(0,e.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},a={x:(0,e.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},u=(0,r.getAngleByPoint)(n,o);if(t.points&&t.points[0].y===t.points[1].y)i=u;else{var s=(0,r.getAngleByPoint)(n,a);u>=s&&(s+=2*Math.PI),i=u+(s-u)/2}return i},o.prototype.getCirclePoint=function(e,r,n){var o=this.getCoordinate(),a=o.getCenter(),u=o.getRadius()+r;return(0,t.__assign)((0,t.__assign)({},(0,i.polarToCartesian)(a.x,a.y,u,e)),{angle:e,r:u})},o}(n.default),u=a;exports.default=u;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../util/coordinate":"sx3d","../../util/graphics":"L6ru","./polar":"glJG"}],"UqdJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.distribute=n;var t=require("@antv/util"),e=require("../../../../util/graphics"),r=4;function a(e,r,a,n,i,s){var o,f=!0,c=n.start,u=n.end,y=Math.min(c.y,u.y),h=Math.abs(c.y-u.y),l=0,p=Number.MIN_VALUE,g=r.map(function(t){return t.y>l&&(l=t.y),t.y<p&&(p=t.y),{size:a,targets:[t.y-y]}});for(p-=y,l-y>h&&(h=l-y);f;)for(g.forEach(function(t){var e=(Math.min.apply(p,t.targets)+Math.max.apply(p,t.targets))/2;t.pos=Math.min(Math.max(p,e-t.size/2),h-t.size)}),f=!1,o=g.length;o--;)if(o>0){var x=g[o-1],v=g[o];x.pos+x.size>v.pos&&(x.size+=v.size,x.targets=x.targets.concat(v.targets),x.pos+x.size>h&&(x.pos=h-x.size),g.splice(o,1),f=!0)}o=0,g.forEach(function(t){var e=y+a/2;t.targets.forEach(function(){r[o].y=t.pos+e,e+=a,o++})});for(var M={},d=0,b=e;d<b.length;d++){var z=b[d];M[z.get("id")]=z}r.forEach(function(e){var r=e.r*e.r,a=Math.pow(Math.abs(e.y-i.y),2);if(r<a)e.x=i.x;else{var n=Math.sqrt(r-a);e.x=s?i.x+n:i.x-n}var o=M[e.id];o.attr("x",e.x),o.attr("y",e.y);var f=(0,t.find)(o.getChildren(),function(t){return"text"===t.get("type")});f&&(f.attr("y",e.y),f.attr("x",e.x))})}function n(n,i,s,o){var f=n[0]?n[0].offset:0,c=i[0].get("coordinate"),u=c.getRadius(),y=c.getCenter();if(f>0){var h=2*(u+f)+28,l={start:c.start,end:c.end},p=[[],[]];n.forEach(function(t){t&&("right"===t.textAlign?p[0].push(t):p[1].push(t))}),p.forEach(function(t,e){var r=h/14;t.length>r&&(t.sort(function(t,e){return e["..percent"]-t["..percent"]}),t.splice(r,t.length-r)),t.sort(function(t,e){return t.y-e.y}),a(i,t,14,l,y,e)})}(0,t.each)(n,function(a){if(a&&a.labelLine){var n=a.offset,i=a.angle,s=(0,e.polarToCartesian)(y.x,y.y,u,i),o=(0,e.polarToCartesian)(y.x,y.y,u+n/2,i),f=a.x+(0,t.get)(a,"offsetX",0),c=a.y+(0,t.get)(a,"offsetY",0),h={x:f-Math.cos(i)*r,y:c-Math.sin(i)*r};(0,t.isObject)(a.labelLine)||(a.labelLine={}),a.labelLine.path=["M "+s.x,s.y+" Q"+o.x,o.y+" "+h.x,h.y].join(",")}})}
},{"@antv/util":"rU8N","../../../../util/graphics":"L6ru"}],"h3N3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pieOuterLabelLayout=n;var t=require("@antv/util"),a=require("../../../../util/graphics"),e=4;function r(t,a,e,r,n,i,o){a.sort(function(t,a){return t.y-a.y});var s,h=r.start,y=r.end,p=Math.min(h.y,y.y),x=Math.max(h.y,y.y),f=a.map(function(t){return{content:t.content,size:e,pos:t.y,targets:[t.y]}}),u=Math.max.apply(Math,f.map(function(t){return t.pos})),c=Math.min.apply(Math,f.map(function(t){return t.pos}));if(o){for(var l=Math.min(c,x-(f.length-1)*e),M=Math.max(l+f.length*e,u+e),g=!0;g;)for(g=!1,s=f.length;s--;)if(s>0){var v=f[s-1],m=f[s];v.pos+v.size>m.pos&&(m.pos+s*e<M?(v.size+=m.size,v.targets=v.targets.concat(m.targets),f.splice(s,1)):v.pos=m.pos-v.size,g=!0)}}else for(M=Math.max(p+(f.length-1)*e,u),l=Math.min(c,M-(f.length-1)*e),g=!0;g;)for(g=!1,s=f.length;s--;)if(s>0){v=f[s-1],m=f[s];v.pos+v.size>m.pos&&(v.pos-l>s*e?v.pos-=v.size:(v.size+=m.size,v.targets=v.targets.concat(m.targets),f.splice(s,1)),g=!0)}s=0,f.forEach(function(t){var r=t.pos;t.targets.forEach(function(){a[s].y=r,r+=e,s++})});for(var d={},b=0,I=t;b<I.length;b++){var L=I[b];d[L.get("id")]=L}var P=(Math.max.apply(Math,a.map(function(t){return t.y}))-Math.min.apply(Math,a.map(function(t){return t.y})))/2;P=Math.max(P,i),a.forEach(function(t){var a=d[t.id],e=a.find(function(t){return"text"===t.get("type")});if(e&&e.attr("y")!==t.y){var r=P*P,i=Math.pow(Math.abs(t.y-n.y),2);if(r<i)t.x=n.x;else{var s=Math.sqrt(r-i);t.x=o?n.x+s:n.x-s}}a.attr("x",t.x),a.attr("y",t.y),e&&(e.attr("y",t.y),e.attr("x",t.x))})}function n(n,i,o,s){var h=n[0]?n[0].offset:0,y=i[0].get("coordinate"),p=y.getRadius(),x=y.getCenter();if(h>0){var f=(0,t.get)(n[0],"labelHeight",14),u=p+h,c=2*u+2*f,l={start:y.start,end:y.end},M=[[],[]];n.forEach(function(t){t&&(t.x<x.x?M[0].push(t):M[1].push(t))}),M.forEach(function(t,a){var e=c/f;t.length>e&&(t.sort(function(t,a){return a["data.percent"]-t["data.percent"]}),t.splice(e,t.length-e+1).forEach(function(t){var a=i.findIndex(function(a){return a.get("id")===t.id});i[a]&&(i[a].remove(!0),i.splice(a,1))}));r(i,t,f,l,x,u,1===a)})}(0,t.each)(n,function(r){if(r&&r.labelLine){var n=r.angle,i=(0,a.polarToCartesian)(x.x,x.y,p,n),o=r.x+(0,t.get)(r,"offsetX",0)*(Math.cos(n)>0?1:-1),s=r.y+(0,t.get)(r,"offsetY",0)*(Math.sin(n)>0?1:-1),y={x:o-Math.cos(n)*e,y:s-Math.sin(n)*e},f=r.labelLine.smooth,u=[],c=y.x-x.x,l=y.y-x.y,M=Math.atan(l/c);if(c<0&&(M+=Math.PI),!1===f){(0,t.isObject)(r.labelLine)||(r.labelLine={});var g=0;(n<0&&n>-Math.PI/2||n>1.5*Math.PI)&&y.y>i.y&&(g=1),n>=0&&n<Math.PI/2&&y.y>i.y&&(g=1),n>=Math.PI/2&&n<Math.PI&&i.y>y.y&&(g=1),(n<-Math.PI/2||n>=Math.PI&&n<1.5*Math.PI)&&i.y>y.y&&(g=1);var v=h/2>4?4:Math.max(h/2-1,0),m=(0,a.polarToCartesian)(x.x,x.y,p+v,n),d=(0,a.polarToCartesian)(x.x,x.y,p+h/2,M);u.push("M "+i.x+" "+i.y),u.push("L "+m.x+" "+m.y),u.push("A "+x.x+" "+x.y+" 0 0 "+g+" "+d.x+" "+d.y),u.push("L "+y.x+" "+y.y)}else{m=(0,a.polarToCartesian)(x.x,x.y,p+(h/2>4?4:Math.max(h/2-1,0)),n);var b=i.x<x.x?1:-1;u.push("M "+y.x+" "+y.y);var I=(i.y-x.y)/(i.x-x.x),L=(y.y-x.y)/(y.x-x.x);Math.abs(I-L)>Math.pow(Math.E,-16)&&u.push.apply(u,["C",y.x+4*b,y.y,2*m.x-i.x,2*m.y-i.y,i.x,i.y]),u.push("L "+i.x+" "+i.y)}r.labelLine.path=u.join(" ")}})}
},{"@antv/util":"rU8N","../../../../util/graphics":"L6ru"}],"c995":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.limitInCanvas=a;var e=require("@antv/util"),t=require("../../../util/transform");function a(a,i,n,r){(0,e.each)(i,function(e){var a=r.minX,i=r.minY,n=r.maxX,m=r.maxY,s=e.getCanvasBBox(),u=s.minX,o=s.minY,x=s.maxX,l=s.maxY,v=s.x,c=s.y,f=s.width,h=s.height,X=v,Y=c;(u<a||x<a)&&(X=a),(o<i||l<i)&&(Y=i),u>n?X=n-f:x>n&&(X-=x-n),o>m?Y=m-h:l>m&&(Y-=l-m),X===v&&Y===c||(0,t.translate)(e,X-v,Y-c)})}
},{"@antv/util":"rU8N","../../../util/transform":"X5lU"}],"R6vZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.limitInShape=t;var e=require("@antv/util");function t(t,a,i,n){(0,e.each)(a,function(e,t){var a=e.getCanvasBBox(),n=i[t].getBBox();(a.minX<n.minX||a.minY<n.minY||a.maxX>n.maxX||a.maxY>n.maxY)&&e.remove(!0)})}
},{"@antv/util":"rU8N"}],"EOpC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fixedOverlap=n,exports.overlap=o;var t=require("@antv/util"),a=100,e=function(){function t(t){void 0===t&&(t={}),this.bitmap={};var a=t.xGap,e=void 0===a?1:a,r=t.yGap,i=void 0===r?8:r;this.xGap=e,this.yGap=i}return t.prototype.hasGap=function(t){for(var a=!0,e=this.bitmap,r=Math.round(t.minX),i=Math.round(t.maxX),n=Math.round(t.minY),o=Math.round(t.maxY),h=r;h<=i;h+=1)if(e[h]){if(h===r||h===i){for(var s=n;s<=o;s++)if(e[h][s]){a=!1;break}}else if(e[h][n]||e[h][o]){a=!1;break}}else e[h]={};return a},t.prototype.fillGap=function(t){for(var a=this.bitmap,e=Math.round(t.minX),r=Math.round(t.maxX),i=Math.round(t.minY),n=Math.round(t.maxY),o=e;o<=r;o+=1)a[o]||(a[o]={});for(o=e;o<=r;o+=this.xGap){for(var h=i;h<=n;h+=this.yGap)a[o][h]=!0;a[o][n]=!0}if(1!==this.yGap)for(o=i;o<=n;o+=1)a[e][o]=!0,a[r][o]=!0;if(1!==this.xGap)for(o=e;o<=r;o+=1)a[o][i]=!0,a[o][n]=!0},t.prototype.destroy=function(){this.bitmap={}},t}();function r(t,e,r){void 0===r&&(r=a);var i,n=t.attr(),o=n.x,h=n.y,s=t.getCanvasBBox(),f=Math.sqrt(s.width*s.width+s.height*s.height),x=1,p=0,u=0;if(e.hasGap(s))return e.fillGap(s),!0;for(var v,c,l=!1,d=0,y={};Math.min(Math.abs(p),Math.abs(u))<f&&d<r;)if(v=x+=-1,c=void 0,u=~~(i=[(c=.1*v)*Math.cos(c),c*Math.sin(c)])[1],((p=~~i[0])||u)&&!y[p+"-"+u]&&(t.attr({x:o+p,y:h+u}),p+u<0&&t.attr("textAlign","right"),d++,e.hasGap(t.getCanvasBBox()))){e.fillGap(t.getCanvasBBox()),l=!0,y[p+"-"+u]=!0;break}return l}function i(t,a,e,r){var i=t.getCanvasBBox(),n=i.width,o=i.height,h={x:a,y:e,textAlign:"center"};switch(r){case 0:h.y-=o+1,h.x+=1,h.textAlign="left";break;case 1:h.y-=o+1,h.x-=1,h.textAlign="right";break;case 2:h.y+=o+1,h.x-=1,h.textAlign="right";break;case 3:h.y+=o+1,h.x+=1,h.textAlign="left";break;case 5:h.y-=2*o+2;break;case 6:h.y+=2*o+2;break;case 7:h.x+=n+1,h.textAlign="left";break;case 8:h.x-=n+1,h.textAlign="right"}return t.attr(h),t.getCanvasBBox()}function n(a,i,n,o){var h=new e;(0,t.each)(i,function(t){r(t.find(function(t){return"text"===t.get("type")}),h)||t.remove(!0)}),h.destroy()}function o(a,r,n,o){var h=new e;(0,t.each)(r,function(t){for(var a=t.find(function(t){return"text"===t.get("type")}),e=a.attr(),r=e.x,n=e.y,o=!1,s=0;s<=8;s++){var f=i(a,r,n,s);if(h.hasGap(f)){h.fillGap(f),o=!0;break}}o||t.remove(!0)}),h.destroy()}
},{"@antv/util":"rU8N"}],"P40s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fadeIn=i,exports.fadeOut=a;var t=require("@antv/util");function i(i,a,e){var r={fillOpacity:(0,t.isNil)(i.attr("fillOpacity"))?1:i.attr("fillOpacity"),strokeOpacity:(0,t.isNil)(i.attr("strokeOpacity"))?1:i.attr("strokeOpacity"),opacity:(0,t.isNil)(i.attr("opacity"))?1:i.attr("opacity")};i.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),i.animate(r,a)}function a(t,i,a){var e=i.easing,r=i.duration,c=i.delay;t.animate({fillOpacity:0,strokeOpacity:0,opacity:0},r,e,function(){t.remove(!0)},c)}
},{"@antv/util":"rU8N"}],"vDZU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformShape=r,exports.doScaleAnimate=e;var t=require("@antv/matrix-util");function r(r,e,a){var x,s=e[0],i=e[1];return r.applyToMatrix([s,i,1]),"x"===a?(r.setMatrix(t.ext.transform(r.getMatrix(),[["t",-s,-i],["s",.01,1],["t",s,i]])),x=t.ext.transform(r.getMatrix(),[["t",-s,-i],["s",100,1],["t",s,i]])):"y"===a?(r.setMatrix(t.ext.transform(r.getMatrix(),[["t",-s,-i],["s",1,.01],["t",s,i]])),x=t.ext.transform(r.getMatrix(),[["t",-s,-i],["s",1,100],["t",s,i]])):"xy"===a&&(r.setMatrix(t.ext.transform(r.getMatrix(),[["t",-s,-i],["s",.01,.01],["t",s,i]])),x=t.ext.transform(r.getMatrix(),[["t",-s,-i],["s",100,100],["t",s,i]])),x}function e(t,e,a,x,s){var i,n,o=a.start,y=a.end,g=a.getWidth(),m=a.getHeight();"y"===s?(i=o.x+g/2,n=x.y<o.y?x.y:o.y):"x"===s?(i=x.x>o.x?x.x:o.x,n=o.y+m/2):"xy"===s&&(a.isPolar?(i=a.getCenter().x,n=a.getCenter().y):(i=(o.x+y.x)/2,n=(o.y+y.y)/2));var M=r(t,[i,n],s);t.animate({matrix:M},e)}
},{"@antv/matrix-util":"n7Fk"}],"hEmW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.growInX=e,exports.growInY=n,exports.growInXY=t;var o=require("./util");function e(e,n,t){var i=t.coordinate,r=t.minYPoint;(0,o.doScaleAnimate)(e,n,i,r,"x")}function n(e,n,t){var i=t.coordinate,r=t.minYPoint;(0,o.doScaleAnimate)(e,n,i,r,"y")}function t(e,n,t){var i=t.coordinate,r=t.minYPoint;(0,o.doScaleAnimate)(e,n,i,r,"xy")}
},{"./util":"vDZU"}],"z3Og":[function(require,module,exports) {
"use strict";function e(e,t,n){var a=e.getTotalLength();e.attr("lineDash",[a]),e.animate(function(e){return{lineDashOffset:(1-e)*a}},t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.pathIn=e;
},{}],"tlE4":[function(require,module,exports) {
"use strict";function e(e,t,o){var r=o.toAttrs,s=r.x,a=r.y;delete r.x,delete r.y,e.attr(r),e.animate({x:s,y:a},t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.positionUpdate=e;
},{}],"c22T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scaleInX=a,exports.scaleInY=r;var t=require("@antv/matrix-util");function a(a,r,e){var i=a.getBBox(),n=a.get("origin").mappingData.points,x=n[0].y-n[1].y>0?i.maxX:i.minX,s=(i.minY+i.maxY)/2;a.applyToMatrix([x,s,1]);var m=t.ext.transform(a.getMatrix(),[["t",-x,-s],["s",.01,1],["t",x,s]]);a.setMatrix(m),a.animate({matrix:t.ext.transform(a.getMatrix(),[["t",-x,-s],["s",100,1],["t",x,s]])},r)}function r(a,r,e){var i=a.getBBox(),n=a.get("origin").mappingData,x=(i.minX+i.maxX)/2,s=n.points,m=s[0].y-s[1].y<=0?i.maxY:i.minY;a.applyToMatrix([x,m,1]);var o=t.ext.transform(a.getMatrix(),[["t",-x,-m],["s",1,.01],["t",x,m]]);a.setMatrix(o),a.animate({matrix:t.ext.transform(a.getMatrix(),[["t",-x,-m],["s",1,100],["t",x,m]])},r)}
},{"@antv/matrix-util":"n7Fk"}],"uZmX":[function(require,module,exports) {
"use strict";function e(){return window?window.devicePixelRatio:1}function t(e,t,r,n){var i=e-r,a=t-n;return Math.sqrt(i*i+a*a)}function r(e,t,r,n,i,a){return i>=e&&i<=e+r&&a>=t&&a<=t+n}function n(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function i(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function a(e,t){return e[0]===t[0]&&e[1]===t[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isSamePoint=exports.mergeRegion=exports.intersectRect=exports.inBox=exports.distance=exports.getPixelRatio=void 0,exports.getPixelRatio=e,exports.distance=t,exports.inBox=r,exports.intersectRect=n,exports.mergeRegion=i,exports.isSamePoint=a;var u=require("@antv/util/lib/is-nil");Object.defineProperty(exports,"isNil",{enumerable:!0,get:function(){return u.default}});var o=require("@antv/util/lib/is-string");Object.defineProperty(exports,"isString",{enumerable:!0,get:function(){return o.default}});var l=require("@antv/util/lib/is-function");Object.defineProperty(exports,"isFunction",{enumerable:!0,get:function(){return l.default}});var m=require("@antv/util/lib/is-array");Object.defineProperty(exports,"isArray",{enumerable:!0,get:function(){return m.default}});var s=require("@antv/util/lib/each");Object.defineProperty(exports,"each",{enumerable:!0,get:function(){return s.default}});var c=require("@antv/util/lib/to-radian");Object.defineProperty(exports,"toRadian",{enumerable:!0,get:function(){return c.default}});var f=require("@antv/util/lib/mod");Object.defineProperty(exports,"mod",{enumerable:!0,get:function(){return f.default}});var x=require("@antv/util/lib/is-number-equal");Object.defineProperty(exports,"isNumberEqual",{enumerable:!0,get:function(){return x.default}});var p=require("@antv/util/lib/request-animation-frame");Object.defineProperty(exports,"requestAnimationFrame",{enumerable:!0,get:function(){return p.default}});var b=require("@antv/util/lib/clear-animation-frame");Object.defineProperty(exports,"clearAnimationFrame",{enumerable:!0,get:function(){return b.default}});
},{"@antv/util/lib/is-nil":"F0V7","@antv/util/lib/is-string":"c0E0","@antv/util/lib/is-function":"t2Eu","@antv/util/lib/is-array":"vEj5","@antv/util/lib/each":"s4BX","@antv/util/lib/to-radian":"IgNa","@antv/util/lib/mod":"Mpln","@antv/util/lib/is-number-equal":"wb7x","@antv/util/lib/request-animation-frame":"kgiN","@antv/util/lib/clear-animation-frame":"dd6o"}],"oJD8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util");function a(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function r(t,r){return a(t)*a(r)?(t[0]*r[0]+t[1]*r[1])/(a(t)*a(r)):1}function e(t,a){return(t[0]*a[1]<t[1]*a[0]?-1:1)*Math.acos(r(t,a))}function n(a,n){var s=n[1],i=n[2],o=t.mod(t.toRadian(n[3]),2*Math.PI),M=n[4],h=n[5],c=a[0],u=a[1],l=n[6],P=n[7],d=Math.cos(o)*(c-l)/2+Math.sin(o)*(u-P)/2,f=-1*Math.sin(o)*(c-l)/2+Math.cos(o)*(u-P)/2,q=d*d/(s*s)+f*f/(i*i);q>1&&(s*=Math.sqrt(q),i*=Math.sqrt(q));var v=s*s*(f*f)+i*i*(d*d),x=v?Math.sqrt((s*s*(i*i)-v)/v):1;M===h&&(x*=-1),isNaN(x)&&(x=0);var g=i?x*s*f/i:0,p=s?x*-i*d/s:0,I=(c+l)/2+Math.cos(o)*g-Math.sin(o)*p,m=(u+P)/2+Math.sin(o)*g+Math.cos(o)*p,y=[(d-g)/s,(f-p)/i],A=[(-1*d-g)/s,(-1*f-p)/i],F=e([1,0],y),N=e(y,A);return r(y,A)<=-1&&(N=Math.PI),r(y,A)>=1&&(N=0),0===h&&N>0&&(N-=2*Math.PI),1===h&&N<0&&(N+=2*Math.PI),{cx:I,cy:m,rx:t.isSamePoint(a,[l,P])?0:s,ry:t.isSamePoint(a,[l,P])?0:i,startAngle:F,endAngle:F+N,xRotation:o,arcFlag:M,sweepFlag:h}}exports.default=n;
},{"./util":"uZmX"}],"WZc9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sectorPathUpdate=s;var t=require("tslib"),e=r(require("@antv/g-canvas/lib/util/arc-params")),a=require("@antv/util"),n=require("../../util/graphics");function r(t){return t&&t.__esModule?t:{default:t}}function u(t,n){var r,u=(0,e.default)(t,n),i=u.startAngle,l=u.endAngle;return!(0,a.isNumberEqual)(i,.5*-Math.PI)&&i<.5*-Math.PI&&(i+=2*Math.PI),!(0,a.isNumberEqual)(l,.5*-Math.PI)&&l<.5*-Math.PI&&(l+=2*Math.PI),0===n[5]&&(i=(r=[l,i])[0],l=r[1]),(0,a.isNumberEqual)(i,1.5*Math.PI)&&(i=-.5*Math.PI),(0,a.isNumberEqual)(l,-.5*Math.PI)&&(l=1.5*Math.PI),{startAngle:i,endAngle:l}}function i(t){var e;return"M"===t[0]||"L"===t[0]?e=[t[1],t[2]]:"a"!==t[0]&&"A"!==t[0]||(e=[t[t.length-2],t[t.length-1]]),e}function l(t){var e,n,r,l=t.filter(function(t){return"A"===t[0]||"a"===t[0]}),s=l[0],g=l.length>1?l[1]:l[0],h=t.indexOf(s),c=t.indexOf(g),d=i(t[h-1]),A=i(t[c-1]),o=u(d,s),M=o.startAngle,f=o.endAngle,P=u(A,g),_=P.startAngle,m=P.endAngle;(0,a.isNumberEqual)(M,_)&&(0,a.isNumberEqual)(f,m)?(n=M,r=f):(n=Math.min(M,_),r=Math.max(f,m));var p=s[1],q=l[l.length-1][1];return p<q?(p=(e=[q,p])[0],q=e[1]):p===q&&(q=0),{startAngle:n,endAngle:r,radius:p,innerRadius:q}}function s(e,r,u){var i=u.toAttrs,s=u.coordinate,g=i.path,h=g.map(function(t){return t[0]}),c=l(g),d=c.startAngle,A=c.endAngle,o=c.radius,M=c.innerRadius,f=l(e.attr("path")),P=f.startAngle,_=f.endAngle,m=s.getCenter(),p=d-P,q=A-_;e.animate(function(e){var r=P+e*p,u=_+e*q;return(0,t.__assign)((0,t.__assign)({},i),{path:(0,a.isEqual)(h,["M","A","A","Z"])?(0,n.getArcPath)(m.x,m.y,o,r,u):(0,n.getSectorPath)(m.x,m.y,o,r,u,M)})},(0,t.__assign)((0,t.__assign)({},r),{callback:function(){e.attr("path",g)}}))}
},{"tslib":"oMtQ","@antv/g-canvas/lib/util/arc-params":"oJD8","@antv/util":"rU8N","../../util/graphics":"L6ru"}],"lbJe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.waveIn=a;var e=require("tslib"),t=require("../../util/coordinate");function a(a,r,i){var s=(0,t.getCoordinateClipCfg)(i.coordinate,20),n=s.type,o=s.startState,l=s.endState,c=a.setClip({type:n,attrs:o});c.animate(l,(0,e.__assign)((0,e.__assign)({},r),{callback:function(){a&&!a.get("destroyed")&&a.set("clipShape",null),c.remove(!0)}}))}
},{"tslib":"oMtQ","../../util/coordinate":"sx3d"}],"OE4E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomIn=a,exports.zoomOut=o;var t=require("tslib"),e=require("@antv/matrix-util"),r=require("@antv/util");function i(a,o,n){if(a.isGroup())(0,r.each)(a.getChildren(),function(t){i(t,o,n)});else{var s=a.getBBox(),m=(s.minX+s.maxX)/2,x=(s.minY+s.maxY)/2;if(a.applyToMatrix([m,x,1]),"zoomIn"===n){var u=e.ext.transform(a.getMatrix(),[["t",-m,-x],["s",.01,.01],["t",m,x]]);a.setMatrix(u),a.animate({matrix:e.ext.transform(a.getMatrix(),[["t",-m,-x],["s",100,100],["t",m,x]])},o)}else a.animate({matrix:e.ext.transform(a.getMatrix(),[["t",-m,-x],["s",.01,.01],["t",m,x]])},(0,t.__assign)((0,t.__assign)({},o),{callback:function(){a.remove(!0)}}))}}function a(t,e,r){i(t,e,"zoomIn")}function o(t,e,r){i(t,e,"zoomOut")}
},{"tslib":"oMtQ","@antv/matrix-util":"n7Fk","@antv/util":"rU8N"}],"FP1u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFactTitleConfig=e,exports.getAnglePoint=n;var t=require("../constant");function e(e){return[t.DIRECTION.TOP,t.DIRECTION.BOTTOM].includes(e)?{offsetX:0,offsetY:e===t.DIRECTION.TOP?-8:8,style:{textAlign:"center",textBaseline:e===t.DIRECTION.TOP?"bottom":"top"}}:[t.DIRECTION.LEFT,t.DIRECTION.RIGHT].includes(e)?{offsetX:e===t.DIRECTION.LEFT?-8:8,offsetY:0,style:{textAlign:e===t.DIRECTION.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function n(t,e,n){return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}
},{"../constant":"JW8G"}],"tHvq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("../constant"),n=require("../util/facet"),r=require("./facet"),o=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return(0,t.__extends)(o,r),o.prototype.getDefaultCfg=function(){return(0,e.deepMix)({},r.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:r.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){r.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.getRegion=function(t,e){var i=2*Math.PI/t,r=-1*Math.PI/2+i*e,o=.5/(1+1/Math.sin(i/2)),l=(0,n.getAnglePoint)({x:.5,y:.5},.5-o,r),a=5*Math.PI/4,u=1*Math.PI/4;return{start:(0,n.getAnglePoint)(l,o,a),end:(0,n.getAnglePoint)(l,o,u)}},o.prototype.afterEachView=function(t,e){this.processAxis(t,e)},o.prototype.beforeEachView=function(t,e){},o.prototype.generateFacets=function(t){var i=this,n=this.cfg,r=n.fields,o=n.type,l=r[0];if(!l)throw new Error("No `fields` specified!");var a=this.getFieldValues(t,l),u=a.length,c=[];return a.forEach(function(n,r){var s=[{field:l,value:n,values:a}],p=(0,e.filter)(t,i.getFacetDataFilter(s)),f={type:o,data:p,region:i.getRegion(u,r),columnValue:n,columnField:l,columnIndex:r,columnValuesLength:u,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};c.push(f)}),c},o.prototype.getXAxisOption=function(t,e,i,n){return i},o.prototype.getYAxisOption=function(t,e,i,n){return i},o.prototype.renderTitle=function(){var t=this;(0,e.each)(this.facets,function(r){var o=r.columnValue,l=r.view,a=(0,e.get)(t.cfg.title,"formatter"),u=(0,e.deepMix)({position:["50%","0%"],content:a?a(o):o},(0,n.getFactTitleConfig)(i.DIRECTION.TOP),t.cfg.title);l.annotation().text(u)})},o}(r.Facet),l=o;exports.default=l;
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","../util/facet":"FP1u","./facet":"rL5d"}],"IM7q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),o=require("../constant"),n=require("../util/facet"),l=require("./facet"),r=function(l){function r(){return null!==l&&l.apply(this,arguments)||this}return(0,t.__extends)(r,l),r.prototype.getDefaultCfg=function(){return(0,e.deepMix)({},l.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:l.prototype.getDefaultTitleCfg.call(this)})},r.prototype.render=function(){l.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){var o=this,n=this.cfg.fields,l=this.cfg.cols,r=n[0];if(!r)throw new Error("No `fields` specified!");var i=this.getFieldValues(t,r),u=i.length;l=l||u;var a=this.getPageCount(u,l),s=[];return i.forEach(function(n,c){var f=o.getRowCol(c,l),p=f.row,g=f.col,h=[{field:r,value:n,values:i}],d=(0,e.filter)(t,o.getFacetDataFilter(h)),w={type:o.cfg.type,data:d,region:o.getRegion(a,l,g,p),columnValue:n,rowValue:n,columnField:r,rowField:null,columnIndex:g,rowIndex:p,columnValuesLength:l,rowValuesLength:a,total:u};s.push(w)}),s},r.prototype.getXAxisOption=function(e,o,n,l){return l.rowIndex!==l.rowValuesLength-1&&l.columnValuesLength*l.rowIndex+l.columnIndex+1+l.columnValuesLength<=l.total?(0,t.__assign)((0,t.__assign)({},n),{label:null,title:null}):n},r.prototype.getYAxisOption=function(e,o,n,l){return 0!==l.columnIndex?(0,t.__assign)((0,t.__assign)({},n),{title:null,label:null}):n},r.prototype.renderTitle=function(){var t=this;(0,e.each)(this.facets,function(l){var r=l.columnValue,i=l.view,u=(0,e.get)(t.cfg.title,"formatter"),a=(0,e.deepMix)({position:["50%","0%"],content:u?u(r):r},(0,n.getFactTitleConfig)(o.DIRECTION.TOP),t.cfg.title);i.annotation().text(a)})},r.prototype.getPageCount=function(t,e){return Math.floor((t+e-1)/e)},r.prototype.getRowCol=function(t,e){return{row:Math.floor(t/e),col:t%e}},r}(l.Facet),i=r;exports.default=i;
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","../util/facet":"FP1u","./facet":"rL5d"}],"ofxg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=require("../constant"),o=require("../util/facet"),i=require("./facet"),r=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return(0,t.__extends)(r,i),r.prototype.getDefaultCfg=function(){return(0,e.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:(0,t.__assign)({},i.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,t.__assign)({},i.prototype.getDefaultTitleCfg.call(this))})},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.afterEachView=function(t,e){this.processAxis(t,e)},r.prototype.beforeEachView=function(t,e){},r.prototype.generateFacets=function(t){for(var e=this.cfg,n=e.fields,o=e.type,i=n.length,r=i,l=[],a=0;a<r;a++)for(var u=n[a],s=0;s<i;s++){var c=n[s],f={type:o,data:t,region:this.getRegion(i,r,a,s),columnValue:u,rowValue:c,columnField:u,rowField:c,columnIndex:a,rowIndex:s,columnValuesLength:r,rowValuesLength:i};l.push(f)}return l},r.prototype.getXAxisOption=function(e,n,o,i){return i.rowIndex!==i.rowValuesLength-1?(0,t.__assign)((0,t.__assign)({},o),{label:null,title:null}):o},r.prototype.getYAxisOption=function(e,n,o,i){return 0!==i.columnIndex?(0,t.__assign)((0,t.__assign)({},o),{title:null,label:null}):o},r.prototype.renderTitle=function(){var t=this;(0,e.each)(this.facets,function(i,r){var l=i.columnIndex,a=i.rowIndex,u=i.columnValuesLength,s=(i.rowValuesLength,i.columnValue),c=i.rowValue,f=i.view;if(0===a){var p=(0,e.get)(t.cfg.columnTitle,"formatter"),g=(0,e.deepMix)({position:["50%","0%"],content:p?p(s):s},(0,o.getFactTitleConfig)(n.DIRECTION.TOP),t.cfg.columnTitle);f.annotation().text(g)}if(l===u-1){p=(0,e.get)(t.cfg.rowTitle,"formatter"),g=(0,e.deepMix)({position:["100%","50%"],content:p?p(c):c},(0,o.getFactTitleConfig)(n.DIRECTION.RIGHT),t.cfg.rowTitle);f.annotation().text(g)}})},r}(i.Facet),l=r;exports.default=l;
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","../util/facet":"FP1u","./facet":"rL5d"}],"RNkN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),o=require("../constant"),i=require("../util/facet"),n=require("./facet"),r=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return(0,e.__extends)(r,n),r.prototype.getDefaultCfg=function(){return(0,t.deepMix)({},n.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:n.prototype.getDefaultTitleCfg.call(this),transpose:!1})},r.prototype.render=function(){n.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.beforeEachView=function(e,t){this.cfg.transpose?t.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():t.rowIndex%2!=0&&e.coordinate().reflect("y")},r.prototype.afterEachView=function(e,t){this.processAxis(e,t)},r.prototype.generateFacets=function(e){var o,i,n=this,r=this.cfg.fields[0],l=[],a=1,s=1,c=[""],u=[""];return this.cfg.transpose?(o=r,c=this.getFieldValues(e,o).slice(0,2),a=c.length):(i=r,u=this.getFieldValues(e,i).slice(0,2),s=u.length),c.forEach(function(r,f){u.forEach(function(p,g){var d=[{field:o,value:r,values:c},{field:i,value:p,values:u}],h=(0,t.filter)(e,n.getFacetDataFilter(d)),x={type:n.cfg.type,data:h,region:n.getRegion(s,a,f,g),columnValue:r,rowValue:p,columnField:o,rowField:i,columnIndex:f,rowIndex:g,columnValuesLength:a,rowValuesLength:s};l.push(x)})}),l},r.prototype.getXAxisOption=function(t,o,i,n){return 1===n.columnIndex||1===n.rowIndex?(0,e.__assign)((0,e.__assign)({},i),{label:null,title:null}):i},r.prototype.getYAxisOption=function(e,t,o,i){return o},r.prototype.renderTitle=function(){var e=this;(0,t.each)(this.facets,function(n,r){var l=n.columnValue,a=n.rowValue,s=n.view,c=(0,t.get)(e.cfg.title,"formatter");if(e.cfg.transpose){var u=(0,t.deepMix)({position:["50%","0%"],content:c?c(l):l},(0,i.getFactTitleConfig)(o.DIRECTION.TOP),e.cfg.title);s.annotation().text(u)}else{u=(0,t.deepMix)({position:["100%","50%"],content:c?c(a):a},(0,i.getFactTitleConfig)(o.DIRECTION.RIGHT),e.cfg.title);s.annotation().text(u)}})},r}(n.Facet),l=r;exports.default=l;
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","../util/facet":"FP1u","./facet":"rL5d"}],"fKSw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),n=require("../constant"),i=require("../util/facet"),l=require("./facet"),o=function(l){function o(){return null!==l&&l.apply(this,arguments)||this}return(0,e.__extends)(o,l),o.prototype.afterEachView=function(e,t){this.processAxis(e,t)},o.prototype.beforeEachView=function(e,t){},o.prototype.getDefaultCfg=function(){return(0,t.deepMix)({},l.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:(0,e.__assign)({},l.prototype.getDefaultTitleCfg.call(this)),rowTitle:(0,e.__assign)({},l.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){l.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.generateFacets=function(e){var n=this,i=this.cfg.fields,l=i[0],o=i[1],r=[],a=1,u=1,s=[""],c=[""];return l&&(s=this.getFieldValues(e,l),a=s.length),o&&(c=this.getFieldValues(e,o),u=c.length),s.forEach(function(i,f){c.forEach(function(g,p){var h=[{field:l,value:i,values:s},{field:o,value:g,values:c}],d=(0,t.filter)(e,n.getFacetDataFilter(h)),_={type:n.cfg.type,data:d,region:n.getRegion(u,a,f,p),columnValue:i,rowValue:g,columnField:l,rowField:o,columnIndex:f,rowIndex:p,columnValuesLength:a,rowValuesLength:u};r.push(_)})}),r},o.prototype.renderTitle=function(){var e=this;(0,t.each)(this.facets,function(l,o){var r=l.columnIndex,a=l.rowIndex,u=l.columnValuesLength,s=l.columnValue,c=l.rowValue,f=l.view;if(0===a){var g=(0,t.get)(e.cfg.columnTitle,"formatter"),p=(0,t.deepMix)({position:["50%","0%"],content:g?g(s):s},(0,i.getFactTitleConfig)(n.DIRECTION.TOP),e.cfg.columnTitle);f.annotation().text(p)}if(r===u-1){g=(0,t.get)(e.cfg.rowTitle,"formatter"),p=(0,t.deepMix)({position:["100%","50%"],content:g?g(c):c},(0,i.getFactTitleConfig)(n.DIRECTION.RIGHT),e.cfg.rowTitle);f.annotation().text(p)}})},o.prototype.getXAxisOption=function(t,n,i,l){return l.rowIndex!==l.rowValuesLength-1?(0,e.__assign)((0,e.__assign)({},i),{title:null,label:null}):l.columnIndex!==Math.floor((l.columnValuesLength-1)/2)?(0,e.__assign)((0,e.__assign)({},i),{title:null}):i},o.prototype.getYAxisOption=function(t,n,i,l){return 0!==l.columnIndex?(0,e.__assign)((0,e.__assign)({},i),{title:null,label:null}):l.rowIndex!==Math.floor((l.rowValuesLength-1)/2)?(0,e.__assign)((0,e.__assign)({},i),{title:null}):i},o}(l.Facet),r=o;exports.default=r;
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","../util/facet":"FP1u","./facet":"rL5d"}],"OnfO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),n=require("../constant"),o=require("../util/facet"),i=require("./facet"),r=function(i){function r(){var e=null!==i&&i.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return(0,e.__extends)(r,i),r.prototype.afterEachView=function(e,t){this.processAxis(e,t)},r.prototype.beforeEachView=function(e,t){},r.prototype.init=function(){i.prototype.init.call(this),this.view.on(n.VIEW_LIFE_CIRCLE.AFTER_RENDER,this.afterChartRender)},r.prototype.getDefaultCfg=function(){return(0,t.deepMix)({},i.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:i.prototype.getDefaultTitleCfg.call(this)})},r.prototype.generateFacets=function(e){if(!this.cfg.fields.length)throw new Error("Please specify for the fields for rootFacet!");var t=[],n={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return t.push(n),n.children=this.getChildFacets(e,1,t),this.setRegion(t),t},r.prototype.setRegion=function(e){var t=this;this.forceColIndex(e),e.forEach(function(e){e.region=t.getRegion(e.rowValuesLength,e.columnValuesLength,e.columnIndex,e.rowIndex)})},r.prototype.getRegion=function(e,t,n,o){var i=1/t,r=1/e,l={x:i*n,y:r*o};return{start:l,end:{x:l.x+i,y:l.y+2*r/3}}},r.prototype.forceColIndex=function(e){var t=this,n=[],o=0;e.forEach(function(e){t.isLeaf(e)&&(n.push(e),e.columnIndex=o,o++)}),n.forEach(function(e){e.columnValuesLength=n.length});for(var i=this.cfg.fields.length-1;i>=0;i--)for(var r=0,l=this.getFacetsByLevel(e,i);r<l.length;r++){var a=l[r];this.isLeaf(a)||(a.originColIndex=a.columnIndex,a.columnIndex=this.getRegionIndex(a.children),a.columnValuesLength=n.length)}},r.prototype.getFacetsByLevel=function(e,t){var n=[];return e.forEach(function(e){e.rowIndex===t&&n.push(e)}),n},r.prototype.getRegionIndex=function(e){var t=e[0];return(e[e.length-1].columnIndex-t.columnIndex)/2+t.columnIndex},r.prototype.isLeaf=function(e){return!e.children||!e.children.length},r.prototype.getRows=function(){return this.cfg.fields.length+1},r.prototype.getChildFacets=function(e,t,n){var o=this,i=this.cfg.fields;if(!(i.length<t)){var r=[],l=i[t-1],a=this.getFieldValues(e,l);return a.forEach(function(i,s){var c=[{field:l,value:i,values:a}],u=e.filter(o.getFacetDataFilter(c));if(u.length){var h={type:o.cfg.type,data:u,region:null,columnValue:i,rowValue:"",columnField:l,rowField:"",columnIndex:s,rowValuesLength:o.getRows(),columnValuesLength:1,rowIndex:t,children:o.getChildFacets(u,t+1,n)};r.push(h),n.push(h)}}),r}},r.prototype.render=function(){i.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},r.prototype.renderTitle=function(){var e=this;(0,t.each)(this.facets,function(i){var r=i.columnValue,l=i.view,a=(0,t.get)(e.cfg.title,"formatter"),s=(0,t.deepMix)({position:["50%","0%"],content:a?a(r):r},(0,o.getFactTitleConfig)(n.DIRECTION.TOP),e.cfg.title);l.annotation().text(s)})},r.prototype.drawLines=function(e){var t=this;e.forEach(function(e){if(!t.isLeaf(e)){var n=e.children;t.addFacetLines(e,n)}})},r.prototype.addFacetLines=function(e,t){var n=this,o=e.view.coordinateBBox,i={x:o.x+o.width/2,y:o.y+o.height};t.forEach(function(e){var t=e.view.coordinateBBox,o={x:t.bl.x+(t.tr.x-t.bl.x)/2,y:t.tr.y},r={x:i.x,y:i.y+(o.y-i.y)/2},l={x:o.x,y:r.y};n.drawLine([i,r,l,o])})},r.prototype.getPath=function(e){var t=[];return this.cfg.line.smooth?(t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t},r.prototype.drawLine=function(e){var n=this.getPath(e),o=this.cfg.line.style;this.container.addShape("path",{attrs:(0,t.assign)({path:n},o)})},r.prototype.getXAxisOption=function(t,n,o,i){return i.rowIndex!==i.rowValuesLength-1?(0,e.__assign)((0,e.__assign)({},o),{title:null,label:null}):o},r.prototype.getYAxisOption=function(t,n,o,i){return 0!==i.originColIndex&&0!==i.columnIndex?(0,e.__assign)((0,e.__assign)({},o),{title:null,label:null}):o},r}(i.Facet),l=r;exports.default=l;
},{"tslib":"oMtQ","@antv/util":"rU8N","../constant":"JW8G","../util/facet":"FP1u","./facet":"rL5d"}],"W5QM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=require("../../dependents"),i=require("../../animate/"),o=require("../../constant"),r=require("../../util/coordinate"),a=require("../../util/helper"),s=require("./base"),p=function(s){function p(t){var e=s.call(this,t)||this;return e.cache=new Map,e.foregroundContainer=e.view.getLayer(o.LAYER.FORE).addGroup(),e.backgroundContainer=e.view.getLayer(o.LAYER.BG).addGroup(),e.option=[],e}return(0,t.__extends)(p,s),Object.defineProperty(p.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),p.prototype.init=function(){},p.prototype.layout=function(){var t=this,n=this.getComponents(),i=function(e){var n=e.component,i=e.extra,o=i.type,r=t.getAnnotationTheme(o);n.update(t.getAnnotationCfg(o,i,r))},r=function(e){var n=t.createAnnotation(e);n&&(n.component.init(),"regionFilter"===e.type&&n.component.render(),t.cache.set(e,n))};n.length?(0,e.each)(n,function(e){"regionFilter"===e.component.get("type")?t.view.getRootView().once(o.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){i(e)}):i(e)}):(0,e.each)(this.option,function(e){"regionFilter"===e.type?t.view.getRootView().once(o.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){r(e)}):r(e)})},p.prototype.render=function(){},p.prototype.update=function(){var t=this,n=new WeakMap,i=function(e){var i=e.type,o=t.getAnnotationTheme(i),r=t.getAnnotationCfg(i,e,o),s=t.cache.get(e);if(s)(0,a.omit)(r,["container"]),s.component.update(r),n.set(e,!0);else{var p=t.createAnnotation(e);p&&(p.component.init(),"regionFilter"===e.type&&p.component.render(),t.cache.set(e,p),n.set(e,!0))}};this.view.once(o.VIEW_LIFE_CIRCLE.AFTER_RENDER,function(){(0,e.each)(t.option,function(t){"regionFilter"===t.type&&i(t)});var o=new Map;t.cache.forEach(function(t,e){n.has(e)?o.set(e,t):t.component.destroy()}),t.cache=o}),(0,e.each)(this.option,function(t){"regionFilter"!==t.type&&i(t)})},p.prototype.clear=function(t){void 0===t&&(t=!1),s.prototype.clear.call(this),this.cache.clear(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},p.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},p.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(e){t.push(e)}),t},p.prototype.createAnnotation=function(t){var i=t.type,r=n.Annotation[(0,e.upperFirst)(i)];if(r){var a=this.getAnnotationTheme(i),s=this.getAnnotationCfg(i,t,a);return{component:new r(s),layer:this.isTop(s)?o.LAYER.FORE:o.LAYER.BG,direction:o.DIRECTION.NONE,type:o.COMPONENT_TYPE.ANNOTATION,extra:t}}},p.prototype.annotation=function(t){this.option.push(t)},p.prototype.arc=function(e){return this.annotation((0,t.__assign)({type:"arc"},e)),this},p.prototype.image=function(e){return this.annotation((0,t.__assign)({type:"image"},e)),this},p.prototype.line=function(e){return this.annotation((0,t.__assign)({type:"line"},e)),this},p.prototype.region=function(e){return this.annotation((0,t.__assign)({type:"region"},e)),this},p.prototype.text=function(e){return this.annotation((0,t.__assign)({type:"text"},e)),this},p.prototype.dataMarker=function(e){return this.annotation((0,t.__assign)({type:"dataMarker"},e)),this},p.prototype.dataRegion=function(e){this.annotation((0,t.__assign)({type:"dataRegion"},e))},p.prototype.regionFilter=function(e){this.annotation((0,t.__assign)({type:"regionFilter"},e))},p.prototype.parsePosition=function(t){var n=this.view.getXScale(),i=this.view.getScalesByDim("y"),o=(0,e.isFunction)(t)?t.call(null,n,i):t,r=0,a=0;if((0,e.isArray)(o)){var s=o[0],p=o[1];if((0,e.isString)(s)&&-1!==s.indexOf("%")&&!isNaN(s.slice(0,-1)))return this.parsePercentPosition(o);r=this.getNormalizedValue(s,n),a=this.getNormalizedValue(p,Object.values(i)[0])}else if(!(0,e.isNil)(o))for(var c=0,u=(0,e.keys)(o);c<u.length;c++){var h=u[c],g=o[h];h===n.field&&(r=this.getNormalizedValue(g,n)),i[h]&&(a=this.getNormalizedValue(g,i[h]))}return this.view.getCoordinate().convert({x:r,y:a})},p.prototype.getRegionPoints=function(t,n){var i,o=this,r=this.view.getXScale(),a=this.view.getScalesByDim("y"),s=Object.values(a)[0],p=r.field,c=this.view.getData(),u=(0,e.isArray)(t)?t[0]:t[p],h=(0,e.isArray)(n)?n[0]:n[p],g=[];return(0,e.each)(c,function(t,e){if(t[p]===u&&(i=e),e>=i){var n=o.parsePosition([t[p],t[s.field]]);n&&g.push(n)}if(t[p]===h)return!1}),g},p.prototype.getNormalizedValue=function(t,e){var n,i;switch(t){case"start":n=0;break;case"end":n=1;break;case"median":i=e.isCategory?(e.values.length-1)/2:(e.min+e.max)/2,n=e.scale(i);break;case"min":case"max":i=e.isCategory?"min"===t?0:e.values.length-1:e[t],n=e.scale(i);break;default:n=e.scale(t)}return n},p.prototype.parsePercentPosition=function(t){var e=parseFloat(t[0])/100,n=parseFloat(t[1])/100,i=this.view.getCoordinate(),o=i.start,r=i.end,a=Math.min(o.x,r.x),s=Math.min(o.y,r.y);return{x:i.getWidth()*e+a,y:i.getHeight()*n+s}},p.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),e=t.start,n=t.end,i=t.getWidth(),o=t.getHeight(),r={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)};return{x:r.x,y:r.y,minX:r.x,minY:r.y,maxX:r.x+i,maxY:r.y+o,width:i,height:o}},p.prototype.getAnnotationCfg=function(n,o,a){var s=this.view.getCoordinate(),p={};if((0,e.isNil)(o))return null;if("arc"===n){var c=o,u=c.start,h=c.end,g=this.parsePosition(u),l=this.parsePosition(h),f=(0,r.getAngleByPoint)(s,g),d=(0,r.getAngleByPoint)(s,l);f>d&&(d=2*Math.PI+d),p={center:s.getCenter(),radius:(0,r.getDistanceToCenter)(s,g),startAngle:f,endAngle:d}}else if("image"===n){var y=o;u=y.start,h=y.end;p={start:this.parsePosition(u),end:this.parsePosition(h),src:o.src}}else if("line"===n){var m=o;u=m.start,h=m.end;p={start:this.parsePosition(u),end:this.parsePosition(h),text:(0,e.get)(o,"text",null)}}else if("region"===n){var v=o;u=v.start,h=v.end;p={start:this.parsePosition(u),end:this.parsePosition(h)}}else if("text"===n){var _=this.view.getData(),C=o,x=C.position,A=C.content,E=(0,t.__rest)(C,["position","content"]),P=A;(0,e.isFunction)(A)&&(P=A(_)),p=(0,t.__assign)((0,t.__assign)((0,t.__assign)({},this.parsePosition(x)),E),{content:P})}else if("dataMarker"===n){var w=o,R=(x=w.position,w.point),F=w.line,N=w.text,T=w.autoAdjust,O=w.direction;p=(0,t.__assign)((0,t.__assign)({},this.parsePosition(x)),{coordinateBBox:this.getCoordinateBBox(),point:R,line:F,text:N,autoAdjust:T,direction:O})}else if("dataRegion"===n){var b=o,M=(u=b.start,h=b.end,b.region),L=(N=b.text,b.lineLength);p={points:this.getRegionPoints(u,h),region:M,text:N,lineLength:L}}else if("regionFilter"===n){var I=o,k=(u=I.start,h=I.end,I.apply),B=I.color,D=this.view.geometries,V=[],Y=function(t){t&&(t.isGroup()?t.getChildren().forEach(function(t){return Y(t)}):V.push(t))};(0,e.each)(D,function(t){k?(0,e.contains)(k,t.type)&&(0,e.each)(t.elements,function(t){Y(t.shape)}):(0,e.each)(t.elements,function(t){Y(t.shape)})}),p={color:B,shapes:V,start:this.parsePosition(u),end:this.parsePosition(h)}}var q=(0,e.deepMix)({},a,(0,t.__assign)((0,t.__assign)({},p),{top:o.top,style:o.style,offsetX:o.offsetX,offsetY:o.offsetY}));return q.container=this.getComponentContainer(q),q.animate=this.view.getOptions().animate&&q.animate&&(0,e.get)(o,"animate",q.animate),q.animateOption=(0,e.deepMix)({},i.DEFAULT_ANIMATE_CFG,q.animateOption,o.animateOption),q},p.prototype.isTop=function(t){return(0,e.get)(t,"top",!0)},p.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},p.prototype.getAnnotationTheme=function(t){return(0,e.get)(this.view.getTheme(),["components","annotation",t],{})},p}(s.Controller),c=p;exports.default=c;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../dependents":"iPWy","../../animate/":"UIgk","../../constant":"JW8G","../../util/coordinate":"sx3d","../../util/helper":"RDFe","./base":"g26H"}],"sEY1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGridThemeCfg=r,exports.getLineGridItems=t,exports.getCircleGridItems=n,exports.showGrid=u;var e=require("@antv/util");function r(r,t){return(0,e.get)(r,["components","axis",t,"grid"],{})}function t(e,r,t,n){var u=[],i=r.getTicks();return e.isPolar&&i.push({value:1,text:"",tickValue:""}),i.reduce(function(r,i,o){var s=i.value;if(n)u.push({points:[e.convert("y"===t?{x:0,y:s}:{x:s,y:0}),e.convert("y"===t?{x:1,y:s}:{x:s,y:1})]});else if(o){var v=(r.value+s)/2;u.push({points:[e.convert("y"===t?{x:0,y:v}:{x:v,y:0}),e.convert("y"===t?{x:1,y:v}:{x:v,y:1})]})}return i},i[0]),u}function n(r,t,n,u,i){var o=t.values.length,s=[],v=n.getTicks();return v.reduce(function(t,n){var v=t?t.value:n.value,c=n.value,a=(v+c)/2;return"x"===i?s.push({points:[r.convert({x:u?c:a,y:0}),r.convert({x:u?c:a,y:1})]}):s.push({points:(0,e.map)(Array(o+1),function(e,t){return r.convert({x:t/o,y:u?c:a})})}),n},v[0]),s}function u(r,t){var n=(0,e.get)(t,"grid");if(null===n)return!1;var u=(0,e.get)(r,"grid");return!(void 0===n&&null===u)}
},{"@antv/util":"rU8N"}],"BdLL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=require("../../constant"),n=require("../../dependents"),r=require("../../animate/"),s=require("../../util/axis"),a=require("../../util/grid"),o=require("../../util/helper"),c=require("./base"),g=["container"],d=(0,e.__assign)((0,e.__assign)({},r.DEFAULT_ANIMATE_CFG),{appear:null}),p=function(r){function c(e){var t=r.call(this,e)||this;return t.cache=new Map,t.gridContainer=t.view.getLayer(i.LAYER.BG).addGroup(),t.axisContainer=t.view.getLayer(i.LAYER.BG).addGroup(),t}return(0,e.__extends)(c,r),Object.defineProperty(c.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),c.prototype.init=function(){},c.prototype.render=function(){this.update()},c.prototype.layout=function(){var e=this,n=this.view.getCoordinate();(0,t.each)(this.getComponents(),function(t){var r,o=t.component,c=t.direction,g=t.type,d=t.extra,p=d.dim,C=d.scale,h=d.alignTick;if(g===i.COMPONENT_TYPE.AXIS)n.isPolar?"x"===p?r=n.isTransposed?(0,s.getAxisRegion)(n,c):(0,s.getCircleAxisCenterRadius)(n):"y"===p&&(r=n.isTransposed?(0,s.getCircleAxisCenterRadius)(n):(0,s.getAxisRegion)(n,c)):r=(0,s.getAxisRegion)(n,c);else if(g===i.COMPONENT_TYPE.GRID)if(n.isPolar){r={items:n.isTransposed?"x"===p?(0,a.getCircleGridItems)(n,e.view.getYScales()[0],C,h,p):(0,a.getLineGridItems)(n,C,p,h):"x"===p?(0,a.getLineGridItems)(n,C,p,h):(0,a.getCircleGridItems)(n,e.view.getXScale(),C,h,p),center:e.view.getCoordinate().getCenter()}}else r={items:(0,a.getLineGridItems)(n,C,p,h)};o.update(r)})},c.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var t=new Map;this.cache.forEach(function(i,n){e.has(n)?t.set(n,i):i.component.destroy()}),this.cache=t},c.prototype.clear=function(){r.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},c.prototype.destroy=function(){r.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},c.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(t){e.push(t)}),e},c.prototype.updateXAxes=function(e){var n=this.view.getXScale();if(n&&!n.isIdentity){var r=(0,s.getAxisOption)(this.option,n.field);if(!1!==r){var a=(0,s.getAxisDirection)(r,i.DIRECTION.BOTTOM),c=i.LAYER.BG,d=this.view.getCoordinate(),p=this.getId("axis",n.field),C=this.getId("grid",n.field);if(d.isRect){if(l=this.cache.get(p)){var h=this.getLineAxisCfg(n,r,a);(0,o.omit)(h,g),l.component.update(h),e.set(p,l)}else l=this.createLineAxis(n,r,c,a,"x"),this.cache.set(p,l),e.set(p,l);if(f=this.cache.get(C)){h=this.getLineGridCfg(n,r,a,"x");(0,o.omit)(h,g),f.component.update(h),e.set(C,f)}else(f=this.createLineGrid(n,r,c,a,"x"))&&(this.cache.set(C,f),e.set(C,f))}else if(d.isPolar){var l,f;if(l=this.cache.get(p)){h=d.isTransposed?this.getLineAxisCfg(n,r,i.DIRECTION.RADIUS):this.getCircleAxisCfg(n,r,a);(0,o.omit)(h,g),l.component.update(h),e.set(p,l)}else{if(d.isTransposed){if((0,t.isUndefined)(r))return;l=this.createLineAxis(n,r,c,i.DIRECTION.RADIUS,"x")}else l=this.createCircleAxis(n,r,c,a,"x");this.cache.set(p,l),e.set(p,l)}if(f=this.cache.get(C)){h=d.isTransposed?this.getCircleGridCfg(n,r,i.DIRECTION.RADIUS,"x"):this.getLineGridCfg(n,r,i.DIRECTION.CIRCLE,"x");(0,o.omit)(h,g),f.component.update(h),e.set(C,f)}else{if(d.isTransposed){if((0,t.isUndefined)(r))return;f=this.createCircleGrid(n,r,c,i.DIRECTION.RADIUS,"x")}else f=this.createLineGrid(n,r,c,i.DIRECTION.CIRCLE,"x");f&&(this.cache.set(C,f),e.set(C,f))}}}}},c.prototype.updateYAxes=function(e){var n=this,r=this.view.getYScales();(0,t.each)(r,function(r,a){if(r&&!r.isIdentity){var c=r.field,d=(0,s.getAxisOption)(n.option,c);if(!1!==d){var p=i.LAYER.BG,C=n.getId("axis",c),h=n.getId("grid",c),l=n.view.getCoordinate();if(l.isRect){var f=(0,s.getAxisDirection)(d,0===a?i.DIRECTION.LEFT:i.DIRECTION.RIGHT);if(m=n.cache.get(C)){var u=n.getLineAxisCfg(r,d,f);(0,o.omit)(u,g),m.component.update(u),e.set(C,m)}else m=n.createLineAxis(r,d,p,f,"y"),n.cache.set(C,m),e.set(C,m);if(x=n.cache.get(h)){u=n.getLineGridCfg(r,d,f,"y");(0,o.omit)(u,g),x.component.update(u),e.set(h,x)}else(x=n.createLineGrid(r,d,p,f,"y"))&&(n.cache.set(h,x),e.set(h,x))}else if(l.isPolar){var m,x;if(m=n.cache.get(C)){u=l.isTransposed?n.getCircleAxisCfg(r,d,i.DIRECTION.CIRCLE):n.getLineAxisCfg(r,d,i.DIRECTION.RADIUS);(0,o.omit)(u,g),m.component.update(u),e.set(C,m)}else{if(l.isTransposed){if((0,t.isUndefined)(d))return;m=n.createCircleAxis(r,d,p,i.DIRECTION.CIRCLE,"y")}else m=n.createLineAxis(r,d,p,i.DIRECTION.RADIUS,"y");n.cache.set(C,m),e.set(C,m)}if(x=n.cache.get(h)){u=l.isTransposed?n.getLineGridCfg(r,d,i.DIRECTION.CIRCLE,"y"):n.getCircleGridCfg(r,d,i.DIRECTION.RADIUS,"y");(0,o.omit)(u,g),x.component.update(u),e.set(h,x)}else{if(l.isTransposed){if((0,t.isUndefined)(d))return;x=n.createLineGrid(r,d,p,i.DIRECTION.CIRCLE,"y")}else x=n.createCircleGrid(r,d,p,i.DIRECTION.RADIUS,"y");x&&(n.cache.set(h,x),e.set(h,x))}}}}})},c.prototype.createLineAxis=function(e,t,r,s,a){var o={component:new n.LineAxis(this.getLineAxisCfg(e,t,s)),layer:r,direction:s===i.DIRECTION.RADIUS?i.DIRECTION.NONE:s,type:i.COMPONENT_TYPE.AXIS,extra:{dim:a,scale:e}};return o.component.set("field",e.field),o.component.init(),o},c.prototype.createLineGrid=function(e,r,s,a,o){var c=this.getLineGridCfg(e,r,a,o);if(c){var g={component:new n.LineGrid(c),layer:s,direction:i.DIRECTION.NONE,type:i.COMPONENT_TYPE.GRID,extra:{dim:o,scale:e,alignTick:(0,t.get)(c,"alignTick",!0)}};return g.component.init(),g}},c.prototype.createCircleAxis=function(e,t,r,s,a){var o={component:new n.CircleAxis(this.getCircleAxisCfg(e,t,s)),layer:r,direction:s,type:i.COMPONENT_TYPE.AXIS,extra:{dim:a,scale:e}};return o.component.set("field",e.field),o.component.init(),o},c.prototype.createCircleGrid=function(e,r,s,a,o){var c=this.getCircleGridCfg(e,r,a,o);if(c){var g={component:new n.CircleGrid(c),layer:s,direction:i.DIRECTION.NONE,type:i.COMPONENT_TYPE.GRID,extra:{dim:o,scale:e,alignTick:(0,t.get)(c,"alignTick",!0)}};return g.component.init(),g}},c.prototype.getLineAxisCfg=function(i,n,r){var a=this.axisContainer,o=this.view.getCoordinate(),c=(0,s.getAxisRegion)(o,r),g=(0,s.getAxisTitleText)(i,n),d=(0,s.getAxisThemeCfg)(this.view.getTheme(),r),p=(0,t.get)(n,["title"])?(0,t.deepMix)({title:{style:{text:g}}},n):n,C=(0,t.deepMix)((0,e.__assign)((0,e.__assign)({container:a},c),{ticks:i.getTicks().map(function(e){return{id:""+e.tickValue,name:e.text,value:e.value}}),verticalFactor:o.isPolar?-1*(0,s.getAxisFactorByRegion)(c,o.getCenter()):(0,s.getAxisFactorByRegion)(c,o.getCenter())}),d,p),h=this.getAnimateCfg(C),l=h.animate,f=h.animateOption;C.animateOption=f,C.animate=l;var u=(0,s.isVertical)(c),m=(0,t.get)(C,"verticalLimitLength",u?1/3:.5);if(m<=1){var x=this.view.getCanvas().get("width"),I=this.view.getCanvas().get("height");C.verticalLimitLength=m*(u?x:I)}return C},c.prototype.getLineGridCfg=function(e,i,n,r){if((0,a.showGrid)((0,s.getAxisThemeCfg)(this.view.getTheme(),n),i)){var o=(0,a.getGridThemeCfg)(this.view.getTheme(),n),c=(0,t.deepMix)({container:this.gridContainer},o,(0,t.get)(i,"grid"),this.getAnimateCfg(i));return c.items=(0,a.getLineGridItems)(this.view.getCoordinate(),e,r,(0,t.get)(c,"alignTick",!0)),c}},c.prototype.getCircleAxisCfg=function(n,r,a){var o=this.axisContainer,c=this.view.getCoordinate(),g=n.getTicks().map(function(e){return{id:""+e.tickValue,name:e.text,value:e.value}});n.isCategory||Math.abs(c.endAngle-c.startAngle)!==2*Math.PI||g.pop();var d=(0,s.getAxisTitleText)(n,r),p=(0,s.getAxisThemeCfg)(this.view.getTheme(),i.DIRECTION.CIRCLE),C=(0,t.get)(r,["title"])?(0,t.deepMix)({title:{style:{text:d}}},r):r,h=(0,t.deepMix)((0,e.__assign)((0,e.__assign)({container:o},(0,s.getCircleAxisCenterRadius)(this.view.getCoordinate())),{ticks:g,verticalFactor:1}),p,C),l=this.getAnimateCfg(h),f=l.animate,u=l.animateOption;return h.animate=f,h.animateOption=u,h},c.prototype.getCircleGridCfg=function(e,n,r,o){if((0,a.showGrid)((0,s.getAxisThemeCfg)(this.view.getTheme(),r),n)){var c=(0,a.getGridThemeCfg)(this.view.getTheme(),i.DIRECTION.RADIUS),g=(0,t.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},c,(0,t.get)(n,"grid"),this.getAnimateCfg(n)),d=(0,t.get)(g,"alignTick",!0),p="x"===o?this.view.getYScales()[0]:this.view.getXScale();return g.items=(0,a.getCircleGridItems)(this.view.getCoordinate(),p,e,d,o),g}},c.prototype.getId=function(e,t){return e+"-"+t+"-"+this.view.getCoordinate().type},c.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&(0,t.get)(e,"animate"),animateOption:e&&e.animateOption?(0,t.deepMix)({},d,e.animateOption):d}},c}(c.Controller),C=p;exports.default=C;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../constant":"JW8G","../../dependents":"iPWy","../../animate/":"UIgk","../../util/axis":"zdfe","../../util/grid":"sEY1","../../util/helper":"RDFe","./base":"g26H"}],"xlYl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.directionToPosition=I,exports.getTranslateDirection=n;var T=require("../constant");function I(I,O,t){return t===T.DIRECTION.TOP?[I.minX+I.width/2-O.width/2,I.minY]:t===T.DIRECTION.BOTTOM?[I.minX+I.width/2-O.width/2,I.maxY-O.height]:t===T.DIRECTION.LEFT?[I.minX,I.minY+I.height/2-O.height/2]:t===T.DIRECTION.RIGHT?[I.maxX-O.width,I.minY+I.height/2-O.height/2]:t===T.DIRECTION.TOP_LEFT||t===T.DIRECTION.LEFT_TOP?[I.tl.x,I.tl.y]:t===T.DIRECTION.TOP_RIGHT||t===T.DIRECTION.RIGHT_TOP?[I.tr.x-O.width,I.tr.y]:t===T.DIRECTION.BOTTOM_LEFT||t===T.DIRECTION.LEFT_BOTTOM?[I.bl.x,I.bl.y-O.height]:t===T.DIRECTION.BOTTOM_RIGHT||t===T.DIRECTION.RIGHT_BOTTOM?[I.br.x-O.width,I.br.y-O.height]:[0,0]}function O(I,O){if(O.isTransposed)switch(I){case T.DIRECTION.BOTTOM:return T.DIRECTION.LEFT;case T.DIRECTION.LEFT:return T.DIRECTION.BOTTOM;case T.DIRECTION.RIGHT:return T.DIRECTION.TOP;case T.DIRECTION.TOP:return T.DIRECTION.RIGHT}return I}function t(I){return I===T.DIRECTION.LEFT?T.DIRECTION.RIGHT:I===T.DIRECTION.RIGHT?T.DIRECTION.LEFT:I}function e(I){return I===T.DIRECTION.TOP?T.DIRECTION.BOTTOM:I===T.DIRECTION.BOTTOM?T.DIRECTION.TOP:I}function r(T,I){var O=I.matrix[0],r=I.matrix[4],i=T;return O<0&&(i=t(i)),r<0&&(i=e(i)),i}function i(T,I){var O=T;return I.isReflect("x")&&(O=t(O)),I.isReflect("y")&&(O=e(O)),O}function n(T,I){var t=T;return t=i(t=r(t=O(t,I),I),I)}
},{"../constant":"JW8G"}],"B8Q4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMappingValue=r;var e=require("tslib");function r(r,a,l){if(!r)return l;var i;if(r.callback&&r.callback.length>1){var t=Array(r.callback.length-1).fill("");i=r.mapping.apply(r,(0,e.__spreadArrays)([a],t)).join("")}else i=r.mapping(a).join("");return i||l}
},{"tslib":"oMtQ"}],"kAUB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLegendLayout=n,exports.getLegendItems=o,exports.getCustomLegendItems=u;var e=require("@antv/util"),t=require("../constant"),r=require("./attr"),a=require("./marker");function i(t){var r=t.symbol;(0,e.isString)(r)&&a.MarkerSymbols[r]&&(t.symbol=a.MarkerSymbols[r])}function n(e){return e.startsWith(t.DIRECTION.LEFT)||e.startsWith(t.DIRECTION.RIGHT)?"vertical":"horizontal"}function o(t,a,n,o,u){var s=n.getScale(n.type);if(s.isCategory){var l=s.field,g=a.getAttribute("color"),c=a.getAttribute("shape"),p=t.getTheme().defaultColor,m=a.coordinate.isPolar;return s.getTicks().map(function(n){var d,v=n.text,f=n.value,k=v,h=s.invert(f),y=0===t.filterFieldData(l,[(d={},d[l]=h,d)]).length,I=(0,r.getMappingValue)(g,h,p),M=(0,r.getMappingValue)(c,h,"point"),b=a.getShapeMarker(M,{color:I,isInPolar:m});return i(b=(0,e.deepMix)({},o,b,u)),{id:h,name:k,value:h,marker:b,unchecked:y}})}return[]}function u(t,r,a){return a.map(function(a){var n=(0,e.deepMix)({},t,r,a.marker);return i(n),a.marker=n,a})}
},{"@antv/util":"rU8N","../constant":"JW8G","./attr":"B8Q4","./marker":"wfMb"}],"S6LQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=require("../../constant"),o=require("../../dependents"),n=require("../../animate"),r=require("../../util/bbox"),a=require("../../util/direction"),s=require("../../util/helper"),u=require("../../util/legend"),g=require("../../util/scale"),p=require("./base");function c(e,i){return(0,t.isBoolean)(e)?!1!==e&&{}:(0,t.get)(e,[i],e)}function d(e){return(0,t.get)(e,"position",i.DIRECTION.BOTTOM)}var l=function(p){function l(e){var t=p.call(this,e)||this;return t.container=t.view.getLayer(i.LAYER.FORE).addGroup(),t}return(0,e.__extends)(l,p),Object.defineProperty(l.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),l.prototype.init=function(){},l.prototype.render=function(){var e=this;this.option=this.view.getOptions().legends;if((0,t.get)(this.option,"custom")){var o=this.createCustomLegend(void 0,void 0,void 0,this.option);if(o){o.init();var n=i.LAYER.FORE,r=d(this.option);this.components.push({id:"global-custom",component:o,layer:n,direction:r,type:i.COMPONENT_TYPE.LEGEND,extra:void 0})}}else this.loopLegends(function(t,i,o){var n=e.createFieldLegend(t,i,o);n&&(n.component.init(),e.components.push(n))})},l.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox;var i=(0,t.get)(this.view.getTheme(),["components","legend","margin"],[0,0,0,0]);(0,t.each)(this.components,function(t){var o=t.component,n=t.direction,s=(0,u.getLegendLayout)(n),g=e.getCategoryLegendSizeCfg(s),p=o.get("maxWidth"),c=o.get("maxHeight");o.update({maxWidth:Math.min(g.maxWidth,p||0),maxHeight:Math.min(g.maxHeight,c||0)});var d=o.getLayoutBBox(),l=new r.BBox(d.x,d.y,d.width,d.height),h=(0,a.directionToPosition)(e.view.viewBBox,l,n),v=h[0],m=h[1],f=(0,a.directionToPosition)(e.layoutBBox,l,n),y=f[0],C=f[1],L=0,x=0;n.startsWith("top")||n.startsWith("bottom")?(L=v,x=C):(L=y,x=m),n.indexOf("left")>=0&&(L+=i[3]),n.indexOf("right")>=0&&(L-=i[1]),n.indexOf("top")>=0&&(x+=i[0]),n.indexOf("bottom")>=0&&(x-=i[2]),o.update({x:L,y:x}),e.layoutBBox=e.layoutBBox.cut(l,n)})},l.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var o={};if((0,t.get)(this.option,"custom")){var n="global-custom",r=this.getComponentById(n);if(r){var a=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);(0,s.omit)(a,["container"]),r.component.update(a),o[n]=!0}else{var u=this.createCustomLegend(void 0,void 0,void 0,this.option);if(u){u.init();var g=i.LAYER.FORE,p=d(this.option);this.components.push({id:n,component:u,layer:g,direction:p,type:i.COMPONENT_TYPE.LEGEND,extra:void 0}),o[n]=!0}}}else this.loopLegends(function(i,n,r){var a=e.getId(r.field),u=e.getComponentById(a);if(u){var g=void 0,p=c(e.option,r.field);!1!==p&&((0,t.get)(p,"custom")?g=e.getCategoryCfg(i,n,r,p,!0):r.isLinear?g=e.getContinuousCfg(i,n,r,p):r.isCategory&&(g=e.getCategoryCfg(i,n,r,p))),g&&((0,s.omit)(g,["container"]),u.direction=d(p),u.component.update(g),o[a]=!0)}else{var l=e.createFieldLegend(i,n,r);l&&(l.component.init(),e.components.push(l),o[a]=!0)}});var l=[];(0,t.each)(this.getComponents(),function(e){o[e.id]?l.push(e):e.component.destroy()}),this.components=l},l.prototype.clear=function(){p.prototype.clear.call(this),this.container.clear()},l.prototype.destroy=function(){p.prototype.destroy.call(this),this.container.remove(!0)},l.prototype.getGeometries=function(e){var i=this,o=e.geometries;return(0,t.each)(e.views,function(e){o=o.concat(i.getGeometries(e))}),o},l.prototype.loopLegends=function(e){if(this.view.getRootView()===this.view){var i=this.getGeometries(this.view),o={};(0,t.each)(i,function(i){var n=i.getGroupAttributes();(0,t.each)(n,function(t){var n=t.getScale(t.type);n&&"identity"!==n.type&&!o[n.field]&&(e(i,t,n),o[n.field]=!0)})})}},l.prototype.createFieldLegend=function(e,o,n){var r,a=c(this.option,n.field),s=i.LAYER.FORE,u=d(a);if(!1!==a&&((0,t.get)(a,"custom")?r=this.createCustomLegend(e,o,n,a):n.isLinear?r=this.createContinuousLegend(e,o,n,a):n.isCategory&&(r=this.createCategoryLegend(e,o,n,a))),r)return r.set("field",n.field),{id:this.getId(n.field),component:r,layer:s,direction:u,type:i.COMPONENT_TYPE.LEGEND,extra:{scale:n}}},l.prototype.createCustomLegend=function(e,t,i,n){var r=this.getCategoryCfg(e,t,i,n,!0);return new o.CategoryLegend(r)},l.prototype.createContinuousLegend=function(e,t,i,n){var r=this.getContinuousCfg(e,t,i,n);return new o.ContinuousLegend(r)},l.prototype.createCategoryLegend=function(e,t,i,n){var r=this.getCategoryCfg(e,t,i,n);return new o.CategoryLegend(r)},l.prototype.getContinuousCfg=function(e,i,o,r){var a=o.getTicks(),s=(0,t.find)(a,function(e){return 0===e.value}),p=(0,t.find)(a,function(e){return 1===e.value}),c=a.map(function(e){var t=e.value,n=e.tickValue,r=i.mapping(o.invert(t)).join("");return{value:n,attrValue:r,color:r,scaleValue:t}});s||c.push({value:o.min,attrValue:i.mapping(o.invert(0)).join(""),color:i.mapping(o.invert(0)).join(""),scaleValue:0}),p||c.push({value:o.max,attrValue:i.mapping(o.invert(1)).join(""),color:i.mapping(o.invert(1)).join(""),scaleValue:1}),c.sort(function(e,t){return e.value-t.value});var l={min:(0,t.head)(c).value,max:(0,t.last)(c).value,colors:[],rail:{type:i.type},track:{}};"size"===i.type&&(l.track={style:{fill:"size"===i.type?this.view.getTheme().defaultColor:void 0}}),"color"===i.type&&(l.colors=c.map(function(e){return e.attrValue}));var h=this.container,v=d(r),m=(0,u.getLegendLayout)(v),f=(0,t.get)(r,"title");return f&&(f=(0,t.deepMix)({text:(0,g.getName)(o)},f)),l.container=h,l.layout=m,l.title=f,l.animateOption=n.DEFAULT_ANIMATE_CFG,this.mergeLegendCfg(l,r,"continuous")},l.prototype.getCategoryCfg=function(e,o,r,a,s){var p=this.container,c=(0,t.get)(a,"position",i.DIRECTION.BOTTOM),d=(0,t.get)(this.view.getTheme(),["components","legend",c,"marker"]),l=(0,t.get)(a,"marker"),h=(0,u.getLegendLayout)(c),v=s?(0,u.getCustomLegendItems)(d,l,a.items):(0,u.getLegendItems)(this.view,e,o,d,l),m=(0,t.get)(a,"title");m&&(m=(0,t.deepMix)({text:r?(0,g.getName)(r):""},m));var f=this.getCategoryLegendSizeCfg(h);f.container=p,f.layout=h,f.items=v,f.title=m,f.animateOption=n.DEFAULT_ANIMATE_CFG;var y=this.mergeLegendCfg(f,a,c);y.reversed&&y.items.reverse();var C=(0,t.get)(y,"maxItemWidth");return C&&C<=1&&(y.maxItemWidth=this.view.viewBBox.width*C),y},l.prototype.mergeLegendCfg=function(e,i,o){var n=o.split("-")[0],r=(0,t.get)(this.view.getTheme(),["components","legend",n],{});return(0,t.deepMix)({},r,e,i)},l.prototype.getId=function(e){return this.name+"-"+e},l.prototype.getComponentById=function(e){return(0,t.find)(this.components,function(t){return t.id===e})},l.prototype.getCategoryLegendSizeCfg=function(e){var t=this.view.viewBBox,o=t.width,n=t.height;return"vertical"===e?{maxWidth:o*i.COMPONENT_MAX_VIEW_PERCENTAGE,maxHeight:n}:{maxWidth:o,maxHeight:n*i.COMPONENT_MAX_VIEW_PERCENTAGE}},l}(p.Controller),h=l;exports.default=h;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../constant":"JW8G","../../dependents":"iPWy","../../animate":"UIgk","../../util/bbox":"yW7I","../../util/direction":"xlYl","../../util/helper":"RDFe","../../util/legend":"kAUB","../../util/scale":"YUW9","./base":"g26H"}],"DMC5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("../../constant"),r=require("../../dependents"),n=require("../../util/bbox"),o=require("../../util/direction"),s=require("../../util/helper"),d=require("./base"),a=function(d){function a(t){var e=d.call(this,t)||this;return e.onValueChanged=function(t){var i=t[0],r=t[1];e.updateMinMaxText(i,r),e.view.render(!0)},e.container=e.view.getLayer(i.LAYER.FORE).addGroup(),e}return(0,t.__extends)(a,d),Object.defineProperty(a.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),a.prototype.init=function(){},a.prototype.render=function(){if(this.option=this.view.getOptions().slider,this.option){this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onValueChanged));var t=this.slider.component.get("start")||0,e=this.slider.component.get("end")||1;this.updateMinMaxText(t,e)}else this.slider&&(this.slider.component.destroy(),this.slider=void 0)},a.prototype.layout=function(){if(this.slider){var t=this.view.coordinateBBox.width,e=this.slider.component.getLayoutBBox(),r=new n.BBox(e.x,e.y,Math.min(e.width,t),e.height),s=(0,o.directionToPosition)(this.view.viewBBox,r,i.DIRECTION.BOTTOM),d=(s[0],s[1]),a=(0,o.directionToPosition)(this.view.coordinateBBox,r,i.DIRECTION.BOTTOM),u=a[0];a[1];this.slider.component.update({x:u,y:d,width:t})}},a.prototype.update=function(){this.render()},a.prototype.createSlider=function(){var e=this.getSliderCfg(),n=new r.Slider((0,t.__assign)({container:this.container},e));return n.init(),{component:n,layer:i.LAYER.FORE,direction:i.DIRECTION.BOTTOM,type:i.COMPONENT_TYPE.OTHER}},a.prototype.updateSlider=function(){var t=this.getSliderCfg();return(0,s.omit)(t,["x","y","width","start","end","minText","maxText"]),this.slider.component.update(t),this.slider},a.prototype.getSliderCfg=function(){if((0,e.isObject)(this.option)){var i=(0,t.__assign)({data:this.getData()},(0,e.get)(this.option,"trendCfg",{})),r=this.view.coordinateBBox.width,n=(0,e.deepMix)({},{x:0,y:0,width:r},this.option);return(0,t.__assign)((0,t.__assign)({},n),{trendCfg:i})}return{}},a.prototype.getData=function(){var t=this.view.getOptions().data,e=this.view.getYScales()[0],i=this.view.getGroupScales();if(i.length){var r=i[0],n=r.field,o=r.ticks;return t.reduce(function(t,i){return i[n]===o[0]&&t.push(i[e.field]),t},[])}return t.map(function(t){return t[e.field]||0})},a.prototype.updateMinMaxText=function(t,i){var r=this.view.getOptions().data,n=this.view.getXScale(),o=(0,e.size)(r);if(n&&o){var d=n.field,a=r.reduce(function(t,e){return t.includes(e[d])||t.push(e[d]),t},[]),u=(0,e.size)(a),h=Math.floor(t*(u-1)),l=Math.floor(i*(u-1)),p=(0,e.get)(a,[h]),c=(0,e.get)(a,[l]),f=this.getSliderCfg().formatter;f&&(p=f(p,r[h],h),c=f(c,r[l],l)),this.slider.component.update({minText:p,maxText:c,start:t,end:i}),this.view.filter(n.field,function(t,e){var i=a.indexOf(t);return!(i>-1)||(0,s.isBetween)(i,h,l)})}},a.prototype.getComponents=function(){return this.slider?[this.slider]:[]},a}(d.Controller),u=a;exports.default=u;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../constant":"JW8G","../../dependents":"iPWy","../../util/bbox":"yW7I","../../util/direction":"xlYl","../../util/helper":"RDFe","./base":"g26H"}],"gkcH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),i=require("@antv/util"),e=require("../../dependents"),o=require("../../util/coordinate"),r=require("../../util/graphics"),s=require("../../util/tooltip"),n=require("./base");function a(t){for(var e=[],o=function(o){var r=t[o];(0,i.find)(e,function(t){return t.color===r.color&&t.name===r.name&&t.value===r.value&&t.title===r.title})||e.push(r)},r=0;r<t.length;r++)o(r);return e}var h=function(n){function h(){var t=null!==n&&n.apply(this,arguments)||this;return t.isLocked=!1,t}return(0,t.__extends)(h,n),Object.defineProperty(h.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),h.prototype.init=function(){},h.prototype.isVisible=function(){return!1!==this.view.getOptions().tooltip},h.prototype.render=function(){},h.prototype.showTooltip=function(e){if(this.point=e,this.isVisible()){var o=this.view,r=this.getTooltipItems(e);if(r.length){var s=this.getTitle(r),n={x:r[0].x,y:r[0].y};o.emit("tooltip:show",(0,t.__assign)({items:r,title:s},e));var a=this.getTooltipCfg(),h=a.follow,p=a.showMarkers,l=a.showCrosshairs,u=a.showContent,d=a.marker,g=this.items,y=this.title;if((0,i.isEqual)(y,s)&&(0,i.isEqual)(g,r)?(this.tooltip&&h&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()):(o.emit("tooltip:change",(0,t.__assign)({items:r,title:s},e)),u&&(this.tooltip||this.renderTooltip(),this.tooltip.update((0,i.mix)({},a,{items:r,title:s},h?e:{})),this.tooltip.show()),p&&this.renderTooltipMarkers(r,d)),this.items=r,this.title=s,l){var c=(0,i.get)(a,["crosshairs","follow"],!1);this.renderCrosshairs(c?e:n,a)}}else this.hideTooltip()}},h.prototype.hideTooltip=function(){if(this.getTooltipCfg().follow){var t=this.tooltipMarkersGroup;t&&t.hide();var i=this.xCrosshair,e=this.yCrosshair;i&&i.hide(),e&&e.hide();var o=this.tooltip;o&&o.hide(),this.view.emit("tooltip:hide",{}),this.point=null}else this.point=null},h.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},h.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},h.prototype.isTooltipLocked=function(){return this.isLocked},h.prototype.clear=function(){var t=this.tooltip,i=this.xCrosshair,e=this.yCrosshair,o=this.tooltipMarkersGroup;t&&(t.hide(),t.clear()),i&&i.clear(),e&&e.clear(),o&&o.clear()},h.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},h.prototype.changeVisible=function(t){if(this.visible!==t){var i=this.tooltip,e=this.tooltipMarkersGroup,o=this.xCrosshair,r=this.yCrosshair;t?(i&&i.show(),e&&e.show(),o&&o.show(),r&&r.show()):(i&&i.hide(),e&&e.hide(),o&&o.hide(),r&&r.hide()),this.visible=t}},h.prototype.getTooltipItems=function(t){var e=this.findItemsFromView(this.view,t);if(e.length){for(var o=0,r=e=(0,i.flatten)(e);o<r.length;o++)for(var s=0,n=r[o];s<n.length;s++){var h=n[s],p=h.mappingData,l=p.x,u=p.y;h.x=(0,i.isArray)(l)?l[l.length-1]:l,h.y=(0,i.isArray)(u)?u[u.length-1]:u}if(!1===this.getTooltipCfg().shared&&e.length>1){for(var d=e[0],g=Math.abs(t.y-d[0].y),y=0,c=e;y<c.length;y++){var f=c[y],v=Math.abs(t.y-f[0].y);v<=g&&(d=f,g=v)}e=[d]}return a((0,i.flatten)(e))}return[]},h.prototype.layout=function(){},h.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},h.prototype.getTooltipCfg=function(){var t=this.view,e=t.getOptions().tooltip,o=t.getTheme(),r=(0,i.get)(o,["components","tooltip"],{}),s=(0,i.isUndefined)((0,i.get)(e,"enterable"))?r.enterable:(0,i.get)(e,"enterable");return(0,i.deepMix)({},r,e,{capture:!(!s&&!this.isLocked)})},h.prototype.getTitle=function(t){var i=t[0].title||t[0].name;return this.title=i,i},h.prototype.renderTooltip=function(){var i=this.view.getCanvas(),o={start:{x:0,y:0},end:{x:i.get("width"),y:i.get("height")}},r=this.getTooltipCfg(),s=new e.HtmlTooltip((0,t.__assign)((0,t.__assign)({parent:i.get("el").parentNode,region:o},r),{visible:!1,crosshairs:null}));s.init(),this.tooltip=s},h.prototype.renderTooltipMarkers=function(i,e){for(var o=this.getTooltipMarkersGroup(),r=0,s=i;r<s.length;r++){var n=s[r],a=n.x,h=n.y,p=(0,t.__assign)((0,t.__assign)({fill:n.color,symbol:"circle",shadowColor:n.color},e),{x:a,y:h});o.addShape("marker",{attrs:p})}},h.prototype.renderCrosshairs=function(t,e){var o=(0,i.get)(e,["crosshairs","type"],"x");"x"===o?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,e)):"y"===o?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,e)):"xy"===o&&(this.renderXCrosshairs(t,e),this.renderYCrosshairs(t,e))},h.prototype.renderXCrosshairs=function(t,s){var n=this.getViewWithGeometry(this.view).getCoordinate();if((0,o.isPointInCoordinate)(n,t)){var a,h;if(n.isRect)n.isTransposed?(a={x:n.start.x,y:t.y},h={x:n.end.x,y:t.y}):(a={x:t.x,y:n.end.y},h={x:t.x,y:n.start.y});else{var p=(0,o.getAngleByPoint)(n,t),l=n.getCenter(),u=n.getRadius();h=(0,r.polarToCartesian)(l.x,l.y,u,p),a=l}var d=(0,i.deepMix)({start:a,end:h,container:this.getTooltipCrosshairsGroup()},(0,i.get)(s,"crosshairs",{}),this.getCrosshairsText("x",t,s));delete d.type;var g=this.xCrosshair;g?g.update(d):(g=new e.Crosshair.Line(d)).init(),g.render(),g.show(),this.xCrosshair=g}},h.prototype.renderYCrosshairs=function(t,r){var s=this.getViewWithGeometry(this.view).getCoordinate();if((0,o.isPointInCoordinate)(s,t)){var n,a;if(s.isRect){var h=void 0,p=void 0;s.isTransposed?(h={x:t.x,y:s.end.y},p={x:t.x,y:s.start.y}):(h={x:s.start.x,y:t.y},p={x:s.end.x,y:t.y}),n={start:h,end:p},a="Line"}else n={center:s.getCenter(),radius:(0,o.getDistanceToCenter)(s,t),startAngle:s.startAngle,endAngle:s.endAngle},a="Circle";delete(n=(0,i.deepMix)({container:this.getTooltipCrosshairsGroup()},n,(0,i.get)(r,"crosshairs",{}),this.getCrosshairsText("y",t,r))).type;var l=this.yCrosshair;l?s.isRect&&"circle"===l.get("type")||!s.isRect&&"line"===l.get("type")?(l=new e.Crosshair[a](n)).init():l.update(n):(l=new e.Crosshair[a](n)).init(),l.render(),l.show(),this.yCrosshair=l}},h.prototype.getCrosshairsText=function(t,e,o){var r=(0,i.get)(o,["crosshairs","text"]),s=(0,i.get)(o,["crosshairs","follow"]),n=this.items;if(r){var a=this.getViewWithGeometry(this.view),h=n[0],p=a.getXScale(),l=a.getYScales()[0],u=void 0,d=void 0;if(s){var g=this.view.getCoordinate().invert(e);u=p.invert(g.x),d=l.invert(g.y)}else u=h.data[p.field],d=h.data[l.field];var y="x"===t?u:d;return(0,i.isFunction)(r)?r=r(t,y,n,e):r.content=y,{text:r}}},h.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},h.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):((t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"})).toFront(),this.tooltipMarkersGroup=t),t},h.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||((t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1})).toBack(),this.tooltipCrosshairsGroup=t),t},h.prototype.getTooltipItemsByHitShape=function(t,i,e){var o=[],r=t.container.getShape(i.x,i.y);if(r&&r.get("visible")&&r.get("origin")){var n=r.get("origin").mappingData,a=(0,s.getTooltipItems)(n,t,e);a.length&&o.push(a)}return o},h.prototype.getTooltipItemsByFindData=function(t,i,e){var o=[],r=t.dataArray;t.sort(r);for(var n=0,a=r;n<a.length;n++){var h=a[n],p=(0,s.findDataByPoint)(i,h,t);if(p){var l=t.getElementId(p),u=t.elementsMap[l];if("heatmap"===t.type||u.visible){var d=(0,s.getTooltipItems)(p,t,e);d.length&&o.push(d)}}}return o},h.prototype.findItemsFromView=function(t,i){if(!1===t.getOptions().tooltip)return[];for(var e=[],o=t.geometries,r=this.getTooltipCfg(),s=r.shared,n=r.title,a=0,h=o;a<h.length;a++){var p=h[a];if(p.visible&&!1!==p.tooltipOption){var l=p.type,u=void 0;(u=["point","edge","polygon"].includes(l)?this.getTooltipItemsByHitShape(p,i,n):["area","line","path","heatmap"].includes(l)?this.getTooltipItemsByFindData(p,i,n):!1!==s?this.getTooltipItemsByFindData(p,i,n):this.getTooltipItemsByHitShape(p,i,n)).length&&e.push(u)}}for(var d=0,g=t.views;d<g.length;d++){var y=g[d];e=e.concat(this.findItemsFromView(y,i))}return e},h.prototype.getViewWithGeometry=function(t){var e=this;return t.geometries.length?t:(0,i.find)(t.views,function(t){return e.getViewWithGeometry(t)})},h}(n.Controller),p=h;exports.default=p;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../dependents":"iPWy","../../util/coordinate":"sx3d","../../util/graphics":"L6ru","../../util/tooltip":"yb3W","./base":"g26H"}],"JySZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("../../util/graphics"),a=n(require("./base"));function n(t){return t&&t.__esModule?t:{default:t}}var h=function(a){function n(){return null!==a&&a.apply(this,arguments)||this}return(0,t.__extends)(n,a),n.prototype.show=function(){var t=this.context.view,a=this.context.event,n=t.getTooltipItems({x:a.x,y:a.y});if(!(0,e.isEqual)(n,this.items)&&(this.items=n,n.length)){var h=t.getXScale().field,o=n[0].data[h],r=[],s=t.geometries;if((0,e.each)(s,function(t){if("interval"===t.type||"schema"===t.type){var e=t.getElementsBy(function(t){return t.getData()[h]===o});r=r.concat(e)}}),r.length){var d=t.getCoordinate(),g=r[0].shape.getCanvasBBox(),m=r[0].shape.getCanvasBBox(),l=g;(0,e.each)(r,function(t){var e=t.shape.getCanvasBBox();d.isTransposed?(e.minY<g.minY&&(g=e),e.maxY>m.maxY&&(m=e)):(e.minX<g.minX&&(g=e),e.maxX>m.maxX&&(m=e)),l.x=Math.min(e.minX,l.minX),l.y=Math.min(e.minY,l.minY),l.width=Math.max(e.maxX,l.maxX)-l.x,l.height=Math.max(e.maxY,l.maxY)-l.y});var u=t.backgroundGroup,p=t.coordinateBBox,c=void 0;if(d.isRect){var v=t.getXScale().isLinear?0:.25,x=void 0,f=void 0,y=void 0,X=void 0;d.isTransposed?(x=p.minX,f=Math.min(m.minY,g.minY)-v*m.height,y=p.width,X=l.height+2*v*m.height):(x=Math.min(g.minX,m.minX)-v*g.width,f=Math.min(p.minY,g.minY),y=l.width+2*v*g.width,X=p.height),c=[["M",x,f],["L",x+y,f],["L",x+y,f+X],["L",x,f+X],["Z"]]}else{var M=(0,e.head)(r),Y=(0,e.last)(r),P=(0,i.getAngle)(M.getModel(),d).startAngle,B=(0,i.getAngle)(Y.getModel(),d).endAngle,w=d.getCenter(),C=d.getRadius(),_=d.innerRadius*C;c=(0,i.getSectorPath)(w.x,w.y,C,P,B,_)}this.regionPath?(this.regionPath.attr("path",c),this.regionPath.show()):this.regionPath=u.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:c,fill:"#CCD6EC",opacity:.3}})}}},n.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},n.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),a.prototype.destroy.call(this)},n}(a.default),o=h;exports.default=o;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../util/graphics":"L6ru","./base":"RCAx"}],"peTV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),o=require("@antv/util"),i=e(require("../../base"));function e(t){return t&&t.__esModule?t:{default:t}}var n=function(i){function e(){var t=null!==i&&i.apply(this,arguments)||this;return t.timeStamp=0,t}return(0,t.__extends)(e,i),e.prototype.show=function(){var t=this.context,i=t.event,e=t.view;if(!e.isTooltipLocked()){var n=this.timeStamp,r=+new Date;if(r-n>16){var s=this.location,l={x:i.x,y:i.y};s&&(0,o.isEqual)(s,l)||this.showTooltip(e,l),this.timeStamp=r,this.location=l}}},e.prototype.hide=function(){var t=this.context.view;t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},e.prototype.showTooltip=function(t,o){t.showTooltip(o)},e.prototype.hideTooltip=function(t){t.hideTooltip()},e}(i.default),r=n;exports.default=r;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../base":"RCAx"}],"xXnG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=require("../../util"),o=r(require("./geometry"));function r(e){return e&&e.__esModule?e:{default:e}}var n=function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return(0,e.__extends)(r,o),r.prototype.showTooltip=function(e,o){var r=(0,i.getSilbings)(e);(0,t.each)(r,function(t){var r=(0,i.getSiblingPoint)(e,t,o);t.showTooltip(r)})},r.prototype.hideTooltip=function(e){var o=(0,i.getSilbings)(e);(0,t.each)(o,function(e){e.hideTooltip()})},r}(o.default),u=n;exports.default=u;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../util":"WaBf","./geometry":"peTV"}],"G8YQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),o=s(require("../../base")),i=require("../../../../dependents");function s(t){return t&&t.__esModule?t:{default:t}}var n=function(o){function s(){var t=null!==o&&o.apply(this,arguments)||this;return t.timeStamp=0,t}return(0,t.__extends)(s,o),s.prototype.destroy=function(){o.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},s.prototype.show=function(){var t=this.context.event,o=this.timeStamp,i=+new Date;if(i-o>16){var s=this.location,n={x:t.x,y:t.y};s&&(0,e.isEqual)(s,n)||this.showTooltip(n),this.timeStamp=i,this.location=n}},s.prototype.hide=function(){this.hideTooltip(),this.location=null},s.prototype.showTooltip=function(e){var o=this.context.event.target;if(o&&o.get("tip")){this.tooltip||this.renderTooltip();var i=o.get("tip");this.tooltip.update((0,t.__assign)({title:i},e)),this.tooltip.show()}},s.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},s.prototype.renderTooltip=function(){var t=this.context.view,o=t.canvas,s={start:{x:0,y:0},end:{x:o.get("width"),y:o.get("height")}},n=t.getTheme(),r=(0,e.get)(n,["components","tooltip","domStyles"],{}),p=new i.HtmlTooltip({parent:o.get("el").parentNode,region:s,visible:!1,crosshairs:null,domStyles:r});p.init(),p.setCapture(!1),this.tooltip=p},s}(o.default),r=n;exports.default=r;
},{"tslib":"oMtQ","@antv/util":"rU8N","../../base":"RCAx","../../../../dependents":"iPWy"}],"Sg95":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),a=i(require("../base")),r=require("../util");function i(t){return t&&t.__esModule?t:{default:t}}var n=function(a){function i(){var t=null!==a&&a.apply(this,arguments)||this;return t.stateName="",t}return(0,t.__extends)(i,a),i.prototype.hasState=function(t){return t.hasState(this.stateName)},i.prototype.setElementState=function(t,e){t.setState(this.stateName,e)},i.prototype.setState=function(){this.setStateEnable(!0)},i.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},i.prototype.clearViewState=function(t){var a=this,i=(0,r.getElementsByState)(t,this.stateName);(0,e.each)(i,function(t){a.setElementState(t,!1)})},i}(a.default),s=n;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"RCAx","../util":"WaBf"}],"pfa7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=require("../util"),i=r(require("./state-base"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t){return(0,e.get)(t.get("delegateObject"),"item")}var o=function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return(0,t.__extends)(r,i),r.prototype.isItemIgnore=function(t,e){return!!this.ignoreListItemStates.filter(function(n){return e.hasState(t,n)}).length},r.prototype.setStateByComponent=function(t,e,i){var r=this.context.view,s=t.get("field"),o=(0,n.getElements)(r);this.setElementsStateByItem(o,s,e,i)},r.prototype.setStateByElement=function(t,e){this.setElementState(t,e)},r.prototype.isMathItem=function(t,i,r){var s=this.context.view,o=(0,n.getScaleByField)(s,i),a=(0,n.getElementValue)(t,i);return!(0,e.isNil)(a)&&r.name===o.getText(a)},r.prototype.setElementsStateByItem=function(t,n,i,r){var s=this;(0,e.each)(t,function(t){s.isMathItem(t,n,i)&&t.setState(s.stateName,r)})},r.prototype.setStateEnable=function(t){var e=(0,n.getCurrentElement)(this.context);if(e)(0,n.isElementChange)(this.context)&&this.setStateByElement(e,t);else{var i=(0,n.getDelegationObject)(this.context);if((0,n.isList)(i)){var r=i.item,o=i.component;if(r&&o&&!this.isItemIgnore(r,o)){var a=this.context.event.gEvent;if(a&&a.fromShape&&a.toShape&&s(a.fromShape)===s(a.toShape))return;this.setStateByComponent(o,r,t)}}}},r.prototype.toggle=function(){var t=(0,n.getCurrentElement)(this.context);if(t){var e=t.hasState(this.stateName);this.setElementState(t,!e)}},r.prototype.reset=function(){this.setStateEnable(!1)},r}(i.default),a=o;exports.default=a;
},{"tslib":"oMtQ","@antv/util":"rU8N","../util":"WaBf","./state-base":"Sg95"}],"lRGS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./state"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,e.__extends)(r,t),r.prototype.active=function(){this.setState()},r}(t.default),a=u;exports.default=a;
},{"tslib":"oMtQ","./state":"pfa7"}],"ZlV7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=n(require("../base")),i=require("../util"),r=require("@antv/util");function n(t){return t&&t.__esModule?t:{default:t}}var o=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache={},t}return(0,t.__extends)(n,e),n.prototype.getColorScale=function(t,e){var i=e.geometry.getAttribute("color");return i?t.getScaleByField(i.getFields()[0]):null},n.prototype.getLinkPath=function(t,e){var i=t.shape.getCanvasBBox(),r=e.shape.getCanvasBBox();return[["M",i.maxX,i.minY],["L",r.minX,r.minY],["L",r.minX,r.maxY],["L",i.maxX,i.maxY],["Z"]]},n.prototype.addLinkShape=function(t,e,i){t.addShape({type:"path",attrs:{opacity:.4,fill:e.shape.attr("fill"),path:this.getLinkPath(e,i)}})},n.prototype.linkByElement=function(t){var e=this,n=this.context.view,o=this.getColorScale(n,t);if(o){var a=(0,i.getElementValue)(t,o.field);if(!this.cache[a]){var l=(0,i.getElementsByField)(n,o.field,a),u=this.linkGroup.addGroup();this.cache[a]=u;var p=l.length;(0,r.each)(l,function(t,i){if(i<p-1){var r=l[i+1];e.addLinkShape(u,t,r)}})}}},n.prototype.removeLink=function(t){var e=this.getColorScale(this.context.view,t);if(e){var r=(0,i.getElementValue)(t,e.field);this.cache[r]&&(this.cache[r].remove(),this.cache[r]=null)}},n.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var e=(0,i.getCurrentElement)(t);e&&this.linkByElement(e)},n.prototype.unlink=function(){var t=(0,i.getCurrentElement)(this.context);t&&this.removeLink(t)},n.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear()},n.prototype.destroy=function(){e.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},n}(e.default),a=o;exports.default=a;
},{"tslib":"oMtQ","../base":"RCAx","../util":"WaBf","@antv/util":"rU8N"}],"wi6S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("../util"),n=s(require("./state-base"));function s(t){return t&&t.__esModule?t:{default:t}}var r=function(n){function s(){var t=null!==n&&n.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return(0,t.__extends)(s,n),s.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},s.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},s.prototype.getIntersectElements=function(){var t=null;if((0,i.isMask)(this.context))t=(0,i.getMaskedElements)(this.context,10);else{var e=this.startPoint,n=this.isStarted?this.getCurrentPoint():this.endPoint;if(!e||!n)return;var s={minX:Math.min(e.x,n.x),minY:Math.min(e.y,n.y),maxX:Math.max(e.x,n.x),maxY:Math.max(e.y,n.y)},r=this.context.view;t=(0,i.getIntersectElements)(r,s)}return t},s.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var e=(0,i.getElements)(this.context.view),n=this.getIntersectElements();n&&n.length?this.effectByRecord?this.setSiblingsStateByRecord(n,t):this.setElementsState(n,t,e):this.clear()}},s.prototype.setSiblingsStateByRecord=function(t,n){var s=this,r=this.context.view,a=(0,i.getSilbings)(r),o=t.map(function(t){return t.getModel().data}),l=r.getXScale().field,c=r.getYScales()[0].field;(0,e.each)(a,function(t){var e=(0,i.getElements)(t),r=e.filter(function(t){var e=t.getModel().data;return(0,i.isInRecords)(o,e,l,c)});s.setElementsState(r,n,e)})},s.prototype.setSiblingsState=function(t){var n=this,s=this.context.view,r=(0,i.getSilbings)(s);(0,i.isMask)(this.context)&&(0,e.each)(r,function(e){var s=(0,i.getElements)(e),r=(0,i.getSiblingMaskElements)(n.context,e,10);r&&r.length?n.setElementsState(r,t,s):n.clearViewState(e)})},s.prototype.setElementsState=function(t,i,n){var s=this;(0,e.each)(n,function(e){t.includes(e)?s.setElementState(e,i):s.setElementState(e,!1)})},s.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},s.prototype.clear=function(){var t=this,n=this.context.view;if(this.effectSiblings){var s=(0,i.getSilbings)(n);(0,e.each)(s,function(e){t.clearViewState(e)})}else this.clearViewState(n)},s}(n.default),a=r;exports.default=a;
},{"tslib":"oMtQ","@antv/util":"rU8N","../util":"WaBf","./state-base":"Sg95"}],"kZqN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./range-state"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,e.__extends)(r,t),r.prototype.active=function(){this.setState()},r}(t.default),a=u;exports.default=a;
},{"tslib":"oMtQ","./range-state":"wi6S"}],"bMS1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("../util"),r=n(require("./state-base"));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return(0,t.__extends)(n,r),n.prototype.setStateEnable=function(t){var r=(0,e.getCurrentElement)(this.context);if(r){if(!(0,e.isElementChange)(this.context))return;t?(this.clear(),this.setElementState(r,!0)):this.hasState(r)&&this.setElementState(r,!1)}},n.prototype.toggle=function(){var t=(0,e.getCurrentElement)(this.context);if(t){var r=this.hasState(t);r||this.clear(),this.setElementState(t,!r)}},n.prototype.reset=function(){this.setStateEnable(!1)},n}(r.default),i=s;exports.default=i;
},{"tslib":"oMtQ","../util":"WaBf","./state-base":"Sg95"}],"UDHV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./single-state"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="active",e}return(0,e.__extends)(r,t),r.prototype.active=function(){this.setState()},r}(t.default),i=u;exports.default=i;
},{"tslib":"oMtQ","./single-state":"bMS1"}],"fOC7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearHighlight=i,exports.setHighlightBy=r;var t=require("@antv/util"),e=require("../util"),a="inactive",s="active";function i(i){var r=(0,e.getElements)(i);(0,t.each)(r,function(t){t.hasState(s)&&t.setState(s,!1),t.hasState(a)&&t.setState(a,!1)})}function r(e,i,r){(0,t.each)(e,function(t){i(t)?(t.hasState(a)&&t.setState(a,!1),t.setState(s,r)):(t.hasState(s)&&t.setState(s,!1),t.setState(a,r))})}
},{"@antv/util":"rU8N","../util":"WaBf"}],"YEpe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.STATUS_ACTIVE=exports.STATUS_UNACTIVE=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("../util"),r=require("./highlight-util"),n=a(require("./state")),s=require("../../../constant");function a(t){return t&&t.__esModule?t:{default:t}}var o=s.ELEMENT_STATE.INACTIVE;exports.STATUS_UNACTIVE=o;var u=s.ELEMENT_STATE.ACTIVE;exports.STATUS_ACTIVE=u;var h=function(n){function s(){var t=null!==n&&n.apply(this,arguments)||this;return t.stateName=u,t}return(0,t.__extends)(s,n),s.prototype.setElementsStateByItem=function(t,e,i,r){var n=this;this.setHighlightBy(t,function(t){return n.isMathItem(t,e,i)},r)},s.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(o)&&t.setState(o,!1),t.setState(u,!0)):t.hasState(u)||t.setState(o,!0)},s.prototype.setHighlightBy=function(t,r,n){var s=this;if(n)(0,e.each)(t,function(t){s.setElementHighlight(t,r)});else{var a=(0,i.getElementsByState)(this.context.view,u),h=!0;(0,e.each)(a,function(t){if(!r(t))return h=!1,!1}),h?this.clear():(0,e.each)(t,function(t){r(t)&&(t.hasState(u)&&t.setState(u,!1),t.setState(o,!0))})}},s.prototype.setElementState=function(t,e){var r=this.context.view,n=(0,i.getElements)(r);this.setHighlightBy(n,function(e){return t===e},e)},s.prototype.highlight=function(){this.setState()},s.prototype.clear=function(){var t=this.context.view;(0,r.clearHighlight)(t)},s}(n.default),l=h;exports.default=l;
},{"tslib":"oMtQ","@antv/util":"rU8N","../util":"WaBf","./highlight-util":"fOC7","./state":"pfa7","../../../constant":"JW8G"}],"RAzP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("../util"),i=r(require("./highlight"));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return(0,e.__extends)(r,i),r.prototype.setStateByElement=function(e,i){var r=this.context.view,l=e.geometry.getAttribute("color");if(l){var u=r.getScaleByField(l.getFields()[0]),n=(0,t.getElementValue)(e,u.field),o=(0,t.getElements)(r),s=o.filter(function(e){return(0,t.getElementValue)(e,u.field)===n});this.setHighlightBy(o,function(e){return s.includes(e)},i)}},r}(i.default),u=l;exports.default=u;
},{"tslib":"oMtQ","../util":"WaBf","./highlight":"YEpe"}],"VAcG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("../util"),r=i(require("./highlight"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var o=i?Object.getOwnPropertyDescriptor(t,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=t[u]}return r.default=t,e&&e.set(t,r),r}var u=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return(0,t.__extends)(i,n),i.prototype.setElementHighlight=function(t,e){e(t)?(t.hasState(r.STATUS_UNACTIVE)&&t.setState(r.STATUS_UNACTIVE,!1),t.setState(r.STATUS_ACTIVE,!0)):(t.setState(r.STATUS_UNACTIVE,!0),t.hasState(r.STATUS_ACTIVE)&&t.setState(r.STATUS_ACTIVE,!1))},i.prototype.setStateByElement=function(t,r){var n=this.context.view,i=n.getXScale(),u=(0,e.getElementValue)(t,i.field),o=(0,e.getElements)(n),a=o.filter(function(t){return(0,e.getElementValue)(t,i.field)===u});this.setHighlightBy(o,function(t){return a.includes(t)},r)},i.prototype.toggle=function(){var t=(0,e.getCurrentElement)(this.context);if(t){var r=t.hasState(this.stateName);this.setStateByElement(t,!r)}},i}(r.default),o=u;exports.default=o;
},{"tslib":"oMtQ","../util":"WaBf","./highlight":"YEpe"}],"kEmQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("./highlight-util"),i=r(require("./range-state"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.stateName="active",t}return(0,t.__extends)(r,i),r.prototype.clearViewState=function(t){(0,e.clearHighlight)(t)},r.prototype.highlight=function(){this.setState()},r.prototype.setElementsState=function(t,i,r){(0,e.setHighlightBy)(r,function(e){return t.indexOf(e)>=0},i)},r}(i.default),u=n;exports.default=u;
},{"tslib":"oMtQ","./highlight-util":"fOC7","./range-state":"wi6S"}],"dbq1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("../util"),i=require("./highlight-util"),r=n(require("./single-state"));function n(t){return t&&t.__esModule?t:{default:t}}var u=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.stateName="active",t}return(0,t.__extends)(n,r),n.prototype.highlight=function(){this.setState()},n.prototype.setElementState=function(t,r){var n=this.context.view,u=(0,e.getElements)(n);(0,i.setHighlightBy)(u,function(e){return t===e},r)},n.prototype.clear=function(){var t=this.context.view;(0,i.clearHighlight)(t)},n}(r.default),l=u;exports.default=l;
},{"tslib":"oMtQ","../util":"WaBf","./highlight-util":"fOC7","./single-state":"bMS1"}],"PAUY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./range-state"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,e.__extends)(r,t),r.prototype.selected=function(){this.setState()},r}(t.default),s=u;exports.default=s;
},{"tslib":"oMtQ","./range-state":"wi6S"}],"g6XL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./state"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,e.__extends)(r,t),r.prototype.selected=function(){this.setState()},r}(t.default),s=u;exports.default=s;
},{"tslib":"oMtQ","./state":"pfa7"}],"NJEG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./single-state"));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,e.__extends)(r,t),r.prototype.selected=function(){this.setState()},r}(t.default),u=s;exports.default=u;
},{"tslib":"oMtQ","./single-state":"bMS1"}],"nOM1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),n=o(require("../base")),i=require("../util");function o(t){return t&&t.__esModule?t:{default:t}}var a=function(n){function o(){var t=null!==n&&n.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return(0,t.__extends)(o,n),o.prototype.getTriggerListInfo=function(){var t=(0,i.getDelegationObject)(this.context),e=null;return(0,i.isList)(t)&&(e={item:t.item,list:t.component}),e},o.prototype.getAllowComponents=function(){var t=this,n=this.context.view,o=(0,i.getComponents)(n),a=[];return(0,e.each)(o,function(e){e.isList()&&t.allowSetStateByElement(e)&&a.push(e)}),a},o.prototype.hasState=function(t,e){return t.hasState(e,this.stateName)},o.prototype.clearAllComponentsState=function(){var t=this,n=this.getAllowComponents();(0,e.each)(n,function(e){e.clearItemsState(t.stateName)})},o.prototype.allowSetStateByElement=function(t){var e=t.get("field");if(!e)return!1;if(this.cfg&&this.cfg.componentNames){var n=t.get("name");if(-1===this.cfg.componentNames.indexOf(n))return!1}var o=this.context.view,a=(0,i.getScaleByField)(o,e);return a&&a.isCategory},o.prototype.allowSetStateByItem=function(t,e){var n=this.ignoreItemStates;return!n.length||0===n.filter(function(n){return e.hasState(t,n)}).length},o.prototype.setStateByElement=function(t,e,n){var o=t.get("field"),a=this.context.view,s=(0,i.getScaleByField)(a,o),r=(0,i.getElementValue)(e,o),l=s.getText(r);this.setItemsState(t,l,n)},o.prototype.setStateEnable=function(t){var n=this,o=(0,i.getCurrentElement)(this.context);if(o){var a=this.getAllowComponents();(0,e.each)(a,function(e){n.setStateByElement(e,o,t)})}else{var s=(0,i.getDelegationObject)(this.context);if((0,i.isList)(s)){var r=s.item,l=s.component;this.allowSetStateByElement(l)&&this.allowSetStateByItem(r,l)&&this.setItemState(l,r,t)}}},o.prototype.setItemsState=function(t,n,i){var o=this,a=t.getItems();(0,e.each)(a,function(e){e.name===n&&o.setItemState(t,e,i)})},o.prototype.setItemState=function(t,e,n){t.setItemState(e,this.stateName,n)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.reset=function(){this.setStateEnable(!1)},o.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var e=t.list,n=t.item,i=this.hasState(e,n);this.setItemState(e,n,!i)}},o.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},o}(n.default),s=a;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"RCAx","../util":"WaBf"}],"hwzU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=r(require("./list-state"));function r(t){return t&&t.__esModule?t:{default:t}}var u=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateName="active",t}return(0,t.__extends)(r,e),r.prototype.active=function(){this.setState()},r}(e.default),i=u;exports.default=i;
},{"tslib":"oMtQ","./list-state":"nOM1"}],"AmEp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearList=s;var t=require("@antv/util"),e="inactive",a="active";function s(s){var i=s.getItems();(0,t.each)(i,function(t){s.hasState(t,a)&&s.setItemState(t,a,!1),s.hasState(t,e)&&s.setItemState(t,e,!1)})}
},{"@antv/util":"rU8N"}],"mwfj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=require("./list-highlight-util"),s=a(require("./list-state"));function a(t){return t&&t.__esModule?t:{default:t}}var r="inactive",n="active",o=function(s){function a(){var t=null!==s&&s.apply(this,arguments)||this;return t.stateName=n,t.ignoreItemStates=["unchecked"],t}return(0,t.__extends)(a,s),a.prototype.setItemsState=function(t,e,i){this.setHighlightBy(t,function(t){return t.name===e},i)},a.prototype.setItemState=function(t,e,i){t.getItems();this.setHighlightBy(t,function(t){return t===e},i)},a.prototype.setHighlightBy=function(t,i,s){var a=t.getItems();if(s)(0,e.each)(a,function(e){i(e)?(t.hasState(e,r)&&t.setItemState(e,r,!1),t.setItemState(e,n,!0)):t.hasState(e,n)||t.setItemState(e,r,!0)});else{var o=t.getItemsByState(n),u=!0;(0,e.each)(o,function(t){if(!i(t))return u=!1,!1}),u?this.clear():(0,e.each)(a,function(e){i(e)&&(t.hasState(e,n)&&t.setItemState(e,n,!1),t.setItemState(e,r,!0))})}},a.prototype.highlight=function(){this.setState()},a.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)(0,i.clearList)(t.list);else{var s=this.getAllowComponents();(0,e.each)(s,function(t){t.clearItemsState(n),t.clearItemsState(r)})}},a}(s.default),u=o;exports.default=u;
},{"tslib":"oMtQ","@antv/util":"rU8N","./list-highlight-util":"AmEp","./list-state":"nOM1"}],"BZh9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./list-state"));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="selected",e}return(0,e.__extends)(r,t),r.prototype.selected=function(){this.setState()},r}(t.default),u=s;exports.default=u;
},{"tslib":"oMtQ","./list-state":"nOM1"}],"lGNn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=r(require("./list-state"));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.stateName="unchecked",e}return(0,e.__extends)(r,t),r.prototype.unchecked=function(){this.setState()},r}(t.default),n=u;exports.default=n;
},{"tslib":"oMtQ","./list-state":"nOM1"}],"oEu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=s(require("../base"));function s(t){return t&&t.__esModule?t:{default:t}}var n=function(i){function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return(0,t.__extends)(s,i),s.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},s.prototype.emitEvent=function(t){var e="mask:"+t,i=this.context.view,s=this.context.event;i.emit(e,{target:this.maskShape,shape:this.maskShape,points:this.points,x:s.x,y:s.y})},s.prototype.createMask=function(){var e=this.context.view,i=this.getMaskAttrs();return e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:(0,t.__assign)({fill:"#C5D4EB",opacity:.3},i)})},s.prototype.getMaskPath=function(){return[]},s.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},s.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},s.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},s.prototype.move=function(){if(this.moving&&this.maskShape){var t=this.getCurrentPoint(),i=this.preMovePoint,s=t.x-i.x,n=t.y-i.y,o=this.points;(0,e.each)(o,function(t){t.x+=s,t.y+=n}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},s.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},s.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},s.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},s.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},s.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},s.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,i.prototype.destroy.call(this)},s}(i.default),o=n;exports.default=o;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"RCAx"}],"v87Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),r=require("../util"),i=u(require("./base"));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(i){function u(){var e=null!==i&&i.apply(this,arguments)||this;return e.shapeType="circle",e}return(0,e.__extends)(u,i),u.prototype.getMaskAttrs=function(){var e=this.points,i=(0,t.last)(this.points),u=0,s=0,n=0;if(e.length){var a=e[0];u=(0,r.distance)(a,i)/2,s=(i.x+a.x)/2,n=(i.y+a.y)/2}return{x:s,y:n,r:u}},u}(i.default),n=s;exports.default=n;
},{"tslib":"oMtQ","@antv/util":"rU8N","../util":"WaBf","./base":"oEu5"}],"Jid7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=n(require("./base"));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.shapeType="rect",t}return(0,t.__extends)(n,r),n.prototype.getRegion=function(){var t=this.points;return{start:(0,e.head)(t),end:(0,e.last)(t)}},n.prototype.getMaskAttrs=function(){var t=this.getRegion(),e=t.start,r=t.end;return{x:Math.min(e.x,r.x),y:Math.min(e.y,r.y),width:Math.abs(r.x-e.x),height:Math.abs(r.y-e.y)}},n}(r.default),i=a;exports.default=i;
},{"tslib":"oMtQ","@antv/util":"rU8N","./base":"oEu5"}],"kB9T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=n(require("./rect"));function n(t){return t&&t.__esModule?t:{default:t}}function i(t){t.x=(0,e.clamp)(t.x,0,1),t.y=(0,e.clamp)(t.y,0,1)}var o=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return(0,t.__extends)(n,r),n.prototype.getRegion=function(){var t=null,r=null,n=this.points,o=this.dim,u=this.context.view.getCoordinate(),l=u.invert((0,e.head)(n)),s=u.invert((0,e.last)(n));return this.inPlot&&(i(l),i(s)),"x"===o?(t=u.convert({x:l.x,y:0}),r=u.convert({x:s.x,y:1})):(t=u.convert({x:0,y:l.y}),r=u.convert({x:1,y:s.y})),{start:t,end:r}},n}(r.default),u=o;exports.default=u;
},{"tslib":"oMtQ","@antv/util":"rU8N","./rect":"Jid7"}],"tCTU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),r=u(require("./base"));function u(t){return t&&t.__esModule?t:{default:t}}var n=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return(0,t.__extends)(u,r),u.prototype.getMaskPath=function(){var t=this.points,r=[];return t.length&&((0,e.each)(t,function(t,e){0===e?r.push(["M",t.x,t.y]):r.push(["L",t.x,t.y])}),r.push(["L",t[0].x,t[0].y])),r},u.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},u.prototype.addPoint=function(){this.resize()},u}(r.default),s=n;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","./base":"oEu5"}],"Tguj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("../util"),r=u(require("./path"));function u(e){return e&&e.__esModule?e:{default:e}}var i=function(r){function u(){return null!==r&&r.apply(this,arguments)||this}return(0,e.__extends)(u,r),u.prototype.getMaskPath=function(){var e=this.points;return(0,t.getSpline)(e,!0)},u}(r.default),n=i;exports.default=n;
},{"tslib":"oMtQ","../util":"WaBf","./path":"tCTU"}],"yebE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=s(require("./base"));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(t){function s(){return null!==t&&t.apply(this,arguments)||this}return(0,e.__extends)(s,t),s.prototype.setCursor=function(e){this.context.view.getCanvas().setCursor(e)},s.prototype.default=function(){this.setCursor("default")},s.prototype.pointer=function(){this.setCursor("pointer")},s.prototype.move=function(){this.setCursor("move")},s.prototype.crosshair=function(){this.setCursor("crosshair")},s.prototype.wait=function(){this.setCursor("wait")},s.prototype.help=function(){this.setCursor("help")},s.prototype.text=function(){this.setCursor("text")},s.prototype.eResize=function(){this.setCursor("e-resize")},s.prototype.wResize=function(){this.setCursor("w-resize")},s.prototype.nResize=function(){this.setCursor("n-resize")},s.prototype.sResize=function(){this.setCursor("s-resize")},s.prototype.neResize=function(){this.setCursor("ne-resize")},s.prototype.nwResize=function(){this.setCursor("nw-resize")},s.prototype.seResize=function(){this.setCursor("se-resize")},s.prototype.swResize=function(){this.setCursor("sw-resize")},s.prototype.nsResize=function(){this.setCursor("ns-resize")},s.prototype.ewResize=function(){this.setCursor("ew-resize")},s}(t.default),r=o;exports.default=r;
},{"tslib":"oMtQ","./base":"RCAx"}],"vSVL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=n(require("../base")),r=require("../util");function n(e){return e&&e.__esModule?e:{default:e}}var l=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return(0,e.__extends)(n,i),n.prototype.filterView=function(e,i,r){var n=this;e.getScaleByField(i)&&e.filter(i,r),e.views&&e.views.length&&(0,t.each)(e.views,function(e){n.filterView(e,i,r)})},n.prototype.filter=function(){var e=(0,r.getDelegationObject)(this.context);if(e){var t=this.context.view,i=e.component,n=i.get("field");if((0,r.isList)(e)){if(n){var l=i.getItemsByState("unchecked"),u=(0,r.getScaleByField)(t,n),s=l.map(function(e){return e.name});s.length?this.filterView(t,n,function(e){var t=u.getText(e);return!s.includes(t)}):this.filterView(t,n,null),t.render(!0)}}else if((0,r.isSlider)(e)){var f=i.getValue(),o=f[0],a=f[1];this.filterView(t,n,function(e){return e>=o&&e<=a}),t.render(!0)}}},n}(i.default),u=l;exports.default=u;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"RCAx","../util":"WaBf"}],"e0L8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=r(require("../base")),i=require("../util");function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e,i,r){var n=Math.min(i[e],r[e]),s=Math.max(i[e],r[e]),a=t.range,o=a[0],u=a[1];if(n<o&&(n=o),s>u&&(s=u),n===u&&s===u)return null;var l=t.invert(n),f=t.invert(s);if(t.isCategory){var h=t.values.indexOf(l),d=t.values.indexOf(f),c=t.values.slice(h,d+1);return function(t){return c.includes(t)}}return function(t){return t>=l&&t<=f}}var s=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return(0,t.__extends)(r,e),r.prototype.hasDim=function(t){return this.dims.includes(t)},r.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},r.prototype.filter=function(){var t,e;if((0,i.isMask)(this.context)){var r=this.context.event.target.getCanvasBBox();t={x:r.x,y:r.y},e={x:r.maxX,y:r.maxY}}else{if(!this.isStarted)return;t=this.startPoint,e=this.context.getCurrentPoint()}if(!(Math.abs(t.x-e.x)<5||Math.abs(t.x-e.y)<5)){var s=this.context.view,a=s.getCoordinate(),o=a.invert(e),u=a.invert(t);if(this.hasDim("x")){var l=s.getXScale(),f=n(l,"x",o,u);this.filterView(s,l.field,f)}if(this.hasDim("y")){var h=s.getYScales()[0];f=n(h,"y",o,u);this.filterView(s,h.field,f)}this.reRender(s)}},r.prototype.end=function(){this.isStarted=!1},r.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var e=t.getXScale();this.filterView(t,e.field,null)}if(this.hasDim("y")){var i=t.getYScales()[0];this.filterView(t,i.field,null)}this.reRender(t)},r.prototype.filterView=function(t,e,i){t.filter(e,i)},r.prototype.reRender=function(t){t.render(!0)},r}(e.default),a=s;exports.default=a;
},{"tslib":"oMtQ","../base":"RCAx","../util":"WaBf"}],"oDiC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),r=n(require("./range-filter")),i=require("../util");function n(e){return e&&e.__esModule?e:{default:e}}var u=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return(0,e.__extends)(n,r),n.prototype.filterView=function(e,r,n){var u=(0,i.getSilbings)(e);(0,t.each)(u,function(e){e.filter(r,n)})},n.prototype.reRender=function(e){var r=(0,i.getSilbings)(e);(0,t.each)(r,function(e){e.render(!0)})},n}(r.default),l=u;exports.default=l;
},{"tslib":"oMtQ","@antv/util":"rU8N","./range-filter":"e0L8","../util":"WaBf"}],"AM0x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=r(require("../base")),n=require("../util");function r(e){return e&&e.__esModule?e:{default:e}}var o=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return(0,e.__extends)(r,i),r.prototype.filter=function(){var e=(0,n.getDelegationObject)(this.context),i=this.context.view,r=(0,n.getElements)(i);if((0,n.isMask)(this.context)){var o=(0,n.getMaskedElements)(this.context,10);o&&(0,t.each)(r,function(e){o.includes(e)?e.show():e.hide()})}else if(e){var s=e.component,u=s.get("field");if((0,n.isList)(e)){if(u){var a=s.getItemsByState("unchecked"),l=(0,n.getScaleByField)(i,u),c=a.map(function(e){return e.name});(0,t.each)(r,function(e){var t=(0,n.getElementValue)(e,u),i=l.getText(t);c.indexOf(i)>=0?e.hide():e.show()})}}else if((0,n.isSlider)(e)){var f=s.getValue(),h=f[0],d=f[1];(0,t.each)(r,function(e){var t=(0,n.getElementValue)(e,u);t>=h&&t<=d?e.show():e.hide()})}}},r.prototype.clear=function(){var e=(0,n.getElements)(this.context.view);(0,t.each)(e,function(e){e.show()})},r.prototype.reset=function(){this.clear()},r}(i.default),s=o;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"RCAx","../util":"WaBf"}],"R821":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require("@antv/util"),i=r(require("../base")),n=require("../util");function r(e){return e&&e.__esModule?e:{default:e}}var o=function(i){function r(){var e=null!==i&&i.apply(this,arguments)||this;return e.byRecord=!1,e}return(0,e.__extends)(r,i),r.prototype.filter=function(){(0,n.isMask)(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},r.prototype.filterByRecord=function(){var e=this.context.view,i=(0,n.getMaskedElements)(this.context,10);if(i){var r=e.getXScale().field,o=e.getYScales()[0].field,s=i.map(function(e){return e.getModel().data}),c=(0,n.getSilbings)(e);(0,t.each)(c,function(e){var i=(0,n.getElements)(e);(0,t.each)(i,function(e){var t=e.getModel().data;(0,n.isInRecords)(s,t,r,o)?e.show():e.hide()})})}},r.prototype.filterByBBox=function(){var e=this,i=this.context.view,r=(0,n.getSilbings)(i);(0,t.each)(r,function(i){var r=(0,n.getSiblingMaskElements)(e.context,i,10),o=(0,n.getElements)(i);r&&(0,t.each)(o,function(e){r.includes(e)?e.show():e.hide()})})},r.prototype.reset=function(){var e=(0,n.getSilbings)(this.context.view);(0,t.each)(e,function(e){var i=(0,n.getElements)(e);(0,t.each)(i,function(e){e.show()})})},r}(i.default),s=o;exports.default=s;
},{"tslib":"oMtQ","@antv/util":"rU8N","../base":"RCAx","../util":"WaBf"}],"jrUf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/matrix-util"),o=require("@antv/util"),r=require("../../../util/padding"),n=i(require("../base"));function i(t){return t&&t.__esModule?t:{default:t}}var u=10,s=5,a=function(n){function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return(0,t.__extends)(i,n),i.prototype.getButtonCfg=function(){return(0,o.deepMix)(this.buttonCfg,this.cfg)},i.prototype.drawButton=function(){var e=this.getButtonCfg(),o=this.context.view.foregroundGroup.addGroup({name:e.name}),n=o.addShape({type:"text",name:"button-text",attrs:(0,t.__assign)({text:e.text},e.textStyle)}).getBBox(),i=(0,r.parsePadding)(e.padding),u=o.addShape({type:"rect",name:"button-rect",attrs:(0,t.__assign)({x:n.x-i[3],y:n.y-i[0],width:n.width+i[1]+i[3],height:n.height+i[0]+i[2]},e.style)});u.toBack(),o.on("mouseenter",function(){u.attr(e.activeStyle)}),o.on("mouseleave",function(){u.attr(e.style)}),this.buttonGroup=o},i.prototype.resetPosition=function(){var t=this.context.view.getCoordinate().convert({x:1,y:1}),o=this.buttonGroup,r=o.getBBox(),n=e.ext.transform(null,[["t",t.x-r.width-u,t.y+r.height+s]]);o.setMatrix(n)},i.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},i.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},i.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),n.prototype.destroy.call(this)},i}(n.default),p=a;exports.default=p;
},{"tslib":"oMtQ","@antv/matrix-util":"n7Fk","@antv/util":"rU8N","../../../util/padding":"eanz","../base":"RCAx"}],"nnl6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=i(require("../base")),r=require("../util");function i(t){return t&&t.__esModule?t:{default:t}}var a=4,n=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return(0,t.__extends)(i,e),i.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},i.prototype.drag=function(){if(this.startPoint){var t=this.context.getCurrentPoint(),e=this.context.view,i=this.context.event;this.dragStart?e.emit("drag",{target:i.target,x:i.x,y:i.y}):(0,r.distance)(t,this.startPoint)>a&&(e.emit("dragstart",{target:i.target,x:i.x,y:i.y}),this.dragStart=!0)}},i.prototype.end=function(){if(this.dragStart){var t=this.context.view,e=this.context.event;t.emit("dragend",{target:e.target,x:e.x,y:e.y})}this.starting=!1,this.dragStart=!1},i}(e.default),s=n;exports.default=s;
},{"tslib":"oMtQ","../base":"RCAx","../util":"WaBf"}],"h8eC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),i=require("@antv/matrix-util"),r=require(".."),s=require("../util"),e=5,n=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return(0,t.__extends)(n,r),n.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},n.prototype.move=function(){if(this.starting){var t=this.startPoint,r=this.context.getCurrentPoint();if((0,s.distance)(t,r)>e&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var n=this.context.view,o=i.ext.transform(this.startMatrix,[["t",r.x-t.x,r.y-t.y]]);n.backgroundGroup.setMatrix(o),n.foregroundGroup.setMatrix(o),n.middleGroup.setMatrix(o)}}},n.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},n.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},n}(r.Action),o=n;exports.default=o;
},{"tslib":"oMtQ","@antv/matrix-util":"n7Fk","..":"Nywp","../util":"WaBf"}],"cVDx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tslib"),t=require(".."),i="x",s="y",r=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.dims=[i,s],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return(0,e.__extends)(r,t),r.prototype.hasDim=function(e){return this.dims.includes(e)},r.prototype.getScale=function(e){var t=this.context.view;return"x"===e?t.getXScale():t.getYScales()[0]},r.prototype.resetDim=function(e){var t=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var i=this.getScale(e);t.scale(i.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},r.prototype.reset=function(){this.resetDim(i),this.resetDim(s),this.context.view.render(!0)},r}(t.Action),c=r;exports.default=c;
},{"tslib":"oMtQ","..":"Nywp"}],"kgSA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=n(require("./scale-transform"));function n(t){return t&&t.__esModule?t:{default:t}}var r=function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return(0,t.__extends)(n,i),n.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var i=this.dims;(0,e.each)(i,function(e){var i=t.getScale(e),n=i.min,r=i.max,a=i.values;t.startCache[e]={min:n,max:r,values:a}})},n.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},n.prototype.translate=function(){var t=this;if(this.starting){var i=this.startPoint,n=this.context.view.getCoordinate(),r=this.context.getCurrentPoint(),a=n.invert(i),s=n.invert(r),o=s.x-a.x,c=s.y-a.y,h=this.context.view,l=this.dims;(0,e.each)(l,function(e){t.translateDim(e,{x:-1*o,y:-1*c})}),h.render(!0)}},n.prototype.translateDim=function(t,e){if(this.hasDim(t)){var i=this.getScale(t);i.isLinear&&this.translateLinear(t,i,e)}},n.prototype.translateLinear=function(t,e,i){var n=this.context.view,r=this.startCache[t],a=r.min,s=r.max,o=s-a,c=i[t]*o;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:a,max:s}),n.scale(e.field,{nice:!1,min:a+c,max:s+c})},n.prototype.reset=function(){i.prototype.reset.call(this),this.startPoint=null,this.starting=!1},n}(i.default),a=r;exports.default=a;
},{"tslib":"oMtQ","@antv/util":"rU8N","./scale-transform":"cVDx"}],"vjS8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("tslib"),e=require("@antv/util"),i=o(require("./scale-transform"));function o(t){return t&&t.__esModule?t:{default:t}}var n=function(i){function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.zoomRatio=.05,t}return(0,t.__extends)(o,i),o.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},o.prototype.zoom=function(t){var i=this,o=this.dims;(0,e.each)(o,function(e){i.zoomDim(e,t)}),this.context.view.render(!0)},o.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},o.prototype.zoomDim=function(t,e){if(this.hasDim(t)){var i=this.getScale(t);i.isLinear&&this.zoomLinear(t,i,e)}},o.prototype.zoomLinear=function(t,e,i){var o=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:e.nice,min:e.min,max:e.max});var n=this.cacheScaleDefs[t],a=n.max-n.min,r=e.min,s=e.max,c=i*a,m=r-c,u=s+c,h=(u-m)/a;u>m&&h<100&&h>.01&&o.scale(e.field,{nice:!1,min:r-c,max:s+c})},o}(i.default),a=n;exports.default=a;
},{"tslib":"oMtQ","@antv/util":"rU8N","./scale-transform":"cVDx"}],"WqV7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={Util:!0};exports.Util=void 0;var t=require("./core");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var r=require("./theme/style-sheet/dark"),i=require("./util/theme"),n=ze(require("@antv/g-canvas")),a=ze(require("@antv/g-svg")),o=Ge(require("./geometry/area")),l=Ge(require("./geometry/edge")),g=Ge(require("./geometry/heatmap")),s=Ge(require("./geometry/interval")),c=Ge(require("./geometry/line")),m=Ge(require("./geometry/path")),u=Ge(require("./geometry/point")),h=Ge(require("./geometry/polygon")),d=Ge(require("./geometry/schema"));require("./geometry/shape/area/line"),require("./geometry/shape/area/smooth"),require("./geometry/shape/area/smooth-line"),require("./geometry/shape/edge/arc"),require("./geometry/shape/edge/smooth"),require("./geometry/shape/edge/vhv"),require("./geometry/shape/interval/funnel"),require("./geometry/shape/interval/hollow-rect"),require("./geometry/shape/interval/line"),require("./geometry/shape/interval/pyramid"),require("./geometry/shape/interval/tick"),require("./geometry/shape/line/step"),require("./geometry/shape/point/hollow"),require("./geometry/shape/point/image"),require("./geometry/shape/point/solid"),require("./geometry/shape/schema/box"),require("./geometry/shape/schema/candle"),require("./geometry/shape/polygon/square");var p=Ge(require("./geometry/label/base")),f=Ge(require("./geometry/label/interval")),b=Ge(require("./geometry/label/pie")),v=Ge(require("./geometry/label/polar")),y=require("./geometry/label/layout/pie/distribute"),q=require("./geometry/label/layout/pie/outer"),k=require("./geometry/label/layout/limit-in-canvas"),w=require("./geometry/label/layout/limit-in-shape"),A=require("./geometry/label/layout/overlap"),x=require("./animate/animation/fade"),I=require("./animate/animation/grow-in"),E=require("./animate/animation/path-in"),G=require("./animate/animation/position-update"),L=require("./animate/animation/scale-in"),z=require("./animate/animation/sector-path-update"),O=require("./animate/animation/wave-in"),P=require("./animate/animation/zoom"),C=Ge(require("./facet/circle")),j=Ge(require("./facet/list")),_=Ge(require("./facet/matrix")),F=Ge(require("./facet/mirror")),M=Ge(require("./facet/rect")),S=Ge(require("./facet/tree")),U=Ge(require("./chart/controller/annotation")),D=Ge(require("./chart/controller/axis")),T=Ge(require("./chart/controller/legend")),Y=Ge(require("./chart/controller/slider")),X=Ge(require("./chart/controller/tooltip")),B=Ge(require("./interaction/action/active-region")),N=Ge(require("./interaction/action/component/tooltip/sibling")),R=Ge(require("./interaction/action/component/tooltip/geometry")),W=Ge(require("./interaction/action/component/tooltip/ellipsis-text")),H=Ge(require("./interaction/action/element/active")),J=Ge(require("./interaction/action/element/link-by-color")),K=Ge(require("./interaction/action/element/range-active")),Q=Ge(require("./interaction/action/element/single-active")),V=Ge(require("./interaction/action/element/highlight")),Z=Ge(require("./interaction/action/element/highlight-by-color")),$=Ge(require("./interaction/action/element/highlight-by-x")),ee=Ge(require("./interaction/action/element/range-highlight")),te=Ge(require("./interaction/action/element/single-highlight")),re=Ge(require("./interaction/action/element/range-selected")),ie=Ge(require("./interaction/action/element/selected")),ne=Ge(require("./interaction/action/element/single-selected")),ae=Ge(require("./interaction/action/component/list-active")),oe=Ge(require("./interaction/action/component/list-highlight")),le=Ge(require("./interaction/action/component/list-selected")),ge=Ge(require("./interaction/action/component/list-unchecked")),se=Ge(require("./interaction/action/mask/circle")),ce=Ge(require("./interaction/action/mask/dim-rect")),me=Ge(require("./interaction/action/mask/path")),ue=Ge(require("./interaction/action/mask/rect")),he=Ge(require("./interaction/action/mask/smooth-path")),de=Ge(require("./interaction/action/cursor")),pe=Ge(require("./interaction/action/data/filter")),fe=Ge(require("./interaction/action/data/range-filter")),be=Ge(require("./interaction/action/data/sibling-filter")),ve=Ge(require("./interaction/action/element/filter")),ye=Ge(require("./interaction/action/element/sibling-filter")),qe=Ge(require("./interaction/action/view/button")),ke=Ge(require("./interaction/action/view/drag")),we=Ge(require("./interaction/action/view/move")),Ae=Ge(require("./interaction/action/view/scale-translate")),xe=Ge(require("./interaction/action/view/scale-zoom")),Ie=require("./util/graphics"),Ee=require("./util/transform");function Ge(e){return e&&e.__esModule?e:{default:e}}function Le(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Le=function(){return e},e}function ze(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Le();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=i?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function Oe(e){return e.isInPlot()}function Pe(e){return e.gEvent.preventDefault(),e.gEvent.originalEvent.deltaY>0}(0,t.registerTheme)("dark",(0,i.createThemeByStylesheet)(r.antvDark)),(0,t.registerEngine)("canvas",n),(0,t.registerEngine)("svg",a),(0,t.registerGeometry)("Polygon",h.default),(0,t.registerGeometry)("Interval",s.default),(0,t.registerGeometry)("Schema",d.default),(0,t.registerGeometry)("Path",m.default),(0,t.registerGeometry)("Point",u.default),(0,t.registerGeometry)("Line",c.default),(0,t.registerGeometry)("Area",o.default),(0,t.registerGeometry)("Edge",l.default),(0,t.registerGeometry)("Heatmap",g.default),(0,t.registerGeometryLabel)("base",p.default),(0,t.registerGeometryLabel)("interval",f.default),(0,t.registerGeometryLabel)("pie",b.default),(0,t.registerGeometryLabel)("polar",v.default),(0,t.registerGeometryLabelLayout)("overlap",A.overlap),(0,t.registerGeometryLabelLayout)("distribute",y.distribute),(0,t.registerGeometryLabelLayout)("fixed-overlap",A.fixedOverlap),(0,t.registerGeometryLabelLayout)("limit-in-shape",w.limitInShape),(0,t.registerGeometryLabelLayout)("limit-in-canvas",k.limitInCanvas),(0,t.registerGeometryLabelLayout)("pie-outer",q.pieOuterLabelLayout),(0,t.registerAnimation)("fade-in",x.fadeIn),(0,t.registerAnimation)("fade-out",x.fadeOut),(0,t.registerAnimation)("grow-in-x",I.growInX),(0,t.registerAnimation)("grow-in-xy",I.growInXY),(0,t.registerAnimation)("grow-in-y",I.growInY),(0,t.registerAnimation)("scale-in-x",L.scaleInX),(0,t.registerAnimation)("scale-in-y",L.scaleInY),(0,t.registerAnimation)("wave-in",O.waveIn),(0,t.registerAnimation)("zoom-in",P.zoomIn),(0,t.registerAnimation)("zoom-out",P.zoomOut),(0,t.registerAnimation)("position-update",G.positionUpdate),(0,t.registerAnimation)("sector-path-update",z.sectorPathUpdate),(0,t.registerAnimation)("path-in",E.pathIn),(0,t.registerFacet)("rect",M.default),(0,t.registerFacet)("mirror",F.default),(0,t.registerFacet)("list",j.default),(0,t.registerFacet)("matrix",_.default),(0,t.registerFacet)("circle",C.default),(0,t.registerFacet)("tree",S.default),(0,t.registerComponentController)("axis",D.default),(0,t.registerComponentController)("legend",T.default),(0,t.registerComponentController)("tooltip",X.default),(0,t.registerComponentController)("annotation",U.default),(0,t.registerComponentController)("slider",Y.default),(0,t.registerAction)("tooltip",R.default),(0,t.registerAction)("sibling-tooltip",N.default),(0,t.registerAction)("ellipsis-text",W.default),(0,t.registerAction)("element-active",H.default),(0,t.registerAction)("element-single-active",Q.default),(0,t.registerAction)("element-range-active",K.default),(0,t.registerAction)("element-highlight",V.default),(0,t.registerAction)("element-highlight-by-x",$.default),(0,t.registerAction)("element-highlight-by-color",Z.default),(0,t.registerAction)("element-single-highlight",te.default),(0,t.registerAction)("element-range-highlight",ee.default),(0,t.registerAction)("element-sibling-highlight",ee.default,{effectSiblings:!0,effectByRecord:!0}),(0,t.registerAction)("element-selected",ie.default),(0,t.registerAction)("element-single-selected",ne.default),(0,t.registerAction)("element-range-selected",re.default),(0,t.registerAction)("element-link-by-color",J.default),(0,t.registerAction)("active-region",B.default),(0,t.registerAction)("list-active",ae.default),(0,t.registerAction)("list-selected",le.default),(0,t.registerAction)("list-highlight",oe.default),(0,t.registerAction)("list-unchecked",ge.default),(0,t.registerAction)("legend-item-highlight",oe.default,{componentNames:["legend"]}),(0,t.registerAction)("axis-label-highlight",oe.default,{componentNames:["axis"]}),(0,t.registerAction)("rect-mask",ue.default),(0,t.registerAction)("x-rect-mask",ce.default,{dim:"x"}),(0,t.registerAction)("y-rect-mask",ce.default,{dim:"y"}),(0,t.registerAction)("circle-mask",se.default),(0,t.registerAction)("path-mask",me.default),(0,t.registerAction)("smooth-path-mask",he.default),(0,t.registerAction)("cursor",de.default),(0,t.registerAction)("data-filter",pe.default),(0,t.registerAction)("brush",fe.default),(0,t.registerAction)("brush-x",fe.default,{dims:["x"]}),(0,t.registerAction)("brush-y",fe.default,{dims:["y"]}),(0,t.registerAction)("sibling-filter",be.default),(0,t.registerAction)("sibling-x-filter",be.default),(0,t.registerAction)("sibling-y-filter",be.default),(0,t.registerAction)("element-filter",ve.default),(0,t.registerAction)("element-sibling-filter",ye.default),(0,t.registerAction)("element-sibling-filter-record",ye.default,{byRecord:!0}),(0,t.registerAction)("view-drag",ke.default),(0,t.registerAction)("view-move",we.default),(0,t.registerAction)("scale-translate",Ae.default),(0,t.registerAction)("scale-zoom",xe.default),(0,t.registerAction)("reset-button",qe.default,{name:"reset-button",text:"reset"}),(0,t.registerInteraction)("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),(0,t.registerInteraction)("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),(0,t.registerInteraction)("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),(0,t.registerInteraction)("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),(0,t.registerInteraction)("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),(0,t.registerInteraction)("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),(0,t.registerInteraction)("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),(0,t.registerInteraction)("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),(0,t.registerInteraction)("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),(0,t.registerInteraction)("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),(0,t.registerInteraction)("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),(0,t.registerInteraction)("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(e){return!e.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(e){return!e.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),(0,t.registerInteraction)("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Oe,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Oe,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Oe,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),(0,t.registerInteraction)("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),(0,t.registerInteraction)("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Oe,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:Oe,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Oe,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),(0,t.registerInteraction)("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:Oe,action:"path-mask:start"},{trigger:"mousedown",isEnable:Oe,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),(0,t.registerInteraction)("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),(0,t.registerInteraction)("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),(0,t.registerInteraction)("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),(0,t.registerInteraction)("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),(0,t.registerInteraction)("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),(0,t.registerInteraction)("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]}),(0,t.registerInteraction)("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(e){return Pe(e.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(e){return!Pe(e.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),(0,t.registerInteraction)("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]});var Ce={translate:Ee.translate,rotate:Ee.rotate,zoom:Ee.zoom,transform:Ee.transform,getAngle:Ie.getAngle,polarToCartesian:Ie.polarToCartesian};exports.Util=Ce;
},{"./core":"nKE7","./theme/style-sheet/dark":"iyQ4","./util/theme":"UI8l","@antv/g-canvas":"t7Hs","@antv/g-svg":"UJQO","./geometry/area":"ud6K","./geometry/edge":"OcJQ","./geometry/heatmap":"l7Ps","./geometry/interval":"pbuV","./geometry/line":"dpLF","./geometry/path":"ol19","./geometry/point":"cYeE","./geometry/polygon":"ntoJ","./geometry/schema":"aApN","./geometry/shape/area/line":"HLyn","./geometry/shape/area/smooth":"o14m","./geometry/shape/area/smooth-line":"OYpM","./geometry/shape/edge/arc":"t74H","./geometry/shape/edge/smooth":"igOR","./geometry/shape/edge/vhv":"cRfn","./geometry/shape/interval/funnel":"fC62","./geometry/shape/interval/hollow-rect":"eAl6","./geometry/shape/interval/line":"Lqyk","./geometry/shape/interval/pyramid":"btY1","./geometry/shape/interval/tick":"r72P","./geometry/shape/line/step":"EIaR","./geometry/shape/point/hollow":"GDcg","./geometry/shape/point/image":"hDTS","./geometry/shape/point/solid":"fYXk","./geometry/shape/schema/box":"LSXY","./geometry/shape/schema/candle":"d4Ci","./geometry/shape/polygon/square":"BF3S","./geometry/label/base":"thYg","./geometry/label/interval":"J6bY","./geometry/label/pie":"s3CH","./geometry/label/polar":"glJG","./geometry/label/layout/pie/distribute":"UqdJ","./geometry/label/layout/pie/outer":"h3N3","./geometry/label/layout/limit-in-canvas":"c995","./geometry/label/layout/limit-in-shape":"R6vZ","./geometry/label/layout/overlap":"EOpC","./animate/animation/fade":"P40s","./animate/animation/grow-in":"hEmW","./animate/animation/path-in":"z3Og","./animate/animation/position-update":"tlE4","./animate/animation/scale-in":"c22T","./animate/animation/sector-path-update":"WZc9","./animate/animation/wave-in":"lbJe","./animate/animation/zoom":"OE4E","./facet/circle":"tHvq","./facet/list":"IM7q","./facet/matrix":"ofxg","./facet/mirror":"RNkN","./facet/rect":"fKSw","./facet/tree":"OnfO","./chart/controller/annotation":"W5QM","./chart/controller/axis":"BdLL","./chart/controller/legend":"S6LQ","./chart/controller/slider":"DMC5","./chart/controller/tooltip":"gkcH","./interaction/action/active-region":"JySZ","./interaction/action/component/tooltip/sibling":"xXnG","./interaction/action/component/tooltip/geometry":"peTV","./interaction/action/component/tooltip/ellipsis-text":"G8YQ","./interaction/action/element/active":"lRGS","./interaction/action/element/link-by-color":"ZlV7","./interaction/action/element/range-active":"kZqN","./interaction/action/element/single-active":"UDHV","./interaction/action/element/highlight":"YEpe","./interaction/action/element/highlight-by-color":"RAzP","./interaction/action/element/highlight-by-x":"VAcG","./interaction/action/element/range-highlight":"kEmQ","./interaction/action/element/single-highlight":"dbq1","./interaction/action/element/range-selected":"PAUY","./interaction/action/element/selected":"g6XL","./interaction/action/element/single-selected":"NJEG","./interaction/action/component/list-active":"hwzU","./interaction/action/component/list-highlight":"mwfj","./interaction/action/component/list-selected":"BZh9","./interaction/action/component/list-unchecked":"lGNn","./interaction/action/mask/circle":"v87Y","./interaction/action/mask/dim-rect":"kB9T","./interaction/action/mask/path":"tCTU","./interaction/action/mask/rect":"Jid7","./interaction/action/mask/smooth-path":"Tguj","./interaction/action/cursor":"yebE","./interaction/action/data/filter":"vSVL","./interaction/action/data/range-filter":"e0L8","./interaction/action/data/sibling-filter":"oDiC","./interaction/action/element/filter":"AM0x","./interaction/action/element/sibling-filter":"R821","./interaction/action/view/button":"jrUf","./interaction/action/view/drag":"nnl6","./interaction/action/view/move":"h8eC","./interaction/action/view/scale-translate":"kgSA","./interaction/action/view/scale-zoom":"vjS8","./util/graphics":"L6ru","./util/transform":"X5lU"}],"An8N":[function(require,module,exports) {
module.exports={trainLoss:[1.2337,.9977,.8239,.6876,.564,.4632,.3616,.2808,.2189,.1691,.1302,.1093,.0948,.0794,.0688,.0555,.0578,.0502,.0453,.044,.039,.0418,.0319,.0316,.0295,.03,.029,.0267,.029,.0251,.0267,.0245,.0254,.0227,.0244,.0193,.017,.0221,.0227,.02,.0177,.0187,.019,.0162,.0192,.016,.0094,.0114,.0163,.0124],trainAcc:[.5412,.6468,.7154,.7657,.8082,.8425,.8772,.9059,.9276,.9443,.9583,.9642,.97,.9746,.9783,.9821,.9822,.9846,.9857,.9861,.9878,.9868,.9894,.9909,.9911,.9902,.9911,.992,.9912,.9925,.9926,.9924,.9922,.9936,.9927,.9943,.9946,.9935,.9934,.9941,.995,.9946,.9943,.9957,.9944,.9959,.9976,.9969,.9954,.9961],testLoss:[1.09,1.0333,.8957,.7986,.761,.7999,.7516,.7963,.9033,.9936,1.0091,1.0801,1.0989,1.0581,1.1999,1.283,1.0862,1.2145,1.3014,1.3719,1.2655,1.3722,1.2701,1.3673,1.4607,1.5381,1.1317,1.199,1.2835,1.5476,1.3966,1.4525,1.1637,1.3429,1.2973,1.4054,1.661,1.3949,1.5809,1.3696,1.4094,1.418,1.8126,1.566,1.6408,1.939,1.706,1.8192,1.8603,1.753],testAcc:[.6098,.647,.6952,.7318,.7474,.7577,.7698,.7682,.7665,.7639,.7659,.7765,.7761,.7815,.7807,.7826,.7823,.7928,.7865,.7747,.7768,.7846,.7894,.7816,.7927,.7857,.7929,.7932,.7956,.7867,.7888,.7809,.7896,.7863,.7903,.7876,.7875,.7849,.7922,.7943,.7875,.7839,.7844,.789,.785,.8011,.797,.7994,.7935,.7838]};
},{}],"mTP7":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var r={};if(null!=n)for(var a in n)"default"!==a&&Object.prototype.hasOwnProperty.call(n,a)&&e(r,n,a);return t(r,n),r},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,c=i.length;o<c;o++,a++)r[a]=i[o];return r},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i,o=n(require("@antv/g2")),c=n(require("@tensorflow/tfjs")),d=a(require("../../model/record.json")),l=document.createElement("canvas"),u=["airplane","automobile","bird","cat","deer","dog","frog","horse","ship","truck"];document.getElementById("show-record").onclick=function(){return c.tidy(function(){document.getElementById("record").innerHTML="",(e=document.createElement("h3")).innerText="Accuracy",document.getElementById("record").append(e);var e,t=(a=new o.Chart({container:document.getElementById("record"),autoFit:!1,width:600,height:300})).createView(),n=a.createView(),r=d.default.trainAcc.map(function(e,t){return{epoch:t,trainAcc:e,testAcc:d.default.testAcc[t]}});t.data(r).line().position("epoch*trainAcc").style({stroke:"#5555ff"}),n.data(r).line().position("epoch*testAcc").style({stroke:"#ff5555"}),a.scale({trainAcc:{sync:"value"},testAcc:{sync:"value"}}),a.render(),document.getElementById("record").append(document.createElement("br")),(e=document.createElement("h3")).innerText="Loss",document.getElementById("record").append(e);t=(a=new o.Chart({container:document.getElementById("record"),autoFit:!1,width:600,height:300})).createView(),n=a.createView();var a,i=d.default.trainLoss.map(function(e,t){return{epoch:t,trainLoss:e,testLoss:d.default.testLoss[t]}});t.data(i).line().position("epoch*trainLoss").style({stroke:"#5555ff"}),n.data(i).line().position("epoch*testLoss").style({stroke:"#ff5555"}),a.scale({trainLoss:{sync:"value"},testLoss:{sync:"value"}}),a.render()})},document.getElementById("vgg16").onclick=function(){var e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="application/json,.bin",e.onchange=function(){Array.from(e.files);var t=Array.from(e.files),n=t.find(function(e){return"json"==e.name.split(".").pop()}),a=t.filter(function(e){return"bin"==e.name.split(".").pop()});c.loadLayersModel(c.io.browserFiles(r([n],a))).then(function(e){null!=i&&i.dispose(),(i=e).summary(void 0,void 0,function(e){var t;(t=document.getElementById("model-summary")).append.apply(t,e.split("\n").reduce(function(e,t){return r(e,[t,document.createElement("br")])},[]))})})},e.click()},document.getElementById("load-train").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=JSON.parse(n.result),t=document.createElement("input");t.type="file",t.accept="image/png,image/jpeg,image/bmp",t.onchange=function(){var n=t.files,r=new FileReader;r.addEventListener("loadend",function(){var t=new Image;t.onload=function(){return c.tidy(function(){var n=new Array(10).fill(0).map(function(){return Math.floor(1e4*Math.random())}),r=document.createElement("canvas");r.width=t.width,r.height=t.height;var a=r.getContext("2d");a.drawImage(t,0,0),c.browser.toPixels(c.concat(n.map(function(e){return c.browser.fromPixels(a.getImageData(0,e,r.width,1)).reshape([32,32,3])}),1),document.getElementById("train-set")),n.forEach(function(t,n){document.getElementById("img-"+n).innerText=u[e[t]]})})},t.src=r.result}),r.readAsDataURL(n[0])},t.click()}),n.readAsText(t[0])},e.click()},document.getElementById("show-hyperparameter").onclick=function(){var e=document.createElement("ul"),t=document.createElement("li"),n=document.createElement("li"),r=document.createElement("li");t.innerText="batch size : 64",n.innerText="learning rate : 0.001",r.innerText="optimizer : Adamax",e.append(t,n,r),document.getElementById("hyperparameter").innerHTML="",document.getElementById("hyperparameter").append(e)},document.getElementById("load-test").onclick=function(){var e=document.createElement("input");e.type="file",e.accept="image/png,image/jpeg,image/bmp",e.onchange=function(){var t=e.files,n=new FileReader;n.addEventListener("loadend",function(){var e=new Image;e.onload=function(){l.width=e.width,l.height=e.height,l.getContext("2d").drawImage(e,0,0)},e.src=n.result}),n.readAsDataURL(t[0])},e.click()},document.getElementById("test").onclick=function(){return c.tidy(function(){if(null!=i&&null!=l){var e=l.getContext("2d"),t=c.browser.fromPixels(e.getImageData(0,Number(document.getElementById("test-idx").value),l.width,1)).reshape([32,32,3]),n=i.predict(t.expandDims(0)).squeeze().arraySync();c.browser.toPixels(t,document.getElementById("test-img")),document.getElementById("prediction").innerHTML="";var r=new o.Chart({container:document.getElementById("prediction"),autoFit:!1,width:600,height:300});r.data(u.map(function(e,t){return{label:e,value:n[t]}})).interval().position("label*value"),r.render()}})};
},{"@antv/g2":"WqV7","@tensorflow/tfjs":"R3p7","../../model/record.json":"An8N"}],"B6dB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./q1"),require("./q2"),require("./q3"),require("./q4"),require("./q5");
},{"./q1":"XNpt","./q2":"ocZg","./q3":"qnQs","./q4":"QgSF","./q5":"mTP7"}]},{},["B6dB"], null)
//# sourceMappingURL=src.f10117fe.js.map