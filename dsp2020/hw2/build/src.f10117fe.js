parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"omoA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KernelBackend=exports.DataStorage=exports.EPSILON_FLOAT16=exports.EPSILON_FLOAT32=void 0;const r=1e-7;exports.EPSILON_FLOAT32=r;const e=1e-4;exports.EPSILON_FLOAT16=e;class t{constructor(r,e){this.backend=r,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(r){return this.data.has(r)||this.dataMover.moveData(this.backend,r),this.data.get(r)}set(r,e){this.dataIdsCount++,this.data.set(r,e)}has(r){return this.data.has(r)}delete(r){return this.dataIdsCount--,this.data.delete(r)}numDataIds(){return this.dataIdsCount}}exports.DataStorage=t;class n{time(r){return a("time")}read(r){return a("read")}readSync(r){return a("readSync")}numDataIds(){return a("numDataIds")}disposeData(r){return a("disposeData")}write(r,e,t){return a("write")}move(r,e,t,n){return a("move")}memory(){return a("memory")}floatPrecision(){return a("floatPrecision")}epsilon(){return 32===this.floatPrecision()?r:e}batchMatMul(r,e,t,n){return a("batchMatMul")}fusedBatchMatMul({a:r,b:e,transposeA:t,transposeB:n,bias:u,activation:o,preluActivationWeights:s}){return a("fusedBatchMatMul")}slice(r,e,t){return a("slice")}stridedSlice(r,e,t,n){return a("stridedSlice")}unstack(r,e){return a("unstack")}reverse(r,e){return a("reverse")}concat(r,e){return a("concat")}neg(r){return a("neg")}add(r,e){return a("add")}addN(r){return a("addN")}subtract(r,e){return a("subtract")}multiply(r,e){return a("multiply")}realDivide(r,e){return a("realDivide")}floorDiv(r,e){return a("floorDiv")}sum(r,e){return a("sum")}prod(r,e){return a("prod")}unsortedSegmentSum(r,e,t){return a("unsortedSegmentSum")}argMin(r,e){return a("argMin")}argMax(r,e){return a("argMax")}equal(r,e){return a("equal")}notEqual(r,e){return a("notEqual")}less(r,e){return a("less")}lessEqual(r,e){return a("lessEqual")}greater(r,e){return a("greater")}greaterEqual(r,e){return a("greaterEqual")}logicalNot(r){return a("logicalNot")}logicalAnd(r,e){return a("logicalAnd")}logicalOr(r,e){return a("logicalOr")}where(r){return a("where")}select(r,e,t){return a("select")}topk(r,e,t){return a("topk")}min(r,e){return a("min")}minimum(r,e){return a("minimum")}mod(r,e){return a("mod")}max(r,e){return a("max")}maximum(r,e){return a("maximum")}all(r,e){return a("all")}any(r,e){return a("any")}squaredDifference(r,e){return a("squaredDifference")}ceil(r){return a("ceil")}floor(r){return a("floor")}round(r){return a("round")}sign(r){return a("sign")}isNaN(r){return a("isNaN")}isInf(r){return a("isInf")}isFinite(r){return a("isFinite")}pow(r,e){return a("pow")}exp(r){return a("exp")}expm1(r){return a("expm1")}softmax(r,e){return a("softmax")}log(r){return a("log")}log1p(r){return a("log1p")}sqrt(r){return a("sqrt")}rsqrt(r){return a("rsqrt")}square(r){return a("square")}reciprocal(r){return a("reciprocal")}relu(r){return a("relu")}relu6(r){return a("relu6")}prelu(r,e){return a("prelu")}elu(r){return a("elu")}eluDer(r,e){return a("eluDer")}selu(r){return a("selu")}int(r){return a("int")}clip(r,e,t){return a("clip")}abs(r){return a("abs")}complexAbs(r){return a("complexAbs")}sigmoid(r){return a("sigmoid")}softplus(r){return a("softplus")}sin(r){return a("sin")}cos(r){return a("cos")}tan(r){return a("tan")}asin(r){return a("asin")}acos(r){return a("acos")}atan(r){return a("atan")}atan2(r,e){return a("atan2")}sinh(r){return a("sinh")}cosh(r){return a("cosh")}tanh(r){return a("tanh")}asinh(r){return a("asinh")}acosh(r){return a("acosh")}atanh(r){return a("atanh")}erf(r){return a("erf")}step(r,e){return a("step")}fusedConv2d({input:r,filter:e,convInfo:t,bias:n,activation:u,preluActivationWeights:o}){return a("fusedConv2d")}conv2d(r,e,t){return a("conv2d")}conv2dDerInput(r,e,t){return a("conv2dDerInput")}conv2dDerFilter(r,e,t){return a("conv2dDerFilter")}fusedDepthwiseConv2D({input:r,filter:e,convInfo:t,bias:n,activation:u,preluActivationWeights:o}){return a("fusedDepthwiseConv2D")}depthwiseConv2D(r,e,t){return a("depthwiseConv2D")}depthwiseConv2DDerInput(r,e,t){return a("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(r,e,t){return a("depthwiseConv2DDerFilter")}conv3d(r,e,t){return a("conv3d")}conv3dDerInput(r,e,t){return a("conv3dDerInput")}conv3dDerFilter(r,e,t){return a("conv3dDerFilter")}maxPool(r,e){return a("maxPool")}maxPoolBackprop(r,e,t,n){return a("maxPoolBackprop")}avgPool(r,e){return a("avgPool")}avgPoolBackprop(r,e,t){return a("avgPoolBackprop")}avgPool3d(r,e){return a("avgPool3d")}avgPool3dBackprop(r,e,t){return a("avgPool3dBackprop")}maxPool3d(r,e){return a("maxPool3d")}maxPool3dBackprop(r,e,t,n){return a("maxPool3dBackprop")}reshape(r,e){return a("reshape")}cast(r,e){return a("cast")}tile(r,e){return a("tile")}pad(r,e,t){return a("pad")}transpose(r,e){return a("transpose")}gather(r,e,t){return a("gather")}gatherND(r,e){return a("gatherND")}scatterND(r,e,t){return a("scatterND")}batchToSpaceND(r,e,t){return a("batchToSpaceND")}spaceToBatchND(r,e,t){return a("spaceToBatchND")}resizeBilinear(r,e,t,n){return a("resizeBilinear")}resizeBilinearBackprop(r,e,t){return a("resizeBilinearBackprop")}resizeNearestNeighbor(r,e,t,n){return a("resizeNearestNeighbor")}resizeNearestNeighborBackprop(r,e,t){return a("resizeNearestNeighborBackprop")}batchNorm(r,e,t,n,u,o){return a("batchNorm")}localResponseNormalization4D(r,e,t,n,u){return a("localResponseNormalization4D")}LRNGrad(r,e,t,n,u,o,s){return a("LRNGrad")}multinomial(r,e,t,n){return a("multinomial")}oneHot(r,e,t,n){return a("oneHot")}cumsum(r,e,t,n){return a("cumsum")}nonMaxSuppression(r,e,t,n,u){return a("nonMaxSuppression")}fft(r){return a("fft")}ifft(r){return a("ifft")}complex(r,e){return a("complex")}real(r){return a("real")}imag(r){return a("imag")}cropAndResize(r,e,t,n,u,o){return a("cropAndResize")}depthToSpace(r,e,t){return a("depthToSpace")}split(r,e,t){return a("split")}sparseToDense(r,e,t,n){return a("sparseToDense")}diag(r){return a("diag")}fill(r,e,t){return a("fill")}onesLike(r){return a("onesLike")}zerosLike(r){return a("zerosLike")}linspace(r,e,t){return a("linspace")}dispose(){return a("dispose")}}function a(r){throw new Error(`'${r}' not yet implemented or not found in the registry. `+"This kernel may not be supported by the tfjs backend you have chosen")}exports.KernelBackend=n;
},{}],"Dhsi":[function(require,module,exports) {
"use strict";function t(t){let r=t.length,e=0,n=0;for(;r>0;)n=Math.random()*r|0,e=t[--r],t[r]=t[n],t[n]=e}function r(t,r,e){return Math.max(t,Math.min(r,e))}function e(t){return t%2==0?t:t+1}function n(t){let r=0;for(let e=0;e<t.length;e++)r+=t[e];return r}function o(t,r){const e=Math.random();return r*e+(1-e)*t}function i(t,r){let e=0;for(let n=0;n<t.length;n++){const o=Number(t[n])-Number(r[n]);e+=o*o}return e}function s(t,r){if(!t)throw new Error("string"==typeof r?r:r())}function u(t,r,e=""){s(p(t,r),()=>e+` Shapes ${t} and ${r} must match`)}function a(t){s(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function l(t,r=[],e=!1){if(null==r&&(r=[]),Array.isArray(t)||v(t)&&!e)for(let n=0;n<t.length;++n)l(t[n],r,e);else r.push(t);return r}function f(t){if(0===t.length)return 1;let r=t[0];for(let e=1;e<t.length;e++)r*=t[e];return r}function c(t){return 0===t.length}function p(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==r[e])return!1;return!0}function h(t){return t%1==0}function y(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const r=Math.exp(2*t);return(r-1)/(r+1)}}function x(t){const r=Math.ceil(Math.sqrt(t));return[r,Math.ceil(t/r)]}function m(r){const e=new Uint32Array(r);for(let t=0;t<r;++t)e[t]=t;return t(e),e}function g(t,r){return r<=t.length?t:t+" ".repeat(r-t.length)}function w(t,r=(t=>0),e){return new Promise((n,o)=>{let i=0;const s=()=>{if(t())return void n();const u=r(++i);null!=e&&i>=e?o():setTimeout(s,u)};s()})}function d(t,r){let e=1,n=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)e*=t[i];else if(-1===t[i]){if(-1!==n)throw Error("Shapes can only have 1 implicit size. "+`Found -1 at dim ${n} and dim ${i}`);n=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(-1===n){if(r>0&&r!==e)throw Error(`Size(${r}) must match the product of shape ${t}`);return t}if(0===e)throw Error(`Cannot infer the missing size in [${t}] when `+"there are 0 elements");if(r%e!=0)throw Error("The implicit shape can't be a fractional number. "+`Got ${r} / ${e}`);const o=t.slice();return o[n]=r/e,o}function A(t,r){const e=r.length;return s((t=null==t?r.map((t,r)=>r):[].concat(t)).every(t=>t>=-e&&t<e),()=>`All values in axis param must be in range [-${e}, ${e}) but `+`got axis ${t}`),s(t.every(t=>h(t)),()=>"All values in axis param must be integers but "+`got axis ${t}`),t.map(t=>t<0?e+t:t)}function b(t,r){const e=[],n=[],o=null!=r&&Array.isArray(r)&&0===r.length,i=null==r||o?null:A(r,t).sort();let s=0;for(let u=0;u<t.length;++u){if(null!=i){if(i[s]===u&&1!==t[u])throw new Error(`Can't squeeze axis ${u} since its dim '${t[u]}' is not 1`);(null==i[s]||i[s]>u)&&1===t[u]&&(e.push(t[u]),n.push(u)),i[s]<=u&&s++}1!==t[u]&&(e.push(t[u]),n.push(u))}return{newShape:e,keptDims:n}}function $(t,r){let e=null;if(null==t||"float32"===t)e=new Float32Array(r);else if("int32"===t)e=new Int32Array(r);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);e=new Uint8Array(r)}return e}function E(t,r){let e=null;if(null==t||"float32"===t)e=new Float32Array(r);else if("int32"===t)e=new Int32Array(r);else if("bool"===t)e=new Uint8Array(r);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);e=new Array(r)}return e}function S(t,r){for(let e=0;e<t.length;e++){const n=t[e];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${r} being uploaded contains ${n}.`)}}function F(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function T(t,r){return"complex64"!==r&&(("float32"!==r||"complex64"===t)&&(("int32"!==r||"float32"===t||"complex64"===t)&&("bool"!==r||"bool"!==t)))}function v(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function M(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function U(t){if(null==t)return 0;let r=0;return t.forEach(t=>r+=t.length),r}function I(t){return"string"==typeof t||t instanceof String}function N(t){return"boolean"==typeof t}function k(t){return"number"==typeof t}function z(t){return Array.isArray(t)?z(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":k(t)?"float32":I(t)?"string":N(t)?"bool":"float32"}function D(t){return!!(t&&t.constructor&&t.call&&t.apply)}function q(t,r){for(let e=r;e<t;++e)if(t%e==0)return e;return t}function P(t){const r=t.length;if(r<2)return[];const e=new Array(r-1);e[r-2]=t[r-1];for(let n=r-3;n>=0;--n)e[n]=e[n+1]*t[n+1];return e}function C(t,r,e){const n=new Array;if(1===r.length){const o=r[0];for(let r=0;r<o;r++)n[r]=e[t+r]}else{const o=r[0],i=r.slice(1),s=i.reduce((t,r)=>t*r);for(let r=0;r<o;r++)n[r]=C(t+r*s,i,e)}return n}function L(t,r){if(0===t.length)return r[0];const e=t.reduce((t,r)=>t*r);if(0===e)return[];if(e!==r.length)throw new Error(`[${t}] does not match the input size ${r.length}.`);return C(0,t,r)}function O(t,r){const e=Z(t,r);for(let n=0;n<e.length;n++)e[n]=1;return e}function Z(t,r){if(null==r||"float32"===r||"complex64"===r)return new Float32Array(t);if("int32"===r)return new Int32Array(t);if("bool"===r)return new Uint8Array(t);throw new Error(`Unknown data type ${r}`)}function _(t,r){const e=t.reduce((t,r)=>t*r,1);if(null==r||"float32"===r)return L(t,new Float32Array(e));if("int32"===r)return L(t,new Int32Array(e));if("bool"===r)return L(t,new Uint8Array(e));throw new Error(`Unknown data type ${r}`)}function j(t){t.forEach(r=>{s(Number.isInteger(r)&&r>=0,()=>"Tensor must have a shape comprised of positive integers but got "+`shape [${t}].`)})}function B(t,r,e){if(0===r)return 0;if(1===r)return t[0];let n=t[t.length-1];for(let o=0;o<t.length-1;++o)n+=e[o]*t[o];return n}function G(t,r,e){if(0===r)return[];if(1===r)return[t];const n=new Array(r);for(let o=0;o<n.length-1;++o)n[o]=Math.floor(t/e[o]),t-=n[o]*e[o];return n[n.length-1]=t,n}function V(t){return t&&t.then&&"function"==typeof t.then}Object.defineProperty(exports,"__esModule",{value:!0}),exports.shuffle=t,exports.clamp=r,exports.nearestLargerEven=e,exports.sum=n,exports.randUniform=o,exports.distSquared=i,exports.assert=s,exports.assertShapesMatch=u,exports.assertNonNull=a,exports.flatten=l,exports.sizeFromShape=f,exports.isScalarShape=c,exports.arraysEqual=p,exports.isInt=h,exports.tanh=y,exports.sizeToSquarishShape=x,exports.createShuffledIndices=m,exports.rightPad=g,exports.repeatedTry=w,exports.inferFromImplicitShape=d,exports.parseAxisParam=A,exports.squeezeShape=b,exports.getTypedArrayFromDType=$,exports.getArrayFromDType=E,exports.checkConversionForErrors=S,exports.isValidDtype=F,exports.hasEncodingLoss=T,exports.isTypedArray=v,exports.bytesPerElement=M,exports.bytesFromStringArray=U,exports.isString=I,exports.isBoolean=N,exports.isNumber=k,exports.inferDtype=z,exports.isFunction=D,exports.nearestDivisor=q,exports.computeStrides=P,exports.toNestedArray=L,exports.makeOnesTypedArray=O,exports.makeZerosTypedArray=Z,exports.makeZerosNestedTypedArray=_,exports.assertNonNegativeIntegerDimensions=j,exports.locToIndex=B,exports.indexToLoc=G,exports.isPromise=V;
},{}],"rgHm":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.getQueryParams=r,exports.env=i,exports.setEnvironmentGlobal=g,exports.ENV=exports.Environment=void 0;var e=require("./util_base");const s="tfjsflags";class a{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. `+`Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,s){if(this.flagRegistry[t]={evaluationFn:e,setHook:s},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const s=this.evaluateFlag(t);if((0,e.isPromise)(s))throw new Error(`Flag ${t} cannot be synchronously evaluated. `+"Please use getAsync() instead.");return this.flags[t]=s,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=r(this.global.location.search);if(s in t){t[s].split(",").forEach(t=>{const[e,s]=t.split(":");this.urlFlags[e]=o(e,s)})}}}function r(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...s)=>(l(e,s[0],s[1]),s.join("="))),e}function l(t,e,s){t[decodeURIComponent(e)]=decodeURIComponent(s||"")}function o(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}function i(){return n}exports.Environment=a;let n=null;function g(t){exports.ENV=n=t}exports.ENV=n;
},{"./util_base":"Dhsi"}],"FT5O":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"uQ5B":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var e=arguments[3],t=require("process");let o;function n(){if(null==o){let n;if("undefined"!=typeof window)n=window;else if(void 0!==e)n=e;else if(void 0!==t)n=t;else{if("undefined"==typeof self)throw new Error("Could not find a global object");n=self}o=n}return o}function l(){const e=n();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}function r(e,t){const o=l();if(o.has(e))return o.get(e);{const n=t();return o.set(e,n),o.get(e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getGlobalNamespace=n,exports.getGlobal=r;
},{"process":"FT5O"}],"r3vI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pool=exports.PadV2=exports.OneHot=exports.OnesLike=exports.NonMaxSuppressionV5=exports.NonMaxSuppressionV4=exports.NonMaxSuppressionV3=exports.NotEqual=exports.Negate=exports.Multiply=exports.Mod=exports.MirrorPad=exports.Minimum=exports.Min=exports.Mean=exports.MaxPoolWithArgmax=exports.MaxPool3DBackprop=exports.MaxPool3D=exports.MaxPoolBackprop=exports.MaxPool=exports.Maximum=exports.Max=exports.LRNBackprop=exports.LRN=exports.LogSoftmax=exports.LogicalOr=exports.LogicalNot=exports.LogicalAnd=exports.Log1p=exports.Log=exports.LinSpace=exports.LessEqual=exports.Less=exports.IsNan=exports.IsInf=exports.IsFinite=exports.Imag=exports.IFFT=exports.Identity=exports.GreaterEqual=exports.Greater=exports.GatherNd=exports.GatherV2=exports.FusedBatchNorm=exports.FloorDiv=exports.Floor=exports.FlipLeftRight=exports.Fill=exports.FFT=exports.Expm1=exports.Exp=exports.Equal=exports.Erf=exports.EluGrad=exports.Elu=exports.Div=exports.Dilation2DBackpropFilter=exports.Dilation2DBackpropInput=exports.Dilation2D=exports.Diag=exports.DepthwiseConv2dNativeBackpropInput=exports.DepthwiseConv2dNativeBackpropFilter=exports.DepthwiseConv2dNative=exports.DepthToSpace=exports.CropAndResize=exports.Cumsum=exports.Cosh=exports.Cos=exports.Conv3DBackpropInputV2=exports.Conv3DBackpropFilterV2=exports.Conv3D=exports.Conv2DBackpropInput=exports.Conv2DBackpropFilter=exports.Conv2D=exports.Concat=exports.Complex=exports.ClipByValue=exports.Ceil=exports.Cast=exports.BroadcastTo=exports.BatchToSpaceND=exports.BatchMatMul=exports.AvgPool3DBackprop=exports.AvgPool3D=exports.AvgPoolBackprop=exports.AvgPool=exports.Atan2=exports.Atanh=exports.Atan=exports.Asinh=exports.Asin=exports.ArgMin=exports.ArgMax=exports.Any=exports.All=exports.AddN=exports.Add=exports.Acosh=exports.Acos=exports.Abs=void 0,exports.FusedDepthwiseConv2D=exports.FusedConv2D=exports._FusedMatMul=exports.RotateWithOffset=exports.FromPixels=exports.Step=exports.ZerosLike=exports.UnsortedSegmentSum=exports.Unpack=exports.Unique=exports.Transpose=exports.TopK=exports.Tile=exports.Tanh=exports.Tan=exports.StridedSlice=exports.SparseToDense=exports.Sub=exports.Square=exports.SquaredDifference=exports.Softmax=exports.SplitV=exports.SpaceToBatchND=exports.Sum=exports.Sqrt=exports.Softplus=exports.Sigmoid=exports.Sign=exports.Sinh=exports.Sin=exports.Slice=exports.Selu=exports.SelectV2=exports.ScatterNd=exports.Rsqrt=exports.Round=exports.Reverse=exports.Relu6=exports.ResizeBilinearGrad=exports.ResizeBilinear=exports.ResizeNearestNeighborGrad=exports.ResizeNearestNeighbor=exports.Reshape=exports.Relu=exports.Reciprocal=exports.Real=exports.Range=exports.Prod=exports.Prelu=exports.Pow=void 0;const o="Abs";exports.Abs=o;const t="Acos";exports.Acos=t;const e="Acosh";exports.Acosh=e;const s="Add";exports.Add=s;const r="AddN";exports.AddN=r;const p="All";exports.All=p;const x="Any";exports.Any=x;const n="ArgMax";exports.ArgMax=n;const a="ArgMin";exports.ArgMin=a;const c="Asin";exports.Asin=c;const i="Asinh";exports.Asinh=i;const l="Atan";exports.Atan=l;const u="Atanh";exports.Atanh=u;const d="Atan2";exports.Atan2=d;const D="AvgPool";exports.AvgPool=D;const S="AvgPoolBackprop";exports.AvgPoolBackprop=S;const g="AvgPool3D";exports.AvgPool3D=g;const h="AvgPool3DBackprop";exports.AvgPool3DBackprop=h;const M="BatchMatMul";exports.BatchMatMul=M;const v="BatchToSpaceND";exports.BatchToSpaceND=v;const N="BroadcastTo";exports.BroadcastTo=N;const A="Cast";exports.Cast=A;const B="Ceil";exports.Ceil=B;const C="ClipByValue";exports.ClipByValue=C;const m="Complex";exports.Complex=m;const F="Concat";exports.Concat=F;const R="Conv2D";exports.Conv2D=R;const P="Conv2DBackpropFilter";exports.Conv2DBackpropFilter=P;const k="Conv2DBackpropInput";exports.Conv2DBackpropInput=k;const L="Conv3D";exports.Conv3D=L;const T="Conv3DBackpropFilterV2";exports.Conv3DBackpropFilterV2=T;const I="Conv3DBackpropInputV2";exports.Conv3DBackpropInputV2=I;const f="Cos";exports.Cos=f;const V="Cosh";exports.Cosh=V;const q="Cumsum";exports.Cumsum=q;const E="CropAndResize";exports.CropAndResize=E;const G="DepthToSpace";exports.DepthToSpace=G;const w="DepthwiseConv2dNative";exports.DepthwiseConv2dNative=w;const z="DepthwiseConv2dNativeBackpropFilter";exports.DepthwiseConv2dNativeBackpropFilter=z;const b="DepthwiseConv2dNativeBackpropInput";exports.DepthwiseConv2dNativeBackpropInput=b;const y="Diag";exports.Diag=y;const O="Dilation2D";exports.Dilation2D=O;const U="Dilation2DBackpropInput";exports.Dilation2DBackpropInput=U;const W="Dilation2DBackpropFilter";exports.Dilation2DBackpropFilter=W;const _="Div";exports.Div=_;const H="Elu";exports.Elu=H;const K="EluGrad";exports.EluGrad=K;const Z="Erf";exports.Erf=Z;const j="Equal";exports.Equal=j;const J="Exp";exports.Exp=J;const Q="Expm1";exports.Expm1=Q;const X="FFT";exports.FFT=X;const Y="Fill";exports.Fill=Y;const $="FlipLeftRight";exports.FlipLeftRight=$;const oo="Floor";exports.Floor=oo;const to="FloorDiv";exports.FloorDiv=to;const eo="FusedBatchNorm";exports.FusedBatchNorm=eo;const so="GatherV2";exports.GatherV2=so;const ro="GatherNd";exports.GatherNd=ro;const po="Greater";exports.Greater=po;const xo="GreaterEqual";exports.GreaterEqual=xo;const no="Identity";exports.Identity=no;const ao="IFFT";exports.IFFT=ao;const co="Imag";exports.Imag=co;const io="IsFinite";exports.IsFinite=io;const lo="IsInf";exports.IsInf=lo;const uo="IsNan";exports.IsNan=uo;const Do="Less";exports.Less=Do;const So="LessEqual";exports.LessEqual=So;const go="LinSpace";exports.LinSpace=go;const ho="Log";exports.Log=ho;const Mo="Log1p";exports.Log1p=Mo;const vo="LogicalAnd";exports.LogicalAnd=vo;const No="LogicalNot";exports.LogicalNot=No;const Ao="LogicalOr";exports.LogicalOr=Ao;const Bo="LogSoftmax";exports.LogSoftmax=Bo;const Co="LRN";exports.LRN=Co;const mo="LRNBackprop";exports.LRNBackprop=mo;const Fo="Max";exports.Max=Fo;const Ro="Maximum";exports.Maximum=Ro;const Po="MaxPool";exports.MaxPool=Po;const ko="MaxPoolBackprop";exports.MaxPoolBackprop=ko;const Lo="MaxPool3D";exports.MaxPool3D=Lo;const To="MaxPool3DBackprop";exports.MaxPool3DBackprop=To;const Io="MaxPoolWithArgmax";exports.MaxPoolWithArgmax=Io;const fo="Mean";exports.Mean=fo;const Vo="Min";exports.Min=Vo;const qo="Minimum";exports.Minimum=qo;const Eo="MirrorPad";exports.MirrorPad=Eo;const Go="Mod";exports.Mod=Go;const wo="Multiply";exports.Multiply=wo;const zo="Negate";exports.Negate=zo;const bo="NotEqual";exports.NotEqual=bo;const yo="NonMaxSuppressionV3";exports.NonMaxSuppressionV3=yo;const Oo="NonMaxSuppressionV4";exports.NonMaxSuppressionV4=Oo;const Uo="NonMaxSuppressionV5";exports.NonMaxSuppressionV5=Uo;const Wo="OnesLike";exports.OnesLike=Wo;const _o="OneHot";exports.OneHot=_o;const Ho="PadV2";exports.PadV2=Ho;const Ko="Pool";exports.Pool=Ko;const Zo="Pow";exports.Pow=Zo;const jo="Prelu";exports.Prelu=jo;const Jo="Prod";exports.Prod=Jo;const Qo="Range";exports.Range=Qo;const Xo="Real";exports.Real=Xo;const Yo="Reciprocal";exports.Reciprocal=Yo;const $o="Relu";exports.Relu=$o;const ot="Reshape";exports.Reshape=ot;const tt="ResizeNearestNeighbor";exports.ResizeNearestNeighbor=tt;const et="ResizeNearestNeighborGrad";exports.ResizeNearestNeighborGrad=et;const st="ResizeBilinear";exports.ResizeBilinear=st;const rt="ResizeBilinearGrad";exports.ResizeBilinearGrad=rt;const pt="Relu6";exports.Relu6=pt;const xt="Reverse";exports.Reverse=xt;const nt="Round";exports.Round=nt;const at="Rsqrt";exports.Rsqrt=at;const ct="ScatterNd";exports.ScatterNd=ct;const it="SelectV2";exports.SelectV2=it;const lt="Selu";exports.Selu=lt;const ut="Slice";exports.Slice=ut;const dt="Sin";exports.Sin=dt;const Dt="Sinh";exports.Sinh=Dt;const St="Sign";exports.Sign=St;const gt="Sigmoid";exports.Sigmoid=gt;const ht="Softplus";exports.Softplus=ht;const Mt="Sqrt";exports.Sqrt=Mt;const vt="Sum";exports.Sum=vt;const Nt="SpaceToBatchND";exports.SpaceToBatchND=Nt;const At="SplitV";exports.SplitV=At;const Bt="Softmax";exports.Softmax=Bt;const Ct="SquaredDifference";exports.SquaredDifference=Ct;const mt="Square";exports.Square=mt;const Ft="Sub";exports.Sub=Ft;const Rt="SparseToDense";exports.SparseToDense=Rt;const Pt="StridedSlice";exports.StridedSlice=Pt;const kt="Tan";exports.Tan=kt;const Lt="Tanh";exports.Tanh=Lt;const Tt="Tile";exports.Tile=Tt;const It="TopK";exports.TopK=It;const ft="Transpose";exports.Transpose=ft;const Vt="Unique";exports.Unique=Vt;const qt="Unpack";exports.Unpack=qt;const Et="UnsortedSegmentSum";exports.UnsortedSegmentSum=Et;const Gt="ZerosLike";exports.ZerosLike=Gt;const wt="Step";exports.Step=wt;const zt="FromPixels";exports.FromPixels=zt;const bt="RotateWithOffset";exports.RotateWithOffset=bt;const yt="_FusedMatMul";exports._FusedMatMul=yt;const Ot="FusedConv2D";exports.FusedConv2D=Ot;const Ut="FusedDepthwiseConv2D";exports.FusedDepthwiseConv2D=Ut;
},{}],"yMO5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKernel=o,exports.getGradient=s,exports.getKernelsForBackend=i,exports.registerKernel=a,exports.registerGradient=c,exports.unregisterKernel=l,exports.unregisterGradient=g,exports.copyRegisteredKernels=d;var e=require("./environment"),r=require("./global_util");const n=(0,r.getGlobal)("kernelRegistry",()=>new Map),t=(0,r.getGlobal)("gradRegistry",()=>new Map);function o(e,r){const t=u(e,r);return n.get(t)}function s(e){return t.get(e)}function i(e){const r=n.entries(),t=[];for(;;){const{done:n,value:o}=r.next();if(n)break;const[s,i]=o,[a]=s.split("_");a===e&&t.push(i)}return t}function a(e){const{kernelName:r,backendName:t}=e,o=u(r,t);n.has(o)&&console.warn(`The kernel '${r}' for backend `+`'${t}' is already registered`),n.set(o,e)}function c(r){const{kernelName:n}=r;t.has(n)&&(0,e.env)().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${n}'`),t.set(n,r)}function l(e,r){const t=u(e,r);if(!n.has(t))throw new Error(`The kernel '${e}' for backend `+`'${r}' is not registered`);n.delete(t)}function g(e){if(!t.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);t.delete(e)}function d(e,r){i(e).forEach(e=>{a(Object.assign({},e,{backendName:r}))})}function u(e,r){return`${r}_${e}`}
},{"./environment":"rgHm","./global_util":"uQ5B"}],"UxaK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createScalarValue:!0,toTypedArray:!0,now:!0,fetch:!0,encodeString:!0,decodeString:!0};exports.createScalarValue=a,exports.toTypedArray=f,exports.now=i,exports.fetch=c,exports.encodeString=l,exports.decodeString=p;var r=require("./environment"),t=o(require("./util_base"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(t,a,u):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function a(e,r){return"string"===r?l(e):f([e],r)}function u(e,r){return e instanceof Float32Array&&"float32"===r||e instanceof Int32Array&&"int32"===r||e instanceof Uint8Array&&"bool"===r}function f(e,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=t.flatten(e)),(0,r.env)().getBool("DEBUG")&&t.checkConversionForErrors(e,n),u(e,n))return e;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(e);if("int32"===n)return new Int32Array(e);if("bool"===n){const r=new Uint8Array(e.length);for(let t=0;t<r.length;++t)0!==Math.round(e[t])&&(r[t]=1);return r}throw new Error(`Unknown data type ${n}`)}function i(){return(0,r.env)().platform.now()}function c(e,t){return(0,r.env)().platform.fetch(e,t)}function l(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.encode(e,t)}function p(e,t="utf-8"){return t=t||"utf-8",(0,r.env)().platform.decode(e,t)}Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});
},{"./environment":"rgHm","./util_base":"Dhsi"}],"AQQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkComputationForErrors=n,exports.Logger=exports.Profiler=void 0;var e=r(require("./util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var i=n?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(o,l,i):o[l]=e[l]}return o.default=e,r&&r.set(e,o),o}class o{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new l)}profileKernel(e,t,r){let o;const l=this.backendTimer.time(()=>{o=r()});for(let i=0;i<o.length;i++){const t=o[i];t.data().then(r=>{n(r,t.dtype,e)})}return{kernelName:e,outputs:o,inputs:t,timeMs:l.then(e=>e.kernelMs),extraInfo:l.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:o,inputs:n,extraInfo:l}=e;r.forEach(e=>{Promise.all([e.data(),o,l]).then(r=>{this.logger.logKernelProfile(t,e,r[0],r[1],n,r[2])})})}}function n(e,t,r){if("float32"!==t)return!1;for(let o=0;o<e.length;o++){const t=e[o];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${r}'`),!0}return!1}exports.Profiler=o;class l{logKernelProfile(t,r,o,n,l,i){const s="number"==typeof n?e.rightPad(`${n}ms`,9):n.error,c=e.rightPad(t,25),a=r.rank,u=r.size,f=e.rightPad(r.shape.toString(),14);let p="";for(const e in l){const t=l[e];if(null!=t){const o=t.shape||r.shape,n=o.length;p+=`${e}: ${n}D ${n>0?o:""} `}}console.log(`%c${c}\t%c${s}\t%c${a}D ${f}\t%c${u}\t%c${p}\t%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}exports.Logger=l;
},{"./util":"UxaK"}],"akbf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFilteredNodesXToY=r,exports.backpropagateGradients=o;var t=n(require("./util"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=o?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function r(t,e,n){const r={},o={};for(let a=0;a<e.length;a++)r[e[a].id]=!0;for(let a=0;a<t.length;a++){const n=t[a],i=n.inputs;for(const t in i){const s=i[t];let u=!1;for(let t=0;t<e.length;t++)if(r[s.id]){n.outputs.forEach(t=>r[t.id]=!0),u=!0,o[n.id]=!0;break}if(u)break}}const i={};i[n.id]=!0;const s={};for(let a=t.length-1;a>=0;a--){const e=t[a],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(i[e.outputs[t].id]){for(const t in n)i[n[t].id]=!0,s[e.id]=!0;break}}const u=[];for(let a=0;a<t.length;a++){const e=t[a];if(o[e.id]&&s[e.id]){const t={};for(const o in e.inputs){const n=e.inputs[o];r[n.id]&&(t[o]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,u.push(n)}}return u}function o(e,n,r,o){for(let i=n.length-1;i>=0;i--){const s=n[i],u=[];if(s.outputs.forEach(t=>{const n=e[t.id];null!=n?u.push(n):u.push(null)}),null==s.gradient)throw new Error("Cannot compute gradient: gradient function not found "+`for ${s.kernelName}.`);const a=s.gradient(u);for(const n in s.inputs){if(!(n in a))throw new Error(`Cannot backprop through input ${n}. `+`Available gradients found: ${Object.keys(a)}.`);const i=r(()=>a[n]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`${n} must have 'float32' dtype, but has '${i.dtype}'`);const u=s.inputs[n];if(!t.arraysEqual(i.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input `+`'${n}' has shape '${i.shape}', which does not match `+`the shape of the input '${u.shape}'`);if(null==e[u.id])e[u.id]=i;else{const t=e[u.id];e[u.id]=o(t,i),t.dispose()}}}}
},{"./util":"UxaK"}],"rJt4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensorToString=o;var e=require("./util");const t=20,r=3,n=7;function o(t,r,n,o){const l=(0,e.computeStrides)(r),i=s(t,r,n,l),c=r.length,p=u(t,r,n,l,i),a=["Tensor"];return o&&(a.push(`  dtype: ${n}`),a.push(`  rank: ${c}`),a.push(`  shape: [${r}]`),a.push("  values:")),a.push(p.map(e=>"    "+e).join("\n")),a.join("\n")}function s(t,r,n,o){const s=(0,e.sizeFromShape)(r),i=o[o.length-1],u=new Array(i).fill(0),p=r.length,a="complex64"===n?c(t):t;if(p>1)for(let e=0;e<s/i;e++){const t=e*i;for(let e=0;e<i;e++)u[e]=Math.max(u[e],l(a[t+e],0,n).length)}return u}function l(t,r,o){let s;return s=Array.isArray(t)?`${parseFloat(t[0].toFixed(n))} + `+`${parseFloat(t[1].toFixed(n))}j`:(0,e.isString)(t)?`'${t}'`:"bool"===o?i(t):parseFloat(t.toFixed(n)).toString(),(0,e.rightPad)(s,r)}function i(e){return 0===e?"false":"true"}function u(e,n,o,s,p,a=!0){const f="complex64"===o?2:1,h=n[0],m=n.length;if(0===m){if("complex64"===o){return[l(c(e)[0],0,o)]}return"bool"===o?[i(e[0])]:[e[0].toString()]}if(1===m){if(h>t){const t=r*f;let n=Array.from(e.slice(0,t)),s=Array.from(e.slice((h-r)*f,h*f));return"complex64"===o&&(n=c(n),s=c(s)),["["+n.map((e,t)=>l(e,p[t],o)).join(", ")+", ..., "+s.map((e,t)=>l(e,p[h-r+t],o)).join(", ")+"]"]}return["["+("complex64"===o?c(e):Array.from(e)).map((e,t)=>l(e,p[t],o)).join(", ")+"]"]}const g=n.slice(1),x=s.slice(1),d=s[0]*f,y=[];if(h>t){for(let t=0;t<r;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,!1))}y.push("...");for(let t=h-r;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}}else for(let t=0;t<h;t++){const r=t*d,n=r+d;y.push(...u(e.slice(r,n),g,o,x,p,t===h-1))}const j=2===m?",":"";y[0]="["+y[0]+j;for(let t=1;t<y.length-1;t++)y[t]=" "+y[t]+j;let F=",\n";for(let t=2;t<m;t++)F+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":F),y}function c(e){const t=[];for(let r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}
},{"./util":"UxaK"}],"Zqvm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTensorTracker=h,exports.setOpHandler=d,exports.setDeprecationWarningFn=p,exports.Variable=exports.Tensor=exports.TensorBuffer=void 0;var t=require("./tensor_format"),e=r(require("./util"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=s();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=i?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,e&&e.set(t,r),r}class i{constructor(t,s,r){if(this.dtype=s,this.shape=t.slice(),this.size=e.sizeFromShape(t),null!=r){const t=r.length;e.assert(t===this.size,()=>`Length of values '${t}' does not match the size `+`inferred by the shape '${this.size}'.`)}if("complex64"===s)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||e.getArrayFromDType(s,this.size),this.strides=(0,e.computeStrides)(t)}set(t,...s){0===s.length&&(s=[0]),e.assert(s.length===this.rank,()=>`The number of provided coordinates (${s.length}) must `+`match the rank (${this.rank})`);const r=this.locToIndex(s);this.values[r]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e]){const e=`Requested out of range element at ${t}. `+`  Buffer shape=${this.shape}`;throw new Error(e)}e++}let s=t[t.length-1];for(let r=0;r<t.length-1;++r)s+=this.strides[r]*t[r];return this.values[s]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let s=0;s<t.length-1;++s)e+=this.strides[s]*t[s];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let s=0;s<e.length-1;++s)e[s]=Math.floor(t/this.strides[s]),t-=e[s]*this.strides[s];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return n().makeTensor(this.values,this.shape,this.dtype)}}exports.TensorBuffer=i;let n=null,a=null,o=null;function h(t){n=t}function d(t){a=t}function p(t){o=t}class l{constructor(t,s,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=s||"float32",this.size=e.sizeFromShape(t),this.strides=(0,e.computeStrides)(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return a.buffer(this.shape,this.dtype,t)}bufferSync(){return a.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return(0,e.toNestedArray)(this.shape,t)}arraySync(){return(0,e.toNestedArray)(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const t=n().read(this.dataId);if("string"===this.dtype){const r=await t;try{return r.map(t=>e.decodeString(t))}catch(s){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=n().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>e.decodeString(t))}catch(s){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await n().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(n().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return a.print(this,t)}clone(){return this.throwIfDisposed(),a.clone(this)}toString(e=!1){const s=this.dataSync();return(0,t.tensorToString)(s,this.shape,this.dtype,e)}cast(t){return this.throwIfDisposed(),a.cast(this,t)}variable(t=!0,e,s){return this.throwIfDisposed(),n().makeVariable(this,t,e,s)}}exports.Tensor=l,Object.defineProperty(l,Symbol.hasInstance,{value:t=>!!t&&null!=t.data&&null!=t.dataSync&&null!=t.throwIfDisposed});class u extends l{constructor(t,e,s,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and `+`previous value (${this.dtype}) must match`);if(!e.arraysEqual(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and `+`previous value (${this.shape}) must match`);n().disposeTensor(this),this.dataId=t.dataId,n().incRef(this,null)}dispose(){n().disposeVariable(this),this.isDisposedInternal=!0}}exports.Variable=u,Object.defineProperty(u,Symbol.hasInstance,{value:t=>t instanceof l&&null!=t.assign&&t.assign instanceof Function});
},{"./tensor_format":"rJt4","./util":"UxaK"}],"v4dC":[function(require,module,exports) {
"use strict";var o,t,n,e,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.upcastType=r,exports.sumOutType=c,exports.Rank=void 0,exports.Rank=o,function(o){o.R0="R0",o.R1="R1",o.R2="R2",o.R3="R3",o.R4="R4",o.R5="R5",o.R6="R6"}(o||(exports.Rank=o={})),function(o){o.float32="float32",o.int32="int32",o.bool="int32",o.complex64="complex64"}(t||(t={})),function(o){o.float32="float32",o.int32="int32",o.bool="bool",o.complex64="complex64"}(n||(n={})),function(o){o.float32="float32",o.int32="float32",o.bool="float32",o.complex64="complex64"}(e||(e={})),function(o){o.float32="complex64",o.int32="complex64",o.bool="complex64",o.complex64="complex64"}(l||(l={}));const i={float32:e,int32:t,bool:n,complex64:l};function r(o,t){if("string"===o||"string"===t){if("string"===o&&"string"===t)return"string";throw new Error(`Can not upcast ${o} with ${t}`)}return i[o][t]}function c(o){return r(o,"int32")}
},{}],"vUHI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTypesMatch=n,exports.assertTypesMatch=s,exports.isTensorInList=o,exports.getTensorsInContainer=i;var t=require("./tensor"),e=require("./types"),r=require("./util");function n(t,r){if(t.dtype===r.dtype)return[t,r];const n=(0,e.upcastType)(t.dtype,r.dtype);return[t.cast(n),r.cast(n)]}function s(t,e){(0,r.assert)(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and`+` second(${e.dtype}) input must match`)}function o(t,e){return e.some(e=>e.id===t.id)}function i(t){const e=[];return u(t,e,new Set),e}function u(e,r,n){if(null==e)return;if(e instanceof t.Tensor)return void r.push(e);if(!p(e))return;const s=e;for(const t in s){const e=s[t];n.has(e)||(n.add(e),u(e,r,n))}}function p(t){return Array.isArray(t)||"object"==typeof t}
},{"./tensor":"Zqvm","./types":"v4dC","./util":"UxaK"}],"tmUz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOrMakeEngine=y,exports.add=k,exports.ENGINE=exports.Engine=void 0;var e=require("./backends/backend"),t=require("./environment"),s=require("./global_util"),n=require("./kernel_names"),r=require("./kernel_registry"),a=require("./profiler"),i=require("./tape"),o=require("./tensor"),c=require("./tensor_util"),h=l(require("./util"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=n?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,t&&t.set(e,s),s}class u{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class p{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new u}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t];if(await this.initializeBackend(s).success)return void(await this.setBackend(s))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make `+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been `+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,s=1){return e in this.registryFactory?(console.warn(`${e} backend was already registered. `+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:s},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:s}=this.initializeBackend(e);if(!(s?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new a.Profiler(this.backendInstance),!0}setupRegisteredKernels(){(0,r.getKernelsForBackend)(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){(0,r.getKernelsForBackend)(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(t){const s=this.registryFactory[t];if(null==s)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=s.factory();if(!r||r instanceof e.KernelBackend||"function"!=typeof r.then)return this.registry[t]=r,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,s=r.then(s=>!(e<this.pendingBackendInitId)&&(this.registry[t]=s,this.pendingBackendInit=null,!0)).catch(s=>!(e<this.pendingBackendInitId)&&(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(s.stack||s.message),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}}catch(n){return console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const s=e[t],{success:n,asyncInit:r}=this.initializeBackend(s);if(r||n)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const s=this.state.tensorInfo.get(t),n=s.backend,r=this.readSync(t);n.disposeData(t),s.backend=e,e.move(t,r,s.shape,s.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let s,n=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");n=e}return this.scopedRun(()=>this.startScope(n),()=>this.endScope(s),()=>((s=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,t,s){e();try{const e=s();return t(),e}catch(n){throw t(),n}}nextTensorId(){return p.nextTensorId++}nextVariableId(){return p.nextVariableId++}clone(e){const t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),s={x:e};return this.addTapeNode(this.state.activeScope.name,s,[t],e=>({x:()=>{const t={x:e},s={dtype:"float32"};return g.runKernelFunc(t=>t.cast(e,"float32"),t,null,n.Cast,s)}}),[],{}),t}runKernel(e,t,s,n,r){return this.runKernelFunc(null,t,null,e,s,n,r)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,s){const n=this.backend.numDataIds();let r=0;s.forEach(e=>{r+="complex64"===e.dtype?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=n-t-r-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak `+`(${i} data ids) after running '${e}'`)}runKernelFunc(e,t,s,n,a,i,o){let c,h=[];const d=this.isTapeOn();null==n&&(n=null!=this.state.activeScope?this.state.activeScope.name:"");const l=this.state.numBytes,u=this.state.numTensors;let p;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const f=(0,r.getKernel)(n,this.backendName);let y,g;if(null!=f)p=(()=>{const e=this.backend.numDataIds();y=f.kernelFunc({inputs:t,attrs:a,backend:this.backend});const s=Array.isArray(y)?y:[y];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,e,s);const r=s.map(({dataId:e,shape:t,dtype:s})=>this.makeTensorFromDataId(e,t,s));if(d){let e=this.getTensorsForGradient(n,t,r);if(null==e){null==o&&(o=[]);const t=r.filter((e,t)=>o[t]);e=(i||[]).slice().concat(t)}h=this.saveTensorsForBackwardMode(e)}return r});else{const t=e=>{d&&(h=e.map(e=>this.keep(this.clone(e))))};p=(()=>{const s=this.backend.numDataIds();y=this.tidy(()=>e(this.backend,t));const r=Array.isArray(y)?y:[y];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(n,s,r),r})}return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(g=this.profiler.profileKernel(n,t,()=>p()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),c=g.outputs):c=p()}),d&&this.addTapeNode(n,t,c,s,h,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:n,bytesAdded:this.state.numBytes-l,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(e=>null!=t[e]?t[e].shape:null),outputShapes:c.map(e=>e.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(y)?c:c[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,s){const n=(0,r.getGradient)(e);if(null!=n){const e=n.inputsToSave||[],r=n.outputsToSave||[];let a;n.saveAllInputs?(h.assert(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(t).map(e=>t[e])):a=e.map(e=>t[e]);const i=s.filter((e,t)=>r[t]);return a.concat(i)}return null}makeTensor(e,t,s,n){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",n=n||this.backend;let r=e;"string"===s&&h.isString(e[0])&&(r=e.map(e=>h.encodeString(e)));const a=n.write(r,t,s),i=new o.Tensor(t,s,a,this.nextTensorId());if(this.incRef(i,n),"string"===s){const e=this.state.tensorInfo.get(a),t=(0,h.bytesFromStringArray)(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return i}makeTensorFromDataId(e,t,s,n){s=s||"float32";const r=new o.Tensor(t,s,e,this.nextTensorId());return this.incRef(r,n),r}makeVariable(e,t=!0,s,n){s=s||this.nextVariableId().toString(),null!=n&&n!==e.dtype&&(e=e.cast(n));const r=new o.Variable(e,t,s,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}incRef(e,t){const s=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===s){this.state.numDataBuffers++;let s=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(s=e.size*h.bytesPerElement(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:s,refCount:0}),this.state.numBytes+=s}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof o.Variable||this.track(e)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;const t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const n of this.state.activeProfile.kernels)n.kernelTimeMs=await n.kernelTimeMs,n.extraInfo=await n.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,s,n,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:s,saved:a},c=(0,r.getGradient)(e);null!=c&&(n=c.gradFunc),null!=n&&(o.gradient=(e=>(e=e.map((e,t)=>{if(null==e){const e=s[t],n=h.makeZerosTypedArray(e.size,e.dtype);return this.makeTensor(n,e.shape,e.dtype)}return e}),n(e.length>1?e:e[0],a,i)))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=(0,c.getTensorsInContainer)(e),s=new Set(t.map(e=>e.id));for(let r=0;r<this.state.activeScope.track.length;r++){const e=this.state.activeScope.track[r];e.kept||s.has(e.id)||e.dispose()}const n=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==n.id||this.track(e)})}gradients(e,t,s,n=!1){if(h.assert(t.length>0,()=>"gradients() received an empty list of xs."),null!=s&&"float32"!==s.dtype)throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));h.assert(r instanceof o.Tensor,()=>"The result y returned by f() must be a tensor.");const a=(0,i.getFilteredNodesXToY)(this.state.activeTape,t,r);if(!n&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const e={};e[r.id]=null==s?f(r.shape):s,(0,i.backpropagateGradients)(e,a,e=>this.tidy(e),k);const n=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(const t of e.saved)t.dispose()}),this.state.activeTape=null),{value:r,grads:n}})}customGrad(e){return h.assert(h.isFunction(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let s;h.assert(t.every(e=>e instanceof o.Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const n={};return t.forEach((e,t)=>{n[t]=e}),this.runKernelFunc((n,r)=>(s=e(...t,r),h.assert(s.value instanceof o.Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),h.assert(h.isFunction(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),n,(e,n)=>{const r=s.gradFunc(e,n),a=Array.isArray(r)?r:[r];h.assert(a.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),h.assert(a.every(e=>e instanceof o.Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const i={};return a.forEach((e,t)=>{i[t]=(()=>e)}),i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=(0,h.now)(),s=await this.backend.time(e);return s.wallMs=(0,h.now)()-t,s}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new u;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function f(e){const t=(0,h.makeOnesTypedArray)((0,h.sizeFromShape)(e),"float32");return g.makeTensor(t,e,"float32")}function y(){const e=(0,s.getGlobalNamespace)();if(null==e._tfengine){const s=new t.Environment(e);e._tfengine=new p(s)}return(0,t.setEnvironmentGlobal)(e._tfengine.ENV),(0,o.setTensorTracker)(()=>e._tfengine),e._tfengine}exports.Engine=p,p.nextTensorId=0,p.nextVariableId=0;const g=y();function k(e,t){const s={a:e,b:t};return g.runKernelFunc((s,n)=>{const r=s.add(e,t);return n([e,t]),r},s,null,n.Add)}exports.ENGINE=g;
},{"./backends/backend":"omoA","./environment":"rgHm","./global_util":"uQ5B","./kernel_names":"r3vI","./kernel_registry":"yMO5","./profiler":"AQQY","./tape":"akbf","./tensor":"Zqvm","./tensor_util":"vUHI","./util":"UxaK"}],"z8l0":[function(require,module,exports) {
"use strict";function e(){return"undefined"!=typeof navigator&&null!=navigator}function i(){if(e()){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function o(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isMobile=i,exports.isBrowser=o;
},{}],"sKWZ":[function(require,module,exports) {
var process = require("process");
var e=require("process");require("./engine");var r=o(require("./device_util")),t=require("./environment");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(t,i,a):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}const i=(0,t.env)();i.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),i.registerFlag("IS_BROWSER",()=>r.isBrowser()),i.registerFlag("IS_NODE",()=>void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node),i.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),i.registerFlag("PROD",()=>!1),i.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>i.getBool("DEBUG")),i.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),i.registerFlag("IS_TEST",()=>!1);
},{"./engine":"tmUz","./device_util":"z8l0","./environment":"rgHm","process":"FT5O"}],"x0Hg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inferShape=o,exports.convertToTensor=a,exports.convertToTensorArray=u;var r=require("./engine"),e=require("./environment"),t=require("./tensor"),n=require("./util");function o(r,t){let o=r;if((0,n.isTypedArray)(r))return"string"===t?[]:[r.length];if(!Array.isArray(r))return[];const i=[];for(;Array.isArray(o)||(0,n.isTypedArray)(o)&&"string"!==t;)i.push(o.length),o=o[0];return Array.isArray(r)&&(0,e.env)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&s(r,i,[]),i}function s(r,e,t){if(t=t||[],!Array.isArray(r)&&!(0,n.isTypedArray)(r))return void(0,n.assert)(0===e.length,()=>`Element arr[${t.join("][")}] is a primitive, `+`but should be an array/TypedArray of ${e[0]} elements`);(0,n.assert)(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, `+`but is an array of ${r.length} elements`),(0,n.assert)(r.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} `+`elements, but has ${r.length} elements`);const o=e.slice(1);for(let n=0;n<r.length;++n)s(r[n],o,t.concat(n))}function i(r,e,t,n){if(null!=r&&("numeric"!==r&&r!==e||"numeric"===r&&"string"===e))throw new Error(`Argument '${t}' passed to '${n}' must `+`be ${r} tensor, but got ${e} tensor`)}function a(e,s,a,u="numeric"){if(e instanceof t.Tensor)return i(u,e.dtype,s,a),e;let l=(0,n.inferDtype)(e);if("string"!==l&&["bool","int32","float32"].indexOf(u)>=0&&(l=u),i(u,l,s,a),null==e||!(0,n.isTypedArray)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${s}' passed to '${a}' must be a `+`Tensor or TensorLike, but got '${r}'`)}const y=o(e,l);(0,n.isTypedArray)(e)||Array.isArray(e)||(e=[e]);const f="string"!==l?(0,n.toTypedArray)(e,l):(0,n.flatten)(e,[],!0);return r.ENGINE.makeTensor(f,y,l)}function u(r,e,t,n="numeric"){if(!Array.isArray(r))throw new Error(`Argument ${e} passed to ${t} must be a `+"`Tensor[]` or `TensorLike[]`");return r.map((r,n)=>a(r,`${e}[${n}]`,t),n)}
},{"./engine":"tmUz","./environment":"rgHm","./tensor":"Zqvm","./util":"UxaK"}],"rO1i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.op=n,exports.OP_SCOPE_SUFFIX=void 0;var e=require("../engine"),t=require("../util");const o="__op";function n(n){const r=Object.keys(n);if(1!==r.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+`${r.length} keys.`);let i=r[0];const s=n[i];i.endsWith("_")&&(i=i.substring(0,i.length-1)),i+=o;const c=(...o)=>{e.ENGINE.startScope(i);try{const r=s(...o);return(0,t.isPromise)(r)&&console.error("Cannot return a Promise inside of tidy."),e.ENGINE.endScope(r),r}catch(n){throw e.ENGINE.endScope(null),n}};return Object.defineProperty(c,"name",{value:i,configurable:!0}),c}exports.OP_SCOPE_SUFFIX=o;
},{"../engine":"tmUz","../util":"UxaK"}],"BDDu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.complex=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=p(require("../util")),o=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var p=n?Object.getOwnPropertyDescriptor(e,o):null;p&&(p.get||p.set)?Object.defineProperty(t,o,p):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function u(o,a){const p=(0,t.convertToTensor)(o,"real","complex"),u=(0,t.convertToTensor)(a,"imag","complex");n.assertShapesMatch(p.shape,u.shape,`real and imag shapes, ${p.shape} and ${u.shape}, `+"must match in call to tf.complex().");const c={real:p,imag:u};return e.ENGINE.runKernelFunc(e=>e.complex(p,u),c,null,r.Complex)}const c=(0,o.op)({complex_:u});exports.complex=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"N5j4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeTensor=s;var e=require("../engine"),r=require("../util");function s(s,o,t,a){if(null==a&&(a=(0,r.inferDtype)(s)),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,r.isTypedArray)(s)&&!Array.isArray(s)&&"number"!=typeof s&&"boolean"!=typeof s&&"string"!=typeof s)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=o){(0,r.assertNonNegativeIntegerDimensions)(o);const e=(0,r.sizeFromShape)(o),s=(0,r.sizeFromShape)(t);(0,r.assert)(e===s,()=>`Based on the provided shape, [${o}], the tensor should have `+`${e} values but has ${s}`);for(let a=0;a<t.length;++a){const e=t[a],s=a!==t.length-1||e!==(0,r.sizeFromShape)(o.slice(a));(0,r.assert)(t[a]===o[a]||!s,()=>"Error creating a new Tensor. Inferred shape "+`(${t}) does not match the provided `+`shape (${o}). `)}}return(0,r.isTypedArray)(s)||Array.isArray(s)||(s=[s]),o=o||t,s="string"!==a?(0,r.toTypedArray)(s,a):(0,r.flatten)(s,[],!0),e.ENGINE.makeTensor(s,o,a)}
},{"../engine":"tmUz","../util":"UxaK"}],"tCGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor=t;var e=require("../tensor_util_env"),r=require("./tensor_ops_util");function t(t,n,o){const s=(0,e.inferShape)(t,o);return(0,r.makeTensor)(t,n,s,o)}
},{"../tensor_util_env":"x0Hg","./tensor_ops_util":"N5j4"}],"s0q7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DTYPE_VALUE_SIZE_MAP=void 0;const t={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};exports.DTYPE_VALUE_SIZE_MAP=t;
},{}],"cfBw":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"hMTg":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"fbtd":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"HgFv":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"cfBw","ieee754":"hMTg","isarray":"fbtd","buffer":"HgFv"}],"KMZR":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.encodeWeights=a,exports.decodeWeights=s,exports.concatenateTypedArrays=f,exports.stringByteLength=y,exports.arrayBufferToBase64String=p,exports.base64StringToArrayBuffer=u,exports.concatenateArrayBuffers=c,exports.basename=h,exports.getModelArtifactsInfoForJSON=d,exports.getFloat16Decoder=b;var t=require("../ops/complex"),n=require("../ops/tensor"),r=require("../util"),o=require("./types");const i=4;async function a(e,t){const n=[],r=[],o=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let a=0;a<o.length;++a){const s=o[a],f=Array.isArray(e)?e[a].tensor:e[s];if("float32"!==f.dtype&&"int32"!==f.dtype&&"bool"!==f.dtype&&"string"!==f.dtype&&"complex64"!==f.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${f.dtype}`);const l={name:s,shape:f.shape,dtype:f.dtype};if("string"===f.dtype){const e=new Promise(async e=>{const t=await f.bytes(),n=t.reduce((e,t)=>e+t.length,0)+i*t.length,r=new Uint8Array(n);let o=0;for(let a=0;a<t.length;a++){const e=t[a],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,o),o+=i,r.set(e,o),o+=e.length}e(r)});r.push(e)}else r.push(f.data());null!=t&&(l.group=t),n.push(l)}return{data:f(await Promise.all(r)),specs:n}}function s(e,a){const s={};let f,l=0;for(const y of a){const a=y.name,p=y.dtype,u=y.shape,c=(0,r.sizeFromShape)(u);let h;if("quantization"in y){const t=y.quantization;if("uint8"===t.dtype||"uint16"===t.dtype){if(!("min"in t&&"scale"in t))throw new Error(`Weight ${y.name} with quantization ${t.dtype} `+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==t.dtype)throw new Error(`Weight ${y.name} has unknown `+`quantization dtype ${t.dtype}. `+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==p)throw new Error(`Weight ${y.name} is quantized with ${t.dtype} `+`which only supports weights of type float32 not ${p}.`)}const n=o.DTYPE_VALUE_SIZE_MAP[t.dtype],r=e.slice(l,l+c*n),i="uint8"===t.dtype?new Uint8Array(r):new Uint16Array(r);if("float32"===p)if("uint8"===t.dtype||"uint16"===t.dtype){h=new Float32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];h[e]=n*t.scale+t.min}}else{if("float16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type float32.");void 0===f&&(f=b()),h=f(i)}else{if("int32"!==p)throw new Error(`Unsupported dtype in weight '${a}': ${p}`);if("uint8"!==t.dtype&&"uint16"!==t.dtype)throw new Error(`Unsupported quantization type ${t.dtype} `+"for weight type int32.");h=new Int32Array(i.length);for(let e=0;e<i.length;e++){const n=i[e];h[e]=Math.round(n*t.scale+t.min)}}l+=c*n}else if("string"===p){const t=(0,r.sizeFromShape)(y.shape);h=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(l,l+i))[0];l+=i;const n=new Uint8Array(e.slice(l,l+t));h.push(n),l+=t}}else{const r=o.DTYPE_VALUE_SIZE_MAP[p],i=e.slice(l,l+c*r);if("float32"===p)h=new Float32Array(i);else if("int32"===p)h=new Int32Array(i);else if("bool"===p)h=new Uint8Array(i);else{if("complex64"!==p)throw new Error(`Unsupported dtype in weight '${a}': ${p}`);{h=new Float32Array(i);const e=new Float32Array(h.length/2),r=new Float32Array(h.length/2);for(let t=0;t<e.length;t++)e[t]=h[2*t],r[t]=h[2*t+1];const o=(0,n.tensor)(e,u,"float32"),f=(0,n.tensor)(r,u,"float32");s[a]=(0,t.complex)(o,f),o.dispose(),f.dispose()}}l+=c*r}"complex64"!==p&&(s[a]=(0,n.tensor)(h,u,p))}return s}function f(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});const r=new Uint8Array(t);let o=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength}),r.buffer}const l=void 0!==e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function y(t){return l?e.byteLength(t):new Blob([t]).size}function p(t){if(l)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,o=n.length;e<o;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function u(t){if(l){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function c(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});const n=new Uint8Array(t);let r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function h(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function d(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:y(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:y(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function w(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function g(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function A(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function b(){const e=w(),t=g(),n=A();return r=>{const o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let a=0;a<r.length;a++){const o=r[a],s=e[n[o>>10]+(1023&o)]+t[o>>10];i[a]=s}return new Float32Array(o)}}
},{"../ops/complex":"BDDu","../ops/tensor":"tCGm","../util":"UxaK","./types":"s0q7","buffer":"HgFv"}],"p5dc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLoadHandlers=exports.getSaveHandlers=exports.registerLoadRouter=exports.registerSaveRouter=exports.IORouterRegistry=void 0;class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==e.instance&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,s){return e.getHandlers(t,"load",s)}static getHandlers(t,s,r){const a=[];return("load"===s?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(e=>{const s=e(t,r);null!==s&&a.push(s)}),a}}exports.IORouterRegistry=e;const t=t=>e.registerSaveRouter(t);exports.registerSaveRouter=t;const s=t=>e.registerLoadRouter(t);exports.registerLoadRouter=s;const r=t=>e.getSaveHandlers(t);exports.getSaveHandlers=r;const a=(t,s)=>e.getLoadHandlers(t,s);exports.getLoadHandlers=a;
},{}],"L6uM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteDatabase=d,exports.browserIndexedDB=h,exports.BrowserIndexedDBManager=exports.indexedDBRouter=exports.BrowserIndexedDB=void 0,require("../flags");var e=require("../environment"),o=require("./io_utils"),r=require("./router_registry");const t="tensorflowjs",n=1,s="models_store",c="model_info_store";async function d(){const e=l();return new Promise((o,r)=>{const n=e.deleteDatabase(t);n.onsuccess=(()=>o()),n.onerror=(e=>r(e))})}function l(){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const o="undefined"==typeof window?self:window,r=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB||o.shimIndexedDB;if(null==r)throw new Error("The current browser does not appear to support IndexedDB.");return r}function a(e){const o=e.result;o.createObjectStore(s,{keyPath:"modelPath"}),o.createObjectStore(c,{keyPath:"modelPath"})}class i{constructor(e){if(this.indexedDB=l(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,r){return new Promise((e,d)=>{const l=this.indexedDB.open(t,n);l.onupgradeneeded=(()=>a(l)),l.onsuccess=(()=>{const t=l.result;if(null==r){const o=t.transaction(s,"readonly"),r=o.objectStore(s).get(this.modelPath);r.onsuccess=(()=>{if(null==r.result)return t.close(),d(new Error(`Cannot find model with path '${this.modelPath}' `+"in IndexedDB."));e(r.result.modelArtifacts)}),r.onerror=(e=>(t.close(),d(r.error))),o.oncomplete=(()=>t.close())}else{const n=(0,o.getModelArtifactsInfoForJSON)(r),l=t.transaction(c,"readwrite");let a=l.objectStore(c);const i=a.put({modelPath:this.modelPath,modelArtifactsInfo:n});let u;i.onsuccess=(()=>{const o=(u=t.transaction(s,"readwrite")).objectStore(s).put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:n});o.onsuccess=(()=>e({modelArtifactsInfo:n})),o.onerror=(e=>{const r=(a=l.objectStore(c)).delete(this.modelPath);r.onsuccess=(()=>(t.close(),d(o.error))),r.onerror=(e=>(t.close(),d(o.error)))})}),i.onerror=(e=>(t.close(),d(i.error))),l.oncomplete=(()=>{null==u?t.close():u.oncomplete=(()=>t.close())})}}),l.onerror=(e=>d(l.error))})}}exports.BrowserIndexedDB=i,i.URL_SCHEME="indexeddb://";const u=o=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(o)&&o.startsWith(i.URL_SCHEME)?h(o.slice(i.URL_SCHEME.length)):null;function h(e){return new i(e)}function m(e){return e.startsWith(i.URL_SCHEME)?e.slice(i.URL_SCHEME.length):e}exports.indexedDBRouter=u,r.IORouterRegistry.registerSaveRouter(u),r.IORouterRegistry.registerLoadRouter(u);class f{constructor(){this.indexedDB=l()}async listModels(){return new Promise((e,o)=>{const r=this.indexedDB.open(t,n);r.onupgradeneeded=(()=>a(r)),r.onsuccess=(()=>{const t=r.result,n=t.transaction(c,"readonly"),s=n.objectStore(c).getAll();s.onsuccess=(()=>{const o={};for(const e of s.result)o[e.modelPath]=e.modelArtifactsInfo;e(o)}),s.onerror=(e=>(t.close(),o(s.error))),n.oncomplete=(()=>t.close())}),r.onerror=(e=>o(r.error))})}async removeModel(e){return e=m(e),new Promise((o,r)=>{const d=this.indexedDB.open(t,n);d.onupgradeneeded=(()=>a(d)),d.onsuccess=(()=>{const t=d.result,n=t.transaction(c,"readwrite"),l=n.objectStore(c),a=l.get(e);let i;a.onsuccess=(()=>{if(null==a.result)return t.close(),r(new Error(`Cannot find model with path '${e}' `+"in IndexedDB."));{const n=l.delete(e),c=()=>{const n=(i=t.transaction(s,"readwrite")).objectStore(s).delete(e);n.onsuccess=(()=>o(a.result.modelArtifactsInfo)),n.onerror=(e=>r(a.error))};n.onsuccess=c,n.onerror=(e=>(c(),t.close(),r(a.error)))}}),a.onerror=(e=>(t.close(),r(a.error))),n.oncomplete=(()=>{null==i?t.close():i.oncomplete=(()=>t.close())})}),d.onerror=(e=>r(d.error))})}}exports.BrowserIndexedDBManager=f;
},{"../flags":"sKWZ","../environment":"rgHm","./io_utils":"KMZR","./router_registry":"p5dc"}],"tJ2N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.purgeLocalStorageArtifacts=d,exports.browserLocalStorage=f,exports.BrowserLocalStorageManager=exports.localStorageRouter=exports.BrowserLocalStorage=void 0,require("../flags");var e=require("../environment"),t=require("../util"),o=require("./io_utils"),r=require("./router_registry");const s="/",i="tensorflowjs_models",a="info",n="model_topology",l="weight_specs",h="weight_data",g="model_metadata";function d(){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("purgeLocalStorageModels() cannot proceed because local storage is unavailable in the current environment.");const t=window.localStorage,o=[];for(let e=0;e<t.length;++e){const r=t.key(e),a=i+s;if(r.startsWith(a)&&r.length>a.length){t.removeItem(r);const e=S(r);-1===o.indexOf(e)&&o.push(e)}}return o}function c(e){return{info:[i,e,a].join(s),topology:[i,e,n].join(s),weightSpecs:[i,e,l].join(s),weightData:[i,e,h].join(s),modelMetadata:[i,e,g].join(s)}}function S(e){const t=e.split(s);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(s)}function m(e){return e.startsWith(w.URL_SCHEME)?e.slice(w.URL_SCHEME.length):e}class w{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=c(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const r=JSON.stringify(e.modelTopology),s=JSON.stringify(e.weightSpecs),i=(0,o.getModelArtifactsInfoForJSON)(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,(0,o.arrayBufferToBase64String)(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),{modelArtifactsInfo:i}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: `+"size quota being exceeded is a possible cause of this failure: "+`modelTopologyBytes=${i.modelTopologyBytes}, `+`weightSpecsBytes=${i.weightSpecsBytes}, `+`weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${this.modelPath}' `+"is missing.");t.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==s)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' `+"are missing.");t.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,t.userDefinedMetadata=e.userDefinedMetadata}const a=this.LS.getItem(this.keys.weightData);if(null==a)throw new Error("In local storage, the binary weight values of model "+`'${this.modelPath}' are missing.`);return t.weightData=(0,o.base64StringToArrayBuffer)(a),t}}exports.BrowserLocalStorage=w,w.URL_SCHEME="localstorage://";const y=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(w.URL_SCHEME)?f(t.slice(w.URL_SCHEME.length)):null;function f(e){return new w(e)}exports.localStorageRouter=y,r.IORouterRegistry.registerSaveRouter(y),r.IORouterRegistry.registerLoadRouter(y);class u{constructor(){(0,t.assert)((0,e.env)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,t.assert)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=i+s,o=s+a;for(let r=0;r<this.LS.length;++r){const s=this.LS.key(r);if(s.startsWith(t)&&s.endsWith(o)){e[S(s)]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){const t=c(e=m(e));if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);const o=JSON.parse(this.LS.getItem(t.info));return this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),o}}exports.BrowserLocalStorageManager=u;
},{"../flags":"sKWZ","../environment":"rgHm","../util":"UxaK","./io_utils":"KMZR","./router_registry":"p5dc"}],"KdY3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moveModel=l,exports.copyModel=c,exports.removeModel=i,exports.listModels=o,exports.ModelStoreManagerRegistry=void 0;var e=require("../util"),t=require("./router_registry");const n="://";class s{constructor(){this.managers={}}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}static registerManager(t,r){(0,e.assert)(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(n)&&(t=t.slice(0,t.indexOf(n))),(0,e.assert)(t.length>0,()=>"scheme must not be an empty string.");const a=s.getInstance();(0,e.assert)(null==a.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),a.managers[t]=r}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function r(e){if(-1===e.indexOf(n))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+`${s.getSchemes().join(",")}`);return{scheme:e.split(n)[0],path:e.split(n)[1]}}async function a(n,a,o=!1){(0,e.assert)(n!==a,()=>`Old path and new path are the same: '${n}'`);const i=t.IORouterRegistry.getLoadHandlers(n);(0,e.assert)(i.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),(0,e.assert)(i.length<2,()=>`Copying failed because more than one (${i.length}) `+`load handlers for source URL ${n}.`);const c=i[0],l=t.IORouterRegistry.getSaveHandlers(a);(0,e.assert)(l.length>0,()=>"Copying failed because no save handler is found for destination "+`URL ${a}.`),(0,e.assert)(l.length<2,()=>`Copying failed because more than one (${i.length}) `+`save handlers for destination URL ${a}.`);const g=l[0],d=r(n).scheme,u=r(n).path,h=d===r(n).scheme,m=await c.load();o&&h&&await s.getManager(d).removeModel(u);const f=await g.save(m);return o&&!h&&await s.getManager(d).removeModel(u),f.modelArtifactsInfo}async function o(){const e=s.getSchemes(),t={};for(const r of e){const e=await s.getManager(r).listModels();for(const s in e){t[r+n+s]=e[s]}}return t}async function i(e){const t=r(e);return s.getManager(t.scheme).removeModel(t.path)}async function c(e,t){return a(e,t,!1)}async function l(e,t){return a(e,t,!0)}exports.ModelStoreManagerRegistry=s;
},{"../util":"UxaK","./router_registry":"p5dc"}],"KgNx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlatformBrowser=void 0,require("../flags");var e=require("../environment"),r=require("../io/indexed_db"),t=require("../io/local_storage"),o=require("../io/model_management");class n{fetch(e,r){return fetch(e,r)}now(){return performance.now()}encode(e,r){if("utf-8"!==r&&"utf8"!==r)throw new Error(`Browser's encoder only supports utf-8, but got ${r}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,r){return new TextDecoder(r).decode(e)}}if(exports.PlatformBrowser=n,(0,e.env)().get("IS_BROWSER")){(0,e.env)().setPlatform("browser",new n);try{o.ModelStoreManagerRegistry.registerManager(t.BrowserLocalStorage.URL_SCHEME,new t.BrowserLocalStorageManager)}catch(a){}try{o.ModelStoreManagerRegistry.registerManager(r.BrowserIndexedDB.URL_SCHEME,new r.BrowserIndexedDBManager)}catch(a){}}
},{"../flags":"sKWZ","../environment":"rgHm","../io/indexed_db":"L6uM","../io/local_storage":"tJ2N","../io/model_management":"KdY3"}],"bWtT":[function(require,module,exports) {

},{}],"kKcV":[function(require,module,exports) {
var process = require("process");
var e=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.resetSystemFetch=n,exports.setSystemFetch=c,exports.getSystemFetch=s,exports.PlatformNode=exports.getNodeFetch=void 0;var t=require("../environment");const r={importFetch:()=>require("node-fetch")};let o;function n(){o=null}function c(e){o=e}function s(){return o}exports.getNodeFetch=r;class u{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=(0,t.env)().global.fetch?(0,t.env)().global.fetch(e,n):(null==o&&(o=r.importFetch()),o(e,n))}now(){const t=e.hrtime();return 1e3*t[0]+t[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}exports.PlatformNode=u,(0,t.env)().get("IS_NODE")&&(0,t.env)().setPlatform("node",new u);
},{"../environment":"rgHm","node-fetch":"bWtT","util":"bWtT","process":"FT5O"}],"SN3d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=o;var e=require("../tensor"),r=n(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function o(t,n="float32",o){return n=n||"float32",r.assertNonNegativeIntegerDimensions(t),new e.TensorBuffer(t,n,o)}
},{"../tensor":"Zqvm","../util":"UxaK"}],"owKL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cast=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function u(o,i){const s=(0,r.convertToTensor)(o,"x","cast");if(!n.isValidDtype(i))throw new Error(`Failed to cast to unknown dtype ${i}`);if("string"===i&&"string"!==s.dtype||"string"!==i&&"string"===s.dtype)throw new Error("Only strings can be casted to strings");const u={x:s},c={dtype:i};return e.ENGINE.runKernelFunc(e=>e.cast(s,i),u,null,t.Cast,c)}const c=(0,o.op)({cast_:u});exports.cast=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"HHuR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),o=require("./operation");function t(o){const t=(0,r.convertToTensor)(o,"x","clone",null),u={x:t};return e.ENGINE.runKernelFunc(()=>e.ENGINE.makeTensorFromDataId(t.dataId,t.shape,t.dtype),u,null,n.Identity)}const u=(0,o.op)({clone_:t});exports.clone=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"reh2":[function(require,module,exports) {
"use strict";function e(e,t=!1){console.log(e.toString(t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.print=e;
},{}],"j1BI":[function(require,module,exports) {
"use strict";var r=require("./engine");require("./flags"),require("./platforms/platform_browser"),require("./platforms/platform_node");var e=require("./ops/buffer"),s=require("./ops/cast"),t=require("./ops/clone"),i=require("./ops/print"),o=require("./tensor");(0,r.getOrMakeEngine)();const n={buffer:e.buffer,cast:s.cast,clone:t.clone,print:i.print};(0,o.setOpHandler)(n);
},{"./engine":"tmUz","./flags":"sKWZ","./platforms/platform_browser":"KgNx","./platforms/platform_node":"kKcV","./ops/buffer":"SN3d","./ops/cast":"owKL","./ops/clone":"HHuR","./ops/print":"reh2","./tensor":"Zqvm"}],"l6Ea":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.browserDownloads=h,exports.browserFiles=c,exports.browserDownloadsRouter=exports.BrowserDownloads=void 0,require("../flags");var e=require("../environment"),t=require("./io_utils"),o=require("./router_registry");const r="model",n=".json",s=".weights.bin";function i(e){return new Promise(e=>setTimeout(e)).then(e)}class a{constructor(t){if(!(0,e.env)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(a.URL_SCHEME)&&(t=t.slice(a.URL_SCHEME.length)),null!=t&&0!==t.length||(t=r),this.modelTopologyFileName=t+n,this.weightDataFileName=t+s}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const o=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},s=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=s,await i(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=o,await i(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:(0,t.getModelArtifactsInfoForJSON)(e)}}}}exports.BrowserDownloads=a,a.URL_SCHEME="downloads://";class l{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+`but received ${e}`);this.files=e}async load(){const e=this.files[0],o=this.files.slice(1);return new Promise((r,n)=>{const s=new FileReader;s.onload=(s=>{const i=JSON.parse(s.target.result),a=i.modelTopology;if(null==a)return void n(new Error(`modelTopology field is missing from file ${e.name}`));0===o.length&&r({modelTopology:a});const l=i.weightsManifest;if(null==l)return void n(new Error(`weightManifest field is missing from file ${e.name}`));let d;try{d=this.checkManifestAndWeightFiles(l,o)}catch(w){return void n(w)}const h=[],c=[],f=[];l.forEach(e=>{e.paths.forEach(e=>{c.push(e),f.push(null)}),h.push(...e.weights)}),l.forEach(e=>{e.paths.forEach(e=>{const o=new FileReader;o.onload=(o=>{const n=o.target.result,s=c.indexOf(e);f[s]=n,-1===f.indexOf(null)&&r({modelTopology:a,weightSpecs:h,weightData:(0,t.concatenateArrayBuffers)(f),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})}),o.onerror=(t=>n(`Failed to weights data from file of path '${e}'.`)),o.readAsArrayBuffer(d[e])})})}),s.onerror=(t=>n("Failed to read model topology and weights manifest JSON "+`from file '${e.name}'. BrowserFiles supports loading `+"Keras-style tf.Model artifacts only.")),s.readAsText(e)})}checkManifestAndWeightFiles(e,o){const r=[],n=o.map(e=>(0,t.basename)(e.name)),s={};for(const i of e)i.paths.forEach(e=>{const i=(0,t.basename)(e);if(-1!==r.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: "+`'${i}'`);if(r.push(i),-1===n.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);s[e]=o[n.indexOf(i)]});if(r.length!==o.length)throw new Error("Mismatch in the number of files in weights manifest "+`(${r.length}) and the number of weight files provided `+`(${o.length}).`);return s}}const d=t=>(0,e.env)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(a.URL_SCHEME)?h(t.slice(a.URL_SCHEME.length)):null;function h(e="model"){return new a(e)}function c(e){return new l(e)}exports.browserDownloadsRouter=d,o.IORouterRegistry.registerSaveRouter(d);
},{"../flags":"sKWZ","../environment":"rgHm","./io_utils":"KMZR","./router_registry":"p5dc"}],"O3eX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.monitorPromisesProgress=r;var t=require("../util");function r(r,e,n,s){!function(r){(0,t.assert)(null!=r&&Array.isArray(r)&&r.length>0,()=>"promises must be a none empty array")}(r),function(r,e){(0,t.assert)(r>=0&&r<=1,()=>"Progress fraction must be in range [0, 1], but "+`got startFraction ${r}`),(0,t.assert)(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+`got endFraction ${e}`),(0,t.assert)(e>=r,()=>"startFraction must be no more than endFraction, but "+`got startFraction ${r} and endFraction `+`${e}`)}(n=null==n?0:n,s=null==s?1:s);let o=0;return Promise.all(r.map(t=>(t.then(t=>{const a=n+ ++o/r.length*(s-n);return e(a),t}),t)))}
},{"../util":"UxaK"}],"FT2Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadWeightsAsArrayBuffer=a,exports.loadWeights=u,exports.weightsLoaderFactory=f;var e=require("../environment"),t=i(require("../util")),r=require("./io_utils"),n=require("./progress"),o=require("./types");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}async function a(t,r){null==r&&(r={});const o=null==r.fetchFunc?(0,e.env)().platform.fetch:r.fetchFunc,s=t.map(e=>o(e,r.requestInit,{isBinary:!0})),i=(null==r.onProgress?await Promise.all(s):await(0,n.monitorPromisesProgress)(s,r.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==r.onProgress?await Promise.all(i):await(0,n.monitorPromisesProgress)(i,r.onProgress,.5,1)}async function u(e,t="",r,n){return f(e=>a(e,{requestInit:n}))(e,t,r)}function f(e){return async(n,s="",i)=>{const a=n.map(()=>!1),u={},f=null!=i?i.map(()=>!1):[],c=[];if(n.forEach((e,r)=>{let n=0;e.weights.forEach(e=>{const s="quantization"in e?e.quantization.dtype:e.dtype,l=o.DTYPE_VALUE_SIZE_MAP[s]*t.sizeFromShape(e.shape),p=()=>{a[r]=!0,null==u[r]&&(u[r]=[]),u[r].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=i?i.forEach((t,r)=>{t===e.name&&(p(),f[r]=!0)}):p(),c.push(e.name),n+=l})}),!f.every(e=>e)){const e=i.filter((e,t)=>!f[t]);throw new Error("Could not find weights in manifest with names: "+`${e.join(", ")}. \n`+"Manifest JSON has weights with names: "+`${c.join(", ")}.`)}const l=a.reduce((e,t,r)=>(t&&e.push(r),e),[]),p=[];l.forEach(e=>{n[e].paths.forEach(e=>{const t=s+(s.endsWith("/")?"":"/")+e;p.push(t)})});const h=await e(p),y={};let g=0;return l.forEach(e=>{const t=n[e].paths.length;let o=0;for(let r=0;r<t;r++)o+=h[g+r].byteLength;const s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let r=0;r<t;r++){const e=new Uint8Array(h[g+r]);i.set(e,a),a+=e.byteLength}u[e].forEach(e=>{const t=s.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=(0,r.decodeWeights)(t,[e.manifestEntry]);for(const r in n)y[r]=n[r]}),g+=t}),y}}
},{"../environment":"rgHm","../util":"UxaK","./io_utils":"KMZR","./progress":"O3eX","./types":"s0q7"}],"zMoy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseUrl=h,exports.isHTTPScheme=l,exports.http=f,exports.browserHTTPRequest=c,exports.httpRouter=exports.HTTPRequest=void 0;var e=require("../environment"),t=require("../util"),r=require("./io_utils"),o=require("./router_registry"),s=require("./weights_loader");const n="application/octet-stream",i="application/json";class a{constructor(r,o){if(this.DEFAULT_METHOD="POST",null==o&&(o={}),this.weightPathPrefix=o.weightPathPrefix,this.onProgress=o.onProgress,this.weightUrlConverter=o.weightUrlConverter,null!=o.fetchFunc?((0,t.assert)("function"==typeof o.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=o.fetchFunc):this.fetch=(0,e.env)().platform.fetch,(0,t.assert)(null!=r&&r.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(r)&&(0,t.assert)(2===r.length,()=>"URL paths for http must have a length of 2, "+`(actual length is ${r.length}).`),this.path=r,null!=o.requestInit&&null!=o.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=o.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const o=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:o};t.body.append("model.json",new Blob([JSON.stringify(s)],{type:i}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:n}),"model.weights.bin");const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:(0,r.getModelArtifactsInfoForJSON)(e),responses:[a]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+`${a.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code `+`${e.status}. Please verify this URL points to `+"the model JSON of the model to load.");let t;try{t=await e.json()}catch(c){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const r=t.modelTopology,o=t.weightsManifest,s=t.generatedBy,n=t.convertedBy,i=t.format,a=t.userDefinedMetadata;if(null==r&&null==o)throw new Error(`The JSON from HTTP path ${this.path} contains neither model `+"topology or manifest for weights.");let h,l;if(null!=o){const e=await this.loadWeights(o);[h,l]=e}const u={modelTopology:r,weightSpecs:h,weightData:l,userDefinedMetadata:a,generatedBy:s,convertedBy:n,format:i},f=t.modelInitializer;return f&&(u.modelInitializer=f),u}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[o,n]=h(t),i=this.weightPathPrefix||o,a=[];for(const r of e)a.push(...r.weights);const l=[],u=[];for(const r of e)for(const e of r.paths)null!=this.weightUrlConverter?u.push(this.weightUrlConverter(e)):l.push(i+e+n);this.weightUrlConverter&&l.push(...await Promise.all(u));const f=await(0,s.loadWeightsAsArrayBuffer)(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,(0,r.concatenateArrayBuffers)(f)]}}function h(e){const t=e.lastIndexOf("/"),r=e.lastIndexOf("?");return[e.substring(0,t)+"/",r>t?e.substring(r):""]}function l(e){return null!=e.match(a.URL_SCHEME_REGEX)}exports.HTTPRequest=a,a.URL_SCHEME_REGEX=/^https?:\/\//;const u=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let r=!0;if(r=Array.isArray(e)?e.every(e=>l(e)):l(e))return f(e,t)}return null};function f(e,t){return new a(e,t)}function c(e,t){return f(e,t)}exports.httpRouter=u,o.IORouterRegistry.registerSaveRouter(u),o.IORouterRegistry.registerLoadRouter(u);
},{"../environment":"rgHm","../util":"UxaK","./io_utils":"KMZR","./router_registry":"p5dc","./weights_loader":"FT2Y"}],"zL2T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromMemory=t,exports.withSaveHandler=r;class e{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class o{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function t(o,t,r,n){if(1===arguments.length){return null!=o.modelTopology||null!=o.weightSpecs?new e(o):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new e({modelTopology:o,weightSpecs:t,weightData:r,trainingConfig:n})}function r(e){return new o(e)}
},{}],"wHIS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"browserFiles",{enumerable:!0,get:function(){return e.browserFiles}}),Object.defineProperty(exports,"browserHTTPRequest",{enumerable:!0,get:function(){return r.browserHTTPRequest}}),Object.defineProperty(exports,"http",{enumerable:!0,get:function(){return r.http}}),Object.defineProperty(exports,"isHTTPScheme",{enumerable:!0,get:function(){return r.isHTTPScheme}}),Object.defineProperty(exports,"concatenateArrayBuffers",{enumerable:!0,get:function(){return t.concatenateArrayBuffers}}),Object.defineProperty(exports,"decodeWeights",{enumerable:!0,get:function(){return t.decodeWeights}}),Object.defineProperty(exports,"encodeWeights",{enumerable:!0,get:function(){return t.encodeWeights}}),Object.defineProperty(exports,"getModelArtifactsInfoForJSON",{enumerable:!0,get:function(){return t.getModelArtifactsInfoForJSON}}),Object.defineProperty(exports,"fromMemory",{enumerable:!0,get:function(){return o.fromMemory}}),Object.defineProperty(exports,"withSaveHandler",{enumerable:!0,get:function(){return o.withSaveHandler}}),Object.defineProperty(exports,"getLoadHandlers",{enumerable:!0,get:function(){return n.getLoadHandlers}}),Object.defineProperty(exports,"getSaveHandlers",{enumerable:!0,get:function(){return n.getSaveHandlers}}),Object.defineProperty(exports,"registerLoadRouter",{enumerable:!0,get:function(){return n.registerLoadRouter}}),Object.defineProperty(exports,"registerSaveRouter",{enumerable:!0,get:function(){return n.registerSaveRouter}}),Object.defineProperty(exports,"loadWeights",{enumerable:!0,get:function(){return u.loadWeights}}),Object.defineProperty(exports,"weightsLoaderFactory",{enumerable:!0,get:function(){return u.weightsLoaderFactory}}),Object.defineProperty(exports,"copyModel",{enumerable:!0,get:function(){return i.copyModel}}),Object.defineProperty(exports,"listModels",{enumerable:!0,get:function(){return i.listModels}}),Object.defineProperty(exports,"moveModel",{enumerable:!0,get:function(){return i.moveModel}}),Object.defineProperty(exports,"removeModel",{enumerable:!0,get:function(){return i.removeModel}}),require("./indexed_db"),require("./local_storage");var e=require("./browser_files"),r=require("./http"),t=require("./io_utils"),o=require("./passthrough"),n=require("./router_registry"),u=require("./weights_loader"),i=require("./model_management");
},{"./indexed_db":"L6uM","./local_storage":"tJ2N","./browser_files":"l6Ea","./http":"zMoy","./io_utils":"KMZR","./passthrough":"zL2T","./router_registry":"p5dc","./weights_loader":"FT2Y","./model_management":"KdY3"}],"khVG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reshape=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function i(o,u){const s=(0,t.convertToTensor)(o,"x","reshape",null),i={x:s},a={shape:u};return e.ENGINE.runKernelFunc((e,r)=>(u=n.inferFromImplicitShape(u,s.size),n.assert(s.size===n.sizeFromShape(u),()=>"new shape and old shape must have the same number of elements."),r([s]),e.reshape(s,u)),i,null,r.Reshape,a)}const a=(0,o.op)({reshape_:i});exports.reshape=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"A3yk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),a=p(require("../util")),s=require("./operation"),o=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function i(s,u,p=!1,i=!1){let c=(0,n.convertToTensor)(s,"a","matMul"),h=(0,n.convertToTensor)(u,"b","matMul");[c,h]=(0,t.makeTypesMatch)(c,h);const l={a:c,b:h},f={transposeA:p,transposeB:i};return e.ENGINE.runKernelFunc((e,r)=>{r([c,h]);const t=p?c.shape[c.rank-2]:c.shape[c.rank-1],n=i?h.shape[h.rank-1]:h.shape[h.rank-2],s=p?c.shape[c.rank-1]:c.shape[c.rank-2],u=i?h.shape[h.rank-2]:h.shape[h.rank-1],l=c.shape.slice(0,-2),f=h.shape.slice(0,-2),m=a.sizeFromShape(l),d=a.sizeFromShape(f),M=m===d||1===m||1===d;a.assert(c.rank>=2&&h.rank>=2&&M,()=>"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input "+`batch dimensions of (${l}) and (${f}).`),a.assert(t===n,()=>`Error in matMul: inner shapes (${t}) and (`+`${n}) of Tensors with shapes ${c.shape} and `+`${h.shape} and transposeA=${p}`+` and transposeB=${i} must match.`);const b=(m>d?l:f).concat([s,u]),k=p?(0,o.reshape)(c,[m,t,s]):(0,o.reshape)(c,[m,s,t]),v=i?(0,o.reshape)(h,[d,u,n]):(0,o.reshape)(h,[d,n,u]),y=e.batchMatMul(k,v,p,i);return(0,o.reshape)(y,b)},l,null,r.BatchMatMul,f)}const c=(0,s.op)({matMul_:i});exports.matMul=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"mrOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.oneHot=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation"),t=require("./reshape");function i(n,i,s=1,u=0){if(i<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${i}`);const p=(0,o.convertToTensor)(n,"indices","oneHot","int32"),a=[...p.shape,i],c={indices:p},l={depth:i,onValue:s,offValue:u};return e.ENGINE.runKernelFunc((e,r)=>(r([p]),(0,t.reshape)(e.oneHot((0,t.reshape)(p,[p.size]),i,s,u),a)),c,null,r.OneHot,l)}const s=(0,n.op)({oneHot_:i});exports.oneHot=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./reshape":"khVG"}],"yiEV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=require("./operation");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function a(o,s){const u=(0,t.convertToTensor)(o,"x","transpose");if(null==s&&(s=u.shape.map((e,r)=>r).reverse()),n.assert(u.rank===s.length,()=>`Error in transpose: rank of input ${u.rank} `+`must match length of perm ${s}.`),s.forEach(e=>{n.assert(e>=0&&e<u.rank,()=>`All entries in 'perm' must be between 0 and ${u.rank-1}`+` but got ${s}`)}),u.rank<=1)return u.clone();const a={x:u},i={perm:s};return e.ENGINE.runKernelFunc(e=>e.transpose(u,s),a,null,r.Transpose,i)}const i=(0,o.op)({transpose_:a});exports.transpose=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"lU4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.confusionMatrix_=c,exports.confusionMatrix=void 0;var e=require("../tensor_util_env"),t=u(require("../util")),r=require("./cast"),n=require("./mat_mul"),o=require("./one_hot"),s=require("./operation"),i=require("./transpose");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function c(s,a,u){const c=(0,e.convertToTensor)(s,"labels","confusionMatrix"),p=(0,e.convertToTensor)(a,"predictions","confusionMatrix");t.assert(null==u||u>0&&Number.isInteger(u),()=>"If provided, numClasses must be a positive integer, "+`but got ${u}`),t.assert(1===c.rank,()=>`Expected the rank of labels to be 1, but got ${c.rank}`),t.assert(1===p.rank,()=>"Expected the rank of predictions to be 1, "+`but got ${p.rank}`),t.assert(c.shape[0]===p.shape[0],()=>"Mismatch in the number of examples: "+`${c.shape[0]} vs. ${p.shape[0]}. `+"Labels and predictions should have the same number of elements."),t.assert(u>0&&Number.isInteger(u),()=>"numClasses is required to be a positive integer, but got "+`${u}`);const f=(0,o.oneHot)((0,r.cast)(c,"int32"),u),l=(0,o.oneHot)((0,r.cast)(p,"int32"),u),b=(0,i.transpose)(f),d=(0,n.matMul)(b,l);return(0,r.cast)(d,"int32")}const p=(0,s.op)({confusionMatrix_:c});exports.confusionMatrix=p;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./cast":"owKL","./mat_mul":"A3yk","./one_hot":"mrOz","./operation":"rO1i","./transpose":"yiEV"}],"vRxb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"confusionMatrix",{enumerable:!0,get:function(){return e.confusionMatrix}});var e=require("./ops/confusion_matrix");
},{"./ops/confusion_matrix":"lU4w"}],"pCJS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor3d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&3!==o.length)throw new Error("tensor3d() requires shape to have three numbers");const u=(0,e.inferShape)(n,s);if(3!==u.length&&1!==u.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"UMh8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toPixels=f,exports.fromPixels=void 0;var e=require("../engine"),t=require("../kernel_names"),n=require("../kernel_registry"),r=require("../tensor"),o=require("../tensor_util_env"),a=require("./cast"),s=require("./operation"),i=require("./tensor3d");let l;function d(r,o=3){if(o>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==r)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let a=!1,s=!1,d=!1,f=!1,u=!1;if(r.data instanceof Uint8Array)a=!0;else if("undefined"!=typeof ImageData&&r instanceof ImageData)s=!0;else if("undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement)d=!0;else if("undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement)f=!0;else{if(null==r.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+`but was ${r.constructor.name}`);u=!0}if(d){const e=2;if(d&&r.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=(0,n.getKernel)(t.FromPixels,e.ENGINE.backendName)){const n={pixels:r},a={numChannels:o};return e.ENGINE.runKernel(t.FromPixels,n,a)}const[m,c]=d?[r.videoWidth,r.videoHeight]:[r.width,r.height];let h,p;if(u?h=r.getContext("2d").getImageData(0,0,m,c).data:s||a?h=r.data:(f||d)&&(null==l&&(l=document.createElement("canvas").getContext("2d")),l.canvas.width=m,l.canvas.height=c,l.drawImage(r,0,0,m,c),h=l.getImageData(0,0,m,c).data),4===o)p=new Int32Array(h);else{const e=m*c;p=new Int32Array(e*o);for(let t=0;t<e;t++)for(let e=0;e<o;++e)p[t*o+e]=h[4*t+e]}const w=[c,m,o];return(0,i.tensor3d)(p,w,"int32")}async function f(e,t){let n=(0,o.convertToTensor)(e,"img","toPixels");if(!(e instanceof r.Tensor)){const e=n;n=(0,a.cast)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[s,i]=n.shape.slice(0,2),l=2===n.rank?1:n.shape[2];if(l>4||2===l)throw new Error("toPixels only supports depth of size "+`1, 3 or 4 but got ${l}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}.`+" Please use float32 or int32 tensors.");const d=await n.data(),f="float32"===n.dtype?255:1,u=new Uint8ClampedArray(i*s*4);for(let r=0;r<s*i;++r){const e=[0,0,0,255];for(let o=0;o<l;o++){const t=d[r*l+o];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the "+`range [0 - 1] but encountered ${t}.`)}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the "+`range [0 - 255] but encountered ${t}.`);1===l?(e[0]=t*f,e[1]=t*f,e[2]=t*f):e[o]=t*f}const t=4*r;u[t+0]=Math.round(e[0]),u[t+1]=Math.round(e[1]),u[t+2]=Math.round(e[2]),u[t+3]=Math.round(e[3])}if(null!=t){t.width=i,t.height=s;const e=t.getContext("2d"),n=new ImageData(u,i,s);e.putImageData(n,0,0)}return n!==e&&n.dispose(),u}const u=(0,s.op)({fromPixels_:d});exports.fromPixels=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../kernel_registry":"yMO5","../tensor":"Zqvm","../tensor_util_env":"x0Hg","./cast":"owKL","./operation":"rO1i","./tensor3d":"pCJS"}],"EXn0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareAndValidate=t;var e=require("../util");function t(t,r){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+` but the rank was ${t.rank}.`);if(r.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+` but the rank was ${r.rank}.`);if("int32"!==r.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+` but the dtype was ${r.dtype}.`);if(r.shape[r.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+`${r.shape[r.rank-1]} vs. ${t.rank}`);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty."+` Input shape: ${t.shape}.`);const n=r.shape,s=n[n.length-1];let a=1;for(let e=0;e<n.length-1;++e)a*=n[e];const i=t.shape,o=n.slice();o.pop();let h=1;for(let e=s;e<t.rank;++e)h*=i[e],o.push(i[e]);const p=[...(0,e.computeStrides)(t.shape).map(e=>e/h),1].slice(0,s);return[o,a,h,p]}
},{"../util":"UxaK"}],"mei8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateUpdateShape=t,exports.validateInput=r,exports.calculateShapes=a;var e=require("../util");function t(e,t,r){const a=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,p="Must have updates.shape = indices.shape[:batchDim] + "+`shape[sliceDim:], got updates.shape: ${r.shape}`+`, indices.shape: ${t.shape}, shape: ${e}`+`, sliceDim: ${a}, and batchDim: ${s}.`;if(r.rank<s)throw new Error(p+` update.rank < ${s}. `);if(e.length<a+(r.rank-s))throw new Error(p+` Output shape length < ${a+(r.rank-s)}`);if(r.rank!==s+e.length-a)throw new Error(p+` update.rank != ${s+e.length-a}`);for(let h=0;h<s;++h)if(r.shape[h]!==t.shape[h])throw new Error(p+` updates.shape[${h}] (${r.shape[h]}) != indices.shape[${h}] (${t.shape[h]}).`);for(let h=0;h<r.rank-s;++h)if(r.shape[h+s]!==e[h+a])throw new Error(p+` updates.shape[${h+s}] (${r.shape[h+s]}) != shape[${h+s}] (${e[h+s]})`)}function r(e,r,a){if(r.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+` but the rank was ${r.rank}.`);if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if("int32"!==r.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${r.dtype}`);if(a.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${a}`);if(0===a.length){if(0===r.size)throw new Error(`Indices specified for empty output. indices shape: ${r.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}t(a,r,e)}function a(t,r,a){const s=r.shape.length,p=s>1?r.shape[s-1]:1,h=a.length;let n=1;for(let e=p;e<h;++e)n*=a[e];const i=p<1?1:p;return{sliceRank:p,numUpdates:(0,e.sizeFromShape)(r.shape)/i,sliceSize:n,strides:[...(0,e.computeStrides)(a.slice(0,p)),1],outputSize:(0,e.sizeFromShape)(a)}}
},{"../util":"UxaK"}],"sNMx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsValid=n,exports.maskToAxes=o,exports.computeOutShape=s,exports.stridesWithElidedDims=l,exports.getNormalizedAxes=c,exports.startIndicesWithElidedDims=a,exports.stopIndicesWithElidedDims=f,exports.stridesForAxis=p,exports.startForAxis=h,exports.stopForAxis=g,exports.isSliceContinous=d,exports.computeFlatOffset=m,exports.parseSliceParams=E;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(n,s,l):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function n(t,r,n){const o=t.shape.length;e.assert(o===r.length,()=>`Error in slice${o}D: Length of begin ${r} must `+`match the rank of the array (${o}).`),e.assert(o===n.length,()=>`Error in slice${o}D: Length of size ${n} must `+`match the rank of the array (${o}).`);for(let s=0;s<o;++s)e.assert(r[s]+n[s]<=t.shape[s],()=>`Error in slice${o}D: begin[${s}] + size[${s}] `+`(${r[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function o(e){const t=[];let r=0;for(;e>0;)1&e&&t.push(r),e/=2,r++;return t}function s(e,t,r){const n=[];for(let o=0;o<e.length;o++)n[o]=Math.ceil((t[o]-e[o])/r[o]);return n}function l(e,t,r,n){const o=[...e];for(let s=o.length;s<n.length;s++)o.push(1);for(let s=0;s<r;s++)0===s?o[t]=1:(o.splice(t,0,1),o.pop());return o}function i(e,t,r){return r<=e?r:r-(t-1)}function u(e,t){const r=[];for(let n=0;n<e;n++)r.push(t+n);return r}function c(e,t,r,n,o,s,i,u,c){const d=e.length;let m=new Array(d),E=new Array(d),x=new Array(d);if(t.length&&r>0){const c=t[0],p=r+1;m=a(i,c,p,n,e),E=f(u,c,p,o,e),x=l(s,c,p,e)}else for(let l=0;l<d;l++)m[l]=h(i,n,s,e,l,c),E[l]=g(u,o,s,e,l,c),x[l]=p(s,l,c);return{begin:m,end:E,strides:x}}function a(e,t,r,n,o){const s=[...o],l=u(r,t);for(let u=0;u<s.length;u++)if(l.indexOf(u)>-1)s[u]=0;else{const o=i(t,r,u);let l=n[o];e&1<<o&&(l=0),s[u]=l}return s}function f(t,r,n,o,s){const l=[...s],c=u(n,r);for(let e=0;e<l.length;e++)if(c.indexOf(e)>-1)l[e]=Number.MAX_SAFE_INTEGER;else{const s=i(r,n,e);let u=o[s];t&1<<s&&(u=Number.MAX_SAFE_INTEGER),l[e]=u}for(let i=0;i<l.length;i++){const t=s[i];l[i]<0&&(l[i]+=t),l[i]=e.clamp(0,l[i],s[i])}return l}function p(e,t,r){let n=e[t];return(r&1<<t||null==n)&&(n=1),n}function h(t,r,n,o,s,l){let i=r[s];const u=n[s]||1;(t&1<<s||l&1<<s||null==i)&&(i=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const c=o[s];return i<0&&(i+=c),i=e.clamp(0,i,c-1)}function g(t,r,n,o,s,l){let i=r[s];const u=n[s]||1;(t&1<<s||l&1<<s||null==i)&&(i=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const c=o[s];return i<0&&(i+=c),i=u>0?e.clamp(0,i,c):e.clamp(-1,i,c-1)}function d(e,t,r){let n=r.length;for(let o=0;o<r.length;o++)if(r[o]>1){n=o;break}for(let o=n+1;o<r.length;o++)if(t[o]>0||r[o]!==e[o])return!1;return!0}function m(e,t){let r=e.length>0?e[e.length-1]:1;for(let n=0;n<e.length-1;n++)r+=e[n]*t[n];return r}function E(t,r,n){let o;const s=t.shape.length;let l;return(o="number"==typeof r?[r,...new Array(s-1).fill(0)]:r.length<s?r.concat(new Array(s-r.length).fill(0)):r.slice()).forEach(t=>{e.assert(-1!==t,()=>"slice() does not support negative begin indexing.")}),l=(l=null==n?new Array(s).fill(-1):"number"==typeof n?[n,...new Array(s-1).fill(-1)]:n.length<s?n.concat(new Array(s-n.length).fill(-1)):n).map((r,n)=>r>=0?r:(e.assert(-1===r,()=>"Negative size values should be exactly -1 but got "+`${r} for the slice() size at index ${n}.`),t.shape[n]-o[n])),[o,l]}
},{"../util":"UxaK"}],"AVD8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerClass=t,exports.SerializationMap=exports.Serializable=void 0;var e=require("./util");class s{getClassName(){return this.constructor.className}static fromConfig(e,s){return new e(s)}}exports.Serializable=s;class a{constructor(){this.classNameMap={}}static getMap(){return null==a.instance&&(a.instance=new a),a.instance}static register(e){a.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function t(s){(0,e.assert)(null!=s.className,()=>"Class being registered does not have the static className property defined."),(0,e.assert)("string"==typeof s.className,()=>"className is required to be a string, but got type "+typeof s.className),(0,e.assert)(s.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),a.register(s)}exports.SerializationMap=a;
},{"./util":"UxaK"}],"IZ2A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expectArraysClose=i,exports.testEpsilon=a,exports.expectPromiseToFail=c,exports.expectArraysEqual=f,exports.expectNumbersClose=l,exports.expectValuesInRange=p,exports.expectArrayBuffersEqual=y,exports.TEST_EPSILON_FLOAT16=void 0;var e=require("./engine"),r=require("./tensor_util_env"),t=require("./util");const n=.001,o=.1;function i(e,r,t){return null==t&&(t=a()),s(e,r,(e,r)=>u(e,r,t))}function a(){return 32===e.ENGINE.backend.floatPrecision()?n:o}function s(e,n,o){let i=!0;if(((0,t.isTypedArray)(e)||(0,t.isTypedArray)(n))&&(i=!1),(0,t.isTypedArray)(e)&&(0,t.isTypedArray)(n)&&(i=!0),i){const r=e.constructor.name,t=n.constructor.name;if(r!==t)throw new Error(`Arrays are of different type. Actual: ${r}. `+`Expected: ${t}`)}if(Array.isArray(e)&&Array.isArray(n)){const o=(0,r.inferShape)(e),i=(0,r.inferShape)(n);if(!(0,t.arraysEqual)(o,i))throw new Error("Arrays have different shapes. "+`Actual: [${o}]. Expected: [${i}]`)}const a=(0,t.isTypedArray)(e)?e:(0,t.flatten)(e),s=(0,t.isTypedArray)(n)?n:(0,t.flatten)(n);if(a.length!==s.length)throw new Error(`Arrays have different lengths actual: ${a.length} vs `+`expected: ${s.length}.\n`+`Actual:   ${a}.\n`+`Expected: ${s}.`);for(let r=0;r<s.length;++r){const e=a[r],t=s[r];if(!o(e,t))throw new Error(`Arrays differ: actual[${r}] = ${e}, expected[${r}] = ${t}.\n`+`Actual:   ${a}.\n`+`Expected: ${s}.`)}}function c(e,r){e().then(()=>r.fail(),()=>r())}function f(e,r){const n="string"==typeof r||"number"==typeof r||"boolean"==typeof r?[r]:r;return(0,t.isString)(e)||(0,t.isString)(e[0])||(0,t.isString)(r)||(0,t.isString)(r[0])?s(e,n,(e,r)=>e==r):s(e,r,(e,r)=>u(e,r,0))}function l(e,r,t){if(null==t&&(t=a()),!u(e,r,t))throw new Error(`Numbers differ: actual === ${e}, expected === ${r}`)}function u(e,r,t){return!isFinite(e)&&!isFinite(r)||!(isNaN(e)||isNaN(r)||Math.abs(e-r)>t)}function p(e,r,t){for(let n=0;n<e.length;n++)if(e[n]<r||e[n]>t)throw new Error(`Value out of range:${e[n]} low: ${r}, high: ${t}`)}function y(e,r){expect(new Float32Array(e)).toEqual(new Float32Array(r))}exports.TEST_EPSILON_FLOAT16=o;
},{"./engine":"tmUz","./tensor_util_env":"x0Hg","./util":"UxaK"}],"yMuw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="2.7.0";exports.version="2.7.0";
},{}],"UkUu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enableProdMode=o,exports.enableDebugMode=i,exports.disableDeprecationWarnings=s,exports.deprecationWarn=a,exports.disposeVariables=c,exports.engine=u,exports.memory=E,exports.profile=d,exports.tidy=N,exports.dispose=p,exports.keep=f,exports.time=x,exports.setBackend=I,exports.ready=l,exports.getBackend=G,exports.removeBackend=k,exports.findBackend=B,exports.findBackendFactory=b,exports.registerBackend=g,exports.backend=m,exports.setPlatform=v;var e=require("./engine"),n=require("./environment"),r=require("./tensor"),t=require("./tensor_util");function o(){(0,n.env)().set("PROD",!0)}function i(){(0,n.env)().set("DEBUG",!0)}function s(){(0,n.env)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function a(e){(0,n.env)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function c(){e.ENGINE.disposeVariables()}function u(){return e.ENGINE}function E(){return e.ENGINE.memory()}function d(n){return e.ENGINE.profile(n)}function N(n,r){return e.ENGINE.tidy(n,r)}function p(e){(0,t.getTensorsInContainer)(e).forEach(e=>e.dispose())}function f(n){return e.ENGINE.keep(n)}function x(n){return e.ENGINE.time(n)}function I(n){return e.ENGINE.setBackend(n)}function l(){return e.ENGINE.ready()}function G(){return e.ENGINE.backendName}function k(n){e.ENGINE.removeBackend(n)}function B(n){return e.ENGINE.findBackend(n)}function b(n){return e.ENGINE.findBackendFactory(n)}function g(n,r,t=1){return e.ENGINE.registerBackend(n,r,t)}function m(){return e.ENGINE.backend}function v(e,r){(0,n.env)().setPlatform(e,r)}(0,r.setDeprecationWarningFn)(a);
},{"./engine":"tmUz","./environment":"rgHm","./tensor":"Zqvm","./tensor_util":"vUHI"}],"geuL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),o=require("./operation");function d(o,d){let u=(0,t.convertToTensor)(o,"a","add"),s=(0,t.convertToTensor)(d,"b","add");[u,s]=(0,n.makeTypesMatch)(u,s);const a={a:u,b:s};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.add(u,s);return r([u,s]),n},a,null,r.Add)}const u=(0,o.op)({add_:d});exports.add=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"L6i4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDiv=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function i(t,i){let l=(0,n.convertToTensor)(t,"a","floorDiv"),u=(0,n.convertToTensor)(i,"b","floorDiv");[l,u]=(0,o.makeTypesMatch)(l,u);const s={a:l,b:u};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.floorDiv(l,u);return r([l,u]),o},s,null,r.FloorDiv)}const l=(0,t.op)({floorDiv_:i});exports.floorDiv=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"XyQ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.div=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./floorDiv"),o=require("./operation");function u(o,u){let s=(0,n.convertToTensor)(o,"a","div"),v=(0,n.convertToTensor)(u,"b","div");if([s,v]=(0,i.makeTypesMatch)(s,v),"int32"===s.dtype&&"int32"===v.dtype)return(0,t.floorDiv)(s,v);const l={a:s,b:v};return e.ENGINE.runKernelFunc((e,r)=>{const i=e.realDivide(s,v);return r([s,v]),i},l,null,r.Div,{})}const s=(0,o.op)({div_:u});exports.div=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./floorDiv":"L6i4","./operation":"rO1i"}],"WS4w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mul=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),u=require("./operation");function o(u,o){let l=(0,t.convertToTensor)(u,"a","mul"),i=(0,t.convertToTensor)(o,"b","mul");[l,i]=(0,n.makeTypesMatch)(l,i);const s={a:l,b:i};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.multiply(l,i);return r([l,i]),n},s,null,r.Multiply)}const l=(0,u.op)({mul_:o});exports.mul=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"LQUr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.abs=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function s(o){const s=(0,n.convertToTensor)(o,"x","abs"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>(r([s]),"complex64"===s.dtype?e.complexAbs(s):e.abs(s)),t,null,r.Abs)}const t=(0,o.op)({abs_:s});exports.abs=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"ILOc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,o.convertToTensor)(n,"x","acos"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.acos(s);return r([s]),o},t,null,r.Acos)}const t=(0,n.op)({acos_:s});exports.acos=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"NNxA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,o.convertToTensor)(n,"x","acosh"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.acosh(s);return r([s]),o},t,null,r.Acosh)}const t=(0,n.op)({acosh_:s});exports.acosh=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"jrV1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addN=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=a(require("../util")),o=require("./operation");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function u(o){n.assert(Array.isArray(o),()=>"The argument passed to tf.addN() must be a list of tensors"),n.assert(o.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+`${o.length}`);const s=o.map((e,t)=>(0,r.convertToTensor)(e,`tensors${t}`,"addN")),a=s[0];s.forEach(e=>{if(e.dtype!==a.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),s.forEach(e=>{if(!n.arraysEqual(e.shape,a.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const u=s;return e.ENGINE.runKernelFunc((e,t)=>{const r=e.addN(s);return t(s),r},u,null,t.AddN)}const d=(0,o.op)({addN_:u});exports.addN=d;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"uTbM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.axesAreInnerMostDims=n,exports.combineLocations=o,exports.computeOutAndReduceShapes=u,exports.expandShapeToKeepDim=s,exports.assertAxesAreInnerMostDims=p,exports.getAxesPermutation=i,exports.getUndoAxesPermutation=f,exports.getInnerMostAxes=a;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(n,u,s):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function n(e,t){for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function o(e,t,r){const n=e.length+t.length,o=[];let u=0,s=0;for(let p=0;p<n;p++)-1===r.indexOf(p)?o.push(e[u++]):o.push(t[s++]);return o}function u(e,t){const r=[],n=e.length;for(let o=0;o<n;o++)-1===t.indexOf(o)&&r.push(e[o]);return[r,t.map(t=>e[t])]}function s(e,t){return o(e,t.map(e=>1),t)}function p(t,r,o){e.assert(n(r,o),()=>`${t} supports only inner-most axes for now. `+`Got axes ${r} and rank-${o} input.`)}function i(e,t){if(n(e,t))return null;const r=[];for(let n=0;n<t;++n)-1===e.indexOf(n)&&r.push(n);return e.forEach(e=>r.push(e)),r}function f(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function a(e,t){const r=[];for(let n=t-e;n<t;++n)r.push(n);return r}
},{"../util":"UxaK"}],"kMEx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("../util"),s=require("./axis_util"),l=require("./operation"),o=require("./reshape"),a=require("./transpose");function i(l,i=null,u=!1){let p=(0,n.convertToTensor)(l,"x","all","bool");const c={x:p},x={axis:i,keepDims:u};return e.ENGINE.runKernelFunc(e=>{const r=(0,t.parseAxisParam)(i,p.shape);let n=r;const l=(0,s.getAxesPermutation)(n,p.rank);null!=l&&(p=(0,a.transpose)(p,l),n=(0,s.getInnerMostAxes)(n.length,p.rank));const c=e.all(p,n);if(u){const e=(0,s.expandShapeToKeepDim)(c.shape,r);return(0,o.reshape)(c,e)}return c},c,null,r.All,x)}const u=(0,l.op)({all_:i});exports.all=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"Fa98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.any=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("../util"),s=require("./axis_util"),o=require("./operation"),a=require("./reshape"),i=require("./transpose");function u(o,u=null,l=!1){let p=(0,n.convertToTensor)(o,"x","any","bool");const c={x:p},x={axis:u,keepDims:l};return e.ENGINE.runKernelFunc(e=>{const r=(0,t.parseAxisParam)(u,p.shape);let n=r;const o=(0,s.getAxesPermutation)(n,p.rank);null!=o&&(p=(0,i.transpose)(p,o),n=(0,s.getInnerMostAxes)(n.length,p.rank));const c=e.any(p,n);if(l){const e=(0,s.expandShapeToKeepDim)(c.shape,r);return(0,a.reshape)(c,e)}return c},c,null,r.Any,x)}const l=(0,o.op)({any_:u});exports.any=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"qu9n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMax=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=s(require("./axis_util")),a=require("./operation"),u=require("./transpose");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(a,i=0){let s=(0,t.convertToTensor)(a,"x","argMax");const l={x:s},p={axis:i};return e.ENGINE.runKernelFunc((e,r)=>{r([s]);let t=n.parseAxisParam(i,s.shape);const a=o.getAxesPermutation(t,s.rank);return null!=a&&(s=(0,u.transpose)(s,a),t=o.getInnerMostAxes(t.length,s.rank)),e.argMax(s,t[0])},l,null,r.ArgMax,p)}const p=(0,a.op)({argMax_:l});exports.argMax=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./transpose":"yiEV"}],"L4Ct":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMin=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),i=s(require("./axis_util")),o=require("./operation"),u=require("./transpose");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(t,i,o):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function l(o,a=0){let s=(0,t.convertToTensor)(o,"x","argMin");const l={x:s},p={axis:a};return e.ENGINE.runKernelFunc((e,r)=>{r([s]),null==a&&(a=0);let t=n.parseAxisParam(a,s.shape);const o=i.getAxesPermutation(t,s.rank);return null!=o&&(s=(0,u.transpose)(s,o),t=i.getInnerMostAxes(t.length,s.rank)),e.argMin(s,t[0])},l,null,r.ArgMin,p)}const p=(0,o.op)({argMin_:l});exports.argMin=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./transpose":"yiEV"}],"YHV3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asin=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),s=require("./operation");function i(s){const i=(0,r.convertToTensor)(s,"x","asin"),o={x:i};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.asin(i);return n([i]),r},o,null,n.Asin)}const o=(0,s.op)({asin_:i});exports.asin=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"O9ii":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinh=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),s=require("./operation");function i(s){const i=(0,r.convertToTensor)(s,"x","asinh"),o={x:i};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.asinh(i);return n([i]),r},o,null,n.Asinh)}const o=(0,s.op)({asinh_:i});exports.asinh=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"ZXMd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,r.convertToTensor)(t,"x","atan"),a={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.atan(o);return n([o]),r},a,null,n.Atan)}const a=(0,t.op)({atan_:o});exports.atan=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"qQ7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util"),t=require("../tensor_util_env"),a=require("./operation");function o(a,o){let u=(0,t.convertToTensor)(a,"a","atan2"),s=(0,t.convertToTensor)(o,"b","atan2");[u,s]=(0,r.makeTypesMatch)(u,s);const i={a:u,b:s};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.atan2(u,s);return n([u,s]),r},i,null,n.Atan2)}const u=(0,a.op)({atan2_:o});exports.atan2=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"rIil":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanh=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,r.convertToTensor)(t,"x","atanh"),a={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.atanh(o);return n([o]),r},a,null,n.Atanh)}const a=(0,t.op)({atanh_:o});exports.atanh=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"cqi6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeDilation2DInfo=r,exports.computePool2DInfo=o,exports.computePool3DInfo=i,exports.computeConv2DInfo=a,exports.computeConv3DInfo=s,exports.computeDefaultPad=u,exports.tupleValuesAreOne=M,exports.eitherStridesOrDilationsAreOne=b,exports.convertConv2DDataFormat=w;var t=n(require("../util"));function e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return e=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=e();if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function r(t,e,n,r,o="NHWC",i){return a(t,[...e,t[3]],n,i,r,null,null,w(o))}function o(t,e,n,r,o,i,s="channelsLast"){const[h,l]=f(e);let u;if("channelsLast"===s)u=[h,l,t[3],t[3]];else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);u=[h,l,t[1],t[1]]}return a(t,u,n,r,o,i,!1,s)}function i(t,e,n,r,o,i,a="NDHWC"){const[h,l,u]=c(e);let f,p;if("NDHWC"===a)p="channelsLast",f=[h,l,u,t[4],t[4]];else{if("NCDHW"!==a)throw new Error(`Unknown dataFormat ${a}`);p="channelsFirst",f=[h,l,u,t[1],t[1]]}return s(t,f,n,r,o,!1,p,i)}function a(t,e,n,r,o,i,a=!1,s="channelsLast"){let[h,l,u,c]=[-1,-1,-1,-1];if("channelsLast"===s)[h,l,u,c]=t;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[h,c,l,u]=t}const[m,g,,M]=e,[b,w]=f(n),[D,W]=f(r),I=p(m,D),y=p(g,W),{padInfo:H,outHeight:F,outWidth:L}=d(o,l,u,b,w,I,y,i,s),C=a?M*c:M;let v;return"channelsFirst"===s?v=[h,C,F,L]:"channelsLast"===s&&(v=[h,F,L,C]),{batchSize:h,dataFormat:s,inHeight:l,inWidth:u,inChannels:c,outHeight:F,outWidth:L,outChannels:C,padInfo:H,strideHeight:b,strideWidth:w,filterHeight:m,filterWidth:g,effectiveFilterHeight:I,effectiveFilterWidth:y,dilationHeight:D,dilationWidth:W,inShape:t,outShape:v,filterShape:e}}function s(t,e,n,r,o,i=!1,a="channelsLast",s){let[h,l,u,f,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[h,l,u,f,d]=t;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[h,d,l,u,f]=t}const[g,M,b,,w]=e,[D,W,I]=c(n),[y,H,F]=c(r),L=p(g,y),C=p(M,H),v=p(b,F),{padInfo:k,outDepth:E,outHeight:$,outWidth:x}=m(o,l,u,f,D,W,I,L,C,v,s),O=i?w*d:w;let S;return"channelsFirst"===a?S=[h,O,E,$,x]:"channelsLast"===a&&(S=[h,E,$,x,O]),{batchSize:h,dataFormat:a,inDepth:l,inHeight:u,inWidth:f,inChannels:d,outDepth:E,outHeight:$,outWidth:x,outChannels:O,padInfo:k,strideDepth:D,strideHeight:W,strideWidth:I,filterDepth:g,filterHeight:M,filterWidth:b,effectiveFilterDepth:L,effectiveFilterHeight:C,effectiveFilterWidth:v,dilationDepth:y,dilationHeight:H,dilationWidth:F,inShape:t,outShape:S,filterShape:e}}function h(e,n,r,o,i){null==o&&(o=u(e,n,r));const a=e[0],s=e[1],h=g((a-n+2*o)/r+1,i);t.assert(t.isInt(h),()=>`The output # of rows (${h}) must be an integer. `+"Change the stride and/or zero pad parameters");const l=g((s-n+2*o)/r+1,i);return t.assert(t.isInt(l),()=>`The output # of columns (${l}) must be an integer. `+"Change the stride and/or zero pad parameters"),[h,l]}function l(e,n,r,o,i,a){null==i&&(i=u(e,n,o));const s=e[0],h=e[1],l=e[2],f=g((s-n+2*i)/o+1,a);t.assert(t.isInt(f),()=>`The output # of depths (${f}) must be an integer. `+"Change the stride and/or zero pad parameters");const c=g((h-n+2*i)/o+1,a);t.assert(t.isInt(c),()=>`The output # of rows (${c}) must be an integer. `+"Change the stride and/or zero pad parameters");const p=g((l-n+2*i)/o+1,a);return t.assert(t.isInt(p),()=>`The output # of columns (${p}) must be an integer. `+"Change the stride and/or zero pad parameters"),[f,c,p,r]}function u(t,e,n,r=1){const o=p(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function f(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function c(t){return"number"==typeof t?[t,t,t]:t}function p(t,e){return e<=1?t:t+(t-1)*(e-1)}function d(t,e,n,r,o,i,a,s,l){let u,f,c;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const o=h([e,n],i,r,t,s);f=o[0],c=o[1]}else if("same"===t){f=Math.ceil(e/r),c=Math.ceil(n/o);const t=Math.max(0,(f-1)*r+i-e),s=Math.max(0,(c-1)*o+a-n),h=Math.floor(t/2),l=t-h,p=Math.floor(s/2);u={top:h,bottom:l,left:p,right:s-p,type:"SAME"}}else if("valid"===t)u={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((e-i+1)/r),c=Math.ceil((n-a+1)/o);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const h="channelsLast"===l?t[1][0]:t[2][0],p="channelsLast"===l?t[1][1]:t[2][1],d="channelsLast"===l?t[2][0]:t[3][0],m="channelsLast"===l?t[2][1]:t[3][1];u={top:h,bottom:p,left:d,right:m,type:0===h&&0===p&&0===d&&0===m?"VALID":"EXPLICIT"},f=g((e-i+h+p)/r+1,s),c=g((n-a+d+m)/o+1,s)}}return{padInfo:u,outHeight:f,outWidth:c}}function m(t,e,n,r,o,i,a,s,h,u,f){let c,p,d,m;if("number"==typeof t){c={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const i=l([e,n,r,1],s,1,o,t,f);p=i[0],d=i[1],m=i[2]}else if("same"===t){const t=((p=Math.ceil(e/o))-1)*o+s-e,l=((d=Math.ceil(n/i))-1)*i+h-n,f=((m=Math.ceil(r/a))-1)*a+u-r,g=Math.floor(t/2),M=t-g,b=Math.floor(l/2),w=l-b,D=Math.floor(f/2);c={top:b,bottom:w,left:D,right:f-D,front:g,back:M,type:"SAME"}}else{if("valid"!==t)throw Error(`Unknown padding parameter: ${t}`);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((e-s+1)/o),d=Math.ceil((n-h+1)/i),m=Math.ceil((r-u+1)/a)}return{padInfo:c,outDepth:p,outHeight:d,outWidth:m}}function g(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function M(t){const[e,n,r]=f(t);return 1===e&&1===n&&1===r}function b(t,e){return M(t)||M(e)}function w(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}
},{"../util":"UxaK"}],"Pm39":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),o=l(require("../util")),n=require("./cast"),i=l(require("./conv_util")),a=require("./operation"),s=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function p(a,u,l,p,c){const d=(0,t.convertToTensor)(a,"x","avgPool","float32");o.assert(i.eitherStridesOrDilationsAreOne(l,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${l} and dilations '1'`);let f=d,g=!1;3===d.rank&&(g=!0,f=(0,s.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]])),o.assert(4===f.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${f.rank}.`),null!=c&&o.assert(o.isInt(p),()=>"Error in avgPool: pad must be an integer when using, "+`dimRoundingMode ${c} but got pad ${p}.`);const v={x:f},h={filterSize:u,strides:l,pad:p,dimRoundingMode:c};let P=e.ENGINE.runKernelFunc((e,r)=>{const t=i.computePool2DInfo(f.shape,u,l,1,p,c);return r([f]),1===t.filterWidth&&1===t.filterHeight&&o.arraysEqual(t.inShape,t.outShape)?f.clone():e.avgPool(f,t)},v,null,r.AvgPool,h);return P=(0,n.cast)(P,d.dtype),g?(0,s.reshape)(P,[P.shape[1],P.shape[2],P.shape[3]]):P}const c=(0,a.op)({avgPool_:p});exports.avgPool=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./cast":"owKL","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"rD3s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3d=void 0;var e=require("../engine"),r=require("../globals"),t=require("../kernel_names"),o=require("../tensor_util_env"),n=d(require("../util")),a=require("./cast"),i=d(require("./conv_util")),s=require("./operation"),u=require("./reshape");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function p(s,l,d,p,c,f="NDHWC",g){null==g?g=[1,1,1]:(0,r.deprecationWarn)("dilations is deprecated, this field will be gone in v3.0.0.");const v=(0,o.convertToTensor)(s,"x","avgPool3d","float32");let h=v,P=!1;4===v.rank&&(P=!0,h=(0,u.reshape)(v,[1,v.shape[0],v.shape[1],v.shape[2],v.shape[3]])),n.assert(5===h.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${h.rank}.`),n.assert("NDHWC"===f,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${f}`),n.assert(i.eitherStridesOrDilationsAreOne(d,g),()=>"Error in avgPool3d: Either strides or dilations must be 1. "+`Got strides ${d} and dilations '${g}'`),null!=c&&n.assert(n.isInt(p),()=>"Error in avgPool3d: pad must be an integer when using, "+`dimRoundingMode ${c} but got pad ${p}.`);const b={x:h},y={filterSize:l,strides:d,pad:p,dimRoundingMode:c,dataFormat:f,dilations:g};let O=e.ENGINE.runKernelFunc((e,r)=>{null==g&&(g=[1,1,1]);const t=i.computePool3DInfo(h.shape,l,d,g,p,c,f);return r([h]),e.avgPool3d(h,t)},b,null,t.AvgPool3D,y);return O=(0,a.cast)(O,h.dtype),P?(0,u.reshape)(O,[O.shape[1],O.shape[2],O.shape[3],O.shape[4]]):O}const c=(0,s.op)({avgPool3d_:p});exports.avgPool3d=c;
},{"../engine":"tmUz","../globals":"UkUu","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./cast":"owKL","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"I0tS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assertParamsConsistent=n,exports.computeOutShape=o;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function n(t,r){const n=t[0].length;t.forEach((t,r)=>{e.assert(t.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same `+`as the rank of the rest (${n})`)}),e.assert(r>=0&&r<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const o=t[0];t.forEach((t,s)=>{for(let a=0;a<n;a++)e.assert(a===r||t[a]===o[a],()=>`Error in concat${n}D: Shape of tensors[${s}] (${t}) `+`does not match the shape of the rest (${o}) `+`along the non-concatenated axis ${s}.`)})}function o(e,t){const r=e[0].slice();for(let n=1;n<e.length;n++)r[t]+=e[n][t];return r}
},{"../util":"UxaK"}],"gZir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=require("../util"),o=require("./concat_util"),s=require("./operation"),a=require("./tensor");function c(s,c=0){(0,n.assert)(s.length>=1,()=>"Pass at least one tensor to concat");let i=(0,r.convertToTensorArray)(s,"tensors","concat");"complex64"===i[0].dtype&&i.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)});const u=i,p={axis:c};return e.ENGINE.runKernelFunc((e,t)=>{const r=(0,n.parseAxisParam)(c,i[0].shape)[0],s=(0,o.computeOutShape)(i.map(e=>e.shape),r);if(0===(0,n.sizeFromShape)(s))return(0,a.tensor)([],s);if(1===(i=i.filter(e=>e.size>0)).length)return i[0];const u=i.map(e=>e.shape);(0,o.assertParamsConsistent)(u,r);const p=e.concat(i,r);return t(i),p},u,null,t.Concat,p)}const i=(0,s.op)({concat_:c});exports.concat=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./concat_util":"I0tS","./operation":"rO1i","./tensor":"tCGm"}],"QUTt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoid=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),o=require("./operation");function n(o){const n=(0,i.convertToTensor)(o,"x","sigmoid"),s={x:n};return e.ENGINE.runKernelFunc((e,r)=>{const i=e.sigmoid(n);return r([i]),i},s,null,r.Sigmoid)}const s=(0,o.op)({sigmoid_:n});exports.sigmoid=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"xcz4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation"),i=s(require("./slice_util"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(n,o,s){const u=(0,t.convertToTensor)(n,"x","slice");if(0===u.rank)throw new Error("Slicing scalar is not possible");const c={x:u},l={begin:o,size:s};return e.ENGINE.runKernelFunc((e,r)=>{const[t,n]=i.parseSliceParams(u,o,s);return i.assertParamsValid(u,t,n),r([u]),e.slice(u,t,n)},c,null,r.Slice,l)}const c=(0,n.op)({slice_:u});exports.slice=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./slice_util":"sNMx"}],"Lqgl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tanh=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,r.convertToTensor)(t,"x","tanh"),u={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.tanh(o);return n([r]),r},u,null,n.Tanh)}const u=(0,t.op)({tanh_:o});exports.tanh=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"z3ej":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.basicLSTMCell=void 0;var e=require("../tensor_util_env"),r=require("./add"),i=require("./concat"),s=require("./mat_mul"),o=require("./mul"),l=require("./operation"),t=require("./sigmoid"),c=require("./slice"),a=require("./tanh");function n(l,n,u,T,d,m){const M=(0,e.convertToTensor)(l,"forgetBias","basicLSTMCell"),b=(0,e.convertToTensor)(n,"lstmKernel","basicLSTMCell"),v=(0,e.convertToTensor)(u,"lstmBias","basicLSTMCell"),q=(0,e.convertToTensor)(T,"data","basicLSTMCell"),C=(0,e.convertToTensor)(d,"c","basicLSTMCell"),L=(0,e.convertToTensor)(m,"h","basicLSTMCell"),S=(0,i.concat)([q,L],1),p=(0,s.matMul)(S,b),h=(0,r.add)(p,v),_=h.shape[0],g=h.shape[1]/4,f=[_,g],x=(0,c.slice)(h,[0,0],f),B=(0,c.slice)(h,[0,g],f),j=(0,c.slice)(h,[0,2*g],f),y=(0,c.slice)(h,[0,3*g],f),K=(0,r.add)((0,o.mul)((0,t.sigmoid)(x),(0,a.tanh)(B)),(0,o.mul)(C,(0,t.sigmoid)((0,r.add)(M,j))));return[K,(0,o.mul)((0,a.tanh)(K),(0,t.sigmoid)(y))]}const u=(0,l.op)({basicLSTMCell_:n});exports.basicLSTMCell=u;
},{"../tensor_util_env":"x0Hg","./add":"geuL","./concat":"gZir","./mat_mul":"A3yk","./mul":"WS4w","./operation":"rO1i","./sigmoid":"QUTt","./slice":"xcz4","./tanh":"Lqgl"}],"dRKG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=c(require("../util")),o=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var c=n?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function u(o,a,c){const u=(0,r.convertToTensor)(o,"x","batchToSpaceND"),i=a.reduce((e,t)=>e*t);n.assert(u.rank>=1+a.length,()=>`input rank is ${u.rank} but should be > than blockShape.length ${a.length}`),n.assert(c.length===a.length,()=>`crops.length is ${c.length} but should be equal to blockShape.length  ${a.length}`),n.assert(u.shape[0]%i==0,()=>`input tensor batch is ${u.shape[0]} but is not divisible by the product of `+`the elements of blockShape ${a.join(" * ")} === ${i}`);const s={x:u},l={blockShape:a,crops:c};return e.ENGINE.runKernelFunc(e=>e.batchToSpaceND(u,a,c),s,null,t.BatchToSpaceND,l)}const i=(0,o.op)({batchToSpaceND_:u});exports.batchToSpaceND=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"gRSO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xAs4D=r;var e=require("./reshape");function r(r){let s;return s=0===r.rank||1===r.rank?(0,e.reshape)(r,[1,1,1,r.size]):2===r.rank?(0,e.reshape)(r,[1,1,r.shape[0],r.shape[1]]):3===r.rank?(0,e.reshape)(r,[1,r.shape[0],r.shape[1],r.shape[2]]):r}
},{"./reshape":"khVG"}],"H6um":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),a=i(require("../util")),t=require("./batchnorm_util"),o=require("./operation"),s=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=a?Object.getOwnPropertyDescriptor(e,t):null;o&&(o.get||o.set)?Object.defineProperty(n,t,o):n[t]=e[t]}return n.default=e,r&&r.set(e,n),n}function c(o,u,i,c,p,h){null==h&&(h=.001);const f=(0,n.convertToTensor)(o,"x","batchNorm"),v=(0,n.convertToTensor)(u,"mean","batchNorm"),m=(0,n.convertToTensor)(i,"variance","batchNorm");let b,k;null!=p&&(b=(0,n.convertToTensor)(p,"scale","batchNorm")),null!=c&&(k=(0,n.convertToTensor)(c,"offset","batchNorm")),a.assert(v.rank===m.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),a.assert(null==k||v.rank===k.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),a.assert(null==b||v.rank===b.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const d=(0,t.xAs4D)(f),q={x:d,scale:b,offset:k,mean:v,variance:m},N={varianceEpsilon:h},y=e.ENGINE.runKernelFunc((e,r)=>(r([d,v,m,b]),e.batchNorm(d,l(v),l(m),l(k),l(b),h)),q,null,r.FusedBatchNorm,N);return(0,s.reshape)(y,f.shape)}function l(e){return null==e?null:0===e.rank?(0,s.reshape)(e,[e.size]):1===e.rank?e:2===e.rank?(0,s.reshape)(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?(0,s.reshape)(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}const p=(0,o.op)({batchNorm_:c});exports.batchNorm=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./batchnorm_util":"gRSO","./operation":"rO1i","./reshape":"khVG"}],"Bfm6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm2d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=o();if(t&&t.has(r))return t.get(r);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var c=n?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(e,a,c):e[a]=r[a]}return e.default=r,t&&t.set(r,e),e}function c(n,o,a,c,u,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=u&&(l=(0,r.convertToTensor)(u,"scale","batchNorm")),null!=c&&(f=(0,r.convertToTensor)(c,"offset","batchNorm")),t.assert(2===i.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank "+`${i.rank}.`),t.assert(2===b.rank||1===b.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+`got rank ${b.rank}.`),t.assert(2===k.rank||1===k.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(2===f.rank||1===f.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const u=(0,n.op)({batchNorm2d_:c});exports.batchNorm2d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./batchnorm":"H6um","./operation":"rO1i"}],"GZN2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm3d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=o();if(t&&t.has(r))return t.get(r);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var c=n?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(e,a,c):e[a]=r[a]}return e.default=r,t&&t.set(r,e),e}function c(n,o,a,c,u,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=u&&(l=(0,r.convertToTensor)(u,"scale","batchNorm")),null!=c&&(f=(0,r.convertToTensor)(c,"offset","batchNorm")),t.assert(3===i.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+`${i.rank}.`),t.assert(3===b.rank||1===b.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+`got rank ${b.rank}.`),t.assert(3===k.rank||1===k.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(3===f.rank||1===f.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const u=(0,n.op)({batchNorm3d_:c});exports.batchNorm3d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./batchnorm":"H6um","./operation":"rO1i"}],"yd3x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchNorm4d=void 0;var r=require("../tensor_util_env"),t=a(require("../util")),e=require("./batchnorm"),n=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return o=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var t=o();if(t&&t.has(r))return t.get(r);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var c=n?Object.getOwnPropertyDescriptor(r,a):null;c&&(c.get||c.set)?Object.defineProperty(e,a,c):e[a]=r[a]}return e.default=r,t&&t.set(r,e),e}function c(n,o,a,c,u,s){const i=(0,r.convertToTensor)(n,"x","batchNorm"),b=(0,r.convertToTensor)(o,"mean","batchNorm"),k=(0,r.convertToTensor)(a,"variance","batchNorm");let l,f;return null!=u&&(l=(0,r.convertToTensor)(u,"scale","batchNorm")),null!=c&&(f=(0,r.convertToTensor)(c,"offset","batchNorm")),t.assert(4===i.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+`${i.rank}.`),t.assert(4===b.rank||1===b.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+`got rank ${b.rank}.`),t.assert(4===k.rank||1===k.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+`but got rank ${k.rank}.`),null!=l&&t.assert(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+`but got rank ${l.rank}.`),null!=f&&t.assert(4===f.rank||1===f.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+`but got rank ${f.rank}.`),(0,e.batchNorm)(i,b,k,f,l,s)}const u=(0,n.op)({batchNorm4d_:c});exports.batchNorm4d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./batchnorm":"H6um","./operation":"rO1i"}],"eQsv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastTo=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./clone"),n=require("./operation"),a=require("./reshape");function s(n,s){let i=(0,o.convertToTensor)(n,"broadcastTo","x");const c=i.shape;if(s.some(e=>!(e>0)||e%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${s}].`);if(s.length<i.rank)throw new Error(`broadcastTo(): shape.length=${s.length} < input.rank=${i.rank}.`);if(s.length>i.rank){const e=i.shape.slice();for(;e.length<s.length;)e.unshift(1);i=(0,a.reshape)(i,e)}const l=i.shape,h=Array.from(s);for(let e=s.length-1;e>=0;e--)if(l[e]===s[e])h[e]=1;else if(1!==i.shape[e])throw new Error(`broadcastTo(): [${c}] cannot be broadcast to [${s}].`);if(0===h.map((e,r)=>e>1?r:-1).filter(e=>e>=0).length)return(0,t.clone)(i);const p={x:i},u={shape:s,inputShape:l};return e.ENGINE.runKernelFunc(e=>e.tile(i,h),p,null,r.BroadcastTo,u)}const i=(0,n.op)({broadcastTo_:s});exports.broadcastTo=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./clone":"HHuR","./operation":"rO1i","./reshape":"khVG"}],"LpmI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceil=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function o(i){const o=(0,n.convertToTensor)(i,"x","ceil"),t={x:o};return e.ENGINE.runKernelFunc(e=>e.ceil(o),t,null,r.Ceil)}const t=(0,i.op)({ceil_:o});exports.ceil=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"qXRG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValue=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),u=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function l(u,o,i){const l=(0,t.convertToTensor)(u,"x","clipByValue");n.assert(o<=i,()=>`Error in clip: min (${o}) must be `+`less than or equal to max (${i}).`);const c={x:l},a={clipValueMin:o,clipValueMax:i};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.clip(l,o,i);return r([l]),t},c,null,r.ClipByValue,a)}const c=(0,u.op)({clipByValue_:l});exports.clipByValue=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"Y9MR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat1d=void 0;var e=require("./concat"),o=require("./operation");function t(o){return(0,e.concat)(o,0)}const c=(0,o.op)({concat1d_:t});exports.concat1d=c;
},{"./concat":"gZir","./operation":"rO1i"}],"lSwZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat2d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat2d_:t});exports.concat2d=c;
},{"./concat":"gZir","./operation":"rO1i"}],"B3HR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat3d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat3d_:t});exports.concat3d=c;
},{"./concat":"gZir","./operation":"rO1i"}],"JLwy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concat4d=void 0;var e=require("./concat"),o=require("./operation");function t(o,t){return(0,e.concat)(o,t)}const c=(0,o.op)({concat4d_:t});exports.concat4d=c;
},{"./concat":"gZir","./operation":"rO1i"}],"K8t2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),s=require("./operation"),i=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(s,a,u,p,c="NHWC",d=[1,1],l){const f=(0,t.convertToTensor)(s,"x","conv2d"),v=(0,t.convertToTensor)(a,"filter","conv2d");let h=f,b=!1;3===f.rank&&(b=!0,h=(0,i.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),n.assert(4===h.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${h.rank}.`),n.assert(4===v.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+`${v.rank}.`),null!=l&&n.assert(n.isInt(p),()=>"Error in conv2d: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${p}.`);const g="NHWC"===c?h.shape[3]:h.shape[1];n.assert(g===v.shape[2],()=>`Error in conv2d: depth of input (${g}) must match `+`input depth for filter ${v.shape[2]}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,d),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${d}'`);const k={x:h,filter:v},m={strides:u,pad:p,dataFormat:c,dilations:d,dimRoundingMode:l},O=e.ENGINE.runKernelFunc((e,r)=>{const t=o.convertConv2DDataFormat(c),n=o.computeConv2DInfo(h.shape,v.shape,u,d,p,l,!1,t),s=e.conv2d(h,v,n);return r([h,v]),s},k,null,r.Conv2D,m);return b?(0,i.reshape)(O,[O.shape[1],O.shape[2],O.shape[3]]):O}const c=(0,s.op)({conv2d_:p});exports.conv2d=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"Dlln":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=i(require("./conv_util")),o=require("./operation"),s=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(o,a,i,p,u="NWC",c=1,d){const h=(0,e.convertToTensor)(o,"x","conv1d"),l=(0,e.convertToTensor)(a,"filter","conv1d");let f=h,v=!1;2===h.rank&&(v=!0,f=(0,s.reshape)(h,[1,h.shape[0],h.shape[1]])),r.assert(3===f.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${f.rank}.`),r.assert(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+`${l.rank}.`),null!=d&&r.assert(r.isInt(p),()=>"Error in conv1d: pad must be an integer when using, "+`dimRoundingMode ${d} but got pad ${p}.`),r.assert(f.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${f.shape[2]}) must match `+`input depth for filter ${l.shape[1]}.`),r.assert(n.eitherStridesOrDilationsAreOne(i,c),()=>"Error in conv1D: Either stride or dilation must be 1. "+`Got stride ${i} and dilation '${c}'`),r.assert("NWC"===u,()=>`Error in conv1d: got dataFormat of ${u} but only NWC is currently supported.`);const b=(0,s.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]]),y=(0,s.reshape)(f,[f.shape[0],1,f.shape[1],f.shape[2]]),g=[1,i],k=[1,c],O=(0,t.conv2d)(y,b,g,p,"NHWC",k,d);return v?(0,s.reshape)(O,[O.shape[2],O.shape[3]]):(0,s.reshape)(O,[O.shape[0],O.shape[2],O.shape[3]])}const u=(0,o.op)({conv1d_:p});exports.conv1d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./conv2d":"K8t2","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"ufM1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=u(require("../util")),n=u(require("./conv_util")),o=require("./operation"),a=require("./reshape");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function s(o,p,u,s,i,c="NHWC",h){t.assert(o.length===p.rank,()=>"Length of inShape "+`(${o.length}) and rank of dy (${p.rank}) must match`);let d=o,l=p,f=!1;3===p.rank&&(f=!0,l=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]),d=[1,o[0],o[1],o[2]]),t.assert(4===d.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+`${d.length}.`),t.assert(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${l.rank}`),t.assert(4===u.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${u.rank}`);const v="NHWC"===c?d[3]:d[1],g="NHWC"===c?l.shape[3]:l.shape[1];t.assert(v===u.shape[2],()=>`Error in conv2dDerInput: depth of input (${v}) must `+`match input depth for filter ${u.shape[2]}.`),t.assert(g===u.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must `+`match output depth for filter ${u.shape[3]}.`),null!=h&&t.assert(t.isInt(i),()=>"Error in conv2dDerInput: pad must be an integer when using, "+`dimRoundingMode ${h} but got pad ${i}.`);const k={dy:l,filter:u},m={strides:s,pad:i,dataFormat:c,dimRoundingMode:h,inputShape:d},D=e.ENGINE.runKernelFunc((e,r)=>{const t=n.convertConv2DDataFormat(c),o=n.computeConv2DInfo(d,u.shape,s,1,i,h,!1,t),a=e.conv2dDerInput(l,u,o);return r([l,u]),a},k,null,r.Conv2DBackpropInput,m);return f?(0,a.reshape)(D,[D.shape[1],D.shape[2],D.shape[3]]):D}const i=(0,o.op)({conv2DBackpropInput_:s});exports.conv2DBackpropInput=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"foig":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv2d_backprop_input"),r=require("./operation");function n(r,n,s,t,p,c){const v=(0,o.convertToTensor)(r,"x","conv2dTranspose"),i=(0,o.convertToTensor)(n,"filter","conv2dTranspose");return(0,e.conv2DBackpropInput)(s,v,i,t,p,"NHWC",c)}const s=(0,r.op)({conv2dTranspose_:n});exports.conv2dTranspose=s;
},{"../tensor_util_env":"x0Hg","./conv2d_backprop_input":"ufM1","./operation":"rO1i"}],"ReLt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),s=require("./operation"),a=require("./reshape");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(s,i,u,p,c="NDHWC",d=[1,1,1]){const l=(0,t.convertToTensor)(s,"x","conv3d"),f=(0,t.convertToTensor)(i,"filter","conv3d");let v=l,h=!1;4===l.rank&&(h=!0,v=(0,a.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),n.assert(5===v.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${v.rank}.`),n.assert(5===f.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+`${f.rank}.`),n.assert(v.shape[4]===f.shape[3],()=>`Error in conv3d: depth of input (${v.shape[4]}) must match `+`input depth for filter ${f.shape[3]}.`),n.assert((0,o.eitherStridesOrDilationsAreOne)(u,d),()=>"Error in conv3D: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '${d}'`),n.assert("NDHWC"===c,()=>`Error in conv3d: got dataFormat of ${c} but only NDHWC is currently supported.`);const b={x:v,filter:f},k={strides:u,pad:p,dataFormat:c,dilations:d},y=e.ENGINE.runKernelFunc((e,r)=>{const t=o.computeConv3DInfo(v.shape,f.shape,u,d,p),n=e.conv3d(v,f,t);return r([v,f]),n},b,null,r.Conv3D,k);return h?(0,a.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const c=(0,s.op)({conv3d_:p});exports.conv3d=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"zJgE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropInput=void 0;var e=require("../engine"),r=require("../kernel_names"),t=u(require("../util")),n=u(require("./conv_util")),p=require("./operation"),o=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if(Object.prototype.hasOwnProperty.call(e,p)){var o=n?Object.getOwnPropertyDescriptor(e,p):null;o&&(o.get||o.set)?Object.defineProperty(t,p,o):t[p]=e[p]}return t.default=e,r&&r.set(e,t),t}function s(p,a,u,s,i){t.assert(p.length===a.rank,()=>"Length of inShape "+`(${p.length}) and rank of dy (${a.rank}) must match`);let c=p,h=a,f=!1;4===a.rank&&(f=!0,h=(0,o.reshape)(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=[1,p[0],p[1],p[2],p[3]]);const l=c[4],d=h.shape[4];t.assert(5===c.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+`${c.length}.`),t.assert(5===h.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+`rank ${h.rank}`),t.assert(5===u.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+`rank ${u.rank}`),t.assert(l===u.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must `+`match input depth for filter ${u.shape[3]}.`),t.assert(d===u.shape[4],()=>`Error in conv3dDerInput: depth of output (${d}) must `+`match output depth for filter ${u.shape[4]}.`);const v={dy:h,filter:u},k={pad:i,strides:s,inputShape:c},g=e.ENGINE.runKernelFunc(e=>{const r=n.computeConv3DInfo(c,u.shape,s,1,i);return e.conv3dDerInput(h,u,r)},v,null,r.Conv3DBackpropInputV2,k);return f?(0,o.reshape)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const i=(0,p.op)({conv3DBackpropInput_:s});exports.conv3DBackpropInput=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"BnR4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3dTranspose=void 0;var o=require("../tensor_util_env"),e=require("./conv3d_backprop_input"),r=require("./operation");function n(r,n,s,t,p){const c=(0,o.convertToTensor)(r,"x","conv3dTranspose"),v=(0,o.convertToTensor)(n,"filter","conv3dTranspose");return(0,e.conv3DBackpropInput)(s,c,v,t,p)}const s=(0,r.op)({conv3dTranspose_:n});exports.conv3dTranspose=s;
},{"../tensor_util_env":"x0Hg","./conv3d_backprop_input":"zJgE","./operation":"rO1i"}],"Ky4d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cos=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,o.convertToTensor)(n,"x","cos"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.cos(s);return r([s]),o},t,null,r.Cos)}const t=(0,n.op)({cos_:s});exports.cos=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"q60v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosh=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,o.convertToTensor)(n,"x","cosh"),t={x:s};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.cosh(s);return r([s]),o},t,null,r.Cosh)}const t=(0,n.op)({cosh_:s});exports.cosh=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"MovR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsum=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./axis_util"),u=require("./operation"),t=require("./transpose");function o(u,o=0,i=!1,c=!1){const l=(0,n.convertToTensor)(u,"x","cumsum"),m={x:l},a={axis:o,exclusive:i,reverse:c};return e.ENGINE.runKernelFunc((e,r)=>{const n=(0,s.getAxesPermutation)([o],l.rank);let u=l;null!=n&&(u=(0,t.transpose)(l,n));const m=(0,s.getInnerMostAxes)(1,l.rank)[0];let a=e.cumsum(u,m,i,c);if(r([l]),null!=n){const e=(0,s.getUndoAxesPermutation)(n);a=(0,t.transpose)(a,e)}return a},m,null,r.Cumsum,a)}const i=(0,u.op)({cumsum_:o});exports.cumsum=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./axis_util":"uTbM","./operation":"rO1i","./transpose":"yiEV"}],"RcRb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthToSpace=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(o,p,i="NHWC"){const a=(0,r.convertToTensor)(o,"x","depthToSpace"),s="NHWC"===i?a.shape[1]:a.shape[2],u="NHWC"===i?a.shape[2]:a.shape[3],c="NHWC"===i?a.shape[3]:a.shape[1];n.assert(s*p>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${p}  for depthToSpace with input shape\n    ${a.shape}`),n.assert(u*p>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${u} and ${p} for depthToSpace with input shape\n        ${a.shape}`),n.assert(c%(p*p)==0,()=>`Dimension size must be evenly divisible by ${p*p} but is ${c} for depthToSpace with input shape ${a.shape}`);const h={x:a},l={blockSize:p,dataFormat:i};return e.ENGINE.runKernelFunc(e=>e.depthToSpace(a,p,i),h,null,t.DepthToSpace,l)}const s=(0,o.op)({depthToSpace_:a});exports.depthToSpace=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"hlJ3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),i=u(require("./conv_util")),s=require("./operation"),o=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function p(s,a,u,p,d="NHWC",h=[1,1],l){const c=(0,t.convertToTensor)(s,"x","depthwiseConv2d"),f=(0,t.convertToTensor)(a,"filter","depthwiseConv2d");let v=c,w=!1;3===c.rank&&(w=!0,v=(0,o.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),n.assert(4===v.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+`rank ${v.rank}.`),n.assert(4===f.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+`${f.rank}.`),n.assert(v.shape[3]===f.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+`(${v.shape[3]}) must match the inChannels dimension in `+`filter ${f.shape[2]}.`),null!=l&&n.assert(n.isInt(p),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${p}.`);const b={x:v,filter:f},C={strides:u,pad:p,dataFormat:d,dilations:h,dimRoundingMode:l},m=e.ENGINE.runKernelFunc((e,r)=>{null==h&&(h=[1,1]),n.assert(i.eitherStridesOrDilationsAreOne(u,h),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${u} and dilations '${h}'`);const t=i.computeConv2DInfo(v.shape,f.shape,u,h,p,l,!0),s=e.depthwiseConv2D(v,f,t);return r([v,f]),s},b,null,r.DepthwiseConv2dNative,C);return w?(0,o.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const d=(0,s.op)({depthwiseConv2d_:p});exports.depthwiseConv2d=d;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"oFFT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation"),s=require("./reshape");function o(i){const o=(0,n.convertToTensor)(i,"x","diag"),t={x:o};return e.ENGINE.runKernelFunc(e=>{const r=(0,s.reshape)(o,[o.size]),n=e.diag(r),t=[...i.shape,...i.shape];return(0,s.reshape)(n,t)},t,null,r.Diag)}const t=(0,i.op)({diag_:o});exports.diag=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./reshape":"khVG"}],"JjSs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2d=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation"),i=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function u(o,a,s,u,l=[1,1],p="NHWC"){const d=(0,t.convertToTensor)(o,"x","dilation2d"),f=(0,t.convertToTensor)(a,"filter","dilation2d");n.assert(3===d.rank||4===d.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank "+`${d.rank}.`),n.assert(3===f.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank "+`${f.rank}.`),n.assert("NHWC"===p,()=>"Error in dilation2d: Only NHWC is currently supported, "+`but got dataFormat of ${p}`);let c=d,k=!1;3===d.rank&&(c=(0,i.reshape)(d,[1,d.shape[0],d.shape[1],d.shape[2]]),k=!0);const b={x:c,filter:f},y={strides:s,pad:u,dilations:l},h=e.ENGINE.runKernel(r.Dilation2D,b,y);return k?(0,i.reshape)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const l=(0,o.op)({dilation2d_:u});exports.dilation2d=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"nprq":[function(require,module,exports) {
"use strict";function t(t,e){const n=t.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,l=t[r]||1;(e[e.length-1-o]||1)>1&&1===l&&s.unshift(r)}return s}function e(t,e){const n=[];for(let s=0;s<e.length;s++){const o=t[t.length-s-1],r=e.length-s-1,l=e[r];(null==o||1===o&&l>1)&&n.unshift(r)}return n}function n(t,e){const n=[],s=Math.max(t.length,e.length);for(let o=0;o<s;o++){let s=t[t.length-o-1];null==s&&(s=1);let r=e[e.length-o-1];if(null==r&&(r=1),1===s)n.unshift(r);else if(1===r)n.unshift(s);else{if(s!==r){throw Error("Operands could not be broadcast together with shapes "+`${t} and ${e}.`)}n.unshift(s)}}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBroadcastDims=t,exports.getReductionAxes=e,exports.assertAndGetBroadcastShape=n;
},{}],"nLPx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.equal=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),u=require("../tensor_util_env"),a=require("./broadcast_util"),n=require("./operation");function o(n,o){let s=(0,u.convertToTensor)(n,"a","equal"),l=(0,u.convertToTensor)(o,"b","equal");[s,l]=(0,t.makeTypesMatch)(s,l),(0,a.assertAndGetBroadcastShape)(s.shape,l.shape);const i={a:s,b:l};return e.ENGINE.runKernelFunc(e=>e.equal(s,l),i,null,r.Equal)}const s=(0,n.op)({equal_:o});exports.equal=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"AEtV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.where=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("../util"),n=require("./broadcast_to"),s=require("./broadcast_util"),a=require("./operation");function i(a,i,c){const u=(0,o.convertToTensor)(i,"a","where"),h=(0,o.convertToTensor)(c,"b","where"),p=(0,o.convertToTensor)(a,"condition","where","bool"),d=(0,s.assertAndGetBroadcastShape)(u.shape,h.shape),l=(0,n.broadcastTo)(u,d),T=(0,n.broadcastTo)(h,d);1===p.rank&&(0,t.assert)(p.shape[0]===u.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),1!==p.rank&&(0,t.assertShapesMatch)(p.shape,T.shape,"Error in where: ");const _={condition:p,t:l,e:T};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.select(p,l,T);return r([p]),o},_,null,r.SelectV2)}const c=(0,a.op)({where_:i});exports.where=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./broadcast_to":"eQsv","./broadcast_util":"nprq","./operation":"rO1i"}],"Jky8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zerosLike=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function i(n){const i=(0,o.convertToTensor)(n,"x","zerosLike"),s={x:i};return e.ENGINE.runKernelFunc(e=>e.zerosLike(i),s,null,r.ZerosLike)}const s=(0,n.op)({zerosLike_:i});exports.zerosLike=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Ztm0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divNoNan=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),o=require("./div"),i=require("./equal"),t=require("./operation"),n=require("./where"),u=require("./zeros_like");function s(t,s){let v=(0,r.convertToTensor)(t,"a","div"),a=(0,r.convertToTensor)(s,"b","div");[v,a]=(0,e.makeTypesMatch)(v,a);const d=(0,o.div)(v,a),q=(0,u.zerosLike)(d),c=(0,i.equal)(a,q);return(0,n.where)(c,q,d)}const v=(0,t.op)({divNoNan_:s});exports.divNoNan=v;
},{"../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./div":"XyQ4","./equal":"nLPx","./operation":"rO1i","./where":"AEtV","./zeros_like":"Jky8"}],"yedZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dot=void 0;var e=require("../tensor_util_env"),r=s(require("../util")),t=require("./mat_mul"),n=require("./operation"),a=require("./reshape");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=n?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}function u(n,o){const s=(0,e.convertToTensor)(n,"t1","dot"),u=(0,e.convertToTensor)(o,"t2","dot");r.assert(!(1!==s.rank&&2!==s.rank||1!==u.rank&&2!==u.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+`${s.rank} and ${u.rank}.`);const i=1===s.rank?s.size:s.shape[1],p=1===u.rank?u.size:u.shape[0];if(r.assert(i===p,()=>"Error in dot: inner dimensions of inputs must match, but got "+`${i} and ${p}.`),1===s.rank&&1===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[-1,1]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[])}if(1===s.rank&&2===u.rank){const e=(0,a.reshape)(s,[1,-1]),r=(0,a.reshape)(u,[u.shape[0],u.shape[1]]),n=(0,t.matMul)(e,r);return(0,a.reshape)(n,[n.size])}if(2===s.rank&&1===u.rank){const e=(0,a.reshape)(u,[-1,1]),r=(0,t.matMul)(s,e);return(0,a.reshape)(r,[r.size])}{const e=(0,a.reshape)(u,[u.shape[0],u.shape[1]]);return(0,t.matMul)(s,e)}}const i=(0,n.op)({dot_:u});exports.dot=i;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./mat_mul":"A3yk","./operation":"rO1i","./reshape":"khVG"}],"uIqF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.elu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./operation");function o(u){const o=(0,n.convertToTensor)(u,"x","elu"),t={x:o};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.elu(o);return r([n]),n},t,null,r.Elu)}const t=(0,u.op)({elu_:o});exports.elu=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"XhJs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erf=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=f(require("../util")),o=require("./cast"),u=require("./operation");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(u){let i=(0,t.convertToTensor)(u,"x","erf");n.assert("int32"===i.dtype||"float32"===i.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===i.dtype&&(i=(0,o.cast)(i,"float32"));const f={x:i};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.erf(i);return r([i]),t},f,null,r.Erf)}const a=(0,u.op)({erf_:p});exports.erf=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./cast":"owKL","./operation":"rO1i"}],"S24W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.exp=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t=(0,n.convertToTensor)(o,"x","exp"),u={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.exp(t);return r([n]),n},u,null,r.Exp)}const u=(0,o.op)({exp_:t});exports.exp=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"uPYU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expandDims=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./reshape");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function s(t,o=0){const i=(0,e.convertToTensor)(t,"x","expandDims",null);r.assert(o<=i.rank,()=>"Axis must be <= rank of the tensor");const s=i.shape.slice();return o<0&&(r.assert(-(i.rank+1)<=o,()=>`Axis must be in the interval [${-(i.rank+1)}, ${i.rank}]`),o=i.rank+o+1),s.splice(o,0,1),(0,n.reshape)(i,s)}const a=(0,t.op)({expandDims_:s});exports.expandDims=a;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"e0GE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function t(o){const t=(0,n.convertToTensor)(o,"x","expm1"),u={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.expm1(t);return r([t]),n},u,null,r.Expm1)}const u=(0,o.op)({expm1_:t});exports.expm1=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"C900":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(o,u){const i=(0,t.convertToTensor)(o,"x","tile",null);n.assert(i.rank===u.length,()=>`Error in transpose: rank of input ${i.rank} `+`must match length of reps ${u}.`);const l=[i],s={x:i},a={reps:u};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.tile(i,u);return r([i]),t},s,null,r.Tile,a,l)}const s=(0,o.op)({tile_:l});exports.tile=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"kWCc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eye=void 0;var e=require("./buffer"),r=require("./expand_dims"),t=require("./operation"),n=require("./reshape"),i=require("./tile");function s(t,s,o,u="float32"){null==s&&(s=t);const l=(0,e.buffer)([t,s],u),p=t<=s?t:s;for(let e=0;e<p;++e)l.set(1,e,e);const a=(0,n.reshape)(l.toTensor(),[t,s]);if(null==o)return a;if(1===o.length)return(0,i.tile)((0,r.expandDims)(a,0),[o[0],1,1]);if(2===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)(a,0),0),[o[0],o[1],1,1]);if(3===o.length)return(0,i.tile)((0,r.expandDims)((0,r.expandDims)((0,r.expandDims)(a,0),0),0),[o[0],o[1],o[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+`batchShapes, but received ${o.length}D.`)}const o=(0,t.op)({eye_:s});exports.eye=o;
},{"./buffer":"SN3d","./expand_dims":"uPYU","./operation":"rO1i","./reshape":"khVG","./tile":"C900"}],"SqIp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fill=l;var e=require("../engine"),r=require("../kernel_names");function l(l,n,u){const t={shape:l,value:n,dtype:u};return e.ENGINE.runKernelFunc(e=>e.fill(l,n,u),{},null,r.Fill,t)}
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"mwl0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floor=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t=(0,o.convertToTensor)(n,"x","floor"),l={x:t};return e.ENGINE.runKernelFunc(e=>e.floor(t),l,null,r.Floor)}const l=(0,n.op)({floor_:t});exports.floor=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"q1BX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeOptimalWindowSize=r,exports.PARALLELIZE_THRESHOLD=void 0;var e=require("../util");const t=30;function r(r){return r<=t?r:(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)))}exports.PARALLELIZE_THRESHOLD=t;
},{"../util":"UxaK"}],"mcNf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.segOpComputeOptimalWindowSize=r,exports.computeOutShape=s,exports.collectGatherOpShapeInfo=o;var e=require("../util"),t=require("./reduce_util");function r(r,s){let o,p=!1;for(r<=t.PARALLELIZE_THRESHOLD?(o=r,p=!0):o=(0,e.nearestDivisor)(r,Math.floor(Math.sqrt(r)));!p;)o>s||o===r?p=!0:o=(0,e.nearestDivisor)(r,o+1);return o}function s(e,t,r){const s=[],o=e.length;for(let p=0;p<o;p++)p!==t?s.push(e[p]):s.push(r);return s}function o(e,t,r){const s=e.shape[r],o=[];let p=1,u=1;for(let i=0;i<r;i++)o.push(e.shape[i]),p*=e.shape[i];for(let i=0;i<t.rank;i++)o.push(t.shape[i]);for(let i=r+1;i<e.rank;i++)o.push(e.shape[i]),u*=e.shape[i];return{batchSize:p,sliceSize:u,dimSize:s,outputShape:o}}
},{"../util":"UxaK","./reduce_util":"q1BX"}],"Quad":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gather=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),i=require("./operation"),s=require("./reshape"),o=require("./segment_util");function a(i,a,u=0){const p=(0,t.convertToTensor)(i,"x","gather"),h=(0,t.convertToTensor)(a,"indices","gather","int32"),c={x:p,indices:h},l={axis:u};return e.ENGINE.runKernelFunc((e,r)=>{const t=(0,n.parseAxisParam)(u,p.shape)[0],i=(0,o.collectGatherOpShapeInfo)(p,h,t),a=e.gather(p,(0,s.reshape)(h,[h.size]),t);return r([p,h]),(0,s.reshape)(a,i.outputShape)},c,null,r.GatherV2,l)}const u=(0,i.op)({gather_:a});exports.gather=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG","./segment_util":"mcNf"}],"i1I6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greater=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function s(o,s){let u=(0,a.convertToTensor)(o,"a","greater"),i=(0,a.convertToTensor)(s,"b","greater");[u,i]=(0,t.makeTypesMatch)(u,i),(0,n.assertAndGetBroadcastShape)(u.shape,i.shape);const c={a:u,b:i};return e.ENGINE.runKernelFunc(e=>e.greater(u,i),c,null,r.Greater)}const u=(0,o.op)({greater_:s});exports.greater=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"wG0H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.greaterEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),a=require("../tensor_util_env"),n=require("./broadcast_util"),u=require("./operation");function o(u,o){let s=(0,a.convertToTensor)(u,"a","greaterEqual"),l=(0,a.convertToTensor)(o,"b","greaterEqual");[s,l]=(0,t.makeTypesMatch)(s,l),(0,n.assertAndGetBroadcastShape)(s.shape,l.shape);const i={a:s,b:l};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.greaterEqual(s,l);return r([s,l]),t},i,null,r.GreaterEqual)}const s=(0,u.op)({greaterEqual_:o});exports.greaterEqual=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"P5ES":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.imag=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),i=require("./operation");function t(i){const t=(0,n.convertToTensor)(i,"input","imag"),o={input:t};return e.ENGINE.runKernelFunc(e=>e.imag(t),o,null,r.Imag)}const o=(0,i.op)({imag_:t});exports.imag=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"yOVm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isFinite=void 0;var e=require("../engine"),i=require("../kernel_names"),n=require("../tensor_util_env"),r=require("./operation");function t(r){const t=(0,n.convertToTensor)(r,"x","isFinite"),s={x:t};return e.ENGINE.runKernelFunc(e=>e.isFinite(t),s,null,i.IsFinite)}const s=(0,r.op)({isFinite_:t});exports.isFinite=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"En43":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isInf=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),s=require("./operation");function i(s){const i=(0,r.convertToTensor)(s,"x","isInf"),o={x:i};return e.ENGINE.runKernelFunc(e=>e.isInf(i),o,null,n.IsInf)}const o=(0,s.op)({isInf_:i});exports.isInf=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"rCb4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaN=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("./operation");function i(s){const i=(0,n.convertToTensor)(s,"x","isNaN"),o={x:i};return e.ENGINE.runKernelFunc(e=>e.isNaN(i),o,null,r.IsNan)}const o=(0,s.op)({isNaN_:i});exports.isNaN=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"nmNC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maximum=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),a=require("./broadcast_util"),u=require("./cast"),i=require("./operation");function o(i,o){let s=(0,n.convertToTensor)(i,"a","maximum"),m=(0,n.convertToTensor)(o,"b","maximum");[s,m]=(0,t.makeTypesMatch)(s,m),"bool"===s.dtype&&(s=(0,u.cast)(s,"int32"),m=(0,u.cast)(m,"int32")),(0,a.assertAndGetBroadcastShape)(s.shape,m.shape);const c={a:s,b:m};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.maximum(s,m);return r([s,m]),t},c,null,r.Maximum)}const s=(0,i.op)({maximum_:o});exports.maximum=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./cast":"owKL","./operation":"rO1i"}],"RBNv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scalar=t;var r=require("../util"),e=require("./tensor_ops_util");function t(t,a){if(((0,r.isTypedArray)(t)&&"string"!==a||Array.isArray(t))&&"complex64"!==a)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===a&&(0,r.isTypedArray)(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,e.makeTensor)(t,[],[],a)}
},{"../util":"UxaK","./tensor_ops_util":"N5j4"}],"BMkp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.leakyRelu=void 0;var e=require("../tensor_util_env"),r=require("./maximum"),u=require("./mul"),o=require("./operation"),l=require("./scalar");function t(o,t=.2){const a=(0,e.convertToTensor)(o,"x","leakyRelu");return(0,r.maximum)((0,u.mul)((0,l.scalar)(t),a),a)}const a=(0,o.op)({leakyRelu_:t});exports.leakyRelu=a;
},{"../tensor_util_env":"x0Hg","./maximum":"nmNC","./mul":"WS4w","./operation":"rO1i","./scalar":"RBNv"}],"PrnK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.less=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),n=require("./broadcast_util"),o=require("./operation");function u(o,u){let a=(0,t.convertToTensor)(o,"a","less"),l=(0,t.convertToTensor)(u,"b","less");[a,l]=(0,s.makeTypesMatch)(a,l),(0,n.assertAndGetBroadcastShape)(a.shape,l.shape);const i={a:a,b:l};return e.ENGINE.runKernelFunc(e=>e.less(a,l),i,null,r.Less)}const a=(0,o.op)({less_:u});exports.less=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"NxL8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lessEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util"),t=require("../tensor_util_env"),n=require("./broadcast_util"),u=require("./operation");function a(u,a){let l=(0,t.convertToTensor)(u,"a","lessEqual"),o=(0,t.convertToTensor)(a,"b","lessEqual");[l,o]=(0,s.makeTypesMatch)(l,o),(0,n.assertAndGetBroadcastShape)(l.shape,o.shape);const i={a:l,b:o};return e.ENGINE.runKernelFunc((e,r)=>{const s=e.lessEqual(l,o);return r([l,o]),s},i,null,r.LessEqual)}const l=(0,u.op)({lessEqual_:a});exports.lessEqual=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"y9TR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linspace=n;var e=require("../engine"),r=require("../kernel_names");function n(n,s,t){if(t<=0)throw new Error("The number of values should be positive.");const u={start:n,stop:s,num:t};return e.ENGINE.runKernelFunc(e=>e.linspace(n,s,t),{},null,r.LinSpace,u)}
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"AJX7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.localResponseNormalization=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation"),a=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(o,s=5,i=1,l=1,u=.5){const p=(0,t.convertToTensor)(o,"x","localResponseNormalization");n.assert(4===p.rank||3===p.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${p.rank}.`),n.assert(n.isInt(s),()=>"Error in localResponseNormalization: depthRadius must be an "+`integer but got depthRadius ${s}.`);let c=p,f=!1;3===p.rank&&(f=!0,c=(0,a.reshape)(p,[1,p.shape[0],p.shape[1],p.shape[2]]));const h={x:c},d={depthRadius:s,bias:i,alpha:l,beta:u},b=e.ENGINE.runKernelFunc((e,r)=>{const t=e.localResponseNormalization4D(c,s,i,l,u);return r([c,t]),t},h,null,r.LRN,d);return f?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const u=(0,o.op)({localResponseNormalization_:l});exports.localResponseNormalization=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"UG1b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t=(0,o.convertToTensor)(n,"x","log"),u={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.log(t);return r([t]),o},u,null,r.Log)}const u=(0,n.op)({log_:t});exports.log=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Tu9m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.log1p=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function t(n){const t=(0,o.convertToTensor)(n,"x","log1p"),u={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.log1p(t);return r([t]),o},u,null,r.Log1p)}const u=(0,n.op)({log1p_:t});exports.log1p=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"FjdM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.customGrad=f,exports.variableGrads=d,exports.valueAndGrad=i,exports.valueAndGrads=l,exports.grad=o,exports.grads=u;var e=require("./engine"),r=require("./tensor"),a=require("./tensor_util_env"),s=n(require("./util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(a,n,o):a[n]=e[n]}return a.default=e,r&&r.set(e,a),a}function o(r){return s.assert(s.isFunction(r),()=>"The f passed in grad(f) must be a function"),(t,n)=>{const o=(0,a.convertToTensor)(t,"x","tf.grad",null),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grad"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(o),[o],u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),c(t),t[0]})}}function u(r){return s.assert(s.isFunction(r),()=>"The f passed in grads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const o=(0,a.convertToTensorArray)(t,"args","tf.grads",null),u=null!=n?(0,a.convertToTensor)(n,"dy","tf.grads"):null;return e.ENGINE.tidy(()=>{const{value:a,grads:t}=e.ENGINE.gradients(()=>r(...o),o,u);return null!=u&&s.assertShapesMatch(a.shape,u.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(t),t})}}function i(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{s.assert(t instanceof r.Tensor,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:o,value:u}=e.ENGINE.gradients(()=>a(t),[t],n);return c(o),{grad:o[0],value:u}}}function l(a){return s.assert(s.isFunction(a),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{s.assert(Array.isArray(t)&&t.every(e=>e instanceof r.Tensor),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),s.assert(null==n||n instanceof r.Tensor,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const o=e.ENGINE.gradients(()=>a(...t),t,n);return null!=n&&s.assertShapesMatch(o.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(o.grads),o}}function d(a,t){s.assert(s.isFunction(a),()=>"The f passed in variableGrads(f) must be a function"),s.assert(null==t||Array.isArray(t)&&t.every(e=>e instanceof r.Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=t;if(!n){t=[];for(const r in e.ENGINE.registeredVariables)t.push(e.ENGINE.registeredVariables[r])}const o=n?t.filter(e=>!e.trainable):null,u=t.length;t=t.filter(e=>e.trainable),s.assert(t.length>0,()=>"variableGrads() expects at least one of the input variables to "+`be trainable, but none of the ${u} variables is `+"trainable.");const{value:i,grads:l}=e.ENGINE.gradients(a,t,null,!0);s.assert(l.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),s.assert(0===i.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+`returned a rank-${i.rank} tensor`);const d={};return t.forEach((e,r)=>{null!=l[r]&&(d[e.name]=l[r])}),null!=o&&o.forEach(e=>d[e.name]=null),{value:i,grads:d}}function f(r){return e.ENGINE.customGrad(r)}function c(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}
},{"./engine":"tmUz","./tensor":"Zqvm","./tensor_util_env":"x0Hg","./util":"UxaK"}],"wgz6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.neg=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),o=require("./operation");function t(o){const t=(0,r.convertToTensor)(o,"x","neg"),u={x:t};return e.ENGINE.runKernelFunc(e=>e.neg(t),u,null,n.Negate)}const u=(0,o.op)({neg_:t});exports.neg=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"rchi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softplus=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),s=require("./operation");function t(s){const t=(0,o.convertToTensor)(s,"x","softplus"),n={x:t};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.softplus(t);return r([t]),o},n,null,r.Softplus)}const n=(0,s.op)({softplus_:t});exports.softplus=n;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"gSaY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSigmoid=void 0;var e=require("../gradients"),r=require("../tensor_util_env"),o=require("./mul"),i=require("./neg"),u=require("./operation"),t=require("./sigmoid"),n=require("./softplus");function s(u){const s=(0,r.convertToTensor)(u,"x","logSigmoid");return(0,e.customGrad)(e=>{return{value:(0,i.neg)((0,n.softplus)((0,i.neg)(e))),gradFunc:r=>{return(0,o.mul)(r,(0,t.sigmoid)((0,i.neg)(e)))}}})(s)}const g=(0,u.op)({logSigmoid_:s});exports.logSigmoid=g;
},{"../gradients":"FjdM","../tensor_util_env":"x0Hg","./mul":"WS4w","./neg":"wgz6","./operation":"rO1i","./sigmoid":"QUTt","./softplus":"rchi"}],"SjY8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.max=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=p(require("../util")),o=p(require("./axis_util")),s=require("./operation"),a=require("./reshape"),i=require("./transpose");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(s,u=null,p=!1){const l=(0,t.convertToTensor)(s,"x","max"),c={x:l},f={reductionIndices:u,keepDims:p};return e.ENGINE.runKernelFunc((e,r)=>{let t=n.parseAxisParam(u,l.shape);const s=o.getAxesPermutation(t,l.rank);let c=l;null!=s&&(c=(0,i.transpose)(l,s),t=o.getInnerMostAxes(t.length,c.rank));const f=e.max(c,t);null!=s&&c.dispose();let x=f;if(p){const e=o.expandShapeToKeepDim(x.shape,n.parseAxisParam(u,l.shape));x=(0,a.reshape)(x,e),f.dispose()}return r([l,x]),x},c,null,r.Max,f)}const c=(0,s.op)({max_:l});exports.max=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"OFjl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sub=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),u=require("./operation");function o(u,o){let s=(0,t.convertToTensor)(u,"a","sub"),i=(0,t.convertToTensor)(o,"b","sub");[s,i]=(0,n.makeTypesMatch)(s,i);const c={a:s,b:i};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.subtract(s,i);return r([s,i]),n},c,null,r.Sub)}const s=(0,u.op)({sub_:o});exports.sub=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"YHNB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=void 0;var e=require("../engine"),r=require("../kernel_names"),s=require("../tensor_util_env"),t=require("../util"),n=require("./axis_util"),u=require("./cast"),i=require("./operation"),o=require("./reshape"),a=require("./transpose");function l(i,l=null,p=!1){let c=(0,s.convertToTensor)(i,"x","sum");"bool"===c.dtype&&(c=(0,u.cast)(c,"int32"));const m={x:c},x={axis:l,keepDims:p};return e.ENGINE.runKernelFunc((e,r)=>{r([c]);const s=(0,t.parseAxisParam)(l,c.shape),u=(0,n.getAxesPermutation)(s,c.rank);let i=s,m=c;null!=u&&(m=(0,a.transpose)(c,u),i=(0,n.getInnerMostAxes)(i.length,c.rank));let x=e.sum(m,i);if(p){const e=(0,n.expandShapeToKeepDim)(x.shape,s);x=(0,o.reshape)(x,e)}return x},m,null,r.Sum,x)}const p=(0,i.op)({sum_:l});exports.sum=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./cast":"owKL","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"Q1Fm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSoftmax=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./cast"),n=require("./exp"),s=require("./log"),a=require("./max"),i=require("./operation"),u=require("./sub"),l=require("./sum");function x(i,x=-1){const g=(0,o.convertToTensor)(i,"logits","logSoftmax");if(-1===x&&(x=g.rank-1),x!==g.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${g.rank} and axis was ${x}`);const m={logits:g},c={axis:x};return e.ENGINE.runKernelFunc((e,r)=>{const o=(0,a.max)(i,x,!0),g=(0,u.sub)(i,o),m=(0,u.sub)((0,t.cast)(g,"float32"),(0,s.log)((0,l.sum)((0,n.exp)(g),x,!0)));return r([m]),m},m,null,r.LogSoftmax,c)}const g=(0,i.op)({logSoftmax_:x});exports.logSoftmax=g;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./cast":"owKL","./exp":"S24W","./log":"UG1b","./max":"SjY8","./operation":"rO1i","./sub":"OFjl","./sum":"YHNB"}],"twrn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logSumExp=void 0;var e=require("../tensor_util_env"),r=require("../util"),u=require("./add"),o=require("./axis_util"),s=require("./exp"),i=require("./log"),p=require("./max"),a=require("./operation"),t=require("./reshape"),n=require("./sub"),x=require("./sum");function l(a,l=null,q=!1){const m=(0,e.convertToTensor)(a,"x","logSumExp"),d=(0,r.parseAxisParam)(l,m.shape),c=(0,p.max)(m,d,!0),h=(0,n.sub)(m,c),g=(0,s.exp)(h),_=(0,x.sum)(g,d),v=(0,i.log)(_),S=(0,u.add)((0,t.reshape)(c,v.shape),v);if(q){const e=(0,o.expandShapeToKeepDim)(S.shape,d);return(0,t.reshape)(S,e)}return S}const q=(0,a.op)({logSumExp_:l});exports.logSumExp=q;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./add":"geuL","./axis_util":"uTbM","./exp":"S24W","./log":"UG1b","./max":"SjY8","./operation":"rO1i","./reshape":"khVG","./sub":"OFjl","./sum":"YHNB"}],"ntJL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalAnd=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./broadcast_util"),l=require("./operation");function t(l,t){const a=(0,r.convertToTensor)(l,"a","logicalAnd","bool"),i=(0,r.convertToTensor)(t,"b","logicalAnd","bool");(0,n.assertAndGetBroadcastShape)(a.shape,i.shape);const s={a:a,b:i};return e.ENGINE.runKernelFunc(e=>e.logicalAnd(a,i),s,null,o.LogicalAnd)}const a=(0,l.op)({logicalAnd_:t});exports.logicalAnd=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"SOqM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalNot=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function l(t){const l=(0,r.convertToTensor)(t,"x","logicalNot","bool"),n={x:l};return e.ENGINE.runKernelFunc(e=>e.logicalNot(l),n,null,o.LogicalNot)}const n=(0,t.op)({logicalNot_:l});exports.logicalNot=n;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"IQZP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalOr=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),l=require("./broadcast_util"),n=require("./operation");function t(n,t){const a=(0,o.convertToTensor)(n,"a","logicalOr","bool"),i=(0,o.convertToTensor)(t,"b","logicalOr","bool");(0,l.assertAndGetBroadcastShape)(a.shape,i.shape);const s={a:a,b:i};return e.ENGINE.runKernelFunc(e=>e.logicalOr(a,i),s,null,r.LogicalOr)}const a=(0,n.op)({logicalOr_:t});exports.logicalOr=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"PsE3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logicalXor=void 0;var o=require("../tensor_util_env"),r=require("./broadcast_util"),e=require("./logical_and"),l=require("./logical_not"),a=require("./logical_or"),i=require("./operation");function t(i,t){const c=(0,o.convertToTensor)(i,"a","logicalXor","bool"),n=(0,o.convertToTensor)(t,"b","logicalXor","bool");return(0,r.assertAndGetBroadcastShape)(c.shape,n.shape),(0,e.logicalAnd)((0,a.logicalOr)(i,t),(0,l.logicalNot)((0,e.logicalAnd)(i,t)))}const c=(0,i.op)({logicalXor_:t});exports.logicalXor=c;
},{"../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./logical_and":"ntJL","./logical_not":"SOqM","./logical_or":"IQZP","./operation":"rO1i"}],"RWms":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=u(require("../util")),o=u(require("./conv_util")),i=require("./operation"),a=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(i,s,u,l,p){const c=(0,t.convertToTensor)(i,"x","maxPool");let d=c,f=!1;3===c.rank&&(f=!0,d=(0,a.reshape)(c,[1,c.shape[0],c.shape[1],c.shape[2]])),n.assert(4===d.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${d.rank}.`),n.assert(o.eitherStridesOrDilationsAreOne(u,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${u} and dilations '1'`),null!=p&&n.assert(n.isInt(l),()=>"Error in maxPool: pad must be an integer when using, "+`dimRoundingMode ${p} but got pad ${l}.`);const h={x:d},P={filterSize:s,strides:u,pad:l,dimRoundingMode:p},m=e.ENGINE.runKernelFunc((e,r)=>{const t=o.computePool2DInfo(d.shape,s,u,1,l,p);let i;return i=1===t.filterWidth&&1===t.filterHeight&&n.arraysEqual(t.inShape,t.outShape)?d.clone():e.maxPool(d,t),r([d,i]),i},h,null,r.MaxPool,P);return f?(0,a.reshape)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const p=(0,i.op)({maxPool_:l});exports.maxPool=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"y3Dx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPool3d=void 0;var e=require("../engine"),r=require("../globals"),t=require("../kernel_names"),o=require("../tensor_util_env"),n=l(require("../util")),a=l(require("./conv_util")),i=require("./operation"),s=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function d(i,u=[1,1,1],l,d,p,c="NDHWC",f){null==f?f=[1,1,1]:(0,r.deprecationWarn)("dilations is deprecated, this field will be gone in v3.0.0.");const h=(0,o.convertToTensor)(i,"x","maxPool3d");let m=h,P=!1;4===h.rank&&(P=!0,m=(0,s.reshape)(h,[1,h.shape[0],h.shape[1],h.shape[2],h.shape[3]])),n.assert(5===m.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${m.rank}.`),n.assert("NDHWC"===c,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${c}`),n.assert(a.eitherStridesOrDilationsAreOne(l,f),()=>"Error in maxPool3d: Either strides or dilations must be 1. "+`Got strides ${l} and dilations '${f}'`),null!=p&&n.assert(n.isInt(d),()=>"Error in maxPool3d: pad must be an integer when using, "+`dimRoundingMode ${p} but got pad ${d}.`);const x={x:m},b={filterSize:u,strides:l,pad:d,dimRoundingMode:p,dataFormat:c,dilations:f},g=e.ENGINE.runKernelFunc((e,r)=>{null==f&&(f=[1,1,1]);const t=a.computePool3DInfo(m.shape,u,l,f,d,p,c),o=e.maxPool3d(m,t);return r([m,o]),o},x,null,t.MaxPool3D,b);return P?(0,s.reshape)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const p=(0,i.op)({maxPool3d_:d});exports.maxPool3d=p;
},{"../engine":"tmUz","../globals":"UkUu","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"ZH85":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxPoolWithArgmax=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=require("./operation");function i(t,i,n,x,a=!1){const s={x:(0,o.convertToTensor)(t,"x","maxPoolWithArgmax")},l={filterSize:i,strides:n,pad:x,includeBatchInIndex:a},u=e.ENGINE.runKernel(r.MaxPoolWithArgmax,s,l);return{result:u[0],indexes:u[1]}}const n=(0,t.op)({maxPoolWithArgmax_:i});exports.maxPoolWithArgmax=n;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"MNgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zeros=t;var e=require("../engine"),r=require("../util"),o=require("./complex");function t(s,i="float32"){if("complex64"===i){const e=t(s,"float32"),r=t(s,"float32");return(0,o.complex)(e,r)}const n=(0,r.makeZerosTypedArray)((0,r.sizeFromShape)(s),i);return e.ENGINE.makeTensor(n,s,i)}
},{"../engine":"tmUz","../util":"UxaK","./complex":"BDDu"}],"eTx1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ones=s;var e=require("../engine"),r=require("../util"),o=require("./complex"),t=require("./zeros");function s(n,i="float32"){if("complex64"===i){const e=s(n,"float32"),r=(0,t.zeros)(n,"float32");return(0,o.complex)(e,r)}const u=(0,r.makeOnesTypedArray)((0,r.sizeFromShape)(n),i);return e.ENGINE.makeTensor(u,n,i)}
},{"../engine":"tmUz","../util":"UxaK","./complex":"BDDu","./zeros":"MNgB"}],"Yc5n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mean=void 0;var e=require("../engine"),r=require("../gradients"),u=require("../kernel_names"),s=require("../tensor_util_env"),n=require("../util"),a=require("./axis_util"),i=require("./cast"),t=require("./div"),o=require("./mul"),c=require("./ones"),p=require("./operation"),l=require("./reshape"),d=require("./scalar"),m=require("./sum");function q(p,q=null,h=!1){const v=(0,s.convertToTensor)(p,"x","mean"),x=(0,n.parseAxisParam)(q,v.shape),_=(0,a.computeOutAndReduceShapes)(v.shape,x)[1],f=(0,n.sizeFromShape)(_),y={x:v},g={axis:q,keepDims:h},E=()=>{const e=(0,d.scalar)(f),r=e.dtype===v.dtype?v:(0,i.cast)(v,e.dtype),u=(0,t.div)(r,e);return(0,m.sum)(u,q,h)};return(0,r.customGrad)(r=>{return{value:e.ENGINE.runKernelFunc(E,y,null,u.Mean,g),gradFunc:e=>{const u=r.shape.slice();x.forEach(e=>{u[e]=1});const s=(0,l.reshape)(e,u);return(0,t.div)((0,o.mul)(s,(0,c.ones)(r.shape,"float32")),f)}}})(v)}const h=(0,p.op)({mean_:q});exports.mean=h;
},{"../engine":"tmUz","../gradients":"FjdM","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./cast":"owKL","./div":"XyQ4","./mul":"WS4w","./ones":"eTx1","./operation":"rO1i","./reshape":"khVG","./scalar":"RBNv","./sum":"YHNB"}],"z8cA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.min=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),i=p(require("./axis_util")),o=require("./operation"),s=require("./reshape"),u=require("./transpose");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(t,i,o):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function l(o,a=null,p=!1){const l=(0,t.convertToTensor)(o,"x","min"),c={x:l},f={axis:a,keepDims:p};return e.ENGINE.runKernelFunc((e,r)=>{const t=(0,n.parseAxisParam)(a,l.shape);let o=t;const c=i.getAxesPermutation(o,l.rank);let f=l;null!=c&&(f=(0,u.transpose)(l,c),o=i.getInnerMostAxes(o.length,l.rank));const d=e.min(f,o);null!=c&&f.dispose();let x=d;if(p){const e=i.expandShapeToKeepDim(x.shape,t);x=(0,s.reshape)(d,e),d.dispose()}return r([l,x]),x},c,null,r.Min,f)}const c=(0,o.op)({min_:l});exports.min=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"q3lt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.minimum=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),t=require("../tensor_util_env"),i=require("./broadcast_util"),u=require("./cast"),o=require("./operation");function s(o,s){let m=(0,t.convertToTensor)(o,"a","minimum"),a=(0,t.convertToTensor)(s,"b","minimum");[m,a]=(0,n.makeTypesMatch)(m,a),"bool"===m.dtype&&(m=(0,u.cast)(m,"int32"),a=(0,u.cast)(a,"int32")),(0,i.assertAndGetBroadcastShape)(m.shape,a.shape);const c={a:m,b:a};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.minimum(m,a);return r([m,a]),n},c,null,r.Minimum)}const m=(0,o.op)({minimum_:s});exports.minimum=m;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./cast":"owKL","./operation":"rO1i"}],"c1Zo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mirrorPad=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=i(require("../util")),o=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function s(o,a,i){n.assert("reflect"===i||"symmetric"===i,()=>"Invalid mode. Mode must be either reflect or symmetric. "+`Got ${i}.`);const s=(0,t.convertToTensor)(o,"x","mirrorPad");if(0===s.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");n.assert(a.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. `+`Got ${a.length}.`);const u="reflect"===i?1:0;for(let e=0;e<s.rank;e++)n.assert(2===a[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),n.assert(a[e][0]>=0&&a[e][0]<=s.shape[e]-u&&a[e][1]>=0&&a[e][1]<=s.shape[e]-u,()=>`Padding in dimension ${e} cannot be greater than or equal `+`to ${s.shape[e]-u} or less than 0 for input of `+`shape ${s.shape}`);const c={paddings:a,mode:i},d={x:s};return e.ENGINE.runKernel(r.MirrorPad,d,c)}const u=(0,o.op)({mirrorPad_:s});exports.mirrorPad=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"oTGE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mod=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function u(t,u){let s=(0,n.convertToTensor)(t,"a","mod"),i=(0,n.convertToTensor)(u,"b","mod");[s,i]=(0,o.makeTypesMatch)(s,i);const c={a:s,b:i};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.mod(s,i);return r([s,i]),o},c,null,r.Mod)}const s=(0,t.op)({mod_:u});exports.mod=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"rLyD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.square=void 0;var e=require("../engine"),r=require("../tensor_util_env"),u=require("./operation");function n(u){const n=(0,r.convertToTensor)(u,"x","square"),o=[n];return e.ENGINE.runKernelFunc((e,r)=>(r([n]),e.square(n)),{x:n},null,"Square",{},o,[])}const o=(0,u.op)({square_:n});exports.square=o;
},{"../engine":"tmUz","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"X3OC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moments=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./axis_util"),t=require("./cast"),a=require("./mean"),n=require("./operation"),o=require("./reshape"),u=require("./square"),i=require("./sub");function p(n,p=null,m=!1){n=(0,e.convertToTensor)(n,"x","moments");const q=(0,r.parseAxisParam)(p,n.shape),c=(0,a.mean)(n,q,m);let l=c.shape;m||(l=(0,s.expandShapeToKeepDim)(c.shape,q));const x=(0,u.square)((0,i.sub)((0,t.cast)(n,"float32"),(0,o.reshape)(c,l)));return{mean:c,variance:(0,a.mean)(x,q,m)}}const m=(0,n.op)({moments_:p});exports.moments=m;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./cast":"owKL","./mean":"Yc5n","./operation":"rO1i","./reshape":"khVG","./square":"rLyD","./sub":"OFjl"}],"ePcS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multiRNNCell=void 0;var e=require("../tensor_util_env"),t=require("./operation");function o(t,o,r,l){const n=(0,e.convertToTensor)(o,"data","multiRNNCell"),s=(0,e.convertToTensorArray)(r,"c","multiRNNCell"),u=(0,e.convertToTensorArray)(l,"h","multiRNNCell");let i=n;const c=[];for(let e=0;e<t.length;e++){const o=t[e](i,s[e],u[e]);c.push(o[0]),c.push(o[1]),i=o[1]}const N=[],p=[];for(let e=0;e<c.length;e+=2)N.push(c[e]),p.push(c[e+1]);return[N,p]}const r=(0,t.op)({multiRNNCell_:o});exports.multiRNNCell=r;
},{"../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Pjd4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.multinomial=void 0;var e=require("../engine"),r=require("../tensor_util_env"),o=require("./operation"),t=require("./reshape");function i(o,i,n,s=!1){const u=(0,r.convertToTensor)(o,"logits","multinomial"),l=u.size,a=u.rank;if(l<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${l}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const m=1===a?(0,t.reshape)(u,[1,-1]):u,p=e.ENGINE.runKernelFunc(e=>e.multinomial(m,s,i,n),{logits2D:m});return 1===a?(0,t.reshape)(p,[p.size]):p}const n=(0,o.op)({multinomial_:i});exports.multinomial=n;
},{"../engine":"tmUz","../tensor_util_env":"x0Hg","./operation":"rO1i","./reshape":"khVG"}],"RlXH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqual=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util"),n=require("../tensor_util_env"),o=require("./broadcast_util"),u=require("./operation");function a(u,a){let s=(0,n.convertToTensor)(u,"a","notEqual"),l=(0,n.convertToTensor)(a,"b","notEqual");[s,l]=(0,t.makeTypesMatch)(s,l),(0,o.assertAndGetBroadcastShape)(s.shape,l.shape);const i={a:s,b:l};return e.ENGINE.runKernelFunc(e=>e.notEqual(s,l),i,null,r.NotEqual)}const s=(0,u.op)({notEqual_:a});exports.notEqual=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"QPTK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.real=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,n.convertToTensor)(t,"input","real"),u={input:o};return e.ENGINE.runKernelFunc(e=>e.real(o),u,null,r.Real)}const u=(0,t.op)({real_:o});exports.real=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"XhV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onesLike=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./complex"),i=require("./imag"),s=require("./operation"),t=require("./real"),u=require("./zeros_like");function l(s){const l=(0,n.convertToTensor)(s,"x","onesLike"),p={x:l};return e.ENGINE.runKernelFunc((e,r)=>{if("complex64"===l.dtype){const e=c((0,t.real)(l)),r=(0,u.zerosLike)((0,i.imag)(l));return(0,o.complex)(e,r)}return e.onesLike(l)},p,null,r.OnesLike)}const c=(0,s.op)({onesLike_:l});exports.onesLike=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./complex":"BDDu","./imag":"P5ES","./operation":"rO1i","./real":"QPTK","./zeros_like":"Jky8"}],"BREf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.outerProduct=void 0;var r=require("../tensor_util_env"),e=a(require("../util")),t=require("./mat_mul"),o=require("./operation"),n=require("./reshape");function u(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return u=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=u();if(e&&e.has(r))return e.get(r);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var a=o?Object.getOwnPropertyDescriptor(r,n):null;a&&(a.get||a.set)?Object.defineProperty(t,n,a):t[n]=r[n]}return t.default=r,e&&e.set(r,t),t}function i(o,u){const a=(0,r.convertToTensor)(o,"v1","outerProduct"),i=(0,r.convertToTensor)(u,"v2","outerProduct");e.assert(1===a.rank&&1===i.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+`${a.rank} and ${i.rank}.`);const c=(0,n.reshape)(a,[-1,1]),s=(0,n.reshape)(i,[1,-1]);return(0,t.matMul)(c,s)}const c=(0,o.op)({outerProduct_:i});exports.outerProduct=c;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./mat_mul":"A3yk","./operation":"rO1i","./reshape":"khVG"}],"NuCu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function a(o,a,t=0){const s=(0,n.convertToTensor)(o,"x","pad");if(0===s.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const d={paddings:a,constantValue:t},i={x:s};return e.ENGINE.runKernelFunc((e,r)=>(r([s]),e.pad(s,a,t)),i,null,r.PadV2,d)}const t=(0,o.op)({pad_:a});exports.pad=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"fyuv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad1d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,o=0){return(0,e.assert)(2===d.length,()=>"Invalid number of paddings. Must be length of 2."),(0,t.pad)(r,[d],o)}const o=(0,r.op)({pad1d_:d});exports.pad1d=o;
},{"../util":"UxaK","./operation":"rO1i","./pad":"NuCu"}],"GX8c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad2d=void 0;var e=require("../util"),r=require("./operation"),t=require("./pad");function d(r,d,n=0){return(0,e.assert)(2===d.length&&2===d[0].length&&2===d[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,t.pad)(r,d,n)}const n=(0,r.op)({pad2d_:d});exports.pad2d=n;
},{"../util":"UxaK","./operation":"rO1i","./pad":"NuCu"}],"D1CP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad3d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function d(t,d,n=0){return(0,e.assert)(3===d.length&&2===d[0].length&&2===d[1].length&&2===d[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,d,n)}const n=(0,t.op)({pad3d_:d});exports.pad3d=n;
},{"../util":"UxaK","./operation":"rO1i","./pad":"NuCu"}],"jp5S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pad4d=void 0;var e=require("../util"),t=require("./operation"),r=require("./pad");function n(t,n,d=0){return(0,e.assert)(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,r.pad)(t,n,d)}const d=(0,t.op)({pad4d_:n});exports.pad4d=d;
},{"../util":"UxaK","./operation":"rO1i","./pad":"NuCu"}],"nPoV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spaceToBatchND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),o=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function i(o,a,s){const i=(0,r.convertToTensor)(o,"x","spaceToBatchND");n.assert(i.rank>=1+a.length,()=>`input rank ${i.rank} should be > than [blockShape] ${a.length}`),n.assert(s.length===a.length,()=>`paddings.shape[0] ${s.length} must be equal to [blockShape] ${a.length}`),n.assert(i.shape.reduce((e,t,r)=>r>0&&r<=a.length?e&&(t+s[r-1][0]+s[r-1][1])%a[r-1]==0:e,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${s.toString()} must be divisible by blockShapes ${a.toString()}`);const c={x:i},u={blockShape:a,paddings:s};return e.ENGINE.runKernelFunc(e=>e.spaceToBatchND(i,a,s),c,null,t.SpaceToBatchND,u)}const c=(0,o.op)({spaceToBatchND_:i});exports.spaceToBatchND=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"ilbP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pool=void 0;var e=require("../tensor_util_env"),t=l(require("../util")),r=require("./avg_pool"),o=require("./batch_to_space_nd"),n=l(require("./conv_util")),a=require("./max_pool"),i=require("./operation"),p=require("./reshape"),s=require("./space_to_batch_nd");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=o?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function c(i,u,l,c,d,m){null==d&&(d=[1,1]),null==m&&(m=1),0===c&&(c="valid");const v=(0,e.convertToTensor)(i,"x","maxPool");let _=v,b=!1;3===v.rank&&(b=!0,_=(0,p.reshape)(v,[1,v.shape[0],v.shape[1],v.shape[2]])),t.assert(n.eitherStridesOrDilationsAreOne(m,d),()=>"Error in pool: Either strides or dilations must be 1. "+`Got strides ${m} and dilations '${d}'`);const O=n.computePool2DInfo(_.shape,u,m,d,c),g=[O.dilationHeight,O.dilationWidth];let y;y="same"===c?h([O.filterHeight,O.filterWidth],g):[[0,0],[0,0]];const P=1===g[0]&&1===g[1],[q,j]=f([O.inHeight,O.inWidth],g,y),x=P?c:"valid",D=P?_:(0,s.spaceToBatchND)(_,g,q),M=("avg"===l?()=>(0,r.avgPool)(D,u,m,x):()=>(0,a.maxPool)(D,u,m,x))(),W=P?M:(0,o.batchToSpaceND)(M,g,j);return b?(0,p.reshape)(W,[W.shape[1],W.shape[2],W.shape[3]]):W}function f(e,t,r){const o=r.map(e=>e[0]),n=r.map(e=>e[1]),a=e.concat(o,n),i=t.map((e,t)=>(e-a[t]%e)%e),p=n.map((e,t)=>e+i[t]);return[t.map((e,t)=>[o[t],p[t]]),t.map((e,t)=>[0,i[t]])]}function h(e,t){const r=e.map((e,r)=>e+(e-1)*(t[r]-1)).map(e=>e-1),o=r.map(e=>Math.floor(e/2)),n=r.map((e,t)=>e-o[t]);return r.map((e,t)=>[o[t],n[t]])}const d=(0,i.op)({pool_:c});exports.pool=d;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./avg_pool":"Pm39","./batch_to_space_nd":"dRKG","./conv_util":"cqi6","./max_pool":"RWms","./operation":"rO1i","./reshape":"khVG","./space_to_batch_nd":"nPoV"}],"FJnw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pow=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util"),n=require("../tensor_util_env"),t=require("./operation");function s(t,s){let u=(0,n.convertToTensor)(t,"base","pow"),p=(0,n.convertToTensor)(s,"exp","pow");[u,p]=(0,o.makeTypesMatch)(u,p);const i={a:u,b:p};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.pow(u,p);return r([u,p,o]),o},i,null,r.Pow)}const u=(0,t.op)({pow_:s});exports.pow=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"IOvE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prelu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./operation");function o(u,o){const t=(0,n.convertToTensor)(u,"x","prelu"),l=(0,n.convertToTensor)(o,"alpha","prelu"),p={x:t,alpha:l};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.prelu(t,l);return r([t,l]),n},p,null,r.Prelu)}const t=(0,u.op)({prelu_:o});exports.prelu=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"ZlHR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prod=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("../util"),o=require("./axis_util"),s=require("./cast"),i=require("./operation"),u=require("./reshape"),p=require("./transpose");function a(i,a=null,l=!1){let c=(0,t.convertToTensor)(i,"x","prod");"bool"===c.dtype&&(c=(0,s.cast)(c,"int32"));const d={x:c},x={axis:a,keepDims:l};return e.ENGINE.runKernelFunc(e=>{const r=(0,n.parseAxisParam)(a,c.shape),t=(0,o.getAxesPermutation)(r,c.rank);let s=r,i=c;null!=t&&(i=(0,p.transpose)(c,t),s=(0,o.getInnerMostAxes)(s.length,c.rank));let d=e.prod(i,s);if(l){const e=(0,o.expandShapeToKeepDim)(d.shape,r);d=(0,u.reshape)(d,e)}return d},d,null,r.Prod,x)}const l=(0,i.op)({prod_:a});exports.prod=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./axis_util":"uTbM","./cast":"owKL","./operation":"rO1i","./reshape":"khVG","./transpose":"yiEV"}],"fqDI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rand=void 0;var e=require("../engine"),r=require("../util"),n=require("./operation");function t(n,t,o){const i=(0,r.sizeFromShape)(n);let a=null;if(null==o||"float32"===o)a=new Float32Array(i);else if("int32"===o)a=new Int32Array(i);else{if("bool"!==o)throw new Error(`Unknown data type ${o}`);a=new Uint8Array(i)}for(let e=0;e<i;e++)a[e]=t();return e.ENGINE.makeTensor(a,n,o)}const o=(0,n.op)({rand_:t});exports.rand=o;
},{"../engine":"tmUz","../util":"UxaK","./operation":"rO1i"}],"TceX":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function s(t){var n,e=this,s=(n=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var s=.02519603282416938*(n+=t.charCodeAt(e));s-=n=s>>>0,n=(s*=n)>>>0,n+=4294967296*(s-=n)}return 2.3283064365386963e-10*(n>>>0)});e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=s(" "),e.s1=s(" "),e.s2=s(" "),e.s0-=s(t),e.s0<0&&(e.s0+=1),e.s1-=s(t),e.s1<0&&(e.s1+=1),e.s2-=s(t),e.s2<0&&(e.s2+=1),s=null}function r(t,n){return n.c=t.c,n.s0=t.s0,n.s1=t.s1,n.s2=t.s2,n}function o(t,n){var e=new s(t),o=n&&n.state,u=e.next;return u.int32=function(){return 4294967296*e.next()|0},u.double=function(){return u()+1.1102230246251565e-16*(2097152*u()|0)},u.quick=u,o&&("object"==typeof o&&r(o,e),u.state=function(){return r(e,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.alea=o}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"SRgy":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function r(t){var n=this,e="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var t=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^t^t>>>8},t===(0|t)?n.x=t:e+=t;for(var r=0;r<e.length+64;r++)n.x^=0|e.charCodeAt(r),n.next()}function o(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n}function u(t,n){var e=new r(t),u=n&&n.state,x=function(){return(e.next()>>>0)/4294967296};return x.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},x.int32=e.next,x.quick=x,u&&("object"==typeof u&&o(u,e),x.state=function(){return o(e,{})}),x}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xor128=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"YoHa":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^t^t<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,t===(0|t)?n.x=t:e+=t;for(var o=0;o<e.length+64;o++)n.x^=0|e.charCodeAt(o),o==e.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function r(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n.v=t.v,n.d=t.d,n}function u(t,n){var e=new o(t),u=n&&n.state,x=function(){return(e.next()>>>0)/4294967296};return x.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},x.int32=e.next,x.quick=x,u&&("object"==typeof u&&r(u,e),x.state=function(){return r(e,{})}),x}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.xorwow=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"RITp":[function(require,module,exports) {
var define;
var n;!function(n,t,e){function r(n){var t=this;t.next=function(){var n,e,r=t.x,o=t.i;return n=r[o],e=(n^=n>>>7)^n<<24,e^=(n=r[o+1&7])^n>>>10,e^=(n=r[o+3&7])^n>>>3,e^=(n=r[o+4&7])^n<<7,n=r[o+7&7],e^=(n^=n<<13)^n<<9,r[o]=e,t.i=o+1&7,e},function(n,t){var e,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,e=0;e<t.length;++e)r[7&e]=r[7&e]<<15^t.charCodeAt(e)+r[e+1&7]<<13;for(;r.length<8;)r.push(0);for(e=0;e<8&&0===r[e];++e);for(8==e?r[7]=-1:r[e],n.x=r,n.i=0,e=256;e>0;--e)n.next()}(t,n)}function o(n,t){return t.x=n.x.slice(),t.i=n.i,t}function i(n,t){null==n&&(n=+new Date);var e=new r(n),i=t&&t.state,u=function(){return(e.next()>>>0)/4294967296};return u.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},u.int32=e.next,u.quick=u,i&&(i.x&&o(i,e),u.state=function(){return o(e,{})}),u}t&&t.exports?t.exports=i:e&&e.amd?e(function(){return i}):this.xorshift7=i}(0,"object"==typeof module&&module,"function"==typeof n&&n);
},{}],"QsPo":[function(require,module,exports) {
var define;
var n;!function(n,t,e){function r(n){var t=this;t.next=function(){var n,e,r=t.w,o=t.X,u=t.i;return t.w=r=r+1640531527|0,e=o[u+34&127],n=o[u=u+1&127],e^=e<<13,n^=n<<17,e^=e>>>15,n^=n>>>12,e=o[u]=e^n,t.i=u,e+(r^r>>>16)|0},function(n,t){var e,r,o,u,i,c=[],f=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,f=Math.max(f,t.length)),o=0,u=-32;u<f;++u)t&&(r^=t.charCodeAt((u+32)%t.length)),0===u&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,u>=0&&(i=i+1640531527|0,o=0==(e=c[127&u]^=r+i)?o+1:0);for(o>=128&&(c[127&(t&&t.length||0)]=-1),o=127,u=512;u>0;--u)r=c[o+34&127],e=c[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,c[o]=r^e;n.w=i,n.X=c,n.i=o}(t,n)}function o(n,t){return t.i=n.i,t.w=n.w,t.X=n.X.slice(),t}function u(n,t){null==n&&(n=+new Date);var e=new r(n),u=t&&t.state,i=function(){return(e.next()>>>0)/4294967296};return i.double=function(){do{var n=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===n);return n},i.int32=e.next,i.quick=i,u&&(u.X&&o(u,e),i.state=function(){return o(e,{})}),i}t&&t.exports?t.exports=u:e&&e.amd?e(function(){return u}):this.xor4096=u}(0,"object"==typeof module&&module,"function"==typeof n&&n);
},{}],"aRBU":[function(require,module,exports) {
var define;
var t;!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.b,e=n.c,o=n.d,r=n.a;return t=t<<25^t>>>7^e,e=e-o|0,o=o<<24^o>>>8^r,r=r-t|0,n.b=t=t<<20^t>>>12^e,n.c=e=e-o|0,n.d=o<<16^e>>>16^r,n.a=r-t|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,t===Math.floor(t)?(n.a=t/4294967296|0,n.b=0|t):e+=t;for(var o=0;o<e.length+20;o++)n.b^=0|e.charCodeAt(o),n.next()}function r(t,n){return n.a=t.a,n.b=t.b,n.c=t.c,n.d=t.d,n}function u(t,n){var e=new o(t),u=n&&n.state,c=function(){return(e.next()>>>0)/4294967296};return c.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},c.int32=e.next,c.quick=c,u&&("object"==typeof u&&r(u,e),c.state=function(){return r(e,{})}),c}n&&n.exports?n.exports=u:e&&e.amd?e(function(){return u}):this.tychei=u}(0,"object"==typeof module&&module,"function"==typeof t&&t);
},{}],"wgBK":[function(require,module,exports) {
var global = arguments[3];
var define;
var r,n=arguments[3];!function(n,t){var e,o=this,u=256,i=6,a="random",c=t.pow(u,i),f=t.pow(2,52),s=2*f,l=u-1;function p(r,l,p){var m=[],v=h(function r(n,t){var e,o=[],u=typeof n;if(t&&"object"==u)for(e in n)try{o.push(r(n[e],t-1))}catch(i){}return o.length?o:"string"==u?n:n+"\0"}((l=1==l?{entropy:!0}:l||{}).entropy?[r,d(n)]:null==r?function(){try{var r;return e&&(r=e.randomBytes)?r=r(u):(r=new Uint8Array(u),(o.crypto||o.msCrypto).getRandomValues(r)),d(r)}catch(a){var t=o.navigator,i=t&&t.plugins;return[+new Date,o,i,o.screen,d(n)]}}():r,3),m),j=new g(m),S=function(){for(var r=j.g(i),n=c,t=0;r<f;)r=(r+t)*u,n*=u,t=j.g(1);for(;r>=s;)r/=2,n/=2,t>>>=1;return(r+t)/n};return S.int32=function(){return 0|j.g(4)},S.quick=function(){return j.g(4)/4294967296},S.double=S,h(d(j.S),n),(l.pass||p||function(r,n,e,o){return o&&(o.S&&y(o,j),r.state=function(){return y(j,{})}),e?(t[a]=r,n):r})(S,v,"global"in l?l.global:this==t,l.state)}function g(r){var n,t=r.length,e=this,o=0,i=e.i=e.j=0,a=e.S=[];for(t||(r=[t++]);o<u;)a[o]=o++;for(o=0;o<u;o++)a[o]=a[i=l&i+r[o%t]+(n=a[o])],a[i]=n;(e.g=function(r){for(var n,t=0,o=e.i,i=e.j,a=e.S;r--;)n=a[o=l&o+1],t=t*u+a[l&(a[o]=a[i=l&i+n])+(a[i]=n)];return e.i=o,e.j=i,t})(u)}function y(r,n){return n.i=r.i,n.j=r.j,n.S=r.S.slice(),n}function h(r,n){for(var t,e=r+"",o=0;o<e.length;)n[l&o]=l&(t^=19*n[l&o])+e.charCodeAt(o++);return d(n)}function d(r){return String.fromCharCode.apply(0,r)}if(t["seed"+a]=p,h(t.random(),n),"object"==typeof module&&module.exports){module.exports=p;try{e=require("crypto")}catch(m){}}else"function"==typeof r&&r.amd&&r(function(){return p})}([],Math);
},{"crypto":"bWtT"}],"izQb":[function(require,module,exports) {
var r=require("./lib/alea"),e=require("./lib/xor128"),i=require("./lib/xorwow"),o=require("./lib/xorshift7"),l=require("./lib/xor4096"),x=require("./lib/tychei"),u=require("./seedrandom");u.alea=r,u.xor128=e,u.xorwow=i,u.xorshift7=o,u.xor4096=l,u.tychei=x,module.exports=u;
},{"./lib/alea":"TceX","./lib/xor128":"SRgy","./lib/xorwow":"YoHa","./lib/xorshift7":"RITp","./lib/xor4096":"QsPo","./lib/tychei":"aRBU","./seedrandom":"wgBK"}],"IRq4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jarqueBeraNormalityTest=i,exports.expectArrayInMeanStdRange=h,exports.UniformRandom=exports.RandGamma=exports.MPRandGauss=void 0;var t=r(require("seedrandom")),e=require("../test_util");function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var o=a?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,e&&e.set(t,r),r}class a{constructor(e,n,r,a,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=s||Math.random();this.random=t.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,a,s;do{s=(r=2*this.random()-1)*r+(a=2*this.random()-1)*a}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*a*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}exports.MPRandGauss=a;class s{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const o=s||Math.random();this.randu=t.alea(o.toString()),this.randn=new a(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,a,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(s*=s*s,e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-s+Math.log(s)),(a=this.randu())<e||Math.log(a)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}exports.RandGamma=s;class o{constructor(e=0,n=1,r,a){if(this.canReturnFloat=(()=>null==this.dtype||"float32"===this.dtype),this.min=e,this.range=n-e,this.dtype=r,null==a&&(a=Math.random()),"number"==typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=t.alea(a)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}function i(t){const e=t.length,n=c(t),r=d(t),a=e/6*(Math.pow(n,2)+.25*Math.pow(r-3,2));if(a>5.991)throw new Error(`Invalid p-value for JB: ${a}`)}function h(t,n,r,a){null==a&&(a=(0,e.testEpsilon)());const s=l(t);(0,e.expectNumbersClose)(s,n,a),(0,e.expectNumbersClose)(u(t,s),r,a)}function l(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}function u(t,e){let n=0;for(let r=0;r<t.length;r++){const a=t[r]-e;n+=a*a}return Math.sqrt(n/t.length)}function d(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,4)}return 1/n*a/Math.pow(1/n*r,2)}function c(t){const e=l(t),n=t.length;let r=0,a=0;for(let s=0;s<n;s++){const n=t[s]-e;r+=Math.pow(n,2),a+=Math.pow(n,3)}return 1/n*a/Math.pow(1/(n-1)*r,1.5)}exports.UniformRandom=o;
},{"seedrandom":"izQb","../test_util":"IZ2A"}],"i9p1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomGamma=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function a(r,a,o=1,n="float32",u){if(null==o&&(o=1),null==n&&(n="float32"),"float32"!==n&&"int32"!==n)throw new Error(`Unsupported data type ${n}`);const l=new t.RandGamma(a,o,n,u),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const o=(0,r.op)({randomGamma_:a});exports.randomGamma=o;
},{"./buffer":"SN3d","./operation":"rO1i","./rand_util":"IRq4"}],"oldS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomNormal=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function t(r,t=0,n=1,a,u){if(null!=a&&"bool"===a)throw new Error(`Unsupported data type ${a}`);const l=new o.MPRandGauss(t,n,a,!1,u),s=(0,e.buffer)(r,a);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const n=(0,r.op)({randomNormal_:t});exports.randomNormal=n;
},{"./buffer":"SN3d","./operation":"rO1i","./rand_util":"IRq4"}],"YaAk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomUniform=void 0;var e=require("./buffer"),r=require("./operation"),o=require("./rand_util");function n(r,n=0,t=1,u="float32",i){const a=(0,e.buffer)(r,u),f=new o.UniformRandom(n,t,null,i);for(let e=0;e<a.values.length;e++)a.values[e]=f.nextValue();return a.toTensor()}const t=(0,r.op)({randomUniform_:n});exports.randomUniform=t;
},{"./buffer":"SN3d","./operation":"rO1i","./rand_util":"IRq4"}],"R7Cm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor1d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o){(0,r.assertNonNull)(n);const s=(0,e.inferShape)(n,o);if(1!==s.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return(0,t.makeTensor)(n,null,s,o)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"WweN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=s;var e=require("../engine"),r=require("../kernel_names"),t=require("../util"),n=require("./tensor1d"),o=require("./zeros");function s(s,u,a=1,i="float32"){if(0===a)throw new Error("Cannot have a step of zero");const l={start:s,stop:u,step:a,dtype:i};return e.ENGINE.runKernelFunc(()=>{if(s===u||s<u&&a<0||u<s&&a>1)return(0,o.zeros)([0],i);const e=Math.abs(Math.ceil((u-s)/a)),r=(0,t.makeZerosTypedArray)(e,i);u<s&&1===a&&(a=-1),r[0]=s;for(let t=1;t<r.length;t++)r[t]=r[t-1]+a;return(0,n.tensor1d)(r,i)},{},null,r.Range,l)}
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./tensor1d":"R7Cm","./zeros":"MNgB"}],"SxzF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reciprocal=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),n=require("./operation");function c(n){const c=(0,o.convertToTensor)(n,"x","reciprocal"),i={x:c};return e.ENGINE.runKernelFunc((e,r)=>{const o=e.reciprocal(c);return r([c]),o},i,null,r.Reciprocal)}const i=(0,n.op)({reciprocal_:c});exports.reciprocal=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Htix":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./operation"),t=require("./cast");function o(u){const o=(0,n.convertToTensor)(u,"x","relu"),l={x:o};return e.ENGINE.runKernelFunc((e,r)=>(r([o]),"bool"===o.dtype?(0,t.cast)(o,"int32"):e.relu(o)),l,null,r.Relu)}const l=(0,u.op)({relu_:o});exports.relu=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./cast":"owKL"}],"bNXk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.relu6=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./cast"),t=require("./operation");function o(t){const o=(0,n.convertToTensor)(t,"x","relu6"),l={x:o};return e.ENGINE.runKernelFunc((e,r)=>(r([o]),"bool"===o.dtype?(0,u.cast)(o,"int32"):e.relu6(o)),l,null,r.Relu6)}const l=(0,t.op)({relu6_:o});exports.relu6=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./cast":"owKL","./operation":"rO1i"}],"wt3J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),s=require("../util"),o=require("./clone"),t=require("./operation"),u=require("./reshape");function i(t,i){const a=(0,n.convertToTensor)(t,"x","reverse"),c={x:a},p={dims:i};return e.ENGINE.runKernelFunc(e=>{const r=(0,s.parseAxisParam)(i,a.shape);if(0===a.rank)return(0,o.clone)(a);const n=e.reverse(a,r);return(0,u.reshape)(n,a.shape)},c,null,r.Reverse,p)}const a=(0,t.op)({reverse_:i});exports.reverse=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./clone":"HHuR","./operation":"rO1i","./reshape":"khVG"}],"QYAt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse1d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(t){const o=(0,e.convertToTensor)(t,"x","reverse");return r.assert(1===o.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${o.rank}.`),(0,n.reverse)(o,0)}const s=(0,t.op)({reverse1d_:i});exports.reverse1d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reverse":"wt3J"}],"xTht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse2d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(2===u.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse2d_:i});exports.reverse2d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reverse":"wt3J"}],"e415":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse3d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(3===u.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse3d_:i});exports.reverse3d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reverse":"wt3J"}],"Q8XB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.reverse4d=void 0;var e=require("../tensor_util_env"),r=u(require("../util")),t=require("./operation"),n=require("./reverse");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var i=n?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(t,u,i):t[u]=e[u]}return t.default=e,r&&r.set(e,t),t}function i(t,o){const u=(0,e.convertToTensor)(t,"x","reverse");return r.assert(4===u.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${u.rank}.`),(0,n.reverse)(u,o)}const s=(0,t.op)({reverse4d_:i});exports.reverse4d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reverse":"wt3J"}],"uHOV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.round=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),o=require("./operation");function u(o){const u=(0,n.convertToTensor)(o,"x","round"),t={x:u};return e.ENGINE.runKernelFunc(e=>e.round(u),t,null,r.Round)}const t=(0,o.op)({round_:u});exports.round=t;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"paOW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rsqrt=void 0;var r=require("../engine"),e=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function s(n){const s=(0,t.convertToTensor)(n,"x","rsqrt"),o={x:s};return r.ENGINE.runKernelFunc((r,e)=>{const t=r.rsqrt(s);return e([s]),t},o,null,e.Rsqrt)}const o=(0,n.op)({rsqrt_:s});exports.rsqrt=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"iDNJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.selu=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("./operation");function o(u){const o=(0,n.convertToTensor)(u,"x","selu"),s={x:o};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.selu(o);return r([o]),n},s,null,r.Selu)}const s=(0,u.op)({selu_:o});exports.selu=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"sXEJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.separableConv2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./conv2d"),n=require("./depthwise_conv2d"),o=require("./operation"),s=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function p(o,a,i,p,u,l=[1,1],d="NHWC"){const b=(0,e.convertToTensor)(o,"x","separableConv2d"),f=(0,e.convertToTensor)(a,"depthwiseFilter","separableConv2d"),v=(0,e.convertToTensor)(i,"pointwiseFilter","separableConv2d");let c=b,h=!1;if(3===b.rank&&(h=!0,c=(0,s.reshape)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),"NCHW"===d)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");r.assert(4===c.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),r.assert(4===f.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(4===v.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+`got rank ${f.rank}.`),r.assert(1===v.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+` must be 1, but got ${v.shape[0]}.`),r.assert(1===v.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+`filter must be 1, but got ${v.shape[1]}.`);const C=f.shape[2],k=f.shape[3];r.assert(v.shape[2]===C*k,()=>"Error in separableConv2d: the third dimension of pointwise filter "+`must be ${C*k}, `+`but got ${v.shape[2]}.`);const w=(0,n.depthwiseConv2d)(c,f,p,u,d,l),y=(0,t.conv2d)(w,v,1,"valid",d);return h?(0,s.reshape)(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const u=(0,o.op)({separableConv2d_:p});exports.separableConv2d=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./conv2d":"K8t2","./depthwise_conv2d":"hlJ3","./operation":"rO1i","./reshape":"khVG"}],"yIk5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setdiff1dAsync=void 0;var e=require("../tensor"),t=require("../tensor_util_env"),r=o(require("../util"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}async function s(n,o){const s=(0,t.convertToTensor)(n,"x","setdiff1d"),a=(0,t.convertToTensor)(o,"y","setdiff1d");r.assert(s.dtype===a.dtype,()=>`x and y should have the same dtype, but got x (${s.dtype}) and y (${a.dtype}).`),r.assert(1===s.rank,()=>`x should be 1D tensor, but got x (${s.shape}).`),r.assert(1===a.rank,()=>`y should be 1D tensor, but got y (${a.shape}).`);const u=await s.data(),f=await a.data(),i=new Set(f);let d=0;for(let e=0;e<u.length;e++)i.has(u[e])||d++;const c=new e.TensorBuffer([d],s.dtype),p=new e.TensorBuffer([d],"int32");for(let e=0,t=0;e<u.length;e++)i.has(u[e])||(c.values[t]=u[e],p.values[t]=e,t++);return[c.toTensor(),p.toTensor()]}const a=s;exports.setdiff1dAsync=a;
},{"../tensor":"Zqvm","../tensor_util_env":"x0Hg","../util":"UxaK"}],"TntV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sign=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),i=require("./operation");function o(i){const o=(0,r.convertToTensor)(i,"x","sign"),s={x:o};return e.ENGINE.runKernelFunc(e=>e.sign(o),s,null,n.Sign)}const s=(0,i.op)({sign_:o});exports.sign=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"AwzN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sin=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),i=require("./operation");function o(i){const o=(0,r.convertToTensor)(i,"x","sin"),s={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.sin(o);return n([o]),r},s,null,n.Sin)}const s=(0,i.op)({sin_:o});exports.sin=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"nOJq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sinh=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),i=require("./operation");function o(i){const o=(0,r.convertToTensor)(i,"x","sinh"),s={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.sinh(o);return n([o]),r},s,null,n.Sinh)}const s=(0,i.op)({sinh_:o});exports.sinh=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"EcR4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice1d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice1d");return r.assert(1===u.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,[o],[i])}const s=(0,t.op)({slice1d_:u});exports.slice1d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./slice":"xcz4"}],"pNW2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice2d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice2d");return r.assert(2===u.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice2d_:u});exports.slice2d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./slice":"xcz4"}],"XFWw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice3d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice3d");return r.assert(3===u.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice3d_:u});exports.slice3d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./slice":"xcz4"}],"ScyZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.slice4d=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./operation"),n=require("./slice");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(t,i,u):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function u(t,o,i){const u=(0,e.convertToTensor)(t,"x","slice4d");return r.assert(4===u.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${u.rank} tensor`),(0,n.slice)(u,o,i)}const s=(0,t.op)({slice4d_:u});exports.slice4d=s;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./slice":"xcz4"}],"Tk36":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmax=void 0;var e=require("../engine"),o=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function n(t,n=-1){const s=(0,r.convertToTensor)(t,"logits","softmax","float32");if(-1===n&&(n=s.rank-1),n!==s.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${s.rank} and dim was ${n}`);const a={logits:s},i={dim:n};return e.ENGINE.runKernelFunc((e,o)=>{const r=e.softmax(s,n);return o([r]),r},a,null,o.Softmax,i)}const s=(0,t.op)({softmax_:n});exports.softmax=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Z8YU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fft=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../util"),s=require("../operation");function n(s){(0,r.assert)("complex64"===s.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+`but got ${s.dtype}.`);const n={input:s};return e.ENGINE.runKernelFunc(e=>{const t=s.shape[s.shape.length-1],r=s.size/t,n=s.as2D(r,t);return e.fft(n).reshape(s.shape)},n,null,t.FFT)}const o=(0,s.op)({fft_:n});exports.fft=o;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../util":"UxaK","../operation":"rO1i"}],"r4QH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ifft=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../util"),s=require("../operation"),i=require("../reshape");function n(s){(0,t.assert)("complex64"===s.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+`but got ${s.dtype}.`);const n={input:s};return e.ENGINE.runKernelFunc(e=>{const r=s.shape[s.shape.length-1],t=s.size/r,n=(0,i.reshape)(s,[t,r]),p=e.ifft(n);return(0,i.reshape)(p,s.shape)},n,null,r.IFFT)}const p=(0,s.op)({ifft_:n});exports.ifft=p;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../util":"UxaK","../operation":"rO1i","../reshape":"khVG"}],"lC3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.irfft=void 0;var e=require("../complex"),r=require("../concat"),s=require("../imag"),i=require("../mul"),a=require("../operation"),t=require("../real"),c=require("../reshape"),o=require("../reverse"),p=require("../scalar"),u=require("../slice"),l=require("./ifft");function f(a){const f=a.shape[a.shape.length-1],n=a.size/f;let h;if(f<=2){const e=(0,c.reshape)(a,[n,f]);h=(0,l.ifft)(e)}else{const q=[n,2*(f-1)],m=(0,c.reshape)((0,t.real)(a),[n,f]),v=(0,c.reshape)((0,s.imag)(a),[n,f]),x=(0,o.reverse)((0,u.slice)(m,[0,1],[n,f-2]),1),d=(0,i.mul)((0,o.reverse)((0,u.slice)(v,[0,1],[n,f-2]),1),(0,p.scalar)(-1)),g=(0,r.concat)([m,x],1),_=(0,r.concat)([v,d],1),b=(0,c.reshape)((0,e.complex)(g,_),[q[0],q[1]]);h=(0,l.ifft)(b)}if(h=(0,t.real)(h),3===a.rank&&0!==a.shape[0]){const e=h,r=a.shape[0];h=(0,c.reshape)(h,[r,h.shape[0]/r,h.shape[1]]),e.dispose()}return h}const n=(0,a.op)({irfft_:f});exports.irfft=n;
},{"../complex":"BDDu","../concat":"gZir","../imag":"P5ES","../mul":"WS4w","../operation":"rO1i","../real":"QPTK","../reshape":"khVG","../reverse":"wt3J","../scalar":"RBNv","../slice":"xcz4","./ifft":"r4QH"}],"E6ap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareSplitSize=s;var e=require("../util");function s(s,t,r=0){let i=[];if("number"==typeof t)(0,e.assert)(s.shape[r]%t==0,()=>"Number of splits must evenly divide the axis."),i=new Array(t).fill(s.shape[r]/t);else{const a=t.reduce((e,s)=>(-1===s&&(e+=1),e),0);(0,e.assert)(a<=1,()=>"There should be only one negative value in split array.");const n=t.indexOf(-1);if(-1!==n){const e=t.reduce((e,s)=>s>0?e+s:e);t[n]=s.shape[r]-e}(0,e.assert)(s.shape[r]===t.reduce((e,s)=>e+s),()=>"The sum of sizes must match the size of the axis dimension."),i=t}return i}
},{"../util":"UxaK"}],"L2gY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.split=void 0;var e=require("../engine"),r=require("../kernel_names"),i=require("../tensor_util_env"),t=require("../util"),s=require("./operation"),n=require("./split_util");function p(s,p,u=0){const l=(0,i.convertToTensor)(s,"x","split"),o={x:l},a={numOrSizeSplits:p,axis:u};return e.ENGINE.runKernelFunc((e,r)=>{const i=(0,t.parseAxisParam)(u,l.shape)[0],s=(0,n.prepareSplitSize)(l,p,i);return e.split(l,s,i)},o,null,r.SplitV,a)}const u=(0,s.op)({split_:p});exports.split=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./split_util":"E6ap"}],"G4qK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rfft=void 0;var e=require("../../util"),r=require("../complex"),t=require("../concat"),s=require("../imag"),l=require("../operation"),p=require("../real"),a=require("../reshape"),i=require("../slice"),o=require("../split"),h=require("../zeros"),u=require("../zeros_like"),n=require("./fft");function f(l,f){(0,e.assert)("float32"===l.dtype,()=>`The dtype for rfft() must be real value but got ${l.dtype}`);let c=l.shape[l.shape.length-1];const q=l.size/c;let g;if(null!=f&&f<c){const e=l.shape.map(e=>0),r=l.shape.map(e=>e);r[l.shape.length-1]=f,g=(0,i.slice)(l,e,r),c=f}else if(null!=f&&f>c){const e=l.shape.map(e=>e);e[l.shape.length-1]=f-c,g=(0,t.concat)([l,(0,h.zeros)(e)],l.shape.length-1),c=f}else g=l;const m=(0,u.zerosLike)(g),d=(0,a.reshape)((0,r.complex)(g,m),[q,c]),x=(0,n.fft)(d),z=Math.floor(c/2)+1,v=(0,p.real)(x),y=(0,s.imag)(x),_=(0,o.split)(v,[z,c-z],v.shape.length-1),b=(0,o.split)(y,[z,c-z],y.shape.length-1),k=g.shape.slice();return k[g.shape.length-1]=z,(0,a.reshape)((0,r.complex)(_[0],b[0]),k)}const c=(0,l.op)({rfft_:f});exports.rfft=c;
},{"../../util":"UxaK","../complex":"BDDu","../concat":"gZir","../imag":"P5ES","../operation":"rO1i","../real":"QPTK","../reshape":"khVG","../slice":"xcz4","../split":"L2gY","../zeros":"MNgB","../zeros_like":"Jky8","./fft":"Z8YU"}],"dGNr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sqrt=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n){const o=(0,t.convertToTensor)(n,"x","sqrt"),s={x:o};return e.ENGINE.runKernelFunc((e,r)=>{const t=e.sqrt(o);return r([o]),t},s,null,r.Sqrt)}const s=(0,n.op)({sqrt_:o});exports.sqrt=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"YDjz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squaredDifference=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util"),s=require("../tensor_util_env"),t=require("./broadcast_util"),u=require("./operation");function a(u,a){let o=(0,s.convertToTensor)(u,"a","squaredDifference"),i=(0,s.convertToTensor)(a,"b","squaredDifference");[o,i]=(0,n.makeTypesMatch)(o,i),(0,t.assertAndGetBroadcastShape)(o.shape,i.shape);const c={a:o,b:i};return e.ENGINE.runKernelFunc((e,r)=>{const n=e.squaredDifference(o,i);return r([o,i]),n},c,null,r.SquaredDifference,{})}const o=(0,u.op)({squaredDifference_:a});exports.squaredDifference=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util":"vUHI","../tensor_util_env":"x0Hg","./broadcast_util":"nprq","./operation":"rO1i"}],"N7Os":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.squeeze=void 0;var e=require("../tensor_util_env"),r=require("../util"),s=require("./operation"),o=require("./reshape");function t(s,t){const u=(0,e.convertToTensor)(s,"x","squeeze");return(0,o.reshape)(u,(0,r.squeezeShape)(u.shape,t).newShape)}const u=(0,s.op)({squeeze_:t});exports.squeeze=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i","./reshape":"khVG"}],"GHVB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stack=void 0;var e=require("../tensor_util_env"),t=o(require("../util")),r=require("./concat"),s=require("./expand_dims"),n=require("./operation");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function c(n,a=0){const o=(0,e.convertToTensorArray)(n,"tensors","stack");if(t.assert(o.length>=1,()=>"Pass at least one tensor to tf.stack"),1===o.length)return(0,s.expandDims)(o[0],a);const c=o[0].rank,i=o[0].shape,u=o[0].dtype;t.assert(a<=c,()=>"Axis must be <= rank of the tensor"),o.forEach(e=>{t.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),t.assert(u===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});const p=o.map(e=>(0,s.expandDims)(e,a));return(0,r.concat)(p,a)}const i=(0,n.op)({stack_:c});exports.stack=i;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./concat":"gZir","./expand_dims":"uPYU","./operation":"rO1i"}],"DQ8I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.step=void 0;var e=require("../engine"),r=require("../kernel_names"),t=require("../tensor_util_env"),n=require("./operation");function o(n,o=0){const s=(0,t.convertToTensor)(n,"x","step"),p={x:s},u={alpha:o};return e.ENGINE.runKernelFunc(e=>e.step(s,o),p,null,r.Step,u)}const s=(0,n.op)({step_:o});exports.step=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"PMwJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stridedSlice=void 0;var e=require("../engine"),s=require("../kernel_names"),r=require("../tensor_util_env"),i=require("./operation"),n=require("./reshape"),t=require("./slice"),o=require("./slice_util");function l(i,l,a,c,d=0,u=0,p=0,h=0,k=0){let x=(0,r.convertToTensor)(i,"x","stridedSlice");const M={x:x},f={begin:l,end:a,strides:c,beginMask:d,endMask:u,ellipsisMask:p,newAxisMask:h,shrinkAxisMask:k};return e.ENGINE.runKernelFunc(e=>{null==c&&(c=new Array(l.length));const s=(0,o.maskToAxes)(p);if(s.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==p&&0!==h)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==p&&0!==k)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const r=x.rank-l.length,i=(0,o.maskToAxes)(h),M=x.shape.slice();i.forEach(e=>{l[e]=0,a[e]=1,M.splice(e,0,1)}),x=(0,n.reshape)(x,M);const{begin:f,end:g,strides:w}=(0,o.getNormalizedAxes)(x.shape,s,r,l,a,c,d,u,p);l=f,a=g,c=w;const A=(0,o.maskToAxes)(k);A.forEach(e=>{a[e]=l[e]+1,c[e]=1});const S=(0,o.computeOutShape)(l,a,c),q=S.filter((e,s)=>-1===A.indexOf(s));if(c.every(e=>1===e))return(0,n.reshape)((0,t.slice)(x,l,S),q);const E=e.stridedSlice(x,l,a,c);return(0,n.reshape)(E,q)},M,null,s.StridedSlice,f)}const a=(0,i.op)({stridedSlice_:l});exports.stridedSlice=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./reshape":"khVG","./slice":"xcz4","./slice_util":"sNMx"}],"RsGH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tan=void 0;var e=require("../engine"),n=require("../kernel_names"),r=require("../tensor_util_env"),t=require("./operation");function o(t){const o=(0,r.convertToTensor)(t,"x","tan"),u={x:o};return e.ENGINE.runKernelFunc((e,n)=>{const r=e.tan(o);return n([o]),r},u,null,n.Tan)}const u=(0,t.op)({tan_:o});exports.tan=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"Q66m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor2d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&2!==o.length)throw new Error("tensor2d() requires shape to have two numbers");const u=(0,e.inferShape)(n,s);if(2!==u.length&&1!==u.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"iywK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor4d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&4!==o.length)throw new Error("tensor4d() requires shape to have four numbers");const u=(0,e.inferShape)(n,s);if(4!==u.length&&1!==u.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"YwRe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor5d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&5!==o.length)throw new Error("tensor5d() requires shape to have five numbers");const u=(0,e.inferShape)(n,s);if(5!==u.length&&1!==u.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"X7ie":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tensor6d=n;var e=require("../tensor_util_env"),r=require("../util"),t=require("./tensor_ops_util");function n(n,o,s){if((0,r.assertNonNull)(n),null!=o&&6!==o.length)throw new Error("tensor6d() requires shape to have six numbers");const u=(0,e.inferShape)(n,s);if(6!==u.length&&1!==u.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===u.length&&null==o)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return o=o||u,(0,t.makeTensor)(n,o,u,s)}
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor_ops_util":"N5j4"}],"N414":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topk=void 0;var e=require("../engine"),t=require("../kernel_names"),o=require("../tensor_util_env"),r=require("./operation");function n(r,n=1,s=!0){const i=(0,o.convertToTensor)(r,"x","topk");if(0===i.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const p=i.shape[i.shape.length-1];if(n>p)throw new Error(`'k' passed to topk() must be <= the last dimension (${p}) `+`but got ${n}`);const u={x:i},k={k:n,sorted:s},[a,c]=e.ENGINE.runKernelFunc(e=>e.topk(i,n,s),u,null,t.TopK,k);return{values:a,indices:c}}const s=(0,r.op)({topk_:n});exports.topk=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"hfYy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.truncatedNormal=void 0;var e=require("./buffer"),r=require("./operation"),t=require("./rand_util");function o(r,o=0,u=1,n,a){if(null!=n&&"bool"===n)throw new Error("Unsupported data type $ { dtype }");const l=new t.MPRandGauss(o,u,n,!0,a),s=(0,e.buffer)(r,n);for(let e=0;e<s.values.length;e++)s.values[e]=l.nextValue();return s.toTensor()}const u=(0,r.op)({truncatedNormal_:o});exports.truncatedNormal=u;
},{"./buffer":"SN3d","./operation":"rO1i","./rand_util":"IRq4"}],"qyE5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unique=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),u=require("../util"),t=require("./operation");function i(t,i=0){const s=(0,n.convertToTensor)(t,"x","unique",null);(0,u.assert)(s.rank>0,()=>"The input tensor must be at least 1D");const o={x:s},a={axis:i},[l,q]=e.ENGINE.runKernel(r.Unique,o,a);return{values:l,indices:q}}const s=(0,t.op)({unique_:i});exports.unique=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"U01C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsortedSegmentSum=void 0;var e=require("../engine"),n=require("../kernel_names"),t=require("../tensor_util_env"),r=require("../util"),u=require("./operation");function s(u,s,o){const m=(0,t.convertToTensor)(u,"x","unsortedSegmentSum"),i=(0,t.convertToTensor)(s,"segmentIds","unsortedSegmentSum","int32");(0,r.assert)((0,r.isInt)(o),()=>"numSegments must be of dtype int");const S={x:m,segmentIds:i},d={numSegments:o};return e.ENGINE.runKernelFunc((e,n)=>{const t=e.unsortedSegmentSum(m,i,o);return n([i]),t},S,null,n.UnsortedSegmentSum,d)}const o=(0,u.op)({unsortedSegmentSum_:s});exports.unsortedSegmentSum=o;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"JyML":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unstack=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=s(require("../util")),u=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var s=n?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function a(u,o=0){const s=(0,r.convertToTensor)(u,"x","unstack");n.assert(o>=-s.shape.length&&o<s.shape.length,()=>`Axis = ${o} is not in [-${s.shape.length}, ${s.shape.length})`),o<0&&(o+=s.shape.length);const a={value:s},i={axis:o};return e.ENGINE.runKernelFunc(e=>e.unstack(s,o),a,null,t.Unpack,i)}const i=(0,u.op)({unstack_:a});exports.unstack=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./operation":"rO1i"}],"nKb4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.variable=r;var e=require("../engine");function r(r,t=!0,a,i){return e.ENGINE.makeVariable(r,t,a,i)}
},{"../engine":"tmUz"}],"MEsl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereImpl=t;var e=require("../ops/buffer");function t(t,r){const n=[];for(let e=0;e<r.length;e++)r[e]&&n.push(e);const o=(0,e.buffer)(t,"int32"),s=(0,e.buffer)([n.length,t.length],"int32");for(let e=0;e<n.length;e++){const r=o.indexToLoc(n[e]),l=e*t.length;s.values.set(r,l)}return s.toTensor()}
},{"../ops/buffer":"SN3d"}],"Vq9r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.whereAsync=void 0;var e=require("../backends/where_impl"),r=require("../tensor_util_env");async function o(o){const s=(0,r.convertToTensor)(o,"condition","whereAsync","bool"),n=await s.data(),t=(0,e.whereImpl)(s.shape,n);return o!==s&&s.dispose(),t}const s=o;exports.whereAsync=s;
},{"../backends/where_impl":"MEsl","../tensor_util_env":"x0Hg"}],"cLTy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.booleanMaskAsync=void 0;var e=require("../tensor_util_env"),r=i(require("../util")),t=require("./gather"),s=require("./reshape"),o=require("./squeeze"),n=require("./where_async");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=s?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(t,o,n):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}async function c(a,i,c){const u=(0,e.convertToTensor)(a,"tensor","boolMask"),p=(0,e.convertToTensor)(i,"mask","boolMask","bool"),l=null==c?0:c,f=p.rank,h=u.shape;r.assert(f>0,()=>"mask cannot be scalar"),r.assertShapesMatch(h.slice(l,l+f),p.shape,"mask's shape must match the first K dimensions of tensor's shape,");let d=1;for(let e=l;e<l+f;e++)d*=h[e];const y=h.slice(0,l).concat([d],h.slice(l+f)),b=(0,s.reshape)(u,y),v=(0,s.reshape)(p,[-1]),k=await(0,n.whereAsync)(v),M=(0,o.squeeze)(k,[1]),O=(0,t.gather)(b,M,l);return a!==u&&u.dispose(),i!==p&&p.dispose(),M.dispose(),b.dispose(),v.dispose(),k.dispose(),O}const u=c;exports.booleanMaskAsync=u;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./gather":"Quad","./reshape":"khVG","./squeeze":"N7Os","./where_async":"Vq9r"}],"tF3n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notEqualStrict=exports.lessStrict=exports.lessEqualStrict=exports.greaterStrict=exports.greaterEqualStrict=exports.equalStrict=void 0;var e=require("../globals"),r=require("../tensor_util_env"),t=require("../util"),a=require("./equal"),s=require("./greater"),o=require("./greater_equal"),n=require("./less"),i=require("./less_equal"),c=require("./not_equal"),u=require("./operation");function l(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","notEqualStrict"),n=(0,r.convertToTensor)(s,"b","notEqualStrict");return(0,t.assertShapesMatch)(o.shape,n.shape,"Error in notEqualStrict: "),(0,c.notEqual)(o,n)}function p(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","lessStrict"),i=(0,r.convertToTensor)(s,"b","lessStrict");return(0,t.assertShapesMatch)(o.shape,i.shape,"Error in lessStrict: "),(0,n.less)(o,i)}function q(s,o){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(s,"a","equalStrict"),i=(0,r.convertToTensor)(o,"b","equalStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in equalStrict: "),(0,a.equal)(n,i)}function S(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const o=(0,r.convertToTensor)(a,"a","lessEqualStrict"),n=(0,r.convertToTensor)(s,"b","lessEqualStrict");return(0,t.assertShapesMatch)(o.shape,n.shape,"Error in lessEqualStrict: "),(0,i.lessEqual)(o,n)}function v(a,o){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(a,"a","greaterStrict"),i=(0,r.convertToTensor)(o,"b","greaterStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in greaterStrict: "),(0,s.greater)(n,i)}function d(a,s){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(a,"a","greaterEqualStrict"),i=(0,r.convertToTensor)(s,"b","greaterEqualStrict");return(0,t.assertShapesMatch)(n.shape,i.shape,"Error in greaterEqualStrict: "),(0,o.greaterEqual)(n,i)}const h=(0,u.op)({equalStrict_:q});exports.equalStrict=h;const E=(0,u.op)({greaterEqualStrict_:d});exports.greaterEqualStrict=E;const T=(0,u.op)({greaterStrict_:v});exports.greaterStrict=T;const b=(0,u.op)({lessEqualStrict_:S});exports.lessEqualStrict=b;const f=(0,u.op)({lessStrict_:p});exports.lessStrict=f;const g=(0,u.op)({notEqualStrict_:l});exports.notEqualStrict=g;
},{"../globals":"UkUu","../tensor_util_env":"x0Hg","../util":"UxaK","./equal":"nLPx","./greater":"i1I6","./greater_equal":"wG0H","./less":"PrnK","./less_equal":"NxL8","./not_equal":"RlXH","./operation":"rO1i"}],"uden":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.subStrict=exports.squaredDifferenceStrict=exports.powStrict=exports.mulStrict=exports.modStrict=exports.minimumStrict=exports.maximumStrict=exports.divStrict=exports.addStrict=void 0;var e=require("../globals"),r=require("../tensor_util_env"),t=v(require("../util")),o=require("./add"),i=require("./div"),n=require("./maximum"),a=require("./minimum"),s=require("./mod"),c=require("./mul"),u=require("./operation"),p=require("./pow"),d=require("./squared_difference"),m=require("./sub");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=o?Object.getOwnPropertyDescriptor(e,i):null;n&&(n.get||n.set)?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,r&&r.set(e,t),t}function S(i,n){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(i,"a","addStrict"),s=(0,r.convertToTensor)(n,"b","addStrict");return t.assertShapesMatch(a.shape,s.shape,"Error in addStrict: "),(0,o.add)(a,s)}function h(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","subStrict"),a=(0,r.convertToTensor)(i,"b","subStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in subStrict: "),(0,m.sub)(n,a)}function l(r,o){return(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future"),t.assertShapesMatch(r.shape,o.shape,"Error in powStrict: "),(0,p.pow)(r,o)}function b(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","mul"),a=(0,r.convertToTensor)(i,"b","mul");return t.assertShapesMatch(n.shape,a.shape,"Error in multiplyStrict: "),(0,c.mul)(n,a)}function T(o,n){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(o,"a","div"),s=(0,r.convertToTensor)(n,"b","div");return t.assertShapesMatch(a.shape,s.shape,"Error in divideStrict: "),(0,i.div)(a,s)}function x(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","modStrict"),a=(0,r.convertToTensor)(i,"b","modStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in modStrict: "),(0,s.mod)(n,a)}function q(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","minimumStrict"),s=(0,r.convertToTensor)(i,"b","minimumStrict");return t.assertShapesMatch(n.shape,s.shape,"Error in minimumStrict: "),(0,a.minimum)(n,s)}function w(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const a=(0,r.convertToTensor)(o,"a","maximumStrict"),s=(0,r.convertToTensor)(i,"b","maximumStrict");return t.assertShapesMatch(a.shape,s.shape,"Error in maximumStrict: "),(0,n.maximum)(a,s)}function _(o,i){(0,e.deprecationWarn)("strict variants of ops have been deprecated and will be removed in future");const n=(0,r.convertToTensor)(o,"a","squaredDifferenceStrict"),a=(0,r.convertToTensor)(i,"b","squaredDifferenceStrict");return t.assertShapesMatch(n.shape,a.shape,"Error in squaredDifferenceStrict: "),(0,d.squaredDifference)(n,a)}const M=(0,u.op)({addStrict_:S});exports.addStrict=M;const y=(0,u.op)({divStrict_:T});exports.divStrict=y;const W=(0,u.op)({maximumStrict_:w});exports.maximumStrict=W;const D=(0,u.op)({minimumStrict_:q});exports.minimumStrict=D;const E=(0,u.op)({modStrict_:x});exports.modStrict=E;const O=(0,u.op)({mulStrict_:b});exports.mulStrict=O;const j=(0,u.op)({powStrict_:l});exports.powStrict=j;const P=(0,u.op)({squaredDifferenceStrict_:_});exports.squaredDifferenceStrict=P;const g=(0,u.op)({subStrict_:h});exports.subStrict=g;
},{"../globals":"UkUu","../tensor_util_env":"x0Hg","../util":"UxaK","./add":"geuL","./div":"XyQ4","./maximum":"nmNC","./minimum":"q3lt","./mod":"oTGE","./mul":"WS4w","./operation":"rO1i","./pow":"FJnw","./squared_difference":"YDjz","./sub":"OFjl"}],"Hzs7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.norm=void 0;var r=require("../tensor_util_env"),e=require("../util"),n=require("./abs"),t=q(require("./axis_util")),i=require("./max"),u=require("./min"),a=require("./operation"),o=require("./pow"),s=require("./reshape"),f=require("./scalar"),l=require("./sqrt"),p=require("./square"),c=require("./sum");function m(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return m=function(){return r},r}function q(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=m();if(e&&e.has(r))return e.get(r);var n={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var u=t?Object.getOwnPropertyDescriptor(r,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=r[i]}return n.default=r,e&&e.set(r,n),n}function b(n,i="euclidean",u=null,a=!1){const o=d(n=(0,r.convertToTensor)(n,"x","norm"),i,u);let f=o.shape;if(a){const r=(0,e.parseAxisParam)(u,n.shape);f=t.expandShapeToKeepDim(o.shape,r)}return(0,s.reshape)(o,f)}function d(r,e,t=null){if(0===r.rank)return(0,n.abs)(r);if(1!==r.rank&&null===t)return d((0,s.reshape)(r,[-1]),e,t);if(1===r.rank||"number"==typeof t||Array.isArray(t)&&1===t.length){if(1===e)return(0,c.sum)((0,n.abs)(r),t);if(e===1/0)return(0,i.max)((0,n.abs)(r),t);if(e===-1/0)return(0,u.min)((0,n.abs)(r),t);if("euclidean"===e||2===e)return(0,l.sqrt)((0,c.sum)((0,o.pow)((0,n.abs)(r),(0,f.scalar)(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&2===t.length){if(1===e)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[0]),t[1]-1);if(e===1/0)return(0,i.max)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if(e===-1/0)return(0,u.min)((0,c.sum)((0,n.abs)(r),t[1]),t[0]);if("fro"===e||"euclidean"===e)return(0,l.sqrt)((0,c.sum)((0,p.square)(r),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const v=(0,a.op)({norm_:b});exports.norm=v;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./abs":"LQUr","./axis_util":"uTbM","./max":"SjY8","./min":"z8cA","./operation":"rO1i","./pow":"FJnw","./reshape":"khVG","./scalar":"RBNv","./sqrt":"dGNr","./square":"rLyD","./sum":"YHNB"}],"tCsQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.movingAverage=void 0;var e=require("../tensor_util"),r=require("../tensor_util_env"),t=p(require("../util")),n=require("./add"),o=require("./div"),i=require("./mul"),u=require("./operation"),s=require("./pow"),a=require("./scalar"),v=require("./sub");function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function l(u,c,p,l,f=!0){const g=(0,r.convertToTensor)(u,"v","movingAverage"),d=(0,r.convertToTensor)(c,"x","movingAverage"),y=(0,r.convertToTensor)(p,"decay","movingAverage");(0,e.assertTypesMatch)(g,d),t.assert(t.arraysEqual(g.shape,d.shape),()=>"Shape mismatch in v and x");const b=(0,a.scalar)(1),q=(0,v.sub)(b,y);let m=(0,i.mul)((0,v.sub)(d,g),q);if(f){t.assert(null!=l,()=>"When using zeroDebias: true, step is required.");const e=(0,r.convertToTensor)(l,"step","movingAverage");m=(0,o.div)(m,(0,v.sub)(b,(0,s.pow)(y,e)))}return(0,n.add)(g,m)}const f=(0,u.op)({movingAverage_:l});exports.movingAverage=f;
},{"../tensor_util":"vUHI","../tensor_util_env":"x0Hg","../util":"UxaK","./add":"geuL","./div":"XyQ4","./mul":"WS4w","./operation":"rO1i","./pow":"FJnw","./scalar":"RBNv","./sub":"OFjl"}],"C9WF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scatterND=void 0;var e=require("../engine"),t=require("../kernel_names"),r=require("../tensor_util_env"),n=require("./operation"),o=i(require("./scatter_nd_util"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function c(n,u,i){const c=(0,r.convertToTensor)(n,"indices","scatterND","int32"),s=(0,r.convertToTensor)(u,"updates","scatterND");o.validateInput(s,c,i);const a={indices:c,updates:s},p={shape:i};return e.ENGINE.runKernelFunc(e=>e.scatterND(c,s,i),a,null,t.ScatterNd,p)}const s=(0,n.op)({scatterND_:c});exports.scatterND=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i","./scatter_nd_util":"mei8"}],"nS7N":[function(require,module,exports) {
"use strict";function e(e,t,r,s){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+` but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+` but got shape ${e.shape}.`);const a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(r.length!==o)throw new Error("outputShape has incorrect number of elements:,"+` ${r.length}, should be: ${o}.`);const n=t.size;if(0!==t.rank&&(1!==t.rank||n!==a))throw new Error("sparseValues has incorrect shape "+`${t.shape}, should be [] or [${a}]`);if(t.dtype!==s.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateInput=e;
},{}],"PmvU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparseToDense=void 0;var e=require("../engine"),r=require("../kernel_names"),t=u(require("../ops/sparse_to_dense_util")),n=require("../tensor_util_env"),s=require("./operation");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var u=n?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(t,s,u):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}function a(s,o,u,a=0){const p=(0,n.convertToTensor)(s,"sparseIndices","sparseToDense","int32"),i=(0,n.convertToTensor)(o,"sparseValues","sparseToDense"),c=(0,n.convertToTensor)(a,"defaultValue","sparseToDense",i.dtype);t.validateInput(p,i,u,c);const l={sparseIndices:p,sparseValues:i,defaultValue:c},f={outputShape:u};return e.ENGINE.runKernelFunc(e=>e.sparseToDense(p,i,u,c),l,null,r.SparseToDense,f)}const p=(0,s.op)({sparseToDense_:a});exports.sparseToDense=p;
},{"../engine":"tmUz","../kernel_names":"r3vI","../ops/sparse_to_dense_util":"nS7N","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"o2ZD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gatherND=void 0;var e=require("../engine"),r=require("../kernel_names"),n=require("../tensor_util_env"),t=require("./operation");function o(t,o){const i=(0,n.convertToTensor)(o,"indices","gatherND","int32"),s=(0,n.convertToTensor)(t,"x","gatherND"),a={params:s,indices:i};return e.ENGINE.runKernelFunc(e=>e.gatherND(s,i),a,null,r.GatherNd)}const i=(0,t.op)({gatherND_:o});exports.gatherND=i;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","./operation":"rO1i"}],"ozIj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNoiseShape=n;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=u?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function n(t,r){if(null==r)return t.shape.slice();if(e.arraysEqual(t.shape,r))return r;if(t.shape.length===r.length){const e=[];for(let n=0;n<t.shape.length;n++)null==r[n]&&null!=t.shape[n]?e.push(t.shape[n]):e.push(r[n]);return e}return r}
},{"../util":"UxaK"}],"MAgd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dropout=void 0;var e=require("../tensor"),r=require("../tensor_util_env"),t=l(require("../util")),o=require("./add"),n=require("./div"),u=require("./dropout_util"),i=require("./floor"),a=require("./mul"),s=require("./operation"),f=require("./random_uniform");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(t,n,u):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function c(s,p,l,c){const d=(0,r.convertToTensor)(s,"x","dropout");if(t.assert("float32"===d.dtype,()=>"x has to be a floating point tensor since it's going to be "+`scaled, but got a ${d.dtype} tensor instead.`),t.assert(p>=0&&p<1,()=>`rate must be a float in the range [0, 1), but got ${p}.`),0===p)return s instanceof e.Tensor?d.clone():d;const b=(0,u.getNoiseShape)(d,l),v=1-p,y=(0,n.div)((0,i.floor)((0,o.add)((0,f.randomUniform)(b,0,1,"float32",c),v)),v);return(0,a.mul)(d,y)}const d=(0,s.op)({dropout_:c});exports.dropout=d;
},{"../tensor":"Zqvm","../tensor_util_env":"x0Hg","../util":"UxaK","./add":"geuL","./div":"XyQ4","./dropout_util":"ozIj","./floor":"mwl0","./mul":"WS4w","./operation":"rO1i","./random_uniform":"YaAk"}],"Jt6I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.enclosingPowerOfTwo=t,exports.cosineWindow=e;var o=require("./tensor1d");function t(o){return Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2))))}function e(t,e,r){const n=1-t%2,s=new Float32Array(t);for(let o=0;o<t;++o){const a=2*Math.PI*o/(t+n-1);s[o]=e-r*Math.cos(a)}return(0,o.tensor1d)(s,"float32")}
},{"./tensor1d":"R7Cm"}],"lVGj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inTopKAsync=void 0;var e=require("../tensor_util_env"),t=require("../util"),s=require("./tensor");async function r(r,n,o=1){const a=(0,e.convertToTensor)(r,"predictions","inTopK"),i=(0,e.convertToTensor)(n,"targets","inTopK");(0,t.assert)(a.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+`but got ${a.rank}`),(0,t.assert)(a.rank-1===i.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+`${a.rank} and targets rank ${i.rank}`),(0,t.assertShapesMatch)(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const p=a.shape[a.shape.length-1];(0,t.assert)(o>0&&o<=p,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+`dimension (${p}), but got ${o}`);const h=await a.data(),c=await i.data(),[l,d]=[h.length/p,p],u=(0,t.getTypedArrayFromDType)("bool",l);for(let e=0;e<l;e++){const t=e*d,s=h.subarray(t,t+d),r=[];for(let e=0;e<s.length;e++)r.push({value:s[e],index:e});r.sort((e,t)=>t.value-e.value),u[e]=0;for(let n=0;n<o;n++)if(r[n].index===c[e]){u[e]=1;break}}return r!==a&&a.dispose(),n!==i&&i.dispose(),(0,s.tensor)(u,i.shape,"bool")}const n=r;exports.inTopKAsync=n;
},{"../tensor_util_env":"x0Hg","../util":"UxaK","./tensor":"tCGm"}],"Y2RI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=p(require("../util")),n=p(require("./conv_util")),o=require("./operation"),a=require("./reshape");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function s(o,i,p,s,u,c="NHWC",l){let d=o;3===o.rank&&(d=(0,a.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let h=i;3===h.rank&&(h=(0,a.reshape)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),t.assert(4===d.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${d.shape}.`),t.assert(4===h.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${h.shape}.`),t.assert(4===p.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${p}.`);const f="NHWC"===c?d.shape[3]:d.shape[1],v="NHWC"===c?h.shape[3]:h.shape[1];t.assert(f===p[2],()=>`Error in conv2dDerFilter: depth of input ${f}) must `+`match input depth in filter (${p[2]}.`),t.assert(v===p[3],()=>`Error in conv2dDerFilter: depth of dy (${v}) must `+`match output depth for filter (${p[3]}).`),null!=l&&t.assert(t.isInt(u),()=>"Error in conv2dDerFilter: pad must be an integer when using, "+`dimRoundingMode ${l} but got pad ${u}.`);const D={x:d,dy:h},b={strides:s,pad:u,dataFormat:c,dimRoundingMode:l,filterShape:p};return e.ENGINE.runKernelFunc(e=>{const r=n.convertConv2DDataFormat(c),t=n.computeConv2DInfo(d.shape,p,s,1,u,l,!1,r);return e.conv2dDerFilter(d,h,t)},D,null,r.Conv2DBackpropFilter,b)}const u=(0,o.op)({conv2DBackpropFilter_:s});exports.conv2DBackpropFilter=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"pXCJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFusedDyActivation=f,exports.getFusedBiasGradient=c,exports.applyActivation=d,exports.shouldFuse=void 0;var e=p(require("./broadcast_util")),r=require("./elu"),t=require("./mul"),u=require("./prelu"),n=require("./relu"),i=require("./relu6"),o=require("./reshape"),l=require("./step"),s=require("./sum");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=u?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function f(e,r,u){if(null==u||"linear"===u)return e;if("relu"===u)return(0,t.mul)(e,(0,l.step)(r));throw new Error(`Cannot compute gradient for fused activation ${u}.`)}function c(r,t){let u=t;const n=e.getReductionAxes(r.shape,t.shape);return n.length>0&&(u=(0,s.sum)(u,n)),(0,o.reshape)(u,r.shape)}function d(e,t,o){if("linear"===t)return e;if("relu"===t)return(0,n.relu)(e);if("elu"===t)return(0,r.elu)(e);if("relu6"===t)return(0,i.relu6)(e);if("prelu"===t)return(0,u.prelu)(e,o);throw new Error(`Unknown fused activation ${t}.`)}const h=(e,r)=>{return!(e>0)||"linear"===r};exports.shouldFuse=h;
},{"./broadcast_util":"nprq","./elu":"uIqF","./mul":"WS4w","./prelu":"IOvE","./relu":"Htix","./relu6":"bNXk","./reshape":"khVG","./step":"DQ8I","./sum":"YHNB"}],"Qg3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2d=void 0;var e=require("../../engine"),r=require("../../gradients"),t=require("../../kernel_names"),n=require("../../tensor_util"),o=require("../../tensor_util_env"),a=g(require("../../util")),i=require("../add"),s=g(require("../broadcast_util")),u=require("../conv2d"),d=require("../conv2d_backprop_filter"),p=require("../conv2d_backprop_input"),c=g(require("../conv_util")),l=require("../fused_util"),v=require("../operation"),f=require("../reshape");function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function b({x:v,filter:h,strides:g,pad:b,dataFormat:k="NHWC",dilations:m=[1,1],dimRoundingMode:y,bias:_,activation:q="linear",preluActivationWeights:E}){if(q=q||"linear",!1===(0,l.shouldFuse)(e.ENGINE.state.gradientDepth,q)){let e=(0,u.conv2d)(v,h,g,b,k,m,y);return null!=_&&(e=(0,i.add)(e,_)),(0,l.applyActivation)(e,q,E)}const F=(0,o.convertToTensor)(v,"x","conv2d"),D=(0,o.convertToTensor)(h,"filter","conv2d");let O=F,$=!1;3===F.rank&&($=!0,O=(0,f.reshape)(F,[1,F.shape[0],F.shape[1],F.shape[2]])),a.assert(4===O.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+`${O.rank}.`),a.assert(4===D.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+`${D.rank}.`),null!=y&&a.assert(a.isInt(b),()=>"Error in fused conv2d: pad must be an integer when using, "+`dimRoundingMode ${y} but got pad ${b}.`),a.assert(O.shape[3]===D.shape[2],()=>`Error in conv2d: depth of input (${O.shape[3]}) must match `+`input depth for filter ${D.shape[2]}.`),a.assert(c.eitherStridesOrDilationsAreOne(g,m),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${g} and dilations '${m}'`),a.assert("NHWC"===k,()=>`Error in conv2d: got dataFormat of ${k} but only NHWC is currently supported.`);const G=c.computeConv2DInfo(O.shape,D.shape,g,m,b,y);let N,T;null!=_&&(N=(0,o.convertToTensor)(_,"bias","fused conv2d"),[N]=(0,n.makeTypesMatch)(N,F),s.assertAndGetBroadcastShape(G.outShape,N.shape)),null!=E&&(T=(0,o.convertToTensor)(E,"prelu weights","fused conv2d"));const A=(e,r)=>{const[t,n,o,i]=r,s=(0,l.getFusedDyActivation)(e,o,q);a.assert(c.tupleValuesAreOne(m),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${m}'`);const u=[(0,p.conv2DBackpropInput)(n.shape,s,t,g,b),(0,d.conv2DBackpropFilter)(n,s,t.shape,g,b)];if(null!=i){const e=(0,l.getFusedBiasGradient)(i,s);u.push(e)}return u},C=e=>{return e.fusedConv2d({input:O,filter:D,convInfo:G,bias:N,activation:q,preluActivationWeights:T})},M={x:O,filter:D,bias:N,preluActivationWeights:T},W={strides:g,pad:b,dataFormat:k,dilations:m,dimRoundingMode:y,activation:q};if(null==_){return(0,r.customGrad)((r,n,o)=>{let a=e.ENGINE.runKernelFunc(C,M,null,t.FusedConv2D,W);return o([n,r,a]),$&&(a=(0,f.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:A}})(O,D)}return(0,r.customGrad)((r,n,o,a)=>{let i=e.ENGINE.runKernelFunc(C,M,null,t.FusedConv2D,W);return a([n,r,i,o]),$&&(i=(0,f.reshape)(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:A}})(O,D,N)}const k=(0,v.op)({fusedConv2d_:b});exports.conv2d=k;
},{"../../engine":"tmUz","../../gradients":"FjdM","../../kernel_names":"r3vI","../../tensor_util":"vUHI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../broadcast_util":"nprq","../conv2d":"K8t2","../conv2d_backprop_filter":"Y2RI","../conv2d_backprop_input":"ufM1","../conv_util":"cqi6","../fused_util":"pXCJ","../operation":"rO1i","../reshape":"khVG"}],"NeJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=p(require("./conv_util")),n=require("./operation"),o=require("./reshape");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var p=n?Object.getOwnPropertyDescriptor(e,o):null;p&&(p.get||p.set)?Object.defineProperty(t,o,p):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function a(n,i,p,a,s,u=[1,1],c){let l=n;3===n.rank&&(l=(0,o.reshape)(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let d=i;3===d.rank&&(d=(0,o.reshape)(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const f={x:l,dy:d},v={strides:a,pad:s,dimRoundingMode:c,dilations:u,filterShape:p};return e.ENGINE.runKernelFunc(e=>{const r=t.computeConv2DInfo(n.shape,p,a,u,s,c,!0);return e.depthwiseConv2DDerFilter(l,d,r)},f,null,r.DepthwiseConv2dNativeBackpropFilter,v)}const s=(0,n.op)({depthwiseConv2dNativeBackpropFilter_:a});exports.depthwiseConv2dNativeBackpropFilter=s;
},{"../engine":"tmUz","../kernel_names":"r3vI","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"xNAn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeBackpropInput=void 0;var e=require("../engine"),t=require("../kernel_names"),r=i(require("./conv_util")),n=require("./operation"),p=require("./reshape");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in e)if(Object.prototype.hasOwnProperty.call(e,p)){var i=n?Object.getOwnPropertyDescriptor(e,p):null;i&&(i.get||i.set)?Object.defineProperty(r,p,i):r[p]=e[p]}return r.default=e,t&&t.set(e,r),r}function u(n,o,i,u,a,s=[1,1],c){let d=o,f=!1;3===o.rank&&(f=!0,d=(0,p.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={dy:d,filter:i},v={strides:u,pad:a,dimRoundingMode:c,dilations:s,inputShape:n},h=e.ENGINE.runKernelFunc(e=>{const t=r.computeConv2DInfo(n,i.shape,u,s,a,c,!0);return e.depthwiseConv2DDerInput(d,i,t)},l,null,t.DepthwiseConv2dNativeBackpropInput,v);return f?(0,p.reshape)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const a=(0,n.op)({depthwiseConv2dNativeBackpropInput_:u});exports.depthwiseConv2dNativeBackpropInput=a;
},{"../engine":"tmUz","../kernel_names":"r3vI","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"wbZR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2d=void 0;var e=require("../../engine"),t=require("../../gradients"),r=require("../../kernel_names"),n=require("../../tensor_util"),i=require("../../tensor_util_env"),s=w(require("../../util")),a=require("../add"),o=w(require("../broadcast_util")),u=w(require("../conv_util")),d=require("../depthwise_conv2d"),p=require("../depthwise_conv2d_native_backprop_filter"),l=require("../depthwise_conv2d_native_backprop_input"),h=require("../fused_util"),c=require("../operation"),v=require("../reshape");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function w(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function g({x:c,filter:f,strides:w,pad:g,dataFormat:b="NHWC",dilations:C=[1,1],dimRoundingMode:_,bias:m,activation:k="linear",preluActivationWeights:q}){if(!1===(0,h.shouldFuse)(e.ENGINE.state.gradientDepth,k)){let e=(0,d.depthwiseConv2d)(c,f,w,g,b,C,_);return null!=m&&(e=(0,a.add)(e,m)),(0,h.applyActivation)(e,k,q)}const y=(0,i.convertToTensor)(c,"x","depthwiseConv2d"),D=(0,i.convertToTensor)(f,"filter","depthwiseConv2d");let E=y,F=!1;3===y.rank&&(F=!0,E=(0,v.reshape)(y,[1,y.shape[0],y.shape[1],y.shape[2]])),s.assert(4===E.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+`rank ${E.rank}.`),s.assert(4===D.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+`but got rank ${D.rank}.`),s.assert(E.shape[3]===D.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+`(${E.shape[3]}) must match the inChannels dimension in `+`filter ${D.shape[2]}.`),null==C&&(C=[1,1]),s.assert(u.eitherStridesOrDilationsAreOne(w,C),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+`be 1. Got strides ${w} and dilations '${C}'`),null!=_&&s.assert(s.isInt(g),()=>"Error in fused depthwiseConv2d: pad must be an integer when "+`using dimRoundingMode ${_} but got pad ${g}.`);const O=u.computeConv2DInfo(E.shape,D.shape,w,C,g,_,!0);let G,N;null!=m&&(G=(0,i.convertToTensor)(m,"bias","fused conv2d"),[G]=(0,n.makeTypesMatch)(G,y),o.assertAndGetBroadcastShape(O.outShape,G.shape)),null!=q&&(N=(0,i.convertToTensor)(q,"prelu weights","fused depthwiseConv2d"));const T=(e,t)=>{s.assert(u.tupleValuesAreOne(C),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+`'${C}'`);const[r,n,i,a]=t,o=(0,h.getFusedDyActivation)(e,i,k),d=(0,l.depthwiseConv2dNativeBackpropInput)(n.shape,o,r,w,g,C,_),c=(0,p.depthwiseConv2dNativeBackpropFilter)(n,o,r.shape,w,g,C,_);if(null!=a){return[d,c,(0,h.getFusedBiasGradient)(G,o)]}return[d,c]},$=e=>{return e.fusedDepthwiseConv2D({input:E,filter:D,convInfo:O,bias:G,activation:k,preluActivationWeights:N})},A={x:E,filter:D,bias:G,preluActivationWeights:N},M={strides:w,pad:g,dataFormat:b,dilations:C,dimRoundingMode:_,activation:k};if(null==m){return(0,t.customGrad)((t,n,i)=>{let s=e.ENGINE.runKernelFunc($,A,null,r.FusedDepthwiseConv2D,M);return i([n,t,s]),F&&(s=(0,v.reshape)(s,[s.shape[1],s.shape[2],s.shape[3]])),{value:s,gradFunc:T}})(E,D)}return(0,t.customGrad)((t,n,i,s)=>{let a=e.ENGINE.runKernelFunc($,A,null,r.FusedDepthwiseConv2D,M);return s([n,t,a,i]),F&&(a=(0,v.reshape)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:T}})(E,D,G)}const b=(0,c.op)({fusedDepthwiseConv2d_:g});exports.depthwiseConv2d=b;
},{"../../engine":"tmUz","../../gradients":"FjdM","../../kernel_names":"r3vI","../../tensor_util":"vUHI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../broadcast_util":"nprq","../conv_util":"cqi6","../depthwise_conv2d":"hlJ3","../depthwise_conv2d_native_backprop_filter":"NeJN","../depthwise_conv2d_native_backprop_input":"xNAn","../fused_util":"pXCJ","../operation":"rO1i","../reshape":"khVG"}],"KnjI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.matMul=void 0;var e=require("../../engine"),r=require("../../gradients"),t=require("../../kernel_names"),a=require("../../tensor_util"),s=require("../../tensor_util_env"),n=d(require("../../util")),u=require("../add"),o=d(require("../broadcast_util")),i=require("../fused_util"),l=require("../mat_mul"),p=require("../operation"),c=require("../reshape");function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function d(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h();if(r&&r.has(e))return r.get(e);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=a?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(t,s,n):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}function f({a:p,b:h,transposeA:d=!1,transposeB:f=!1,bias:m,activation:M="linear",preluActivationWeights:v}){if(!1===(0,i.shouldFuse)(e.ENGINE.state.gradientDepth,M)){let e=(0,l.matMul)(p,h,d,f);return null!=m&&(e=(0,u.add)(e,m)),(0,i.applyActivation)(e,M,v)}let k=(0,s.convertToTensor)(p,"a","fused matMul"),b=(0,s.convertToTensor)(h,"b","fused matMul");[k,b]=(0,a.makeTypesMatch)(k,b);const g=d?k.shape[k.rank-2]:k.shape[k.rank-1],y=f?b.shape[b.rank-1]:b.shape[b.rank-2],_=d?k.shape[k.rank-1]:k.shape[k.rank-2],q=f?b.shape[b.rank-2]:b.shape[b.rank-1],T=k.shape.slice(0,-2),$=b.shape.slice(0,-2),F=n.sizeFromShape(T),A=n.sizeFromShape($);n.assert(k.rank>=2&&b.rank>=2&&k.rank===b.rank,()=>"Error in fused matMul: inputs must have the same rank of at least "+`2, got ranks ${k.rank} and ${b.rank}.`),n.assert(n.arraysEqual(T,$),()=>`Error in fused matMul: outer dimensions (${T}) and (`+`${$}) of Tensors with shapes ${k.shape} and `+`${b.shape} must match.`),n.assert(g===y,()=>`Error in fused matMul: inner shapes (${g}) and (`+`${y}) of Tensors with shapes ${k.shape} and `+`${b.shape} and transposeA=${d}`+` and transposeB=${f} must match.`);const E=k.shape.slice(0,-2).concat([_,q]),O=d?(0,c.reshape)(k,[F,g,_]):(0,c.reshape)(k,[F,_,g]),j=f?(0,c.reshape)(b,[A,q,y]):(0,c.reshape)(b,[A,y,q]);let w,B;null!=m&&(w=(0,s.convertToTensor)(m,"bias","fused matMul"),[w]=(0,a.makeTypesMatch)(w,k),o.assertAndGetBroadcastShape(E,w.shape)),null!=v&&(B=(0,s.convertToTensor)(v,"prelu weights","fused matMul"));const G=(e,r)=>{const[t,a,s,n]=r,u=(0,i.getFusedDyActivation)((0,c.reshape)(e,s.shape),s,M);let o,p;if(d||f?!d&&f?(o=(0,l.matMul)(u,a,!1,!1),p=(0,l.matMul)(u,t,!0,!1)):d&&!f?(o=(0,l.matMul)(a,u,!1,!0),p=(0,l.matMul)(t,u,!1,!1)):(o=(0,l.matMul)(a,u,!0,!0),p=(0,l.matMul)(u,t,!0,!0)):(o=(0,l.matMul)(u,a,!1,!0),p=(0,l.matMul)(t,u,!0,!1)),null!=m){return[o,p,(0,i.getFusedBiasGradient)(n,u)]}return[o,p]},N=e=>{return e.fusedBatchMatMul({a:O,b:j,transposeA:d,transposeB:f,bias:w,activation:M,preluActivationWeights:B})},P={a:O,b:j,bias:w,preluActivationWeights:B},W={transposeA:d,transposeB:f,activation:M};if(null==m){return(0,r.customGrad)((r,a,s)=>{const n=e.ENGINE.runKernelFunc(N,P,null,t._FusedMatMul,W);return s([r,a,n]),{value:(0,c.reshape)(n,E),gradFunc:G}})(O,j)}return(0,r.customGrad)((r,a,s,n)=>{const u=e.ENGINE.runKernelFunc(N,P,null,t._FusedMatMul,W);return n([r,a,u,s]),{value:(0,c.reshape)(u,E),gradFunc:G}})(O,j,w)}const m=(0,p.op)({fusedMatMul_:f});exports.matMul=m;
},{"../../engine":"tmUz","../../gradients":"FjdM","../../kernel_names":"r3vI","../../tensor_util":"vUHI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../broadcast_util":"nprq","../fused_util":"pXCJ","../mat_mul":"A3yk","../operation":"rO1i","../reshape":"khVG"}],"iOEA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return e.conv2d}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return r.depthwiseConv2d}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return t.matMul}});var e=require("./fused/conv2d"),r=require("./fused/depthwise_conv2d"),t=require("./fused/mat_mul");
},{"./fused/conv2d":"Qg3X","./fused/depthwise_conv2d":"wbZR","./fused/mat_mul":"KnjI"}],"Gob6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hammingWindow=void 0;var e=require("../operation"),i=require("../signal_ops_util");function o(e){return(0,i.cosineWindow)(e,.54,.46)}const n=(0,e.op)({hammingWindow_:o});exports.hammingWindow=n;
},{"../operation":"rO1i","../signal_ops_util":"Jt6I"}],"tE3w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hannWindow=void 0;var e=require("../operation"),n=require("../signal_ops_util");function o(e){return(0,n.cosineWindow)(e,.5,.5)}const i=(0,e.op)({hannWindow_:o});exports.hannWindow=i;
},{"../operation":"rO1i","../signal_ops_util":"Jt6I"}],"jVcy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.frame=void 0;var e=require("../concat"),r=require("../fill"),s=require("../operation"),t=require("../reshape"),i=require("../slice"),o=require("../tensor2d");function c(s,c,n,u=!1,l=0){let a=0;const f=[];for(;a+c<=s.size;)f.push((0,i.slice)(s,a,c)),a+=n;if(u)for(;a<s.size;){const t=a+c-s.size,o=(0,e.concat)([(0,i.slice)(s,a,c-t),(0,r.fill)([t],l)]);f.push(o),a+=n}return 0===f.length?(0,o.tensor2d)([],[0,c]):(0,t.reshape)((0,e.concat)(f),[f.length,c])}const n=(0,s.op)({frame_:c});exports.frame=n;
},{"../concat":"gZir","../fill":"SqIp","../operation":"rO1i","../reshape":"khVG","../slice":"xcz4","../tensor2d":"Q66m"}],"XqFB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stft=void 0;var e=require("../concat"),r=require("../mul"),t=require("../operation"),o=require("../signal_ops_util"),i=require("../slice"),n=require("../spectral/rfft"),s=require("./frame"),u=require("./hann_window");function c(t,c,f,l,a=u.hannWindow){null==l&&(l=(0,o.enclosingPowerOfTwo)(c));const p=(0,s.frame)(t,c,f),q=(0,r.mul)(p,a(c)),_=[];for(let e=0;e<p.shape[0];e++)_.push((0,n.rfft)((0,i.slice)(q,[e,0],[1,c]),l));return(0,e.concat)(_)}const f=(0,t.op)({stft_:c});exports.stft=f;
},{"../concat":"gZir","../mul":"WS4w","../operation":"rO1i","../signal_ops_util":"Jt6I","../slice":"xcz4","../spectral/rfft":"G4qK","./frame":"jVcy","./hann_window":"tE3w"}],"bV6Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cropAndResize=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),n=i(require("../../util")),o=require("../operation");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function a(o,s,i,a,u,p){const c=(0,t.convertToTensor)(o,"image","cropAndResize"),l=(0,t.convertToTensor)(s,"boxes","cropAndResize","float32"),b=(0,t.convertToTensor)(i,"boxInd","cropAndResize","int32");u=u||"bilinear",p=p||0;const d=l.shape[0];n.assert(4===c.rank,()=>"Error in cropAndResize: image must be rank 4,"+`but got rank ${c.rank}.`),n.assert(2===l.rank&&4===l.shape[1],()=>`Error in cropAndResize: boxes must be have size [${d},4] `+`but had shape ${l.shape}.`),n.assert(1===b.rank&&b.shape[0]===d,()=>`Error in cropAndResize: boxInd must be have size [${d}] `+`but had shape ${l.shape}.`),n.assert(2===a.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+`length ${a.length}.`),n.assert(a[0]>=1&&a[1]>=1,()=>`cropSize must be atleast [1,1], but was ${a}`),n.assert("bilinear"===u||"nearest"===u,()=>`method must be bilinear or nearest, but was ${u}`);const f={image:c,boxes:l,boxInd:b},h={method:u,extrapolationValue:p,cropSize:a};return e.ENGINE.runKernelFunc(e=>e.cropAndResize(c,l,b,a,u,p),f,null,r.CropAndResize,h)}const u=(0,o.op)({cropAndResize_:a});exports.cropAndResize=u;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i"}],"d7Ff":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.flipLeftRight=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=u(require("../../util")),i=require("../operation");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var u=n?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function f(i){const o=(0,r.convertToTensor)(i,"image","flipLeftRight","float32");n.assert(4===o.rank,()=>"Error in flipLeftRight: image must be rank 4,"+`but got rank ${o.rank}.`);const u={image:o};return e.ENGINE.runKernel(t.FlipLeftRight,u,{})}const a=(0,i.op)({flipLeftRight_:f});exports.flipLeftRight=a;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i"}],"ltMM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotateWithOffset=void 0;var e=require("../../engine"),t=require("../../kernel_names"),r=require("../../tensor_util_env"),n=a(require("../../util")),o=require("../operation");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function f(o,i,a=0,f=.5){const u=(0,r.convertToTensor)(o,"image","rotateWithOffset","float32");n.assert(4===u.rank,()=>"Error in rotateWithOffset: image must be rank 4,"+`but got rank ${u.rank}.`);const s={image:u},c={radians:i,fillValue:a,center:f};return e.ENGINE.runKernel(t.RotateWithOffset,s,c)}const u=(0,o.op)({rotateWithOffset_:f});exports.rotateWithOffset=u;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i"}],"toIx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppSanityCheck=s;var e=r(require("../util"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,r&&r.set(e,s),s}function s(t,r,s,n,a,o){null==n&&(n=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);const u=t.shape[0];return s=Math.min(s,u),e.assert(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),e.assert(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),e.assert(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),e.assert(1===r.rank,()=>"scores must be a 1D tensor"),e.assert(r.shape[0]===u,()=>`scores has incompatible shape with boxes. Expected ${u}, `+`but was ${r.shape[0]}`),e.assert(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:s,iouThreshold:n,scoreThreshold:a,softNmsSigma:o}}
},{"../util":"UxaK"}],"cbMx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppression=void 0;var e=require("../../engine"),o=require("../../kernel_names"),n=require("../../tensor_util_env"),r=require("../nonmax_util"),s=require("../operation");function u(s,u,i,p=.5,t=Number.NEGATIVE_INFINITY){const a=(0,n.convertToTensor)(s,"boxes","nonMaxSuppression"),x=(0,n.convertToTensor)(u,"scores","nonMaxSuppression"),c=(0,r.nonMaxSuppSanityCheck)(a,x,i,p,t);i=c.maxOutputSize,p=c.iouThreshold,t=c.scoreThreshold;const l={maxOutputSize:i,iouThreshold:p,scoreThreshold:t};return e.ENGINE.runKernelFunc(e=>e.nonMaxSuppression(a,x,i,p,t),{boxes:a,scores:x},null,o.NonMaxSuppressionV3,l)}const i=(0,s.op)({nonMaxSuppression_:u});exports.nonMaxSuppression=i;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx","../operation":"rO1i"}],"AUuE":[function(require,module,exports) {
"use strict";function e(e,n,r){const o=t(e,n,r),c=o<0?-(o+1):o;e.splice(c,0,n)}function t(e,t,o){return r(e,t,o||n)}function n(e,t){return e>t?1:e<t?-1:0}function r(e,t,n){let r=0,o=e.length,c=0,s=!1;for(;r<o;){const u=n(t,e[c=r+(o-r>>>1)]);u>0?r=c+1:(o=c,s=!u)}return s?r:-r-1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binaryInsert=e,exports.binarySearch=t;
},{}],"YE1i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionV3Impl=t,exports.nonMaxSuppressionV4Impl=s,exports.nonMaxSuppressionV5Impl=o;var e=require("../ops/scalar"),n=require("../ops/tensor1d"),r=require("./array_util");function t(e,n,r,t,s){return a(e,n,r,t,s,0).selectedIndices}function s(e,n,r,t,s,o){return a(e,n,r,t,s,0,!1,o,!0)}function o(e,n,r,t,s,o){return a(e,n,r,t,s,o,!0)}function a(t,s,o,a,p,x,h=!1,l=!1,M=!1){const d=[];for(let e=0;e<s.length;e++)s[e]>p&&d.push({score:s[e],boxIndex:e,suppressBeginIndex:0});d.sort(u);const f=x>0?-.5/x:0,m=[],I=[];for(;m.length<o&&d.length>0;){const e=d.pop(),{score:n,boxIndex:s,suppressBeginIndex:o}=e;if(n<p)break;let x=!1;for(let r=m.length-1;r>=o;--r){const n=c(t,s,m[r]);if(n>=a){x=!0;break}if(e.score=e.score*i(a,f,n),e.score<=p)break}e.suppressBeginIndex=m.length,x||(e.score===n?(m.push(s),I.push(e.score)):e.score>p&&(0,r.binaryInsert)(d,e,u))}const b=m.length,g=o-b;l&&g>0&&(m.push(...new Array(g).fill(0)),I.push(...new Array(g).fill(0)));const y={selectedIndices:(0,n.tensor1d)(m,"int32")};return h&&(y.selectedScores=(0,n.tensor1d)(I,"float32")),M&&(y.validOutputs=(0,e.scalar)(b,"int32")),y}function c(e,n,r){const t=e.subarray(4*n,4*n+4),s=e.subarray(4*r,4*r+4),o=Math.min(t[0],t[2]),a=Math.min(t[1],t[3]),c=Math.max(t[0],t[2]),i=Math.max(t[1],t[3]),u=Math.min(s[0],s[2]),p=Math.min(s[1],s[3]),x=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),l=(c-o)*(i-a),M=(x-u)*(h-p);if(l<=0||M<=0)return 0;const d=Math.max(o,u),f=Math.max(a,p),m=Math.min(c,x),I=Math.min(i,h),b=Math.max(m-d,0)*Math.max(I-f,0);return b/(l+M-b)}function i(e,n,r){const t=Math.exp(n*r*r);return r<=e?t:0}function u(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}
},{"../ops/scalar":"RBNv","../ops/tensor1d":"R7Cm","./array_util":"AUuE"}],"Hduk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),n=require("../../tensor_util_env"),s=require("../nonmax_util");async function o(o,r,i,p=.5,t=Number.NEGATIVE_INFINITY){const a=(0,n.convertToTensor)(o,"boxes","nonMaxSuppressionAsync"),u=(0,n.convertToTensor)(r,"scores","nonMaxSuppressionAsync"),c=(0,s.nonMaxSuppSanityCheck)(a,u,i,p,t);i=c.maxOutputSize,p=c.iouThreshold,t=c.scoreThreshold;const x=await Promise.all([a.data(),u.data()]),d=x[0],l=x[1],_=(0,e.nonMaxSuppressionV3Impl)(d,l,i,p,t);return a!==o&&a.dispose(),u!==r&&u.dispose(),_}const r=o;exports.nonMaxSuppressionAsync=r;
},{"../../backends/non_max_suppression_impl":"YE1i","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx"}],"p5vV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScore=void 0;var e=require("../../engine"),o=require("../../kernel_names"),r=require("../../tensor_util_env"),s=require("../nonmax_util"),n=require("../operation");function i(n,i,t,u=.5,p=Number.NEGATIVE_INFINITY,c=0){const a=(0,r.convertToTensor)(n,"boxes","nonMaxSuppression"),S=(0,r.convertToTensor)(i,"scores","nonMaxSuppression"),x=(0,s.nonMaxSuppSanityCheck)(a,S,t,u,p,c),h={boxes:a,scores:S},l={maxOutputSize:t=x.maxOutputSize,iouThreshold:u=x.iouThreshold,scoreThreshold:p=x.scoreThreshold,softNmsSigma:c=x.softNmsSigma},d=e.ENGINE.runKernel(o.NonMaxSuppressionV5,h,l);return{selectedIndices:d[0],selectedScores:d[1]}}const t=(0,n.op)({nonMaxSuppressionWithScore_:i});exports.nonMaxSuppressionWithScore=t;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx","../operation":"rO1i"}],"UxN0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionWithScoreAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),s=require("../../tensor_util_env"),o=require("../nonmax_util");async function n(n,r,i,t=.5,p=Number.NEGATIVE_INFINITY,a=0){const u=(0,s.convertToTensor)(n,"boxes","nonMaxSuppressionAsync"),c=(0,s.convertToTensor)(r,"scores","nonMaxSuppressionAsync"),x=(0,o.nonMaxSuppSanityCheck)(u,c,i,t,p,a);i=x.maxOutputSize,t=x.iouThreshold,p=x.scoreThreshold,a=x.softNmsSigma;const S=await Promise.all([u.data(),c.data()]),d=S[0],l=S[1],m=(0,e.nonMaxSuppressionV5Impl)(d,l,i,t,p,a);return u!==n&&u.dispose(),c!==r&&c.dispose(),m}const r=n;exports.nonMaxSuppressionWithScoreAsync=r;
},{"../../backends/non_max_suppression_impl":"YE1i","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx"}],"MUoJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPadded=void 0;var e=require("../../engine"),o=require("../../kernel_names"),n=require("../../tensor_util_env"),r=require("../nonmax_util"),s=require("../operation");function u(s,u,i,t=.5,p=Number.NEGATIVE_INFINITY,a=!1){const d=(0,n.convertToTensor)(s,"boxes","nonMaxSuppression"),x=(0,n.convertToTensor)(u,"scores","nonMaxSuppression"),c=(0,r.nonMaxSuppSanityCheck)(d,x,i,t,p,null),l={boxes:d,scores:x},S={maxOutputSize:c.maxOutputSize,iouThreshold:c.iouThreshold,scoreThreshold:c.scoreThreshold,padToMaxOutputSize:a},T=e.ENGINE.runKernel(o.NonMaxSuppressionV4,l,S);return{selectedIndices:T[0],validOutputs:T[1]}}const i=(0,s.op)({nonMaxSuppressionPadded_:u});exports.nonMaxSuppressionPadded=i;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx","../operation":"rO1i"}],"BoIX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nonMaxSuppressionPaddedAsync=void 0;var e=require("../../backends/non_max_suppression_impl"),n=require("../../tensor_util_env"),s=require("../nonmax_util");async function o(o,r,a,i=.5,p=Number.NEGATIVE_INFINITY,t=!1){const u=(0,n.convertToTensor)(o,"boxes","nonMaxSuppressionAsync"),c=(0,n.convertToTensor)(r,"scores","nonMaxSuppressionAsync"),d=(0,s.nonMaxSuppSanityCheck)(u,c,a,i,p,null),x=d.maxOutputSize,l=d.iouThreshold,_=d.scoreThreshold,[S,T]=await Promise.all([u.data(),c.data()]),m=(0,e.nonMaxSuppressionV4Impl)(S,T,x,l,_,t);return u!==o&&u.dispose(),c!==r&&c.dispose(),m}const r=o;exports.nonMaxSuppressionPaddedAsync=r;
},{"../../backends/non_max_suppression_impl":"YE1i","../../tensor_util_env":"x0Hg","../nonmax_util":"toIx"}],"eY9c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeBilinear=void 0;var e=require("../../engine"),r=require("../../kernel_names"),n=require("../../tensor_util_env"),t=o(require("../../util")),i=require("../operation"),a=require("../reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var n={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=t?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function u(i,s,o=!1){const u=(0,n.convertToTensor)(i,"images","resizeBilinear");t.assert(3===u.rank||4===u.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+`rank ${u.rank}.`),t.assert(2===s.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+`${s}.`);let p=u,l=!1;3===u.rank&&(l=!0,p=(0,a.reshape)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));const[c,f]=s,h={images:p},g={alignCorners:o,size:s},b=e.ENGINE.runKernelFunc((e,r)=>(r([p]),e.resizeBilinear(p,c,f,o)),h,null,r.ResizeBilinear,g);return l?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const p=(0,i.op)({resizeBilinear_:u});exports.resizeBilinear=p;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i","../reshape":"khVG"}],"rzap":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resizeNearestNeighbor=void 0;var e=require("../../engine"),r=require("../../kernel_names"),t=require("../../tensor_util_env"),n=o(require("../../util")),s=require("../operation"),a=require("../reshape");function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(t,s,a):t[s]=e[s]}return t.default=e,r&&r.set(e,t),t}function u(s,i,o=!1){const u=(0,t.convertToTensor)(s,"images","resizeNearestNeighbor");n.assert(3===u.rank||4===u.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+`rank ${u.rank}.`),n.assert(2===i.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+`${i}.`),n.assert("float32"===u.dtype||"int32"===u.dtype,()=>"`images` must have `int32` or `float32` as dtype");let p=u,l=!1;3===u.rank&&(l=!0,p=(0,a.reshape)(u,[1,u.shape[0],u.shape[1],u.shape[2]]));const[h,c]=i,f={images:p},g={alignCorners:o,size:i},b=e.ENGINE.runKernelFunc((e,r)=>(r([p]),e.resizeNearestNeighbor(p,h,c,o)),f,null,r.ResizeNearestNeighbor,g);return l?(0,a.reshape)(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const p=(0,s.op)({resizeNearestNeighbor_:u});exports.resizeNearestNeighbor=p;
},{"../../engine":"tmUz","../../kernel_names":"r3vI","../../tensor_util_env":"x0Hg","../../util":"UxaK","../operation":"rO1i","../reshape":"khVG"}],"AwWZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bandPart=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),a=require("../greater_equal"),t=require("../less_equal"),n=require("../logical_and"),s=require("../operation"),u=require("../range"),o=require("../reshape"),i=require("../scalar"),l=require("../stack"),b=require("../sub"),c=require("../unstack"),p=require("../where"),q=require("../zeros");function d(s,d,g){(0,r.assert)(d%1==0,()=>`bandPart(): numLower must be an integer, got ${d}.`),(0,r.assert)(g%1==0,()=>`bandPart(): numUpper must be an integer, got ${g}.`);const h=(0,e.convertToTensor)(s,"a","bandPart");(0,r.assert)(h.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${h.rank}.`);const m=h.shape,[P,w]=h.shape.slice(-2);if(!(d<=P))throw new Error(`bandPart(): numLower (${d})`+` must not be greater than the number of rows (${P}).`);if(!(g<=w))throw new Error(`bandPart(): numUpper (${g})`+` must not be greater than the number of columns (${w}).`);d<0&&(d=P),g<0&&(g=w);const _=(0,o.reshape)((0,u.range)(0,P,1,"int32"),[-1,1]),k=(0,u.range)(0,w,1,"int32"),$=(0,b.sub)(_,k),f=(0,n.logicalAnd)((0,t.lessEqual)($,(0,i.scalar)(+d,"int32")),(0,a.greaterEqual)($,(0,i.scalar)(-g,"int32"))),v=(0,q.zeros)([P,w],h.dtype);return(0,o.reshape)((0,l.stack)((0,c.unstack)((0,o.reshape)(h,[-1,P,w])).map(e=>(0,p.where)(f,e,v))),m)}const g=(0,s.op)({bandPart_:d});exports.bandPart=g;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../greater_equal":"wG0H","../less_equal":"NxL8","../logical_and":"ntJL","../operation":"rO1i","../range":"WweN","../reshape":"khVG","../scalar":"RBNv","../stack":"GHVB","../sub":"OFjl","../unstack":"JyML","../where":"AEtV","../zeros":"MNgB"}],"ooKU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gramSchmidt=void 0;var e=require("../../engine"),r=require("../../util"),t=require("../div"),s=require("../mul"),i=require("../norm"),u=require("../operation"),n=require("../split"),o=require("../squeeze"),l=require("../stack"),m=require("../sub"),a=require("../sum");function c(u){let c;if(Array.isArray(u)){c=!1,(0,r.assert)(null!=u&&u.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const e=u[0].shape[0];for(let t=1;t<u.length;++t)(0,r.assert)(u[t].shape[0]===e,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+`(${u[t].shape[0]} vs. ${e})`)}else c=!0,u=(0,n.split)(u,u.shape[0],0).map(e=>(0,o.squeeze)(e,[0]));(0,r.assert)(u.length<=u[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${u.length}) exceeds `+`number of dimensions (${u[0].shape[0]}).`);const h=[],p=u;for(let r=0;r<u.length;++r)h.push(e.ENGINE.tidy(()=>{let e=p[r];if(r>0)for(let t=0;t<r;++t){const r=(0,s.mul)((0,a.sum)((0,s.mul)(h[t],e)),h[t]);e=(0,m.sub)(e,r)}return(0,t.div)(e,(0,i.norm)(e,"euclidean"))}));return c?(0,l.stack)(h,0):h}const h=(0,u.op)({gramSchmidt_:c});exports.gramSchmidt=h;
},{"../../engine":"tmUz","../../util":"UxaK","../div":"XyQ4","../mul":"WS4w","../norm":"Hzs7","../operation":"rO1i","../split":"L2gY","../squeeze":"N7Os","../stack":"GHVB","../sub":"OFjl","../sum":"YHNB"}],"DUW0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qr=void 0;var e=require("../../engine"),r=require("../../globals"),s=require("../../util"),t=require("../clone"),u=require("../concat"),a=require("../div"),n=require("../eye"),i=require("../greater"),o=require("../mat_mul"),c=require("../mul"),l=require("../neg"),p=require("../norm"),h=require("../operation"),q=require("../reshape"),m=require("../slice"),d=require("../stack"),g=require("../sub"),b=require("../tensor2d"),k=require("../transpose"),M=require("../unstack"),f=require("../where");function v(e,r=!1){if((0,s.assert)(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return y(e,r);{const s=e.shape.slice(0,e.shape.length-2).reduce((e,r)=>e*r),t=(0,M.unstack)((0,q.reshape)(e,[s,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),u=[],a=[];return t.forEach(e=>{const[s,t]=y(e,r);u.push(s),a.push(t)}),[(0,q.reshape)((0,d.stack)(u,0),e.shape),(0,q.reshape)((0,d.stack)(a,0),e.shape)]}}function y(h,q=!1){return e.ENGINE.tidy(()=>{(0,s.assert)(2===h.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${h.shape.length}D Tensor.`);const d=h.shape[0],M=h.shape[1];let v=(0,n.eye)(d),y=(0,t.clone)(h);const E=(0,b.tensor2d)([[1]],[1,1]);let N=(0,t.clone)(E);const _=d>=M?M:d;for(let s=0;s<_;++s){const n=y,h=N,q=v;[N,y,v]=e.ENGINE.tidy(()=>{const e=(0,m.slice)(y,[s,s],[d-s,1]),r=(0,p.norm)(e),n=(0,m.slice)(y,[s,s],[1,1]),h=(0,f.where)((0,i.greater)(n,0),(0,b.tensor2d)([[-1]]),(0,b.tensor2d)([[1]])),q=(0,g.sub)(n,(0,c.mul)(h,r)),_=(0,a.div)(e,q);N=1===_.shape[0]?(0,t.clone)(E):(0,u.concat)([E,(0,m.slice)(_,[1,0],[_.shape[0]-1,_.shape[1]])],0);const x=(0,l.neg)((0,a.div)((0,o.matMul)(h,q),r)),w=(0,m.slice)(y,[s,0],[d-s,M]),D=(0,c.mul)(x,N),G=(0,k.transpose)(N);if(0===s)y=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));else{const e=(0,g.sub)(w,(0,o.matMul)(D,(0,o.matMul)(G,w)));y=(0,u.concat)([(0,m.slice)(y,[0,0],[s,M]),e],0)}const I=(0,k.transpose)(D),T=(0,m.slice)(v,[0,s],[d,v.shape[1]-s]);if(0===s)v=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));else{const e=(0,g.sub)(T,(0,o.matMul)((0,o.matMul)(T,N),I));v=(0,u.concat)([(0,m.slice)(v,[0,0],[d,s]),e],1)}return[N,y,v]}),(0,r.dispose)([n,h,q])}return!q&&d>M&&(v=(0,m.slice)(v,[0,0],[d,M]),y=(0,m.slice)(y,[0,0],[M,M])),[v,y]})}const E=(0,h.op)({qr_:v});exports.qr=E;
},{"../../engine":"tmUz","../../globals":"UkUu","../../util":"UxaK","../clone":"HHuR","../concat":"gZir","../div":"XyQ4","../eye":"kWCc","../greater":"i1I6","../mat_mul":"A3yk","../mul":"WS4w","../neg":"wgz6","../norm":"Hzs7","../operation":"rO1i","../reshape":"khVG","../slice":"xcz4","../stack":"GHVB","../sub":"OFjl","../tensor2d":"Q66m","../transpose":"yiEV","../unstack":"JyML","../where":"AEtV"}],"AFm5":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reduction=void 0,exports.Reduction=e,function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(e||(exports.Reduction=e={}));
},{}],"ZYcU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeWeightedLoss=void 0;var e=require("../../tensor_util_env"),r=require("../cast"),s=require("../div"),u=require("../loss_ops_utils"),o=require("../mean"),t=require("../mul"),i=require("../not_equal"),n=require("../ones"),c=require("../operation"),l=require("../scalar"),a=require("../sum");function d(c,d,m=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const _=(0,e.convertToTensor)(c,"losses","computeWeightedLoss");let p=null;null!=d&&(p=(0,e.convertToTensor)(d,"weights","computeWeightedLoss"));const q=null==p?_:(0,t.mul)(_,p);if(m===u.Reduction.NONE)return q;if(m===u.Reduction.SUM)return(0,a.sum)(q);if(m===u.Reduction.MEAN){if(null==p)return(0,o.mean)(q);{const e=_.size/p.size,r=(0,s.div)((0,a.sum)(q),(0,a.sum)(p));return e>1?(0,s.div)(r,(0,l.scalar)(e)):r}}if(m===u.Reduction.SUM_BY_NONZERO_WEIGHTS){if(null==p)return(0,s.div)((0,a.sum)(q),(0,l.scalar)(_.size));{const e=(0,t.mul)(p,(0,n.ones)(_.shape)),u=(0,r.cast)((0,a.sum)((0,i.notEqual)(e,(0,l.scalar)(0))),"float32");return(0,s.div)((0,a.sum)(q),u)}}throw Error(`Unknown reduction: ${m}`)}const m=(0,c.op)({computeWeightedLoss_:d});exports.computeWeightedLoss=m;
},{"../../tensor_util_env":"x0Hg","../cast":"owKL","../div":"XyQ4","../loss_ops_utils":"AFm5","../mean":"Yc5n","../mul":"WS4w","../not_equal":"RlXH","../ones":"eTx1","../operation":"rO1i","../scalar":"RBNv","../sum":"YHNB"}],"HvRC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absoluteDifference=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),o=require("../loss_ops_utils"),t=require("../operation"),i=require("../sub"),u=require("./compute_weighted_loss");function n(t,n,c,l=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const a=(0,e.convertToTensor)(t,"labels","absoluteDifference"),f=(0,e.convertToTensor)(n,"predictions","absoluteDifference");let b=null;null!=c&&(b=(0,e.convertToTensor)(c,"weights","absoluteDifference")),(0,r.assertShapesMatch)(a.shape,f.shape,"Error in absoluteDifference: ");const p=(0,s.abs)((0,i.sub)(a,f));return(0,u.computeWeightedLoss)(p,b,l)}const c=(0,t.op)({absoluteDifference_:n});exports.absoluteDifference=c;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../abs":"LQUr","../loss_ops_utils":"AFm5","../operation":"rO1i","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"eI5w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosineDistance=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),i=require("../operation"),t=require("../scalar"),n=require("../sub"),c=require("../sum"),u=require("./compute_weighted_loss");function a(i,a,l,p,_=r.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","cosineDistance"),d=(0,e.convertToTensor)(a,"predictions","cosineDistance");let h=null;null!=p&&(h=(0,e.convertToTensor)(p,"weights","cosineDistance")),(0,s.assertShapesMatch)(q.shape,d.shape,"Error in cosineDistance: ");const v=(0,t.scalar)(1),D=(0,n.sub)(v,(0,c.sum)((0,o.mul)(q,d),l,!0));return(0,u.computeWeightedLoss)(D,h,_)}const l=(0,i.op)({cosineDistance_:a});exports.cosineDistance=l;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../loss_ops_utils":"AFm5","../mul":"WS4w","../operation":"rO1i","../scalar":"RBNv","../sub":"OFjl","../sum":"YHNB","./compute_weighted_loss":"ZYcU"}],"ENpu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hingeLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),r=require("../loss_ops_utils"),o=require("../mul"),t=require("../operation"),i=require("../relu"),u=require("../scalar"),n=require("../sub"),l=require("./compute_weighted_loss");function c(t,c,a,h=r.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,e.convertToTensor)(t,"labels","hingeLoss");const _=(0,e.convertToTensor)(c,"predictions","hingeLoss");let g=null;null!=a&&(g=(0,e.convertToTensor)(a,"weights","hingeLoss")),(0,s.assertShapesMatch)(p.shape,_.shape,"Error in hingeLoss: ");const q=(0,u.scalar)(1);p=(0,n.sub)((0,o.mul)((0,u.scalar)(2),p),q);const L=(0,i.relu)((0,n.sub)(q,(0,o.mul)(p,_)));return(0,l.computeWeightedLoss)(L,g,h)}const a=(0,t.op)({hingeLoss_:c});exports.hingeLoss=a;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../loss_ops_utils":"AFm5","../mul":"WS4w","../operation":"rO1i","../relu":"Htix","../scalar":"RBNv","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"wY7G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.huberLoss=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),s=require("../abs"),u=require("../add"),o=require("../loss_ops_utils"),i=require("../minimum"),t=require("../mul"),n=require("../operation"),a=require("../scalar"),l=require("../square"),c=require("../sub"),b=require("./compute_weighted_loss");function h(n,h,q,p=1,_=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(n,"labels","huberLoss"),m=(0,e.convertToTensor)(h,"predictions","huberLoss");let L=null;null!=q&&(L=(0,e.convertToTensor)(q,"weights","huberLoss")),(0,r.assertShapesMatch)(d.shape,m.shape,"Error in huberLoss: ");const v=(0,a.scalar)(p),T=(0,s.abs)((0,c.sub)(m,d)),g=(0,i.minimum)(T,v),x=(0,c.sub)(T,g),E=(0,u.add)((0,t.mul)((0,a.scalar)(.5),(0,l.square)(g)),(0,t.mul)(v,x));return(0,b.computeWeightedLoss)(E,L,_)}const q=(0,n.op)({huberLoss_:h});exports.huberLoss=q;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../abs":"LQUr","../add":"geuL","../loss_ops_utils":"AFm5","../minimum":"q3lt","../mul":"WS4w","../operation":"rO1i","../scalar":"RBNv","../square":"rLyD","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"P3Xp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logLoss=void 0;var e=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),r=require("../log"),u=require("../loss_ops_utils"),l=require("../mul"),t=require("../neg"),i=require("../operation"),n=require("../scalar"),a=require("../sub"),c=require("./compute_weighted_loss");function g(i,g,d,p=1e-7,_=u.Reduction.SUM_BY_NONZERO_WEIGHTS){const q=(0,e.convertToTensor)(i,"labels","logLoss"),L=(0,e.convertToTensor)(g,"predictions","logLoss");let h=null;null!=d&&(h=(0,e.convertToTensor)(d,"weights","logLoss")),(0,s.assertShapesMatch)(q.shape,L.shape,"Error in logLoss: ");const v=(0,n.scalar)(1),T=(0,n.scalar)(p),b=(0,t.neg)((0,l.mul)(q,(0,r.log)((0,o.add)(L,T)))),m=(0,l.mul)((0,a.sub)(v,q),(0,r.log)((0,o.add)((0,a.sub)(v,L),T))),x=(0,a.sub)(b,m);return(0,c.computeWeightedLoss)(x,h,_)}const d=(0,i.op)({logLoss_:g});exports.logLoss=d;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../log":"UG1b","../loss_ops_utils":"AFm5","../mul":"WS4w","../neg":"wgz6","../operation":"rO1i","../scalar":"RBNv","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"WgEA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.meanSquaredError=void 0;var e=require("../../tensor_util_env"),r=require("../../util"),o=require("../loss_ops_utils"),s=require("../operation"),n=require("../squared_difference"),t=require("./compute_weighted_loss");function u(s,u,a,i=o.Reduction.SUM_BY_NONZERO_WEIGHTS){const d=(0,e.convertToTensor)(s,"labels","meanSquaredError"),c=(0,e.convertToTensor)(u,"predictions","meanSquaredError");let q=null;null!=a&&(q=(0,e.convertToTensor)(a,"weights","meanSquaredError")),(0,r.assertShapesMatch)(d.shape,c.shape,"Error in meanSquaredError: ");const l=(0,n.squaredDifference)(d,c);return(0,t.computeWeightedLoss)(l,q,i)}const a=(0,s.op)({meanSquaredError_:u});exports.meanSquaredError=a;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../loss_ops_utils":"AFm5","../operation":"rO1i","../squared_difference":"YDjz","./compute_weighted_loss":"ZYcU"}],"FeHT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sigmoidCrossEntropy=void 0;var r=require("../../tensor_util_env"),s=require("../../util"),e=require("../abs"),o=require("../add"),i=require("../exp"),t=require("../log1p"),n=require("../loss_ops_utils"),u=require("../mul"),l=require("../neg"),a=require("../operation"),p=require("../relu"),c=require("../scalar"),d=require("../sub"),g=require("./compute_weighted_loss");function m(n,a){const c=(0,r.convertToTensor)(n,"labels","sigmoidCrossEntropyWithLogits"),g=(0,r.convertToTensor)(a,"logits","sigmoidCrossEntropyWithLogits");(0,s.assertShapesMatch)(c.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");const m=(0,p.relu)(g),h=(0,u.mul)(g,c),q=(0,t.log1p)((0,i.exp)((0,l.neg)((0,e.abs)(g))));return(0,o.add)((0,d.sub)(m,h),q)}function h(e,i,t,l=0,a=n.Reduction.SUM_BY_NONZERO_WEIGHTS){let p=(0,r.convertToTensor)(e,"multiClassLabels","sigmoidCrossEntropy");const h=(0,r.convertToTensor)(i,"logits","sigmoidCrossEntropy");let q=null;if(null!=t&&(q=(0,r.convertToTensor)(t,"weights","sigmoidCrossEntropy")),(0,s.assertShapesMatch)(p.shape,h.shape,"Error in sigmoidCrossEntropy: "),l>0){const r=(0,c.scalar)(l),s=(0,c.scalar)(1),e=(0,c.scalar)(.5);p=(0,o.add)((0,u.mul)(p,(0,d.sub)(s,r)),(0,u.mul)(e,r))}const E=m(p,h);return(0,g.computeWeightedLoss)(E,q,a)}const q=(0,a.op)({sigmoidCrossEntropy_:h});exports.sigmoidCrossEntropy=q;
},{"../../tensor_util_env":"x0Hg","../../util":"UxaK","../abs":"LQUr","../add":"geuL","../exp":"S24W","../log1p":"Tu9m","../loss_ops_utils":"AFm5","../mul":"WS4w","../neg":"wgz6","../operation":"rO1i","../relu":"Htix","../scalar":"RBNv","../sub":"OFjl","./compute_weighted_loss":"ZYcU"}],"sTHL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.softmaxCrossEntropy=void 0;var e=require("../../gradients"),r=require("../../tensor_util_env"),s=require("../../util"),o=require("../add"),t=require("../axis_util"),a=require("../cast"),n=require("../div"),u=require("../exp"),i=require("../log_sum_exp"),l=require("../loss_ops_utils"),p=require("../mul"),c=require("../neg"),m=require("../operation"),d=require("../reshape"),q=require("../scalar"),x=require("../sub"),f=require("../sum"),h=require("./compute_weighted_loss");function _(r,s,o=-1){if(-1===o&&(o=s.rank-1),o!==s.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${s.rank} `+`and dim was ${o}`);return(0,e.customGrad)((e,r,s)=>{const n=(0,i.logSumExp)(r,[o],!0),l=(0,x.sub)((0,a.cast)(r,"float32"),n);s([e,l]);const m=(0,c.neg)((0,p.mul)(l,e));return{value:(0,f.sum)(m,[o]),gradFunc:(e,r)=>{const[s,n]=r,i=(0,t.expandShapeToKeepDim)(e.shape,[o]);return[(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,a.cast)(s,"float32"),(0,u.exp)(n))),(0,p.mul)((0,d.reshape)(e,i),(0,x.sub)((0,u.exp)(n),(0,a.cast)(s,"float32")))]}}})(r,s)}function g(e,t,a,u=0,i=l.Reduction.SUM_BY_NONZERO_WEIGHTS){let c=(0,r.convertToTensor)(e,"onehotLabels","softmaxCrossEntropy");const m=(0,r.convertToTensor)(t,"logits","softmaxCrossEntropy");let d=null;if(null!=a&&(d=(0,r.convertToTensor)(a,"weights","softmaxCrossEntropy")),(0,s.assertShapesMatch)(c.shape,m.shape,"Error in softmaxCrossEntropy: "),u>0){const e=(0,q.scalar)(u),r=(0,q.scalar)(1),s=(0,q.scalar)(c.shape[1]);c=(0,o.add)((0,p.mul)(c,(0,x.sub)(r,e)),(0,n.div)(e,s))}const f=_(c,m);return(0,h.computeWeightedLoss)(f,d,i)}const E=(0,m.op)({softmaxCrossEntropy_:g});exports.softmaxCrossEntropy=E;
},{"../../gradients":"FjdM","../../tensor_util_env":"x0Hg","../../util":"UxaK","../add":"geuL","../axis_util":"uTbM","../cast":"owKL","../div":"XyQ4","../exp":"S24W","../log_sum_exp":"twrn","../loss_ops_utils":"AFm5","../mul":"WS4w","../neg":"wgz6","../operation":"rO1i","../reshape":"khVG","../scalar":"RBNv","../sub":"OFjl","../sum":"YHNB","./compute_weighted_loss":"ZYcU"}],"DHFH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={image:!0,linalg:!0,losses:!0,spectral:!0,signal:!0,abs:!0,acos:!0,acosh:!0,add:!0,addN:!0,all:!0,any:!0,argMax:!0,argMin:!0,asin:!0,asinh:!0,atan:!0,atan2:!0,atanh:!0,avgPool:!0,avgPool3d:!0,basicLSTMCell:!0,batchToSpaceND:!0,batchNorm:!0,batchNorm2d:!0,batchNorm3d:!0,batchNorm4d:!0,broadcastTo:!0,buffer:!0,cast:!0,ceil:!0,clipByValue:!0,clone:!0,complex:!0,concat:!0,concat1d:!0,concat2d:!0,concat3d:!0,concat4d:!0,conv1d:!0,conv2d:!0,conv2dTranspose:!0,conv3d:!0,conv3dTranspose:!0,cos:!0,cosh:!0,cumsum:!0,depthToSpace:!0,depthwiseConv2d:!0,diag:!0,dilation2d:!0,div:!0,divNoNan:!0,dot:!0,elu:!0,equal:!0,erf:!0,exp:!0,expandDims:!0,expm1:!0,eye:!0,fill:!0,floor:!0,floorDiv:!0,gather:!0,greater:!0,greaterEqual:!0,imag:!0,isFinite:!0,isInf:!0,isNaN:!0,leakyRelu:!0,less:!0,lessEqual:!0,linspace:!0,localResponseNormalization:!0,log:!0,log1p:!0,logSigmoid:!0,logSoftmax:!0,logSumExp:!0,logicalAnd:!0,logicalNot:!0,logicalOr:!0,logicalXor:!0,matMul:!0,max:!0,maxPool:!0,maxPool3d:!0,maxPoolWithArgmax:!0,maximum:!0,mean:!0,min:!0,minimum:!0,mirrorPad:!0,mod:!0,moments:!0,mul:!0,multiRNNCell:!0,multinomial:!0,neg:!0,notEqual:!0,oneHot:!0,ones:!0,onesLike:!0,outerProduct:!0,pad:!0,pad1d:!0,pad2d:!0,pad3d:!0,pad4d:!0,pool:!0,pow:!0,prelu:!0,print:!0,prod:!0,rand:!0,randomGamma:!0,randomNormal:!0,randomUniform:!0,range:!0,real:!0,reciprocal:!0,relu:!0,relu6:!0,reshape:!0,reverse:!0,reverse1d:!0,reverse2d:!0,reverse3d:!0,reverse4d:!0,round:!0,rsqrt:!0,scalar:!0,selu:!0,separableConv2d:!0,setdiff1dAsync:!0,sigmoid:!0,sign:!0,sin:!0,sinh:!0,slice:!0,slice1d:!0,slice2d:!0,slice3d:!0,slice4d:!0,softmax:!0,softplus:!0,spaceToBatchND:!0,fft:!0,ifft:!0,irfft:!0,rfft:!0,split:!0,sqrt:!0,square:!0,squaredDifference:!0,squeeze:!0,stack:!0,step:!0,stridedSlice:!0,sub:!0,sum:!0,tan:!0,tanh:!0,tensor:!0,tensor1d:!0,tensor2d:!0,tensor3d:!0,tensor4d:!0,tensor5d:!0,tensor6d:!0,tile:!0,topk:!0,truncatedNormal:!0,unique:!0,unsortedSegmentSum:!0,unstack:!0,variable:!0,where:!0,whereAsync:!0,zeros:!0,zerosLike:!0,op:!0,OP_SCOPE_SUFFIX:!0,fused:!0};Object.defineProperty(exports,"abs",{enumerable:!0,get:function(){return r.abs}}),Object.defineProperty(exports,"acos",{enumerable:!0,get:function(){return t.acos}}),Object.defineProperty(exports,"acosh",{enumerable:!0,get:function(){return n.acosh}}),Object.defineProperty(exports,"add",{enumerable:!0,get:function(){return o.add}}),Object.defineProperty(exports,"addN",{enumerable:!0,get:function(){return u.addN}}),Object.defineProperty(exports,"all",{enumerable:!0,get:function(){return i.all}}),Object.defineProperty(exports,"any",{enumerable:!0,get:function(){return a.any}}),Object.defineProperty(exports,"argMax",{enumerable:!0,get:function(){return s.argMax}}),Object.defineProperty(exports,"argMin",{enumerable:!0,get:function(){return c.argMin}}),Object.defineProperty(exports,"asin",{enumerable:!0,get:function(){return p.asin}}),Object.defineProperty(exports,"asinh",{enumerable:!0,get:function(){return l.asinh}}),Object.defineProperty(exports,"atan",{enumerable:!0,get:function(){return f.atan}}),Object.defineProperty(exports,"atan2",{enumerable:!0,get:function(){return d.atan2}}),Object.defineProperty(exports,"atanh",{enumerable:!0,get:function(){return b.atanh}}),Object.defineProperty(exports,"avgPool",{enumerable:!0,get:function(){return m.avgPool}}),Object.defineProperty(exports,"avgPool3d",{enumerable:!0,get:function(){return g.avgPool3d}}),Object.defineProperty(exports,"basicLSTMCell",{enumerable:!0,get:function(){return x.basicLSTMCell}}),Object.defineProperty(exports,"batchToSpaceND",{enumerable:!0,get:function(){return y.batchToSpaceND}}),Object.defineProperty(exports,"batchNorm",{enumerable:!0,get:function(){return q.batchNorm}}),Object.defineProperty(exports,"batchNorm2d",{enumerable:!0,get:function(){return O.batchNorm2d}}),Object.defineProperty(exports,"batchNorm3d",{enumerable:!0,get:function(){return P.batchNorm3d}}),Object.defineProperty(exports,"batchNorm4d",{enumerable:!0,get:function(){return j.batchNorm4d}}),Object.defineProperty(exports,"broadcastTo",{enumerable:!0,get:function(){return _.broadcastTo}}),Object.defineProperty(exports,"buffer",{enumerable:!0,get:function(){return h.buffer}}),Object.defineProperty(exports,"cast",{enumerable:!0,get:function(){return v.cast}}),Object.defineProperty(exports,"ceil",{enumerable:!0,get:function(){return N.ceil}}),Object.defineProperty(exports,"clipByValue",{enumerable:!0,get:function(){return S.clipByValue}}),Object.defineProperty(exports,"clone",{enumerable:!0,get:function(){return w.clone}}),Object.defineProperty(exports,"complex",{enumerable:!0,get:function(){return k.complex}}),Object.defineProperty(exports,"concat",{enumerable:!0,get:function(){return M.concat}}),Object.defineProperty(exports,"concat1d",{enumerable:!0,get:function(){return E.concat1d}}),Object.defineProperty(exports,"concat2d",{enumerable:!0,get:function(){return z.concat2d}}),Object.defineProperty(exports,"concat3d",{enumerable:!0,get:function(){return D.concat3d}}),Object.defineProperty(exports,"concat4d",{enumerable:!0,get:function(){return T.concat4d}}),Object.defineProperty(exports,"conv1d",{enumerable:!0,get:function(){return A.conv1d}}),Object.defineProperty(exports,"conv2d",{enumerable:!0,get:function(){return C.conv2d}}),Object.defineProperty(exports,"conv2dTranspose",{enumerable:!0,get:function(){return L.conv2dTranspose}}),Object.defineProperty(exports,"conv3d",{enumerable:!0,get:function(){return W.conv3d}}),Object.defineProperty(exports,"conv3dTranspose",{enumerable:!0,get:function(){return R.conv3dTranspose}}),Object.defineProperty(exports,"cos",{enumerable:!0,get:function(){return F.cos}}),Object.defineProperty(exports,"cosh",{enumerable:!0,get:function(){return B.cosh}}),Object.defineProperty(exports,"cumsum",{enumerable:!0,get:function(){return I.cumsum}}),Object.defineProperty(exports,"depthToSpace",{enumerable:!0,get:function(){return U.depthToSpace}}),Object.defineProperty(exports,"depthwiseConv2d",{enumerable:!0,get:function(){return X.depthwiseConv2d}}),Object.defineProperty(exports,"diag",{enumerable:!0,get:function(){return G.diag}}),Object.defineProperty(exports,"dilation2d",{enumerable:!0,get:function(){return H.dilation2d}}),Object.defineProperty(exports,"div",{enumerable:!0,get:function(){return V.div}}),Object.defineProperty(exports,"divNoNan",{enumerable:!0,get:function(){return J.divNoNan}}),Object.defineProperty(exports,"dot",{enumerable:!0,get:function(){return K.dot}}),Object.defineProperty(exports,"elu",{enumerable:!0,get:function(){return Q.elu}}),Object.defineProperty(exports,"equal",{enumerable:!0,get:function(){return Y.equal}}),Object.defineProperty(exports,"erf",{enumerable:!0,get:function(){return Z.erf}}),Object.defineProperty(exports,"exp",{enumerable:!0,get:function(){return $.exp}}),Object.defineProperty(exports,"expandDims",{enumerable:!0,get:function(){return ee.expandDims}}),Object.defineProperty(exports,"expm1",{enumerable:!0,get:function(){return re.expm1}}),Object.defineProperty(exports,"eye",{enumerable:!0,get:function(){return te.eye}}),Object.defineProperty(exports,"fill",{enumerable:!0,get:function(){return ne.fill}}),Object.defineProperty(exports,"floor",{enumerable:!0,get:function(){return oe.floor}}),Object.defineProperty(exports,"floorDiv",{enumerable:!0,get:function(){return ue.floorDiv}}),Object.defineProperty(exports,"gather",{enumerable:!0,get:function(){return ie.gather}}),Object.defineProperty(exports,"greater",{enumerable:!0,get:function(){return ae.greater}}),Object.defineProperty(exports,"greaterEqual",{enumerable:!0,get:function(){return se.greaterEqual}}),Object.defineProperty(exports,"imag",{enumerable:!0,get:function(){return ce.imag}}),Object.defineProperty(exports,"isFinite",{enumerable:!0,get:function(){return pe.isFinite}}),Object.defineProperty(exports,"isInf",{enumerable:!0,get:function(){return le.isInf}}),Object.defineProperty(exports,"isNaN",{enumerable:!0,get:function(){return fe.isNaN}}),Object.defineProperty(exports,"leakyRelu",{enumerable:!0,get:function(){return de.leakyRelu}}),Object.defineProperty(exports,"less",{enumerable:!0,get:function(){return be.less}}),Object.defineProperty(exports,"lessEqual",{enumerable:!0,get:function(){return me.lessEqual}}),Object.defineProperty(exports,"linspace",{enumerable:!0,get:function(){return ge.linspace}}),Object.defineProperty(exports,"localResponseNormalization",{enumerable:!0,get:function(){return xe.localResponseNormalization}}),Object.defineProperty(exports,"log",{enumerable:!0,get:function(){return ye.log}}),Object.defineProperty(exports,"log1p",{enumerable:!0,get:function(){return qe.log1p}}),Object.defineProperty(exports,"logSigmoid",{enumerable:!0,get:function(){return Oe.logSigmoid}}),Object.defineProperty(exports,"logSoftmax",{enumerable:!0,get:function(){return Pe.logSoftmax}}),Object.defineProperty(exports,"logSumExp",{enumerable:!0,get:function(){return je.logSumExp}}),Object.defineProperty(exports,"logicalAnd",{enumerable:!0,get:function(){return _e.logicalAnd}}),Object.defineProperty(exports,"logicalNot",{enumerable:!0,get:function(){return he.logicalNot}}),Object.defineProperty(exports,"logicalOr",{enumerable:!0,get:function(){return ve.logicalOr}}),Object.defineProperty(exports,"logicalXor",{enumerable:!0,get:function(){return Ne.logicalXor}}),Object.defineProperty(exports,"matMul",{enumerable:!0,get:function(){return Se.matMul}}),Object.defineProperty(exports,"max",{enumerable:!0,get:function(){return we.max}}),Object.defineProperty(exports,"maxPool",{enumerable:!0,get:function(){return ke.maxPool}}),Object.defineProperty(exports,"maxPool3d",{enumerable:!0,get:function(){return Me.maxPool3d}}),Object.defineProperty(exports,"maxPoolWithArgmax",{enumerable:!0,get:function(){return Ee.maxPoolWithArgmax}}),Object.defineProperty(exports,"maximum",{enumerable:!0,get:function(){return ze.maximum}}),Object.defineProperty(exports,"mean",{enumerable:!0,get:function(){return De.mean}}),Object.defineProperty(exports,"min",{enumerable:!0,get:function(){return Te.min}}),Object.defineProperty(exports,"minimum",{enumerable:!0,get:function(){return Ae.minimum}}),Object.defineProperty(exports,"mirrorPad",{enumerable:!0,get:function(){return Ce.mirrorPad}}),Object.defineProperty(exports,"mod",{enumerable:!0,get:function(){return Le.mod}}),Object.defineProperty(exports,"moments",{enumerable:!0,get:function(){return We.moments}}),Object.defineProperty(exports,"mul",{enumerable:!0,get:function(){return Re.mul}}),Object.defineProperty(exports,"multiRNNCell",{enumerable:!0,get:function(){return Fe.multiRNNCell}}),Object.defineProperty(exports,"multinomial",{enumerable:!0,get:function(){return Be.multinomial}}),Object.defineProperty(exports,"neg",{enumerable:!0,get:function(){return Ie.neg}}),Object.defineProperty(exports,"notEqual",{enumerable:!0,get:function(){return Ue.notEqual}}),Object.defineProperty(exports,"oneHot",{enumerable:!0,get:function(){return Xe.oneHot}}),Object.defineProperty(exports,"ones",{enumerable:!0,get:function(){return Ge.ones}}),Object.defineProperty(exports,"onesLike",{enumerable:!0,get:function(){return He.onesLike}}),Object.defineProperty(exports,"outerProduct",{enumerable:!0,get:function(){return Ve.outerProduct}}),Object.defineProperty(exports,"pad",{enumerable:!0,get:function(){return Je.pad}}),Object.defineProperty(exports,"pad1d",{enumerable:!0,get:function(){return Ke.pad1d}}),Object.defineProperty(exports,"pad2d",{enumerable:!0,get:function(){return Qe.pad2d}}),Object.defineProperty(exports,"pad3d",{enumerable:!0,get:function(){return Ye.pad3d}}),Object.defineProperty(exports,"pad4d",{enumerable:!0,get:function(){return Ze.pad4d}}),Object.defineProperty(exports,"pool",{enumerable:!0,get:function(){return $e.pool}}),Object.defineProperty(exports,"pow",{enumerable:!0,get:function(){return er.pow}}),Object.defineProperty(exports,"prelu",{enumerable:!0,get:function(){return rr.prelu}}),Object.defineProperty(exports,"print",{enumerable:!0,get:function(){return tr.print}}),Object.defineProperty(exports,"prod",{enumerable:!0,get:function(){return nr.prod}}),Object.defineProperty(exports,"rand",{enumerable:!0,get:function(){return or.rand}}),Object.defineProperty(exports,"randomGamma",{enumerable:!0,get:function(){return ur.randomGamma}}),Object.defineProperty(exports,"randomNormal",{enumerable:!0,get:function(){return ir.randomNormal}}),Object.defineProperty(exports,"randomUniform",{enumerable:!0,get:function(){return ar.randomUniform}}),Object.defineProperty(exports,"range",{enumerable:!0,get:function(){return sr.range}}),Object.defineProperty(exports,"real",{enumerable:!0,get:function(){return cr.real}}),Object.defineProperty(exports,"reciprocal",{enumerable:!0,get:function(){return pr.reciprocal}}),Object.defineProperty(exports,"relu",{enumerable:!0,get:function(){return lr.relu}}),Object.defineProperty(exports,"relu6",{enumerable:!0,get:function(){return fr.relu6}}),Object.defineProperty(exports,"reshape",{enumerable:!0,get:function(){return dr.reshape}}),Object.defineProperty(exports,"reverse",{enumerable:!0,get:function(){return br.reverse}}),Object.defineProperty(exports,"reverse1d",{enumerable:!0,get:function(){return mr.reverse1d}}),Object.defineProperty(exports,"reverse2d",{enumerable:!0,get:function(){return gr.reverse2d}}),Object.defineProperty(exports,"reverse3d",{enumerable:!0,get:function(){return xr.reverse3d}}),Object.defineProperty(exports,"reverse4d",{enumerable:!0,get:function(){return yr.reverse4d}}),Object.defineProperty(exports,"round",{enumerable:!0,get:function(){return qr.round}}),Object.defineProperty(exports,"rsqrt",{enumerable:!0,get:function(){return Or.rsqrt}}),Object.defineProperty(exports,"scalar",{enumerable:!0,get:function(){return Pr.scalar}}),Object.defineProperty(exports,"selu",{enumerable:!0,get:function(){return jr.selu}}),Object.defineProperty(exports,"separableConv2d",{enumerable:!0,get:function(){return _r.separableConv2d}}),Object.defineProperty(exports,"setdiff1dAsync",{enumerable:!0,get:function(){return hr.setdiff1dAsync}}),Object.defineProperty(exports,"sigmoid",{enumerable:!0,get:function(){return vr.sigmoid}}),Object.defineProperty(exports,"sign",{enumerable:!0,get:function(){return Nr.sign}}),Object.defineProperty(exports,"sin",{enumerable:!0,get:function(){return Sr.sin}}),Object.defineProperty(exports,"sinh",{enumerable:!0,get:function(){return wr.sinh}}),Object.defineProperty(exports,"slice",{enumerable:!0,get:function(){return kr.slice}}),Object.defineProperty(exports,"slice1d",{enumerable:!0,get:function(){return Mr.slice1d}}),Object.defineProperty(exports,"slice2d",{enumerable:!0,get:function(){return Er.slice2d}}),Object.defineProperty(exports,"slice3d",{enumerable:!0,get:function(){return zr.slice3d}}),Object.defineProperty(exports,"slice4d",{enumerable:!0,get:function(){return Dr.slice4d}}),Object.defineProperty(exports,"softmax",{enumerable:!0,get:function(){return Tr.softmax}}),Object.defineProperty(exports,"softplus",{enumerable:!0,get:function(){return Ar.softplus}}),Object.defineProperty(exports,"spaceToBatchND",{enumerable:!0,get:function(){return Cr.spaceToBatchND}}),Object.defineProperty(exports,"fft",{enumerable:!0,get:function(){return Lr.fft}}),Object.defineProperty(exports,"ifft",{enumerable:!0,get:function(){return Wr.ifft}}),Object.defineProperty(exports,"irfft",{enumerable:!0,get:function(){return Rr.irfft}}),Object.defineProperty(exports,"rfft",{enumerable:!0,get:function(){return Fr.rfft}}),Object.defineProperty(exports,"split",{enumerable:!0,get:function(){return Br.split}}),Object.defineProperty(exports,"sqrt",{enumerable:!0,get:function(){return Ir.sqrt}}),Object.defineProperty(exports,"square",{enumerable:!0,get:function(){return Ur.square}}),Object.defineProperty(exports,"squaredDifference",{enumerable:!0,get:function(){return Xr.squaredDifference}}),Object.defineProperty(exports,"squeeze",{enumerable:!0,get:function(){return Gr.squeeze}}),Object.defineProperty(exports,"stack",{enumerable:!0,get:function(){return Hr.stack}}),Object.defineProperty(exports,"step",{enumerable:!0,get:function(){return Vr.step}}),Object.defineProperty(exports,"stridedSlice",{enumerable:!0,get:function(){return Jr.stridedSlice}}),Object.defineProperty(exports,"sub",{enumerable:!0,get:function(){return Kr.sub}}),Object.defineProperty(exports,"sum",{enumerable:!0,get:function(){return Qr.sum}}),Object.defineProperty(exports,"tan",{enumerable:!0,get:function(){return Yr.tan}}),Object.defineProperty(exports,"tanh",{enumerable:!0,get:function(){return Zr.tanh}}),Object.defineProperty(exports,"tensor",{enumerable:!0,get:function(){return $r.tensor}}),Object.defineProperty(exports,"tensor1d",{enumerable:!0,get:function(){return et.tensor1d}}),Object.defineProperty(exports,"tensor2d",{enumerable:!0,get:function(){return rt.tensor2d}}),Object.defineProperty(exports,"tensor3d",{enumerable:!0,get:function(){return tt.tensor3d}}),Object.defineProperty(exports,"tensor4d",{enumerable:!0,get:function(){return nt.tensor4d}}),Object.defineProperty(exports,"tensor5d",{enumerable:!0,get:function(){return ot.tensor5d}}),Object.defineProperty(exports,"tensor6d",{enumerable:!0,get:function(){return ut.tensor6d}}),Object.defineProperty(exports,"tile",{enumerable:!0,get:function(){return it.tile}}),Object.defineProperty(exports,"topk",{enumerable:!0,get:function(){return at.topk}}),Object.defineProperty(exports,"truncatedNormal",{enumerable:!0,get:function(){return st.truncatedNormal}}),Object.defineProperty(exports,"unique",{enumerable:!0,get:function(){return ct.unique}}),Object.defineProperty(exports,"unsortedSegmentSum",{enumerable:!0,get:function(){return pt.unsortedSegmentSum}}),Object.defineProperty(exports,"unstack",{enumerable:!0,get:function(){return lt.unstack}}),Object.defineProperty(exports,"variable",{enumerable:!0,get:function(){return ft.variable}}),Object.defineProperty(exports,"where",{enumerable:!0,get:function(){return dt.where}}),Object.defineProperty(exports,"whereAsync",{enumerable:!0,get:function(){return bt.whereAsync}}),Object.defineProperty(exports,"zeros",{enumerable:!0,get:function(){return mt.zeros}}),Object.defineProperty(exports,"zerosLike",{enumerable:!0,get:function(){return gt.zerosLike}}),Object.defineProperty(exports,"op",{enumerable:!0,get:function(){return kt.op}}),Object.defineProperty(exports,"OP_SCOPE_SUFFIX",{enumerable:!0,get:function(){return kt.OP_SCOPE_SUFFIX}}),exports.fused=exports.signal=exports.spectral=exports.losses=exports.linalg=exports.image=void 0;var r=require("./abs"),t=require("./acos"),n=require("./acosh"),o=require("./add"),u=require("./add_n"),i=require("./all"),a=require("./any"),s=require("./arg_max"),c=require("./arg_min"),p=require("./asin"),l=require("./asinh"),f=require("./atan"),d=require("./atan2"),b=require("./atanh"),m=require("./avg_pool"),g=require("./avg_pool_3d"),x=require("./basic_lstm_cell"),y=require("./batch_to_space_nd"),q=require("./batchnorm"),O=require("./batchnorm2d"),P=require("./batchnorm3d"),j=require("./batchnorm4d"),_=require("./broadcast_to"),h=require("./buffer"),v=require("./cast"),N=require("./ceil"),S=require("./clip_by_value"),w=require("./clone"),k=require("./complex"),M=require("./concat"),E=require("./concat_1d"),z=require("./concat_2d"),D=require("./concat_3d"),T=require("./concat_4d"),A=require("./conv1d"),C=require("./conv2d"),L=require("./conv2d_transpose"),W=require("./conv3d"),R=require("./conv3d_transpose"),F=require("./cos"),B=require("./cosh"),I=require("./cumsum"),U=require("./depth_to_space"),X=require("./depthwise_conv2d"),G=require("./diag"),H=require("./dilation2d"),V=require("./div"),J=require("./div_no_nan"),K=require("./dot"),Q=require("./elu"),Y=require("./equal"),Z=require("./erf"),$=require("./exp"),ee=require("./expand_dims"),re=require("./expm1"),te=require("./eye"),ne=require("./fill"),oe=require("./floor"),ue=require("./floorDiv"),ie=require("./gather"),ae=require("./greater"),se=require("./greater_equal"),ce=require("./imag"),pe=require("./is_finite"),le=require("./is_inf"),fe=require("./is_nan"),de=require("./leaky_relu"),be=require("./less"),me=require("./less_equal"),ge=require("./linspace"),xe=require("./local_response_normalization"),ye=require("./log"),qe=require("./log1p"),Oe=require("./log_sigmoid"),Pe=require("./log_softmax"),je=require("./log_sum_exp"),_e=require("./logical_and"),he=require("./logical_not"),ve=require("./logical_or"),Ne=require("./logical_xor"),Se=require("./mat_mul"),we=require("./max"),ke=require("./max_pool"),Me=require("./max_pool_3d"),Ee=require("./max_pool_with_argmax"),ze=require("./maximum"),De=require("./mean"),Te=require("./min"),Ae=require("./minimum"),Ce=require("./mirror_pad"),Le=require("./mod"),We=require("./moments"),Re=require("./mul"),Fe=require("./multi_rnn_cell"),Be=require("./multinomial"),Ie=require("./neg"),Ue=require("./not_equal"),Xe=require("./one_hot"),Ge=require("./ones"),He=require("./ones_like"),Ve=require("./outer_product"),Je=require("./pad"),Ke=require("./pad1d"),Qe=require("./pad2d"),Ye=require("./pad3d"),Ze=require("./pad4d"),$e=require("./pool"),er=require("./pow"),rr=require("./prelu"),tr=require("./print"),nr=require("./prod"),or=require("./rand"),ur=require("./random_gamma"),ir=require("./random_normal"),ar=require("./random_uniform"),sr=require("./range"),cr=require("./real"),pr=require("./reciprocal"),lr=require("./relu"),fr=require("./relu6"),dr=require("./reshape"),br=require("./reverse"),mr=require("./reverse_1d"),gr=require("./reverse_2d"),xr=require("./reverse_3d"),yr=require("./reverse_4d"),qr=require("./round"),Or=require("./rsqrt"),Pr=require("./scalar"),jr=require("./selu"),_r=require("./separable_conv2d"),hr=require("./setdiff1d_async"),vr=require("./sigmoid"),Nr=require("./sign"),Sr=require("./sin"),wr=require("./sinh"),kr=require("./slice"),Mr=require("./slice1d"),Er=require("./slice2d"),zr=require("./slice3d"),Dr=require("./slice4d"),Tr=require("./softmax"),Ar=require("./softplus"),Cr=require("./space_to_batch_nd"),Lr=require("./spectral/fft"),Wr=require("./spectral/ifft"),Rr=require("./spectral/irfft"),Fr=require("./spectral/rfft"),Br=require("./split"),Ir=require("./sqrt"),Ur=require("./square"),Xr=require("./squared_difference"),Gr=require("./squeeze"),Hr=require("./stack"),Vr=require("./step"),Jr=require("./strided_slice"),Kr=require("./sub"),Qr=require("./sum"),Yr=require("./tan"),Zr=require("./tanh"),$r=require("./tensor"),et=require("./tensor1d"),rt=require("./tensor2d"),tt=require("./tensor3d"),nt=require("./tensor4d"),ot=require("./tensor5d"),ut=require("./tensor6d"),it=require("./tile"),at=require("./topk"),st=require("./truncated_normal"),ct=require("./unique"),pt=require("./unsorted_segment_sum"),lt=require("./unstack"),ft=require("./variable"),dt=require("./where"),bt=require("./where_async"),mt=require("./zeros"),gt=require("./zeros_like"),xt=require("./boolean_mask");Object.keys(xt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return xt[r]}}))});var yt=require("./compare");Object.keys(yt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return yt[r]}}))});var qt=require("./binary_ops");Object.keys(qt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return qt[r]}}))});var Ot=require("./transpose");Object.keys(Ot).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Ot[r]}}))});var Pt=require("./norm");Object.keys(Pt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Pt[r]}}))});var jt=require("./moving_average");Object.keys(jt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return jt[r]}}))});var _t=require("./scatter_nd");Object.keys(_t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return _t[r]}}))});var ht=require("./sparse_to_dense");Object.keys(ht).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return ht[r]}}))});var vt=require("./gather_nd");Object.keys(vt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return vt[r]}}))});var Nt=require("./dropout");Object.keys(Nt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return Nt[r]}}))});var St=require("./signal_ops_util");Object.keys(St).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return St[r]}}))});var wt=require("./in_top_k");Object.keys(wt).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return wt[r]}}))});var kt=require("./operation"),Mt=un(require("./fused_ops"));exports.fused=Mt;var Et=require("./signal/hamming_window"),zt=require("./signal/hann_window"),Dt=require("./signal/frame"),Tt=require("./signal/stft"),At=require("./image/crop_and_resize"),Ct=require("./image/flip_left_right"),Lt=require("./image/rotate_with_offset"),Wt=require("./image/non_max_suppression"),Rt=require("./image/non_max_suppression_async"),Ft=require("./image/non_max_suppression_with_score"),Bt=require("./image/non_max_suppression_with_score_async"),It=require("./image/non_max_suppression_padded"),Ut=require("./image/non_max_suppression_padded_async"),Xt=require("./image/resize_bilinear"),Gt=require("./image/resize_nearest_neighbor"),Ht=require("./linalg/band_part"),Vt=require("./linalg/gram_schmidt"),Jt=require("./linalg/qr"),Kt=require("./losses/absolute_difference"),Qt=require("./losses/compute_weighted_loss"),Yt=require("./losses/cosine_distance"),Zt=require("./losses/hinge_loss"),$t=require("./losses/huber_loss"),en=require("./losses/log_loss"),rn=require("./losses/mean_squared_error"),tn=require("./losses/sigmoid_cross_entropy"),nn=require("./losses/softmax_cross_entropy");function on(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return on=function(){return e},e}function un(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=on();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(t,o,u):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const an={fft:Lr.fft,ifft:Wr.ifft,rfft:Fr.rfft,irfft:Rr.irfft};exports.spectral=an;const sn={hammingWindow:Et.hammingWindow,hannWindow:zt.hannWindow,frame:Dt.frame,stft:Tt.stft};exports.signal=sn;const cn={flipLeftRight:Ct.flipLeftRight,resizeNearestNeighbor:Gt.resizeNearestNeighbor,resizeBilinear:Xt.resizeBilinear,rotateWithOffset:Lt.rotateWithOffset,cropAndResize:At.cropAndResize,nonMaxSuppression:Wt.nonMaxSuppression,nonMaxSuppressionAsync:Rt.nonMaxSuppressionAsync,nonMaxSuppressionWithScore:Ft.nonMaxSuppressionWithScore,nonMaxSuppressionWithScoreAsync:Bt.nonMaxSuppressionWithScoreAsync,nonMaxSuppressionPadded:It.nonMaxSuppressionPadded,nonMaxSuppressionPaddedAsync:Ut.nonMaxSuppressionPaddedAsync};exports.image=cn;const pn={bandPart:Ht.bandPart,gramSchmidt:Vt.gramSchmidt,qr:Jt.qr};exports.linalg=pn;const ln={absoluteDifference:Kt.absoluteDifference,computeWeightedLoss:Qt.computeWeightedLoss,cosineDistance:Yt.cosineDistance,hingeLoss:Zt.hingeLoss,huberLoss:$t.huberLoss,logLoss:en.logLoss,meanSquaredError:rn.meanSquaredError,sigmoidCrossEntropy:tn.sigmoidCrossEntropy,softmaxCrossEntropy:nn.softmaxCrossEntropy};exports.losses=ln;
},{"./abs":"LQUr","./acos":"ILOc","./acosh":"NNxA","./add":"geuL","./add_n":"jrV1","./all":"kMEx","./any":"Fa98","./arg_max":"qu9n","./arg_min":"L4Ct","./asin":"YHV3","./asinh":"O9ii","./atan":"ZXMd","./atan2":"qQ7z","./atanh":"rIil","./avg_pool":"Pm39","./avg_pool_3d":"rD3s","./basic_lstm_cell":"z3ej","./batch_to_space_nd":"dRKG","./batchnorm":"H6um","./batchnorm2d":"Bfm6","./batchnorm3d":"GZN2","./batchnorm4d":"yd3x","./broadcast_to":"eQsv","./buffer":"SN3d","./cast":"owKL","./ceil":"LpmI","./clip_by_value":"qXRG","./clone":"HHuR","./complex":"BDDu","./concat":"gZir","./concat_1d":"Y9MR","./concat_2d":"lSwZ","./concat_3d":"B3HR","./concat_4d":"JLwy","./conv1d":"Dlln","./conv2d":"K8t2","./conv2d_transpose":"foig","./conv3d":"ReLt","./conv3d_transpose":"BnR4","./cos":"Ky4d","./cosh":"q60v","./cumsum":"MovR","./depth_to_space":"RcRb","./depthwise_conv2d":"hlJ3","./diag":"oFFT","./dilation2d":"JjSs","./div":"XyQ4","./div_no_nan":"Ztm0","./dot":"yedZ","./elu":"uIqF","./equal":"nLPx","./erf":"XhJs","./exp":"S24W","./expand_dims":"uPYU","./expm1":"e0GE","./eye":"kWCc","./fill":"SqIp","./floor":"mwl0","./floorDiv":"L6i4","./gather":"Quad","./greater":"i1I6","./greater_equal":"wG0H","./imag":"P5ES","./is_finite":"yOVm","./is_inf":"En43","./is_nan":"rCb4","./leaky_relu":"BMkp","./less":"PrnK","./less_equal":"NxL8","./linspace":"y9TR","./local_response_normalization":"AJX7","./log":"UG1b","./log1p":"Tu9m","./log_sigmoid":"gSaY","./log_softmax":"Q1Fm","./log_sum_exp":"twrn","./logical_and":"ntJL","./logical_not":"SOqM","./logical_or":"IQZP","./logical_xor":"PsE3","./mat_mul":"A3yk","./max":"SjY8","./max_pool":"RWms","./max_pool_3d":"y3Dx","./max_pool_with_argmax":"ZH85","./maximum":"nmNC","./mean":"Yc5n","./min":"z8cA","./minimum":"q3lt","./mirror_pad":"c1Zo","./mod":"oTGE","./moments":"X3OC","./mul":"WS4w","./multi_rnn_cell":"ePcS","./multinomial":"Pjd4","./neg":"wgz6","./not_equal":"RlXH","./one_hot":"mrOz","./ones":"eTx1","./ones_like":"XhV0","./outer_product":"BREf","./pad":"NuCu","./pad1d":"fyuv","./pad2d":"GX8c","./pad3d":"D1CP","./pad4d":"jp5S","./pool":"ilbP","./pow":"FJnw","./prelu":"IOvE","./print":"reh2","./prod":"ZlHR","./rand":"fqDI","./random_gamma":"i9p1","./random_normal":"oldS","./random_uniform":"YaAk","./range":"WweN","./real":"QPTK","./reciprocal":"SxzF","./relu":"Htix","./relu6":"bNXk","./reshape":"khVG","./reverse":"wt3J","./reverse_1d":"QYAt","./reverse_2d":"xTht","./reverse_3d":"e415","./reverse_4d":"Q8XB","./round":"uHOV","./rsqrt":"paOW","./scalar":"RBNv","./selu":"iDNJ","./separable_conv2d":"sXEJ","./setdiff1d_async":"yIk5","./sigmoid":"QUTt","./sign":"TntV","./sin":"AwzN","./sinh":"nOJq","./slice":"xcz4","./slice1d":"EcR4","./slice2d":"pNW2","./slice3d":"XFWw","./slice4d":"ScyZ","./softmax":"Tk36","./softplus":"rchi","./space_to_batch_nd":"nPoV","./spectral/fft":"Z8YU","./spectral/ifft":"r4QH","./spectral/irfft":"lC3X","./spectral/rfft":"G4qK","./split":"L2gY","./sqrt":"dGNr","./square":"rLyD","./squared_difference":"YDjz","./squeeze":"N7Os","./stack":"GHVB","./step":"DQ8I","./strided_slice":"PMwJ","./sub":"OFjl","./sum":"YHNB","./tan":"RsGH","./tanh":"Lqgl","./tensor":"tCGm","./tensor1d":"R7Cm","./tensor2d":"Q66m","./tensor3d":"pCJS","./tensor4d":"iywK","./tensor5d":"YwRe","./tensor6d":"X7ie","./tile":"C900","./topk":"N414","./truncated_normal":"hfYy","./unique":"qyE5","./unsorted_segment_sum":"U01C","./unstack":"JyML","./variable":"nKb4","./where":"AEtV","./where_async":"Vq9r","./zeros":"MNgB","./zeros_like":"Jky8","./boolean_mask":"cLTy","./compare":"tF3n","./binary_ops":"uden","./transpose":"yiEV","./norm":"Hzs7","./moving_average":"tCsQ","./scatter_nd":"C9WF","./sparse_to_dense":"PmvU","./gather_nd":"o2ZD","./dropout":"MAgd","./signal_ops_util":"Jt6I","./in_top_k":"lVGj","./operation":"rO1i","./fused_ops":"iOEA","./signal/hamming_window":"Gob6","./signal/hann_window":"tE3w","./signal/frame":"jVcy","./signal/stft":"XqFB","./image/crop_and_resize":"bV6Y","./image/flip_left_right":"d7Ff","./image/rotate_with_offset":"ltMM","./image/non_max_suppression":"cbMx","./image/non_max_suppression_async":"Hduk","./image/non_max_suppression_with_score":"p5vV","./image/non_max_suppression_with_score_async":"UxN0","./image/non_max_suppression_padded":"MUoJ","./image/non_max_suppression_padded_async":"BoIX","./image/resize_bilinear":"eY9c","./image/resize_nearest_neighbor":"rzap","./linalg/band_part":"AwWZ","./linalg/gram_schmidt":"ooKU","./linalg/qr":"DUW0","./losses/absolute_difference":"HvRC","./losses/compute_weighted_loss":"ZYcU","./losses/cosine_distance":"eI5w","./losses/hinge_loss":"ENpu","./losses/huber_loss":"wY7G","./losses/log_loss":"P3Xp","./losses/mean_squared_error":"WgEA","./losses/sigmoid_cross_entropy":"FeHT","./losses/softmax_cross_entropy":"sTHL"}],"L1Zo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Optimizer=void 0;var e=require("../globals"),t=require("../gradients"),i=require("../ops/ops"),s=require("../serialization");class r extends s.Serializable{minimize(t,i=!1,s){const{value:r,grads:n}=this.computeGradients(t,s);if(null!=s){const e=s.map(e=>({name:e.name,tensor:n[e.name]}));this.applyGradients(e)}else this.applyGradients(n);return(0,e.dispose)(n),i?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,i){return(0,t.variableGrads)(e,i)}dispose(){null!=this.iterations_&&(0,e.dispose)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,i.scalar)(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+`${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}exports.Optimizer=r,Object.defineProperty(r,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});
},{"../globals":"UkUu","../gradients":"FjdM","../ops/ops":"DHFH","../serialization":"AVD8"}],"wMlv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdadeltaOptimizer=void 0;var a=require("../engine"),e=require("../globals"),s=require("../ops/add"),i=require("../ops/div"),t=require("../ops/mul"),r=require("../ops/ops"),l=require("../ops/square"),n=require("../ops/zeros_like"),u=require("../serialization"),d=require("./optimizer");class o extends d.Optimizer{constructor(e,s,i=null){super(),this.learningRate=e,this.rho=s,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==i&&(this.epsilon=a.ENGINE.backend.epsilon())}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((d,o)=>{const c=a.ENGINE.registeredVariables[d];null==this.accumulatedGrads[o]&&(this.accumulatedGrads[o]={originalName:`${d}/accum_grad`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))}),null==this.accumulatedUpdates[o]&&(this.accumulatedUpdates[o]={originalName:`${d}/accum_var`,variable:(0,e.tidy)(()=>(0,n.zerosLike)(c).variable(!1))});const m=Array.isArray(u)?u[o].tensor:u[d];if(null==m)return;const h=this.accumulatedGrads[o].variable,p=this.accumulatedUpdates[o].variable;(0,e.tidy)(()=>{const a=(0,s.add)((0,t.mul)(h,this.rho),(0,t.mul)((0,l.square)(m),1-this.rho)),e=(0,t.mul)((0,i.div)((0,r.sqrt)((0,s.add)(p,this.epsilon)),(0,r.sqrt)((0,s.add)(h,this.epsilon))),m),n=(0,s.add)((0,t.mul)(p,this.rho),(0,t.mul)((0,l.square)(e),1-this.rho));h.assign(a),p.assign(n);const u=(0,s.add)((0,t.mul)(e,-this.learningRate),c);c.assign(u)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,e.dispose)(this.accumulatedGrads.map(a=>a.variable)),(0,e.dispose)(this.accumulatedUpdates.map(a=>a.variable)))}async getWeights(){const a=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(a.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){const e=(a=await this.extractIterations(a)).length/2;this.accumulatedGrads=a.slice(0,e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)})),this.accumulatedUpdates=a.slice(e,2*e).map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(a,e){return new a(e.learningRate,e.rho,e.epsilon)}}exports.AdadeltaOptimizer=o,o.className="Adadelta",(0,u.registerClass)(o);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/ops":"DHFH","../ops/square":"rLyD","../ops/zeros_like":"Jky8","../serialization":"AVD8","./optimizer":"L1Zo"}],"K66L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdagradOptimizer=void 0;var a=require("../engine"),e=require("../globals"),i=require("../ops/add"),r=require("../ops/div"),t=require("../ops/fill"),s=require("../ops/mul"),l=require("../ops/sqrt"),n=require("../ops/square"),u=require("../serialization"),c=require("./optimizer");class o extends c.Optimizer{constructor(a,e=.1){super(),this.learningRate=a,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(u){(Array.isArray(u)?u.map(a=>a.name):Object.keys(u)).forEach((c,o)=>{const d=a.ENGINE.registeredVariables[c];if(null==this.accumulatedGrads[o]){const a=!1;this.accumulatedGrads[o]={originalName:`${c}/accumulator`,variable:(0,e.tidy)(()=>(0,t.fill)(d.shape,this.initialAccumulatorValue).variable(a))}}const m=Array.isArray(u)?u[o].tensor:u[c];if(null==m)return;const p=this.accumulatedGrads[o].variable;(0,e.tidy)(()=>{const e=(0,i.add)(p,(0,n.square)(m));p.assign(e);const t=(0,i.add)((0,s.mul)((0,r.div)(m,(0,l.sqrt)((0,i.add)(e,a.ENGINE.backend.epsilon()))),-this.learningRate),d);d.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,e.dispose)(this.accumulatedGrads.map(a=>a.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(a=>({name:a.originalName,tensor:a.variable})))}async setWeights(a){a=await this.extractIterations(a);this.accumulatedGrads=a.map(a=>({originalName:a.name,variable:a.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(a,e){return new a(e.learningRate,e.initialAccumulatorValue)}}exports.AdagradOptimizer=o,o.className="Adagrad",(0,u.registerClass)(o);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/div":"XyQ4","../ops/fill":"SqIp","../ops/mul":"WS4w","../ops/sqrt":"dGNr","../ops/square":"rLyD","../serialization":"AVD8","./optimizer":"L1Zo"}],"JZUL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamOptimizer=void 0;var e=require("../engine"),t=require("../globals"),a=require("../ops/add"),i=require("../ops/div"),s=require("../ops/mul"),r=require("../ops/pow"),n=require("../ops/scalar"),c=require("../ops/sqrt"),o=require("../ops/square"),l=require("../ops/sub"),u=require("../ops/zeros_like"),m=require("../serialization"),d=require("./optimizer");class h extends d.Optimizer{constructor(a,i,s,r=null){super(),this.learningRate=a,this.beta1=i,this.beta2=s,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,t.tidy)(()=>{this.accBeta1=(0,n.scalar)(i).variable(),this.accBeta2=(0,n.scalar)(s).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(r){const n=Array.isArray(r)?r.map(e=>e.name):Object.keys(r);(0,t.tidy)(()=>{const m=(0,l.sub)(1,this.accBeta1),d=(0,l.sub)(1,this.accBeta2);n.forEach((n,l)=>{const h=e.ENGINE.registeredVariables[n];null==this.accumulatedFirstMoment[l]&&(this.accumulatedFirstMoment[l]={originalName:`${n}/m`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))}),null==this.accumulatedSecondMoment[l]&&(this.accumulatedSecondMoment[l]={originalName:`${n}/v`,variable:(0,t.tidy)(()=>(0,u.zerosLike)(h).variable(!1))});const p=Array.isArray(r)?r[l].tensor:r[n];if(null==p)return;const b=this.accumulatedFirstMoment[l].variable,g=this.accumulatedSecondMoment[l].variable,v=(0,a.add)((0,s.mul)(b,this.beta1),(0,s.mul)(p,1-this.beta1)),q=(0,a.add)((0,s.mul)(g,this.beta2),(0,s.mul)((0,o.square)(p),1-this.beta2)),M=(0,i.div)(v,m),y=(0,i.div)(q,d);b.assign(v),g.assign(q);const B=(0,a.add)((0,s.mul)((0,i.div)(M,(0,a.add)((0,c.sqrt)(y),this.epsilon)),-this.learningRate),h);h.assign(B)}),this.accBeta1.assign((0,s.mul)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,s.mul)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,t.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&(0,t.dispose)(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),(0,t.tidy)(()=>{this.accBeta1.assign((0,r.pow)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,r.pow)(this.beta2,this.iterations_+1))});const a=e.length/2;this.accumulatedFirstMoment=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}exports.AdamOptimizer=h,h.className="Adam",(0,m.registerClass)(h);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/pow":"FJnw","../ops/scalar":"RBNv","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl","../ops/zeros_like":"Jky8","../serialization":"AVD8","./optimizer":"L1Zo"}],"PX42":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdamaxOptimizer=void 0;var e=require("../engine"),i=require("../globals"),t=require("../ops/abs"),a=require("../ops/add"),s=require("../ops/div"),r=require("../ops/maximum"),n=require("../ops/mul"),l=require("../ops/scalar"),o=require("../ops/sub"),u=require("../ops/zeros_like"),c=require("../serialization"),d=require("./optimizer");class m extends d.Optimizer{constructor(t,a,s,r=null,n=0){super(),this.learningRate=t,this.beta1=a,this.beta2=s,this.epsilon=r,this.decay=n,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,i.tidy)(()=>{this.iteration=(0,l.scalar)(0).variable(),this.accBeta1=(0,l.scalar)(a).variable()}),null==r&&(this.epsilon=e.ENGINE.backend.epsilon())}applyGradients(l){const c=Array.isArray(l)?l.map(e=>e.name):Object.keys(l);(0,i.tidy)(()=>{const i=(0,o.sub)(1,this.accBeta1),d=(0,s.div)(-this.learningRate,(0,a.add)((0,n.mul)(this.iteration,this.decay),1));c.forEach((o,c)=>{const m=e.ENGINE.registeredVariables[o];null==this.accumulatedFirstMoment[c]&&(this.accumulatedFirstMoment[c]={originalName:`${o}/m`,variable:(0,u.zerosLike)(m).variable(!1)}),null==this.accumulatedWeightedInfNorm[c]&&(this.accumulatedWeightedInfNorm[c]={originalName:`${o}/v`,variable:(0,u.zerosLike)(m).variable(!1)});const h=Array.isArray(l)?l[c].tensor:l[o];if(null==h)return;const p=this.accumulatedFirstMoment[c].variable,b=this.accumulatedWeightedInfNorm[c].variable,g=(0,a.add)((0,n.mul)(p,this.beta1),(0,n.mul)(h,1-this.beta1)),v=(0,n.mul)(b,this.beta2),y=(0,t.abs)(h),f=(0,r.maximum)(v,y);p.assign(g),b.assign(f);const N=(0,a.add)((0,n.mul)((0,s.div)(d,i),(0,s.div)(g,(0,a.add)(f,this.epsilon))),m);m.assign(N)}),this.iteration.assign((0,a.add)(this.iteration,1)),this.accBeta1.assign((0,n.mul)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,i.dispose)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&(0,i.dispose)(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,i){return new e(i.learningRate,i.beta1,i.beta2,i.epsilon,i.decay)}}exports.AdamaxOptimizer=m,m.className="Adamax",(0,c.registerClass)(m);
},{"../engine":"tmUz","../globals":"UkUu","../ops/abs":"LQUr","../ops/add":"geuL","../ops/div":"XyQ4","../ops/maximum":"nmNC","../ops/mul":"WS4w","../ops/scalar":"RBNv","../ops/sub":"OFjl","../ops/zeros_like":"Jky8","../serialization":"AVD8","./optimizer":"L1Zo"}],"Gn6t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SGDOptimizer=void 0;var e=require("../engine"),t=require("../globals"),r=require("../ops/add"),i=require("../ops/mul"),s=require("../ops/scalar"),a=require("../serialization"),n=require("./optimizer");class o extends n.Optimizer{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(s){(Array.isArray(s)?s.map(e=>e.name):Object.keys(s)).forEach((a,n)=>{const o=Array.isArray(s)?s[n].tensor:s[a];if(null==o)return;const l=e.ENGINE.registeredVariables[a];(0,t.tidy)(()=>{const e=(0,r.add)((0,i.mul)(this.c,o),l);l.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,t.keep)((0,s.scalar)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}exports.SGDOptimizer=o,o.className="SGD",(0,a.registerClass)(o);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/mul":"WS4w","../ops/scalar":"RBNv","../serialization":"AVD8","./optimizer":"L1Zo"}],"liyz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MomentumOptimizer=void 0;var e=require("../engine"),t=require("../globals"),s=require("../ops/add"),i=require("../ops/mul"),a=require("../ops/scalar"),r=require("../ops/zeros_like"),n=require("../serialization"),m=require("./sgd_optimizer");class o extends m.SGDOptimizer{constructor(e,t,s=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=s,this.accumulations=[],this.m=(0,a.scalar)(this.momentum)}applyGradients(a){(Array.isArray(a)?a.map(e=>e.name):Object.keys(a)).forEach((n,m)=>{const o=e.ENGINE.registeredVariables[n];if(null==this.accumulations[m]){const e=!1;this.accumulations[m]={originalName:`${n}/momentum`,variable:(0,t.tidy)(()=>(0,r.zerosLike)(o).variable(e))}}const u=this.accumulations[m].variable,l=Array.isArray(a)?a[m].tensor:a[n];null!=l&&(0,t.tidy)(()=>{let e;const t=(0,s.add)((0,i.mul)(this.m,u),l);e=this.useNesterov?(0,s.add)((0,i.mul)(this.c,(0,s.add)(l,(0,i.mul)(t,this.m))),o):(0,s.add)((0,i.mul)(this.c,t),o),u.assign(t),o.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,t.dispose)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}exports.MomentumOptimizer=o,o.className="Momentum",(0,n.registerClass)(o);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/mul":"WS4w","../ops/scalar":"RBNv","../ops/zeros_like":"Jky8","../serialization":"AVD8","./sgd_optimizer":"Gn6t"}],"ncVU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RMSPropOptimizer=void 0;var e=require("../engine"),a=require("../globals"),s=require("../ops/add"),t=require("../ops/div"),i=require("../ops/mul"),r=require("../ops/sqrt"),n=require("../ops/square"),u=require("../ops/sub"),l=require("../ops/zeros_like"),c=require("../serialization"),m=require("./optimizer");class d extends m.Optimizer{constructor(a,s=.9,t=0,i=null,r=!1){if(super(),this.learningRate=a,this.decay=s,this.momentum=t,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==i&&(this.epsilon=e.ENGINE.backend.epsilon()),null==a)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(c){(Array.isArray(c)?c.map(e=>e.name):Object.keys(c)).forEach((m,d)=>{const o=e.ENGINE.registeredVariables[m];null==this.accumulatedMeanSquares[d]&&(this.accumulatedMeanSquares[d]={originalName:`${m}/rms`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMoments[d]&&(this.accumulatedMoments[d]={originalName:`${m}/momentum`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))}),null==this.accumulatedMeanGrads[d]&&this.centered&&(this.accumulatedMeanGrads[d]={originalName:`${m}/mg`,variable:(0,a.tidy)(()=>(0,l.zerosLike)(o).variable(!1))});const h=Array.isArray(c)?c[d].tensor:c[m];if(null==h)return;const p=this.accumulatedMeanSquares[d].variable,g=this.accumulatedMoments[d].variable;(0,a.tidy)(()=>{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay));if(this.centered){const a=this.accumulatedMeanGrads[d].variable,l=(0,s.add)((0,i.mul)(a,this.decay),(0,i.mul)(h,1-this.decay)),c=(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,u.sub)(e,(0,s.add)((0,n.square)(l),this.epsilon)))),m=(0,s.add)((0,i.mul)(g,this.momentum),c);p.assign(e),a.assign(l),g.assign(m);const b=(0,u.sub)(o,m);o.assign(b)}else{const e=(0,s.add)((0,i.mul)(p,this.decay),(0,i.mul)((0,n.square)(h),1-this.decay)),a=(0,s.add)((0,i.mul)(g,this.momentum),(0,t.div)((0,i.mul)(h,this.learningRate),(0,r.sqrt)((0,s.add)(e,this.epsilon))));p.assign(e),g.assign(a);const l=(0,u.sub)(o,a);o.assign(l)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,a.dispose)(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,a.dispose)(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&(0,a.dispose)(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const a=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(a,2*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*a,3*a).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,a){return new e(a.learningRate,a.decay,a.momentum,a.epsilon,a.centered)}}exports.RMSPropOptimizer=d,d.className="RMSProp",(0,c.registerClass)(d);
},{"../engine":"tmUz","../globals":"UkUu","../ops/add":"geuL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl","../ops/zeros_like":"Jky8","../serialization":"AVD8","./optimizer":"L1Zo"}],"u4kv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OptimizerConstructors=void 0;var r=require("./adadelta_optimizer"),e=require("./adagrad_optimizer"),t=require("./adam_optimizer"),i=require("./adamax_optimizer"),a=require("./momentum_optimizer"),m=require("./rmsprop_optimizer"),u=require("./sgd_optimizer");class p{static sgd(r){return new u.SGDOptimizer(r)}static momentum(r,e,t=!1){return new a.MomentumOptimizer(r,e,t)}static rmsprop(r,e=.9,t=0,i=null,a=!1){return new m.RMSPropOptimizer(r,e,t,i,a)}static adam(r=.001,e=.9,i=.999,a=null){return new t.AdamOptimizer(r,e,i,a)}static adadelta(e=.001,t=.95,i=null){return new r.AdadeltaOptimizer(e,t,i)}static adamax(r=.002,e=.9,t=.999,a=null,m=0){return new i.AdamaxOptimizer(r,e,t,a,m)}static adagrad(r,t=.1){return new e.AdagradOptimizer(r,t)}}exports.OptimizerConstructors=p;
},{"./adadelta_optimizer":"wMlv","./adagrad_optimizer":"K66L","./adam_optimizer":"JZUL","./adamax_optimizer":"PX42","./momentum_optimizer":"liyz","./rmsprop_optimizer":"ncVU","./sgd_optimizer":"Gn6t"}],"Qrdw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.train=void 0;var r=require("./optimizers/adadelta_optimizer"),i=require("./optimizers/adagrad_optimizer"),e=require("./optimizers/adam_optimizer"),t=require("./optimizers/adamax_optimizer"),m=require("./optimizers/momentum_optimizer"),o=require("./optimizers/optimizer_constructors"),a=require("./optimizers/rmsprop_optimizer"),p=require("./optimizers/sgd_optimizer");m.MomentumOptimizer,p.SGDOptimizer,r.AdadeltaOptimizer,i.AdagradOptimizer,a.RMSPropOptimizer,t.AdamaxOptimizer,e.AdamOptimizer;const s={sgd:o.OptimizerConstructors.sgd,momentum:o.OptimizerConstructors.momentum,adadelta:o.OptimizerConstructors.adadelta,adagrad:o.OptimizerConstructors.adagrad,rmsprop:o.OptimizerConstructors.rmsprop,adamax:o.OptimizerConstructors.adamax,adam:o.OptimizerConstructors.adam};exports.train=s;
},{"./optimizers/adadelta_optimizer":"wMlv","./optimizers/adagrad_optimizer":"K66L","./optimizers/adam_optimizer":"JZUL","./optimizers/adamax_optimizer":"PX42","./optimizers/momentum_optimizer":"liyz","./optimizers/optimizer_constructors":"u4kv","./optimizers/rmsprop_optimizer":"ncVU","./optimizers/sgd_optimizer":"Gn6t"}],"E3YT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nextFrame=t;const e=(()=>"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e())();function t(){return new Promise(t=>e(()=>t()))}
},{}],"Ppt4":[function(require,module,exports) {
"use strict";function e(e,t,r){return[r*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageCenter=e;
},{}],"iLQh":[function(require,module,exports) {
"use strict";function e(e,t,s,o=!0){let u=[];if(o)(u=u.concat(t.slice(0))).push(e[0]/s),u=u.concat(e.slice(1));else{u=u.concat(e[0]);const s=t.length;for(let o=0;o<s;++o)u=u.concat([e[o+1]/t[o],t[o]]);u=u.concat(e.slice(s+1))}return u}function t(e,t,s=!0){const o=[];if(s){o.push(t);for(let s=t+1;s<e;++s)s<=2*t?(o.push(s),o.push(s-(t+1))):o.push(s)}else{const s=[],u=[];for(let o=1;o<e;++o)o>=2*t+1||o%2==1?u.push(o):s.push(o);o.push(...s),o.push(0),o.push(...u)}return o}function s(e,t,s,o=!0){const u=[];o?u.push(e[0]/s):u.push(e[0]*s);for(let n=1;n<e.length;++n)n<=t.length?o?u.push(t[n-1]*e[n]):u.push(e[n]/t[n-1]):u.push(e[n]);return u}function o(e,t){const s=[0];for(let o=0;o<t;++o)s.push(e[o][0]);return s}function u(e,t,s){const o=e.slice(0,1);for(let u=0;u<s;++u)o.push(e[u+1]-t[u][0]-t[u][1]);return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getReshaped=e,exports.getPermuted=t,exports.getReshapedPermuted=s,exports.getSliceBeginCoords=o,exports.getSliceSize=u;
},{}],"HqZV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SELU_SCALE=exports.SELU_SCALEALPHA=void 0;const e=1.7580993408473768;exports.SELU_SCALEALPHA=e;const t=1.0507009873554805;exports.SELU_SCALE=t;
},{}],"NNvh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ERF_A5=exports.ERF_A4=exports.ERF_A3=exports.ERF_A2=exports.ERF_A1=exports.ERF_P=void 0;const t=.3275911;exports.ERF_P=t;const o=.254829592;exports.ERF_A1=o;const s=-.284496736;exports.ERF_A2=s;const e=1.421413741;exports.ERF_A3=e;const r=-1.453152027;exports.ERF_A4=r;const p=1.061405429;exports.ERF_A5=p;
},{}],"nkQQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.warn=o,exports.log=n;var e=require("./environment");function o(...o){(0,e.env)().getBool("IS_TEST")||console.warn(...o)}function n(...o){(0,e.env)().getBool("IS_TEST")||console.log(...o)}
},{"./environment":"rgHm"}],"HlsP":[function(require,module,exports) {
"use strict";function t(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+`${t.length}, imag: ${e.length}.`);const r=new Float32Array(2*t.length);for(let n=0;n<r.length;n+=2)r[n]=t[n/2],r[n+1]=e[n/2];return r}function e(t){const e=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n/2]=t[n],r[n/2]=t[n+1];return{real:e,imag:r}}function r(t){const e=Math.ceil(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let o=0;o<t.length;o+=4)r[Math.floor(o/4)]=t[o],n[Math.floor(o/4)]=t[o+1];return{real:r,imag:n}}function n(t){const e=Math.floor(t.length/4),r=new Float32Array(e),n=new Float32Array(e);for(let o=2;o<t.length;o+=4)r[Math.floor(o/4)]=t[o],n[Math.floor(o/4)]=t[o+1];return{real:r,imag:n}}function o(t,e){return{real:t[2*e],imag:t[2*e+1]}}function a(t,e,r,n){t[2*n]=e,t[2*n+1]=r}function l(t,e){const r=new Float32Array(t/2),n=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const a=(e?2:-2)*Math.PI*(o/t);r[o]=Math.cos(a),n[o]=Math.sin(a)}return{real:r,imag:n}}function h(t,e,r){const n=(r?2:-2)*Math.PI*(t/e);return{real:Math.cos(n),imag:Math.sin(n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mergeRealAndImagArrays=t,exports.splitRealAndImagArrays=e,exports.complexWithEvenIndex=r,exports.complexWithOddIndex=n,exports.getComplexWithIndex=o,exports.assignToTypedArray=a,exports.exponents=l,exports.exponent=h;
},{}],"gfGj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={castTensor:!0,reshapeTensor:!0,linspaceImpl:!0,slice_util:!0,upcastType:!0,segment_util:!0};exports.castTensor=k,exports.reshapeTensor=w,exports.linspaceImpl=M,Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return d.upcastType}}),exports.segment_util=exports.slice_util=void 0;var t=require("../engine"),r=require("../ops/cast"),o=require("../ops/scalar"),n=require("../ops/tensor1d"),u=require("../ops/zeros"),c=require("../util"),s=require("../ops/axis_util");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return s[t]}}))});var a=require("../ops/broadcast_util");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var p=require("../ops/concat_util");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return p[t]}}))});var l=require("../ops/conv_util");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return l[t]}}))});var i=require("../ops/fused_util");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return i[t]}}))});var f=require("../ops/reduce_util");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return f[t]}}))});var y=E(require("../ops/slice_util"));exports.slice_util=y;var d=require("../types"),b=require("../ops/rotate_util");Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))});var O=require("../ops/array_ops_util");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return O[t]}}))});var _=require("../ops/gather_nd_util");Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return _[t]}}))});var j=require("../ops/scatter_nd_util");Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return j[t]}}))});var h=require("../ops/selu_util");Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return h[t]}}))});var P=require("../ops/erf_util");Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return P[t]}}))});var m=require("../log");Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return m[t]}}))});var x=require("../backends/complex_util");Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return x[t]}}))});var g=require("../ops/split_util");Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return g[t]}}))});var v=E(require("../ops/segment_util"));function q(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return q=function(){return e},e}function E(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=q();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function k(e,n,s){if("complex64"===n){if("complex64"===e.dtype)return e.clone();const t=(0,u.zeros)(e.shape),o=(0,r.cast)(e,"float32"),n=s.complex(o,t);return t.dispose(),o.dispose(),n}if(!(0,c.hasEncodingLoss)(e.dtype,n))return t.ENGINE.makeTensorFromDataId(e.dataId,e.shape,n);if("complex64"===e.dtype){const t=s.real(e),o=(0,r.cast)(t,n);return t.dispose(),o}if("int32"===n)return s.int(e);if("bool"===n){const t=(0,o.scalar)(0,e.dtype),r=s.notEqual(e,t);return t.dispose(),r}throw new Error(`Error in Cast: failed to cast ${e.dtype} to ${n}`)}function w(e,r){return t.ENGINE.makeTensorFromDataId(e.dataId,r,e.dtype)}function M(e,t,r){const o=(t-e)/(r-1),u=(0,c.makeZerosTypedArray)(r,"float32");u[0]=e;for(let n=1;n<u.length;n++)u[n]=u[n-1]+o;return(0,n.tensor1d)(u,"float32")}exports.segment_util=v;
},{"../engine":"tmUz","../ops/cast":"owKL","../ops/scalar":"RBNv","../ops/tensor1d":"R7Cm","../ops/zeros":"MNgB","../util":"UxaK","../ops/axis_util":"uTbM","../ops/broadcast_util":"nprq","../ops/concat_util":"I0tS","../ops/conv_util":"cqi6","../ops/fused_util":"pXCJ","../ops/reduce_util":"q1BX","../ops/slice_util":"sNMx","../types":"v4dC","../ops/rotate_util":"Ppt4","../ops/array_ops_util":"iLQh","../ops/gather_nd_util":"EXn0","../ops/scatter_nd_util":"mei8","../ops/selu_util":"HqZV","../ops/erf_util":"NNvh","../log":"nkQQ","../backends/complex_util":"HlsP","../ops/split_util":"E6ap","../ops/segment_util":"mcNf"}],"EB5C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.split=r;var e=require("../ops/slice");function r(r,s,t){const n=new Array(r.rank).fill(0),c=r.shape.slice();return s.map(s=>{const i=[...c];i[t]=s;const o=(0,e.slice)(r,n,i);return n[t]+=s,o})}
},{"../ops/slice":"xcz4"}],"YsL5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=r;var e=require("../ops/buffer");function r(r,t){const o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=r.shape[e]*t[e];const n=(0,e.buffer)(o,r.dtype);for(let e=0;e<n.values.length;++e){const t=n.indexToLoc(e),o=new Array(r.rank);for(let e=0;e<o.length;e++)o[e]=t[e]%r.shape[e];const s=r.locToIndex(o);n.values[e]=r.values[s]}return n.toTensor()}
},{"../ops/buffer":"SN3d"}],"VSYG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.topkImpl=t;var e=require("../ops/tensor"),r=require("../util");function t(t,o,n,s,l){const u=o[o.length-1],[a,i]=[t.length/u,u],p=(0,r.getTypedArrayFromDType)(n,a*s),y=(0,r.getTypedArrayFromDType)("int32",a*s);for(let e=0;e<a;e++){const r=e*i,o=t.subarray(r,r+i),n=[];for(let e=0;e<o.length;e++)n.push({value:o[e],index:e});n.sort((e,r)=>r.value-e.value);const l=e*s,u=p.subarray(l,l+s),a=y.subarray(l,l+s);for(let e=0;e<s;e++)u[e]=n[e].value,a[e]=n[e].index}const c=o.slice();return c[c.length-1]=s,[(0,e.tensor)(p,c,n),(0,e.tensor)(y,c,"int32")]}
},{"../ops/tensor":"tCGm","../util":"UxaK"}],"NxGv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"nonMaxSuppressionV3Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV3Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV4Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV4Impl}}),Object.defineProperty(exports,"nonMaxSuppressionV5Impl",{enumerable:!0,get:function(){return e.nonMaxSuppressionV5Impl}}),Object.defineProperty(exports,"split",{enumerable:!0,get:function(){return r.split}}),Object.defineProperty(exports,"tile",{enumerable:!0,get:function(){return n.tile}}),Object.defineProperty(exports,"topkImpl",{enumerable:!0,get:function(){return t.topkImpl}}),Object.defineProperty(exports,"whereImpl",{enumerable:!0,get:function(){return p.whereImpl}});var e=require("./non_max_suppression_impl"),r=require("./split_shared"),n=require("./tile_impl"),t=require("./topk_impl"),p=require("./where_impl");
},{"./non_max_suppression_impl":"YE1i","./split_shared":"EB5C","./tile_impl":"YsL5","./topk_impl":"VSYG","./where_impl":"MEsl"}],"rPpE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={io:!0,math:!0,browser:!0,gather_util:!0,scatter_util:!0,slice_util:!0,serialization:!0,tensor_util:!0,test_util:!0,util:!0,version_core:!0,AdadeltaOptimizer:!0,AdagradOptimizer:!0,AdamOptimizer:!0,AdamaxOptimizer:!0,MomentumOptimizer:!0,Optimizer:!0,RMSPropOptimizer:!0,SGDOptimizer:!0,Tensor:!0,TensorBuffer:!0,Variable:!0,Rank:!0,sumOutType:!0,upcastType:!0,Reduction:!0,customGrad:!0,grad:!0,grads:!0,valueAndGrad:!0,valueAndGrads:!0,variableGrads:!0,Environment:!0,env:!0,ENV:!0,nextFrame:!0,backend_util:!0,device_util:!0,kernel_impls:!0,KernelBackend:!0,DataStorage:!0};Object.defineProperty(exports,"version_core",{enumerable:!0,get:function(){return l.version}}),Object.defineProperty(exports,"AdadeltaOptimizer",{enumerable:!0,get:function(){return d.AdadeltaOptimizer}}),Object.defineProperty(exports,"AdagradOptimizer",{enumerable:!0,get:function(){return m.AdagradOptimizer}}),Object.defineProperty(exports,"AdamOptimizer",{enumerable:!0,get:function(){return f.AdamOptimizer}}),Object.defineProperty(exports,"AdamaxOptimizer",{enumerable:!0,get:function(){return b.AdamaxOptimizer}}),Object.defineProperty(exports,"MomentumOptimizer",{enumerable:!0,get:function(){return O.MomentumOptimizer}}),Object.defineProperty(exports,"Optimizer",{enumerable:!0,get:function(){return x.Optimizer}}),Object.defineProperty(exports,"RMSPropOptimizer",{enumerable:!0,get:function(){return y.RMSPropOptimizer}}),Object.defineProperty(exports,"SGDOptimizer",{enumerable:!0,get:function(){return _.SGDOptimizer}}),Object.defineProperty(exports,"Tensor",{enumerable:!0,get:function(){return g.Tensor}}),Object.defineProperty(exports,"TensorBuffer",{enumerable:!0,get:function(){return g.TensorBuffer}}),Object.defineProperty(exports,"Variable",{enumerable:!0,get:function(){return g.Variable}}),Object.defineProperty(exports,"Rank",{enumerable:!0,get:function(){return j.Rank}}),Object.defineProperty(exports,"sumOutType",{enumerable:!0,get:function(){return j.sumOutType}}),Object.defineProperty(exports,"upcastType",{enumerable:!0,get:function(){return j.upcastType}}),Object.defineProperty(exports,"Reduction",{enumerable:!0,get:function(){return P.Reduction}}),Object.defineProperty(exports,"customGrad",{enumerable:!0,get:function(){return h.customGrad}}),Object.defineProperty(exports,"grad",{enumerable:!0,get:function(){return h.grad}}),Object.defineProperty(exports,"grads",{enumerable:!0,get:function(){return h.grads}}),Object.defineProperty(exports,"valueAndGrad",{enumerable:!0,get:function(){return h.valueAndGrad}}),Object.defineProperty(exports,"valueAndGrads",{enumerable:!0,get:function(){return h.valueAndGrads}}),Object.defineProperty(exports,"variableGrads",{enumerable:!0,get:function(){return h.variableGrads}}),Object.defineProperty(exports,"Environment",{enumerable:!0,get:function(){return A.Environment}}),Object.defineProperty(exports,"env",{enumerable:!0,get:function(){return A.env}}),Object.defineProperty(exports,"ENV",{enumerable:!0,get:function(){return A.ENV}}),Object.defineProperty(exports,"nextFrame",{enumerable:!0,get:function(){return G.nextFrame}}),Object.defineProperty(exports,"KernelBackend",{enumerable:!0,get:function(){return E.KernelBackend}}),Object.defineProperty(exports,"DataStorage",{enumerable:!0,get:function(){return E.DataStorage}}),exports.kernel_impls=exports.device_util=exports.backend_util=exports.util=exports.test_util=exports.tensor_util=exports.serialization=exports.slice_util=exports.scatter_util=exports.gather_util=exports.browser=exports.math=exports.io=void 0;var r=D(require("./io/io"));exports.io=r;var t=D(require("./math"));exports.math=t;var i=D(require("./ops/browser"));exports.browser=i;var n=D(require("./ops/gather_nd_util"));exports.gather_util=n;var o=D(require("./ops/scatter_nd_util"));exports.scatter_util=o;var u=D(require("./ops/slice_util"));exports.slice_util=u;var a=D(require("./serialization"));exports.serialization=a;var p=D(require("./tensor_util"));exports.tensor_util=p;var s=D(require("./test_util"));exports.test_util=s;var c=D(require("./util"));exports.util=c;var l=require("./version"),d=require("./optimizers/adadelta_optimizer"),m=require("./optimizers/adagrad_optimizer"),f=require("./optimizers/adam_optimizer"),b=require("./optimizers/adamax_optimizer"),O=require("./optimizers/momentum_optimizer"),x=require("./optimizers/optimizer"),y=require("./optimizers/rmsprop_optimizer"),_=require("./optimizers/sgd_optimizer"),g=require("./tensor"),j=require("./types"),v=require("./ops/ops");Object.keys(v).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return v[r]}}))});var P=require("./ops/loss_ops_utils"),z=require("./train");Object.keys(z).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return z[r]}}))});var q=require("./globals");Object.keys(q).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return q[r]}}))});var k=require("./kernel_registry");Object.keys(k).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return k[r]}}))});var h=require("./gradients"),A=require("./environment"),G=require("./browser_util"),M=D(require("./backends/backend_util"));exports.backend_util=M;var w=D(require("./device_util"));exports.device_util=w;var T=D(require("./backends/kernel_impls"));exports.kernel_impls=T;var E=require("./backends/backend"),R=require("./kernel_names");function S(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return S=function(){return e},e}function D(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=S();if(r&&r.has(e))return r.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=i?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}Object.keys(R).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return R[r]}}))});
},{"./io/io":"wHIS","./math":"vRxb","./ops/browser":"UMh8","./ops/gather_nd_util":"EXn0","./ops/scatter_nd_util":"mei8","./ops/slice_util":"sNMx","./serialization":"AVD8","./tensor_util":"vUHI","./test_util":"IZ2A","./util":"UxaK","./version":"yMuw","./optimizers/adadelta_optimizer":"wMlv","./optimizers/adagrad_optimizer":"K66L","./optimizers/adam_optimizer":"JZUL","./optimizers/adamax_optimizer":"PX42","./optimizers/momentum_optimizer":"liyz","./optimizers/optimizer":"L1Zo","./optimizers/rmsprop_optimizer":"ncVU","./optimizers/sgd_optimizer":"Gn6t","./tensor":"Zqvm","./types":"v4dC","./ops/ops":"DHFH","./ops/loss_ops_utils":"AFm5","./train":"Qrdw","./globals":"UkUu","./kernel_registry":"yMO5","./gradients":"FjdM","./environment":"rgHm","./browser_util":"E3YT","./backends/backend_util":"gfGj","./device_util":"z8l0","./backends/kernel_impls":"NxGv","./backends/backend":"omoA","./kernel_names":"r3vI"}],"CWvo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.absGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),t=require("../ops/step");const o={kernelName:e.Abs,inputsToSave:["x"],gradFunc:(e,o)=>{const[a]=o;return{x:()=>(0,s.mul)(e,(0,t.step)((0,r.cast)(a,"float32"),-1))}}};exports.absGradConfig=o;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/mul":"WS4w","../ops/step":"DQ8I"}],"Z9tK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acosGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),o=require("../ops/neg"),a=require("../ops/scalar"),u=require("../ops/sqrt"),t=require("../ops/square"),i=require("../ops/sub");const n={kernelName:e.Acos,inputsToSave:["x"],gradFunc:(e,n)=>{const[c]=n;return{x:()=>{const n=(0,t.square)((0,r.cast)(c,"float32")),p=(0,u.sqrt)((0,i.sub)((0,a.scalar)(1),n));return(0,o.neg)((0,s.div)(e,p))}}}};exports.acosGradConfig=n;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/neg":"wgz6","../ops/scalar":"RBNv","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl"}],"fdXA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.acoshGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),o=require("../ops/sqrt"),t=require("../ops/square"),u=require("../ops/sub");const a={kernelName:e.Acosh,inputsToSave:["x"],gradFunc:(e,a)=>{const[i]=a;return{x:()=>{const a=(0,o.sqrt)((0,u.sub)((0,t.square)((0,r.cast)(i,"float32")),1));return(0,s.div)(e,a)}}}};exports.acoshGradConfig=a;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl"}],"QiSK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addGradConfig=void 0;var e=require("../kernel_names"),r=o(require("../ops/broadcast_util")),t=require("../ops/reshape"),n=require("../ops/sum");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(t,o,s):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const s={kernelName:e.Add,inputsToSave:["a","b"],gradFunc:(e,a)=>{const[o,s]=a,u=r.assertAndGetBroadcastShape(o.shape,s.shape);return{a:()=>{let a=e;const s=r.getReductionAxes(o.shape,u);return s.length>0&&(a=(0,n.sum)(a,s)),(0,t.reshape)(a,o.shape)},b:()=>{let a=e;const o=r.getReductionAxes(s.shape,u);return o.length>0&&(a=(0,n.sum)(a,o)),(0,t.reshape)(a,s.shape)}}}};exports.addGradConfig=s;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/reshape":"khVG","../ops/sum":"YHNB"}],"VILb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addNGradConfig=void 0;var e=require("../kernel_names");const r={kernelName:e.AddN,saveAllInputs:!0,gradFunc:(e,r)=>{const d={};return r.forEach((r,n)=>{d[n]=(()=>e.clone())}),d}};exports.addNGradConfig=r;
},{"../kernel_names":"r3vI"}],"YIY7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMaxGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.ArgMax,inputsToSave:["x"],gradFunc:(e,o)=>{const[a]=o;return{x:()=>(0,r.zerosLike)(a)}}};exports.argMaxGradConfig=o;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"gDQn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.argMinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const n={kernelName:e.ArgMin,inputsToSave:["x"],gradFunc:(e,n)=>{const[o]=n;return{x:()=>(0,r.zerosLike)(o)}}};exports.argMinGradConfig=n;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"hRMR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),a=require("../ops/scalar"),i=require("../ops/sqrt"),o=require("../ops/square"),u=require("../ops/sub");const t={kernelName:e.Asin,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,s.div)(e,(0,i.sqrt)((0,u.sub)((0,a.scalar)(1),(0,o.square)((0,r.cast)(n,"float32")))))}}};exports.asinGradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/scalar":"RBNv","../ops/sqrt":"dGNr","../ops/square":"rLyD","../ops/sub":"OFjl"}],"W857":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asinhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/cast"),a=require("../ops/div"),o=require("../ops/scalar"),i=require("../ops/sqrt"),t=require("../ops/square");const n={kernelName:e.Asinh,inputsToSave:["x"],gradFunc:(e,n)=>{const[u]=n;return{x:()=>{const n=(0,i.sqrt)((0,r.add)((0,o.scalar)(1),(0,t.square)((0,s.cast)(u,"float32"))));return(0,a.div)(e,n)}}}};exports.asinhGradConfig=n;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/scalar":"RBNv","../ops/sqrt":"dGNr","../ops/square":"rLyD"}],"K17p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atan2GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/broadcast_util"),a=require("../ops/div"),t=require("../ops/mul"),u=require("../ops/neg"),n=require("../ops/reshape"),o=require("../ops/square"),p=require("../ops/sum");const i={kernelName:e.Atan2,inputsToSave:["a","b"],gradFunc:(e,i)=>{const[d,q]=i,c=(0,s.assertAndGetBroadcastShape)(d.shape,q.shape);return{a:()=>{const u=(0,r.add)((0,o.square)(d),(0,o.square)(q));let i=(0,t.mul)(e,(0,a.div)(q,u));const h=(0,s.getReductionAxes)(d.shape,c);return h.length>0&&(i=(0,p.sum)(i,h)),(0,n.reshape)(i,d.shape)},b:()=>{const i=(0,r.add)((0,o.square)(d),(0,o.square)(q));let h=(0,u.neg)((0,t.mul)(e,(0,a.div)(d,i)));const l=(0,s.getReductionAxes)(q.shape,c);return l.length>0&&(h=(0,p.sum)(h,l)),(0,n.reshape)(h,q.shape)}}}};exports.atan2GradConfig=i;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/broadcast_util":"nprq","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/reshape":"khVG","../ops/square":"rLyD","../ops/sum":"YHNB"}],"naiu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),a=require("../ops/cast"),s=require("../ops/div"),t=require("../ops/square");const o={kernelName:e.Atan,inputsToSave:["x"],gradFunc:(e,o)=>{const[n]=o;return{x:()=>(0,s.div)(e,(0,r.add)((0,t.square)((0,a.cast)(n,"float32")),1))}}};exports.atanGradConfig=o;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/square":"rLyD"}],"Z2Wy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.atanhGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/div"),a=require("../ops/square"),o=require("../ops/sub"),t=require("../ops/scalar");const u={kernelName:e.Atanh,inputsToSave:["x"],gradFunc:(e,u)=>{const[i]=u;return{x:()=>(0,s.div)(e,(0,o.sub)((0,t.scalar)(1),(0,a.square)((0,r.cast)(i,"float32"))))}}};exports.atanhGradConfig=u;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/square":"rLyD","../ops/sub":"OFjl","../ops/scalar":"RBNv"}],"gSD8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3dBackprop=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=i(require("../util")),n=i(require("./conv_util")),a=require("./operation"),p=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var o={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=t?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}function u(a,s,i,u,l=[1,1,1],d,c){const k=(0,o.convertToTensor)(a,"dy","avgPool3dBackprop"),f=(0,o.convertToTensor)(s,"input","avgPool3dBackprop");let g=k,h=f,v=!1;4===f.rank&&(v=!0,g=(0,p.reshape)(k,[1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]]),h=(0,p.reshape)(f,[1,f.shape[0],f.shape[1],f.shape[2],f.shape[3]])),t.assert(5===g.rank,()=>"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+`${g.rank}.`),t.assert(5===h.rank,()=>"Error in avgPool3dBackprop: input must be rank 5 but got rank "+`${h.rank}.`),t.assert(n.eitherStridesOrDilationsAreOne(u,l),()=>"Error in avgPool3dBackprop: Either strides or dilations "+`must be 1. Got strides ${u} and dilations '${l}'`),null!=c&&t.assert(t.isInt(d),()=>"Error in maxPool3dBackprop: pad must be an integer when "+`using, dimRoundingMode ${c} but got pad ${d}.`);const P={dy:g,input:h},b={filterSize:i,strides:u,dilations:l,pad:d,dimRoundingMode:c},y=e.ENGINE.runKernelFunc(e=>{const r=n.computePool3DInfo(h.shape,i,u,l,d,c);return e.avgPool3dBackprop(g,h,r)},P,null,r.AvgPool3DBackprop,b);return v?(0,p.reshape)(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const l=(0,a.op)({avgPool3dBackprop_:u});exports.avgPool3dBackprop=l;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"H2kR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3DGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/avg_pool_3d_backprop");const r={kernelName:e.AvgPool3D,inputsToSave:["x"],gradFunc:(e,r,a)=>{const[i]=r,{filterSize:n,strides:d,dilations:s,pad:t,dimRoundingMode:l}=a,p=null==s?[1,1,1]:s;return{x:()=>(0,o.avgPool3dBackprop)(e,i,n,d,p,t,l)}}};exports.avgPool3DGradConfig=r;
},{"../kernel_names":"r3vI","../ops/avg_pool_3d_backprop":"gSD8"}],"S2bz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolBackprop=void 0;var e=require("../engine"),r=require("../kernel_names"),o=require("../tensor_util_env"),t=u(require("../util")),n=u(require("./conv_util")),a=require("./operation"),p=require("./reshape");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s();if(r&&r.has(e))return r.get(e);var o={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=t?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(o,n,a):o[n]=e[n]}return o.default=e,r&&r.set(e,o),o}function i(a,s,u,i,c){const l=(0,o.convertToTensor)(a,"dy","avgPoolBackprop"),k=(0,o.convertToTensor)(s,"input","avgPoolBackprop");t.assert(k.rank===l.rank,()=>`Rank of input (${k.rank}) does not match rank of dy (${l.rank})`);let f=k,v=l,h=!1;3===k.rank&&(h=!0,f=(0,p.reshape)(k,[1,k.shape[0],k.shape[1],k.shape[2]]),v=(0,p.reshape)(l,[1,l.shape[0],l.shape[1],l.shape[2]])),t.assert(4===v.rank,()=>"Error in avgPoolBackprop: dy must be rank 4 but got rank "+`${v.rank}.`),t.assert(4===f.rank,()=>"Error in avgPoolBackprop: input must be rank 4 but got rank "+`${f.rank}.`);const g={dy:v,input:f},P={filterSize:u,strides:i,pad:c},d=e.ENGINE.runKernelFunc(e=>{const r=n.computePool2DInfo(f.shape,u,i,1,c);return e.avgPoolBackprop(v,f,r)},g,null,r.AvgPoolBackprop,P);return h?(0,p.reshape)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const c=(0,a.op)({avgPoolBackprop_:i});exports.avgPoolBackprop=c;
},{"../engine":"tmUz","../kernel_names":"r3vI","../tensor_util_env":"x0Hg","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"nTws":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPoolGradConfig=void 0;var e=require("../kernel_names"),o=require("../ops/avg_pool_backprop");const r={kernelName:e.AvgPool,inputsToSave:["x"],gradFunc:(e,r,a)=>{const[s]=r,{filterSize:t,strides:p,pad:i}=a;return{x:()=>(0,o.avgPoolBackprop)(e,s,t,p,i)}}};exports.avgPoolGradConfig=r;
},{"../kernel_names":"r3vI","../ops/avg_pool_backprop":"S2bz"}],"vK3E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchMatMulGradConfig=void 0;var a=require("../kernel_names"),t=require("../ops/mat_mul");const e={kernelName:a.BatchMatMul,inputsToSave:["a","b"],gradFunc:(a,e,r)=>{const[u,l]=e,{transposeA:s,transposeB:M}=r;return s||M?!s&&M?{a:()=>(0,t.matMul)(a,l,!1,!1),b:()=>(0,t.matMul)(a,u,!0,!1)}:s&&!M?{a:()=>(0,t.matMul)(l,a,!1,!0),b:()=>(0,t.matMul)(u,a,!1,!1)}:{a:()=>(0,t.matMul)(l,a,!0,!0),b:()=>(0,t.matMul)(a,u,!0,!0)}:{a:()=>(0,t.matMul)(a,l,!1,!0),b:()=>(0,t.matMul)(u,a,!0,!1)}}};exports.batchMatMulGradConfig=e;
},{"../kernel_names":"r3vI","../ops/mat_mul":"A3yk"}],"HgCv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.batchToSpaceNDGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/space_to_batch_nd");const a={kernelName:e.BatchToSpaceND,gradFunc:(e,a,o)=>{const{blockShape:c,crops:t}=o;return{x:()=>(0,r.spaceToBatchND)(e,c,t)}}};exports.batchToSpaceNDGradConfig=a;
},{"../kernel_names":"r3vI","../ops/space_to_batch_nd":"nPoV"}],"VUnB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.broadcastToGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/sum");const o={kernelName:e.BroadcastTo,gradFunc:(e,o,t)=>{const a=t,s=a.inputShape,n=a.shape,c=Array.from(n);for(let r=s.length-1;r>=0;r--)if(s[r]===n[r])c[r]=1;else if(1!==s[r])throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${n}].`);const d=[];for(let r=0;r<c.length;r++)c[r]>1&&d.push(r);return{x:()=>(0,r.sum)(e,d,!0)}}};exports.broadcastToGradConfig=o;
},{"../kernel_names":"r3vI","../ops/sum":"YHNB"}],"KxrM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.castGradConfig=void 0;var e=require("../kernel_names");const r={kernelName:e.Cast,gradFunc:e=>({x:()=>e.clone()})};exports.castGradConfig=r;
},{"../kernel_names":"r3vI"}],"LcPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ceilGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const i={kernelName:e.Ceil,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.ceilGradConfig=i;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"qCpm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clipByValueGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/greater_equal"),l=require("../ops/less_equal"),a=require("../ops/logical_and"),i=require("../ops/where"),s=require("../ops/zeros_like");const u={kernelName:e.ClipByValue,inputsToSave:["x"],gradFunc:(e,u,o)=>{const[p]=u,{clipValueMin:n,clipValueMax:t}=o;return{x:()=>(0,i.where)((0,a.logicalAnd)((0,r.greaterEqual)(p,n),(0,l.lessEqual)(p,t)),e,(0,s.zerosLike)(e))}}};exports.clipByValueGradConfig=u;
},{"../kernel_names":"r3vI","../ops/greater_equal":"wG0H","../ops/less_equal":"NxL8","../ops/logical_and":"ntJL","../ops/where":"AEtV","../ops/zeros_like":"Jky8"}],"QcRZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.concatGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/split"),a=require("../util");const s={kernelName:e.Concat,saveAllInputs:!0,gradFunc:(e,s,t)=>{const n=s.map(e=>e.shape),{axis:o}=t,p=(0,a.parseAxisParam)(o,s[0].shape)[0],i=n.map(e=>e[p]);return(0,r.split)(e,i,p).map(e=>()=>e)}};exports.concatGradConfig=s;
},{"../kernel_names":"r3vI","../ops/split":"L2gY","../util":"UxaK"}],"NnOQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv2d_backprop_filter"),t=require("../ops/conv2d_backprop_input"),n=a(require("../ops/conv_util")),o=a(require("../util"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const p={kernelName:e.Conv2D,inputsToSave:["x","filter"],gradFunc:(e,i,a)=>{const[p,u]=i,{dilations:s,strides:c,pad:l,dataFormat:f}=a;return o.assert(n.tupleValuesAreOne(s),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${s}'`),{x:()=>(0,t.conv2DBackpropInput)(p.shape,e,u,c,l,f),filter:()=>(0,r.conv2DBackpropFilter)(p,e,u.shape,c,l,f)}}};exports.conv2DGradConfig=p;
},{"../kernel_names":"r3vI","../ops/conv2d_backprop_filter":"Y2RI","../ops/conv2d_backprop_input":"ufM1","../ops/conv_util":"cqi6","../util":"UxaK"}],"bggh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv2DBackpropInputGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv2d"),o=require("../ops/conv2d_backprop_filter");const n={kernelName:e.Conv2DBackpropInput,inputsToSave:["dy","filter"],gradFunc:(e,n,p)=>{const[t,a]=n,{strides:d,pad:c,dataFormat:i,dimRoundingMode:s}=p;return{dy:()=>(0,r.conv2d)(e,a,d,c,i,1,s),filter:()=>(0,o.conv2DBackpropFilter)(e,t,a.shape,d,c,i,s)}}};exports.conv2DBackpropInputGradConfig=n;
},{"../kernel_names":"r3vI","../ops/conv2d":"K8t2","../ops/conv2d_backprop_filter":"Y2RI"}],"Rks7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DBackpropFilter=void 0;var e=require("../engine"),r=require("../kernel_names"),t=s(require("../util")),n=s(require("./conv_util")),o=require("./operation"),p=require("./reshape");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var p=n?Object.getOwnPropertyDescriptor(e,o):null;p&&(p.get||p.set)?Object.defineProperty(t,o,p):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}function i(o,a,s,i,u){let c=o;4===o.rank&&(c=(0,p.reshape)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]));let l=a;4===l.rank&&(l=(0,p.reshape)(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),t.assert(5===c.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+`${c.shape}.`),t.assert(5===l.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+`${l.shape}.`),t.assert(5===s.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+`${s}.`),t.assert(c.shape[4]===s[3],()=>`Error in conv3dDerFilter: depth of input ${c.shape[4]}) must `+`match input depth in filter (${s[3]}.`),t.assert(l.shape[4]===s[4],()=>`Error in conv3dDerFilter: depth of dy (${l.shape[4]}) must `+`match output depth for filter (${s[4]}).`);const h={x:c,dy:l},f={strides:i,pad:u,filterShape:s};return e.ENGINE.runKernelFunc(e=>{const r=n.computeConv3DInfo(c.shape,s,i,1,u);return e.conv3dDerFilter(c,l,r)},h,null,r.Conv3DBackpropFilterV2,f)}const u=(0,o.op)({conv3DBackpropFilter_:i});exports.conv3DBackpropFilter=u;
},{"../engine":"tmUz","../kernel_names":"r3vI","../util":"UxaK","./conv_util":"cqi6","./operation":"rO1i","./reshape":"khVG"}],"HQiu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.conv3DGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/conv3d_backprop_filter"),t=require("../ops/conv3d_backprop_input"),n=require("../ops/conv_util"),o=a(require("../util"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i();if(r&&r.has(e))return r.get(e);var t={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(t,o,a):t[o]=e[o]}return t.default=e,r&&r.set(e,t),t}const p={kernelName:e.Conv3D,inputsToSave:["x","filter"],gradFunc:(e,i,a)=>{const{dilations:p,strides:u,pad:s}=a;o.assert((0,n.tupleValuesAreOne)(p),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+`not yet supported in gradients. Got dilations '${p}'`);const[c,l]=i;return{x:()=>(0,t.conv3DBackpropInput)(c.shape,e,l,u,s),filter:()=>(0,r.conv3DBackpropFilter)(c,e,l.shape,u,s)}}};exports.conv3DGradConfig=p;
},{"../kernel_names":"r3vI","../ops/conv3d_backprop_filter":"Rks7","../ops/conv3d_backprop_input":"zJgE","../ops/conv_util":"cqi6","../util":"UxaK"}],"kZFP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cosGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),o=require("../ops/neg"),n=require("../ops/sin");const t={kernelName:e.Cos,inputsToSave:["x"],gradFunc:(e,t)=>{const[i]=t;return{x:()=>(0,s.mul)((0,o.neg)((0,n.sin)((0,r.cast)(i,"float32"))),e)}}};exports.cosGradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/sin":"AwzN"}],"CUjH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.coshGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/cast"),s=require("../ops/mul"),o=require("../ops/sinh");const t={kernelName:e.Cosh,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>(0,s.mul)((0,o.sinh)((0,r.cast)(n,"float32")),e)}}};exports.coshGradConfig=t;
},{"../kernel_names":"r3vI","../ops/cast":"owKL","../ops/mul":"WS4w","../ops/sinh":"nOJq"}],"kdoE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cumsumGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/axis_util"),s=require("../ops/cumsum"),u=require("../ops/transpose");const t={kernelName:e.Cumsum,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[o]=t,{axis:i,exclusive:a,reverse:m}=n;return{x:()=>{const t=(0,r.getAxesPermutation)([i],o.rank);let n=(0,s.cumsum)(e,i,a,!m);return null!=t&&(n=(0,u.transpose)(n,t)),n}}}};exports.cumsumGradConfig=t;
},{"../kernel_names":"r3vI","../ops/axis_util":"uTbM","../ops/cumsum":"MovR","../ops/transpose":"yiEV"}],"w99S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.depthwiseConv2dNativeGradConfig=void 0;var e=require("../kernel_names"),t=a(require("../ops/conv_util")),r=require("../ops/depthwise_conv2d_native_backprop_filter"),n=require("../ops/depthwise_conv2d_native_backprop_input"),i=a(require("../util"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}const s={kernelName:e.DepthwiseConv2dNative,inputsToSave:["x","filter"],gradFunc:(e,o,a)=>{const{dilations:s,strides:d,pad:p,dimRoundingMode:u}=a,l=null==s?[1,1]:s;i.assert(t.tupleValuesAreOne(l),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+`'${l}'`);const[v,f]=o;return i.assert(4===v.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+`rank 4, but got rank ${v.rank}.`),i.assert(4===f.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+`rank 4, but got rank ${f.rank}.`),i.assert(v.shape[3]===f.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+`channels (${v.shape[3]}) must match the inChannels dimension `+`in filter ${f.shape[2]}.`),i.assert(t.eitherStridesOrDilationsAreOne(d,l),()=>"Error in gradient of depthwiseConv2d: Either strides or "+`dilations must be  1. Got strides ${d} and dilations `+`'${l}'.`),null!=u&&i.assert(i.isInt(p),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${u} but got pad ${p}.`),{x:()=>(0,n.depthwiseConv2dNativeBackpropInput)(v.shape,e,f,d,p,s,u),filter:()=>(0,r.depthwiseConv2dNativeBackpropFilter)(v,e,f.shape,d,p,s,u)}}};exports.depthwiseConv2dNativeGradConfig=s;
},{"../kernel_names":"r3vI","../ops/conv_util":"cqi6","../ops/depthwise_conv2d_native_backprop_filter":"NeJN","../ops/depthwise_conv2d_native_backprop_input":"xNAn","../util":"UxaK"}],"c6gQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dilation2dGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const i={kernelName:r.Dilation2D,inputsToSave:["x","filter"],gradFunc:(i,n,t)=>{const[o,l]=n,a={x:o,filter:l,dy:i},d={x:o,filter:l,dy:i};return{x:()=>e.ENGINE.runKernel(r.Dilation2DBackpropInput,a,t),filter:()=>e.ENGINE.runKernel(r.Dilation2DBackpropFilter,d,t)}}};exports.dilation2dGradConfig=i;
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"JZv5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.divGradConfig=void 0;var e=require("../kernel_names"),r=c(require("../ops/broadcast_util")),t=require("../ops/cast"),s=require("../ops/div"),n=require("../ops/mul"),o=require("../ops/neg"),a=require("../ops/reshape"),u=require("../ops/square"),i=require("../ops/sum");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p();if(r&&r.has(e))return r.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=s?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(t,n,o):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}const f={kernelName:e.Div,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[c,f]=p,l=r.assertAndGetBroadcastShape(c.shape,f.shape);return{a:()=>{const n=(0,s.div)(e,(0,t.cast)(f,"float32")),o=r.getReductionAxes(c.shape,l);return o.length>0?(0,a.reshape)((0,i.sum)(n,o),c.shape):n},b:()=>{let p=(0,n.mul)(e,(0,t.cast)(c,"float32"));const d=r.getReductionAxes(f.shape,l);d.length>0&&(p=(0,a.reshape)((0,i.sum)(p,d),f.shape));const v=(0,u.square)(f);return(0,o.neg)((0,s.div)(p,(0,t.cast)(v,"float32")))}}}};exports.divGradConfig=f;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/reshape":"khVG","../ops/square":"rLyD","../ops/sum":"YHNB"}],"WjnE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eluGradConfig=void 0;var e=require("../engine"),r=require("../kernel_names");const u={kernelName:r.Elu,outputsToSave:[!0],gradFunc:(u,n)=>{const[l]=n,o=e=>e.eluDer(u,l),t={dy:u,y:l};return{x:()=>e.ENGINE.runKernelFunc(o,t,null,r.EluGrad)}}};exports.eluGradConfig=u;
},{"../engine":"tmUz","../kernel_names":"r3vI"}],"Hv5I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.erfGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),s=require("../ops/mul"),u=require("../ops/neg"),o=require("../ops/square");const t={kernelName:e.Erf,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=(0,s.mul)((0,r.exp)((0,u.neg)((0,o.square)(n))),2/Math.sqrt(Math.PI));return{x:()=>(0,s.mul)(e,a)}}};exports.erfGradConfig=t;
},{"../kernel_names":"r3vI","../ops/exp":"S24W","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/square":"rLyD"}],"Xe3d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/mul");const o={kernelName:e.Exp,outputsToSave:[!0],gradFunc:(e,o)=>{const[t]=o;return{x:()=>(0,r.mul)(e,t)}}};exports.expGradConfig=o;
},{"../kernel_names":"r3vI","../ops/mul":"WS4w"}],"VuWk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expm1GradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/exp"),o=require("../ops/mul");const p={kernelName:e.Expm1,inputsToSave:["x"],gradFunc:(e,p)=>{const[s]=p;return{x:()=>(0,o.mul)(e,(0,r.exp)(s))}}};exports.expm1GradConfig=p;
},{"../kernel_names":"r3vI","../ops/exp":"S24W","../ops/mul":"WS4w"}],"BY2s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/zeros_like");const o={kernelName:e.Floor,gradFunc:e=>({x:()=>(0,r.zerosLike)(e)})};exports.floorGradConfig=o;
},{"../kernel_names":"r3vI","../ops/zeros_like":"Jky8"}],"OLbI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.floorDivGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/broadcast_util"),s=require("../ops/cast"),o=require("../ops/div"),t=require("../ops/mul"),a=require("../ops/neg"),u=require("../ops/reshape"),i=require("../ops/square"),n=require("../ops/sum");const p={kernelName:e.FloorDiv,inputsToSave:["a","b"],gradFunc:(e,p)=>{const[c,l]=p,d=(0,r.assertAndGetBroadcastShape)(c.shape,l.shape);return{a:()=>{const t=(0,o.div)(e,(0,s.cast)(l,"float32")),a=(0,r.getReductionAxes)(c.shape,d);return a.length>0?(0,u.reshape)((0,n.sum)(t,a),c.shape):t},b:()=>{let p=(0,t.mul)(e,(0,s.cast)(c,"float32"));const h=(0,r.getReductionAxes)(l.shape,d);h.length>0&&(p=(0,u.reshape)((0,n.sum)(p,h),l.shape));const q=(0,i.square)(l);return(0,a.neg)((0,o.div)(p,(0,s.cast)(q,"float32")))}}}};exports.floorDivGradConfig=p;
},{"../kernel_names":"r3vI","../ops/broadcast_util":"nprq","../ops/cast":"owKL","../ops/div":"XyQ4","../ops/mul":"WS4w","../ops/neg":"wgz6","../ops/reshape":"khVG","../ops/square":"rLyD","../ops/sum":"YHNB"}],"sMFs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fusedBatchNormGradConfig=void 0;var e=require("../kernel_names"),r=require("../ops/add"),s=require("../ops/broadcast_util"),a=require("../ops/mul"),u=require("../ops/reshape"),l=require("../ops/rsqrt"),p=require("../ops/scalar"),t=require("../ops/sub"),n=require("../ops/sum"),o=require("../ops/tile");const m={kernelName:e.FusedBatchNorm,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,m,h)=>{const{varianceEpsilon:i}=h,[c,d,q,f]=m,k=null==f?(0,p.scalar)(1):f,v=(0,s.getReductionAxes)(d.shape,c.shape),x=[];if(1===d.rank){for(let e=0;e<c.shape.length-1;++e)x.push(c.shape[e]);x.push(1)}const g=(0,t.sub)(c,d),b=(0,a.mul)(e,k),N=(0,l.rsqrt)((0,r.add)(q,(0,p.scalar)(i))),_=(0,a.mul)((0,a.mul)((0,a.mul)(N,N),N),(0,p.scalar)(-.5));return{x:()=>1===d.rank?(0,u.reshape)((0,a.mul)((0,a.mul)(e,(0,o.tile)((0,u.reshape)(N,[1,1,1,d.shape[0]]),x)),k),c.shape):(0,u.reshape)((0,a.mul)((0,a.mul)(e,N),k),c.shape),mean:()=>{let e=(0,a.mul)((0,a.mul)(N,(0,p.scalar)(-1)),b);return 1===d.rank&&(e=(0,n.sum)(e,v)),(0,u.reshape)(e,d.shape)},variance:()=>{let e=(0,a.mul)((0,a.mul)(_,g),b);return 1===d.rank&&(e=(0,n.sum)(e,v)),(0,u.reshape)(e,d.shape)},scale:()=>{const r=(0,a.mul)(g,N);let s=(0,a.mul)(e,r);return 1===d.rank&&(s=(0,n.sum)(s,v)),(0,u.reshape)(s,d.shape)},offset:()=>{let r=e;return 1===d.rank&&(r=(0,n.sum)(r,v)),(0,u.reshape)(r,d.shape)}}}};exports.fusedBatchNormGradConfig=m;
},{"../kernel_names":"r3vI","../ops/add":"geuL","../ops/broadcast_util":"nprq","../ops/mul":"WS4w","../ops/reshape":"khVG","../ops/rsqrt":"paOW","../ops/scalar":"RBNv","../ops/sub":"OFjl","../ops/sum":"YHNB","../ops/tile":"C900"}]